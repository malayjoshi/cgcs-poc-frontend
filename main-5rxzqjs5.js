var c5=Object.defineProperty,h5=Object.defineProperties;var f5=Object.getOwnPropertyDescriptors;var BO=Object.getOwnPropertySymbols;var p5=Object.prototype.hasOwnProperty,d5=Object.prototype.propertyIsEnumerable;var VO=(e,n,r)=>n in e?c5(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,gy=(e,n)=>{for(var r in n||={})p5.call(n,r)&&VO(e,r,n[r]);if(BO)for(var r of BO(n))d5.call(n,r)&&VO(e,r,n[r]);return e},ov=(e,n)=>h5(e,f5(n));var wA=(e,n,r)=>new Promise((o,s)=>{var l=d=>{try{p(r.next(d))}catch(g){s(g)}},h=d=>{try{p(r.throw(d))}catch(g){s(g)}},p=d=>d.done?o(d.value):Promise.resolve(d.value).then(l,h);p((r=r.apply(e,n)).next())});function UO(e,n){return Object.is(e,n)}var t0=null,EA=!1,xA=1,G_=Symbol("SIGNAL");function Jy(e){let n=t0;return t0=e,n}function zO(){return t0}var jx={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function EI(e){if(EA)throw new Error("");if(t0===null)return;t0.consumerOnSignalRead(e);let n=t0.nextProducerIndex++;if(CA(t0),n<t0.producerNode.length&&t0.producerNode[n]!==e&&Lx(t0)){let r=t0.producerNode[n];SA(r,t0.producerIndexOfThis[n])}t0.producerNode[n]!==e&&(t0.producerNode[n]=e,t0.producerIndexOfThis[n]=Lx(t0)?qO(e,t0,n):0),t0.producerLastReadVersion[n]=e.version}function g5(){xA++}function HO(e){if(!(Lx(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===xA)){if(!e.producerMustRecompute(e)&&!TI(e)){e.dirty=!1,e.lastCleanEpoch=xA;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=xA}}function $O(e){if(e.liveConsumerNode===void 0)return;let n=EA;EA=!0;try{for(let r of e.liveConsumerNode)r.dirty||m5(r)}finally{EA=n}}function GO(){return t0?.consumerAllowSignalWrites!==!1}function m5(e){e.dirty=!0,$O(e),e.consumerMarkedDirty?.(e)}function AA(e){return e&&(e.nextProducerIndex=0),Jy(e)}function xI(e,n){if(Jy(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Lx(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)SA(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function TI(e){CA(e);for(let n=0;n<e.producerNode.length;n++){let r=e.producerNode[n],o=e.producerLastReadVersion[n];if(o!==r.version||(HO(r),o!==r.version))return!0}return!1}function AI(e){if(CA(e),Lx(e))for(let n=0;n<e.producerNode.length;n++)SA(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function qO(e,n,r){if(WO(e),e.liveConsumerNode.length===0&&YO(e))for(let o=0;o<e.producerNode.length;o++)e.producerIndexOfThis[o]=qO(e.producerNode[o],e,o);return e.liveConsumerIndexOfThis.push(r),e.liveConsumerNode.push(n)-1}function SA(e,n){if(WO(e),e.liveConsumerNode.length===1&&YO(e))for(let o=0;o<e.producerNode.length;o++)SA(e.producerNode[o],e.producerIndexOfThis[o]);let r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let o=e.liveConsumerIndexOfThis[n],s=e.liveConsumerNode[n];CA(s),s.producerIndexOfThis[o]=n}}function Lx(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function CA(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function WO(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function YO(e){return e.producerNode!==void 0}function ZO(e){let n=Object.create(y5);n.computation=e;let r=()=>{if(HO(n),EI(n),n.value===TA)throw n.error;return n.value};return r[G_]=n,r}var bI=Symbol("UNSET"),wI=Symbol("COMPUTING"),TA=Symbol("ERRORED"),y5=ov(gy({},jx),{value:bI,dirty:!0,error:null,equal:UO,producerMustRecompute(e){return e.value===bI||e.value===wI},producerRecomputeValue(e){if(e.value===wI)throw new Error("Detected cycle in computations.");let n=e.value;e.value=wI;let r=AA(e),o;try{o=e.computation()}catch(s){o=TA,e.error=s}finally{xI(e,r)}if(n!==bI&&n!==TA&&o!==TA&&e.equal(n,o)){e.value=n;return}e.value=o,e.version++}});function v5(){throw new Error}var XO=v5;function KO(){XO()}function JO(e){XO=e}var _5=null;function QO(e){let n=Object.create(eN);n.value=e;let r=()=>(EI(n),n.value);return r[G_]=n,r}function SI(e,n){GO()||KO(),e.equal(e.value,n)||(e.value=n,b5(e))}function tN(e,n){GO()||KO(),SI(e,n(e.value))}var eN=ov(gy({},jx),{equal:UO,value:void 0});function b5(e){e.version++,g5(),$O(e),_5?.()}function Hy(e){return typeof e=="function"}function v1(e){let r=e(o=>{Error.call(o),o.stack=new Error().stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var IA=v1(e=>function(r){e(this),this.message=r?`${r.length} errors occurred during unsubscription:
${r.map((o,s)=>`${s+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=r});function aw(e,n){if(e){let r=e.indexOf(n);0<=r&&e.splice(r,1)}}var Lv=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(let l of r)l.remove(this);else r.remove(this);let{initialTeardown:o}=this;if(Hy(o))try{o()}catch(l){n=l instanceof IA?l.errors:[l]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let l of s)try{nN(l)}catch(h){n=n??[],h instanceof IA?n=[...n,...h.errors]:n.push(h)}}if(n)throw new IA(n)}}add(n){var r;if(n&&n!==this)if(this.closed)nN(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(n)}}_hasParent(n){let{_parentage:r}=this;return r===n||Array.isArray(r)&&r.includes(n)}_addParent(n){let{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(n),r):r?[r,n]:n}_removeParent(n){let{_parentage:r}=this;r===n?this._parentage=null:Array.isArray(r)&&aw(r,n)}remove(n){let{_finalizers:r}=this;r&&aw(r,n),n instanceof e&&n._removeParent(this)}};Lv.EMPTY=(()=>{let e=new Lv;return e.closed=!0,e})();var CI=Lv.EMPTY;function DA(e){return e instanceof Lv||e&&"closed"in e&&Hy(e.remove)&&Hy(e.add)&&Hy(e.unsubscribe)}function nN(e){Hy(e)?e():e.unsubscribe()}var h_={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hE={setTimeout(e,n,...r){let{delegate:o}=hE;return o?.setTimeout?o.setTimeout(e,n,...r):setTimeout(e,n,...r)},clearTimeout(e){let{delegate:n}=hE;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function kA(e){hE.setTimeout(()=>{let{onUnhandledError:n}=h_;if(n)n(e);else throw e})}function Fx(){}var rN=II("C",void 0,void 0);function iN(e){return II("E",void 0,e)}function oN(e){return II("N",e,void 0)}function II(e,n,r){return{kind:e,value:n,error:r}}var lw=null;function fE(e){if(h_.useDeprecatedSynchronousErrorHandling){let n=!lw;if(n&&(lw={errorThrown:!1,error:null}),e(),n){let{errorThrown:r,error:o}=lw;if(lw=null,r)throw o}}else e()}function sN(e){h_.useDeprecatedSynchronousErrorHandling&&lw&&(lw.errorThrown=!0,lw.error=e)}var uw=class extends Lv{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,DA(n)&&n.add(this)):this.destination=x5}static create(n,r,o){return new pE(n,r,o)}next(n){this.isStopped?kI(oN(n),this):this._next(n)}error(n){this.isStopped?kI(iN(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?kI(rN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},w5=Function.prototype.bind;function DI(e,n){return w5.call(e,n)}var MI=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:r}=this;if(r.next)try{r.next(n)}catch(o){MA(o)}}error(n){let{partialObserver:r}=this;if(r.error)try{r.error(n)}catch(o){MA(o)}else MA(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(r){MA(r)}}},pE=class extends uw{constructor(n,r,o){super();let s;if(Hy(n)||!n)s={next:n??void 0,error:r??void 0,complete:o??void 0};else{let l;this&&h_.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=()=>this.unsubscribe(),s={next:n.next&&DI(n.next,l),error:n.error&&DI(n.error,l),complete:n.complete&&DI(n.complete,l)}):s=n}this.destination=new MI(s)}};function MA(e){h_.useDeprecatedSynchronousErrorHandling?sN(e):kA(e)}function E5(e){throw e}function kI(e,n){let{onStoppedNotification:r}=h_;r&&hE.setTimeout(()=>r(e,n))}var x5={closed:!0,next:Fx,error:E5,complete:Fx};var dE=typeof Symbol=="function"&&Symbol.observable||"@@observable";function V0(e){return e}function OI(...e){return NI(e)}function NI(e){return e.length===0?V0:e.length===1?e[0]:function(r){return e.reduce((o,s)=>s(o),r)}}var nv=(()=>{class e{constructor(r){r&&(this._subscribe=r)}lift(r){let o=new e;return o.source=this,o.operator=r,o}subscribe(r,o,s){let l=A5(r)?r:new pE(r,o,s);return fE(()=>{let{operator:h,source:p}=this;l.add(h?h.call(l,p):p?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(r){try{return this._subscribe(r)}catch(o){r.error(o)}}forEach(r,o){return o=aN(o),new o((s,l)=>{let h=new pE({next:p=>{try{r(p)}catch(d){l(d),h.unsubscribe()}},error:l,complete:s});this.subscribe(h)})}_subscribe(r){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(r)}[dE](){return this}pipe(...r){return NI(r)(this)}toPromise(r){return r=aN(r),new r((o,s)=>{let l;this.subscribe(h=>l=h,h=>s(h),()=>o(l))})}}return e.create=n=>new e(n),e})();function aN(e){var n;return(n=e??h_.Promise)!==null&&n!==void 0?n:Promise}function T5(e){return e&&Hy(e.next)&&Hy(e.error)&&Hy(e.complete)}function A5(e){return e&&e instanceof uw||T5(e)&&DA(e)}function PI(e){return Hy(e?.lift)}function tv(e){return n=>{if(PI(n))return n.lift(function(r){try{return e(r,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xy(e,n,r,o,s){return new RI(e,n,r,o,s)}var RI=class extends uw{constructor(n,r,o,s,l,h){super(n),this.onFinalize=l,this.shouldUnsubscribe=h,this._next=r?function(p){try{r(p)}catch(d){n.error(d)}}:super._next,this._error=s?function(p){try{s(p)}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(p){n.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:r}=this;super.unsubscribe(),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function gE(){return tv((e,n)=>{let r=null;e._refCount++;let o=Xy(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){r=null;return}let s=e._connection,l=r;r=null,s&&(!l||s===l)&&s.unsubscribe(),n.unsubscribe()});e.subscribe(o),o.closed||(r=e.connect())})}var mE=class extends nv{constructor(n,r){super(),this.source=n,this.subjectFactory=r,this._subject=null,this._refCount=0,this._connection=null,PI(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Lv;let r=this.getSubject();n.add(this.source.subscribe(Xy(r,void 0,()=>{this._teardown(),r.complete()},o=>{this._teardown(),r.error(o)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Lv.EMPTY)}return n}refCount(){return gE()(this)}};var lN=v1(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Yv=(()=>{class e extends nv{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){let o=new OA(this,this);return o.operator=r,o}_throwIfClosed(){if(this.closed)throw new lN}next(r){fE(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(r)}})}error(r){fE(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;let{observers:o}=this;for(;o.length;)o.shift().error(r)}})}complete(){fE(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){let{hasError:o,isStopped:s,observers:l}=this;return o||s?CI:(this.currentObservers=null,l.push(r),new Lv(()=>{this.currentObservers=null,aw(l,r)}))}_checkFinalizedStatuses(r){let{hasError:o,thrownError:s,isStopped:l}=this;o?r.error(s):l&&r.complete()}asObservable(){let r=new nv;return r.source=this,r}}return e.create=(n,r)=>new OA(n,r),e})(),OA=class extends Yv{constructor(n,r){super(),this.destination=n,this.source=r}next(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.next)===null||o===void 0||o.call(r,n)}error(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.error)===null||o===void 0||o.call(r,n)}complete(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)}_subscribe(n){var r,o;return(o=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&o!==void 0?o:CI}};var p0=class extends Yv{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let r=super._subscribe(n);return!r.closed&&n.next(this._value),r}getValue(){let{hasError:n,thrownError:r,_value:o}=this;if(n)throw r;return this._throwIfClosed(),o}next(n){super.next(this._value=n)}};var LI={now(){return(LI.delegate||Date).now()},delegate:void 0};var NA=class extends Lv{constructor(n,r){super()}schedule(n,r=0){return this}};var Bx={setInterval(e,n,...r){let{delegate:o}=Bx;return o?.setInterval?o.setInterval(e,n,...r):setInterval(e,n,...r)},clearInterval(e){let{delegate:n}=Bx;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var PA=class extends NA{constructor(n,r){super(n,r),this.scheduler=n,this.work=r,this.pending=!1}schedule(n,r=0){var o;if(this.closed)return this;this.state=n;let s=this.id,l=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(l,s,r)),this.pending=!0,this.delay=r,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(l,this.id,r),this}requestAsyncId(n,r,o=0){return Bx.setInterval(n.flush.bind(n,this),o)}recycleAsyncId(n,r,o=0){if(o!=null&&this.delay===o&&this.pending===!1)return r;r!=null&&Bx.clearInterval(r)}execute(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let o=this._execute(n,r);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,r){let o=!1,s;try{this.work(n)}catch(l){o=!0,s=l||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:n,scheduler:r}=this,{actions:o}=r;this.work=this.state=this.scheduler=null,this.pending=!1,aw(o,this),n!=null&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null,super.unsubscribe()}}};var yE=class e{constructor(n,r=e.now){this.schedulerActionCtor=n,this.now=r}schedule(n,r=0,o){return new this.schedulerActionCtor(this,n).schedule(o,r)}};yE.now=LI.now;var RA=class extends yE{constructor(n,r=yE.now){super(n,r),this.actions=[],this._active=!1}flush(n){let{actions:r}=this;if(this._active){r.push(n);return}let o;this._active=!0;do if(o=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,o){for(;n=r.shift();)n.unsubscribe();throw o}}};var uN=new RA(PA);var U0=new nv(e=>e.complete());function cN(e){return e&&Hy(e.schedule)}function hN(e){return e[e.length-1]}function LA(e){return Hy(hN(e))?e.pop():void 0}function _1(e){return cN(hN(e))?e.pop():void 0}function pN(e,n,r,o){function s(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(y){try{g(o.next(y))}catch(v){h(v)}}function d(y){try{g(o.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):s(y.value).then(p,d)}g((o=o.apply(e,n||[])).next())})}function fN(e){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&e[n],o=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function cw(e){return this instanceof cw?(this.v=e,this):new cw(e)}function dN(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(e,n||[]),s,l=[];return s={},p("next"),p("throw"),p("return",h),s[Symbol.asyncIterator]=function(){return this},s;function h(w){return function(I){return Promise.resolve(I).then(w,v)}}function p(w,I){o[w]&&(s[w]=function(G){return new Promise(function(_t,_r){l.push([w,G,_t,_r])>1||d(w,G)})},I&&(s[w]=I(s[w])))}function d(w,I){try{g(o[w](I))}catch(G){_(l[0][3],G)}}function g(w){w.value instanceof cw?Promise.resolve(w.value.v).then(y,v):_(l[0][2],w)}function y(w){d("next",w)}function v(w){d("throw",w)}function _(w,I){w(I),l.shift(),l.length&&d(l[0][0],l[0][1])}}function gN(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],r;return n?n.call(e):(e=typeof fN=="function"?fN(e):e[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(l){r[l]=e[l]&&function(h){return new Promise(function(p,d){h=e[l](h),s(p,d,h.done,h.value)})}}function s(l,h,p,d){Promise.resolve(d).then(function(g){l({value:g,done:p})},h)}}var jA=e=>e&&typeof e.length=="number"&&typeof e!="function";function FA(e){return Hy(e?.then)}function BA(e){return Hy(e[dE])}function VA(e){return Symbol.asyncIterator&&Hy(e?.[Symbol.asyncIterator])}function UA(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function S5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zA=S5();function HA(e){return Hy(e?.[zA])}function $A(e){return dN(this,arguments,function*(){let r=e.getReader();try{for(;;){let{value:o,done:s}=yield cw(r.read());if(s)return yield cw(void 0);yield yield cw(o)}}finally{r.releaseLock()}})}function GA(e){return Hy(e?.getReader)}function jv(e){if(e instanceof nv)return e;if(e!=null){if(BA(e))return C5(e);if(jA(e))return I5(e);if(FA(e))return D5(e);if(VA(e))return mN(e);if(HA(e))return k5(e);if(GA(e))return M5(e)}throw UA(e)}function C5(e){return new nv(n=>{let r=e[dE]();if(Hy(r.subscribe))return r.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function I5(e){return new nv(n=>{for(let r=0;r<e.length&&!n.closed;r++)n.next(e[r]);n.complete()})}function D5(e){return new nv(n=>{e.then(r=>{n.closed||(n.next(r),n.complete())},r=>n.error(r)).then(null,kA)})}function k5(e){return new nv(n=>{for(let r of e)if(n.next(r),n.closed)return;n.complete()})}function mN(e){return new nv(n=>{O5(e,n).catch(r=>n.error(r))})}function M5(e){return mN($A(e))}function O5(e,n){var r,o,s,l;return pN(this,void 0,void 0,function*(){try{for(r=gN(e);o=yield r.next(),!o.done;){let h=o.value;if(n.next(h),n.closed)return}}catch(h){s={error:h}}finally{try{o&&!o.done&&(l=r.return)&&(yield l.call(r))}finally{if(s)throw s.error}}n.complete()})}function b0(e,n,r,o=0,s=!1){let l=n.schedule(function(){r(),s?e.add(this.schedule(null,o)):this.unsubscribe()},o);if(e.add(l),!s)return l}function qA(e,n=0){return tv((r,o)=>{r.subscribe(Xy(o,s=>b0(o,e,()=>o.next(s),n),()=>b0(o,e,()=>o.complete(),n),s=>b0(o,e,()=>o.error(s),n)))})}function WA(e,n=0){return tv((r,o)=>{o.add(e.schedule(()=>r.subscribe(o),n))})}function yN(e,n){return jv(e).pipe(WA(n),qA(n))}function vN(e,n){return jv(e).pipe(WA(n),qA(n))}function _N(e,n){return new nv(r=>{let o=0;return n.schedule(function(){o===e.length?r.complete():(r.next(e[o++]),r.closed||this.schedule())})})}function bN(e,n){return new nv(r=>{let o;return b0(r,n,()=>{o=e[zA](),b0(r,n,()=>{let s,l;try{({value:s,done:l}=o.next())}catch(h){r.error(h);return}l?r.complete():r.next(s)},0,!0)}),()=>Hy(o?.return)&&o.return()})}function YA(e,n){if(!e)throw new Error("Iterable cannot be null");return new nv(r=>{b0(r,n,()=>{let o=e[Symbol.asyncIterator]();b0(r,n,()=>{o.next().then(s=>{s.done?r.complete():r.next(s.value)})},0,!0)})})}function wN(e,n){return YA($A(e),n)}function EN(e,n){if(e!=null){if(BA(e))return yN(e,n);if(jA(e))return _N(e,n);if(FA(e))return vN(e,n);if(VA(e))return YA(e,n);if(HA(e))return bN(e,n);if(GA(e))return wN(e,n)}throw UA(e)}function kv(e,n){return n?EN(e,n):jv(e)}function Vy(...e){let n=_1(e);return kv(e,n)}function vE(e,n){let r=Hy(e)?e:()=>e,o=s=>s.error(r());return new nv(n?s=>n.schedule(o,0,s):o)}function jI(e){return!!e&&(e instanceof nv||Hy(e.lift)&&Hy(e.subscribe))}var q_=v1(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function xN(e){return e instanceof Date&&!isNaN(e)}var N5=v1(e=>function(r=null){e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r});function FI(e,n){let{first:r,each:o,with:s=P5,scheduler:l=n??uN,meta:h=null}=xN(e)?{first:e}:typeof e=="number"?{each:e}:e;if(r==null&&o==null)throw new TypeError("No timeout provided.");return tv((p,d)=>{let g,y,v=null,_=0,w=I=>{y=b0(d,l,()=>{try{g.unsubscribe(),jv(s({meta:h,lastValue:v,seen:_})).subscribe(d)}catch(G){d.error(G)}},I)};g=p.subscribe(Xy(d,I=>{y?.unsubscribe(),_++,d.next(v=I),o>0&&w(o)},void 0,void 0,()=>{y?.closed||y?.unsubscribe(),v=null})),!_&&w(r!=null?typeof r=="number"?r:+r-l.now():o)})}function P5(e){throw new N5(e)}function $y(e,n){return tv((r,o)=>{let s=0;r.subscribe(Xy(o,l=>{o.next(e.call(n,l,s++))}))})}var{isArray:R5}=Array;function L5(e,n){return R5(n)?e(...n):e(n)}function ZA(e){return $y(n=>L5(e,n))}var{isArray:j5}=Array,{getPrototypeOf:F5,prototype:B5,keys:V5}=Object;function XA(e){if(e.length===1){let n=e[0];if(j5(n))return{args:n,keys:null};if(U5(n)){let r=V5(n);return{args:r.map(o=>n[o]),keys:r}}}return{args:e,keys:null}}function U5(e){return e&&typeof e=="object"&&F5(e)===B5}function KA(e,n){return e.reduce((r,o,s)=>(r[o]=n[s],r),{})}function JA(...e){let n=_1(e),r=LA(e),{args:o,keys:s}=XA(e);if(o.length===0)return kv([],n);let l=new nv(z5(o,n,s?h=>KA(s,h):V0));return r?l.pipe(ZA(r)):l}function z5(e,n,r=V0){return o=>{TN(n,()=>{let{length:s}=e,l=new Array(s),h=s,p=s;for(let d=0;d<s;d++)TN(n,()=>{let g=kv(e[d],n),y=!1;g.subscribe(Xy(o,v=>{l[d]=v,y||(y=!0,p--),p||o.next(r(l.slice()))},()=>{--h||o.complete()}))},o)},o)}}function TN(e,n,r){e?b0(r,e,n):n()}function AN(e,n,r,o,s,l,h,p){let d=[],g=0,y=0,v=!1,_=()=>{v&&!d.length&&!g&&n.complete()},w=G=>g<o?I(G):d.push(G),I=G=>{l&&n.next(G),g++;let _t=!1;jv(r(G,y++)).subscribe(Xy(n,_r=>{s?.(_r),l?w(_r):n.next(_r)},()=>{_t=!0},void 0,()=>{if(_t)try{for(g--;d.length&&g<o;){let _r=d.shift();h?b0(n,h,()=>I(_r)):I(_r)}_()}catch(_r){n.error(_r)}}))};return e.subscribe(Xy(n,w,()=>{v=!0,_()})),()=>{p?.()}}function e0(e,n,r=1/0){return Hy(n)?e0((o,s)=>$y((l,h)=>n(o,l,s,h))(jv(e(o,s))),r):(typeof n=="number"&&(r=n),tv((o,s)=>AN(o,s,e,r)))}function BI(e=1/0){return e0(V0,e)}function SN(){return BI(1)}function _E(...e){return SN()(kv(e,_1(e)))}function QA(e){return new nv(n=>{jv(e()).subscribe(n)})}function VI(...e){let n=LA(e),{args:r,keys:o}=XA(e),s=new nv(l=>{let{length:h}=r;if(!h){l.complete();return}let p=new Array(h),d=h,g=h;for(let y=0;y<h;y++){let v=!1;jv(r[y]).subscribe(Xy(l,_=>{v||(v=!0,g--),p[y]=_},()=>d--,void 0,()=>{(!d||!v)&&(g||l.next(o?KA(o,p):p),l.complete())}))}});return n?s.pipe(ZA(n)):s}function z0(e,n){return tv((r,o)=>{let s=0;r.subscribe(Xy(o,l=>e.call(n,l,s++)&&o.next(l)))})}function b1(e){return tv((n,r)=>{let o=null,s=!1,l;o=n.subscribe(Xy(r,void 0,void 0,h=>{l=jv(e(h,b1(e)(n))),o?(o.unsubscribe(),o=null,l.subscribe(r)):s=!0})),s&&(o.unsubscribe(),o=null,l.subscribe(r))})}function CN(e,n,r,o,s){return(l,h)=>{let p=r,d=n,g=0;l.subscribe(Xy(h,y=>{let v=g++;d=p?e(d,y,v):(p=!0,y),o&&h.next(d)},s&&(()=>{p&&h.next(d),h.complete()})))}}function w1(e,n){return Hy(n)?e0(e,n,1):e0(e,1)}function E1(e){return tv((n,r)=>{let o=!1;n.subscribe(Xy(r,s=>{o=!0,r.next(s)},()=>{o||r.next(e),r.complete()}))})}function W_(e){return e<=0?()=>U0:tv((n,r)=>{let o=0;n.subscribe(Xy(r,s=>{++o<=e&&(r.next(s),e<=o&&r.complete())}))})}function UI(e){return $y(()=>e)}function tS(e=H5){return tv((n,r)=>{let o=!1;n.subscribe(Xy(r,s=>{o=!0,r.next(s)},()=>o?r.complete():r.error(e())))})}function H5(){return new q_}function hw(e){return tv((n,r)=>{try{n.subscribe(r)}finally{r.add(e)}})}function I_(e,n){let r=arguments.length>=2;return o=>o.pipe(e?z0((s,l)=>e(s,l,o)):V0,W_(1),r?E1(n):tS(()=>new q_))}function bE(e){return e<=0?()=>U0:tv((n,r)=>{let o=[];n.subscribe(Xy(r,s=>{o.push(s),e<o.length&&o.shift()},()=>{for(let s of o)r.next(s);r.complete()},void 0,()=>{o=null}))})}function zI(e,n){let r=arguments.length>=2;return o=>o.pipe(e?z0((s,l)=>e(s,l,o)):V0,bE(1),r?E1(n):tS(()=>new q_))}function HI(e,n){return tv(CN(e,n,arguments.length>=2,!0))}function $I(...e){let n=_1(e);return tv((r,o)=>{(n?_E(e,r,n):_E(e,r)).subscribe(o)})}function H0(e,n){return tv((r,o)=>{let s=null,l=0,h=!1,p=()=>h&&!s&&o.complete();r.subscribe(Xy(o,d=>{s?.unsubscribe();let g=0,y=l++;jv(e(d,y)).subscribe(s=Xy(o,v=>o.next(n?n(d,v,y,g++):v),()=>{s=null,p()}))},()=>{h=!0,p()}))})}function GI(e){return tv((n,r)=>{jv(e).subscribe(Xy(r,()=>r.complete(),Fx)),!r.closed&&n.subscribe(r)})}function o0(e,n,r){let o=Hy(e)||n||r?{next:e,error:n,complete:r}:e;return o?tv((s,l)=>{var h;(h=o.subscribe)===null||h===void 0||h.call(o);let p=!0;s.subscribe(Xy(l,d=>{var g;(g=o.next)===null||g===void 0||g.call(o,d),l.next(d)},()=>{var d;p=!1,(d=o.complete)===null||d===void 0||d.call(o),l.complete()},d=>{var g;p=!1,(g=o.error)===null||g===void 0||g.call(o,d),l.error(d)},()=>{var d,g;p&&((d=o.unsubscribe)===null||d===void 0||d.call(o)),(g=o.finalize)===null||g===void 0||g.call(o)}))}):V0}var $5="https://g.co/ng/security#xss",Oy=class extends Error{constructor(n,r){super(DS(n,r)),this.code=n}};function DS(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}function kS(e){return{toString:e}.toString()}var Vx=globalThis;function vv(e){for(let n in e)if(e[n]===vv)return n;throw Error("Could not find renamed property on target object.")}function G5(e,n){for(let r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r])}function k0(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(k0).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r===-1?n:n.substring(0,r)}function IN(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var q5=vv({__forward_ref__:vv});function Sw(e){return e.__forward_ref__=Sw,e.toString=function(){return k0(this())},e}function A0(e){return cP(e)?e():e}function cP(e){return typeof e=="function"&&e.hasOwnProperty(q5)&&e.__forward_ref__===Sw}function Dy(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Cw(e){return{providers:e.providers||[],imports:e.imports||[]}}function MS(e){return DN(e,fP)||DN(e,pP)}function hP(e){return MS(e)!==null}function DN(e,n){return e.hasOwnProperty(n)?e[n]:null}function W5(e){let n=e&&(e[fP]||e[pP]);return n||null}function kN(e){return e&&(e.hasOwnProperty(MN)||e.hasOwnProperty(Y5))?e[MN]:null}var fP=vv({\u0275prov:vv}),MN=vv({\u0275inj:vv}),pP=vv({ngInjectableDef:vv}),Y5=vv({ngInjectorDef:vv}),Sy=class{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof r=="number"?this.__NG_ELEMENT_ID__=r:r!==void 0&&(this.\u0275prov=Dy({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dP(e){return e&&!!e.\u0275providers}var Z5=vv({\u0275cmp:vv}),X5=vv({\u0275dir:vv}),K5=vv({\u0275pipe:vv}),J5=vv({\u0275mod:vv}),lS=vv({\u0275fac:vv}),zx=vv({__NG_ELEMENT_ID__:vv}),ON=vv({__NG_ENV_ID__:vv});function Hx(e){return typeof e=="string"?e:e==null?"":String(e)}function Q5(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Hx(e)}function tB(e,n){let r=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Oy(-200,e)}function nM(e,n){throw new Oy(-201,!1)}var Wy=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Wy||{}),lD;function gP(){return lD}function D0(e){let n=lD;return lD=e,n}function mP(e,n,r){let o=MS(e);if(o&&o.providedIn=="root")return o.value===void 0?o.value=o.factory():o.value;if(r&Wy.Optional)return null;if(n!==void 0)return n;nM(e,"Injector")}var eB={},$x=eB,nB="__NG_DI_FLAG__",uS="ngTempTokenPath",rB="ngTokenPath",iB=/\n/gm,oB="\u0275",NN="__source",TE;function sB(){return TE}function x1(e){let n=TE;return TE=e,n}function aB(e,n=Wy.Default){if(TE===void 0)throw new Oy(-203,!1);return TE===null?mP(e,void 0,n):TE.get(e,n&Wy.Optional?null:void 0,n)}function By(e,n=Wy.Default){return(gP()||aB)(A0(e),n)}function py(e,n=Wy.Default){return By(e,OS(n))}function OS(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function uD(e){let n=[];for(let r=0;r<e.length;r++){let o=A0(e[r]);if(Array.isArray(o)){if(o.length===0)throw new Oy(900,!1);let s,l=Wy.Default;for(let h=0;h<o.length;h++){let p=o[h],d=lB(p);typeof d=="number"?d===-1?s=p.token:l|=d:s=p}n.push(By(s,l))}else n.push(By(o))}return n}function lB(e){return e[nB]}function uB(e,n,r,o){let s=e[uS];throw n[NN]&&s.unshift(n[NN]),e.message=cB(`
`+e.message,s,r,o),e[rB]=s,e[uS]=null,e}function cB(e,n,r,o=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==oB?e.slice(2):e;let s=k0(n);if(Array.isArray(n))s=n.map(k0).join(" -> ");else if(typeof n=="object"){let l=[];for(let h in n)if(n.hasOwnProperty(h)){let p=n[h];l.push(h+":"+(typeof p=="string"?JSON.stringify(p):k0(p)))}s=`{${l.join(", ")}}`}return`${r}${o?"("+o+")":""}[${s}]: ${e.replace(iB,`
  `)}`}function gw(e,n){let r=e.hasOwnProperty(lS);return r?e[lS]:null}function hB(e,n,r){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++){let s=e[o],l=n[o];if(r&&(s=r(s),l=r(l)),l!==s)return!1}return!0}function fB(e){return e.flat(Number.POSITIVE_INFINITY)}function rM(e,n){e.forEach(r=>Array.isArray(r)?rM(r,n):n(r))}function yP(e,n,r){n>=e.length?e.push(r):e.splice(n,0,r)}function cS(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function pB(e,n,r,o){let s=e.length;if(s==n)e.push(r,o);else if(s===1)e.push(o,e[0]),e[0]=r;else{for(s--,e.push(e[s-1],e[s]);s>n;){let l=s-2;e[s]=e[l],s--}e[n]=r,e[n+1]=o}}function dB(e,n,r){let o=iT(e,n);return o>=0?e[o|1]=r:(o=~o,pB(e,o,n,r)),o}function qI(e,n){let r=iT(e,n);if(r>=0)return e[r|1]}function iT(e,n){return gB(e,n,1)}function gB(e,n,r){let o=0,s=e.length>>r;for(;s!==o;){let l=o+(s-o>>1),h=e[l<<r];if(n===h)return l<<r;h>n?s=l:o=l+1}return~(s<<r)}var SE={},X0=[],CE=new Sy(""),vP=new Sy("",-1),_P=new Sy(""),hS=class{get(n,r=$x){if(r===$x){let o=new Error(`NullInjectorError: No provider for ${k0(n)}!`);throw o.name="NullInjectorError",o}return r}},bP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(bP||{}),M_=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(M_||{}),S1=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(S1||{});function mB(e,n,r){let o=e.length;for(;;){let s=e.indexOf(n,r);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let l=n.length;if(s+l===o||e.charCodeAt(s+l)<=32)return s}r=s+1}}function cD(e,n,r){let o=0;for(;o<r.length;){let s=r[o];if(typeof s=="number"){if(s!==0)break;o++;let l=r[o++],h=r[o++],p=r[o++];e.setAttribute(n,h,p,l)}else{let l=s,h=r[++o];vB(l)?e.setProperty(n,l,h):e.setAttribute(n,l,h),o++}}return o}function yB(e){return e===3||e===4||e===6}function vB(e){return e.charCodeAt(0)===64}function Gx(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let r=-1;for(let o=0;o<n.length;o++){let s=n[o];typeof s=="number"?r=s:r===0||(r===-1||r===2?PN(e,r,s,null,n[++o]):PN(e,r,s,null,null))}}return e}function PN(e,n,r,o,s){let l=0,h=e.length;if(n===-1)h=-1;else for(;l<e.length;){let p=e[l++];if(typeof p=="number"){if(p===n){h=-1;break}else if(p>n){h=l-1;break}}}for(;l<e.length;){let p=e[l];if(typeof p=="number")break;if(p===r){if(o===null){s!==null&&(e[l+1]=s);return}else if(o===e[l+1]){e[l+2]=s;return}}l++,o!==null&&l++,s!==null&&l++}h!==-1&&(e.splice(h,0,n),l=h+1),e.splice(l++,0,r),o!==null&&e.splice(l++,0,o),s!==null&&e.splice(l++,0,s)}var wP="ng-template";function _B(e,n,r,o){let s=0;if(o){for(;s<n.length&&typeof n[s]=="string";s+=2)if(n[s]==="class"&&mB(n[s+1].toLowerCase(),r,0)!==-1)return!0}else if(iM(e))return!1;if(s=n.indexOf(1,s),s>-1){let l;for(;++s<n.length&&typeof(l=n[s])=="string";)if(l.toLowerCase()===r)return!0}return!1}function iM(e){return e.type===4&&e.value!==wP}function bB(e,n,r){let o=e.type===4&&!r?wP:e.value;return n===o}function wB(e,n,r){let o=4,s=e.attrs,l=s!==null?TB(s):0,h=!1;for(let p=0;p<n.length;p++){let d=n[p];if(typeof d=="number"){if(!h&&!f_(o)&&!f_(d))return!1;if(h&&f_(d))continue;h=!1,o=d|o&1;continue}if(!h)if(o&4){if(o=2|o&1,d!==""&&!bB(e,d,r)||d===""&&n.length===1){if(f_(o))return!1;h=!0}}else if(o&8){if(s===null||!_B(e,s,d,r)){if(f_(o))return!1;h=!0}}else{let g=n[++p],y=EB(d,s,iM(e),r);if(y===-1){if(f_(o))return!1;h=!0;continue}if(g!==""){let v;if(y>l?v="":v=s[y+1].toLowerCase(),o&2&&g!==v){if(f_(o))return!1;h=!0}}}}return f_(o)||h}function f_(e){return(e&1)===0}function EB(e,n,r,o){if(n===null)return-1;let s=0;if(o||!r){let l=!1;for(;s<n.length;){let h=n[s];if(h===e)return s;if(h===3||h===6)l=!0;else if(h===1||h===2){let p=n[++s];for(;typeof p=="string";)p=n[++s];continue}else{if(h===4)break;if(h===0){s+=4;continue}}s+=l?1:2}return-1}else return AB(n,e)}function xB(e,n,r=!1){for(let o=0;o<n.length;o++)if(wB(e,n[o],r))return!0;return!1}function TB(e){for(let n=0;n<e.length;n++){let r=e[n];if(yB(r))return n}return e.length}function AB(e,n){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){let o=e[r];if(typeof o=="number")return-1;if(o===n)return r;r++}return-1}function RN(e,n){return e?":not("+n.trim()+")":n}function SB(e){let n=e[0],r=1,o=2,s="",l=!1;for(;r<e.length;){let h=e[r];if(typeof h=="string")if(o&2){let p=e[++r];s+="["+h+(p.length>0?'="'+p+'"':"")+"]"}else o&8?s+="."+h:o&4&&(s+=" "+h);else s!==""&&!f_(h)&&(n+=RN(l,s),s=""),o=h,l=l||!f_(o);r++}return s!==""&&(n+=RN(l,s)),n}function CB(e){return e.map(SB).join(",")}function IB(e){let n=[],r=[],o=1,s=2;for(;o<e.length;){let l=e[o];if(typeof l=="string")s===2?l!==""&&n.push(l,e[++o]):s===8&&r.push(l);else{if(!f_(s))break;s=l}o++}return{attrs:n,classes:r}}function s0(e){return kS(()=>{let n=CP(e),r=ov(gy({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===bP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||M_.Emulated,styles:e.styles||X0,_:null,schemas:e.schemas||null,tView:null,id:""});IP(r);let o=e.dependencies;return r.directiveDefs=jN(o,!1),r.pipeDefs=jN(o,!0),r.id=MB(r),r})}function DB(e){return mw(e)||xP(e)}function kB(e){return e!==null}function Iw(e){return kS(()=>({type:e.type,bootstrap:e.bootstrap||X0,declarations:e.declarations||X0,imports:e.imports||X0,exports:e.exports||X0,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function LN(e,n){if(e==null)return SE;let r={};for(let o in e)if(e.hasOwnProperty(o)){let s=e[o],l,h,p=S1.None;Array.isArray(s)?(p=s[0],l=s[1],h=s[2]??l):(l=s,h=s),n?(r[l]=p!==S1.None?[o,p]:o,n[l]=h):r[l]=o}return r}function J0(e){return kS(()=>{let n=CP(e);return IP(n),n})}function EP(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function mw(e){return e[Z5]||null}function xP(e){return e[X5]||null}function TP(e){return e[K5]||null}function AP(e){let n=mw(e)||xP(e)||TP(e);return n!==null?n.standalone:!1}function SP(e,n){let r=e[J5]||null;if(!r&&n===!0)throw new Error(`Type ${k0(e)} does not have '\u0275mod' property.`);return r}function CP(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||SE,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||X0,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:LN(e.inputs,n),outputs:LN(e.outputs),debugInfo:null}}function IP(e){e.features?.forEach(n=>n(e))}function jN(e,n){if(!e)return null;let r=n?TP:DB;return()=>(typeof e=="function"?e():e).map(o=>r(o)).filter(kB)}function MB(e){let n=0,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let s of r)n=Math.imul(31,n)+s.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function RE(e){return{\u0275providers:e}}function OB(...e){return{\u0275providers:DP(!0,e),\u0275fromNgModule:!0}}function DP(e,...n){let r=[],o=new Set,s,l=h=>{r.push(h)};return rM(n,h=>{let p=h;hD(p,l,[],o)&&(s||=[],s.push(p))}),s!==void 0&&kP(s,l),r}function kP(e,n){for(let r=0;r<e.length;r++){let{ngModule:o,providers:s}=e[r];oM(s,l=>{n(l,o)})}}function hD(e,n,r,o){if(e=A0(e),!e)return!1;let s=null,l=kN(e),h=!l&&mw(e);if(!l&&!h){let d=e.ngModule;if(l=kN(d),l)s=d;else return!1}else{if(h&&!h.standalone)return!1;s=e}let p=o.has(s);if(h){if(p)return!1;if(o.add(s),h.dependencies){let d=typeof h.dependencies=="function"?h.dependencies():h.dependencies;for(let g of d)hD(g,n,r,o)}}else if(l){if(l.imports!=null&&!p){o.add(s);let g;try{rM(l.imports,y=>{hD(y,n,r,o)&&(g||=[],g.push(y))})}finally{}g!==void 0&&kP(g,n)}if(!p){let g=gw(s)||(()=>new s);n({provide:s,useFactory:g,deps:X0},s),n({provide:_P,useValue:s,multi:!0},s),n({provide:CE,useValue:()=>By(s),multi:!0},s)}let d=l.providers;if(d!=null&&!p){let g=e;oM(d,y=>{n(y,g)})}}else return!1;return s!==e&&e.providers!==void 0}function oM(e,n){for(let r of e)dP(r)&&(r=r.\u0275providers),Array.isArray(r)?oM(r,n):n(r)}var NB=vv({provide:String,useValue:vv});function MP(e){return e!==null&&typeof e=="object"&&NB in e}function PB(e){return!!(e&&e.useExisting)}function RB(e){return!!(e&&e.useFactory)}function IE(e){return typeof e=="function"}function LB(e){return!!e.useClass}var NS=new Sy(""),rS={},jB={},WI;function sM(){return WI===void 0&&(WI=new hS),WI}var M0=class{},qx=class extends M0{get destroyed(){return this._destroyed}constructor(n,r,o,s){super(),this.parent=r,this.source=o,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pD(n,h=>this.processProvider(h)),this.records.set(vP,wE(void 0,this)),s.has("environment")&&this.records.set(M0,wE(void 0,this));let l=this.records.get(NS);l!=null&&typeof l.value=="string"&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(_P,X0,Wy.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=Jy(null);try{for(let o of this._ngOnDestroyHooks)o.ngOnDestroy();let r=this._onDestroyHooks;this._onDestroyHooks=[];for(let o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Jy(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let r=x1(this),o=D0(void 0),s;try{return n()}finally{x1(r),D0(o)}}get(n,r=$x,o=Wy.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(ON))return n[ON](this);o=OS(o);let s,l=x1(this),h=D0(void 0);try{if(!(o&Wy.SkipSelf)){let d=this.records.get(n);if(d===void 0){let g=zB(n)&&MS(n);g&&this.injectableDefInScope(g)?d=wE(fD(n),rS):d=null,this.records.set(n,d)}if(d!=null)return this.hydrate(n,d)}let p=o&Wy.Self?sM():this.parent;return r=o&Wy.Optional&&r===$x?null:r,p.get(n,r)}catch(p){if(p.name==="NullInjectorError"){if((p[uS]=p[uS]||[]).unshift(k0(n)),l)throw p;return uB(p,n,"R3InjectorError",this.source)}else throw p}finally{D0(h),x1(l)}}resolveInjectorInitializers(){let n=Jy(null),r=x1(this),o=D0(void 0),s;try{let l=this.get(CE,X0,Wy.Self);for(let h of l)h()}finally{x1(r),D0(o),Jy(n)}}toString(){let n=[],r=this.records;for(let o of r.keys())n.push(k0(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oy(205,!1)}processProvider(n){n=A0(n);let r=IE(n)?n:A0(n&&n.provide),o=BB(n);if(!IE(n)&&n.multi===!0){let s=this.records.get(r);s||(s=wE(void 0,rS,!0),s.factory=()=>uD(s.multi),this.records.set(r,s)),r=n,s.multi.push(n)}this.records.set(r,o)}hydrate(n,r){let o=Jy(null);try{return r.value===rS&&(r.value=jB,r.value=r.factory()),typeof r.value=="object"&&r.value&&UB(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{Jy(o)}}injectableDefInScope(n){if(!n.providedIn)return!1;let r=A0(n.providedIn);return typeof r=="string"?r==="any"||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(n){let r=this._onDestroyHooks.indexOf(n);r!==-1&&this._onDestroyHooks.splice(r,1)}};function fD(e){let n=MS(e),r=n!==null?n.factory:gw(e);if(r!==null)return r;if(e instanceof Sy)throw new Oy(204,!1);if(e instanceof Function)return FB(e);throw new Oy(204,!1)}function FB(e){if(e.length>0)throw new Oy(204,!1);let r=W5(e);return r!==null?()=>r.factory(e):()=>new e}function BB(e){if(MP(e))return wE(void 0,e.useValue);{let n=OP(e);return wE(n,rS)}}function OP(e,n,r){let o;if(IE(e)){let s=A0(e);return gw(s)||fD(s)}else if(MP(e))o=()=>A0(e.useValue);else if(RB(e))o=()=>e.useFactory(...uD(e.deps||[]));else if(PB(e))o=()=>By(A0(e.useExisting));else{let s=A0(e&&(e.useClass||e.provide));if(VB(e))o=()=>new s(...uD(e.deps));else return gw(s)||fD(s)}return o}function wE(e,n,r=!1){return{factory:e,value:n,multi:r?[]:void 0}}function VB(e){return!!e.deps}function UB(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function zB(e){return typeof e=="function"||typeof e=="object"&&e instanceof Sy}function pD(e,n){for(let r of e)Array.isArray(r)?pD(r,n):r&&dP(r)?pD(r.\u0275providers,n):n(r)}function g_(e,n){e instanceof qx&&e.assertNotDestroyed();let r,o=x1(e),s=D0(void 0);try{return n()}finally{x1(o),D0(s)}}function HB(){return gP()!==void 0||sB()!=null}function $B(e){return typeof e=="function"}var K_=0,Uy=1,Fy=2,x0=3,p_=4,m_=5,Wx=6,fS=7,w0=8,DE=9,Y_=10,Zv=11,Yx=12,FN=13,LE=14,d_=15,yw=16,EE=17,Z_=18,PS=19,NP=20,T1=21,YI=22,K0=23,O0=25,PP=1;var vw=7,pS=8,kE=9,E0=10,dS=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(dS||{});function A1(e){return Array.isArray(e)&&typeof e[PP]=="object"}function J_(e){return Array.isArray(e)&&e[PP]===!0}function RP(e){return(e.flags&4)!==0}function RS(e){return e.componentOffset>-1}function aM(e){return(e.flags&1)===1}function C1(e){return!!e.template}function dD(e){return(e[Fy]&512)!==0}var gD=class{constructor(n,r,o){this.previousValue=n,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}};function LP(e,n,r,o){n!==null?n.applyValueToInputSignal(n,o):e[r]=o}function $0(){return jP}function jP(e){return e.type.prototype.ngOnChanges&&(e.setInput=qB),GB}$0.ngInherit=!0;function GB(){let e=BP(this),n=e?.current;if(n){let r=e.previous;if(r===SE)e.previous=n;else for(let o in n)r[o]=n[o];e.current=null,this.ngOnChanges(n)}}function qB(e,n,r,o,s){let l=this.declaredInputs[o],h=BP(e)||WB(e,{previous:SE,current:null}),p=h.current||(h.current={}),d=h.previous,g=d[l];p[l]=new gD(g&&g.currentValue,r,d===SE),LP(e,n,s,r)}var FP="__ngSimpleChanges__";function BP(e){return e[FP]||null}function WB(e,n){return e[FP]=n}var BN=null;var D_=function(e,n,r){BN?.(e,n,r)},VP="svg",YB="math";function O_(e){for(;Array.isArray(e);)e=e[K_];return e}function UP(e,n){return O_(n[e])}function Q0(e,n){return O_(n[e.index])}function lM(e,n){return e.data[n]}function zP(e,n){return e[n]}function M1(e,n){let r=n[e];return A1(r)?r:r[K_]}function ZB(e){return(e[Fy]&4)===4}function uM(e){return(e[Fy]&128)===128}function XB(e){return J_(e[x0])}function ME(e,n){return n==null?null:e[n]}function HP(e){e[EE]=0}function $P(e){e[Fy]&1024||(e[Fy]|=1024,uM(e)&&LS(e))}function KB(e,n){for(;e>0;)n=n[LE],e--;return n}function Zx(e){return!!(e[Fy]&9216||e[K0]?.dirty)}function mD(e){e[Y_].changeDetectionScheduler?.notify(7),e[Fy]&64&&(e[Fy]|=1024),Zx(e)&&LS(e)}function LS(e){e[Y_].changeDetectionScheduler?.notify(0);let n=_w(e);for(;n!==null&&!(n[Fy]&8192||(n[Fy]|=8192,!uM(n)));)n=_w(n)}function GP(e,n){if((e[Fy]&256)===256)throw new Oy(911,!1);e[T1]===null&&(e[T1]=[]),e[T1].push(n)}function JB(e,n){if(e[T1]===null)return;let r=e[T1].indexOf(n);r!==-1&&e[T1].splice(r,1)}function _w(e){let n=e[x0];return J_(n)?n[x0]:n}var Gy={lFrame:nR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qP=!1;function QB(){return Gy.lFrame.elementDepthCount}function tV(){Gy.lFrame.elementDepthCount++}function eV(){Gy.lFrame.elementDepthCount--}function WP(){return Gy.bindingsEnabled}function nV(){return Gy.skipHydrationRootTNode!==null}function rV(e){return Gy.skipHydrationRootTNode===e}function iV(){Gy.skipHydrationRootTNode=null}function ev(){return Gy.lFrame.lView}function a0(){return Gy.lFrame.tView}function P_(e){return Gy.lFrame.contextLView=e,e[w0]}function R_(e){return Gy.lFrame.contextLView=null,e}function N0(){let e=YP();for(;e!==null&&e.type===64;)e=e.parent;return e}function YP(){return Gy.lFrame.currentTNode}function oV(){let e=Gy.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function oT(e,n){let r=Gy.lFrame;r.currentTNode=e,r.isParent=n}function ZP(){return Gy.lFrame.isParent}function sV(){Gy.lFrame.isParent=!1}function XP(){return qP}function VN(e){qP=e}function KP(){let e=Gy.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function aV(){return Gy.lFrame.bindingIndex}function lV(e){return Gy.lFrame.bindingIndex=e}function jE(){return Gy.lFrame.bindingIndex++}function JP(e){let n=Gy.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,r}function uV(){return Gy.lFrame.inI18n}function cV(e,n){let r=Gy.lFrame;r.bindingIndex=r.bindingRootIndex=e,yD(n)}function hV(){return Gy.lFrame.currentDirectiveIndex}function yD(e){Gy.lFrame.currentDirectiveIndex=e}function fV(e){let n=Gy.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function QP(){return Gy.lFrame.currentQueryIndex}function cM(e){Gy.lFrame.currentQueryIndex=e}function pV(e){let n=e[Uy];return n.type===2?n.declTNode:n.type===1?e[m_]:null}function tR(e,n,r){if(r&Wy.SkipSelf){let s=n,l=e;for(;s=s.parent,s===null&&!(r&Wy.Host);)if(s=pV(l),s===null||(l=l[LE],s.type&10))break;if(s===null)return!1;n=s,e=l}let o=Gy.lFrame=eR();return o.currentTNode=n,o.lView=e,!0}function hM(e){let n=eR(),r=e[Uy];Gy.lFrame=n,n.currentTNode=r.firstChild,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function eR(){let e=Gy.lFrame,n=e===null?null:e.child;return n===null?nR(e):n}function nR(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function rR(){let e=Gy.lFrame;return Gy.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var iR=rR;function fM(){let e=rR();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function dV(e){return(Gy.lFrame.contextLView=KB(e,Gy.lFrame.contextLView))[w0]}function O1(){return Gy.lFrame.selectedIndex}function bw(e){Gy.lFrame.selectedIndex=e}function jS(){let e=Gy.lFrame;return lM(e.tView,e.selectedIndex)}function P0(){Gy.lFrame.currentNamespace=VP}function y_(){gV()}function gV(){Gy.lFrame.currentNamespace=null}function mV(){return Gy.lFrame.currentNamespace}var oR=!0;function pM(){return oR}function dM(e){oR=e}function yV(e,n,r){let{ngOnChanges:o,ngOnInit:s,ngDoCheck:l}=n.type.prototype;if(o){let h=jP(n);(r.preOrderHooks??=[]).push(e,h),(r.preOrderCheckHooks??=[]).push(e,h)}s&&(r.preOrderHooks??=[]).push(0-e,s),l&&((r.preOrderHooks??=[]).push(e,l),(r.preOrderCheckHooks??=[]).push(e,l))}function gM(e,n){for(let r=n.directiveStart,o=n.directiveEnd;r<o;r++){let l=e.data[r].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:p,ngAfterViewInit:d,ngAfterViewChecked:g,ngOnDestroy:y}=l;h&&(e.contentHooks??=[]).push(-r,h),p&&((e.contentHooks??=[]).push(r,p),(e.contentCheckHooks??=[]).push(r,p)),d&&(e.viewHooks??=[]).push(-r,d),g&&((e.viewHooks??=[]).push(r,g),(e.viewCheckHooks??=[]).push(r,g)),y!=null&&(e.destroyHooks??=[]).push(r,y)}}function iS(e,n,r){sR(e,n,3,r)}function oS(e,n,r,o){(e[Fy]&3)===r&&sR(e,n,r,o)}function ZI(e,n){let r=e[Fy];(r&3)===n&&(r&=16383,r+=1,e[Fy]=r)}function sR(e,n,r,o){let s=o!==void 0?e[EE]&65535:0,l=o??-1,h=n.length-1,p=0;for(let d=s;d<h;d++)if(typeof n[d+1]=="number"){if(p=n[d],o!=null&&p>=o)break}else n[d]<0&&(e[EE]+=65536),(p<l||l==-1)&&(vV(e,r,n,d),e[EE]=(e[EE]&4294901760)+d+2),d++}function UN(e,n){D_(4,e,n);let r=Jy(null);try{n.call(e)}finally{Jy(r),D_(5,e,n)}}function vV(e,n,r,o){let s=r[o]<0,l=r[o+1],h=s?-r[o]:r[o],p=e[h];s?e[Fy]>>14<e[EE]>>16&&(e[Fy]&3)===n&&(e[Fy]+=16384,UN(p,l)):UN(p,l)}var AE=-1,ww=class{constructor(n,r,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}};function _V(e){return e instanceof ww}function bV(e){return(e.flags&8)!==0}function wV(e){return(e.flags&16)!==0}var XI={},vD=class{constructor(n,r){this.injector=n,this.parentInjector=r}get(n,r,o){o=OS(o);let s=this.injector.get(n,XI,o);return s!==XI||r===XI?s:this.parentInjector.get(n,r,o)}};function aR(e){return e!==AE}function gS(e){return e&32767}function EV(e){return e>>16}function mS(e,n){let r=EV(e),o=n;for(;r>0;)o=o[LE],r--;return o}var _D=!0;function yS(e){let n=_D;return _D=e,n}var xV=256,lR=xV-1,uR=5,TV=0,k_={};function AV(e,n,r){let o;typeof r=="string"?o=r.charCodeAt(0)||0:r.hasOwnProperty(zx)&&(o=r[zx]),o==null&&(o=r[zx]=TV++);let s=o&lR,l=1<<s;n.data[e+(s>>uR)]|=l}function vS(e,n){let r=cR(e,n);if(r!==-1)return r;let o=n[Uy];o.firstCreatePass&&(e.injectorIndex=n.length,KI(o.data,e),KI(n,null),KI(o.blueprint,null));let s=mM(e,n),l=e.injectorIndex;if(aR(s)){let h=gS(s),p=mS(s,n),d=p[Uy].data;for(let g=0;g<8;g++)n[l+g]=p[h+g]|d[h+g]}return n[l+8]=s,l}function KI(e,n){e.push(0,0,0,0,0,0,0,0,n)}function cR(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function mM(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let r=0,o=null,s=n;for(;s!==null;){if(o=gR(s),o===null)return AE;if(r++,s=s[LE],o.injectorIndex!==-1)return o.injectorIndex|r<<16}return AE}function bD(e,n,r){AV(e,n,r)}function hR(e,n,r){if(r&Wy.Optional||e!==void 0)return e;nM(n,"NodeInjector")}function fR(e,n,r,o){if(r&Wy.Optional&&o===void 0&&(o=null),!(r&(Wy.Self|Wy.Host))){let s=e[DE],l=D0(void 0);try{return s?s.get(n,o,r&Wy.Optional):mP(n,o,r&Wy.Optional)}finally{D0(l)}}return hR(o,n,r)}function pR(e,n,r,o=Wy.Default,s){if(e!==null){if(n[Fy]&2048&&!(o&Wy.Self)){let h=DV(e,n,r,o,k_);if(h!==k_)return h}let l=dR(e,n,r,o,k_);if(l!==k_)return l}return fR(n,r,o,s)}function dR(e,n,r,o,s){let l=CV(r);if(typeof l=="function"){if(!tR(n,e,o))return o&Wy.Host?hR(s,r,o):fR(n,r,o,s);try{let h;if(h=l(o),h==null&&!(o&Wy.Optional))nM(r);else return h}finally{iR()}}else if(typeof l=="number"){let h=null,p=cR(e,n),d=AE,g=o&Wy.Host?n[d_][m_]:null;for((p===-1||o&Wy.SkipSelf)&&(d=p===-1?mM(e,n):n[p+8],d===AE||!HN(o,!1)?p=-1:(h=n[Uy],p=gS(d),n=mS(d,n)));p!==-1;){let y=n[Uy];if(zN(l,p,y.data)){let v=SV(p,n,r,h,o,g);if(v!==k_)return v}d=n[p+8],d!==AE&&HN(o,n[Uy].data[p+8]===g)&&zN(l,p,n)?(h=y,p=gS(d),n=mS(d,n)):p=-1}}return s}function SV(e,n,r,o,s,l){let h=n[Uy],p=h.data[e+8],d=o==null?RS(p)&&_D:o!=h&&(p.type&3)!==0,g=s&Wy.Host&&l===p,y=sS(p,h,r,d,g);return y!==null?Ew(n,h,y,p):k_}function sS(e,n,r,o,s){let l=e.providerIndexes,h=n.data,p=l&1048575,d=e.directiveStart,g=e.directiveEnd,y=l>>20,v=o?p:p+y,_=s?p+y:g;for(let w=v;w<_;w++){let I=h[w];if(w<d&&r===I||w>=d&&I.type===r)return w}if(s){let w=h[d];if(w&&C1(w)&&w.type===r)return d}return null}function Ew(e,n,r,o){let s=e[r],l=n.data;if(_V(s)){let h=s;h.resolving&&tB(Q5(l[r]));let p=yS(h.canSeeViewProviders);h.resolving=!0;let d,g=h.injectImpl?D0(h.injectImpl):null,y=tR(e,o,Wy.Default);try{s=e[r]=h.factory(void 0,l,e,o),n.firstCreatePass&&r>=o.directiveStart&&yV(r,l[r],n)}finally{g!==null&&D0(g),yS(p),h.resolving=!1,iR()}}return s}function CV(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(zx)?e[zx]:void 0;return typeof n=="number"?n>=0?n&lR:IV:n}function zN(e,n,r){let o=1<<e;return!!(r[n+(e>>uR)]&o)}function HN(e,n){return!(e&Wy.Self)&&!(e&Wy.Host&&n)}var dw=class{constructor(n,r){this._tNode=n,this._lView=r}get(n,r,o){return pR(this._tNode,this._lView,n,OS(o),r)}};function IV(){return new dw(N0(),ev())}function Dw(e){return kS(()=>{let n=e.prototype.constructor,r=n[lS]||wD(n),o=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==o;){let l=s[lS]||wD(s);if(l&&l!==r)return l;s=Object.getPrototypeOf(s)}return l=>new l})}function wD(e){return cP(e)?()=>{let n=wD(A0(e));return n&&n()}:gw(e)}function DV(e,n,r,o,s){let l=e,h=n;for(;l!==null&&h!==null&&h[Fy]&2048&&!(h[Fy]&512);){let p=dR(l,h,r,o|Wy.Self,k_);if(p!==k_)return p;let d=l.parent;if(!d){let g=h[NP];if(g){let y=g.get(r,k_,o);if(y!==k_)return y}d=gR(h),h=h[LE]}l=d}return s}function gR(e){let n=e[Uy],r=n.type;return r===2?n.declTNode:r===1?e[m_]:null}function $N(e,n=null,r=null,o){let s=mR(e,n,r,o);return s.resolveInjectorInitializers(),s}function mR(e,n=null,r=null,o,s=new Set){let l=[r||X0,OB(e)];return o=o||(typeof e=="object"?void 0:k0(e)),new qx(l,n||sM(),o||null,s)}var pw=class pw{static create(n,r){if(Array.isArray(n))return $N({name:""},r,n,"");{let o=n.name??"";return $N({name:o},n.parent,n.providers,o)}}};pw.THROW_IF_NOT_FOUND=$x,pw.NULL=new hS,pw.\u0275prov=Dy({token:pw,providedIn:"any",factory:()=>By(vP)}),pw.__NG_ELEMENT_ID__=-1;var I1=pw;var kV=new Sy("");kV.__NG_ELEMENT_ID__=e=>{let n=N0();if(n===null)throw new Oy(204,!1);if(n.type&2)return n.value;if(e&Wy.Optional)return null;throw new Oy(204,!1)};var MV="ngOriginalError";function JI(e){return e[MV]}var yR=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=OV,n.__NG_ENV_ID__=o=>o;let e=n;return e})(),ED=class extends yR{constructor(n){super(),this._lView=n}onDestroy(n){return GP(this._lView,n),()=>JB(this._lView,n)}};function OV(){return new ED(ev())}var N1=(()=>{let n=class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new p0(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};n.\u0275prov=Dy({token:n,providedIn:"root",factory:()=>new n});let e=n;return e})();var xD=class extends Yv{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,HB()&&(this.destroyRef=py(yR,{optional:!0})??void 0,this.pendingTasks=py(N1,{optional:!0})??void 0)}emit(n){let r=Jy(null);try{super.next(n)}finally{Jy(r)}}subscribe(n,r,o){let s=n,l=r||(()=>null),h=o;if(n&&typeof n=="object"){let d=n;s=d.next?.bind(d),l=d.error?.bind(d),h=d.complete?.bind(d)}this.__isAsync&&(l=this.wrapInTimeout(l),s&&(s=this.wrapInTimeout(s)),h&&(h=this.wrapInTimeout(h)));let p=super.subscribe({next:s,error:l,complete:h});return n instanceof Lv&&n.add(p),p}wrapInTimeout(n){return r=>{let o=this.pendingTasks?.add();setTimeout(()=>{n(r),o!==void 0&&this.pendingTasks?.remove(o)})}}},uv=xD;function _S(...e){}function vR(e){let n,r;function o(){e=_S;try{r!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(r),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),o()}),typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(()=>{e(),o()})),()=>o()}function GN(e){return queueMicrotask(()=>e()),()=>{e=_S}}var Fv=class e{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uv(!1),this.onMicrotaskEmpty=new uv(!1),this.onStable=new uv(!1),this.onError=new uv(!1),typeof Zone>"u")throw new Oy(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,RV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Oy(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Oy(909,!1)}run(n,r,o){return this._inner.run(n,r,o)}runTask(n,r,o,s){let l=this._inner,h=l.scheduleEventTask("NgZoneEvent: "+s,n,NV,_S,_S);try{return l.runTask(h,r,o)}finally{l.cancelTask(h)}}runGuarded(n,r,o){return this._inner.runGuarded(n,r,o)}runOutsideAngular(n){return this._outer.run(n)}},NV={};function yM(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function PV(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{vR(()=>{e.callbackScheduled=!1,TD(e),e.isCheckStableRunning=!0,yM(e),e.isCheckStableRunning=!1})}),TD(e))}function RV(e){let n=()=>{PV(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,s,l,h,p)=>{if(LV(p))return r.invokeTask(s,l,h,p);try{return qN(e),r.invokeTask(s,l,h,p)}finally{(e.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),WN(e)}},onInvoke:(r,o,s,l,h,p,d)=>{try{return qN(e),r.invoke(s,l,h,p,d)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!jV(p)&&n(),WN(e)}},onHasTask:(r,o,s,l)=>{r.hasTask(s,l),o===s&&(l.change=="microTask"?(e._hasPendingMicrotasks=l.microTask,TD(e),yM(e)):l.change=="macroTask"&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(r,o,s,l)=>(r.handleError(s,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}function TD(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function qN(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function WN(e){e._nesting--,yM(e)}var AD=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uv,this.onMicrotaskEmpty=new uv,this.onStable=new uv,this.onError=new uv}run(n,r,o){return n.apply(r,o)}runGuarded(n,r,o){return n.apply(r,o)}runOutsideAngular(n){return n()}runTask(n,r,o,s){return n.apply(r,o)}};function LV(e){return _R(e,"__ignore_ng_zone__")}function jV(e){return _R(e,"__scheduler_tick__")}function _R(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var D1=class{constructor(){this._console=console}handleError(n){let r=this._findOriginalError(n);this._console.error("ERROR",n),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(n){let r=n&&JI(n);for(;r&&JI(r);)r=JI(r);return r||null}},FV=new Sy("",{providedIn:"root",factory:()=>{let e=py(Fv),n=py(D1);return r=>e.runOutsideAngular(()=>n.handleError(r))}});function BV(){return FE(N0(),ev())}function FE(e,n){return new L_(Q0(e,n))}var L_=(()=>{let n=class n{constructor(o){this.nativeElement=o}};n.__NG_ELEMENT_ID__=BV;let e=n;return e})();function VV(e){return e instanceof L_?e.nativeElement:e}function UV(){return this._results[Symbol.iterator]()}var SD=class e{get changes(){return this._changes??=new uv}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let r=e.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=UV)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){this.dirty=!1;let o=fB(n);(this._changesDetected=!hB(this._results,o,r))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function bR(e){return(e.flags&128)===128}var wR=new Map,zV=0;function HV(){return zV++}function $V(e){wR.set(e[PS],e)}function GV(e){wR.delete(e[PS])}var YN="__ngContext__";function xw(e,n){A1(n)?(e[YN]=n[PS],$V(n)):e[YN]=n}function ER(e){return TR(e[Yx])}function xR(e){return TR(e[p_])}function TR(e){for(;e!==null&&!J_(e);)e=e[p_];return e}var CD;function AR(e){CD=e}function qV(){if(CD!==void 0)return CD;if(typeof document<"u")return document;throw new Oy(210,!1)}var vM=new Sy("",{providedIn:"root",factory:()=>WV}),WV="ng",_M=new Sy(""),P1=new Sy("",{providedIn:"platform",factory:()=>"unknown"});var bM=new Sy("",{providedIn:"root",factory:()=>qV().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var YV="h",ZV="b";var XV=()=>null;function wM(e,n,r=!1){return XV(e,n,r)}var SR=!1,KV=new Sy("",{providedIn:"root",factory:()=>SR});var ID=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$5})`}};function EM(e){return e instanceof ID?e.changingThisBreaksApplicationSecurity:e}function CR(e){return e instanceof Function?e():e}var X_=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(X_||{}),JV;function xM(e,n){return JV(e,n)}function xE(e,n,r,o,s){if(o!=null){let l,h=!1;J_(o)?l=o:A1(o)&&(h=!0,o=o[K_]);let p=O_(o);e===0&&r!==null?s==null?MR(n,r,p):bS(n,r,p,s||null,!0):e===1&&r!==null?bS(n,r,p,s||null,!0):e===2?p6(n,p,h):e===3&&n.destroyNode(p),l!=null&&g6(n,e,l,r,s)}}function QV(e,n){return e.createText(n)}function t6(e,n,r){e.setValue(n,r)}function IR(e,n,r){return e.createElement(n,r)}function e6(e,n){DR(e,n),n[K_]=null,n[m_]=null}function n6(e,n,r,o,s,l){o[K_]=s,o[m_]=n,BS(e,o,r,1,s,l)}function DR(e,n){n[Y_].changeDetectionScheduler?.notify(8),BS(e,n,n[Zv],2,null,null)}function r6(e){let n=e[Yx];if(!n)return QI(e[Uy],e);for(;n;){let r=null;if(A1(n))r=n[Yx];else{let o=n[E0];o&&(r=o)}if(!r){for(;n&&!n[p_]&&n!==e;)A1(n)&&QI(n[Uy],n),n=n[x0];n===null&&(n=e),A1(n)&&QI(n[Uy],n),r=n&&n[p_]}n=r}}function i6(e,n,r,o){let s=E0+o,l=r.length;o>0&&(r[s-1][p_]=n),o<l-E0?(n[p_]=r[s],yP(r,E0+o,n)):(r.push(n),n[p_]=null),n[x0]=r;let h=n[yw];h!==null&&r!==h&&kR(h,n);let p=n[Z_];p!==null&&p.insertView(e),mD(n),n[Fy]|=128}function kR(e,n){let r=e[kE],o=n[x0];if(A1(o))e[Fy]|=dS.HasTransplantedViews;else{let s=o[x0][d_];n[d_]!==s&&(e[Fy]|=dS.HasTransplantedViews)}r===null?e[kE]=[n]:r.push(n)}function TM(e,n){let r=e[kE],o=r.indexOf(n);r.splice(o,1)}function Xx(e,n){if(e.length<=E0)return;let r=E0+n,o=e[r];if(o){let s=o[yw];s!==null&&s!==e&&TM(s,o),n>0&&(e[r-1][p_]=o[p_]);let l=cS(e,E0+n);e6(o[Uy],o);let h=l[Z_];h!==null&&h.detachView(l[Uy]),o[x0]=null,o[p_]=null,o[Fy]&=-129}return o}function FS(e,n){if(!(n[Fy]&256)){let r=n[Zv];r.destroyNode&&BS(e,n,r,3,null,null),r6(n)}}function QI(e,n){if(n[Fy]&256)return;let r=Jy(null);try{n[Fy]&=-129,n[Fy]|=256,n[K0]&&AI(n[K0]),s6(e,n),o6(e,n),n[Uy].type===1&&n[Zv].destroy();let o=n[yw];if(o!==null&&J_(n[x0])){o!==n[x0]&&TM(o,n);let s=n[Z_];s!==null&&s.detachView(e)}GV(n)}finally{Jy(r)}}function o6(e,n){let r=e.cleanup,o=n[fS];if(r!==null)for(let l=0;l<r.length-1;l+=2)if(typeof r[l]=="string"){let h=r[l+3];h>=0?o[h]():o[-h].unsubscribe(),l+=2}else{let h=o[r[l+1]];r[l].call(h)}o!==null&&(n[fS]=null);let s=n[T1];if(s!==null){n[T1]=null;for(let l=0;l<s.length;l++){let h=s[l];h()}}}function s6(e,n){let r;if(e!=null&&(r=e.destroyHooks)!=null)for(let o=0;o<r.length;o+=2){let s=n[r[o]];if(!(s instanceof ww)){let l=r[o+1];if(Array.isArray(l))for(let h=0;h<l.length;h+=2){let p=s[l[h]],d=l[h+1];D_(4,p,d);try{d.call(p)}finally{D_(5,p,d)}}else{D_(4,s,l);try{l.call(s)}finally{D_(5,s,l)}}}}}function a6(e,n,r){return l6(e,n.parent,r)}function l6(e,n,r){let o=n;for(;o!==null&&o.type&168;)n=o,o=n.parent;if(o===null)return r[K_];{let{componentOffset:s}=o;if(s>-1){let{encapsulation:l}=e.data[o.directiveStart+s];if(l===M_.None||l===M_.Emulated)return null}return Q0(o,r)}}function bS(e,n,r,o,s){e.insertBefore(n,r,o,s)}function MR(e,n,r){e.appendChild(n,r)}function ZN(e,n,r,o,s){o!==null?bS(e,n,r,o,s):MR(e,n,r)}function OR(e,n){return e.parentNode(n)}function u6(e,n){return e.nextSibling(n)}function c6(e,n,r){return f6(e,n,r)}function h6(e,n,r){return e.type&40?Q0(e,r):null}var f6=h6,XN;function AM(e,n,r,o){let s=a6(e,o,n),l=n[Zv],h=o.parent||n[m_],p=c6(h,o,n);if(s!=null)if(Array.isArray(r))for(let d=0;d<r.length;d++)ZN(l,s,r[d],p,!1);else ZN(l,s,r,p,!1);XN!==void 0&&XN(l,o,n,r,s)}function Ux(e,n){if(n!==null){let r=n.type;if(r&3)return Q0(n,e);if(r&4)return DD(-1,e[n.index]);if(r&8){let o=n.child;if(o!==null)return Ux(e,o);{let s=e[n.index];return J_(s)?DD(-1,s):O_(s)}}else{if(r&128)return Ux(e,n.next);if(r&32)return xM(n,e)()||O_(e[n.index]);{let o=NR(e,n);if(o!==null){if(Array.isArray(o))return o[0];let s=_w(e[d_]);return Ux(s,o)}else return Ux(e,n.next)}}}return null}function NR(e,n){if(n!==null){let o=e[d_][m_],s=n.projection;return o.projection[s]}return null}function DD(e,n){let r=E0+e+1;if(r<n.length){let o=n[r],s=o[Uy].firstChild;if(s!==null)return Ux(o,s)}return n[vw]}function p6(e,n,r){e.removeChild(null,n,r)}function SM(e,n,r,o,s,l,h){for(;r!=null;){if(r.type===128){r=r.next;continue}let p=o[r.index],d=r.type;if(h&&n===0&&(p&&xw(O_(p),o),r.flags|=2),(r.flags&32)!==32)if(d&8)SM(e,n,r.child,o,s,l,!1),xE(n,e,s,p,l);else if(d&32){let g=xM(r,o),y;for(;y=g();)xE(n,e,s,y,l);xE(n,e,s,p,l)}else d&16?d6(e,n,o,r,s,l):xE(n,e,s,p,l);r=h?r.projectionNext:r.next}}function BS(e,n,r,o,s,l){SM(r,o,e.firstChild,n,s,l,!1)}function d6(e,n,r,o,s,l){let h=r[d_],d=h[m_].projection[o.projection];if(Array.isArray(d))for(let g=0;g<d.length;g++){let y=d[g];xE(n,e,s,y,l)}else{let g=d,y=h[x0];bR(o)&&(g.flags|=128),SM(e,n,g,y,s,l,!0)}}function g6(e,n,r,o,s){let l=r[vw],h=O_(r);l!==h&&xE(n,e,o,l,s);for(let p=E0;p<r.length;p++){let d=r[p];BS(d[Uy],d,e,n,o,l)}}function m6(e,n,r,o,s){if(n)s?e.addClass(r,o):e.removeClass(r,o);else{let l=o.indexOf("-")===-1?void 0:X_.DashCase;s==null?e.removeStyle(r,o,l):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),l|=X_.Important),e.setStyle(r,o,s,l))}}function y6(e,n,r){e.setAttribute(n,"style",r)}function PR(e,n,r){r===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",r)}function RR(e,n,r){let{mergedAttrs:o,classes:s,styles:l}=r;o!==null&&cD(e,n,o),s!==null&&PR(e,n,s),l!==null&&y6(e,n,l)}var v_={};function hv(e=1){LR(a0(),ev(),O1()+e,!1)}function LR(e,n,r,o){if(!o)if((n[Fy]&3)===3){let l=e.preOrderCheckHooks;l!==null&&iS(n,l,r)}else{let l=e.preOrderHooks;l!==null&&oS(n,l,0,r)}bw(r)}function pv(e,n=Wy.Default){let r=ev();if(r===null)return By(e,n);let o=N0();return pR(o,r,A0(e),n)}function jR(e,n,r,o,s,l){let h=Jy(null);try{let p=null;s&S1.SignalBased&&(p=n[o][G_]),p!==null&&p.transformFn!==void 0&&(l=p.transformFn(l)),s&S1.HasDecoratorInputTransform&&(l=e.inputTransforms[o].call(n,l)),e.setInput!==null?e.setInput(n,p,l,r,o):LP(n,p,o,l)}finally{Jy(h)}}function v6(e,n){let r=e.hostBindingOpCodes;if(r!==null)try{for(let o=0;o<r.length;o++){let s=r[o];if(s<0)bw(~s);else{let l=s,h=r[++o],p=r[++o];cV(h,l);let d=n[l];p(2,d)}}}finally{bw(-1)}}function VS(e,n,r,o,s,l,h,p,d,g,y){let v=n.blueprint.slice();return v[K_]=s,v[Fy]=o|4|128|8|64,(g!==null||e&&e[Fy]&2048)&&(v[Fy]|=2048),HP(v),v[x0]=v[LE]=e,v[w0]=r,v[Y_]=h||e&&e[Y_],v[Zv]=p||e&&e[Zv],v[DE]=d||e&&e[DE]||null,v[m_]=l,v[PS]=HV(),v[Wx]=y,v[NP]=g,v[d_]=n.type==2?e[d_]:v,v}function US(e,n,r,o,s){let l=e.data[n];if(l===null)l=_6(e,n,r,o,s),uV()&&(l.flags|=32);else if(l.type&64){l.type=r,l.value=o,l.attrs=s;let h=oV();l.injectorIndex=h===null?-1:h.injectorIndex}return oT(l,!0),l}function _6(e,n,r,o,s){let l=YP(),h=ZP(),p=h?l:l&&l.parent,d=e.data[n]=A6(e,p,r,n,o,s);return e.firstChild===null&&(e.firstChild=d),l!==null&&(h?l.child==null&&d.parent!==null&&(l.child=d):l.next===null&&(l.next=d,d.prev=l)),d}function FR(e,n,r,o){if(r===0)return-1;let s=n.length;for(let l=0;l<r;l++)n.push(o),e.blueprint.push(o),e.data.push(null);return s}function BR(e,n,r,o,s){let l=O1(),h=o&2;try{bw(-1),h&&n.length>O0&&LR(e,n,O0,!1),D_(h?2:0,s),r(o,s)}finally{bw(l),D_(h?3:1,s)}}function VR(e,n,r){if(RP(n)){let o=Jy(null);try{let s=n.directiveStart,l=n.directiveEnd;for(let h=s;h<l;h++){let p=e.data[h];if(p.contentQueries){let d=r[h];p.contentQueries(1,d,h)}}}finally{Jy(o)}}}function UR(e,n,r){WP()&&(M6(e,n,r,Q0(r,n)),(r.flags&64)===64&&qR(e,n,r))}function zR(e,n,r=Q0){let o=n.localNames;if(o!==null){let s=n.index+1;for(let l=0;l<o.length;l+=2){let h=o[l+1],p=h===-1?r(n,e):e[h];e[s++]=p}}}function HR(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=CM(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function CM(e,n,r,o,s,l,h,p,d,g,y){let v=O0+o,_=v+s,w=b6(v,_),I=typeof g=="function"?g():g;return w[Uy]={type:e,blueprint:w,template:r,queries:null,viewQuery:p,declTNode:n,data:w.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof l=="function"?l():l,pipeRegistry:typeof h=="function"?h():h,firstChild:null,schemas:d,consts:I,incompleteFirstPass:!1,ssrId:y}}function b6(e,n){let r=[];for(let o=0;o<n;o++)r.push(o<e?null:v_);return r}function w6(e,n,r,o){let l=o.get(KV,SR)||r===M_.ShadowDom,h=e.selectRootElement(n,l);return E6(h),h}function E6(e){x6(e)}var x6=()=>null;function T6(e,n,r,o){let s=ZR(n);s.push(r),e.firstCreatePass&&XR(e).push(o,s.length-1)}function A6(e,n,r,o,s,l){let h=n?n.injectorIndex:-1,p=0;return nV()&&(p|=128),{type:r,index:o,insertBeforeIndex:null,injectorIndex:h,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:p,providerIndexes:0,value:s,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KN(e,n,r,o,s){for(let l in n){if(!n.hasOwnProperty(l))continue;let h=n[l];if(h===void 0)continue;o??={};let p,d=S1.None;Array.isArray(h)?(p=h[0],d=h[1]):p=h;let g=l;if(s!==null){if(!s.hasOwnProperty(l))continue;g=s[l]}e===0?JN(o,r,g,p,d):JN(o,r,g,p)}return o}function JN(e,n,r,o,s){let l;e.hasOwnProperty(r)?(l=e[r]).push(n,o):l=e[r]=[n,o],s!==void 0&&l.push(s)}function S6(e,n,r){let o=n.directiveStart,s=n.directiveEnd,l=e.data,h=n.attrs,p=[],d=null,g=null;for(let y=o;y<s;y++){let v=l[y],_=r?r.get(v):null,w=_?_.inputs:null,I=_?_.outputs:null;d=KN(0,v.inputs,y,d,w),g=KN(1,v.outputs,y,g,I);let G=d!==null&&h!==null&&!iM(n)?z6(d,y,h):null;p.push(G)}d!==null&&(d.hasOwnProperty("class")&&(n.flags|=8),d.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=p,n.inputs=d,n.outputs=g}function C6(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function IM(e,n,r,o,s,l,h,p){let d=Q0(n,r),g=n.inputs,y;!p&&g!=null&&(y=g[o])?(DM(e,r,y,o,s),RS(n)&&I6(r,n.index)):n.type&3?(o=C6(o),s=h!=null?h(s,n.value||"",o):s,l.setProperty(d,o,s)):n.type&12}function I6(e,n){let r=M1(n,e);r[Fy]&16||(r[Fy]|=64)}function $R(e,n,r,o){if(WP()){let s=o===null?null:{"":-1},l=N6(e,r),h,p;l===null?h=p=null:[h,p]=l,h!==null&&GR(e,n,r,h,s,p),s&&P6(r,o,s)}r.mergedAttrs=Gx(r.mergedAttrs,r.attrs)}function GR(e,n,r,o,s,l){for(let g=0;g<o.length;g++)bD(vS(r,n),e,o[g].type);L6(r,e.data.length,o.length);for(let g=0;g<o.length;g++){let y=o[g];y.providersResolver&&y.providersResolver(y)}let h=!1,p=!1,d=FR(e,n,o.length,null);for(let g=0;g<o.length;g++){let y=o[g];r.mergedAttrs=Gx(r.mergedAttrs,y.hostAttrs),j6(e,r,n,d,y),R6(d,y,s),y.contentQueries!==null&&(r.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(r.flags|=64);let v=y.type.prototype;!h&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),h=!0),!p&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),p=!0),d++}S6(e,r,l)}function D6(e,n,r,o,s){let l=s.hostBindings;if(l){let h=e.hostBindingOpCodes;h===null&&(h=e.hostBindingOpCodes=[]);let p=~n.index;k6(h)!=p&&h.push(p),h.push(r,o,l)}}function k6(e){let n=e.length;for(;n>0;){let r=e[--n];if(typeof r=="number"&&r<0)return r}return 0}function M6(e,n,r,o){let s=r.directiveStart,l=r.directiveEnd;RS(r)&&F6(n,r,e.data[s+r.componentOffset]),e.firstCreatePass||vS(r,n),xw(o,n);let h=r.initialInputs;for(let p=s;p<l;p++){let d=e.data[p],g=Ew(n,e,p,r);if(xw(g,n),h!==null&&U6(n,p-s,g,d,r,h),C1(d)){let y=M1(r.index,n);y[w0]=Ew(n,e,p,r)}}}function qR(e,n,r){let o=r.directiveStart,s=r.directiveEnd,l=r.index,h=hV();try{bw(l);for(let p=o;p<s;p++){let d=e.data[p],g=n[p];yD(p),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&O6(d,g)}}finally{bw(-1),yD(h)}}function O6(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function N6(e,n){let r=e.directiveRegistry,o=null,s=null;if(r)for(let l=0;l<r.length;l++){let h=r[l];if(xB(n,h.selectors,!1))if(o||(o=[]),C1(h))if(h.findHostDirectiveDefs!==null){let p=[];s=s||new Map,h.findHostDirectiveDefs(h,p,s),o.unshift(...p,h);let d=p.length;kD(e,n,d)}else o.unshift(h),kD(e,n,0);else s=s||new Map,h.findHostDirectiveDefs?.(h,o,s),o.push(h)}return o===null?null:[o,s]}function kD(e,n,r){n.componentOffset=r,(e.components??=[]).push(n.index)}function P6(e,n,r){if(n){let o=e.localNames=[];for(let s=0;s<n.length;s+=2){let l=r[n[s+1]];if(l==null)throw new Oy(-301,!1);o.push(n[s],l)}}}function R6(e,n,r){if(r){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)r[n.exportAs[o]]=e;C1(n)&&(r[""]=e)}}function L6(e,n,r){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+r,e.providerIndexes=n}function j6(e,n,r,o,s){e.data[o]=s;let l=s.factory||(s.factory=gw(s.type,!0)),h=new ww(l,C1(s),pv);e.blueprint[o]=h,r[o]=h,D6(e,n,o,FR(e,r,s.hostVars,v_),s)}function F6(e,n,r){let o=Q0(n,e),s=HR(r),l=e[Y_].rendererFactory,h=16;r.signals?h=4096:r.onPush&&(h=64);let p=zS(e,VS(e,s,null,h,o,n,null,l.createRenderer(o,r),null,null,null));e[n.index]=p}function B6(e,n,r,o,s,l){let h=Q0(e,n);V6(n[Zv],h,l,e.value,r,o,s)}function V6(e,n,r,o,s,l,h){if(l==null)e.removeAttribute(n,s,r);else{let p=h==null?Hx(l):h(l,o||"",s);e.setAttribute(n,s,p,r)}}function U6(e,n,r,o,s,l){let h=l[n];if(h!==null)for(let p=0;p<h.length;){let d=h[p++],g=h[p++],y=h[p++],v=h[p++];jR(o,r,d,g,y,v)}}function z6(e,n,r){let o=null,s=0;for(;s<r.length;){let l=r[s];if(l===0){s+=4;continue}else if(l===5){s+=2;continue}if(typeof l=="number")break;if(e.hasOwnProperty(l)){o===null&&(o=[]);let h=e[l];for(let p=0;p<h.length;p+=3)if(h[p]===n){o.push(l,h[p+1],h[p+2],r[s+1]);break}}s+=2}return o}function WR(e,n,r,o){return[e,!0,0,n,null,o,null,r,null,null]}function YR(e,n){let r=e.contentQueries;if(r!==null){let o=Jy(null);try{for(let s=0;s<r.length;s+=2){let l=r[s],h=r[s+1];if(h!==-1){let p=e.data[h];cM(l),p.contentQueries(2,n[h],h)}}}finally{Jy(o)}}}function zS(e,n){return e[Yx]?e[FN][p_]=n:e[Yx]=n,e[FN]=n,n}function MD(e,n,r){cM(0);let o=Jy(null);try{n(e,r)}finally{Jy(o)}}function ZR(e){return e[fS]??=[]}function XR(e){return e.cleanup??=[]}function KR(e,n){let r=e[DE],o=r?r.get(D1,null):null;o&&o.handleError(n)}function DM(e,n,r,o,s){for(let l=0;l<r.length;){let h=r[l++],p=r[l++],d=r[l++],g=n[h],y=e.data[h];jR(y,g,o,p,d,s)}}function JR(e,n,r){let o=UP(n,e);t6(e[Zv],o,r)}function H6(e,n){let r=M1(n,e),o=r[Uy];$6(o,r);let s=r[K_];s!==null&&r[Wx]===null&&(r[Wx]=wM(s,r[DE])),kM(o,r,r[w0])}function $6(e,n){for(let r=n.length;r<e.blueprint.length;r++)n.push(e.blueprint[r])}function kM(e,n,r){hM(n);try{let o=e.viewQuery;o!==null&&MD(1,o,r);let s=e.template;s!==null&&BR(e,n,s,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),n[Z_]?.finishViewCreation(e),e.staticContentQueries&&YR(e,n),e.staticViewQueries&&MD(2,e.viewQuery,r);let l=e.components;l!==null&&G6(n,l)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),o}finally{n[Fy]&=-5,fM()}}function G6(e,n){for(let r=0;r<n.length;r++)H6(e,n[r])}function HS(e,n,r,o){let s=Jy(null);try{let l=n.tView,p=e[Fy]&4096?4096:16,d=VS(e,l,r,p,null,n,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null),g=e[n.index];d[yw]=g;let y=e[Z_];return y!==null&&(d[Z_]=y.createEmbeddedView(l)),kM(l,d,r),d}finally{Jy(s)}}function QR(e,n){let r=E0+n;if(r<e.length)return e[r]}function Kx(e,n){return!n||n.firstChild===null||bR(e)}function $S(e,n,r,o=!0){let s=n[Uy];if(i6(s,n,e,r),o){let h=DD(r,e),p=n[Zv],d=OR(p,e[vw]);d!==null&&n6(s,e[m_],p,n,d,h)}let l=n[Wx];l!==null&&l.firstChild!==null&&(l.firstChild=null)}function tL(e,n){let r=Xx(e,n);return r!==void 0&&FS(r[Uy],r),r}function wS(e,n,r,o,s=!1){for(;r!==null;){if(r.type===128){r=s?r.projectionNext:r.next;continue}let l=n[r.index];l!==null&&o.push(O_(l)),J_(l)&&q6(l,o);let h=r.type;if(h&8)wS(e,n,r.child,o);else if(h&32){let p=xM(r,n),d;for(;d=p();)o.push(d)}else if(h&16){let p=NR(n,r);if(Array.isArray(p))o.push(...p);else{let d=_w(n[d_]);wS(d[Uy],d,p,o,!0)}}r=s?r.projectionNext:r.next}return o}function q6(e,n){for(let r=E0;r<e.length;r++){let o=e[r],s=o[Uy].firstChild;s!==null&&wS(o[Uy],o,s,n)}e[vw]!==e[K_]&&n.push(e[vw])}var eL=[];function W6(e){return e[K0]??Y6(e)}function Y6(e){let n=eL.pop()??Object.create(X6);return n.lView=e,n}function Z6(e){e.lView[K0]!==e&&(e.lView=null,eL.push(e))}var X6=ov(gy({},jx),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{LS(e.lView)},consumerOnSignalRead(){this.lView[K0]=this}});function K6(e){let n=e[K0]??Object.create(J6);return n.lView=e,n}var J6=ov(gy({},jx),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=_w(e.lView);for(;n&&!nL(n[Uy]);)n=_w(n);n&&$P(n)},consumerOnSignalRead(){this.lView[K0]=this}});function nL(e){return e.type!==2}var Q6=100;function rL(e,n=!0,r=0){let o=e[Y_],s=o.rendererFactory,l=!1;l||s.begin?.();try{tU(e,r)}catch(h){throw n&&KR(e,h),h}finally{l||(s.end?.(),o.inlineEffectRunner?.flush())}}function tU(e,n){let r=XP();try{VN(!0),OD(e,n);let o=0;for(;Zx(e);){if(o===Q6)throw new Oy(103,!1);o++,OD(e,1)}}finally{VN(r)}}function eU(e,n,r,o){let s=n[Fy];if((s&256)===256)return;let l=!1,h=!1;!l&&n[Y_].inlineEffectRunner?.flush(),hM(n);let p=!0,d=null,g=null;l||(nL(e)?(g=W6(n),d=AA(g)):zO()===null?(p=!1,g=K6(n),d=AA(g)):n[K0]&&(AI(n[K0]),n[K0]=null));try{HP(n),lV(e.bindingStartIndex),r!==null&&BR(e,n,r,2,o);let y=(s&3)===3;if(!l)if(y){let w=e.preOrderCheckHooks;w!==null&&iS(n,w,null)}else{let w=e.preOrderHooks;w!==null&&oS(n,w,0,null),ZI(n,0)}if(h||nU(n),iL(n,0),e.contentQueries!==null&&YR(e,n),!l)if(y){let w=e.contentCheckHooks;w!==null&&iS(n,w)}else{let w=e.contentHooks;w!==null&&oS(n,w,1),ZI(n,1)}v6(e,n);let v=e.components;v!==null&&sL(n,v,0);let _=e.viewQuery;if(_!==null&&MD(2,_,o),!l)if(y){let w=e.viewCheckHooks;w!==null&&iS(n,w)}else{let w=e.viewHooks;w!==null&&oS(n,w,2),ZI(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[YI]){for(let w of n[YI])w();n[YI]=null}l||(n[Fy]&=-73)}catch(y){throw l||LS(n),y}finally{g!==null&&(xI(g,d),p&&Z6(g)),fM()}}function iL(e,n){for(let r=ER(e);r!==null;r=xR(r))for(let o=E0;o<r.length;o++){let s=r[o];oL(s,n)}}function nU(e){for(let n=ER(e);n!==null;n=xR(n)){if(!(n[Fy]&dS.HasTransplantedViews))continue;let r=n[kE];for(let o=0;o<r.length;o++){let s=r[o];$P(s)}}}function rU(e,n,r){let o=M1(n,e);oL(o,r)}function oL(e,n){uM(e)&&OD(e,n)}function OD(e,n){let o=e[Uy],s=e[Fy],l=e[K0],h=!!(n===0&&s&16);if(h||=!!(s&64&&n===0),h||=!!(s&1024),h||=!!(l?.dirty&&TI(l)),h||=!1,l&&(l.dirty=!1),e[Fy]&=-9217,h)eU(o,e,o.template,e[w0]);else if(s&8192){iL(e,1);let p=o.components;p!==null&&sL(e,p,1)}}function sL(e,n,r){for(let o=0;o<n.length;o++)rU(e,n[o],r)}function MM(e,n){let r=XP()?64:1088;for(e[Y_].changeDetectionScheduler?.notify(n);e;){e[Fy]|=r;let o=_w(e);if(dD(e)&&!o)return e;e=o}return null}var Tw=class{get rootNodes(){let n=this._lView,r=n[Uy];return wS(r,n,r.firstChild,[])}constructor(n,r,o=!0){this._lView=n,this._cdRefInjectingView=r,this.notifyErrorHandler=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[w0]}set context(n){this._lView[w0]=n}get destroyed(){return(this._lView[Fy]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[x0];if(J_(n)){let r=n[pS],o=r?r.indexOf(this):-1;o>-1&&(Xx(n,o),cS(r,o))}this._attachedToViewContainer=!1}FS(this._lView[Uy],this._lView)}onDestroy(n){GP(this._lView,n)}markForCheck(){MM(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Fy]&=-129}reattach(){mD(this._lView),this._lView[Fy]|=128}detectChanges(){this._lView[Fy]|=1024,rL(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oy(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=dD(this._lView),r=this._lView[yw];r!==null&&!n&&TM(r,this._lView),DR(this._lView[Uy],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Oy(902,!1);this._appRef=n;let r=dD(this._lView),o=this._lView[yw];o!==null&&!r&&kR(o,this._lView),mD(this._lView)}},Jx=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=sU;let e=n;return e})(),iU=Jx,oU=class extends iU{constructor(n,r,o){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){let s=HS(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new Tw(s)}};function sU(){return OM(N0(),ev())}function OM(e,n){return e.type&4?new oU(n,e,FE(e,n)):null}var VJ=new RegExp(`^(\\d+)*(${ZV}|${YV})*(.*)`);var aU=()=>null;function Qx(e,n){return aU(e,n)}var tT=class{},NM=new Sy("",{providedIn:"root",factory:()=>!1});var aL=new Sy(""),ND=class{},ES=class{};function lU(e){let n=Error(`No component factory found for ${k0(e)}.`);return n[uU]=e,n}var uU="ngComponent";var PD=class{resolveComponentFactory(n){throw lU(n)}},zM=class zM{};zM.NULL=new PD;var OE=zM,NE=class{},BE=(()=>{let n=class n{constructor(){this.destroyNode=null}};n.__NG_ELEMENT_ID__=()=>cU();let e=n;return e})();function cU(){let e=ev(),n=N0(),r=M1(n.index,e);return(A1(r)?r:e)[Zv]}var hU=(()=>{let n=class n{};n.\u0275prov=Dy({token:n,providedIn:"root",factory:()=>null});let e=n;return e})();var QN=new Set;function R1(e){QN.has(e)||(QN.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var lL=(()=>{let n=class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let o=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of o)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};n.\u0275prov=Dy({token:n,providedIn:"root",factory:()=>new n});let e=n;return e})();function RD(e,n,r){let o=r?e.styles:null,s=r?e.classes:null,l=0;if(n!==null)for(let h=0;h<n.length;h++){let p=n[h];if(typeof p=="number")l=p;else if(l==1)s=IN(s,p);else if(l==2){let d=p,g=n[++h];o=IN(o,d+": "+g+";")}}r?e.styles=o:e.stylesWithoutHost=o,r?e.classes=s:e.classesWithoutHost=s}var xS=class extends OE{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let r=mw(n);return new eT(r,this.ngModule)}};function tP(e,n){let r=[];for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;let l=Array.isArray(s),h=l?s[0]:s,p=l?s[1]:S1.None;n?r.push({propName:h,templateName:o,isSignal:(p&S1.SignalBased)!==0}):r.push({propName:h,templateName:o})}return r}function fU(e){let n=e.toLowerCase();return n==="svg"?VP:n==="math"?YB:null}var eT=class extends ES{get inputs(){let n=this.componentDef,r=n.inputTransforms,o=tP(n.inputs,!0);if(r!==null)for(let s of o)r.hasOwnProperty(s.propName)&&(s.transform=r[s.propName]);return o}get outputs(){return tP(this.componentDef.outputs,!1)}constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=CB(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}create(n,r,o,s){let l=Jy(null);try{s=s||this.ngModule;let h=s instanceof M0?s:s?.injector;h&&this.componentDef.getStandaloneInjector!==null&&(h=this.componentDef.getStandaloneInjector(h)||h);let p=h?new vD(n,h):n,d=p.get(NE,null);if(d===null)throw new Oy(407,!1);let g=p.get(hU,null),y=p.get(lL,null),v=p.get(tT,null),_={rendererFactory:d,sanitizer:g,inlineEffectRunner:null,afterRenderEventManager:y,changeDetectionScheduler:v},w=d.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",G=o?w6(w,o,this.componentDef.encapsulation,p):IR(w,I,fU(I)),_t=512;this.componentDef.signals?_t|=4096:this.componentDef.onPush||(_t|=16);let _r=null;G!==null&&(_r=wM(G,p,!0));let _o=CM(0,null,null,1,0,null,null,null,null,null,null),Ca=VS(null,_o,null,_t,null,null,_,w,p,null,_r);hM(Ca);let _a,_l;try{let Qa=this.componentDef,Kc,jc=null;Qa.findHostDirectiveDefs?(Kc=[],jc=new Map,Qa.findHostDirectiveDefs(Qa,Kc,jc),Kc.push(Qa)):Kc=[Qa];let _h=pU(Ca,G),_m=dU(_h,G,Qa,Kc,Ca,_,w);_l=lM(_o,O0),G&&yU(w,Qa,G,o),r!==void 0&&vU(_l,this.ngContentSelectors,r),_a=mU(_m,Qa,Kc,jc,Ca,[_U]),kM(_o,Ca,null)}finally{fM()}return new LD(this.componentType,_a,FE(_l,Ca),Ca,_l)}finally{Jy(l)}}},LD=class extends ND{constructor(n,r,o,s,l){super(),this.location=o,this._rootLView=s,this._tNode=l,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new Tw(s,void 0,!1),this.componentType=n}setInput(n,r){let o=this._tNode.inputs,s;if(o!==null&&(s=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),r))return;let l=this._rootLView;DM(l[Uy],l,s,n,r),this.previousInputValues.set(n,r);let h=M1(this._tNode.index,l);MM(h,1)}}get injector(){return new dw(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function pU(e,n){let r=e[Uy],o=O0;return e[o]=n,US(r,o,2,"#host",null)}function dU(e,n,r,o,s,l,h){let p=s[Uy];gU(o,e,n,h);let d=null;n!==null&&(d=wM(n,s[DE]));let g=l.rendererFactory.createRenderer(n,r),y=16;r.signals?y=4096:r.onPush&&(y=64);let v=VS(s,HR(r),null,y,s[e.index],e,l,g,null,null,d);return p.firstCreatePass&&kD(p,e,o.length-1),zS(s,v),s[e.index]=v}function gU(e,n,r,o){for(let s of e)n.mergedAttrs=Gx(n.mergedAttrs,s.hostAttrs);n.mergedAttrs!==null&&(RD(n,n.mergedAttrs,!0),r!==null&&RR(o,r,n))}function mU(e,n,r,o,s,l){let h=N0(),p=s[Uy],d=Q0(h,s);GR(p,s,h,r,null,o);for(let y=0;y<r.length;y++){let v=h.directiveStart+y,_=Ew(s,p,v,h);xw(_,s)}qR(p,s,h),d&&xw(d,s);let g=Ew(s,p,h.directiveStart+h.componentOffset,h);if(e[w0]=s[w0]=g,l!==null)for(let y of l)y(g,n);return VR(p,h,s),g}function yU(e,n,r,o){if(o)cD(e,r,["ng-version","18.1.4"]);else{let{attrs:s,classes:l}=IB(n.selectors[0]);s&&cD(e,r,s),l&&l.length>0&&PR(e,r,l.join(" "))}}function vU(e,n,r){let o=e.projection=[];for(let s=0;s<n.length;s++){let l=r[s];o.push(l!=null?Array.from(l):null)}}function _U(){let e=N0();gM(ev()[Uy],e)}var VE=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=bU;let e=n;return e})();function bU(){let e=N0();return cL(e,ev())}var wU=VE,uL=class extends wU{constructor(n,r,o){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=o}get element(){return FE(this._hostTNode,this._hostLView)}get injector(){return new dw(this._hostTNode,this._hostLView)}get parentInjector(){let n=mM(this._hostTNode,this._hostLView);if(aR(n)){let r=mS(n,this._hostLView),o=gS(n),s=r[Uy].data[o+8];return new dw(s,r)}else return new dw(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let r=eP(this._lContainer);return r!==null&&r[n]||null}get length(){return this._lContainer.length-E0}createEmbeddedView(n,r,o){let s,l;typeof o=="number"?s=o:o!=null&&(s=o.index,l=o.injector);let h=Qx(this._lContainer,n.ssrId),p=n.createEmbeddedViewImpl(r||{},l,h);return this.insertImpl(p,s,Kx(this._hostTNode,h)),p}createComponent(n,r,o,s,l){let h=n&&!$B(n),p;if(h)p=r;else{let I=r||{};p=I.index,o=I.injector,s=I.projectableNodes,l=I.environmentInjector||I.ngModuleRef}let d=h?n:new eT(mw(n)),g=o||this.parentInjector;if(!l&&d.ngModule==null){let G=(h?g:this.parentInjector).get(M0,null);G&&(l=G)}let y=mw(d.componentType??{}),v=Qx(this._lContainer,y?.id??null),_=v?.firstChild??null,w=d.create(g,s,_,l);return this.insertImpl(w.hostView,p,Kx(this._hostTNode,v)),w}insert(n,r){return this.insertImpl(n,r,!0)}insertImpl(n,r,o){let s=n._lView;if(XB(s)){let p=this.indexOf(n);if(p!==-1)this.detach(p);else{let d=s[x0],g=new uL(d,d[m_],d[x0]);g.detach(g.indexOf(n))}}let l=this._adjustIndex(r),h=this._lContainer;return $S(h,s,l,o),n.attachToViewContainerRef(),yP(tD(h),l,n),n}move(n,r){return this.insert(n,r)}indexOf(n){let r=eP(this._lContainer);return r!==null?r.indexOf(n):-1}remove(n){let r=this._adjustIndex(n,-1),o=Xx(this._lContainer,r);o&&(cS(tD(this._lContainer),r),FS(o[Uy],o))}detach(n){let r=this._adjustIndex(n,-1),o=Xx(this._lContainer,r);return o&&cS(tD(this._lContainer),r)!=null?new Tw(o):null}_adjustIndex(n,r=0){return n??this.length+r}};function eP(e){return e[pS]}function tD(e){return e[pS]||(e[pS]=[])}function cL(e,n){let r,o=n[e.index];return J_(o)?r=o:(r=WR(o,n,null,e),n[e.index]=r,zS(n,r)),xU(r,n,e,o),new uL(r,e,n)}function EU(e,n){let r=e[Zv],o=r.createComment(""),s=Q0(n,e),l=OR(r,s);return bS(r,l,o,u6(r,s),!1),o}var xU=SU,TU=()=>!1;function AU(e,n,r){return TU(e,n,r)}function SU(e,n,r,o){if(e[vw])return;let s;r.type&8?s=O_(o):s=EU(n,r),e[vw]=s}var jD=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},FD=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let r=n.queries;if(r!==null){let o=n.contentQueries!==null?n.contentQueries[0]:r.length,s=[];for(let l=0;l<o;l++){let h=r.getByIndex(l),p=this.queries[h.indexInDeclarationView];s.push(p.clone())}return new e(s)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)PM(n,r).matches!==null&&this.queries[r].setDirty()}},BD=class{constructor(n,r,o=null){this.flags=r,this.read=o,typeof n=="string"?this.predicate=PU(n):this.predicate=n}},VD=class e{constructor(n=[]){this.queries=n}elementStart(n,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let o=0;o<this.length;o++){let s=r!==null?r.length:0,l=this.getByIndex(o).embeddedTView(n,s);l&&(l.indexInDeclarationView=o,r!==null?r.push(l):r=[l])}return r!==null?new e(r):null}template(n,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},UD=class e{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let r=this._declarationNodeIndex,o=n.parent;for(;o!==null&&o.type&8&&o.index!==r;)o=o.parent;return r===(o!==null?o.index:-1)}return this._appliesToNextNode}matchTNode(n,r){let o=this.metadata.predicate;if(Array.isArray(o))for(let s=0;s<o.length;s++){let l=o[s];this.matchTNodeWithReadOption(n,r,CU(r,l)),this.matchTNodeWithReadOption(n,r,sS(r,n,l,!1,!1))}else o===Jx?r.type&4&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,sS(r,n,o,!1,!1))}matchTNodeWithReadOption(n,r,o){if(o!==null){let s=this.metadata.read;if(s!==null)if(s===L_||s===VE||s===Jx&&r.type&4)this.addMatch(r.index,-2);else{let l=sS(r,n,s,!1,!1);l!==null&&this.addMatch(r.index,l)}else this.addMatch(r.index,o)}}addMatch(n,r){this.matches===null?this.matches=[n,r]:this.matches.push(n,r)}};function CU(e,n){let r=e.localNames;if(r!==null){for(let o=0;o<r.length;o+=2)if(r[o]===n)return r[o+1]}return null}function IU(e,n){return e.type&11?FE(e,n):e.type&4?OM(e,n):null}function DU(e,n,r,o){return r===-1?IU(n,e):r===-2?kU(e,n,o):Ew(e,e[Uy],r,n)}function kU(e,n,r){if(r===L_)return FE(n,e);if(r===Jx)return OM(n,e);if(r===VE)return cL(n,e)}function hL(e,n,r,o){let s=n[Z_].queries[o];if(s.matches===null){let l=e.data,h=r.matches,p=[];for(let d=0;h!==null&&d<h.length;d+=2){let g=h[d];if(g<0)p.push(null);else{let y=l[g];p.push(DU(n,y,h[d+1],r.metadata.read))}}s.matches=p}return s.matches}function zD(e,n,r,o){let s=e.queries.getByIndex(r),l=s.matches;if(l!==null){let h=hL(e,n,s,r);for(let p=0;p<l.length;p+=2){let d=l[p];if(d>0)o.push(h[p/2]);else{let g=l[p+1],y=n[-d];for(let v=E0;v<y.length;v++){let _=y[v];_[yw]===_[x0]&&zD(_[Uy],_,g,o)}if(y[kE]!==null){let v=y[kE];for(let _=0;_<v.length;_++){let w=v[_];zD(w[Uy],w,g,o)}}}}}return o}function MU(e,n){return e[Z_].queries[n].queryList}function OU(e,n,r){let o=new SD((r&4)===4);return T6(e,n,o,o.destroy),(n[Z_]??=new FD).queries.push(new jD(o))-1}function NU(e,n,r){let o=a0();return o.firstCreatePass&&(RU(o,new BD(e,n,r),-1),(n&2)===2&&(o.staticViewQueries=!0)),OU(o,ev(),n)}function PU(e){return e.split(",").map(n=>n.trim())}function RU(e,n,r){e.queries===null&&(e.queries=new VD),e.queries.track(new UD(n,r))}function PM(e,n){return e.queries.getByIndex(n)}function LU(e,n){let r=e[Uy],o=PM(r,n);return o.crossesNgTemplate?zD(r,e,n,[]):hL(r,e,o,n)}function jU(e){return typeof e=="function"&&e[G_]!==void 0}function GS(e,n){R1("NgSignals");let r=QO(e),o=r[G_];return n?.equal&&(o.equal=n.equal),r.set=s=>SI(o,s),r.update=s=>tN(o,s),r.asReadonly=FU.bind(r),r}function FU(){let e=this[G_];if(e.readonlyFn===void 0){let n=()=>this();n[G_]=e,e.readonlyFn=n}return e.readonlyFn}function fL(e){return jU(e)&&typeof e.set=="function"}function BU(e){return Object.getPrototypeOf(e.prototype).constructor}function L1(e){let n=BU(e.type),r=!0,o=[e];for(;n;){let s;if(C1(e))s=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Oy(903,!1);s=n.\u0275dir}if(s){if(r){o.push(s);let h=e;h.inputs=eS(e.inputs),h.inputTransforms=eS(e.inputTransforms),h.declaredInputs=eS(e.declaredInputs),h.outputs=eS(e.outputs);let p=s.hostBindings;p&&$U(e,p);let d=s.viewQuery,g=s.contentQueries;if(d&&zU(e,d),g&&HU(e,g),VU(e,s),G5(e.outputs,s.outputs),C1(s)&&s.data.animation){let y=e.data;y.animation=(y.animation||[]).concat(s.data.animation)}}let l=s.features;if(l)for(let h=0;h<l.length;h++){let p=l[h];p&&p.ngInherit&&p(e),p===L1&&(r=!1)}}n=Object.getPrototypeOf(n)}UU(o)}function VU(e,n){for(let r in n.inputs){if(!n.inputs.hasOwnProperty(r)||e.inputs.hasOwnProperty(r))continue;let o=n.inputs[r];if(o!==void 0&&(e.inputs[r]=o,e.declaredInputs[r]=n.declaredInputs[r],n.inputTransforms!==null)){let s=Array.isArray(o)?o[0]:o;if(!n.inputTransforms.hasOwnProperty(s))continue;e.inputTransforms??={},e.inputTransforms[s]=n.inputTransforms[s]}}}function UU(e){let n=0,r=null;for(let o=e.length-1;o>=0;o--){let s=e[o];s.hostVars=n+=s.hostVars,s.hostAttrs=Gx(s.hostAttrs,r=Gx(r,s.hostAttrs))}}function eS(e){return e===SE?{}:e===X0?[]:e}function zU(e,n){let r=e.viewQuery;r?e.viewQuery=(o,s)=>{n(o,s),r(o,s)}:e.viewQuery=n}function HU(e,n){let r=e.contentQueries;r?e.contentQueries=(o,s,l)=>{n(o,s,l),r(o,s,l)}:e.contentQueries=n}function $U(e,n){let r=e.hostBindings;r?e.hostBindings=(o,s)=>{n(o,s),r(o,s)}:e.hostBindings=n}var k1=class{},nT=class{};var HD=class extends k1{constructor(n,r,o){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xS(this);let s=SP(n);this._bootstrapComponents=CR(s.bootstrap),this._r3Injector=mR(n,r,[{provide:k1,useValue:this},{provide:OE,useValue:this.componentFactoryResolver},...o],k0(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},$D=class extends nT{constructor(n){super(),this.moduleType=n}create(n){return new HD(this.moduleType,n,[])}};var TS=class extends k1{constructor(n){super(),this.componentFactoryResolver=new xS(this),this.instance=null;let r=new qx([...n.providers,{provide:k1,useValue:this},{provide:OE,useValue:this.componentFactoryResolver}],n.parent||sM(),n.debugName,new Set(["environment"]));this.injector=r,n.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function RM(e,n,r=null){return new TS({providers:e,parent:n,debugName:r,runEnvironmentInitializers:!0}).injector}function pL(e,n,r){return e[n]=r}function N_(e,n,r){let o=e[n];return Object.is(o,r)?!1:(e[n]=r,!0)}function dL(e,n,r,o){let s=N_(e,n,r);return N_(e,n+1,o)||s}function GU(e){return(e.flags&32)===32}function qU(e,n,r,o,s,l,h,p,d){let g=n.consts,y=US(n,e,4,h||null,p||null);$R(n,r,y,ME(g,d)),gM(n,y);let v=y.tView=CM(2,y,o,s,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,g,null);return n.queries!==null&&(n.queries.template(n,y),v.queries=n.queries.embeddedTView(y)),y}function GD(e,n,r,o,s,l,h,p,d,g){let y=r+O0,v=n.firstCreatePass?qU(y,n,e,o,s,l,h,p,d):n.data[y];oT(v,!1);let _=WU(n,e,v,r);pM()&&AM(n,e,_,v),xw(_,e);let w=WR(_,e,_,v);return e[y]=w,zS(e,w),AU(w,v,e),aM(v)&&UR(n,e,v),d!=null&&zR(e,v,g),v}function t_(e,n,r,o,s,l,h,p){let d=ev(),g=a0(),y=ME(g.consts,l);return GD(d,g,e,n,r,o,s,y,h,p),t_}var WU=YU;function YU(e,n,r,o){return dM(!0),n[Zv].createComment("")}function qS(e,n,r,o){let s=ev(),l=jE();if(N_(s,l,n)){let h=a0(),p=jS();B6(p,s,e,n,r,o)}return qS}function gL(e,n,r,o){return N_(e,jE(),r)?n+Hx(r)+o:v_}function ZU(e,n,r,o,s,l){let h=aV(),p=dL(e,h,r,s);return JP(2),p?n+Hx(r)+o+Hx(s)+l:v_}function nS(e,n){return e<<17|n<<2}function Aw(e){return e>>17&32767}function XU(e){return(e&2)==2}function KU(e,n){return e&131071|n<<17}function qD(e){return e|2}function PE(e){return(e&131068)>>2}function eD(e,n){return e&-131069|n<<2}function JU(e){return(e&1)===1}function WD(e){return e|1}function QU(e,n,r,o,s,l){let h=l?n.classBindings:n.styleBindings,p=Aw(h),d=PE(h);e[o]=r;let g=!1,y;if(Array.isArray(r)){let v=r;y=v[1],(y===null||iT(v,y)>0)&&(g=!0)}else y=r;if(s)if(d!==0){let _=Aw(e[p+1]);e[o+1]=nS(_,p),_!==0&&(e[_+1]=eD(e[_+1],o)),e[p+1]=KU(e[p+1],o)}else e[o+1]=nS(p,0),p!==0&&(e[p+1]=eD(e[p+1],o)),p=o;else e[o+1]=nS(d,0),p===0?p=o:e[d+1]=eD(e[d+1],o),d=o;g&&(e[o+1]=qD(e[o+1])),nP(e,y,o,!0),nP(e,y,o,!1),tz(n,y,e,o,l),h=nS(p,d),l?n.classBindings=h:n.styleBindings=h}function tz(e,n,r,o,s){let l=s?e.residualClasses:e.residualStyles;l!=null&&typeof n=="string"&&iT(l,n)>=0&&(r[o+1]=WD(r[o+1]))}function nP(e,n,r,o){let s=e[r+1],l=n===null,h=o?Aw(s):PE(s),p=!1;for(;h!==0&&(p===!1||l);){let d=e[h],g=e[h+1];ez(d,n)&&(p=!0,e[h+1]=o?WD(g):qD(g)),h=o?Aw(g):PE(g)}p&&(e[r+1]=o?qD(s):WD(s))}function ez(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?iT(e,n)>=0:!1}function j1(e,n,r){let o=ev(),s=jE();if(N_(o,s,n)){let l=a0(),h=jS();IM(l,h,o,e,n,o[Zv],r,!1)}return j1}function rP(e,n,r,o,s){let l=n.inputs,h=s?"class":"style";DM(e,r,l[h],h,o)}function LM(e,n){return nz(e,n,null,!0),LM}function nz(e,n,r,o){let s=ev(),l=a0(),h=JP(2);if(l.firstUpdatePass&&iz(l,e,h,o),n!==v_&&N_(s,h,n)){let p=l.data[O1()];uz(l,p,s,s[Zv],e,s[h+1]=cz(n,r),o,h)}}function rz(e,n){return n>=e.expandoStartIndex}function iz(e,n,r,o){let s=e.data;if(s[r+1]===null){let l=s[O1()],h=rz(e,r);hz(l,o)&&n===null&&!h&&(n=!1),n=oz(s,l,n,o),QU(s,l,n,r,h,o)}}function oz(e,n,r,o){let s=fV(e),l=o?n.residualClasses:n.residualStyles;if(s===null)(o?n.classBindings:n.styleBindings)===0&&(r=nD(null,e,n,r,o),r=rT(r,n.attrs,o),l=null);else{let h=n.directiveStylingLast;if(h===-1||e[h]!==s)if(r=nD(s,e,n,r,o),l===null){let d=sz(e,n,o);d!==void 0&&Array.isArray(d)&&(d=nD(null,e,n,d[1],o),d=rT(d,n.attrs,o),az(e,n,o,d))}else l=lz(e,n,o)}return l!==void 0&&(o?n.residualClasses=l:n.residualStyles=l),r}function sz(e,n,r){let o=r?n.classBindings:n.styleBindings;if(PE(o)!==0)return e[Aw(o)]}function az(e,n,r,o){let s=r?n.classBindings:n.styleBindings;e[Aw(s)]=o}function lz(e,n,r){let o,s=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<s;l++){let h=e[l].hostAttrs;o=rT(o,h,r)}return rT(o,n.attrs,r)}function nD(e,n,r,o,s){let l=null,h=r.directiveEnd,p=r.directiveStylingLast;for(p===-1?p=r.directiveStart:p++;p<h&&(l=n[p],o=rT(o,l.hostAttrs,s),l!==e);)p++;return e!==null&&(r.directiveStylingLast=p),o}function rT(e,n,r){let o=r?1:2,s=-1;if(n!==null)for(let l=0;l<n.length;l++){let h=n[l];typeof h=="number"?s=h:s===o&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),dB(e,h,r?!0:n[++l]))}return e===void 0?null:e}function uz(e,n,r,o,s,l,h,p){if(!(n.type&3))return;let d=e.data,g=d[p+1],y=JU(g)?iP(d,n,r,s,PE(g),h):void 0;if(!AS(y)){AS(l)||XU(g)&&(l=iP(d,null,r,s,p,h));let v=UP(O1(),r);m6(o,h,v,s,l)}}function iP(e,n,r,o,s,l){let h=n===null,p;for(;s>0;){let d=e[s],g=Array.isArray(d),y=g?d[1]:d,v=y===null,_=r[s+1];_===v_&&(_=v?X0:void 0);let w=v?qI(_,o):y===o?_:void 0;if(g&&!AS(w)&&(w=qI(d,o)),AS(w)&&(p=w,h))return p;let I=e[s+1];s=h?Aw(I):PE(I)}if(n!==null){let d=l?n.residualClasses:n.residualStyles;d!=null&&(p=qI(d,o))}return p}function AS(e){return e!==void 0}function cz(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=k0(EM(e)))),e}function hz(e,n){return(e.flags&(n?8:16))!==0}var YD=class{destroy(n){}updateValue(n,r){}swap(n,r){let o=Math.min(n,r),s=Math.max(n,r),l=this.detach(s);if(s-o>1){let h=this.detach(o);this.attach(o,l),this.attach(s,h)}else this.attach(o,l)}move(n,r){this.attach(r,this.detach(n))}};function rD(e,n,r,o,s){return e===r&&Object.is(n,o)?1:Object.is(s(e,n),s(r,o))?-1:0}function fz(e,n,r){let o,s,l=0,h=e.length-1,p=void 0;if(Array.isArray(n)){let d=n.length-1;for(;l<=h&&l<=d;){let g=e.at(l),y=n[l],v=rD(l,g,l,y,r);if(v!==0){v<0&&e.updateValue(l,y),l++;continue}let _=e.at(h),w=n[d],I=rD(h,_,d,w,r);if(I!==0){I<0&&e.updateValue(h,w),h--,d--;continue}let G=r(l,g),_t=r(h,_),_r=r(l,y);if(Object.is(_r,_t)){let _o=r(d,w);Object.is(_o,G)?(e.swap(l,h),e.updateValue(h,w),d--,h--):e.move(h,l),e.updateValue(l,y),l++;continue}if(o??=new SS,s??=sP(e,l,h,r),ZD(e,o,l,_r))e.updateValue(l,y),l++,h++;else if(s.has(_r))o.set(G,e.detach(l)),h--;else{let _o=e.create(l,n[l]);e.attach(l,_o),l++,h++}}for(;l<=d;)oP(e,o,r,l,n[l]),l++}else if(n!=null){let d=n[Symbol.iterator](),g=d.next();for(;!g.done&&l<=h;){let y=e.at(l),v=g.value,_=rD(l,y,l,v,r);if(_!==0)_<0&&e.updateValue(l,v),l++,g=d.next();else{o??=new SS,s??=sP(e,l,h,r);let w=r(l,v);if(ZD(e,o,l,w))e.updateValue(l,v),l++,h++,g=d.next();else if(!s.has(w))e.attach(l,e.create(l,v)),l++,h++,g=d.next();else{let I=r(l,y);o.set(I,e.detach(l)),h--}}}for(;!g.done;)oP(e,o,r,e.length,g.value),g=d.next()}for(;l<=h;)e.destroy(e.detach(h--));o?.forEach(d=>{e.destroy(d)})}function ZD(e,n,r,o){return n!==void 0&&n.has(o)?(e.attach(r,n.get(o)),n.delete(o),!0):!1}function oP(e,n,r,o,s){if(ZD(e,n,o,r(o,s)))e.updateValue(o,s);else{let l=e.create(o,s);e.attach(o,l)}}function sP(e,n,r,o){let s=new Set;for(let l=n;l<=r;l++)s.add(o(l,e.at(l)));return s}var SS=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let r=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(r)?(this.kvMap.set(n,this._vMap.get(r)),this._vMap.delete(r)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,r){if(this.kvMap.has(n)){let o=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let s=this._vMap;for(;s.has(o);)o=s.get(o);s.set(o,r)}else this.kvMap.set(n,r)}forEach(n){for(let[r,o]of this.kvMap)if(n(o,r),this._vMap!==void 0){let s=this._vMap;for(;s.has(o);)o=s.get(o),n(o,r)}}};function __(e,n){R1("NgControlFlow");let r=ev(),o=jE(),s=r[o]!==v_?r[o]:-1,l=s!==-1?CS(r,O0+s):void 0,h=0;if(N_(r,o,e)){let p=Jy(null);try{if(l!==void 0&&tL(l,h),e!==-1){let d=O0+e,g=CS(r,d),y=QD(r[Uy],d),v=Qx(g,y.tView.ssrId),_=HS(r,y,n,{dehydratedView:v});$S(g,_,h,Kx(y,v))}}finally{Jy(p)}}else if(l!==void 0){let p=QR(l,h);p!==void 0&&(p[w0]=n)}}var XD=class{constructor(n,r,o){this.lContainer=n,this.$implicit=r,this.$index=o}get $count(){return this.lContainer.length-E0}};function mL(e){return e}var KD=class{constructor(n,r,o){this.hasEmptyBlock=n,this.trackByFn=r,this.liveCollection=o}};function yL(e,n,r,o,s,l,h,p,d,g,y,v,_){R1("NgControlFlow");let w=ev(),I=a0(),G=d!==void 0,_t=ev(),_r=p?h.bind(_t[d_][w0]):h,_o=new KD(G,_r);_t[O0+e]=_o,GD(w,I,e+1,n,r,o,s,ME(I.consts,l)),G&&GD(w,I,e+2,d,g,y,v,ME(I.consts,_))}var JD=class extends YD{constructor(n,r,o){super(),this.lContainer=n,this.hostLView=r,this.templateTNode=o,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-E0}at(n){return this.getLView(n)[w0].$implicit}attach(n,r){let o=r[Wx];this.needsIndexUpdate||=n!==this.length,$S(this.lContainer,r,n,Kx(this.templateTNode,o))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,pz(this.lContainer,n)}create(n,r){let o=Qx(this.lContainer,this.templateTNode.tView.ssrId),s=HS(this.hostLView,this.templateTNode,new XD(this.lContainer,r,n),{dehydratedView:o});return this.operationsCounter?.recordCreate(),s}destroy(n){FS(n[Uy],n),this.operationsCounter?.recordDestroy()}updateValue(n,r){this.getLView(n)[w0].$implicit=r}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[w0].$index=n}getLView(n){return dz(this.lContainer,n)}};function vL(e){let n=Jy(null),r=O1();try{let o=ev(),s=o[Uy],l=o[r],h=r+1,p=CS(o,h);if(l.liveCollection===void 0){let g=QD(s,h);l.liveCollection=new JD(p,o,g)}else l.liveCollection.reset();let d=l.liveCollection;if(fz(d,e,l.trackByFn),d.updateIndexes(),l.hasEmptyBlock){let g=jE(),y=d.length===0;if(N_(o,g,y)){let v=r+2,_=CS(o,v);if(y){let w=QD(s,v),I=Qx(_,w.tView.ssrId),G=HS(o,w,void 0,{dehydratedView:I});$S(_,G,0,Kx(w,I))}else tL(_,0)}}}finally{Jy(n)}}function CS(e,n){return e[n]}function pz(e,n){return Xx(e,n)}function dz(e,n){return QR(e,n)}function QD(e,n){return lM(e,n)}function gz(e,n,r,o,s,l){let h=n.consts,p=ME(h,s),d=US(n,e,2,o,p);return $R(n,r,d,ME(h,l)),d.attrs!==null&&RD(d,d.attrs,!1),d.mergedAttrs!==null&&RD(d,d.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,d),d}function my(e,n,r,o){let s=ev(),l=a0(),h=O0+e,p=s[Zv],d=l.firstCreatePass?gz(h,l,s,n,r,o):l.data[h],g=mz(l,s,d,p,n,e);s[h]=g;let y=aM(d);return oT(d,!0),RR(p,g,d),!GU(d)&&pM()&&AM(l,s,g,d),QB()===0&&xw(g,s),tV(),y&&(UR(l,s,d),VR(l,d,s)),o!==null&&zR(s,d),my}function xy(){let e=N0();ZP()?sV():(e=e.parent,oT(e,!1));let n=e;rV(n)&&iV(),eV();let r=a0();return r.firstCreatePass&&(gM(r,e),RP(e)&&r.queries.elementEnd(e)),n.classesWithoutHost!=null&&bV(n)&&rP(r,n,ev(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&wV(n)&&rP(r,n,ev(),n.stylesWithoutHost,!1),xy}function xv(e,n,r,o){return my(e,n,r,o),xy(),xv}var mz=(e,n,r,o,s,l)=>(dM(!0),IR(o,s,mV()));function Q_(){return ev()}var fw=void 0;function yz(e){let n=e,r=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length;return r===1&&o===0?1:5}var vz=["en",[["a","p"],["AM","PM"],fw],[["AM","PM"],fw,fw],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fw,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fw,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fw,"{1} 'at' {0}",fw],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yz],iD={};function jM(e){let n=_z(e),r=aP(n);if(r)return r;let o=n.split("-")[0];if(r=aP(o),r)return r;if(o==="en")return vz;throw new Oy(701,!1)}function aP(e){return e in iD||(iD[e]=Vx.ng&&Vx.ng.common&&Vx.ng.common.locales&&Vx.ng.common.locales[e]),iD[e]}var UE=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(UE||{});function _z(e){return e.toLowerCase().replace(/_/g,"-")}var IS="en-US";var bz=IS;function wz(e){typeof e=="string"&&(bz=e.toLowerCase().replace(/_/g,"-"))}var Ez=(e,n,r)=>{};function Cv(e,n,r,o){let s=ev(),l=a0(),h=N0();return _L(l,s,s[Zv],h,e,n,o),Cv}function xz(e,n,r,o){let s=e.cleanup;if(s!=null)for(let l=0;l<s.length-1;l+=2){let h=s[l];if(h===r&&s[l+1]===o){let p=n[fS],d=s[l+2];return p.length>d?p[d]:null}typeof h=="string"&&(l+=2)}return null}function _L(e,n,r,o,s,l,h){let p=aM(o),g=e.firstCreatePass&&XR(e),y=n[w0],v=ZR(n),_=!0;if(o.type&3||h){let G=Q0(o,n),_t=h?h(G):G,_r=v.length,_o=h?_a=>h(O_(_a[o.index])):o.index,Ca=null;if(!h&&p&&(Ca=xz(e,n,s,o.index)),Ca!==null){let _a=Ca.__ngLastListenerFn__||Ca;_a.__ngNextListenerFn__=l,Ca.__ngLastListenerFn__=l,_=!1}else{l=uP(o,n,y,l),Ez(G,s,l);let _a=r.listen(_t,s,l);v.push(l,_a),g&&g.push(s,_o,_r,_r+1)}}else l=uP(o,n,y,l);let w=o.outputs,I;if(_&&w!==null&&(I=w[s])){let G=I.length;if(G)for(let _t=0;_t<G;_t+=2){let _r=I[_t],_o=I[_t+1],_l=n[_r][_o].subscribe(l),Qa=v.length;v.push(l,_l),g&&g.push(s,o.index,Qa,-(Qa+1))}}}function lP(e,n,r,o){let s=Jy(null);try{return D_(6,n,r),r(o)!==!1}catch(l){return KR(e,l),!1}finally{D_(7,n,r),Jy(s)}}function uP(e,n,r,o){return function s(l){if(l===Function)return o;let h=e.componentOffset>-1?M1(e.index,n):n;MM(h,5);let p=lP(n,r,o,l),d=s.__ngNextListenerFn__;for(;d;)p=lP(n,r,d,l)&&p,d=d.__ngNextListenerFn__;return p}}function Mv(e=1){return dV(e)}function F1(e,n,r){return bL(e,"",n,"",r),F1}function bL(e,n,r,o,s){let l=ev(),h=gL(l,n,r,o);if(h!==v_){let p=a0(),d=jS();IM(p,d,l,e,h,l[Zv],s,!1)}return bL}function wL(e,n,r){NU(e,n,r)}function FM(e){let n=ev(),r=a0(),o=QP();cM(o+1);let s=PM(r,o);if(e.dirty&&ZB(n)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let l=LU(n,o);e.reset(l,VV),e.notifyOnChanges()}return!0}return!1}function BM(){return MU(ev(),QP())}function Tz(e,n,r,o){r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),n[r]=o}function yv(e,n=""){let r=ev(),o=a0(),s=e+O0,l=o.firstCreatePass?US(o,s,1,n,null):o.data[s],h=Az(o,r,l,n,e);r[s]=h,pM()&&AM(o,r,h,l),oT(l,!1)}var Az=(e,n,r,o,s)=>(dM(!0),QV(n[Zv],o));function sT(e){return t1("",e,""),sT}function t1(e,n,r){let o=ev(),s=gL(o,e,n,r);return s!==v_&&JR(o,O1(),s),t1}function aT(e,n,r,o,s){let l=ev(),h=ZU(l,e,n,r,o,s);return h!==v_&&JR(l,O1(),h),aT}function j_(e,n,r){fL(n)&&(n=n());let o=ev(),s=jE();if(N_(o,s,n)){let l=a0(),h=jS();IM(l,h,o,e,n,o[Zv],r,!1)}return j_}function e1(e,n){let r=fL(e);return r&&e.set(n),r}function F_(e,n){let r=ev(),o=a0(),s=N0();return _L(o,r,r[Zv],s,e,n),F_}function Sz(e,n,r){let o=a0();if(o.firstCreatePass){let s=C1(e);_k(r,o.data,o.blueprint,s,!0),_k(n,o.data,o.blueprint,s,!1)}}function _k(e,n,r,o,s){if(e=A0(e),Array.isArray(e))for(let l=0;l<e.length;l++)_k(e[l],n,r,o,s);else{let l=a0(),h=ev(),p=N0(),d=IE(e)?e:A0(e.provide),g=OP(e),y=p.providerIndexes&1048575,v=p.directiveStart,_=p.providerIndexes>>20;if(IE(e)||!e.multi){let w=new ww(g,s,pv),I=sD(d,n,s?y:y+_,v);I===-1?(bD(vS(p,h),l,d),oD(l,e,n.length),n.push(d),p.directiveStart++,p.directiveEnd++,s&&(p.providerIndexes+=1048576),r.push(w),h.push(w)):(r[I]=w,h[I]=w)}else{let w=sD(d,n,y+_,v),I=sD(d,n,y,y+_),G=w>=0&&r[w],_t=I>=0&&r[I];if(s&&!_t||!s&&!G){bD(vS(p,h),l,d);let _r=Dz(s?Iz:Cz,r.length,s,o,g);!s&&_t&&(r[I].providerFactory=_r),oD(l,e,n.length,0),n.push(d),p.directiveStart++,p.directiveEnd++,s&&(p.providerIndexes+=1048576),r.push(_r),h.push(_r)}else{let _r=EL(r[s?I:w],g,!s&&o);oD(l,e,w>-1?w:I,_r)}!s&&o&&_t&&r[I].componentProviders++}}}function oD(e,n,r,o){let s=IE(n),l=LB(n);if(s||l){let d=(l?A0(n.useClass):n).prototype.ngOnDestroy;if(d){let g=e.destroyHooks||(e.destroyHooks=[]);if(!s&&n.multi){let y=g.indexOf(r);y===-1?g.push(r,[o,d]):g[y+1].push(o,d)}else g.push(r,d)}}}function EL(e,n,r){return r&&e.componentProviders++,e.multi.push(n)-1}function sD(e,n,r,o){for(let s=r;s<o;s++)if(n[s]===e)return s;return-1}function Cz(e,n,r,o){return tM(this.multi,[])}function Iz(e,n,r,o){let s=this.multi,l;if(this.providerFactory){let h=this.providerFactory.componentProviders,p=Ew(r,r[Uy],this.providerFactory.index,o);l=p.slice(0,h),tM(s,l);for(let d=h;d<p.length;d++)l.push(p[d])}else l=[],tM(s,l);return l}function tM(e,n){for(let r=0;r<e.length;r++){let o=e[r];n.push(o())}return n}function Dz(e,n,r,o,s){let l=new ww(e,r,pv);return l.multi=[],l.index=n,l.componentProviders=0,EL(l,s,o&&!r),l}function lT(e,n=[]){return r=>{r.providersResolver=(o,s)=>Sz(o,s?s(e):e,n)}}var kz=(()=>{let n=class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){let s=DP(!1,o.type),l=s.length>0?RM([s],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,l)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(let o of this.cachedInjectors.values())o!==null&&o.destroy()}finally{this.cachedInjectors.clear()}}};n.\u0275prov=Dy({token:n,providedIn:"environment",factory:()=>new n(By(M0))});let e=n;return e})();function l0(e){R1("NgStandalone"),e.getStandaloneInjector=n=>n.get(kz).getOrCreateStandaloneInjector(e)}function xL(e,n){let r=e[n];return r===v_?void 0:r}function Mz(e,n,r,o,s,l){let h=n+r;return N_(e,h,s)?pL(e,h+1,l?o.call(l,s):o(s)):xL(e,h+1)}function Oz(e,n,r,o,s,l,h){let p=n+r;return dL(e,p,s,l)?pL(e,p+2,h?o.call(h,s,l):o(s,l)):xL(e,p+2)}function B1(e,n){let r=a0(),o,s=e+O0;r.firstCreatePass?(o=Nz(n,r.pipeRegistry),r.data[s]=o,o.onDestroy&&(r.destroyHooks??=[]).push(s,o.onDestroy)):o=r.data[s];let l=o.factory||(o.factory=gw(o.type,!0)),h,p=D0(pv);try{let d=yS(!1),g=l();return yS(d),Tz(r,ev(),s,g),g}finally{D0(p)}}function Nz(e,n){if(n)for(let r=n.length-1;r>=0;r--){let o=n[r];if(e===o.name)return o}}function uT(e,n,r){let o=e+O0,s=ev(),l=zP(s,o);return TL(s,o)?Mz(s,KP(),n,l.transform,r,l):l.transform(r)}function VM(e,n,r,o){let s=e+O0,l=ev(),h=zP(l,s);return TL(l,s)?Oz(l,KP(),n,h.transform,r,o,h):h.transform(r,o)}function TL(e,n){return e[Uy].data[n].pure}var WS=(()=>{let n=class n{log(o){console.log(o)}warn(o){console.warn(o)}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"platform"});let e=n;return e})();var AL=new Sy("");function kw(e){return!!e&&typeof e.then=="function"}function SL(e){return!!e&&typeof e.subscribe=="function"}var CL=new Sy(""),IL=(()=>{let n=class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,s)=>{this.resolve=o,this.reject=s}),this.appInits=py(CL,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let o=[];for(let l of this.appInits){let h=l();if(kw(h))o.push(h);else if(SL(h)){let p=new Promise((d,g)=>{h.subscribe({complete:d,error:g})});o.push(p)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{s()}).catch(l=>{this.reject(l)}),o.length===0&&s(),this.initialized=!0}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),YS=new Sy("");function Pz(){JO(()=>{throw new Oy(600,!1)})}function Rz(e){return e.isBoundToModule}var Lz=10;function jz(e,n,r){try{let o=r();return kw(o)?o.catch(s=>{throw n.runOutsideAngular(()=>e.handleError(s)),s}):o}catch(o){throw n.runOutsideAngular(()=>e.handleError(o)),o}}var Mw=(()=>{let n=class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=py(FV),this.afterRenderEffectManager=py(lL),this.zonelessEnabled=py(NM),this.externalTestViews=new Set,this.beforeRender=new Yv,this.afterTick=new Yv,this.componentTypes=[],this.components=[],this.isStable=py(N1).hasPendingTasks.pipe($y(o=>!o)),this._injector=py(M0)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,s){let l=o instanceof ES;if(!this._injector.get(IL).done){let w=!l&&AP(o),I=!1;throw new Oy(405,I)}let p;l?p=o:p=this._injector.get(OE).resolveComponentFactory(o),this.componentTypes.push(p.componentType);let d=Rz(p)?void 0:this._injector.get(k1),g=s||p.selector,y=p.create(I1.NULL,[],g,d),v=y.location.nativeElement,_=y.injector.get(AL,null);return _?.registerApplication(v),y.onDestroy(()=>{this.detachView(y.hostView),aD(this.components,y),_?.unregisterApplication(v)}),this._loadComponent(y),y}tick(){this._tick(!0)}_tick(o){if(this._runningTick)throw new Oy(101,!1);let s=Jy(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(o)}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1,Jy(s),this.afterTick.next()}}detectChangesInAttachedViews(o){let s=null;this._injector.destroyed||(s=this._injector.get(NE,null,{optional:!0}));let l=0,h=this.afterRenderEffectManager;for(;l<Lz;){let p=l===0;if(o||!p){this.beforeRender.next(p);for(let{_lView:d,notifyErrorHandler:g}of this._views)Fz(d,g,p,this.zonelessEnabled)}else s?.begin?.(),s?.end?.();if(l++,h.executeInternalCallbacks(),!this.allViews.some(({_lView:d})=>Zx(d))&&(h.execute(),!this.allViews.some(({_lView:d})=>Zx(d))))break}}attachView(o){let s=o;this._views.push(s),s.attachToAppRef(this)}detachView(o){let s=o;aD(this._views,s),s.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);let s=this._injector.get(YS,[]);[...this._bootstrapListeners,...s].forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>aD(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Oy(406,!1);let o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function aD(e,n){let r=e.indexOf(n);r>-1&&e.splice(r,1)}function Fz(e,n,r,o){if(!r&&!Zx(e))return;rL(e,n,r&&!o?0:1)}var eM=class{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}},UM=(()=>{let n=class n{compileModuleSync(o){return new $D(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){let s=this.compileModuleSync(o),l=SP(o),h=CR(l.declarations).reduce((p,d)=>{let g=mw(d);return g&&p.push(new eT(g)),p},[]);return new eM(s,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var Bz=(()=>{let n=class n{constructor(){this.zone=py(Fv),this.changeDetectionScheduler=py(tT),this.applicationRef=py(Mw)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Vz=new Sy("",{factory:()=>!1});function DL({ngZoneFactory:e,ignoreChangesOutsideZone:n}){return e??=()=>new Fv(ML()),[{provide:Fv,useFactory:e},{provide:CE,multi:!0,useFactory:()=>{let r=py(Bz,{optional:!0});return()=>r.initialize()}},{provide:CE,multi:!0,useFactory:()=>{let r=py(Uz);return()=>{r.initialize()}}},n===!0?{provide:aL,useValue:!0}:[]]}function kL(e){let n=e?.ignoreChangesOutsideZone,r=DL({ngZoneFactory:()=>{let o=ML(e);return o.shouldCoalesceEventChangeDetection&&R1("NgZone_CoalesceEvent"),new Fv(o)},ignoreChangesOutsideZone:n});return RE([{provide:Vz,useValue:!0},{provide:NM,useValue:!1},r])}function ML(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Uz=(()=>{let n=class n{constructor(){this.subscription=new Lv,this.initialized=!1,this.zone=py(Fv),this.pendingTasks=py(N1)}initialize(){if(this.initialized)return;this.initialized=!0;let o=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(o=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fv.assertNotInAngularZone(),queueMicrotask(()=>{o!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(o),o=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fv.assertInAngularZone(),o??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var zz=(()=>{let n=class n{constructor(){this.appRef=py(Mw),this.taskService=py(N1),this.ngZone=py(Fv),this.zonelessEnabled=py(NM),this.disableScheduling=py(aL,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Lv,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof AD||!this.zoneIsDefined)}notify(o){if(!this.zonelessEnabled&&o===5)return;switch(o){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let s=this.useMicrotaskScheduler?GN:vR;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=s(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=s(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Fv.isInAngularZone())}tick(o){if(this.runningTick||this.appRef.destroyed)return;let s=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(o)},void 0,this.schedulerTickApplyArgs)}catch(l){throw this.taskService.remove(s),l}finally{this.cleanup()}this.useMicrotaskScheduler=!0,GN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(s)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let o=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(o)}}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function Hz(){return typeof $localize<"u"&&$localize.locale||IS}var ZS=new Sy("",{providedIn:"root",factory:()=>py(ZS,Wy.Optional|Wy.SkipSelf)||Hz()});var OL=new Sy("");var aS=null;function $z(e=[],n){return I1.create({name:n,providers:[{provide:NS,useValue:"platform"},{provide:OL,useValue:new Set([()=>aS=null])},...e]})}function Gz(e=[]){if(aS)return aS;let n=$z(e);return aS=n,Pz(),qz(n),n}function qz(e){e.get(_M,null)?.forEach(r=>r())}var Ow=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=Wz;let e=n;return e})();function Wz(e){return Yz(N0(),ev(),(e&16)===16)}function Yz(e,n,r){if(RS(e)&&!r){let o=M1(e.index,n);return new Tw(o,o)}else if(e.type&175){let o=n[d_];return new Tw(o,n)}return null}function NL(e){try{let{rootComponent:n,appProviders:r,platformProviders:o}=e,s=Gz(o),l=[DL({}),{provide:tT,useExisting:zz},...r||[]],p=new TS({providers:l,parent:s,debugName:"",runEnvironmentInitializers:!1}).injector,d=p.get(Fv);return d.run(()=>{p.resolveInjectorInitializers();let g=p.get(D1,null),y;d.runOutsideAngular(()=>{y=d.onError.subscribe({next:w=>{g.handleError(w)}})});let v=()=>p.destroy(),_=s.get(OL);return _.add(v),p.onDestroy(()=>{y.unsubscribe(),_.delete(v)}),jz(g,d,()=>{let w=p.get(IL);return w.runInitializers(),w.donePromise.then(()=>{let I=p.get(ZS,IS);wz(I||IS);let G=p.get(Mw);return n!==void 0&&G.bootstrap(n),G})})})}catch(n){return Promise.reject(n)}}var PL=new Sy("");function cT(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function XS(e,n){R1("NgSignals");let r=ZO(e);return n?.equal&&(r[G_].equal=n.equal),r}function V1(e){let n=Jy(null);try{return e()}finally{Jy(n)}}var FL=null;function r1(){return FL}function BL(e){FL??=e}var KS=class{};var S0=new Sy(""),VL=(()=>{let n=class n{historyGo(o){throw new Error("")}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>py(Jz),providedIn:"platform"});let e=n;return e})();var Jz=(()=>{let n=class n extends VL{constructor(){super(),this._doc=py(S0),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return r1().getBaseHref(this._doc)}onPopState(o){let s=r1().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",o,!1),()=>s.removeEventListener("popstate",o)}onHashChange(o){let s=r1().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",o,!1),()=>s.removeEventListener("hashchange",o)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(o){this._location.pathname=o}pushState(o,s,l){this._history.pushState(o,s,l)}replaceState(o,s,l){this._history.replaceState(o,s,l)}forward(){this._history.forward()}back(){this._history.back()}historyGo(o=0){this._history.go(o)}getState(){return this._history.state}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>new n,providedIn:"platform"});let e=n;return e})();function UL(e,n){if(e.length==0)return n;if(n.length==0)return e;let r=0;return e.endsWith("/")&&r++,n.startsWith("/")&&r++,r==2?e+n.substring(1):r==1?e+n:e+"/"+n}function RL(e){let n=e.match(/#|\?|$/),r=n&&n.index||e.length,o=r-(e[r-1]==="/"?1:0);return e.slice(0,o)+e.slice(r)}function Nw(e){return e&&e[0]!=="?"?"?"+e:e}var QS=(()=>{let n=class n{historyGo(o){throw new Error("")}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>py(zL),providedIn:"root"});let e=n;return e})(),Qz=new Sy(""),zL=(()=>{let n=class n extends QS{constructor(o,s){super(),this._platformLocation=o,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??py(S0).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}prepareExternalUrl(o){return UL(this._baseHref,o)}path(o=!1){let s=this._platformLocation.pathname+Nw(this._platformLocation.search),l=this._platformLocation.hash;return l&&o?`${s}${l}`:s}pushState(o,s,l,h){let p=this.prepareExternalUrl(l+Nw(h));this._platformLocation.pushState(o,s,p)}replaceState(o,s,l,h){let p=this.prepareExternalUrl(l+Nw(h));this._platformLocation.replaceState(o,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(o=0){this._platformLocation.historyGo?.(o)}};n.\u0275fac=function(s){return new(s||n)(By(VL),By(Qz,8))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var pT=(()=>{let n=class n{constructor(o){this._subject=new uv,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=o;let s=this._locationStrategy.getBaseHref();this._basePath=n8(RL(LL(s))),this._locationStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(o=!1){return this.normalize(this._locationStrategy.path(o))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(o,s=""){return this.path()==this.normalize(o+Nw(s))}normalize(o){return n.stripTrailingSlash(e8(this._basePath,LL(o)))}prepareExternalUrl(o){return o&&o[0]!=="/"&&(o="/"+o),this._locationStrategy.prepareExternalUrl(o)}go(o,s="",l=null){this._locationStrategy.pushState(l,"",o,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+Nw(s)),l)}replaceState(o,s="",l=null){this._locationStrategy.replaceState(l,"",o,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+Nw(s)),l)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(o=0){this._locationStrategy.historyGo?.(o)}onUrlChange(o){return this._urlChangeListeners.push(o),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(o);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(o="",s){this._urlChangeListeners.forEach(l=>l(o,s))}subscribe(o,s,l){return this._subject.subscribe({next:o,error:s,complete:l})}};n.normalizeQueryParams=Nw,n.joinWithSlash=UL,n.stripTrailingSlash=RL,n.\u0275fac=function(s){return new(s||n)(By(QS))},n.\u0275prov=Dy({token:n,factory:()=>t8(),providedIn:"root"});let e=n;return e})();function t8(){return new pT(By(QS))}function e8(e,n){if(!e||!n.startsWith(e))return n;let r=n.substring(e.length);return r===""||["/",";","?","#"].includes(r[0])?r:n}function LL(e){return e.replace(/\/index.html$/,"")}function n8(e){if(new RegExp("^(https?:)?//").test(e)){let[,r]=e.split(/\/\/[^\/]+/);return r}return e}var HL=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(HL||{});var n1={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function hT(e,n){let r=jM(e),o=r[UE.NumberSymbols][n];if(typeof o>"u"){if(n===n1.CurrencyDecimal)return r[UE.NumberSymbols][n1.Decimal];if(n===n1.CurrencyGroup)return r[UE.NumberSymbols][n1.Group]}return o}function r8(e,n){return jM(e)[UE.NumberFormats][n]}var i8=/^(\d+)?\.((\d+)(-(\d+))?)?$/,jL=22,JS=".",fT="0",o8=";",s8=",",HM="#";function a8(e,n,r,o,s,l,h=!1){let p="",d=!1;if(!isFinite(e))p=hT(r,n1.Infinity);else{let g=h8(e);h&&(g=c8(g));let y=n.minInt,v=n.minFrac,_=n.maxFrac;if(l){let _o=l.match(i8);if(_o===null)throw new Error(`${l} is not a valid digit info`);let Ca=_o[1],_a=_o[3],_l=_o[5];Ca!=null&&(y=$M(Ca)),_a!=null&&(v=$M(_a)),_l!=null?_=$M(_l):_a!=null&&v>_&&(_=v)}f8(g,v,_);let w=g.digits,I=g.integerLen,G=g.exponent,_t=[];for(d=w.every(_o=>!_o);I<y;I++)w.unshift(0);for(;I<0;I++)w.unshift(0);I>0?_t=w.splice(I,w.length):(_t=w,w=[0]);let _r=[];for(w.length>=n.lgSize&&_r.unshift(w.splice(-n.lgSize,w.length).join(""));w.length>n.gSize;)_r.unshift(w.splice(-n.gSize,w.length).join(""));w.length&&_r.unshift(w.join("")),p=_r.join(hT(r,o)),_t.length&&(p+=hT(r,s)+_t.join("")),G&&(p+=hT(r,n1.Exponential)+"+"+G)}return e<0&&!d?p=n.negPre+p+n.negSuf:p=n.posPre+p+n.posSuf,p}function l8(e,n,r){let o=r8(n,HL.Decimal),s=u8(o,hT(n,n1.MinusSign));return a8(e,s,n,n1.Group,n1.Decimal,r)}function u8(e,n="-"){let r={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},o=e.split(o8),s=o[0],l=o[1],h=s.indexOf(JS)!==-1?s.split(JS):[s.substring(0,s.lastIndexOf(fT)+1),s.substring(s.lastIndexOf(fT)+1)],p=h[0],d=h[1]||"";r.posPre=p.substring(0,p.indexOf(HM));for(let y=0;y<d.length;y++){let v=d.charAt(y);v===fT?r.minFrac=r.maxFrac=y+1:v===HM?r.maxFrac=y+1:r.posSuf+=v}let g=p.split(s8);if(r.gSize=g[1]?g[1].length:0,r.lgSize=g[2]||g[1]?(g[2]||g[1]).length:0,l){let y=s.length-r.posPre.length-r.posSuf.length,v=l.indexOf(HM);r.negPre=l.substring(0,v).replace(/'/g,""),r.negSuf=l.slice(v+y).replace(/'/g,"")}else r.negPre=n+r.posPre,r.negSuf=r.posSuf;return r}function c8(e){if(e.digits[0]===0)return e;let n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(n===0?e.digits.push(0,0):n===1&&e.digits.push(0),e.integerLen+=2),e}function h8(e){let n=Math.abs(e)+"",r=0,o,s,l,h,p;for((s=n.indexOf(JS))>-1&&(n=n.replace(JS,"")),(l=n.search(/e/i))>0?(s<0&&(s=l),s+=+n.slice(l+1),n=n.substring(0,l)):s<0&&(s=n.length),l=0;n.charAt(l)===fT;l++);if(l===(p=n.length))o=[0],s=1;else{for(p--;n.charAt(p)===fT;)p--;for(s-=l,o=[],h=0;l<=p;l++,h++)o[h]=Number(n.charAt(l))}return s>jL&&(o=o.splice(0,jL-1),r=s-1,s=1),{digits:o,exponent:r,integerLen:s}}function f8(e,n,r){if(n>r)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${r}).`);let o=e.digits,s=o.length-e.integerLen,l=Math.min(Math.max(n,s),r),h=l+e.integerLen,p=o[h];if(h>0){o.splice(Math.max(e.integerLen,h));for(let v=h;v<o.length;v++)o[v]=0}else{s=Math.max(0,s),e.integerLen=1,o.length=Math.max(1,h=l+1),o[0]=0;for(let v=1;v<h;v++)o[v]=0}if(p>=5)if(h-1<0){for(let v=0;v>h;v--)o.unshift(0),e.integerLen++;o.unshift(1),e.integerLen++}else o[h-1]++;for(;s<Math.max(0,l);s++)o.push(0);let d=l!==0,g=n+e.integerLen,y=o.reduceRight(function(v,_,w,I){return _=_+v,I[w]=_<10?_:_-10,d&&(I[w]===0&&w>=g?I.pop():d=!1),_>=10?1:0},0);y&&(o.unshift(y),e.integerLen++)}function $M(e){let n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}function tC(e,n){n=encodeURIComponent(n);for(let r of e.split(";")){let o=r.indexOf("="),[s,l]=o==-1?[r,""]:[r.slice(0,o),r.slice(o+1)];if(s.trim()===n)return decodeURIComponent(l)}return null}function p8(e,n){return new Oy(2100,!1)}var eC=(()=>{let n=class n{constructor(o){this._locale=o}transform(o,s,l){if(!d8(o))return null;l||=this._locale;try{let h=g8(o);return l8(h,l,s)}catch(h){throw p8(n,h.message)}}};n.\u0275fac=function(s){return new(s||n)(pv(ZS,16))},n.\u0275pipe=EP({name:"number",type:n,pure:!0,standalone:!0});let e=n;return e})();function d8(e){return!(e==null||e===""||e!==e)}function g8(e){if(typeof e=="string"&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if(typeof e!="number")throw new Error(`${e} is not a number`);return e}var $L="browser",m8="server";function nC(e){return e===m8}var zE=class{};var gT=class{},iC=class{},i1=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(r=>{let o=r.indexOf(":");if(o>0){let s=r.slice(0,o),l=s.toLowerCase(),h=r.slice(o+1).trim();this.maybeSetNormalizedName(s,l),this.headers.has(l)?this.headers.get(l).push(h):this.headers.set(l,[h])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((r,o)=>{this.setHeaderEntries(o,r)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([r,o])=>{this.setHeaderEntries(r,o)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let r=this.headers.get(n.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,r){return this.clone({name:n,value:r,op:"a"})}set(n,r){return this.clone({name:n,value:r,op:"s"})}delete(n,r){return this.clone({name:n,value:r,op:"d"})}maybeSetNormalizedName(n,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(r=>{this.headers.set(r,n.headers.get(r)),this.normalizedNames.set(r,n.normalizedNames.get(r))})}clone(n){let r=new e;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([n]),r}applyUpdate(n){let r=n.name.toLowerCase();switch(n.op){case"a":case"s":let o=n.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(n.name,r);let s=(n.op==="a"?this.headers.get(r):void 0)||[];s.push(...o),this.headers.set(r,s);break;case"d":let l=n.value;if(!l)this.headers.delete(r),this.normalizedNames.delete(r);else{let h=this.headers.get(r);if(!h)return;h=h.filter(p=>l.indexOf(p)===-1),h.length===0?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,h)}break}}setHeaderEntries(n,r){let o=(Array.isArray(r)?r:[r]).map(l=>l.toString()),s=n.toLowerCase();this.headers.set(s,o),this.maybeSetNormalizedName(n,s)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>n(this.normalizedNames.get(r),this.headers.get(r)))}};var WM=class{encodeKey(n){return GL(n)}encodeValue(n){return GL(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function _8(e,n){let r=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(s=>{let l=s.indexOf("="),[h,p]=l==-1?[n.decodeKey(s),""]:[n.decodeKey(s.slice(0,l)),n.decodeValue(s.slice(l+1))],d=r.get(h)||[];d.push(p),r.set(h,d)}),r}var b8=/%(\d[a-f0-9])/gi,w8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GL(e){return encodeURIComponent(e).replace(b8,(n,r)=>w8[r]??n)}function rC(e){return`${e}`}var z1=class e{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new WM,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_8(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(r=>{let o=n.fromObject[r],s=Array.isArray(o)?o.map(rC):[rC(o)];this.map.set(r,s)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let r=this.map.get(n);return r?r[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,r){return this.clone({param:n,value:r,op:"a"})}appendAll(n){let r=[];return Object.keys(n).forEach(o=>{let s=n[o];Array.isArray(s)?s.forEach(l=>{r.push({param:o,value:l,op:"a"})}):r.push({param:o,value:s,op:"a"})}),this.clone(r)}set(n,r){return this.clone({param:n,value:r,op:"s"})}delete(n,r){return this.clone({param:n,value:r,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let r=this.encoder.encodeKey(n);return this.map.get(n).map(o=>r+"="+this.encoder.encodeValue(o)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let r=new e({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(n),r}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let r=(n.op==="a"?this.map.get(n.param):void 0)||[];r.push(rC(n.value)),this.map.set(n.param,r);break;case"d":if(n.value!==void 0){let o=this.map.get(n.param)||[],s=o.indexOf(rC(n.value));s!==-1&&o.splice(s,1),o.length>0?this.map.set(n.param,o):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var YM=class{constructor(){this.map=new Map}set(n,r){return this.map.set(n,r),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function E8(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function qL(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function WL(e){return typeof Blob<"u"&&e instanceof Blob}function YL(e){return typeof FormData<"u"&&e instanceof FormData}function x8(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var dT=class e{constructor(n,r,o,s){this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase();let l;if(E8(this.method)||s?(this.body=o!==void 0?o:null,l=s):l=o,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params),this.transferCache=l.transferCache),this.headers??=new i1,this.context??=new YM,!this.params)this.params=new z1,this.urlWithParams=r;else{let h=this.params.toString();if(h.length===0)this.urlWithParams=r;else{let p=r.indexOf("?"),d=p===-1?"?":p<r.length-1?"&":"";this.urlWithParams=r+d+h}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||qL(this.body)||WL(this.body)||YL(this.body)||x8(this.body)?this.body:this.body instanceof z1?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||YL(this.body)?null:WL(this.body)?this.body.type||null:qL(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof z1?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let r=n.method||this.method,o=n.url||this.url,s=n.responseType||this.responseType,l=n.transferCache??this.transferCache,h=n.body!==void 0?n.body:this.body,p=n.withCredentials??this.withCredentials,d=n.reportProgress??this.reportProgress,g=n.headers||this.headers,y=n.params||this.params,v=n.context??this.context;return n.setHeaders!==void 0&&(g=Object.keys(n.setHeaders).reduce((_,w)=>_.set(w,n.setHeaders[w]),g)),n.setParams&&(y=Object.keys(n.setParams).reduce((_,w)=>_.set(w,n.setParams[w]),y)),new e(r,o,h,{params:y,headers:g,context:v,reportProgress:d,responseType:s,withCredentials:p,transferCache:l})}},H1=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(H1||{}),mT=class{constructor(n,r=200,o="OK"){this.headers=n.headers||new i1,this.status=n.status!==void 0?n.status:r,this.statusText=n.statusText||o,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},oC=class e extends mT{constructor(n={}){super(n),this.type=H1.ResponseHeader}clone(n={}){return new e({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},yT=class e extends mT{constructor(n={}){super(n),this.type=H1.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},U1=class extends mT{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},JL=200,T8=204;function qM(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var vT=(()=>{let n=class n{constructor(o){this.handler=o}request(o,s,l={}){let h;if(o instanceof dT)h=o;else{let g;l.headers instanceof i1?g=l.headers:g=new i1(l.headers);let y;l.params&&(l.params instanceof z1?y=l.params:y=new z1({fromObject:l.params})),h=new dT(o,s,l.body!==void 0?l.body:null,{headers:g,context:l.context,params:y,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials,transferCache:l.transferCache})}let p=Vy(h).pipe(w1(g=>this.handler.handle(g)));if(o instanceof dT||l.observe==="events")return p;let d=p.pipe(z0(g=>g instanceof yT));switch(l.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return d.pipe($y(g=>{if(g.body!==null&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return d.pipe($y(g=>{if(g.body!==null&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return d.pipe($y(g=>{if(g.body!==null&&typeof g.body!="string")throw new Error("Response is not a string.");return g.body}));case"json":default:return d.pipe($y(g=>g.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(o,s={}){return this.request("DELETE",o,s)}get(o,s={}){return this.request("GET",o,s)}head(o,s={}){return this.request("HEAD",o,s)}jsonp(o,s){return this.request("JSONP",o,{params:new z1().append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,s={}){return this.request("OPTIONS",o,s)}patch(o,s,l={}){return this.request("PATCH",o,qM(l,s))}post(o,s,l={}){return this.request("POST",o,qM(l,s))}put(o,s,l={}){return this.request("PUT",o,qM(l,s))}};n.\u0275fac=function(s){return new(s||n)(By(gT))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),A8=/^\)\]\}',?\n/,S8="X-Request-URL";function ZL(e){if(e.url)return e.url;let n=S8.toLocaleLowerCase();return e.headers.get(n)}var C8=(()=>{let n=class n{constructor(){this.fetchImpl=py(ZM,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=py(Fv)}handle(o){return new nv(s=>{let l=new AbortController;return this.doRequest(o,l.signal,s).then(XM,h=>s.error(new U1({error:h}))),()=>l.abort()})}doRequest(o,s,l){return wA(this,null,function*(){let h=this.createRequestInit(o),p;try{let I=this.ngZone.runOutsideAngular(()=>this.fetchImpl(o.urlWithParams,gy({signal:s},h)));I8(I),l.next({type:H1.Sent}),p=yield I}catch(I){l.error(new U1({error:I,status:I.status??0,statusText:I.statusText,url:o.urlWithParams,headers:I.headers}));return}let d=new i1(p.headers),g=p.statusText,y=ZL(p)??o.urlWithParams,v=p.status,_=null;if(o.reportProgress&&l.next(new oC({headers:d,status:v,statusText:g,url:y})),p.body){let I=p.headers.get("content-length"),G=[],_t=p.body.getReader(),_r=0,_o,Ca,_a=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>wA(this,null,function*(){for(;;){let{done:Qa,value:Kc}=yield _t.read();if(Qa)break;if(G.push(Kc),_r+=Kc.length,o.reportProgress){Ca=o.responseType==="text"?(Ca??"")+(_o??=new TextDecoder).decode(Kc,{stream:!0}):void 0;let jc=()=>l.next({type:H1.DownloadProgress,total:I?+I:void 0,loaded:_r,partialText:Ca});_a?_a.run(jc):jc()}}}));let _l=this.concatChunks(G,_r);try{let Qa=p.headers.get("Content-Type")??"";_=this.parseBody(o,_l,Qa)}catch(Qa){l.error(new U1({error:Qa,headers:new i1(p.headers),status:p.status,statusText:p.statusText,url:ZL(p)??o.urlWithParams}));return}}v===0&&(v=_?JL:0),v>=200&&v<300?(l.next(new yT({body:_,headers:d,status:v,statusText:g,url:y})),l.complete()):l.error(new U1({error:_,headers:d,status:v,statusText:g,url:y}))})}parseBody(o,s,l){switch(o.responseType){case"json":let h=new TextDecoder().decode(s).replace(A8,"");return h===""?null:JSON.parse(h);case"text":return new TextDecoder().decode(s);case"blob":return new Blob([s],{type:l});case"arraybuffer":return s.buffer}}createRequestInit(o){let s={},l=o.withCredentials?"include":void 0;if(o.headers.forEach((h,p)=>s[h]=p.join(",")),o.headers.has("Accept")||(s.Accept="application/json, text/plain, */*"),!o.headers.has("Content-Type")){let h=o.detectContentTypeHeader();h!==null&&(s["Content-Type"]=h)}return{body:o.serializeBody(),method:o.method,headers:s,credentials:l}}concatChunks(o,s){let l=new Uint8Array(s),h=0;for(let p of o)l.set(p,h),h+=p.length;return l}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),ZM=class{};function XM(){}function I8(e){e.then(XM,XM)}function D8(e,n){return n(e)}function k8(e,n,r){return(o,s)=>g_(r,()=>n(o,l=>e(l,s)))}var QL=new Sy(""),M8=new Sy(""),O8=new Sy("",{providedIn:"root",factory:()=>!0});var XL=(()=>{let n=class n extends gT{constructor(o,s){super(),this.backend=o,this.injector=s,this.chain=null,this.pendingTasks=py(N1),this.contributeToStability=py(O8)}handle(o){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(QL),...this.injector.get(M8,[])]));this.chain=s.reduceRight((l,h)=>k8(l,h,this.injector),D8)}if(this.contributeToStability){let s=this.pendingTasks.add();return this.chain(o,l=>this.backend.handle(l)).pipe(hw(()=>this.pendingTasks.remove(s)))}else return this.chain(o,s=>this.backend.handle(s))}};n.\u0275fac=function(s){return new(s||n)(By(iC),By(M0))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})();var N8=/^\)\]\}',?\n/;function P8(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var KL=(()=>{let n=class n{constructor(o){this.xhrFactory=o}handle(o){if(o.method==="JSONP")throw new Oy(-2800,!1);let s=this.xhrFactory;return(s.\u0275loadImpl?kv(s.\u0275loadImpl()):Vy(null)).pipe(H0(()=>new nv(h=>{let p=s.build();if(p.open(o.method,o.urlWithParams),o.withCredentials&&(p.withCredentials=!0),o.headers.forEach((_t,_r)=>p.setRequestHeader(_t,_r.join(","))),o.headers.has("Accept")||p.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){let _t=o.detectContentTypeHeader();_t!==null&&p.setRequestHeader("Content-Type",_t)}if(o.responseType){let _t=o.responseType.toLowerCase();p.responseType=_t!=="json"?_t:"text"}let d=o.serializeBody(),g=null,y=()=>{if(g!==null)return g;let _t=p.statusText||"OK",_r=new i1(p.getAllResponseHeaders()),_o=P8(p)||o.url;return g=new oC({headers:_r,status:p.status,statusText:_t,url:_o}),g},v=()=>{let{headers:_t,status:_r,statusText:_o,url:Ca}=y(),_a=null;_r!==T8&&(_a=typeof p.response>"u"?p.responseText:p.response),_r===0&&(_r=_a?JL:0);let _l=_r>=200&&_r<300;if(o.responseType==="json"&&typeof _a=="string"){let Qa=_a;_a=_a.replace(N8,"");try{_a=_a!==""?JSON.parse(_a):null}catch(Kc){_a=Qa,_l&&(_l=!1,_a={error:Kc,text:_a})}}_l?(h.next(new yT({body:_a,headers:_t,status:_r,statusText:_o,url:Ca||void 0})),h.complete()):h.error(new U1({error:_a,headers:_t,status:_r,statusText:_o,url:Ca||void 0}))},_=_t=>{let{url:_r}=y(),_o=new U1({error:_t,status:p.status||0,statusText:p.statusText||"Unknown Error",url:_r||void 0});h.error(_o)},w=!1,I=_t=>{w||(h.next(y()),w=!0);let _r={type:H1.DownloadProgress,loaded:_t.loaded};_t.lengthComputable&&(_r.total=_t.total),o.responseType==="text"&&p.responseText&&(_r.partialText=p.responseText),h.next(_r)},G=_t=>{let _r={type:H1.UploadProgress,loaded:_t.loaded};_t.lengthComputable&&(_r.total=_t.total),h.next(_r)};return p.addEventListener("load",v),p.addEventListener("error",_),p.addEventListener("timeout",_),p.addEventListener("abort",_),o.reportProgress&&(p.addEventListener("progress",I),d!==null&&p.upload&&p.upload.addEventListener("progress",G)),p.send(d),h.next({type:H1.Sent}),()=>{p.removeEventListener("error",_),p.removeEventListener("abort",_),p.removeEventListener("load",v),p.removeEventListener("timeout",_),o.reportProgress&&(p.removeEventListener("progress",I),d!==null&&p.upload&&p.upload.removeEventListener("progress",G)),p.readyState!==p.DONE&&p.abort()}})))}};n.\u0275fac=function(s){return new(s||n)(By(zE))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),t3=new Sy(""),R8="XSRF-TOKEN",L8=new Sy("",{providedIn:"root",factory:()=>R8}),j8="X-XSRF-TOKEN",F8=new Sy("",{providedIn:"root",factory:()=>j8}),sC=class{},B8=(()=>{let n=class n{constructor(o,s,l){this.doc=o,this.platform=s,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=tC(o,this.cookieName),this.lastCookieString=o),this.lastToken}};n.\u0275fac=function(s){return new(s||n)(By(S0),By(P1),By(L8))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})();function V8(e,n){let r=e.url.toLowerCase();if(!py(t3)||e.method==="GET"||e.method==="HEAD"||r.startsWith("http://")||r.startsWith("https://"))return n(e);let o=py(sC).getToken(),s=py(F8);return o!=null&&!e.headers.has(s)&&(e=e.clone({headers:e.headers.set(s,o)})),n(e)}function e3(...e){let n=[vT,KL,XL,{provide:gT,useExisting:XL},{provide:iC,useFactory:()=>py(C8,{optional:!0})??py(KL)},{provide:QL,useValue:V8,multi:!0},{provide:t3,useValue:!0},{provide:sC,useClass:B8}];for(let r of e)n.push(...r.\u0275providers);return RE(n)}var QM=class extends KS{constructor(){super(...arguments),this.supportsDOMEvents=!0}},t2=class e extends QM{static makeCurrent(){BL(new e)}onAndCancel(n,r,o){return n.addEventListener(r,o),()=>{n.removeEventListener(r,o)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.remove()}createElement(n,r){return r=r||this.getDefaultDocument(),r.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return r==="window"?window:r==="document"?n:r==="body"?n.body:null}getBaseHref(n){let r=z8();return r==null?null:H8(r)}resetBaseElement(){_T=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return tC(document.cookie,n)}},_T=null;function z8(){return _T=_T||document.querySelector("base"),_T?_T.getAttribute("href"):null}function H8(e){return new URL(e,document.baseURI).pathname}var $8=(()=>{let n=class n{build(){return new XMLHttpRequest}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),aC=new Sy(""),s3=(()=>{let n=class n{constructor(o,s){this._zone=s,this._eventNameToPlugin=new Map,o.forEach(l=>{l.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,s,l){return this._findPluginFor(s).addEventListener(o,s,l)}getZone(){return this._zone}_findPluginFor(o){let s=this._eventNameToPlugin.get(o);if(s)return s;if(s=this._plugins.find(h=>h.supports(o)),!s)throw new Oy(5101,!1);return this._eventNameToPlugin.set(o,s),s}};n.\u0275fac=function(s){return new(s||n)(By(aC),By(Fv))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),bT=class{constructor(n){this._doc=n}},KM="ng-app-id",a3=(()=>{let n=class n{constructor(o,s,l,h={}){this.doc=o,this.appId=s,this.nonce=l,this.platformId=h,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nC(h),this.resetHostNodes()}addStyles(o){for(let s of o)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(o){for(let s of o)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(s=>s.remove()),o.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let s of this.getAllStyles())this.addStyleToHost(o,s)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let s of this.hostNodes)this.addStyleToHost(s,o)}onStyleRemoved(o){let s=this.styleRef;s.get(o)?.elements?.forEach(l=>l.remove()),s.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${KM}="${this.appId}"]`);if(o?.length){let s=new Map;return o.forEach(l=>{l.textContent!=null&&s.set(l.textContent,l)}),s}return null}changeUsageCount(o,s){let l=this.styleRef;if(l.has(o)){let h=l.get(o);return h.usage+=s,h.usage}return l.set(o,{usage:s,elements:[]}),s}getStyleElement(o,s){let l=this.styleNodesInDOM,h=l?.get(s);if(h?.parentNode===o)return l.delete(s),h.removeAttribute(KM),h;{let p=this.doc.createElement("style");return this.nonce&&p.setAttribute("nonce",this.nonce),p.textContent=s,this.platformIsServer&&p.setAttribute(KM,this.appId),o.appendChild(p),p}}addStyleToHost(o,s){let l=this.getStyleElement(o,s),h=this.styleRef,p=h.get(s)?.elements;p?p.push(l):h.set(s,{elements:[l],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};n.\u0275fac=function(s){return new(s||n)(By(S0),By(vM),By(bM,8),By(P1))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),JM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},n2=/%COMP%/g,l3="%COMP%",G8=`_nghost-${l3}`,q8=`_ngcontent-${l3}`,W8=!0,Y8=new Sy("",{providedIn:"root",factory:()=>W8});function Z8(e){return q8.replace(n2,e)}function X8(e){return G8.replace(n2,e)}function u3(e,n){return n.map(r=>r.replace(n2,e))}var r3=(()=>{let n=class n{constructor(o,s,l,h,p,d,g,y=null){this.eventManager=o,this.sharedStylesHost=s,this.appId=l,this.removeStylesOnCompDestroy=h,this.doc=p,this.platformId=d,this.ngZone=g,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=nC(d),this.defaultRenderer=new wT(o,p,g,this.platformIsServer)}createRenderer(o,s){if(!o||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===M_.ShadowDom&&(s=ov(gy({},s),{encapsulation:M_.Emulated}));let l=this.getOrCreateRenderer(o,s);return l instanceof lC?l.applyToHost(o):l instanceof ET&&l.applyStyles(),l}getOrCreateRenderer(o,s){let l=this.rendererByCompId,h=l.get(s.id);if(!h){let p=this.doc,d=this.ngZone,g=this.eventManager,y=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(s.encapsulation){case M_.Emulated:h=new lC(g,y,s,this.appId,v,p,d,_);break;case M_.ShadowDom:return new e2(g,y,o,s,p,d,this.nonce,_);default:h=new ET(g,y,s,v,p,d,_);break}l.set(s.id,h)}return h}ngOnDestroy(){this.rendererByCompId.clear()}};n.\u0275fac=function(s){return new(s||n)(By(s3),By(a3),By(vM),By(Y8),By(S0),By(P1),By(Fv),By(bM))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),wT=class{constructor(n,r,o,s){this.eventManager=n,this.doc=r,this.ngZone=o,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,r){return r?this.doc.createElementNS(JM[r]||r,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,r){(i3(n)?n.content:n).appendChild(r)}insertBefore(n,r,o){n&&(i3(n)?n.content:n).insertBefore(r,o)}removeChild(n,r){r.remove()}selectRootElement(n,r){let o=typeof n=="string"?this.doc.querySelector(n):n;if(!o)throw new Oy(-5104,!1);return r||(o.textContent=""),o}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,o,s){if(s){r=s+":"+r;let l=JM[s];l?n.setAttributeNS(l,r,o):n.setAttribute(r,o)}else n.setAttribute(r,o)}removeAttribute(n,r,o){if(o){let s=JM[o];s?n.removeAttributeNS(s,r):n.removeAttribute(`${o}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,o,s){s&(X_.DashCase|X_.Important)?n.style.setProperty(r,o,s&X_.Important?"important":""):n.style[r]=o}removeStyle(n,r,o){o&X_.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,o){n!=null&&(n[r]=o)}setValue(n,r){n.nodeValue=r}listen(n,r,o){if(typeof n=="string"&&(n=r1().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${r}`);return this.eventManager.addEventListener(n,r,this.decoratePreventDefault(o))}decoratePreventDefault(n){return r=>{if(r==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(r)):n(r))===!1&&r.preventDefault()}}};function i3(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var e2=class extends wT{constructor(n,r,o,s,l,h,p,d){super(n,l,h,d),this.sharedStylesHost=r,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=u3(s.id,s.styles);for(let y of g){let v=document.createElement("style");p&&v.setAttribute("nonce",p),v.textContent=y,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,o){return super.insertBefore(this.nodeOrShadowRoot(n),r,o)}removeChild(n,r){return super.removeChild(null,r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ET=class extends wT{constructor(n,r,o,s,l,h,p,d){super(n,l,h,p),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=s,this.styles=d?u3(d,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},lC=class extends ET{constructor(n,r,o,s,l,h,p,d){let g=s+"-"+o.id;super(n,r,o,l,h,p,d,g),this.contentAttr=Z8(g),this.hostAttr=X8(g)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,r){let o=super.createElement(n,r);return super.setAttribute(o,this.contentAttr,""),o}},K8=(()=>{let n=class n extends bT{constructor(o){super(o)}supports(o){return!0}addEventListener(o,s,l){return o.addEventListener(s,l,!1),()=>this.removeEventListener(o,s,l)}removeEventListener(o,s,l){return o.removeEventListener(s,l)}};n.\u0275fac=function(s){return new(s||n)(By(S0))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),J8=(()=>{let n=class n extends bT{constructor(o){super(o),this.delegate=py(PL,{optional:!0})}supports(o){return this.delegate?this.delegate.supports(o):!1}addEventListener(o,s,l){return this.delegate.addEventListener(o,s,l)}removeEventListener(o,s,l){return this.delegate.removeEventListener(o,s,l)}};n.\u0275fac=function(s){return new(s||n)(By(S0))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})(),o3=["alt","control","meta","shift"],Q8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tH={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},eH=(()=>{let n=class n extends bT{constructor(o){super(o)}supports(o){return n.parseEventName(o)!=null}addEventListener(o,s,l){let h=n.parseEventName(s),p=n.eventCallback(h.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>r1().onAndCancel(o,h.domEventName,p))}static parseEventName(o){let s=o.toLowerCase().split("."),l=s.shift();if(s.length===0||!(l==="keydown"||l==="keyup"))return null;let h=n._normalizeKey(s.pop()),p="",d=s.indexOf("code");if(d>-1&&(s.splice(d,1),p="code."),o3.forEach(y=>{let v=s.indexOf(y);v>-1&&(s.splice(v,1),p+=y+".")}),p+=h,s.length!=0||h.length===0)return null;let g={};return g.domEventName=l,g.fullKey=p,g}static matchEventFullKeyCode(o,s){let l=Q8[o.key]||o.key,h="";return s.indexOf("code.")>-1&&(l=o.code,h="code."),l==null||!l?!1:(l=l.toLowerCase(),l===" "?l="space":l==="."&&(l="dot"),o3.forEach(p=>{if(p!==l){let d=tH[p];d(o)&&(h+=p+".")}}),h+=l,h===s)}static eventCallback(o,s,l){return h=>{n.matchEventFullKeyCode(h,o)&&l.runGuarded(()=>s(h))}}static _normalizeKey(o){return o==="esc"?"escape":o}};n.\u0275fac=function(s){return new(s||n)(By(S0))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac});let e=n;return e})();function c3(e,n){return NL(gy({rootComponent:e},nH(n)))}function nH(e){return{appProviders:[...aH,...e?.providers??[]],platformProviders:sH}}function rH(){t2.makeCurrent()}function iH(){return new D1}function oH(){return AR(document),document}var sH=[{provide:P1,useValue:$L},{provide:_M,useValue:rH,multi:!0},{provide:S0,useFactory:oH,deps:[]}];var aH=[{provide:NS,useValue:"root"},{provide:D1,useFactory:iH,deps:[]},{provide:aC,useClass:K8,multi:!0,deps:[S0,Fv,P1]},{provide:aC,useClass:eH,multi:!0,deps:[S0]},{provide:aC,useClass:J8,multi:!0},r3,a3,s3,{provide:NE,useExisting:r3},{provide:zE,useClass:$8,deps:[]},[]];var h3=(()=>{let n=class n{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};n.\u0275fac=function(s){return new(s||n)(By(S0))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var qy="primary",BT=Symbol("RouteTitle"),a2=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){let r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}};function YE(e){return new a2(e)}function uH(e,n,r){let o=r.path.split("/");if(o.length>e.length||r.pathMatch==="full"&&(n.hasChildren()||o.length<e.length))return null;let s={};for(let l=0;l<o.length;l++){let h=o[l],p=e[l];if(h[0]===":")s[h.substring(1)]=p;else if(h!==p.path)return null}return{consumed:e.slice(0,o.length),posParams:s}}function cH(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;++r)if(!B_(e[r],n[r]))return!1;return!0}function B_(e,n){let r=e?l2(e):void 0,o=n?l2(n):void 0;if(!r||!o||r.length!=o.length)return!1;let s;for(let l=0;l<r.length;l++)if(s=r[l],!_3(e[s],n[s]))return!1;return!0}function l2(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function _3(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let r=[...e].sort(),o=[...n].sort();return r.every((s,l)=>o[l]===s)}else return e===n}function b3(e){return e.length>0?e[e.length-1]:null}function $1(e){return jI(e)?e:kw(e)?kv(Promise.resolve(e)):Vy(e)}var hH={exact:E3,subset:x3},w3={exact:fH,subset:pH,ignored:()=>!0};function f3(e,n,r){return hH[r.paths](e.root,n.root,r.matrixParams)&&w3[r.queryParams](e.queryParams,n.queryParams)&&!(r.fragment==="exact"&&e.fragment!==n.fragment)}function fH(e,n){return B_(e,n)}function E3(e,n,r){if(!Rw(e.segments,n.segments)||!hC(e.segments,n.segments,r)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let o in n.children)if(!e.children[o]||!E3(e.children[o],n.children[o],r))return!1;return!0}function pH(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(r=>_3(e[r],n[r]))}function x3(e,n,r){return T3(e,n,n.segments,r)}function T3(e,n,r,o){if(e.segments.length>r.length){let s=e.segments.slice(0,r.length);return!(!Rw(s,r)||n.hasChildren()||!hC(s,r,o))}else if(e.segments.length===r.length){if(!Rw(e.segments,r)||!hC(e.segments,r,o))return!1;for(let s in n.children)if(!e.children[s]||!x3(e.children[s],n.children[s],o))return!1;return!0}else{let s=r.slice(0,e.segments.length),l=r.slice(e.segments.length);return!Rw(e.segments,s)||!hC(e.segments,s,o)||!e.children[qy]?!1:T3(e.children[qy],n,l,o)}}function hC(e,n,r){return n.every((o,s)=>w3[r](e[s].parameters,o.parameters))}var s1=class{constructor(n=new fv([],{}),r={},o=null){this.root=n,this.queryParams=r,this.fragment=o}get queryParamMap(){return this._queryParamMap??=YE(this.queryParams),this._queryParamMap}toString(){return mH.serialize(this)}},fv=class{constructor(n,r){this.segments=n,this.children=r,this.parent=null,Object.values(r).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fC(this)}},Pw=class{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap??=YE(this.parameters),this._parameterMap}toString(){return S3(this)}};function dH(e,n){return Rw(e,n)&&e.every((r,o)=>B_(r.parameters,n[o].parameters))}function Rw(e,n){return e.length!==n.length?!1:e.every((r,o)=>r.path===n[o].path)}function gH(e,n){let r=[];return Object.entries(e.children).forEach(([o,s])=>{o===qy&&(r=r.concat(n(s,o)))}),Object.entries(e.children).forEach(([o,s])=>{o!==qy&&(r=r.concat(n(s,o)))}),r}var P2=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>new DT,providedIn:"root"});let e=n;return e})(),DT=class{parse(n){let r=new c2(n);return new s1(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){let r=`/${xT(n.root,!0)}`,o=_H(n.queryParams),s=typeof n.fragment=="string"?`#${yH(n.fragment)}`:"";return`${r}${o}${s}`}},mH=new DT;function fC(e){return e.segments.map(n=>S3(n)).join("/")}function xT(e,n){if(!e.hasChildren())return fC(e);if(n){let r=e.children[qy]?xT(e.children[qy],!1):"",o=[];return Object.entries(e.children).forEach(([s,l])=>{s!==qy&&o.push(`${s}:${xT(l,!1)}`)}),o.length>0?`${r}(${o.join("//")})`:r}else{let r=gH(e,(o,s)=>s===qy?[xT(e.children[qy],!1)]:[`${s}:${xT(o,!1)}`]);return Object.keys(e.children).length===1&&e.children[qy]!=null?`${fC(e)}/${r[0]}`:`${fC(e)}/(${r.join("//")})`}}function A3(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uC(e){return A3(e).replace(/%3B/gi,";")}function yH(e){return encodeURI(e)}function u2(e){return A3(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pC(e){return decodeURIComponent(e)}function p3(e){return pC(e.replace(/\+/g,"%20"))}function S3(e){return`${u2(e.path)}${vH(e.parameters)}`}function vH(e){return Object.entries(e).map(([n,r])=>`;${u2(n)}=${u2(r)}`).join("")}function _H(e){let n=Object.entries(e).map(([r,o])=>Array.isArray(o)?o.map(s=>`${uC(r)}=${uC(s)}`).join("&"):`${uC(r)}=${uC(o)}`).filter(r=>r);return n.length?`?${n.join("&")}`:""}var bH=/^[^\/()?;#]+/;function r2(e){let n=e.match(bH);return n?n[0]:""}var wH=/^[^\/()?;=#]+/;function EH(e){let n=e.match(wH);return n?n[0]:""}var xH=/^[^=?&#]+/;function TH(e){let n=e.match(xH);return n?n[0]:""}var AH=/^[^&#]+/;function SH(e){let n=e.match(AH);return n?n[0]:""}var c2=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fv([],{}):new fv([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(o[qy]=new fv(n,r)),o}parseSegment(){let n=r2(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Oy(4009,!1);return this.capture(n),new Pw(pC(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let r=EH(this.remaining);if(!r)return;this.capture(r);let o="";if(this.consumeOptional("=")){let s=r2(this.remaining);s&&(o=s,this.capture(o))}n[pC(r)]=pC(o)}parseQueryParam(n){let r=TH(this.remaining);if(!r)return;this.capture(r);let o="";if(this.consumeOptional("=")){let h=SH(this.remaining);h&&(o=h,this.capture(o))}let s=p3(r),l=p3(o);if(n.hasOwnProperty(s)){let h=n[s];Array.isArray(h)||(h=[h],n[s]=h),h.push(l)}else n[s]=l}parseParens(n){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=r2(this.remaining),s=this.remaining[o.length];if(s!=="/"&&s!==")"&&s!==";")throw new Oy(4010,!1);let l;o.indexOf(":")>-1?(l=o.slice(0,o.indexOf(":")),this.capture(l),this.capture(":")):n&&(l=qy);let h=this.parseChildren();r[l]=Object.keys(h).length===1?h[qy]:new fv([],h),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Oy(4011,!1)}};function C3(e){return e.segments.length>0?new fv([],{[qy]:e}):e}function I3(e){let n={};for(let[o,s]of Object.entries(e.children)){let l=I3(s);if(o===qy&&l.segments.length===0&&l.hasChildren())for(let[h,p]of Object.entries(l.children))n[h]=p;else(l.segments.length>0||l.hasChildren())&&(n[o]=l)}let r=new fv(e.segments,n);return CH(r)}function CH(e){if(e.numberOfChildren===1&&e.children[qy]){let n=e.children[qy];return new fv(e.segments.concat(n.segments),n.children)}return e}function kT(e){return e instanceof s1}function IH(e,n,r=null,o=null){let s=D3(e);return k3(s,n,r,o)}function D3(e){let n;function r(l){let h={};for(let d of l.children){let g=r(d);h[d.outlet]=g}let p=new fv(l.url,h);return l===e&&(n=p),p}let o=r(e.root),s=C3(o);return n??s}function k3(e,n,r,o){let s=e;for(;s.parent;)s=s.parent;if(n.length===0)return i2(s,s,s,r,o);let l=DH(n);if(l.toRoot())return i2(s,s,new fv([],{}),r,o);let h=kH(l,s,e),p=h.processChildren?ST(h.segmentGroup,h.index,l.commands):O3(h.segmentGroup,h.index,l.commands);return i2(s,h.segmentGroup,p,r,o)}function dC(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function MT(e){return typeof e=="object"&&e!=null&&e.outlets}function i2(e,n,r,o,s){let l={};o&&Object.entries(o).forEach(([d,g])=>{l[d]=Array.isArray(g)?g.map(y=>`${y}`):`${g}`});let h;e===n?h=r:h=M3(e,n,r);let p=C3(I3(h));return new s1(p,l,s)}function M3(e,n,r){let o={};return Object.entries(e.children).forEach(([s,l])=>{l===n?o[s]=r:o[s]=M3(l,n,r)}),new fv(e.segments,o)}var gC=class{constructor(n,r,o){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=o,n&&o.length>0&&dC(o[0]))throw new Oy(4003,!1);let s=o.find(MT);if(s&&s!==b3(o))throw new Oy(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DH(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new gC(!0,0,e);let n=0,r=!1,o=e.reduce((s,l,h)=>{if(typeof l=="object"&&l!=null){if(l.outlets){let p={};return Object.entries(l.outlets).forEach(([d,g])=>{p[d]=typeof g=="string"?g.split("/"):g}),[...s,{outlets:p}]}if(l.segmentPath)return[...s,l.segmentPath]}return typeof l!="string"?[...s,l]:h===0?(l.split("/").forEach((p,d)=>{d==0&&p==="."||(d==0&&p===""?r=!0:p===".."?n++:p!=""&&s.push(p))}),s):[...s,l]},[]);return new gC(r,n,o)}var GE=class{constructor(n,r,o){this.segmentGroup=n,this.processChildren=r,this.index=o}};function kH(e,n,r){if(e.isAbsolute)return new GE(n,!0,0);if(!r)return new GE(n,!1,NaN);if(r.parent===null)return new GE(r,!0,0);let o=dC(e.commands[0])?0:1,s=r.segments.length-1+o;return MH(r,s,e.numberOfDoubleDots)}function MH(e,n,r){let o=e,s=n,l=r;for(;l>s;){if(l-=s,o=o.parent,!o)throw new Oy(4005,!1);s=o.segments.length}return new GE(o,!1,s-l)}function OH(e){return MT(e[0])?e[0].outlets:{[qy]:e}}function O3(e,n,r){if(e??=new fv([],{}),e.segments.length===0&&e.hasChildren())return ST(e,n,r);let o=NH(e,n,r),s=r.slice(o.commandIndex);if(o.match&&o.pathIndex<e.segments.length){let l=new fv(e.segments.slice(0,o.pathIndex),{});return l.children[qy]=new fv(e.segments.slice(o.pathIndex),e.children),ST(l,0,s)}else return o.match&&s.length===0?new fv(e.segments,{}):o.match&&!e.hasChildren()?h2(e,n,r):o.match?ST(e,0,s):h2(e,n,r)}function ST(e,n,r){if(r.length===0)return new fv(e.segments,{});{let o=OH(r),s={};if(Object.keys(o).some(l=>l!==qy)&&e.children[qy]&&e.numberOfChildren===1&&e.children[qy].segments.length===0){let l=ST(e.children[qy],n,r);return new fv(e.segments,l.children)}return Object.entries(o).forEach(([l,h])=>{typeof h=="string"&&(h=[h]),h!==null&&(s[l]=O3(e.children[l],n,h))}),Object.entries(e.children).forEach(([l,h])=>{o[l]===void 0&&(s[l]=h)}),new fv(e.segments,s)}}function NH(e,n,r){let o=0,s=n,l={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(o>=r.length)return l;let h=e.segments[s],p=r[o];if(MT(p))break;let d=`${p}`,g=o<r.length-1?r[o+1]:null;if(s>0&&d===void 0)break;if(d&&g&&typeof g=="object"&&g.outlets===void 0){if(!g3(d,g,h))return l;o+=2}else{if(!g3(d,{},h))return l;o++}s++}return{match:!0,pathIndex:s,commandIndex:o}}function h2(e,n,r){let o=e.segments.slice(0,n),s=0;for(;s<r.length;){let l=r[s];if(MT(l)){let d=PH(l.outlets);return new fv(o,d)}if(s===0&&dC(r[0])){let d=e.segments[n];o.push(new Pw(d.path,d3(r[0]))),s++;continue}let h=MT(l)?l.outlets[qy]:`${l}`,p=s<r.length-1?r[s+1]:null;h&&p&&dC(p)?(o.push(new Pw(h,d3(p))),s+=2):(o.push(new Pw(h,{})),s++)}return new fv(o,{})}function PH(e){let n={};return Object.entries(e).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[r]=h2(new fv([],{}),0,o))}),n}function d3(e){let n={};return Object.entries(e).forEach(([r,o])=>n[r]=`${o}`),n}function g3(e,n,r){return e==r.path&&B_(n,r.parameters)}var CT="imperative",d0=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(d0||{}),e_=class{constructor(n,r){this.id=n,this.url=r}},OT=class extends e_{constructor(n,r,o="imperative",s=null){super(n,r),this.type=d0.NavigationStart,this.navigationTrigger=o,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lw=class extends e_{constructor(n,r,o){super(n,r),this.urlAfterRedirects=o,this.type=d0.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},q0=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(q0||{}),f2=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(f2||{}),o1=class extends e_{constructor(n,r,o,s){super(n,r),this.reason=o,this.code=s,this.type=d0.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jw=class extends e_{constructor(n,r,o,s){super(n,r),this.reason=o,this.code=s,this.type=d0.NavigationSkipped}},NT=class extends e_{constructor(n,r,o,s){super(n,r),this.error=o,this.target=s,this.type=d0.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mC=class extends e_{constructor(n,r,o,s){super(n,r),this.urlAfterRedirects=o,this.state=s,this.type=d0.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},p2=class extends e_{constructor(n,r,o,s){super(n,r),this.urlAfterRedirects=o,this.state=s,this.type=d0.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},d2=class extends e_{constructor(n,r,o,s,l){super(n,r),this.urlAfterRedirects=o,this.state=s,this.shouldActivate=l,this.type=d0.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},g2=class extends e_{constructor(n,r,o,s){super(n,r),this.urlAfterRedirects=o,this.state=s,this.type=d0.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m2=class extends e_{constructor(n,r,o,s){super(n,r),this.urlAfterRedirects=o,this.state=s,this.type=d0.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y2=class{constructor(n){this.route=n,this.type=d0.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},v2=class{constructor(n){this.route=n,this.type=d0.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_2=class{constructor(n){this.snapshot=n,this.type=d0.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b2=class{constructor(n){this.snapshot=n,this.type=d0.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},w2=class{constructor(n){this.snapshot=n,this.type=d0.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E2=class{constructor(n){this.snapshot=n,this.type=d0.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var PT=class{},ZE=class{constructor(n,r){this.url=n,this.navigationBehaviorOptions=r}};function RH(e,n){return e.providers&&!e._injector&&(e._injector=RM(e.providers,n,`Route: ${e.path}`)),e._injector??n}function b_(e){return e.outlet||qy}function LH(e,n){let r=e.filter(o=>b_(o)===n);return r.push(...e.filter(o=>b_(o)!==n)),r}function VT(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let r=n.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}var x2=class{get injector(){return VT(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new xC(this.rootInjector),this.attachRef=null}},xC=(()=>{let n=class n{constructor(o){this.rootInjector=o,this.contexts=new Map}onChildOutletCreated(o,s){let l=this.getOrCreateContext(o);l.outlet=s,this.contexts.set(o,l)}onChildOutletDestroyed(o){let s=this.getContext(o);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let s=this.getContext(o);return s||(s=new x2(this.rootInjector),this.contexts.set(o,s)),s}getContext(o){return this.contexts.get(o)||null}};n.\u0275fac=function(s){return new(s||n)(By(M0))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),yC=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){let r=T2(n,this._root);return r?r.children.map(o=>o.value):[]}firstChild(n){let r=T2(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){let r=A2(n,this._root);return r.length<2?[]:r[r.length-2].children.map(s=>s.value).filter(s=>s!==n)}pathFromRoot(n){return A2(n,this._root).map(r=>r.value)}};function T2(e,n){if(e===n.value)return n;for(let r of n.children){let o=T2(e,r);if(o)return o}return null}function A2(e,n){if(e===n.value)return[n];for(let r of n.children){let o=A2(e,r);if(o.length)return o.unshift(n),o}return[]}var G0=class{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}};function $E(e){let n={};return e&&e.children.forEach(r=>n[r.value.outlet]=r),n}var vC=class extends yC{constructor(n,r){super(n),this.snapshot=r,R2(this,n)}toString(){return this.snapshot.toString()}};function N3(e){let n=jH(e),r=new p0([new Pw("",{})]),o=new p0({}),s=new p0({}),l=new p0({}),h=new p0(""),p=new XE(r,o,l,h,s,qy,e,n.root);return p.snapshot=n.root,new vC(new G0(p,[]),n)}function jH(e){let n={},r={},o={},s="",l=new qE([],n,o,s,r,qy,e,null,{});return new bC("",new G0(l,[]))}var XE=class{constructor(n,r,o,s,l,h,p,d){this.urlSubject=n,this.paramsSubject=r,this.queryParamsSubject=o,this.fragmentSubject=s,this.dataSubject=l,this.outlet=h,this.component=p,this._futureSnapshot=d,this.title=this.dataSubject?.pipe($y(g=>g[BT]))??Vy(void 0),this.url=n,this.params=r,this.queryParams=o,this.fragment=s,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($y(n=>YE(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($y(n=>YE(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _C(e,n,r="emptyOnly"){let o,{routeConfig:s}=e;return n!==null&&(r==="always"||s?.path===""||!n.component&&!n.routeConfig?.loadComponent)?o={params:gy(gy({},n.params),e.params),data:gy(gy({},n.data),e.data),resolve:gy(gy(gy(gy({},e.data),n.data),s?.data),e._resolvedData)}:o={params:gy({},e.params),data:gy({},e.data),resolve:gy(gy({},e.data),e._resolvedData??{})},s&&R3(s)&&(o.resolve[BT]=s.title),o}var qE=class{get title(){return this.data?.[BT]}constructor(n,r,o,s,l,h,p,d,g){this.url=n,this.params=r,this.queryParams=o,this.fragment=s,this.data=l,this.outlet=h,this.component=p,this.routeConfig=d,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=YE(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=YE(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(o=>o.toString()).join("/"),r=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${r}')`}},bC=class extends yC{constructor(n,r){super(r),this.url=n,R2(this,r)}toString(){return P3(this._root)}};function R2(e,n){n.value._routerState=e,n.children.forEach(r=>R2(e,r))}function P3(e){let n=e.children.length>0?` { ${e.children.map(P3).join(", ")} } `:"";return`${e.value}${n}`}function o2(e){if(e.snapshot){let n=e.snapshot,r=e._futureSnapshot;e.snapshot=r,B_(n.queryParams,r.queryParams)||e.queryParamsSubject.next(r.queryParams),n.fragment!==r.fragment&&e.fragmentSubject.next(r.fragment),B_(n.params,r.params)||e.paramsSubject.next(r.params),cH(n.url,r.url)||e.urlSubject.next(r.url),B_(n.data,r.data)||e.dataSubject.next(r.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function S2(e,n){let r=B_(e.params,n.params)&&dH(e.url,n.url),o=!e.parent!=!n.parent;return r&&!o&&(!e.parent||S2(e.parent,n.parent))}function R3(e){return typeof e.title=="string"||e.title===null}var L2=(()=>{let n=class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=qy,this.activateEvents=new uv,this.deactivateEvents=new uv,this.attachEvents=new uv,this.detachEvents=new uv,this.parentContexts=py(xC),this.location=py(VE),this.changeDetector=py(Ow),this.inputBinder=py(j2,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:s,previousValue:l}=o.name;if(s)return;this.isTrackedInParentContexts(l)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(l)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Oy(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Oy(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Oy(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,s){this.activated=o,this._activatedRoute=s,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,s){if(this.isActivated)throw new Oy(4013,!1);this._activatedRoute=o;let l=this.location,p=o.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,g=new C2(o,d,l.injector);this.activated=l.createComponent(p,{index:l.length,injector:g,environmentInjector:s}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};n.\u0275fac=function(s){return new(s||n)},n.\u0275dir=J0({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$0]});let e=n;return e})(),C2=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,r,o){this.route=n,this.childContexts=r,this.parent=o}get(n,r){return n===XE?this.route:n===xC?this.childContexts:this.parent.get(n,r)}},j2=new Sy("");function FH(e,n,r){let o=RT(e,n._root,r?r._root:void 0);return new vC(o,n)}function RT(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){let o=r.value;o._futureSnapshot=n.value;let s=BH(e,n,r);return new G0(o,s)}else{if(e.shouldAttach(n.value)){let l=e.retrieve(n.value);if(l!==null){let h=l.route;return h.value._futureSnapshot=n.value,h.children=n.children.map(p=>RT(e,p)),h}}let o=VH(n.value),s=n.children.map(l=>RT(e,l));return new G0(o,s)}}function BH(e,n,r){return n.children.map(o=>{for(let s of r.children)if(e.shouldReuseRoute(o.value,s.value.snapshot))return RT(e,o,s);return RT(e,o)})}function VH(e){return new XE(new p0(e.url),new p0(e.params),new p0(e.queryParams),new p0(e.fragment),new p0(e.data),e.outlet,e.component,e)}var LT=class{constructor(n,r){this.redirectTo=n,this.navigationBehaviorOptions=r}},L3="ngNavigationCancelingError";function wC(e,n){let{redirectTo:r,navigationBehaviorOptions:o}=kT(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,s=j3(!1,q0.Redirect);return s.url=r,s.navigationBehaviorOptions=o,s}function j3(e,n){let r=new Error(`NavigationCancelingError: ${e||""}`);return r[L3]=!0,r.cancellationCode=n,r}function UH(e){return F3(e)&&kT(e.url)}function F3(e){return!!e&&e[L3]}var zH=(e,n,r,o)=>$y(s=>(new I2(n,s.targetRouterState,s.currentRouterState,r,o).activate(e),s)),I2=class{constructor(n,r,o,s,l){this.routeReuseStrategy=n,this.futureState=r,this.currState=o,this.forwardEvent=s,this.inputBindingEnabled=l}activate(n){let r=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,o,n),o2(this.futureState.root),this.activateChildRoutes(r,o,n)}deactivateChildRoutes(n,r,o){let s=$E(r);n.children.forEach(l=>{let h=l.value.outlet;this.deactivateRoutes(l,s[h],o),delete s[h]}),Object.values(s).forEach(l=>{this.deactivateRouteAndItsChildren(l,o)})}deactivateRoutes(n,r,o){let s=n.value,l=r?r.value:null;if(s===l)if(s.component){let h=o.getContext(s.outlet);h&&this.deactivateChildRoutes(n,r,h.children)}else this.deactivateChildRoutes(n,r,o);else l&&this.deactivateRouteAndItsChildren(r,o)}deactivateRouteAndItsChildren(n,r){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){let o=r.getContext(n.value.outlet),s=o&&n.value.component?o.children:r,l=$E(n);for(let h of Object.values(l))this.deactivateRouteAndItsChildren(h,s);if(o&&o.outlet){let h=o.outlet.detach(),p=o.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:h,route:n,contexts:p})}}deactivateRouteAndOutlet(n,r){let o=r.getContext(n.value.outlet),s=o&&n.value.component?o.children:r,l=$E(n);for(let h of Object.values(l))this.deactivateRouteAndItsChildren(h,s);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(n,r,o){let s=$E(r);n.children.forEach(l=>{this.activateRoutes(l,s[l.value.outlet],o),this.forwardEvent(new E2(l.value.snapshot))}),n.children.length&&this.forwardEvent(new b2(n.value.snapshot))}activateRoutes(n,r,o){let s=n.value,l=r?r.value:null;if(o2(s),s===l)if(s.component){let h=o.getOrCreateContext(s.outlet);this.activateChildRoutes(n,r,h.children)}else this.activateChildRoutes(n,r,o);else if(s.component){let h=o.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let p=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(p.contexts),h.attachRef=p.componentRef,h.route=p.route.value,h.outlet&&h.outlet.attach(p.componentRef,p.route.value),o2(p.route.value),this.activateChildRoutes(n,null,h.children)}else h.attachRef=null,h.route=s,h.outlet&&h.outlet.activateWith(s,h.injector),this.activateChildRoutes(n,null,h.children)}else this.activateChildRoutes(n,null,o)}},EC=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},WE=class{constructor(n,r){this.component=n,this.route=r}};function HH(e,n,r){let o=e._root,s=n?n._root:null;return TT(o,s,r,[o.value])}function $H(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function JE(e,n){let r=Symbol(),o=n.get(e,r);return o===r?typeof e=="function"&&!hP(e)?e:n.get(e):o}function TT(e,n,r,o,s={canDeactivateChecks:[],canActivateChecks:[]}){let l=$E(n);return e.children.forEach(h=>{GH(h,l[h.value.outlet],r,o.concat([h.value]),s),delete l[h.value.outlet]}),Object.entries(l).forEach(([h,p])=>IT(p,r.getContext(h),s)),s}function GH(e,n,r,o,s={canDeactivateChecks:[],canActivateChecks:[]}){let l=e.value,h=n?n.value:null,p=r?r.getContext(e.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){let d=qH(h,l,l.routeConfig.runGuardsAndResolvers);d?s.canActivateChecks.push(new EC(o)):(l.data=h.data,l._resolvedData=h._resolvedData),l.component?TT(e,n,p?p.children:null,o,s):TT(e,n,r,o,s),d&&p&&p.outlet&&p.outlet.isActivated&&s.canDeactivateChecks.push(new WE(p.outlet.component,h))}else h&&IT(n,p,s),s.canActivateChecks.push(new EC(o)),l.component?TT(e,null,p?p.children:null,o,s):TT(e,null,r,o,s);return s}function qH(e,n,r){if(typeof r=="function")return r(e,n);switch(r){case"pathParamsChange":return!Rw(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Rw(e.url,n.url)||!B_(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!S2(e,n)||!B_(e.queryParams,n.queryParams);case"paramsChange":default:return!S2(e,n)}}function IT(e,n,r){let o=$E(e),s=e.value;Object.entries(o).forEach(([l,h])=>{s.component?n?IT(h,n.children.getContext(l),r):IT(h,null,r):IT(h,n,r)}),s.component?n&&n.outlet&&n.outlet.isActivated?r.canDeactivateChecks.push(new WE(n.outlet.component,s)):r.canDeactivateChecks.push(new WE(null,s)):r.canDeactivateChecks.push(new WE(null,s))}function UT(e){return typeof e=="function"}function WH(e){return typeof e=="boolean"}function YH(e){return e&&UT(e.canLoad)}function ZH(e){return e&&UT(e.canActivate)}function XH(e){return e&&UT(e.canActivateChild)}function KH(e){return e&&UT(e.canDeactivate)}function JH(e){return e&&UT(e.canMatch)}function B3(e){return e instanceof q_||e?.name==="EmptyError"}var cC=Symbol("INITIAL_VALUE");function KE(){return H0(e=>JA(e.map(n=>n.pipe(W_(1),$I(cC)))).pipe($y(n=>{for(let r of n)if(r!==!0){if(r===cC)return cC;if(r===!1||QH(r))return r}return!0}),z0(n=>n!==cC),W_(1)))}function QH(e){return kT(e)||e instanceof LT}function t$(e,n){return e0(r=>{let{targetSnapshot:o,currentSnapshot:s,guards:{canActivateChecks:l,canDeactivateChecks:h}}=r;return h.length===0&&l.length===0?Vy(ov(gy({},r),{guardsResult:!0})):e$(h,o,s,e).pipe(e0(p=>p&&WH(p)?n$(o,l,e,n):Vy(p)),$y(p=>ov(gy({},r),{guardsResult:p})))})}function e$(e,n,r,o){return kv(e).pipe(e0(s=>a$(s.component,s.route,r,n,o)),I_(s=>s!==!0,!0))}function n$(e,n,r,o){return kv(n).pipe(w1(s=>_E(i$(s.route.parent,o),r$(s.route,o),s$(e,s.path,r),o$(e,s.route,r))),I_(s=>s!==!0,!0))}function r$(e,n){return e!==null&&n&&n(new w2(e)),Vy(!0)}function i$(e,n){return e!==null&&n&&n(new _2(e)),Vy(!0)}function o$(e,n,r){let o=n.routeConfig?n.routeConfig.canActivate:null;if(!o||o.length===0)return Vy(!0);let s=o.map(l=>QA(()=>{let h=VT(n)??r,p=JE(l,h),d=ZH(p)?p.canActivate(n,e):g_(h,()=>p(n,e));return $1(d).pipe(I_())}));return Vy(s).pipe(KE())}function s$(e,n,r){let o=n[n.length-1],l=n.slice(0,n.length-1).reverse().map(h=>$H(h)).filter(h=>h!==null).map(h=>QA(()=>{let p=h.guards.map(d=>{let g=VT(h.node)??r,y=JE(d,g),v=XH(y)?y.canActivateChild(o,e):g_(g,()=>y(o,e));return $1(v).pipe(I_())});return Vy(p).pipe(KE())}));return Vy(l).pipe(KE())}function a$(e,n,r,o,s){let l=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!l||l.length===0)return Vy(!0);let h=l.map(p=>{let d=VT(n)??s,g=JE(p,d),y=KH(g)?g.canDeactivate(e,n,r,o):g_(d,()=>g(e,n,r,o));return $1(y).pipe(I_())});return Vy(h).pipe(KE())}function l$(e,n,r,o){let s=n.canLoad;if(s===void 0||s.length===0)return Vy(!0);let l=s.map(h=>{let p=JE(h,e),d=YH(p)?p.canLoad(n,r):g_(e,()=>p(n,r));return $1(d)});return Vy(l).pipe(KE(),V3(o))}function V3(e){return OI(o0(n=>{if(typeof n!="boolean")throw wC(e,n)}),$y(n=>n===!0))}function u$(e,n,r,o){let s=n.canMatch;if(!s||s.length===0)return Vy(!0);let l=s.map(h=>{let p=JE(h,e),d=JH(p)?p.canMatch(n,r):g_(e,()=>p(n,r));return $1(d)});return Vy(l).pipe(KE(),V3(o))}var jT=class{constructor(n){this.segmentGroup=n||null}},FT=class extends Error{constructor(n){super(),this.urlTree=n}};function HE(e){return vE(new jT(e))}function c$(e){return vE(new Oy(4e3,!1))}function h$(e){return vE(j3(!1,q0.GuardRejected))}var D2=class{constructor(n,r){this.urlSerializer=n,this.urlTree=r}lineralizeSegments(n,r){let o=[],s=r.root;for(;;){if(o=o.concat(s.segments),s.numberOfChildren===0)return Vy(o);if(s.numberOfChildren>1||!s.children[qy])return c$(`${n.redirectTo}`);s=s.children[qy]}}applyRedirectCommands(n,r,o,s,l){if(typeof r!="string"){let p=r,{queryParams:d,fragment:g,routeConfig:y,url:v,outlet:_,params:w,data:I,title:G}=s,_t=g_(l,()=>p({params:w,data:I,queryParams:d,fragment:g,routeConfig:y,url:v,outlet:_,title:G}));if(_t instanceof s1)throw new FT(_t);r=_t}let h=this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),n,o);if(r[0]==="/")throw new FT(h);return h}applyRedirectCreateUrlTree(n,r,o,s){let l=this.createSegmentGroup(n,r.root,o,s);return new s1(l,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){let o={};return Object.entries(n).forEach(([s,l])=>{if(typeof l=="string"&&l[0]===":"){let p=l.substring(1);o[s]=r[p]}else o[s]=l}),o}createSegmentGroup(n,r,o,s){let l=this.createSegments(n,r.segments,o,s),h={};return Object.entries(r.children).forEach(([p,d])=>{h[p]=this.createSegmentGroup(n,d,o,s)}),new fv(l,h)}createSegments(n,r,o,s){return r.map(l=>l.path[0]===":"?this.findPosParam(n,l,s):this.findOrReturn(l,o))}findPosParam(n,r,o){let s=o[r.path.substring(1)];if(!s)throw new Oy(4001,!1);return s}findOrReturn(n,r){let o=0;for(let s of r){if(s.path===n.path)return r.splice(o),s;o++}return n}},k2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function f$(e,n,r,o,s){let l=F2(e,n,r);return l.matched?(o=RH(n,o),u$(o,n,r,s).pipe($y(h=>h===!0?l:gy({},k2)))):Vy(l)}function F2(e,n,r){if(n.path==="**")return p$(r);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||r.length>0)?gy({},k2):{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};let s=(n.matcher||uH)(r,e,n);if(!s)return gy({},k2);let l={};Object.entries(s.posParams??{}).forEach(([p,d])=>{l[p]=d.path});let h=s.consumed.length>0?gy(gy({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:r.slice(s.consumed.length),parameters:h,positionalParamSegments:s.posParams??{}}}function p$(e){return{matched:!0,parameters:e.length>0?b3(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function m3(e,n,r,o){return r.length>0&&m$(e,r,o)?{segmentGroup:new fv(n,g$(o,new fv(r,e.children))),slicedSegments:[]}:r.length===0&&y$(e,r,o)?{segmentGroup:new fv(e.segments,d$(e,r,o,e.children)),slicedSegments:r}:{segmentGroup:new fv(e.segments,e.children),slicedSegments:r}}function d$(e,n,r,o){let s={};for(let l of r)if(TC(e,n,l)&&!o[b_(l)]){let h=new fv([],{});s[b_(l)]=h}return gy(gy({},o),s)}function g$(e,n){let r={};r[qy]=n;for(let o of e)if(o.path===""&&b_(o)!==qy){let s=new fv([],{});r[b_(o)]=s}return r}function m$(e,n,r){return r.some(o=>TC(e,n,o)&&b_(o)!==qy)}function y$(e,n,r){return r.some(o=>TC(e,n,o))}function TC(e,n,r){return(e.hasChildren()||n.length>0)&&r.pathMatch==="full"?!1:r.path===""}function v$(e,n,r,o){return b_(e)!==o&&(o===qy||!TC(n,r,e))?!1:F2(n,e,r).matched}function _$(e,n,r){return n.length===0&&!e.children[r]}var M2=class{};function b$(e,n,r,o,s,l,h="emptyOnly"){return new O2(e,n,r,o,s,h,l).recognize()}var w$=31,O2=class{constructor(n,r,o,s,l,h,p){this.injector=n,this.configLoader=r,this.rootComponentType=o,this.config=s,this.urlTree=l,this.paramsInheritanceStrategy=h,this.urlSerializer=p,this.applyRedirects=new D2(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new Oy(4002,`'${n.segmentGroup}'`)}recognize(){let n=m3(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe($y(({children:r,rootSnapshot:o})=>{let s=new G0(o,r),l=new bC("",s),h=IH(o,[],this.urlTree.queryParams,this.urlTree.fragment);return h.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(h),{state:l,tree:h}}))}match(n){let r=new qE([],Object.freeze({}),Object.freeze(gy({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),qy,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,qy,r).pipe($y(o=>({children:o,rootSnapshot:r})),b1(o=>{if(o instanceof FT)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof jT?this.noMatchError(o):o}))}processSegmentGroup(n,r,o,s,l){return o.segments.length===0&&o.hasChildren()?this.processChildren(n,r,o,l):this.processSegment(n,r,o,o.segments,s,!0,l).pipe($y(h=>h instanceof G0?[h]:[]))}processChildren(n,r,o,s){let l=[];for(let h of Object.keys(o.children))h==="primary"?l.unshift(h):l.push(h);return kv(l).pipe(w1(h=>{let p=o.children[h],d=LH(r,h);return this.processSegmentGroup(n,d,p,h,s)}),HI((h,p)=>(h.push(...p),h)),E1(null),zI(),e0(h=>{if(h===null)return HE(o);let p=U3(h);return E$(p),Vy(p)}))}processSegment(n,r,o,s,l,h,p){return kv(r).pipe(w1(d=>this.processSegmentAgainstRoute(d._injector??n,r,d,o,s,l,h,p).pipe(b1(g=>{if(g instanceof jT)return Vy(null);throw g}))),I_(d=>!!d),b1(d=>{if(B3(d))return _$(o,s,l)?Vy(new M2):HE(o);throw d}))}processSegmentAgainstRoute(n,r,o,s,l,h,p,d){return v$(o,s,l,h)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(n,s,o,l,h,d):this.allowRedirects&&p?this.expandSegmentAgainstRouteUsingRedirect(n,s,r,o,l,h,d):HE(s):HE(s)}expandSegmentAgainstRouteUsingRedirect(n,r,o,s,l,h,p){let{matched:d,parameters:g,consumedSegments:y,positionalParamSegments:v,remainingSegments:_}=F2(r,s,l);if(!d)return HE(r);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>w$&&(this.allowRedirects=!1));let w=new qE(l,g,Object.freeze(gy({},this.urlTree.queryParams)),this.urlTree.fragment,y3(s),b_(s),s.component??s._loadedComponent??null,s,v3(s)),I=_C(w,p,this.paramsInheritanceStrategy);w.params=Object.freeze(I.params),w.data=Object.freeze(I.data);let G=this.applyRedirects.applyRedirectCommands(y,s.redirectTo,v,w,n);return this.applyRedirects.lineralizeSegments(s,G).pipe(e0(_t=>this.processSegment(n,o,r,_t.concat(_),h,!1,p)))}matchSegmentAgainstRoute(n,r,o,s,l,h){let p=f$(r,o,s,n,this.urlSerializer);return o.path==="**"&&(r.children={}),p.pipe(H0(d=>d.matched?(n=o._injector??n,this.getChildConfig(n,o,s).pipe(H0(({routes:g})=>{let y=o._loadedInjector??n,{parameters:v,consumedSegments:_,remainingSegments:w}=d,I=new qE(_,v,Object.freeze(gy({},this.urlTree.queryParams)),this.urlTree.fragment,y3(o),b_(o),o.component??o._loadedComponent??null,o,v3(o)),G=_C(I,h,this.paramsInheritanceStrategy);I.params=Object.freeze(G.params),I.data=Object.freeze(G.data);let{segmentGroup:_t,slicedSegments:_r}=m3(r,_,w,g);if(_r.length===0&&_t.hasChildren())return this.processChildren(y,g,_t,I).pipe($y(Ca=>new G0(I,Ca)));if(g.length===0&&_r.length===0)return Vy(new G0(I,[]));let _o=b_(o)===l;return this.processSegment(y,g,_t,_r,_o?qy:l,!0,I).pipe($y(Ca=>new G0(I,Ca instanceof G0?[Ca]:[])))}))):HE(r)))}getChildConfig(n,r,o){return r.children?Vy({routes:r.children,injector:n}):r.loadChildren?r._loadedRoutes!==void 0?Vy({routes:r._loadedRoutes,injector:r._loadedInjector}):l$(n,r,o,this.urlSerializer).pipe(e0(s=>s?this.configLoader.loadChildren(n,r).pipe(o0(l=>{r._loadedRoutes=l.routes,r._loadedInjector=l.injector})):h$(r))):Vy({routes:[],injector:n})}};function E$(e){e.sort((n,r)=>n.value.outlet===qy?-1:r.value.outlet===qy?1:n.value.outlet.localeCompare(r.value.outlet))}function x$(e){let n=e.value.routeConfig;return n&&n.path===""}function U3(e){let n=[],r=new Set;for(let o of e){if(!x$(o)){n.push(o);continue}let s=n.find(l=>o.value.routeConfig===l.value.routeConfig);s!==void 0?(s.children.push(...o.children),r.add(s)):n.push(o)}for(let o of r){let s=U3(o.children);n.push(new G0(o.value,s))}return n.filter(o=>!r.has(o))}function y3(e){return e.data||{}}function v3(e){return e.resolve||{}}function T$(e,n,r,o,s,l){return e0(h=>b$(e,n,r,o,h.extractedUrl,s,l).pipe($y(({state:p,tree:d})=>ov(gy({},h),{targetSnapshot:p,urlAfterRedirects:d}))))}function A$(e,n){return e0(r=>{let{targetSnapshot:o,guards:{canActivateChecks:s}}=r;if(!s.length)return Vy(r);let l=new Set(s.map(d=>d.route)),h=new Set;for(let d of l)if(!h.has(d))for(let g of z3(d))h.add(g);let p=0;return kv(h).pipe(w1(d=>l.has(d)?S$(d,o,e,n):(d.data=_C(d,d.parent,e).resolve,Vy(void 0))),o0(()=>p++),bE(1),e0(d=>p===h.size?Vy(r):U0))})}function z3(e){let n=e.children.map(r=>z3(r)).flat();return[e,...n]}function S$(e,n,r,o){let s=e.routeConfig,l=e._resolve;return s?.title!==void 0&&!R3(s)&&(l[BT]=s.title),C$(l,e,n,o).pipe($y(h=>(e._resolvedData=h,e.data=_C(e,e.parent,r).resolve,null)))}function C$(e,n,r,o){let s=l2(e);if(s.length===0)return Vy({});let l={};return kv(s).pipe(e0(h=>I$(e[h],n,r,o).pipe(I_(),o0(p=>{if(p instanceof LT)throw wC(new DT,p);l[h]=p}))),bE(1),UI(l),b1(h=>B3(h)?U0:vE(h)))}function I$(e,n,r,o){let s=VT(n)??o,l=JE(e,s),h=l.resolve?l.resolve(n,r):g_(s,()=>l(n,r));return $1(h)}function s2(e){return H0(n=>{let r=e(n);return r?kv(r).pipe($y(()=>n)):Vy(n)})}var H3=(()=>{let n=class n{buildTitle(o){let s,l=o.root;for(;l!==void 0;)s=this.getResolvedTitleForRoute(l)??s,l=l.children.find(h=>h.outlet===qy);return s}getResolvedTitleForRoute(o){return o.data[BT]}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>py(D$),providedIn:"root"});let e=n;return e})(),D$=(()=>{let n=class n extends H3{constructor(o){super(),this.title=o}updateTitle(o){let s=this.buildTitle(o);s!==void 0&&this.title.setTitle(s)}};n.\u0275fac=function(s){return new(s||n)(By(h3))},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),B2=new Sy("",{providedIn:"root",factory:()=>({})}),k$=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=s0({type:n,selectors:[["ng-component"]],standalone:!0,features:[l0],decls:1,vars:0,template:function(s,l){s&1&&xv(0,"router-outlet")},dependencies:[L2],encapsulation:2});let e=n;return e})();function V2(e){let n=e.children&&e.children.map(V2),r=n?ov(gy({},e),{children:n}):gy({},e);return!r.component&&!r.loadComponent&&(n||r.loadChildren)&&r.outlet&&r.outlet!==qy&&(r.component=k$),r}var U2=new Sy(""),M$=(()=>{let n=class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=py(UM)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return Vy(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let s=$1(o.loadComponent()).pipe($y($3),o0(h=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=h}),hw(()=>{this.componentLoaders.delete(o)})),l=new mE(s,()=>new Yv).pipe(gE());return this.componentLoaders.set(o,l),l}loadChildren(o,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Vy({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let h=O$(s,this.compiler,o,this.onLoadEndListener).pipe(hw(()=>{this.childrenLoaders.delete(s)})),p=new mE(h,()=>new Yv).pipe(gE());return this.childrenLoaders.set(s,p),p}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function O$(e,n,r,o){return $1(e.loadChildren()).pipe($y($3),e0(s=>s instanceof nT||Array.isArray(s)?Vy(s):kv(n.compileModuleAsync(s))),$y(s=>{o&&o(e);let l,h,p=!1;return Array.isArray(s)?(h=s,p=!0):(l=s.create(r).injector,h=l.get(U2,[],{optional:!0,self:!0}).flat()),{routes:h.map(V2),injector:l}}))}function N$(e){return e&&typeof e=="object"&&"default"in e}function $3(e){return N$(e)?e.default:e}var z2=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>py(P$),providedIn:"root"});let e=n;return e})(),P$=(()=>{let n=class n{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,s){return o}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),R$=new Sy("");var L$=new Sy(""),j$=(()=>{let n=class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Yv,this.transitionAbortSubject=new Yv,this.configLoader=py(M$),this.environmentInjector=py(M0),this.urlSerializer=py(P2),this.rootContexts=py(xC),this.location=py(pT),this.inputBindingEnabled=py(j2,{optional:!0})!==null,this.titleStrategy=py(H3),this.options=py(B2,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=py(z2),this.createViewTransition=py(R$,{optional:!0}),this.navigationErrorHandler=py(L$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Vy(void 0),this.rootComponentType=null;let o=l=>this.events.next(new y2(l)),s=l=>this.events.next(new v2(l));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let s=++this.navigationId;this.transitions?.next(ov(gy(gy({},this.transitions.value),o),{id:s}))}setupNavigations(o,s,l){return this.transitions=new p0({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:CT,restoredState:null,currentSnapshot:l.snapshot,targetSnapshot:null,currentRouterState:l,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(z0(h=>h.id!==0),$y(h=>ov(gy({},h),{extractedUrl:this.urlHandlingStrategy.extract(h.rawUrl)})),H0(h=>{let p=!1,d=!1;return Vy(h).pipe(H0(g=>{if(this.navigationId>h.id)return this.cancelNavigationTransition(h,"",q0.SupersededByNewNavigation),U0;this.currentTransition=h,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?ov(gy({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let y=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=g.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!y&&v!=="reload"){let _="";return this.events.next(new jw(g.id,this.urlSerializer.serialize(g.rawUrl),_,f2.IgnoredSameUrlNavigation)),g.resolve(!1),U0}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Vy(g).pipe(H0(_=>{let w=this.transitions?.getValue();return this.events.next(new OT(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),w!==this.transitions?.getValue()?U0:Promise.resolve(_)}),T$(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),o0(_=>{h.targetSnapshot=_.targetSnapshot,h.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation=ov(gy({},this.currentNavigation),{finalUrl:_.urlAfterRedirects});let w=new mC(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}));if(y&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:_,extractedUrl:w,source:I,restoredState:G,extras:_t}=g,_r=new OT(_,this.urlSerializer.serialize(w),I,G);this.events.next(_r);let _o=N3(this.rootComponentType).snapshot;return this.currentTransition=h=ov(gy({},g),{targetSnapshot:_o,urlAfterRedirects:w,extras:ov(gy({},_t),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,Vy(h)}else{let _="";return this.events.next(new jw(g.id,this.urlSerializer.serialize(g.extractedUrl),_,f2.IgnoredByUrlHandlingStrategy)),g.resolve(!1),U0}}),o0(g=>{let y=new p2(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}),$y(g=>(this.currentTransition=h=ov(gy({},g),{guards:HH(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),h)),t$(this.environmentInjector,g=>this.events.next(g)),o0(g=>{if(h.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw wC(this.urlSerializer,g.guardsResult);let y=new d2(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(y)}),z0(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",q0.GuardRejected),!1)),s2(g=>{if(g.guards.canActivateChecks.length)return Vy(g).pipe(o0(y=>{let v=new g2(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(v)}),H0(y=>{let v=!1;return Vy(y).pipe(A$(this.paramsInheritanceStrategy,this.environmentInjector),o0({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(y,"",q0.NoDataFromResolver)}}))}),o0(y=>{let v=new m2(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(v)}))}),s2(g=>{let y=v=>{let _=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(v.routeConfig).pipe(o0(w=>{v.component=w}),$y(()=>{})));for(let w of v.children)_.push(...y(w));return _};return JA(y(g.targetSnapshot.root)).pipe(E1(null),W_(1))}),s2(()=>this.afterPreactivation()),H0(()=>{let{currentSnapshot:g,targetSnapshot:y}=h,v=this.createViewTransition?.(this.environmentInjector,g.root,y.root);return v?kv(v).pipe($y(()=>h)):Vy(h)}),$y(g=>{let y=FH(o.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=h=ov(gy({},g),{targetRouterState:y}),this.currentNavigation.targetRouterState=y,h}),o0(()=>{this.events.next(new PT)}),zH(this.rootContexts,o.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),W_(1),o0({next:g=>{p=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lw(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{p=!0}}),GI(this.transitionAbortSubject.pipe(o0(g=>{throw g}))),hw(()=>{!p&&!d&&this.cancelNavigationTransition(h,"",q0.SupersededByNewNavigation),this.currentTransition?.id===h.id&&(this.currentNavigation=null,this.currentTransition=null)}),b1(g=>{if(d=!0,F3(g))this.events.next(new o1(h.id,this.urlSerializer.serialize(h.extractedUrl),g.message,g.cancellationCode)),UH(g)?this.events.next(new ZE(g.url,g.navigationBehaviorOptions)):h.resolve(!1);else{let y=new NT(h.id,this.urlSerializer.serialize(h.extractedUrl),g,h.targetSnapshot??void 0);try{let v=g_(this.environmentInjector,()=>this.navigationErrorHandler?.(y));if(v instanceof LT){let{message:_,cancellationCode:w}=wC(this.urlSerializer,v);this.events.next(new o1(h.id,this.urlSerializer.serialize(h.extractedUrl),_,w)),this.events.next(new ZE(v.redirectTo,v.navigationBehaviorOptions))}else{this.events.next(y);let _=o.errorHandler(g);h.resolve(!!_)}}catch(v){this.options.resolveNavigationPromiseOnError?h.resolve(!1):h.reject(v)}}return U0}))}))}cancelNavigationTransition(o,s,l){let h=new o1(o.id,this.urlSerializer.serialize(o.extractedUrl),s,l);this.events.next(h),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let o=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),s=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return o.toString()!==s?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function F$(e){return e!==CT}var B$=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>py(V$),providedIn:"root"});let e=n;return e})(),N2=class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}},V$=(()=>{let n=class n extends N2{};n.\u0275fac=(()=>{let o;return function(l){return(o||(o=Dw(n)))(l||n)}})(),n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),G3=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:()=>py(U$),providedIn:"root"});let e=n;return e})(),U$=(()=>{let n=class n extends G3{constructor(){super(...arguments),this.location=py(pT),this.urlSerializer=py(P2),this.options=py(B2,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=py(z2),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new s1,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=N3(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(s=>{s.type==="popstate"&&o(s.url,s.state)})}handleRouterEvent(o,s){if(o instanceof OT)this.stateMemento=this.createStateMemento();else if(o instanceof jw)this.rawUrlTree=s.initialUrl;else if(o instanceof mC){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let l=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(s.targetBrowserUrl??l,s)}}else o instanceof PT?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&!s.extras.skipLocationChange&&this.setBrowserUrl(s.targetBrowserUrl??this.rawUrlTree,s)):o instanceof o1&&(o.code===q0.GuardRejected||o.code===q0.NoDataFromResolver)?this.restoreHistory(s):o instanceof NT?this.restoreHistory(s,!0):o instanceof Lw&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,s){let l=o instanceof s1?this.urlSerializer.serialize(o):o;if(this.location.isCurrentPathEqualTo(l)||s.extras.replaceUrl){let h=this.browserPageId,p=gy(gy({},s.extras.state),this.generateNgRouterState(s.id,h));this.location.replaceState(l,"",p)}else{let h=gy(gy({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(l,"",h)}}restoreHistory(o,s=!1){if(this.canceledNavigationResolution==="computed"){let l=this.browserPageId,h=this.currentPageId-l;h!==0?this.location.historyGo(h):this.currentUrlTree===o.finalUrl&&h===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,s){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:s}:{navigationId:o}}};n.\u0275fac=(()=>{let o;return function(l){return(o||(o=Dw(n)))(l||n)}})(),n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),AT=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(AT||{});function z$(e,n){e.events.pipe(z0(r=>r instanceof Lw||r instanceof o1||r instanceof NT||r instanceof jw),$y(r=>r instanceof Lw||r instanceof jw?AT.COMPLETE:(r instanceof o1?r.code===q0.Redirect||r.code===q0.SupersededByNewNavigation:!1)?AT.REDIRECTING:AT.FAILED),z0(r=>r!==AT.REDIRECTING),W_(1)).subscribe(()=>{n()})}function H$(e){throw e}var $$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},q3=(()=>{let n=class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=py(WS),this.stateManager=py(G3),this.options=py(B2,{optional:!0})||{},this.pendingTasks=py(N1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=py(j$),this.urlSerializer=py(P2),this.location=py(pT),this.urlHandlingStrategy=py(z2),this._events=new Yv,this.errorHandler=this.options.errorHandler||H$,this.navigated=!1,this.routeReuseStrategy=py(B$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=py(U2,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!py(j2,{optional:!0}),this.eventsSubscription=new Lv,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(s=>{try{let l=this.navigationTransitions.currentTransition,h=this.navigationTransitions.currentNavigation;if(l!==null&&h!==null){if(this.stateManager.handleRouterEvent(s,h),s instanceof o1&&s.code!==q0.Redirect&&s.code!==q0.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof Lw)this.navigated=!0;else if(s instanceof ZE){let p=s.navigationBehaviorOptions,d=this.urlHandlingStrategy.merge(s.url,l.currentRawUrl),g=gy({browserUrl:l.extras.browserUrl,info:l.extras.info,skipLocationChange:l.extras.skipLocationChange,replaceUrl:l.extras.replaceUrl||this.urlUpdateStrategy==="eager"||F$(l.source)},p);this.scheduleNavigation(d,CT,null,g,{resolve:l.resolve,reject:l.reject,promise:l.promise})}}W$(s)&&this._events.next(s)}catch(l){this.navigationTransitions.transitionAbortSubject.next(l)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),CT,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",s)},0)})}navigateToSyncWithBrowser(o,s,l){let h={replaceUrl:!0},p=l?.navigationId?l:null;if(l){let g=gy({},l);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(h.state=g)}let d=this.parseUrl(o);this.scheduleNavigation(d,s,p,h)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(V2),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,s={}){let{relativeTo:l,queryParams:h,fragment:p,queryParamsHandling:d,preserveFragment:g}=s,y=g?this.currentUrlTree.fragment:p,v=null;switch(d){case"merge":v=gy(gy({},this.currentUrlTree.queryParams),h);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=h||null}v!==null&&(v=this.removeEmptyProps(v));let _;try{let w=l?l.snapshot:this.routerState.snapshot.root;_=D3(w)}catch{(typeof o[0]!="string"||o[0][0]!=="/")&&(o=[]),_=this.currentUrlTree.root}return k3(_,o,v,y??null)}navigateByUrl(o,s={skipLocationChange:!1}){let l=kT(o)?o:this.parseUrl(o),h=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(h,CT,null,s)}navigate(o,s={skipLocationChange:!1}){return q$(o),this.navigateByUrl(this.createUrlTree(o,s),s)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,s){let l;if(s===!0?l=gy({},$$):s===!1?l=gy({},G$):l=s,kT(o))return f3(this.currentUrlTree,o,l);let h=this.parseUrl(o);return f3(this.currentUrlTree,h,l)}removeEmptyProps(o){return Object.entries(o).reduce((s,[l,h])=>(h!=null&&(s[l]=h),s),{})}scheduleNavigation(o,s,l,h,p){if(this.disposed)return Promise.resolve(!1);let d,g,y;p?(d=p.resolve,g=p.reject,y=p.promise):y=new Promise((_,w)=>{d=_,g=w});let v=this.pendingTasks.add();return z$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:h,resolve:d,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(_=>Promise.reject(_))}};n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Dy({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function q$(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new Oy(4008,!1)}function W$(e){return!(e instanceof PT)&&!(e instanceof ZE)}var Y$=new Sy("");function W3(e,...n){return RE([{provide:U2,multi:!0,useValue:e},[],{provide:XE,useFactory:Z$,deps:[q3]},{provide:YS,multi:!0,useFactory:X$},n.map(r=>r.\u0275providers)])}function Z$(e){return e.routerState.root}function X$(){let e=py(I1);return n=>{let r=e.get(Mw);if(n!==r.components[0])return;let o=e.get(q3),s=e.get(K$);e.get(J$)===1&&o.initialNavigation(),e.get(Q$,null,Wy.Optional)?.setUpPreloading(),e.get(Y$,null,Wy.Optional)?.init(),o.resetRootComponentType(r.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var K$=new Sy("",{factory:()=>new Yv}),J$=new Sy("",{providedIn:"root",factory:()=>1});var Q$=new Sy("");var Y3=(()=>{class e{zoom=2;lng=79.96;lat=28.91;notifyChange=new uv;notifyToHome=new uv;modifyZoom(r){this.zoom+=r,this.notifyChange.emit({zoom:this.zoom,lat:this.lat,lng:this.lng})}goHome(){this.notifyToHome.emit({toHome:!0})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s0({type:e,selectors:[["app-mapposition"]],inputs:{zoom:"zoom",lng:"lng",lat:"lat"},outputs:{notifyChange:"notifyChange",notifyToHome:"notifyToHome"},standalone:!0,features:[l0],decls:11,vars:0,consts:[[1,"fixed","bottom-4","right-4","p-4","border","rounded","shadow-md"],[1,"flex","flex-col","items-center","space-y-2"],[1,"w-12","h-12","flex","items-center","opacity-80","justify-center","bg-gray-600","text-white","rounded-md","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 2a10 10 0 110 20 10 10 0 010-20zm0 1v2m0 8v2m4-4h2m-8 0H7m8.39 4.24l1.42 1.42m-1.42-1.42l-1.42 1.42M15 12h2m-4 4v2m0-8V7m2.24 1.39l1.42 1.42m-1.42-1.42l-1.42 1.42"],[1,"w-12","h-12","flex","items-center","justify-center","opacity-80","bg-gray-600","text-white","rounded-md","shadow-lg",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"w-12","h-12","flex","items-center","justify-center","bg-gray-600","opacity-80","text-white","rounded-md","shadow-lg",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"]],template:function(o,s){o&1&&(my(0,"div",0)(1,"div",1)(2,"button",2),Cv("click",function(){return s.goHome()}),P0(),my(3,"svg",3),xv(4,"path",4),xy()(),y_(),my(5,"button",5),Cv("click",function(){return s.modifyZoom(1)}),P0(),my(6,"svg",3),xv(7,"path",6),xy()(),y_(),my(8,"button",7),Cv("click",function(){return s.modifyZoom(-1)}),P0(),my(9,"svg",3),xv(10,"path",8),xy()()()())}})}return e})();(function(){var m,aa=[];function ca(e){return function(){return aa[e].apply(this,arguments)}}function da(e,n){return aa[e]=n}function ea(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}}function fa(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:ea(e)}}function ha(e){for(var n,r=[];!(n=e.next()).done;)r.push(n.value);return r}function ia(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var ja=ia(this),ka=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,r){return e==Array.prototype||e==Object.prototype||(e[n]=r.value),e};function la(e,n){if(n)t:{var r=ja;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in r))break t;r=r[s]}e=e[e.length-1],o=r[e],n=n(o),n!=o&&n!=null&&ka(r,e,{configurable:!0,writable:!0,value:n})}}la("Symbol",function(e){function n(l){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new r(o+(l||"")+"_"+s++,l)}function r(l,h){this.Qx=l,ka(this,"description",{configurable:!0,writable:!0,value:h})}if(e)return e;r.prototype.toString=function(){return this.Qx};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",s=0;return n}),la("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<n.length;r++){var o=ja[n[r]];typeof o=="function"&&typeof o.prototype[e]!="function"&&ka(o.prototype,e,{configurable:!0,writable:!0,value:function(){return ma(ea(this))}})}return e});function ma(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function na(e,n){e instanceof String&&(e+="");var r=0,o=!1,s={next:function(){if(!o&&r<e.length){var l=r++;return{value:n(l,e[l]),done:!1}}return o=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}la("Array.prototype.keys",function(e){return e||function(){return na(this,function(n){return n})}});function oa(e,n,r){e instanceof String&&(e=String(e));for(var o=e.length,s=0;s<o;s++){var l=e[s];if(n.call(r,l,s,e))return{Gu:s,Gx:l}}return{Gu:-1,Gx:void 0}}la("Array.prototype.find",function(e){return e||function(n,r){return oa(this,n,r).Gx}});var pa;if(typeof Object.setPrototypeOf=="function")pa=Object.setPrototypeOf;else{var qa;t:{var ra={a:!0},sa={};try{sa.__proto__=ra,qa=sa.a;break t}catch{}qa=!1}pa=qa?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null}var ta=pa;la("Object.setPrototypeOf",function(e){return e||ta}),la("Array.prototype.entries",function(e){return e||function(){return na(this,function(n,r){return[n,r]})}}),la("Object.values",function(e){return e||function(n){var r=[],o;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.push(n[o]);return r}}),la("Object.is",function(e){return e||function(n,r){return n===r?n!==0||1/n===1/r:n!==n&&r!==r}}),la("Array.prototype.includes",function(e){return e||function(n,r){var o=this;o instanceof String&&(o=String(o));var s=o.length;for(r=r||0,0>r&&(r=Math.max(r+s,0));r<s;r++){var l=o[r];if(l===n||Object.is(l,n))return!0}return!1}}),la("String.prototype.includes",function(e){return e||function(n,r){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return(this+"").indexOf(n,r||0)!==-1}}),la("Promise",function(e){function n(h){this.o=0,this.qf=void 0,this.Vh=[],this.Wu=!1;var p=this.ap();try{h(p.resolve,p.reject)}catch(d){p.reject(d)}}function r(){this.He=null}function o(h){return h instanceof n?h:new n(function(p){p(h)})}if(e)return e;r.prototype.ft=function(h){if(this.He==null){this.He=[];var p=this;this.gt(function(){p.az()})}this.He.push(h)};var s=ja.setTimeout;r.prototype.gt=function(h){s(h,0)},r.prototype.az=function(){for(;this.He&&this.He.length;){var h=this.He;this.He=[];for(var p=0;p<h.length;++p){var d=h[p];h[p]=null;try{d()}catch(g){this.ny(g)}}}this.He=null},r.prototype.ny=function(h){this.gt(function(){throw h})},n.prototype.ap=function(){function h(g){return function(y){d||(d=!0,g.call(p,y))}}var p=this,d=!1;return{resolve:h(this.OC),reject:h(this.zr)}},n.prototype.OC=function(h){if(h===this)this.zr(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof n)this.dD(h);else{t:switch(typeof h){case"object":var p=h!=null;break t;case"function":p=!0;break t;default:p=!1}p?this.NC(h):this.au(h)}},n.prototype.NC=function(h){var p=void 0;try{p=h.then}catch(d){this.zr(d);return}typeof p=="function"?this.eD(p,h):this.au(h)},n.prototype.zr=function(h){this.$w(2,h)},n.prototype.au=function(h){this.$w(1,h)},n.prototype.$w=function(h,p){if(this.o!=0)throw Error("Cannot settle("+h+", "+p+"): Promise already settled in state"+this.o);this.o=h,this.qf=p,this.o===2&&this.RC(),this.cz()},n.prototype.RC=function(){var h=this;s(function(){if(h.MB()){var p=ja.console;typeof p<"u"&&p.error(h.qf)}},1)},n.prototype.MB=function(){if(this.Wu)return!1;var h=ja.CustomEvent,p=ja.Event,d=ja.dispatchEvent;return typeof d>"u"?!0:(typeof h=="function"?h=new h("unhandledrejection",{cancelable:!0}):typeof p=="function"?h=new p("unhandledrejection",{cancelable:!0}):(h=ja.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h)),h.promise=this,h.reason=this.qf,d(h))},n.prototype.cz=function(){if(this.Vh!=null){for(var h=0;h<this.Vh.length;++h)l.ft(this.Vh[h]);this.Vh=null}};var l=new r;return n.prototype.dD=function(h){var p=this.ap();h.Jl(p.resolve,p.reject)},n.prototype.eD=function(h,p){var d=this.ap();try{h.call(p,d.resolve,d.reject)}catch(g){d.reject(g)}},n.prototype.then=function(h,p){function d(_,w){return typeof _=="function"?function(I){try{g(_(I))}catch(G){y(G)}}:w}var g,y,v=new n(function(_,w){g=_,y=w});return this.Jl(d(h,g),d(p,y)),v},n.prototype.catch=function(h){return this.then(void 0,h)},n.prototype.Jl=function(h,p){function d(){switch(g.o){case 1:h(g.qf);break;case 2:p(g.qf);break;default:throw Error("Unexpected state: "+g.o)}}var g=this;this.Vh==null?l.ft(d):this.Vh.push(d),this.Wu=!0},n.resolve=o,n.reject=function(h){return new n(function(p,d){d(h)})},n.race=function(h){return new n(function(p,d){for(var g=fa(h),y=g.next();!y.done;y=g.next())o(y.value).Jl(p,d)})},n.all=function(h){var p=fa(h),d=p.next();return d.done?o([]):new n(function(g,y){function v(I){return function(G){_[I]=G,w--,w==0&&g(_)}}var _=[],w=0;do _.push(void 0),w++,o(d.value).Jl(v(_.length-1),y),d=p.next();while(!d.done)})},n}),la("Object.entries",function(e){return e||function(n){var r=[],o;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.push([o,n[o]]);return r}});var ua=typeof Object.assign=="function"?Object.assign:function(e,n){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e};la("Object.assign",function(e){return e||ua}),la("Array.prototype.fill",function(e){return e||function(n,r,o){var s=this.length||0;for(0>r&&(r=Math.max(0,s+r)),(o==null||o>s)&&(o=s),o=Number(o),0>o&&(o=Math.max(0,s+o)),r=Number(r||0);r<o;r++)this[r]=n;return this}});function va(e){return e||Array.prototype.fill}la("Int8Array.prototype.fill",va),la("Uint8Array.prototype.fill",va),la("Uint8ClampedArray.prototype.fill",va),la("Int16Array.prototype.fill",va),la("Uint16Array.prototype.fill",va),la("Int32Array.prototype.fill",va),la("Uint32Array.prototype.fill",va),la("Float32Array.prototype.fill",va),la("Float64Array.prototype.fill",va),la("Math.log2",function(e){return e||function(n){return Math.log(n)/Math.LN2}}),la("globalThis",function(e){return e||ja}),la("Array.prototype.findIndex",function(e){return e||function(n,r){return oa(this,n,r).Gu}});var wa=this||self;function xa(e,n,r,o){e=e.split("."),o=o||wa,e[0]in o||typeof o.execScript>"u"||o.execScript("var "+e[0]);for(var s;e.length&&(s=e.shift());)if(e.length||n===void 0)o=o[s]&&o[s]!==Object.prototype[s]?o[s]:o[s]={};else if(!r&&ya(n)&&ya(o[s]))for(var l in n)n.hasOwnProperty(l)&&(o[s][l]=n[l]);else o[s]=n}function za(){}function Aa(e){var n=typeof e;return n!="object"?n:e?Array.isArray(e)?"array":n:"null"}function Ba(e){var n=Aa(e);return n=="array"||n=="object"&&typeof e.length=="number"}function ya(e){var n=typeof e;return n=="object"&&e!=null||n=="function"}function Da(e){return Object.prototype.hasOwnProperty.call(e,Ea)&&e[Ea]||(e[Ea]=++Fa)}var Ea="closure_uid_"+(1e9*Math.random()>>>0),Fa=0;function Ga(e,n,r){return e.call.apply(e.bind,arguments)}function Ha(e,n,r){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,o),e.apply(n,s)}}return function(){return e.apply(n,arguments)}}function Ia(e,n,r){return Ia=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ga:Ha,Ia.apply(null,arguments)}function Ja(e,n){var r=Array.prototype.slice.call(arguments,1);return function(){var o=r.slice();return o.push.apply(o,arguments),e.apply(this,o)}}function t(e,n){xa(e,n,!0,void 0)}function u(e,n){function r(){}r.prototype=n.prototype,e.g=n.prototype,e.prototype=new r,e.prototype.constructor=e,e.SD=function(o,s,l){for(var h=Array(arguments.length-2),p=2;p<arguments.length;p++)h[p-2]=arguments[p];return n.prototype[s].apply(o,h)}}var Ka,Ma,Na;function Oa(){}t("H.util.ICharStream",Oa),Oa.prototype.next=function(){},Oa.prototype.zi=function(){},Oa.prototype.mh=function(){},Oa.prototype.eb=function(){};function Pa(e){this.Ku=String(e),this.iw=0,this.Cc=[],this.Xf=!1}t("H.util.CharStream",Pa),Pa.prototype.next=function(){var e=this.Ku.charCodeAt(this.iw++);return e=isNaN(e)?-1:e,this.Xf&&this.Cc.push(e),e},Pa.prototype.zi=function(){this.Xf=!0,this.Cc=[]},Pa.prototype.mh=function(){var e=this.Cc.slice();return this.Xf=!1,this.Cc=[],e},Pa.prototype.eb=function(){var e=this.Ku.charCodeAt(this.iw+0);return isNaN(e)?-1:e};function Ra(e,n){for(var r in e)if(n.call(void 0,e[r],r,e))return!0;return!1}function Sa(e){for(var n in e)return!1;return!0}function Ta(e){var n={},r;for(r in e)n[r]=e[r];return n}var Ua="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wa(e,n){for(var r,o,s=1;s<arguments.length;s++){o=arguments[s];for(r in o)e[r]=o[r];for(var l=0;l<Ua.length;l++)r=Ua[l],Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}}var x=this;function Xa(e,n){if(Error.captureStackTrace)Error.captureStackTrace(this,Xa);else{var r=Error().stack;r&&(this.stack=r)}e&&(this.message=String(e)),n&&(this.UD=n)}u(Xa,Error),Xa.prototype.name="CustomError";var Ya=Array.prototype.indexOf?function(e,n){return Array.prototype.indexOf.call(e,n,void 0)}:function(e,n){if(typeof e=="string")return typeof n!="string"||n.length!=1?-1:e.indexOf(n,0);for(var r=0;r<e.length;r++)if(r in e&&e[r]===n)return r;return-1};function Za(){return Object.create(z,void 0)}var A=Ia,$a=String,ab=x.Object.freeze||function(e){return e};function bb(e){for(var n=Object.keys(e),r=n.length,o;r--;)o=e[n[r]],ya(o)&&bb(o);return ab(e)}function cb(e){var n=Aa(e);if(n=="object"||n=="array"){if(db(e.clone))return e.clone();n=n=="array"?[]:{};for(var r in e)e.hasOwnProperty(r)&&(n[r]=cb(e[r]));return n}return e}var B=[].pop(),z=/x/.exec(""),eb="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(e,n,r,o,s){if(!(n=e instanceof n)&&r)throw new D(r,o,fb(s)?s:e);return n}function gb(e,n){if((C(e,n)&&e.constructor===n)===!0)throw new TypeError("Illegal constructor "+hb(n))}function db(e){return Aa(e)=="function"}function ib(e,n,r,o,s){if(!(n=jb(e)===n)&&r)throw new D(r,o,fb(s)?s:e);return n}function kb(e,n,r,o){return ib(e,"Array",n,r,o)}t("H.lang.isArray",kb);function fb(e){return e!==B}function lb(e){return typeof e=="string"}t("H.lang.isString",lb);var mb=parseInt,nb=parseFloat,E=isNaN;function ob(e){return e===+e}t("H.lang.isNumber",ob),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(e){return typeof e=="number"&&e%1===0});function pb(e){return!E(+e)}function jb(e){var n=Object[eb[0]][eb[6]].call(e).match(/^\[object (\w+)\]$/);return n?n[1]:typeof e}var qb=[];function rb(e){0>qb.indexOf(e)&&qb.push(e)}rb(qb);function hb(e,n,r,o){var s="",l=2>arguments.length,h;return l&&(n={H:x.H},r="",o=qb.slice()),sb(n,!0,function(p,d){try{if(h=p[d],d=tb(p,h),!(ya(h)&&h.window===h&&h.self===h||ya(h)&&0<h.nodeType&&db(h.cloneNode))&&ya(h)){if(h===e)return s=r+"."+d,!0;if(0>o.indexOf(h)&&(o.push(h),s=hb(e,h,r+"."+d,o)))return!0}}catch{}}),l&&(s=s?s.substr(1).replace("."+eb[0]+".","#"):"~"+(db(e)?vb(e)+"()":jb(e))),s}function tb(e,n){var r=[];return sb(e,!1,function(o,s){o[s]===n&&r.push(s)}),r.sort(wb)[0]}function wb(e,n){return n.length-e.length}var xb=Object[eb[0]][eb[2]];function sb(e,n,r){var o;if(e){for(s in e)if((!n||xb.call(e,s))&&r(e,s,!0))return;for(o=eb.length;o--;){var s=eb[o];if((!n||xb.call(e,s))&&r(e,s,!1))break}}}function vb(e){return(e=/^\s*function ([^\( ]+)/.exec(e))?e[1]:"anonymous"}function yb(e,n,r){r[n]="#"+n}var zb=!!x.__karma__;function Ab(){throw Error("unimplemented method")}function D(e,n,r){var o=arguments.length,s;n=n!==B?+n:n,n!==B&&((s=/^.*?\(([^\)]+)/.exec((""+e).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?(s=s[1].replace(/\s+/g,""),s=$a(s).split(B!==","?",":" ")):s=[],s.forEach(yb),s=s[n]||"#"+n);var l=e?hb(e):"";return o=2<o?$a(r):"",(s||o)&&(l+=" (Argument "+(s||"")+(o?" "+o:"")+")"),o=Error(l),Object.setPrototypeOf(o,D.prototype),o}u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError";function Bb(e,n){var r=[];return e&&r.push(hb(e)),1<arguments.length&&r.push(""+n),r=Error(r.join(" ")),Object.setPrototypeOf(r,Bb.prototype),r}u(Bb,Error),t("H.lang.IllegalOperationError",Bb),Bb.prototype.name="IllegalOperationError";var Cb=Math,Db=Cb.min,Eb=Cb.max,Fb=Cb.round,Gb=Cb.floor,Hb=Cb.ceil,Ib=Cb.abs,Jb=Cb.log,Kb=Cb.sqrt,Lb=Cb.pow,Mb=Cb.exp,Nb=Cb.sin,Ob=Cb.asin,Pb=Cb.cos,Qb=Cb.tan,Rb=Cb.atan,Sb=Cb.atan2,Tb=Cb.LN2,Ub=Cb.PI,Vb=Ub/2,Wb=Ub/4,Xb=2*Ub,Yb=3*Ub,Zb=Ub/180,$b=180/Ub,ac=1/0,bc=Lb(-2,53),cc=cc||function(e){return Jb(e)/Tb};function dc(e,n){var r;return 0>(r=e%n)==0>n?r:r+n}function ec(e,n,r){return n-=r=r||0,e-=r,e-Gb(e/n)*n+r}t("H.math.normalize",ec);function fc(e,n,r){return(e-=0)>r?r:e<n?n:e}t("H.math.clamp",fc);function gc(e,n,r,o){return(o-=0)||(o=0),n<r?e>=n-o&&e<=r+o:e>=r-o&&e<=n+o}var hc={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",hc);function kc(e,n,r,o,s,l){var h=r.length,p=h,d=r[0],g=0,y=0,v=0;o=o/2||0;var _=l||2;l=_*(s?0:1)+1;for(var w=_-2;g!=1&&p>l;){p-=w;var I=r[--p];_=r[--p];var G=r[p?p-w-1:(h+(p-w-1))%h],_t=r[p?p-w-2:(h+(p-w-2))%h];_>=e-o&&_<=e+o&&I>=n-o&&I<=n+o||_t>=e-o&&_t<=e+o&&G>=n-o&&G<=n+o?g=1:!g&&_===e?(_t===e&&(I<n&&G>n||I>n&&G<n)||(d<=e&&_t>e||d>=e&&_t<e)&&(I>=n?++y:++v),g=gc(n,I,G,o)&&Kb(Lb((e-_t)*(I-G)-(n-G)*(_-_t),2)/(Lb(_-_t,2)+Lb(I-G,2)))<=o?2:0):!g&&gc(e,_,_t,o)&&((_<e&&_t>e||_>e&&_t<e)&&(d=I+(e-_)/(_t-_)*(G-I),y+=d>n,v+=d<n),g=gc(n,I,G,o)&&Kb(Lb((e-_t)*(I-G)-(n-G)*(_-_t),2)/(Lb(_-_t,2)+Lb(I-G,2)))<=o?2:0),d=_}return!g&&s&&v!==0&&y%2!==0&&(g=3),g}function lc(e,n){return kc(e.x,e.y,n,0,!0)!==hc.NONE}t("H.math.isPointInsidePolygon",lc);function mc(e){for(var n=e.length,r=new Float64Array(2*n),o=n&&fb(e[0].x);n--;){var s=e[n],l=n<<1;r[l]=o?s.x:s[0],r[l+1]=o?s.y:s[1]}return r}t("H.math.flatten",mc);var nc=0;function oc(e,n,r,o,s){this.listener=e,this.proxy=null,this.src=n,this.type=r,this.capture=!!o,this.vm=s,this.key=++nc,this.ji=this.Il=!1}function pc(e){e.ji=!0,e.listener=null,e.proxy=null,e.src=null,e.vm=null}function qc(e){this.src=e,this.pb={},this.ol=0}m=qc.prototype,m.add=function(e,n,r,o,s){var l=e.toString();e=this.pb[l],e||(e=this.pb[l]=[],this.ol++);var h=rc(e,n,o,s);return-1<h?(n=e[h],r||(n.Il=!1)):(n=new oc(n,this.src,l,!!o,s),n.Il=r,e.push(n)),n},m.remove=function(e,n,r,o){if(e=e.toString(),!(e in this.pb))return!1;var s=this.pb[e];return n=rc(s,n,r,o),-1<n?(pc(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete this.pb[e],this.ol--),!0):!1};function sc(e,n){var r=n.type;if(!(r in e.pb))return!1;var o=e.pb[r],s=Ya(o,n),l;return(l=0<=s)&&Array.prototype.splice.call(o,s,1),l&&(pc(n),e.pb[r].length==0&&(delete e.pb[r],e.ol--)),l}m.ia=function(e){e=e&&e.toString();var n=0,r;for(r in this.pb)if(!e||r==e){for(var o=this.pb[r],s=0;s<o.length;s++)++n,pc(o[s]);delete this.pb[r],this.ol--}return n},m.Jp=function(e,n,r,o){e=this.pb[e.toString()];var s=-1;return e&&(s=rc(e,n,r,o)),-1<s?e[s]:null},m.bq=function(e,n){var r=e!==void 0,o=r?e.toString():"",s=n!==void 0;return Ra(this.pb,function(l){for(var h=0;h<l.length;++h)if(!(r&&l[h].type!=o||s&&l[h].capture!=n))return!0;return!1})};function rc(e,n,r,o){for(var s=0;s<e.length;++s){var l=e[s];if(!l.ji&&l.listener==n&&l.capture==!!r&&l.vm==o)return s}return-1}var tc="closure_listenable_"+(1e6*Math.random()|0);function uc(e){return!(!e||!e[tc])}var vc=function(){if(!wa.addEventListener||!Object.defineProperty)return!1;var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}});try{wa.addEventListener("test",za,n),wa.removeEventListener("test",za,n)}catch{}return e}();function wc(e,n){return e.indexOf(n)!=-1}var xc;t:{var yc=wa.navigator;if(yc){var zc=yc.userAgent;if(zc){xc=zc;break t}}xc=""}function Bc(e){return Bc[" "](e),e}Bc[" "]=za;var Cc=wc(xc,"Gecko")&&!(wc(xc.toLowerCase(),"webkit")&&!wc(xc,"Edge"))&&!(wc(xc,"Trident")||wc(xc,"MSIE"))&&!wc(xc,"Edge"),Dc=wc(xc.toLowerCase(),"webkit")&&!wc(xc,"Edge");function Ec(e){e&&typeof e.l=="function"&&e.l()}function Fc(){Gc!=0&&(Hc[Da(this)]=this),this.jh=this.jh,this.ee=this.ee}var Gc=0,Hc={};Fc.prototype.jh=!1,Fc.prototype.l=function(){if(!this.jh&&(this.jh=!0,this.disposeInternal(),Gc!=0)){var e=Da(this);if(Gc!=0&&this.ee&&0<this.ee.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Hc[e]}},Fc.prototype.bc=function(e,n){this.jh?n!==void 0?e.call(n):e():(this.ee||(this.ee=[]),this.ee.push(n!==void 0?Ia(e,n):e))},Fc.prototype.disposeInternal=function(){if(this.ee)for(;this.ee.length;)this.ee.shift()()};function Ic(e,n){this.type=e,this.currentTarget=this.target=n,this.defaultPrevented=this.yk=!1}Ic.prototype.stopPropagation=function(){this.yk=!0},Ic.prototype.preventDefault=function(){this.defaultPrevented=!0};function Jc(e,n){Ic.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.vj=null,e&&this.Em(e,n)}u(Jc,Ic);var Lc={2:"touch",3:"pen",4:"mouse"};Jc.prototype.Em=function(e,n){var r=this.type=e.type,o=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=n,n=e.relatedTarget){if(Cc){t:{try{Bc(n.nodeName);var s=!0;break t}catch{}s=!1}s||(n=null)}}else r=="mouseover"?n=e.fromElement:r=="mouseout"&&(n=e.toElement);this.relatedTarget=n,o?(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.offsetX=Dc||e.offsetX!==void 0?e.offsetX:e.layerX,this.offsetY=Dc||e.offsetY!==void 0?e.offsetY:e.layerY,this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||(r=="keypress"?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Lc[e.pointerType]||"",this.state=e.state,this.vj=e,e.defaultPrevented&&Jc.g.preventDefault.call(this)},Jc.prototype.stopPropagation=function(){Jc.g.stopPropagation.call(this),this.vj.stopPropagation?this.vj.stopPropagation():this.vj.cancelBubble=!0},Jc.prototype.preventDefault=function(){Jc.g.preventDefault.call(this);var e=this.vj;e.preventDefault?e.preventDefault():e.returnValue=!1};var Mc="closure_lm_"+(1e6*Math.random()|0),Nc={},Oc=0;function Pc(e,n,r,o,s){if(o&&o.once)return Qc(e,n,r,o,s);if(Array.isArray(n)){for(var l=0;l<n.length;l++)Pc(e,n[l],r,o,s);return null}return r=Rc(r),uc(e)?e.pd.add(String(n),r,!1,ya(o)?!!o.capture:!!o,s):Sc(e,n,r,!1,o,s)}function Sc(e,n,r,o,s,l){if(!n)throw Error("Invalid event type");var h=ya(s)?!!s.capture:!!s,p=Tc(e);if(p||(e[Mc]=p=new qc(e)),r=p.add(n,r,o,h,l),r.proxy)return r;if(o=Uc(),r.proxy=o,o.src=e,o.listener=r,e.addEventListener)vc||(s=h),s===void 0&&(s=!1),e.addEventListener(n.toString(),o,s);else if(e.attachEvent)e.attachEvent(Vc(n.toString()),o);else if(e.addListener&&e.removeListener)e.addListener(o);else throw Error("addEventListener and attachEvent are unavailable.");return Oc++,r}function Uc(){function e(r){return n.call(e.src,e.listener,r)}var n=Wc;return e}function Qc(e,n,r,o,s){if(Array.isArray(n)){for(var l=0;l<n.length;l++)Qc(e,n[l],r,o,s);return null}return r=Rc(r),uc(e)?e.pd.add(String(n),r,!0,ya(o)?!!o.capture:!!o,s):Sc(e,n,r,!0,o,s)}function Xc(e,n,r,o,s){if(Array.isArray(n)){for(var l=0;l<n.length;l++)Xc(e,n[l],r,o,s);return null}return o=ya(o)?!!o.capture:!!o,r=Rc(r),uc(e)?e.pd.remove(String(n),r,o,s):e&&(e=Tc(e))&&(n=e.Jp(n,r,o,s))?Yc(n):!1}function Yc(e){if(typeof e=="number"||!e||e.ji)return!1;var n=e.src;if(uc(n))return sc(n.pd,e);var r=e.type,o=e.proxy;return n.removeEventListener?n.removeEventListener(r,o,e.capture):n.detachEvent?n.detachEvent(Vc(r),o):n.addListener&&n.removeListener&&n.removeListener(o),Oc--,(r=Tc(n))?(sc(r,e),r.ol==0&&(r.src=null,n[Mc]=null)):pc(e),!0}function Vc(e){return e in Nc?Nc[e]:Nc[e]="on"+e}function Zc(e,n){var r=e.listener,o=e.vm||e.src;return e.Il&&Yc(e),r.call(o,n)}function Wc(e,n){return e.ji?!0:Zc(e,new Jc(n,this))}function Tc(e){return e=e[Mc],e instanceof qc?e:null}var $c="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rc(e){return typeof e=="function"?e:(e[$c]||(e[$c]=function(n){return e.handleEvent(n)}),e[$c])}function F(){Fc.call(this),this.pd=new qc(this),this.gy=this,this.er=null}u(F,Fc),F.prototype[tc]=!0,m=F.prototype,m.Jb=function(){return this.er},m.ea=function(e){this.er=e},m.addEventListener=function(e,n,r,o){Pc(this,e,n,r,o)},m.removeEventListener=function(e,n,r,o){Xc(this,e,n,r,o)},m.dispatchEvent=function(e){var n,r=this.Jb();if(r)for(n=[];r;r=r.Jb())n.push(r);r=this.gy;var o=e.type||e;if(typeof e=="string")e=new Ic(e,r);else if(e instanceof Ic)e.target=e.target||r;else{var s=e;e=new Ic(o,r),Wa(e,s)}if(s=!0,n)for(var l=n.length-1;!e.yk&&0<=l;l--){var h=e.currentTarget=n[l];s=h.Kf(o,!0,e)&&s}if(e.yk||(h=e.currentTarget=r,s=h.Kf(o,!0,e)&&s,e.yk||(s=h.Kf(o,!1,e)&&s)),n)for(l=0;!e.yk&&l<n.length;l++)h=e.currentTarget=n[l],s=h.Kf(o,!1,e)&&s;return s},m.disposeInternal=function(){F.g.disposeInternal.call(this),this.pd&&this.pd.ia(void 0),this.er=null},m.Kf=function(e,n,r){if(e=this.pd.pb[String(e)],!e)return!0;e=e.concat();for(var o=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ji&&l.capture==n){var h=l.listener,p=l.vm||l.src;l.Il&&sc(this.pd,l),o=h.call(p,r)!==!1&&o}}return o&&!r.defaultPrevented},m.Jp=function(e,n,r,o){return this.pd.Jp(String(e),n,r,o)},m.bq=function(e,n){return this.pd.bq(e!==void 0?String(e):void 0,n)},t("H.util.EventTarget",F),F.prototype.ea=F.prototype.ea,F.prototype.setParentEventTarget=F.prototype.ea,F.prototype.Jb=F.prototype.Jb,F.prototype.getParentEventTarget=F.prototype.Jb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.l=F.prototype.l,F.prototype.dispose=F.prototype.l,F.prototype.bc=F.prototype.bc,F.prototype.addOnDisposeCallback=F.prototype.bc,F.prototype.fz=F.prototype.Kf,F.prototype.Kf=function(e,n,r){var o,s,l=!0,h=r[r.currentTarget===r.target?"AT_TARGET":n?"CAPTURING_PHASE":(o=!0,"BUBBLING_PHASE")];return(!o||(s=r.type)!=="pointerenter"&&s!=="pointerleave")&&(r.eventPhase=h,l=F.prototype.fz.apply(this,arguments),o&&this.Jb&&this.Jb()===null&&delete r.eventPhase),l},F.prototype.Ww=function(e){for(var n,r=this;r&&(n=r.Jb())&&n!==e;)r=n;n||r.ea(e)},F.prototype.setRootParentEventTarget=F.prototype.Ww,t("H.util.Event",Ic),Ic.prototype.stopPropagation=Ic.prototype.stopPropagation,Ic.prototype.stopPropagation=Ic.prototype.stopPropagation,Ic.prototype.CAPTURING_PHASE=1,Ic.prototype.CAPTURING_PHASE=Ic.prototype.CAPTURING_PHASE,Ic.prototype.AT_TARGET=2,Ic.prototype.AT_TARGET=Ic.prototype.AT_TARGET,Ic.prototype.BUBBLING_PHASE=3,Ic.prototype.BUBBLING_PHASE=Ic.prototype.BUBBLING_PHASE,Ic.prototype.eventPhase=0,Ic.prototype.eventPhase=Ic.prototype.eventPhase;function ad(e){e=e||{};var n=e.callback;this.Wb=e.label,db(n)&&(this.callback=n),this.ub=!!e.disabled,ad.g.constructor.call(this)}u(ad,F),t("H.util.ContextItem",ad),ad.prototype.Gp=function(){return this.Wb},ad.prototype.getLabel=ad.prototype.Gp,ad.prototype.we=function(e){return this.Wb!==e&&(this.Wb=e,this.dispatchEvent("update")),this},ad.prototype.setLabel=ad.prototype.we,ad.prototype.mq=function(){return this.ub},ad.prototype.isDisabled=ad.prototype.mq,ad.prototype.va=function(e){return e!==this.ub&&(this.ub=e,this.dispatchEvent("update")),this},ad.prototype.setDisabled=ad.prototype.va;var bd=new ad;ad.SEPARATOR=bd;function cd(e,n,r){cd.g.constructor.call(this,e,r),this.message=n}u(cd,Ic),t("H.util.ErrorEvent",cd);function dd(e,n,r){dd.g.constructor.call(this,e,r),this.data=n}u(dd,Ic),t("H.util.DataEvent",dd);function ed(){}t("H.util.ICancelable",ed),ed.prototype.cancel=function(){},ed.prototype.cancel=ed.prototype.cancel;function fd(e,n){this.oB=100,this.Iy=e,this.zg=n,this.an=0,this.zm=null}fd.prototype.get=function(){if(0<this.an){this.an--;var e=this.zm;this.zm=e.next,e.next=null}else e=this.Iy();return e},fd.prototype.put=function(e){this.zg(e),this.an<this.oB&&(this.an++,e.next=this.zm,this.zm=e)};function gd(e){wa.setTimeout(function(){throw e},0)}function hd(){var e=document,n="IFRAME";return e.contentType==="application/xhtml+xml"&&(n=n.toLowerCase()),e.createElement(n)}var id;function jd(){var e=wa.MessageChannel;if(typeof e>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!wc(xc,"Presto")&&(e=function(){var s=hd();s.style.display="none",document.documentElement.appendChild(s);var l=s.contentWindow;s=l.document,s.open(),s.close();var h="callImmediate"+Math.random(),p=l.location.protocol=="file:"?"*":l.location.protocol+"//"+l.location.host;s=Ia(function(d){(p=="*"||d.origin==p)&&d.data==h&&this.port1.onmessage()},this),l.addEventListener("message",s,!1),this.port1={},this.port2={postMessage:function(){l.postMessage(h,p)}}}),typeof e<"u"&&!wc(xc,"Trident")&&!wc(xc,"MSIE")){var n=new e,r={},o=r;return n.port1.onmessage=function(){if(r.next!==void 0){r=r.next;var s=r.lt;r.lt=null,s()}},function(s){o.next={lt:s},o=o.next,n.port2.postMessage(0)}}return function(s){wa.setTimeout(s,0)}}function kd(){this.no=this.Hi=null}kd.prototype.add=function(e,n){var r=ld.get();r.set(e,n),this.no?this.no.next=r:this.Hi=r,this.no=r},kd.prototype.remove=function(){var e=null;return this.Hi&&(e=this.Hi,this.Hi=this.Hi.next,this.Hi||(this.no=null),e.next=null),e};var ld=new fd(function(){return new md},function(e){return e.reset()});function md(){this.next=this.scope=this.tp=null}md.prototype.set=function(e,n){this.tp=e,this.scope=n,this.next=null},md.prototype.reset=function(){this.next=this.scope=this.tp=null};function nd(e,n){od||pd(),qd||(od(),qd=!0),rd.add(e,n)}var od;function pd(){if(wa.Promise&&wa.Promise.resolve){var e=wa.Promise.resolve(void 0);od=function(){e.then(sd)}}else od=function(){var n=sd;typeof wa.setImmediate!="function"||wa.Window&&wa.Window.prototype&&!wc(xc,"Edge")&&wa.Window.prototype.setImmediate==wa.setImmediate?(id||(id=jd()),id(n)):wa.setImmediate(n)}}var qd=!1,rd=new kd;function sd(){for(var e;e=rd.remove();){try{e.tp.call(e.scope)}catch(n){gd(n)}ld.put(e)}qd=!1}function td(e){if(this.o=ud,this.qf=void 0,this.Yg=this.Ke=this.og=null,this.tm=this.op=!1,e!=za)try{var n=this;e.call(void 0,function(r){vd(n,wd,r)},function(r){vd(n,xd,r)})}catch(r){vd(this,xd,r)}}var ud=0,wd=2,xd=3;function yd(){this.next=this.context=this.Uh=this.nk=this.Ef=null,this.Cl=!1}yd.prototype.reset=function(){this.context=this.Uh=this.nk=this.Ef=null,this.Cl=!1};var zd=new fd(function(){return new yd},function(e){e.reset()});function Ad(e,n,r){var o=zd.get();return o.nk=e,o.Uh=n,o.context=r,o}function Bd(e){if(e instanceof td)return e;var n=new td(za);return vd(n,wd,e),n}function Cd(e){return new td(function(n,r){r(e)})}function Dd(){var e,n,r=new td(function(o,s){e=o,n=s});return new Ed(r,e,n)}td.prototype.then=function(e,n,r){return Fd(this,typeof e=="function"?e:null,typeof n=="function"?n:null,r)},td.prototype.$goog_Thenable=!0,td.prototype.cancel=function(e){if(this.o==ud){var n=new Gd(e);nd(function(){Hd(this,n)},this)}};function Hd(e,n){if(e.o==ud)if(e.og){var r=e.og;if(r.Ke){for(var o=0,s=null,l=null,h=r.Ke;h&&(h.Cl||(o++,h.Ef==e&&(s=h),!(s&&1<o)));h=h.next)s||(l=h);s&&(r.o==ud&&o==1?Hd(r,n):(l?(o=l,o.next==r.Yg&&(r.Yg=o),o.next=o.next.next):Id(r),Jd(r,s,xd,n)))}e.og=null}else vd(e,xd,n)}function Kd(e,n){e.Ke||e.o!=wd&&e.o!=xd||Ld(e),e.Yg?e.Yg.next=n:e.Ke=n,e.Yg=n}function Fd(e,n,r,o){var s=Ad(null,null,null);return s.Ef=new td(function(l,h){s.nk=n?function(p){try{var d=n.call(o,p);l(d)}catch(g){h(g)}}:l,s.Uh=r?function(p){try{var d=r.call(o,p);d===void 0&&p instanceof Gd?h(p):l(d)}catch(g){h(g)}}:h}),s.Ef.og=e,Kd(e,s),s.Ef}td.prototype.CD=function(e){this.o=ud,vd(this,wd,e)},td.prototype.DD=function(e){this.o=ud,vd(this,xd,e)};function vd(e,n,r){if(e.o==ud){e===r&&(n=xd,r=new TypeError("Promise cannot resolve to itself")),e.o=1;t:{var o=r,s=e.CD,l=e.DD;if(o instanceof td){Kd(o,Ad(s||za,l||null,e));var h=!0}else{if(o)try{var p=!!o.$goog_Thenable}catch{p=!1}else p=!1;if(p)o.then(s,l,e),h=!0;else{if(ya(o))try{var d=o.then;if(typeof d=="function"){Md(o,d,s,l,e),h=!0;break t}}catch(g){l.call(e,g),h=!0;break t}h=!1}}}h||(e.qf=r,e.o=n,e.og=null,Ld(e),n!=xd||r instanceof Gd||Nd(e,r))}}function Md(e,n,r,o,s){function l(d){p||(p=!0,o.call(s,d))}function h(d){p||(p=!0,r.call(s,d))}var p=!1;try{n.call(e,h,l)}catch(d){l(d)}}function Ld(e){e.op||(e.op=!0,nd(e.bz,e))}function Id(e){var n=null;return e.Ke&&(n=e.Ke,e.Ke=n.next,n.next=null),e.Ke||(e.Yg=null),n}td.prototype.bz=function(){for(var e;e=Id(this);)Jd(this,e,this.o,this.qf);this.op=!1};function Jd(e,n,r,o){if(r==xd&&n.Uh&&!n.Cl)for(;e&&e.tm;e=e.og)e.tm=!1;if(n.Ef)n.Ef.og=null,Od(n,r,o);else try{n.Cl?n.nk.call(n.context):Od(n,r,o)}catch(s){Pd.call(null,s)}zd.put(n)}function Od(e,n,r){n==wd?e.nk.call(e.context,r):e.Uh&&e.Uh.call(e.context,r)}function Nd(e,n){e.tm=!0,nd(function(){e.tm&&Pd.call(null,n)})}var Pd=gd;function Gd(e){Xa.call(this,e)}u(Gd,Xa),Gd.prototype.name="cancel";function Ed(e,n,r){this.promise=e,this.resolve=n,this.reject=r}function Qd(e,n,r){this.type=e,this.data=n,this.Er=Dd(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=Rd,r!==B&&(this.priority=r),this.Fp().add(this)}var Rd=1,Sd={MD:0,PD:Rd,KD:2};m=Qd.prototype,m.then=function(e,n,r){return this.Er.promise.then(e,n,r)},m.resolve=function(e){this.state=3,this.Er.resolve(e)},m.reject=function(e){this.state=5,this.Er.reject(e)},m.state=0,m.cancel=function(){3>this.state&&(this.Xi(),this.Fp().remove(this),this.state=4)},Qd.prototype.cancel=Qd.prototype.cancel;function Td(e){var n;this.tg={};for(n in Sd)this.tg[Sd[n]]=[];this.Ik=e,this.Ik.addEventListener("allocatable",A(this.St,this))}t("H.util.JobManager",Td);var Ud=Object.keys(Sd).map(function(e){return Sd[e]}).sort().reverse();Td.prototype.add=function(e){C(e,Qd,this.add,0),this.tg[e.priority].push(e),this.St()},Td.prototype.contains=function(e){return-1<this.tg[e.priority].indexOf(e)},Td.prototype.remove=function(e){var n=e.priority,r=this.tg[n].indexOf(e);return-1<r?(this.tg[n].splice(r,1),!0):(e.Ds&&this.Ik.$l(e.Ds),!1)},Td.prototype.St=function(){Ud.forEach(function(e){this.tg[e]=this.tg[e].filter(function(n){var r;if((r=this.Ik.Eo(n))!==z){var o=A(this.Ik.$l,this.Ik,r,n);n.Ds=r,n.then(o,o),n.state=n.Rt(r)?1:5}else return!0},this)},this)};function Vd(e,n,r){var o=[],s=arguments.length;return e&&o.push(hb(e)),1<s&&(s=2<s&&kb(r)?" out of ["+r[0]+"..."+r[1]+"]":"",o.push("("+n+s+")")),o=Error(o.join(" ")),Object.setPrototypeOf(o,Vd.prototype),o}u(Vd,Error),t("H.lang.OutOfRangeError",Vd),Vd.prototype.name="OutOfRangeError";function Wd(e){if(x.document){var n=document.createElement("canvas");return n.width=n.height=1,n.getContext("2d",{XD:e})}return null}function Xd(){return window.devicePixelRatio||1}t("H.util.getPixelRatio",Xd);var Yd=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function Zd(e){var n=$d[e],r=x.RegExp;return n||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(o){return o instanceof Number?Array(o):o.map(function(s){return fc(Fb(s),0,255)})}),e==="none"?n=new Uint8ClampedArray([0,0,0,0]):(ae.fillStyle="black",ae.fillStyle=e,Yd.test(ae.fillStyle)?n=new Uint8ClampedArray([r.$1,r.$2,r.$3,255*r.$4]):(ae.clearRect(0,0,1,1),ae.fillRect(0,0,1,1),n=ae.getImageData(0,0,1,1).data)),$d[e]=n),n}function be(e){return e!=="none"&&0<Zd(e)[3]}var $d=Za(),ce=!!x.VBArray;t("H.util.eval",function(a){return eval(a)});function de(e,n){return e!==B?e:n}function ee(e){return/^<svg/.test(e)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e):e}t("H.util.provide",function(e){var n=wa.$jscomp;if(n&&(typeof n.Az=="function"&&n.Az()))throw Error("goog.provide cannot be used within a module.");xa(e,void 0,void 0)});function fe(e){this.zd=0<+e?Cb.round(e):0}fe.prototype.next=function(e){if(this.zd===9007199254740992)throw new Vd(e,this.zd,[0,9007199254740991]);return this.zd++};var ge=new fe,he=A(ge.next,ge);function ie(){return!0}function je(){return!1}function ke(){}var le=ab([]),me=ab({});function ne(e){return e.tagName==="CANVAS"?[e]:e.getElementsByTagName("CANVAS")}function oe(e,n,r){var o;if(n=e.ownerDocument===n?e.cloneNode(!0):n.importNode(e,!0),r)for(e=ne(e),r=ne(n),o=r.length;o--;)r[o].getContext("2d").drawImage(e[o],0,0);return n}var ae=Wd(!0),pe=Wd(!1);function qe(e){var n=e.complete,r=0<e.naturalWidth;if(n&&!r&&ce)try{pe.drawImage(e,0,0),r=!0}catch{}return n&&r}var re=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function se(e,n){if(n=n||"",re){var r=new re;r.append(e),e=r.getBlob(n)}else e=new Blob([e],{type:n});return e}var te=x.navigator;Ma=/Edge\/\d+/.test(te.appVersion),Na=/(A|a)ndroid/.test(te.appVersion);function ue(e,n,r){var o=fc(+e,-90,90);if(n&&E(o))throw new D(n,r,e);return o}function ve(e,n,r){var o=+e;if((-180>o||180<o)&&(o=dc(o+180,360)-180),n&&E(o))throw new D(n,r,e);return o}function we(e,n,r){var o;if(e!==B&&E(o=+e)&&n)throw new D(n,r,e);return o}function xe(e,n){return 0>e!=0>n&&180<Ib(n-e)}t("H.geo.isDBC",xe);function ye(){gb(this,ye)}t("H.geo.AbstractGeometry",ye),ye.prototype.getBoundingBox=ye.prototype.C,ye.prototype.equals=ye.prototype.da,ye.prototype.ac="",ye.prototype.Hc="",ye.prototype.toString=function(){return this.xf([this.ac.toUpperCase()," "]).join("")},ye.prototype.toString=ye.prototype.toString,ye.prototype.ye=function(){return{type:this.Hc,coordinates:this.wf()}},ye.prototype.toGeoJSON=ye.prototype.ye,ye.prototype.P=function(){return{type:this.ac,coordinates:this.Qd(),boundingBox:this.C().P()}},ye.prototype.forWorkerMessage=ye.prototype.P;function ze(e,n,r){this.lat=ue(e,ze,0),this.lng=ve(n,ze,1),r!==B&&(this.alt=we(r,ze,2))}u(ze,ye),t("H.geo.Point",ze),ze.prototype.da=function(e){return this===e||!!e&&this.lat===e.lat&&this.lng===e.lng&&(this.alt||0)===(e.alt||0)},ze.prototype.equals=ze.prototype.da,ze.prototype.kb=function(e){if(this===e||this.lat===e.lat&&this.lng===e.lng)e=0;else{var n=this.lat*Zb,r=e.lat*Zb;e=1274200158e-2*Ob(Db(1,Kb(Lb(Nb((n-r)/2),2)+Pb(n)*Pb(r)*Lb(Nb((this.lng*Zb-e.lng*Zb)/2),2))))}return e},ze.prototype.distance=ze.prototype.kb,ze.prototype.mo=function(e,n,r){var o;if(r){if(o=n/637100079e-2){n=e*Zb,e=Zb*this.lat;var s=Nb(e);r=Nb(o);var l=Pb(o);o=Zb*this.lng;var h=Pb(e);e=Ob(h*Pb(n)*r+s*l),n=Sb(Nb(n)*h*r,l-s*Nb(e)),n=(o+n+Ub)%(2*Ub)-Ub,n*=$b,s=new ze(e*$b,(n+540)%360-180)}return s||this}return e=(e%360+360)%360,(e+90)%180===0?(e=this.lng+n/(637100079e-2*Xb*Pb(this.lat*Zb))*(e===270?-360:360),new ze(this.lat,(e+540)%360-180)):((n/=637100079e-2)&&(e*=Zb,s=this.lat*Zb,r=this.lng*Zb,o=s+n*Pb(e),l=o-s,h=Jb(Qb(o/2+Wb)/Qb(s/2+Wb)),h=E(l/h)?Pb(s):l/h,e=n*Nb(e)/h,Ib(o)>Vb&&(o=0<o?Ub-o:-(Ub+o)),o=new ze(o*$b,((r+e+Yb+(Ib(s+l)>Vb?Ub:0))%Xb-Ub)*$b)),o||this)},ze.prototype.walk=ze.prototype.mo,ze.prototype.C=function(){return new J(this.lat,this.lng,this.lat,this.lng)},ze.prototype.getBoundingBox=ze.prototype.C;function Ae(e,n,r){var o=ya(e)&&!(E(e.lat=ue(e.lat))||E(e.lng=ve(e.lng))||e.alt!==B&&E(e.alt=we(e.alt)));if(!o&&n)throw new D(n,r,e);return o}ze.validate=Ae;function Be(e){if(!e)throw new D(Be,0,e);return new ze(e.lat,e.lng,e.alt)}ze.fromIPoint=Be,m=ze.prototype,m.ac="Point",m.xf=function(e){return e.push("(",this.lng," ",this.lat,")"),e},m.Hc="Point",m.wf=function(){return[this.lng,this.lat,this.alt||0]},m.Qd=function(){return[this.lat,this.lng,this.alt||0]};function J(e,n,r,o){Ce(this,ue(e,J,0),ve(n,J,1),ue(r,J,2),ve(o,J,3))}u(J,ye),t("H.geo.Rect",J),J.prototype.ac="Polygon",J.prototype.xf=function(e){var n=this.fa,r=this.W,o=this.ga,s=this.ca;return e.push("(","(",r," ",n,",",s," ",n,",",s," ",o,",",r," ",o,",",r," ",n,")",")"),e},J.prototype.da=function(e){var n=this===e;return!n&&C(e,J)&&(n=this.fa===e.fa&&this.W===e.W&&this.ga===e.ga&&this.ca===e.ca),n},J.prototype.equals=J.prototype.da,J.prototype.clone=function(){return new J(this.fa,this.W,this.ga,this.ca)},J.prototype.clone=J.prototype.clone;function Ce(e,n,r,o,s){return e.W=r,e.ca=s,n<o&&(r=n,n=o,o=r),e.fa=n,e.ga=o,e.ll=e.Si=e.Df=null,e}J.prototype.Lc=function(){return this.ll||(this.ll=new ze(this.fa,this.W)),this.ll},J.prototype.getTopLeft=J.prototype.Lc,J.prototype.Jc=function(){return this.Si||(this.Si=new ze(this.ga,this.ca)),this.Si},J.prototype.getBottomRight=J.prototype.Jc,J.prototype.HA=function(){return this.fa},J.prototype.getTop=J.prototype.HA,J.prototype.uz=function(){return this.ga},J.prototype.getBottom=J.prototype.uz,J.prototype.bA=function(){return this.W},J.prototype.getLeft=J.prototype.bA,J.prototype.xA=function(){return this.ca},J.prototype.getRight=J.prototype.xA,J.prototype.wb=function(){return this.Df||(this.Df=new ze(this.ga+(this.fa-this.ga)/2,De(this.W,this.oc()))),this.Df},J.prototype.getCenter=J.prototype.wb,J.prototype.oc=function(){return Ee(this.W,this.ca)},J.prototype.getWidth=J.prototype.oc,J.prototype.yh=function(){return this.fa-this.ga},J.prototype.getHeight=J.prototype.yh,J.prototype.pc=function(){return this.W>this.ca},J.prototype.isCDB=J.prototype.pc,J.prototype.Im=function(){return!this.oc()&&!this.yh()},J.prototype.isEmpty=J.prototype.Im,J.prototype.C=function(){return new J(this.fa,this.W,this.ga,this.ca)},J.prototype.getBoundingBox=J.prototype.C,J.prototype.Pl=function(e,n,r){var o=this.wb();return r||(e=ue(e,this.Pl,0),n=ve(n,this.Pl,1)),n=this.cf(e,n,r),e=n.wb(),e.lat===o.lat&&e.lng===o.lng&&this.yh()===n.yh()&&this.oc()===n.oc()},J.prototype.containsLatLng=J.prototype.Pl,J.prototype.Ff=function(e,n){return n||Ae(e,this.Ff,0),this.Pl(e.lat,e.lng,n)},J.prototype.containsPoint=J.prototype.Ff,J.prototype.Vo=function(e,n){var r=this.wb();if(!n&&!C(e,J))throw new D(this.Vo,0,e);return n=this.yd(e,n),e=n.wb(),e.lat===r.lat&&e.lng===r.lng&&this.yh()===n.yh()&&this.oc()===n.oc()},J.prototype.containsRect=J.prototype.Vo,J.prototype.cf=function(e,n,r,o){if(!r){if(E(e=ue(e)))throw new D(this.cf,0,e);if(E(n=ve(n)))throw new D(this.cf,1,n)}return Fe(this.fa,this.W,this.ga,this.ca,e,n,e,n,o)},J.prototype.mergeLatLng=J.prototype.cf,J.prototype.xv=function(e,n,r){return n||Ae(e,this.xv,0),this.cf(e.lat,e.lng,n,r)},J.prototype.mergePoint=J.prototype.xv,J.prototype.yd=function(e,n,r){if(!n&&!C(e,J))throw new D(this.yd,0,e);return Fe(this.fa,this.W,this.ga,this.ca,e.fa,e.W,e.ga,e.ca,r)},J.prototype.mergeRect=J.prototype.yd,J.prototype.ce=function(e,n,r,o,s,l){return s||(e=ue(e,this.ce,0),n=ve(n,this.ce,1),r=ue(r,this.ce,2),o=ve(o,this.ce,3)),Fe(this.fa,this.W,this.ga,this.ca,e,n,r,o,l)},J.prototype.mergeTopLeftBottomRight=J.prototype.ce,J.prototype.Vf=function(e,n){var r=this.W<=this.ca,o=e.W<=e.ca,s=this.W<e.ca,l=e.W<this.ca;if(!n&&!C(e,J))throw new D(this.Vf,0,e);return this.ga<=e.fa&&e.ga<=this.fa&&(!r&&(!o||s||l)||!o&&(s||l)||s&&l)},J.prototype.intersects=J.prototype.Vf;function Ee(e,n){return e=n-e,e+(0>e?360:0)}function De(e,n){return e+=n/2,e-(180<e?360:0)}function Fe(e,n,r,o,s,l,h,p,d){r=Db(r,h),e=Eb(e,s),s=Ee(n,o);var g=De(n,s);h=Ee(l,p);var y=De(l,h)-g;if(y+=0>y-1e-6?360:0,180>y-1e-6){g=n;var v=p}else y=360-y,g=l,v=o;return y=y+s/2+h/2,360<=y+5e-7?(g=-180,v=180):y-5e-7<s?(g=n,v=o):y-5e-7<h&&(g=l,v=p),d?Ce(d,e,g,r,v):new J(e,g,r,v)}J.merge=Fe;function Ge(e,n,r){return r||(Ae(e,Ge,0),Ae(n,Ge,1)),new J(e.lat,e.lng,n.lat,n.lng)}J.fromPoints=Ge;function He(e,n){var r=1,o=e.length,s=null;if(!Ba(e))throw new D(He,0,e);if(0<o){var l=e[0];for(s=Ge(l,l,n);r<o;r++)l=e[r],s.cf(l.lat,l.lng,n,s)}return s}J.coverPoints=He;function Ie(e,n){var r=3,o=e.length,s;if(!(n||e&&e.length!=null))throw new D(Ie,0,e);if(0<o)for(s=new J(e[0],e[1],e[0],e[1]);r<o;r+=3)s.cf(e[r],e[r+1],n,s);return s}J.coverLatLngAlts=Ie;function Je(e,n){var r=1,o=e.length,s;if(n&&(!e||e.length==null))throw new D(Je,0,e);if(0<o)for(s=new J(e[0].fa,e[0].W,e[0].ga,e[0].ca);r<o;r++)s.yd(e[r],n,s);return s}J.coverRects=Je,J.prototype.Hw=function(e,n){var r=this.W,o=this.fa,s=this.ca,l=this.ga,h=this.wb().lng;Ae(e,this.Hw,0);var p=e.lat-l-(o-l)/2,d=e.lng-h;return d=180<d||-180>d?-(h+e.lng):d,e=r+(0>d?2*d:0),e=-180>e?360+e:e,s+=0<d?2*d:0,s=180<s?s-360:s,o=0<p?o+2*p:o,90<=o&&(o=90),l=0>p?l+2*p:l,-90>=l&&(l=-90),n?Ce(n,o,e,l,s):new J(o,e,l,s)},J.prototype.resizeToCenter=J.prototype.Hw,J.prototype.Hc="Polygon",J.prototype.wf=function(){return[[this.W,this.fa,0],[this.ca,this.fa,0],[this.ca,this.ga,0],[this.W,this.ga,0],[this.W,this.fa,0]]},J.prototype.P=function(){return this.Qd()},J.prototype.Qd=function(){return[this.fa,this.W,this.ga,this.ca]};function Ke(e,n,r,o,s,l){gb(this,Ke),this.Qh=e||10,this.yj=null,this.Zi=o||0,this.$i=s||0,this.Bk=n||1,this.Ck=r||1,this.Kx=!!l,this.flush()}function Le(e){var n=e.yj;if(e.Kx&&!n){var r=e.head;(r.entries||r[0]||r[1]||r[2]||r[3])&&(n=[r],n=Me([n,n,n,n],[r[6],r[7],r[4],r[5]]),e.yj=n)}return n}function Me(e,n){var r,o,s,l,h=0;for(r=3;0<=r;r--){var p=r+4,d=0<r%3,g=[],y=n[r],v=e[r];for(o=v.length;o--;){var _=v[o];if(s=_.entries)for(l=s.length;l--;){var w=s[l].Nf(r);(d?w>y:w<y)&&(y=w)}for(l=4;l--;)(s=_[l])&&(d?s[p]>y:s[p]<y)&&g.push(s)}h+=g.length,n[r]=y,e[r]=g}return h&&(n=Me(e,n)),n}function Ne(e,n,r){var o,s;if(e.Kx&&(o=e.yj))for(s=3;0<=s;s--){var l=n.Nf(s);if(s%3?l>=o[s]:l<=o[s])if(r)o[s]=l;else{e.yj=null;break}}}m=Ke.prototype,m.remove=function(e){var n,r,o,s=!1;return e&&(n=e.node)&&n.nl===this&&(r=n.entries)&&0<=(o=r.indexOf(e))&&(r.splice(o,1),this.Ll(n),Ne(this,e,!1),s=!0),s},m.flush=function(){var e=new Oe(B,NaN,this.Zi-this.Bk,this.$i-this.Ck,this.Zi+this.Bk,this.$i+this.Ck);e.nl=this,this.head=this.root=e,this.yj=null},m.jd=function(e){var n=this.head,r;if(e){var o=e;if(o!==n)for(n=o;o=o.parent;)(o.entries||1<o.hb)&&(n=o)}else for(;!n.entries&&2>(r=n.hb)&&r;)n=o;this.head=n},m.ob=function(e,n,r,o,s,l){var h=[],p=this.head,d=this.root;return e<=p[5]&&n<=p[6]&&(s?r>=p[7]:r>p[7])&&(l?o>=p[4]:o>p[4])&&Pe(this,p,h,e,n,r,o,l||o>=d[6],s||r>=d[5]),h};function Pe(e,n,r,o,s,l,h,p,d){var g=n.entries,y=n[7],v=n[4],_=n[5],w=n[6],I=n[8],G=n[9],_t;if(g){var _r=g.length;if(s>v||o>y||h<w||l<_)for(;_r--;){y=g[_r],v=y.Nf(3),_=y.Nf(0),w=y.Nf(1);var _o=y.Nf(2);_o>=s&&w>=o&&(_<h||p&&_==h)&&(v<l||d&&v==l)&&r.push(y)}else for(;_r--;)r.push(g[_r])}(l>I||d&&l==I)&&(s<G&&(_t=n[1])&&Pe(e,_t,r,o,s,l,h,p,d),(h>G||p&&h==G)&&(_t=n[3])&&Pe(e,_t,r,o,s,l,h,p,d)),o<I&&(s<G&&(_t=n[0])&&Pe(e,_t,r,o,s,l,h,p,d),(h>G||p&&h==G)&&(_t=n[2])&&Pe(e,_t,r,o,s,l,h,p,d))}m.ze=ca(1);var Qe=0;function Oe(e,n,r,o,s,l){this.Co=n,e&&(this.parent=e,this.nl=e.nl,n&1?(r=e[8],s=e[5]):(r=e[7],s=e[8]),n&2?(o=e[9],l=e[6]):(o=e[4],l=e[9])),this[7]=r,this[5]=s,this[8]=(r+s)/2,this[4]=o,this[6]=l,this[9]=(o+l)/2}m=Oe.prototype,m.hb=0,m.th=function(e){return this[e]||(++this.hb,this[e]=new Oe(this,e))},m.removeChild=function(e){var n=e.Co;this[n]===e&&(delete this[n],delete e.parent,--this.hb)},m.ze=ca(0),m.Qg=function(e){(this.entries||(this.entries=[])).push(e),e.node=this};function Re(e,n,r,o,s){var l=e[5],h=e[6];return e[7]<=n&&e[4]<=r&&(l>o||l===o&&l===e.nl.root[5])&&(h>s||h===s&&h===e.nl.root[6])}function Se(e,n,r,o,s,l){Se.g.constructor.apply(this,arguments)}u(Se,Ke),Se.prototype.Ll=function(e){for(var n,r,o=this.head;e;){if((!(n=e.entries)||!n.length)&&(n&&delete e.entries,!e.hb&&(r=e.parent))){r.removeChild(e),o===e&&(o=r),e=r;continue}break}this.head!==o&&(this.head=o,this.jd())};function Te(e,n,r,o,s){if(Re(e.root,n,r,o,s))return e.Vb(e.root,n,r,o,s,e.Qh);throw Error("Coordinates out of bounds")}Se.prototype.Nu=function(e,n,r,o){if(e>r){var s=e;e=r,r=s}return n>o&&(s=n,n=o,o=s),Te(this,e,n,r,o)},Se.prototype.Yd=function(e,n){return Te(this,e,n,e,n)},Se.prototype.Vb=function(e,n,r,o,s,l){var h=e[8],p=e[9],d=0,g=0;return l&&(o<h||(d=+(n>=h)))&&(s<p||(g=+(r>=p)))?n=this.Vb(e.th(d|g<<1),n,r,o,s,l-1):(e.Qg(n=new Ue(n,r,o,s)),Ne(this,n,!0),this.jd(e)),n};function Ue(e,n,r,o){this.id=Qe++,this[0]=n,this[1]=r,this[2]=o,this[3]=e}Ue.prototype.Nf=function(e){return this[e]};function Ve(e){this.Ae=new Se(+e||10,180,90,0,0,!0),this.Kl=[],this.kq=!1,this.Cf=this.Mg=this.I=null}t("H.geo.QuadTree",Ve),m=Ve.prototype,m.jc=0,m.pc=function(){return this.kq},m.C=function(){var e,n;if(!this.I){var r=[];!this.Mg&&(e=Le(this.Ae))&&(this.Mg=new J(-e[0],e[3],-e[2],e[1])),(n=this.Mg)&&r.push(n);var o,s,l;if(!this.Cf&&(l=(s=this.Kl).length)){e=90;var h=360,p=-90;for(o=0;l--;){var d=s[l];e=Db(e,d[0]),h=Db(h,d[3]),p=Eb(p,d[2]),o=Eb(o,d[1])}this.Cf=new J(-e,h,-p,o-360)}(n=this.Cf)&&r.push(n),(n=r[0])&&(r[1]&&(n=n.yd(r[1],!0)),this.I=n)}return this.I},m.Vb=function(e,n,r,o,s){return s?(s=new Ue(o,-e,n+360,-r),this.Kl.push(s),this.kq=!0,this.Cf&&this.Cf.ce(e,n,r,o,!0,this.Cf)):(s=Te(this.Ae,n,-e,o,-r),this.Mg&&this.Mg.ce(e,n,r,o,!0,this.Mg)),++this.jc,this.I=null,s},m.Yd=function(e){var n=e.lng;return e=e.lat,this.Vb(e,n,e,n,!1)},m.Lu=function(e){var n=e.Lc(),r=e.Jc();return(e=e.pc())?this.Vb(n.lat,r.lng,r.lat,n.lng,e):this.Vb(n.lat,n.lng,r.lat,r.lng,e)},Ve.prototype.insertBoundingBox=Ve.prototype.Lu,Ve.prototype.Nu=function(e,n,r,o){if(n<o)var s=n;else s=o,o=n;return e<r?n=r:(n=e,e=r),this.Vb(n,s,e,o,180<o-s)},Ve.prototype.remove=function(e){var n;if(e.node){var r=this.Ae.remove(e);this.Mg=null}else e=(n=this.Kl).indexOf(e),(r=0<=e)&&(n.splice(e,1),this.kq=0<n.length,this.Cf=null);return r&&(--this.jc,this.I=null),r},Ve.prototype.remove=Ve.prototype.remove;function We(e,n,r,o,s,l,h){e=e.Kl;var p=e.length,d=[],g;if(p){var y=r+360;for(g=s+360;p--;){var v=e[p];(Xe(v,n,r,o,s,l,h)||Xe(v,n,y,o,g,l,h))&&d.push(v)}}return d}function Xe(e,n,r,o,s,l,h){var p=e[3],d=e[0],g=e[1];return e=e[2],(l?d<=o:d<o)&&(h?p<=s:p<s)&&e>=n&&g>=r}function Ye(e,n){var r,o,s;if(r=n.length){var l=e.length;for(o={};l--;)o[e[l].id]=1;for(;r--;)(s=n[r]).id in o||e.push(s)}}Ve.prototype.Fm=function(e,n,r){var o=this.Ae,s=e.Lc(),l=e.Jc(),h=-s.lat;s=s.lng;var p=-l.lat;return l=l.lng,!n&&h===p||!r&&s===l?e=[]:e.pc()?(e=o.ob(-180,h,l,p,r,n),Ye(e,o.ob(s,h,180,p,!1,n)),Ye(e,We(this,h,l,p,s+360,n,r))):(e=o.ob(s,h,l,p,r,n),Ye(e,We(this,h,s,p,l,n,r))),e},Ve.prototype.intersectBoundingBox=Ve.prototype.Fm;var Ze=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],$e=typeof BigInt<"u"?BigInt:Number;function af(e){var n=$e(0),r=$e(0),o=[];if(e.split("").forEach(function(s){s=$e(Ze[s.charCodeAt(0)-45]),n|=(s&$e(31))<<r,(s&$e(32))===$e(0)?(o.push(n),n=$e(0),r=$e(0)):r+=$e(5)}),0<r)throw Error("Invalid encoding");return o}function bf(e){return e&$e(1)&&(e=~e),e>>=$e(1),+e.toString()}function cf(e){var n=e.precision===void 0?5:e.precision,r=e.hl===void 0?0:e.hl,o=e.il===void 0?0:e.il;e=e.kr;var s=Math.pow(10,n),l=Math.pow(10,o);if(0>n||15<n)throw Error("precision out of range. Should be between 0 and 15");if(0>o||15<o)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>r||7<r||r===4||r===5)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");n=df(1)+df(o<<7|r<<4|n);var h=[],p=$e(0),d=$e(0),g=$e(0);return e.forEach(function(y){var v=$e(Math.round(y[0]*s));h.push(ef(v-p)),p=v,v=$e(Math.round(y[1]*s)),h.push(ef(v-d)),d=v,r&&(y=$e(Math.round(y[2]*l)),h.push(ef(y-g)),g=y)}),[].concat(n instanceof Array?n:ha(fa(n)),h instanceof Array?h:ha(fa(h))).join("")}function df(e){var n="";for(e=$e(e);31<e;)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e&$e(31)|$e(32)],e>>=$e(5);return n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e]}function ef(e){e=$e(e);var n=0>e;return e<<=$e(1),n&&(e=~e),df(e)}function ff(e){return cf({kr:e.polyline,precision:e.precision,hl:e.thirdDim,il:e.thirdDimPrecision})}t("H.util.flexiblePolyline.encode",ff);function gf(e){if(e=af(e),+e[0].toString()!=1)throw Error("Invalid format version");var n=+e[1].toString();n={precision:n&15,hl:n>>4&7,il:n>>7&15};for(var r=Math.pow(10,n.precision),o=Math.pow(10,n.il),s=n.hl,l=0,h=0,p=0,d=[],g=2;g<e.length;){var y=bf(e[g+1])/r;l+=bf(e[g])/r,h+=y,s?(p+=bf(e[g+2])/o,d.push([l,h,p]),g+=3):(d.push([l,h]),g+=2)}if(g!==e.length)throw Error("Invalid encoding. Premature ending reached");return e=Object.assign({},n,{kr:d}),{polyline:e.kr,precision:e.precision,thirdDim:e.hl,thirdDimPrecision:e.il}}t("H.util.flexiblePolyline.decode",gf);function K(e){K.g.constructor.call(this),e&&hf(e,K,0),this.S=e||[],this.gd=jf(this,0,this.S.length)}u(K,ye),t("H.geo.LineString",K);function jf(e,n,r){e=e.S;var o=0;for(n=Eb(n,0),r=Db(r,e.length),r-=2,n+=1;n<r;)o+=xe(e[n],e[n+=3]);return o}K.prototype.tr=function(e,n,r){kf(this,e,n,r,this.tr)},K.prototype.pushLatLngAlt=K.prototype.tr;function kf(e,n,r,o,s){var l=e.S.length;n=ue(n,s),r=ve(r,s),e.S.push(ue(n,s),ve(r,s),o===B?0:we(o,s)),l&&(e.gd+=xe(e.S[l-2],r)),delete e.I,delete e.ur}K.prototype.Yk=function(e,n,r){r&&hf(r,this.Yk,2),n===void 0&&(n=this.S.length),n&&(this.gd-=jf(this,e-3,e+n+3));var o=r?this.S.splice.apply(this.S,[e,n].concat(r)):this.S.splice(e,n);return r&&(this.gd+=jf(this,e-3,e+r.length+3)),n&&!r&&(this.gd+=jf(this,e-3,e-3)),delete this.I,delete this.ur,o},K.prototype.spliceLatLngAlts=K.prototype.Yk,K.prototype.Mu=function(e,n,r,o){this.Yk(e,0,[n,r,o])},K.prototype.insertLatLngAlt=K.prototype.Mu,K.prototype.yw=function(e){this.Yk(e,3)},K.prototype.removeLatLngAlt=K.prototype.yw,K.prototype.sg=function(e){kf(this,e.lat,e.lng,e.alt,this.sg)},K.prototype.pushPoint=K.prototype.sg,K.prototype.Yd=function(e,n){this.Mu(3*e,n.lat,n.lng,n.alt)},K.prototype.insertPoint=K.prototype.Yd,K.prototype.Ek=function(e){this.yw(3*e)},K.prototype.removePoint=K.prototype.Ek,K.prototype.xj=function(e,n){var r=this.S,o=3*e;e=r[o];var s=r[o+1];return r=r[o+2],n&&(n.lat=e,n.lng=s,n.alt=r),n||new ze(e,s,r)},K.prototype.extractPoint=K.prototype.xj,K.prototype.Yy=function(e,n,r){var o=this.S;n=n||0,r=de(r,o.length/3);for(var s=3*n;n<r;)e(o[s++],o[s++],o[s++],n++)},K.prototype.eachLatLngAlt=K.prototype.Yy,K.isDBC=xe,K.prototype.Cp=function(e){var n=this.gd;return e&&(e=this.S,n+=xe(e[e.length-2],e[1])),n},K.prototype.getDBCs=K.prototype.Cp,K.prototype.Mj=function(){return this.S.length/3},K.prototype.getPointCount=K.prototype.Mj,K.prototype.Zz=function(){return this.S},K.prototype.getLatLngAltArray=K.prototype.Zz,K.prototype.I=z,K.prototype.C=function(){var e;if(!(e=this.I)){e=this.S;var n=e.length,r=3,o,s,l=z;if(3<=n){var h=o=e[0],p=s=e[1];for(l=new J(h,p,o,s);r<n;r+=3){if(h=e[r-3],p=e[r-2],o=e[r],s=e[r+1],p>s&&180<s-p||p<s&&-180>p-s||s<p&&180>Ib(s-p)){var d=p;p=s,s=d}h<o&&(d=h,h=o,o=d),Fe(l.fa,l.W,l.ga,l.ca,h,p,o,s,l)}}e=this.I=l}return e},K.prototype.getBoundingBox=K.prototype.C,K.prototype.SA=function(){return this.I!==z},K.prototype.hasBoundingBox=K.prototype.SA;function hf(e,n,r){for(var o=e.length,s=!(o%3),l;s&&o;)s=!(E(e[--o]=we((l=e[o])===B?0:l))||E(e[--o]=ve(e[o]))||E(e[--o]=ue(e[o])));if(!s&&n)throw new D(n,r,e)}function lf(e){var n=new K,r=0,o=e.length;if(o%2)throw new D(lf,0,e);for(;r<o;)kf(n,e[r++],e[r++],0,lf);return n}K.fromLatLngArray=lf,K.prototype.da=function(e){var n=this===e,r;if(!n&&(n=C(e,K))){var o=this.S;for(e=e.S,n=(r=o.length)===e.length;n&&r--;)n=o[r]==e[r]}return n},K.prototype.equals=K.prototype.da;function mf(e,n){return e.to-n.to}function nf(e,n){var r=e.S,o=-2,s=[],l,h=e.ur;if(!h){h=e.ur=new Ve;var p=0,d=e.S,g=d.length;for(l=0;l<g;l+=3){var y=d[l],v=d[l+1];if(l){var _=h.Nu(_,w,y,v);_.to=p++}_=y;var w=v}}for(h=h.Fm(n).sort(mf),d=h.length,n=0;n<d;n++){if(p=h[n],p=p.to,g=3*p,p>o+1){var I=[r[g],r[g+1]];s.push(I)}o=p,I.push(r[g+3],r[g+4])}if(e.gd){for(r=[],o=s.length,n=0;n<o;n++)if(I=s[n],h=I.length){for(d=[],e=0;e<h;e+=2)p=I[e],g=I[e+1],d.push(p,g),l=I[e-1],e&&xe(g,l)&&(r.push(d),d=[],l+=0>l?360:-360,d.push(I[e-2],l,p,g));r.push(d)}s=r}return s}m=K.prototype,m.ac="LineString",m.xf=function(e,n){var r=this.S,o=r.length,s;if(o){for(e.push("("),s=0;s<o;s+=3)s&&e.push(","),e.push(r[s+1]," ",r[s]);n&&(r[0]!==r[o-3]||r[1]!==r[o-2])&&e.push(",",r[1]," ",r[0]),e.push(")")}else e.push("EMPTY");return e},m.Hc="LineString",m.wf=function(){var e=[],n=this.S,r=n.length,o;for(o=0;o<r;o+=3)e.push([n[o+1],n[o],n[o+2]]);return e},m.Qd=function(){var e=this.S,n;if(this.C().pc()){e=e.slice();var r=1;for(n=e.length;r<n;r+=3)0>e[r]&&(e[r]+=360)}return e},m.wD=function(e){e=e===void 0?5:e;for(var n=this.S,r=n.length,o=[],s=0;s<r;s+=3)o.push([n[s],n[s+1],n[s+2]]);return ff({polyline:o,precision:e,thirdDim:2,thirdDimPrecision:e})},K.prototype.toFlexiblePolyline=K.prototype.wD;function of(e){var n=gf(e);e=n.polyline;var r=n.thirdDim;if(n=r===2||r===3,r=r===0,!e)throw new D(of,0,"data");if(n||r){r=e.length;for(var o=Array(3*r),s=0,l=0;s<r;s++){var h=e[s];o[l++]=h[0],o[l++]=h[1],o[l++]=n?h[2]:0}}if(!o)throw new D(of,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new K(o)}K.fromFlexiblePolyline=of;function pf(e){gb(this,pf),pf.g.constructor.call(this),this.ha=qf(this,e,this.constructor,0)}u(pf,ye),t("H.geo.MultiGeometry",pf),pf.prototype.splice=function(e,n,r){return e=[e],n!==B&&e.push(n),r&&(n=qf(this,r,this.splice,2),e=e.concat(n)),this.I=z,this.ha.splice.apply(this.ha,e)},pf.prototype.splice=pf.prototype.splice,pf.prototype.Dd=function(e){var n=this.ha.length;if(!(0<=e&&e<n))throw new Vd(this.Dd,e,[0,n-1]);return this.I=z,this.ha.splice(e,1)[0]},pf.prototype.removeAt=pf.prototype.Dd,pf.prototype.remove=function(e){if(e=this.ha.indexOf(e),0<=e){var n=this.ha.splice(e,1)[0];this.I=z}return n||z},pf.prototype.remove=pf.prototype.remove,pf.prototype.Rz=function(){return this.ha},pf.prototype.getGeometries=pf.prototype.Rz,pf.prototype.push=function(e){var n=qf(this,[e],this.push,0)[0];this.I&&(this.I=this.I.yd(e.C())),this.ha.push(n)},pf.prototype.push=pf.prototype.push,pf.prototype.C=function(){var e;if(!(e=this.I)){e=z;var n,r;if(this.ha.length)for(e=this.ha[0].C(),r=1;r<this.ha.length;r++)(n=this.ha[r].C())&&(e=e?e.yd(n):n)}return this.I=e},pf.prototype.getBoundingBox=pf.prototype.C,pf.prototype.I=z;function qf(e,n,r,o){var s,l=[];if(!kb(n))throw new D(r,o);for(s=0;s<n.length;s++)if(e.tq(n[s]))l.push(e.nw(n[s]));else throw new D(r,o);return l}pf.prototype.nw=function(e){return e},pf.prototype.da=function(e){var n=this===e,r;if(!n&&(n=C(e,this.constructor))){var o=this.ha;for(e=e.ha,n=(r=o.length)===e.length;n&&r--;)n=o[r].da(e[r])}return n},pf.prototype.equals=pf.prototype.da,pf.prototype.xf=function(e){var n=this.ha,r=n.length,o,s,l=!1;if(r){for(e.push("("),o=0;o<r;o++)(s=0<o&&l)&&e.push(","),n[o].xf(e),e[e.length-1]==="EMPTY"?e.splice(-1-+s,1+ +s):l=!0;l?e.push(")"):e.splice(-1,1,"EMPTY")}else e.push("EMPTY");return e},pf.prototype.Qd=function(){for(var e=[],n=this.ha,r=n.length;r--;)e[r]=n[r].Qd();return e},pf.prototype.P=function(){var e=pf.g.P.call(this);return e.type=this.ac,e},pf.prototype.wf=function(){for(var e=[],n=this.ha,r=n.length;r--;)e[r]=n[r].wf();return e};function rf(e){rf.g.constructor.call(this,e)}u(rf,pf),t("H.geo.MultiLineString",rf),rf.prototype.tq=function(e){return C(e,K)},rf.prototype.ac="Multi"+K.prototype.ac,rf.prototype.Hc="Multi"+K.prototype.Hc;function L(e,n){this.x=+e,this.y=+n}t("H.math.Point",L),L.prototype.set=L,L.prototype.set=L.prototype.set,L.prototype.clone=function(e){return e?(e.x=this.x,e.y=this.y):e=new L(this.x,this.y),e},L.prototype.clone=L.prototype.clone,L.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},L.prototype.add=L.prototype.add,L.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},L.prototype.sub=L.prototype.sub,L.prototype.scale=function(e,n){return this.x*=e,this.y*=n===void 0?e:n,this},L.prototype.scale=L.prototype.scale,L.prototype.round=function(){return this.x=Fb(this.x),this.y=Fb(this.y),this},L.prototype.round=L.prototype.round,L.prototype.floor=function(){return this.x=Gb(this.x),this.y=Gb(this.y),this},L.prototype.floor=L.prototype.floor,L.prototype.ceil=function(){return this.x=Hb(this.x),this.y=Hb(this.y),this},L.prototype.ceil=L.prototype.ceil,L.prototype.da=function(e){return!(!e||this.x!==e.x||this.y!==e.y)},L.prototype.equals=L.prototype.da,L.prototype.nu=function(e,n){var r=n.x-e.x,o=n.y-e.y,s=e;return(r||o)&&(s=((this.x-e.x)*r+(this.y-e.y)*o)/(r*r+o*o),s=0>=s?e:1<=s?n:new L(e.x+s*r,e.y+s*o)),s},L.prototype.getNearest=L.prototype.nu,L.prototype.kb=function(e){return Kb(Lb(this.x-e.x,2)+Lb(this.y-e.y,2))},L.prototype.distance=L.prototype.kb;function sf(e){if(!e)throw Error("invalid argument");return e instanceof L?e:new L(e.x,e.y)}L.fromIPoint=sf;function tf(e,n,r,o,s,l){var h,p,d=e.length,g,y;if(d)for(h=[];d--;){var v=e[d],_=v.length,w=0;for(g=1;g<_;g++)if(y=uf(v[g-1],v[g],r,n,o,s)){var I=y[0],G=y[1];w&&w.da(I)?p.push(G):h.push(p=y),w=G,l&&(g=_,d=0)}}else h=e;return h}t("H.math.clipping.clipStrips",tf);function uf(e,n,r,o,s,l){var h=e.x;e=-e.y;var p=n.x;if(n=-n.y,r=-r,l=-l,h>p){if(p>s||h<o)return;var d=h,g=e;h=p,e=n,p=d,n=g,d=1}else if(h>s||p<o)return;if(e>n){if(n>r||e<l)return;var y=1;e=-e,n=-n,g=l,l=-r,r=-g}else if(e>r||n<l)return;if(h<o){if((e+=(o-h)*(n-e)/(p-h))>r)return;h=o}if(e<l){if((h+=(l-e)*(p-h)/(n-e))>s)return;e=l}return p>s&&(n=e+(s-h)*(n-e)/(p-h),p=s),n>r&&(p=h+(r-e)*(p-h)/(n-e),n=r),y&&(e=-e,n=-n),d?[new L(p,-n),new L(h,-e)]:[new L(h,-e),new L(p,-n)]}function vf(e,n,r){e=wf(e,!0),n=wf(n,!1);var o,s,l={},h=o=1;switch(~~(1*(r||0))){case 1:h=o=0;break;case 2:o=0,h=1;break;case 3:o=1,h=0}r=o;var p=h;if(n&&e){for(n.lj=new xf(n.x,n.y,null,yf(n)),e.lj=new xf(e.x,e.y,null,yf(e)),h=n;h.next;h=h.next)if(!h.ob){for(o=e;o.next;o=o.next)if(!o.ob){var d=zf(h.next),g=zf(o.next);if(s=Af(h,d,o,g,l)){s=l.ky;var y=l.ly,v=l.GD,_=l.HD;s=new xf(v,_,null,null,null,null,!0,0,0,s),Bf(s,h,d),d=new xf(v,_,null,null,null,null,!0,0,0,y),Bf(d,o,g),s.Mq=d,d.Mq=s}}}for(l=lc(n,Cf(e)),r&&(l=!l),h=n;h;h=h.next)h.ob&&(h.nq=l,l=!l);for(l=lc(e,Cf(n)),p&&(l=!l),o=e;o.next;o=o.next)o.ob&&(o.nq=l,l=!l);for(Df(n),Df(e);(e=Ef(n))!=n;){for(r=null;!e.ko;e=e.Mq){for(l=e.nq;r=new xf(e.x,e.y,r),r.artificial=e.ob||e.Tu,e.ko=1,e=l?e.next:e.Cd,!!e;)if(e.ob){e.ko=1;break}if(!e)break}r.Nq=w||null;var w=r}return w}}t("H.math.clipping.clipPolygon",vf);function xf(e,n,r,o,s,l,h,p,d,g){this.x=e,this.y=n,this.next=r||null,this.Cd=o||null,this.Nq=s||null,this.Mq=l||null,this.ob=!!h,this.nq=!!p,this.ko=d||0,this.alpha=g||0,o&&(o.next=this),r&&(r.Cd=this),this.Tu=!1,this.lj=null}function zf(e){for(;e&&e.ob;)e=e.next;return e}function yf(e){if(e)for(;e.next;)e=e.next;return e}function Ef(e){var n=e;if(n)do n=n.next;while(n!=e&&(!n.ob||n.ob&&n.ko));return n}function Df(e){var n=yf(e);n.Cd.next=e,e.Cd=n.Cd}function Af(e,n,r,o,s,l){var h,p=n.x-e.x,d=n.y-e.y,g=o.x-r.x,y=o.y-r.y,v=p*y-d*g;return!v||(g=((r.x-e.x)*y-(r.y-e.y)*g)/v,v=(d*(r.x-e.x)-p*(r.y-e.y))/v,0>g||1<g||0>v||1<v)?0:(g===0?h=e:g===1?h=n:v===0?h=r:v===1&&(h=o),h&&!l?(h.x+=2480549651603763e-20,h.y+=7321997314118067e-20,h.lj&&(h.lj.x=h.x,h.lj.y=h.y),Af(e,n,r,o,s)):(s.GD=e.x+g*p,s.HD=e.y+g*d,s.ky=g,s.ly=v,1))}function Cf(e){for(var n=[];e;)n.push(e.x,e.y),e=e.next;return n}function Bf(e,n,r){for(n=n.next;n!==r&&n.alpha<=e.alpha;)n=n.next;e.next=n,e.Cd=n.Cd,e.next.Cd=e,e.Cd.next=e}function wf(e,n){for(var r,o=null,s=0,l=e.length;s<l;s++)r=new xf(e[s].x,e[s].y,o),r.Tu=n,(r.next=o)&&(o.Cd=r),o=r;return o}function M(e,n){var r;if(M.g.constructor.call(this),C(e,K,M,0),n!==B&&kb(n,M,1)){for(r=0;r<n.length;r++)C(n[r],K,M,1,"index "+r);this.cb=n}else this.cb=[];this.Fb=e,this.Tj=[]}u(M,ye),t("H.geo.Polygon",M);function Ff(e){var n=M,r=K,o=e.fa,s=e.W,l=e.ga,h=e.ca;return s=[o,s,B,o,h,B,l,h,B,l,s,B],180<=e.oc()&&(s.splice(9,0,l,e=e.wb().lng,B),s.splice(3,0,o,e,B)),new n(new r(s))}M.fromRect=Ff;var Gf={NORTH:90,SOUTH:-90};M.Direction=Gf,M.prototype.jf=Gf.NORTH,M.prototype.Vw=function(e){return this.jf!==e&&(this.I=z,this.Tj.length=0,this.jf=e),this},M.prototype.setPoleCovering=M.prototype.Vw,M.prototype.pA=function(){return this.jf},M.prototype.getPoleCovering=M.prototype.pA,M.prototype.Kz=function(){return this.Fb},M.prototype.getExterior=M.prototype.Kz,M.prototype.Sw=function(e){if(!C(e,K))throw new D(this.Sw,0,e);this.Fb=e,this.I=z},M.prototype.setExterior=M.prototype.Sw,M.prototype.Wz=function(){return this.cb},M.prototype.getInteriors=M.prototype.Wz,M.prototype.fo=function(e,n,r){var o=arguments.length,s;for(s=2;s<o;s++)C(arguments[s],K,this.fo,s);var l=this.cb.splice.apply(this.cb,arguments);for(s=2;s<o;s++)arguments[s]=B;return this.Tj.splice.apply(this.Tj,arguments),l},M.prototype.spliceInteriors=M.prototype.fo,M.prototype.AC=function(e){return this.fo(e,1)[0]},M.prototype.removeInteriorAt=M.prototype.AC,M.prototype.zC=function(e){return e=this.cb.indexOf(e),0>e?B:this.fo(e,1)[0]},M.prototype.removeInterior=M.prototype.zC,M.prototype.uw=function(e){if(!C(e,K))throw new D(this.uw,0,e);this.cb.push(e)},M.prototype.pushInterior=M.prototype.uw,M.prototype.C=function(){var e=this.I;return e||(this.I=e=Hf(this.Fb,this.jf)),e},M.prototype.getBoundingBox=M.prototype.C,m=M.prototype,m.du=function(e){var n=this.cb.length;if(0>e||e>=n)throw new Vd(this.du,e,[0,n-1]);return(n=this.Tj[e])||(this.Tj[e]=n=Hf(this.cb[e],this.jf)),n};function Hf(e,n){var r,o,s;return(s=e.C())&&((r=e.Cp(!0))&&(o=e.Mj())&&(s=s.yd(He([e.xj(0),e.xj(o-1)],!0),!0)),s.oc()===360&&r%2===1&&(s=s.cf(n,0))),s}m.ac="Polygon",m.xf=function(e){var n=this.cb,r=n.length,o;if(this.Fb.Mj()){for(e.push("("),this.Fb.xf(e,!0),o=0;o<r;o++)n[o].Mj()&&(e.push(","),n[o].xf(e,!0));e.push(")")}else e.push("EMPTY");return e},m.Hc="Polygon",m.wf=function(){var e,n=[],r=this.cb,o=this.Fb.wf();for(o[0].toString()!==o[o.length-1].toString()&&o.push(o[0]),n.push(o),e=0;e<r.length;e++)o=r[e].wf(),o[0].toString()!==o[o.length-1].toString()&&o.push(o[0]),n.push(o);return n},m.P=function(){var e=M.g.P.call(this);return this.C().pc()&&(e.type="Multi"+e.type),e},m.Qd=function(){var e=[],n=this.cb,r=n.length;for(e.push(this.Fb.Qd());r--;)e[r+1]=n[r].Qd();return this.C().pc()?[e]:e},m.da=function(e){var n=!1;if(C(e,M)){var r=e.cb,o=this.cb.length;n=r.length;var s=0;for(n=this.Fb.da(e.Fb)&&o===n;n&&s<o;)n=n&&this.cb[s].da(r[s]),s++}return n},M.prototype.equals=M.prototype.da;function If(e,n,r,o){var s=e.cb,l=Jf.bind(null,n,r);return kc(n,r,e.Fb.S,0,!0,3)!==hc.NONE?o===void 0||o?!s.some(l):!0:!1}function Jf(e,n,r){return kc(e,n,r.S,0,!0,3)===hc.SURFACE}function Kf(e,n){n=n.S,e=e.Fb.S;var r,o,s=n.length-3,l=e.length-3,h={};for(r=0;r<s;r+=3){var p=n[r],d=n[r+1],g=n[r+3],y=n[r+4];for(o=0;o<l;o+=3){var v=e[o],_=e[o+1],w=e[o+3],I=e[o+4];if(Af(new xf(d,p),new xf(y,g),new xf(_,v),new xf(I,w),h,!0))return!0}}return!1}function Lf(e,n){var r=n.Fb,o=n.cb,s=o.length,l=r.S,h=l.length,p=e.Fb.S,d=p.length;if(Kf(e,r))return!0;for(r=0;r<h;r+=3)if(If(e,l[r],l[r+1]))return!0;for(r=0;r<d;r+=3)if(If(n,p[r],p[r+1]))return!0;for(r=0;r<s;r++)if(Kf(e,o[r]))return!0;return!1}function Mf(e){Mf.g.constructor.call(this,e)}u(Mf,pf),t("H.geo.MultiPolygon",Mf),Mf.prototype.tq=function(e){return C(e,M)},Mf.prototype.ac="Multi"+M.prototype.ac,Mf.prototype.Hc="Multi"+M.prototype.Hc;function Nf(e){Nf.g.constructor.call(this,e)}u(Nf,pf),t("H.geo.MultiPoint",Nf),Nf.prototype.tq=function(e){return Ae(e)},Nf.prototype.nw=function(e){return C(e,ze)?e:Be(e)},Nf.prototype.ac="Multi"+ze.prototype.ac,Nf.prototype.Hc="Multi"+ze.prototype.Hc;function Of(e,n,r){var o,s=6;if(n){for(o=' expected close to: "'+n;s--;)n=e.nt.next(),n!==-1&&(o+=String.fromCharCode(n));o+='"'}throw new D(Pf,0,"- Malformed WKT: "+(o?r+o:"unexpected end of stream"))}function Qf(e,n){var r=e.next();n=n?")":"(",r!==n&&Of(e,r,'"'+n+'"')}function Rf(e){return e.eb()===","?(e.next(),!0):!1}function Sf(e,n,r,o,s){var l,h,p=2+n+r;for(h=1;h<=p;h++)(r=e.next())?(l=+r)!==l?Of(e,r,"number"):h===1?o[s+1]=l:h===2?o[s+0]=l:h===3&&(o[s+2]=l):Of(e,r);n||(o[s+2]=0)}var Tf=[];function Uf(e,n,r,o){return o||Qf(e,0),Sf(e,n,r,Tf,0),o||Qf(e,1),new ze(Tf[0],Tf[1],n?Tf[2]:B)}function Vf(e,n,r){var o=[];Qf(e,0);do Sf(e,n,r,o,o.length);while(Rf(e));return Qf(e,1),new K(o)}function Wf(e,n,r){Qf(e,0);var o=Vf(e,n,r);if(Rf(e)){var s=[];do s.push(Vf(e,n,r));while(Rf(e))}return Qf(e,1),new M(o,s)}var Xf=[],Yf=[Wf],Zf=[Uf],$f={POINT:Zf,LINESTRING:[Vf],POLYGON:Yf,MULTIPOINT:[Uf,Nf],MULTILINESTRING:[Vf,rf],MULTIPOLYGON:[Wf,Mf],GEOMETRY:Xf,GEOMETRYCOLLECTION:Xf,CIRCULARSTRING:Xf,COMPOUNDCURVE:Xf,CURVEPOLYGON:Xf,MULTICURVE:Xf,MULTISURFACE:Xf,CURVE:Xf,SURFACE:Xf,POLYHEDRALSURFACE:Xf,TIN:Xf,TRIANGLE:Xf},ag={Z:1,M:2,ZM:3};function Pf(e){e=new bg(e);var n,r=e.next();if((n=$f[r.toUpperCase()])||Of(e,r,"type name"),n!==Xf){r=e.eb(),r=ag[r.toUpperCase()];var o=r&1,s=r>>1;if(o|s&&e.next(),r=e.eb(),r==="EMPTY")if(e.next(),o=n[1])var l=new o([]);else n!==Zf&&(l=new K([]),n===Yf&&(l=new M(l)));else if(r==="("){if(l=n[0],n=n[1],n){var h=[];if(Qf(e,0),l===Uf){var p=e.eb()!=="(";do h.push(l(e,o,s,p));while(Rf(e))}else do h.push(l(e,o,s));while(Rf(e));Qf(e,1),o=new n(h)}else o=l(e,o,s);l=o}else Of(e,r,'"Z", "M", "ZM", "(" or "EMPTY"');e.next()&&Of(e,r,"end of stream")}return l||z}function bg(e){this.nt=e}bg.prototype.eb=function(){var e=this.cw;if(e===B){for(e=this.nt;e.eb()===cg;)e.next();if(dg[e.eb()])e=e.next(),e=e===eg?"":String.fromCharCode(e);else{e.zi();do e.next();while(!dg[e.eb()]);e=String.fromCharCode.apply(null,e.mh())}this.cw=e}return e},bg.prototype.next=function(){var e=this.eb();return e!==""&&delete this.cw,e};var cg=32,eg=-1,fg={RD:cg,LD:40,QD:41,ID:44,JD:eg},dg=Object.keys(fg).reduce(function(e,n){return e[fg[n]]=!0,e},Za());t("H.util.wkt.toGeometry",function(e){return Pf(new Pa(e))});function gg(){}t("H.map.provider.Invalidations",gg),gg.MARK_INITIAL=bc,gg.prototype.update=function(e,n){n!==hg.NONE&&(this.Ld=e,n&hg.SPATIAL&&(this.dx=e),n&hg.VISUAL&&(this.Ix=e),n&hg.ADD&&(this.$s=e),n&hg.REMOVE&&(this.zw=e),n&hg.Z_ORDER&&(this.Mx=e),n&hg.VOLATILITY&&(this.Jx=e))},gg.prototype.update=gg.prototype.update,gg.prototype.fA=function(){return this.Ld},gg.prototype.getMark=gg.prototype.fA,gg.prototype.Ld=bc,gg.prototype.aB=function(e){return this.Ld>e},gg.prototype.isAny=gg.prototype.aB,gg.prototype.Ix=bc,gg.prototype.Lh=function(e){return this.Ix>e},gg.prototype.isVisual=gg.prototype.Lh,gg.prototype.dx=bc,gg.prototype.sq=function(e){return this.dx>e},gg.prototype.isSpatial=gg.prototype.sq,gg.prototype.$s=bc,gg.prototype.Qu=function(e){return this.$s>e},gg.prototype.isAdd=gg.prototype.Qu,gg.prototype.zw=bc,gg.prototype.Km=function(e){return this.zw>e},gg.prototype.isRemove=gg.prototype.Km,gg.prototype.Mx=bc,gg.prototype.uq=function(e){return this.Mx>e},gg.prototype.isZOrder=gg.prototype.uq,gg.prototype.Jx=bc,gg.prototype.fB=function(e){return this.Jx>e},gg.prototype.isVolatility=gg.prototype.fB;var hg={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};gg.Flag=hg;function ig(e,n,r){this.paths=this.Rc=e,n!==B&&(this.interiorsIndex=this.Uj=n),r!==B&&(this.outlinesIndex=this.sn=r)}ig.prototype.Uj=ac,ig.prototype.interiorsIndex=ig.prototype.Uj,ig.prototype.sn=ac,ig.prototype.outlinesIndex=ig.prototype.sn;var jg=bb(new ig([])),kg=ab([]);function lg(e){var n;if(e){var r=C(e,lg);for(n in e)if(n in this){var o=e[n];o!==this[n]&&(n==="fillColor"||0<(o=+o))&&(this[n]=o)}e=r?e.Nc:!!(be(this.fillColor)&&this.width&&this.width),e||(this.Nc=e)}ab(this)}t("H.map.ArrowStyle",lg),lg.prototype.Nc=!0,lg.prototype.fillColor="rgba(255,255,255,.75)",lg.prototype.width=1.2,lg.prototype.length=1.6,lg.prototype.frequency=5,lg.prototype.eu=function(){return new lg(this)},lg.prototype.da=function(e){var n=this===e;return!n&&e&&(n=e.width===this.width&&e.fillColor===this.fillColor&&e.length===this.length&&e.frequency===this.frequency),n},lg.prototype.equals=lg.prototype.da;function mg(e){mg.g.constructor.call(this),e!==void 0&&(this.data=e)}u(mg,F),t("H.map.Feature",mg),mg.prototype.getData=function(){return this.data},mg.prototype.getData=mg.prototype.getData,mg.prototype.disposeInternal=function(){mg.g.disposeInternal.call(this),delete this.data};function N(e){if(gb(this,N),N.g.constructor.call(this,e?e.data:B),this.Rj=ng.next(),e){var n="min";ob(e[n])&&(this.zb=e[n]),n="max",ob(e[n])&&(this.Oc=e[n]),n="visibility",n in e&&(this.Kd=!!e[n]),n="volatility",n in e&&(this.lo=!!e[n]),n="zIndex",n in e&&(this.Ii=+e[n]||0),n="provider",n in e&&!C(e[n],O)&&(this.D=e[n],this.qa(hg.ADD))}}u(N,mg),t("H.map.Object",N);var ng=new fe(1),og={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};N.Type=og,N.prototype.xb=function(){return this.Rj},N.prototype.getId=N.prototype.xb,N.prototype.Zr=function(e){if(!ob(e)&&!lb(e))throw new D(this.Zr,0,"id must be a number or a string");return this.hi=e,this},N.prototype.setRemoteId=N.prototype.Zr,N.prototype.wA=function(){return this.hi},N.prototype.getRemoteId=N.prototype.wA,N.prototype.zb=-1/0,N.prototype.Oc=1/0,N.prototype.ku=function(e){var n=this.Oc;if(e)for(e=this;e=e.Ma;)n=Db(n,e.Oc);return n},N.prototype.getMax=N.prototype.ku,N.prototype.mu=function(e){var n=this.zb;if(e)for(e=this;e=e.Ma;)n=Eb(n,e.zb);return n},N.prototype.getMin=N.prototype.mu,N.prototype.Kd=!0,N.prototype.Zb=function(e){var n=this.Kd;return(e=!!e)!==n&&(this.Kd=e,this.invalidate(hg.VISUAL)),this},N.prototype.setVisibility=N.prototype.Zb,N.prototype.Vd=function(e){for(var n=this,r;(r=n.Kd)&&e&&(n=n.Ma););return r},N.prototype.getVisibility=N.prototype.Vd,N.prototype.lo=!1,N.prototype.sm=function(e){for(var n=this,r;!(r=n.lo)&&e&&(n=n.Ma););return r},N.prototype.getVolatility=N.prototype.sm,N.prototype.Yw=function(e){var n=this.lo;return n!==!!e&&(this.lo=!n,this.invalidate(hg.VOLATILITY)),this},N.prototype.setVolatility=N.prototype.Yw,N.prototype.Ii=B,N.prototype.vu=function(){return this.Ii},N.prototype.getZIndex=N.prototype.vu,N.prototype.vi=function(e){return e!==this.Ii&&(this.Hk(),this.Ii=e,this.invalidate(hg.Z_ORDER)),this},N.prototype.setZIndex=N.prototype.vi,N.prototype.qo=B,N.prototype.Ve=function(){var e=this.qo,n,r;if(!e){var o=+((n=this.Ii)!==B);(e=this.Ma)?(e=e.Ve().slice(),e[0]|=o):e=[o],e.push(n||0,0>(r=this.ds)?this.Rj:r),this.qo=e}return e},N.prototype.getZInfo=N.prototype.Ve,N.prototype.Hk=function(){this.qo=B};function pg(e,n,r){var o,s;if(!r||e[0]|n[0]){var l=e.length,h=n.length,p=Db(l,h),d=1;for(s=1+ +r;d<p;d+=s)if(o=e[d]-n[d])return o}return r?0:l-h}N.compareZInfo=pg;function qg(e,n){return e.qt(n)}N.compareZOrder=qg,N.prototype.qt=function(e){return this.ro-e.ro||pg(this.Ve(),e.Ve(),!1)},N.prototype.compareZOrder=N.prototype.qt,m=N.prototype,m.previousSibling=z,m.nextSibling=z,m.ds=-1,m.Ma=z,m.kA=function(){return this.Ma},N.prototype.getParentGroup=N.prototype.kA,N.prototype.rd=function(){for(var e=this,n;n=e.Ma;)e=n;return e},N.prototype.getRootGroup=N.prototype.rd,N.prototype.contains=function(e){return this===e},N.prototype.contains=N.prototype.contains,N.prototype.ea=function(e){if(this.Ma)throw new Bb(this.ea,"Not allowed for a child of a group");N.g.ea.call(this,e)},N.prototype.setParentEventTarget=N.prototype.ea,N.prototype.draggable=N.prototype.draggable=!1,N.prototype.D=z,N.prototype.Pp=function(){return this.D},N.prototype.getProvider=N.prototype.Pp,N.prototype.ui=function(e,n){var r=this.D,o;if(o=r!==e){if(n&&(r&&!C(r,O)||e&&!C(e,O)))throw new Bb(n,"Only LocalObjectProvider allows an object transfers");n=this.type!==og.GROUP,r&&(this.invalidate(hg.REMOVE),n&&r.Na(this)),(this.D=e)&&(n&&e.Y(this),this.Wf=z,this.invalidate(hg.ADD))}return o},N.prototype.Wf=z,N.prototype.Kc=function(){return this.Wf||(this.Wf=new gg)},N.prototype.getInvalidations=N.prototype.Kc,N.prototype.qa=function(e){var n=this.D,r;return(r=!!n)&&n.invalidateObject(this,e),r},N.prototype.invalidate=N.prototype.qa,N.prototype.disposeInternal=function(){this.Ma&&this.Ma.Na(this),N.g.disposeInternal.call(this)},N.prototype.setData=function(e){return this.data=e,this},N.prototype.setData=N.prototype.setData,N.prototype.ye=function(e){if(e&&!db(e))throw new D(N.prototype.ye,0,"opt_callback must be a function");return e=rg(this,e?e(this.data):this.data,!!e),e=db(this.V)?{type:"Feature",properties:e,geometry:this.V().ye()}:{type:"FeatureCollection",features:le},this.hi&&(e.id=this.hi),e},N.prototype.toGeoJSON=N.prototype.ye;function rg(e,n,r){if(n===null||n===B)return null;if(0<=Object.keys(n).length&&Object.prototype.toString.call(n)!=="[object Object]")throw Error(sg(e,r));try{return JSON.stringify(n),n}catch{throw Error(sg(e,r))}}function sg(e,n){return"Object Remote-Id: "+e.hi+" - "+(n?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}N.prototype.P=function(){return{id:this.Rj,properties:{min:this.mu(),max:this.ku(),zIdx:this.Ii,sIdx:this.ds,parent:this.Ma?this.Ma.xb():0,visible:this.Vd(),volatile:this.sm()},type:"Feature"}},N.prototype.forWorkerMessage=N.prototype.P;function tg(e){var n;if(e){var r=ug;for(n=C(e,tg);r--;){var o=vg[r];if(e.hasOwnProperty(o)){var s=e[o];if(n)this[o]=s;else{if((s=wg[r](s))===xg)throw new D(tg,0,o+": "+e[o]);s!==this[o]&&s!==B&&(this[o]=s)}}}r=n?e.Xj:this.lineWidth&&be(this.strokeColor),r||(this.Xj=r),r=n?e.Nc:be(this.fillColor),r||(this.Nc=r),r=n?e.Vj:this.strokeColor!=="none"&&this.lineWidth,r||(this.Vj=r)}ab(this)}t("H.map.SpatialStyle",tg),tg.prototype.Nc=!0,tg.prototype.Xj=!0,tg.prototype.Vj=!0;var vg="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineDashImage lineHeadCap lineTailCap".split(" ");tg.prototype.strokeColor="rgba(0,85,170,.6)",tg.prototype.strokeColor=tg.prototype.strokeColor,tg.prototype.fillColor="rgba(0,85,170,.4)",tg.prototype.fillColor=tg.prototype.fillColor,tg.prototype.lineWidth=2,tg.prototype.lineWidth=tg.prototype.lineWidth,tg.prototype.lineCap="round",tg.prototype.lineCap=tg.prototype.lineCap,tg.prototype.lineJoin="miter",tg.prototype.lineJoin=tg.prototype.lineJoin,tg.prototype.miterLimit=1,tg.prototype.miterLimit=tg.prototype.miterLimit,tg.prototype.pB=le,tg.prototype.lineDash=tg.prototype.pB,tg.prototype.lineDashOffset=0,tg.prototype.lineDashOffset=tg.prototype.lineDashOffset,tg.prototype.qB=B,tg.prototype.lineDashImage=tg.prototype.qB,tg.prototype.rB=B,tg.prototype.lineHeadCap=tg.prototype.rB,tg.prototype.sB=B,tg.prototype.lineTailCap=tg.prototype.sB;var ug=vg.length;tg.prototype.da=function(e){var n=this===e;if(!n&&e){for(n=0;n<ug;n++){var r=vg[n];if(this[r]!==e[r])break}n=n===ug}return n},tg.prototype.equals=tg.prototype.da,tg.prototype.fu=function(e){if(e){var n={};Wa(n,this,e)}else n=this;return new tg(n)},tg.prototype.getCopy=tg.prototype.fu;var xg=ab({}),wg=[function(e){return e?$a(e):xg},function(e){return e?$a(e):xg},function(e){return 0<=e&&100>=e?+e:xg},function(e){return e=$a(e),e==="butt"||e==="square"||e==="round"||e==="arrow-head"||e==="arrow-tail"?e:xg},function(e){return e==="round"||e==="bevel"||e==="miter"?e:xg},function(e){return 0<e&&100>=e?+e:xg},function(e){return e&&e.every&&e.every(pb)?e:xg},function(e){return E(+e)?xg:+e},function(e){return e===B||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||Object.values(yg).includes(e)?e:xg},function(e){return fb(e)?wg[3](e):B},function(e){return fb(e)?wg[3](e):B}],zg=new Image;zg.src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="arrow"><path style="fill:#ff0000" d="M 0,0 32,64 2,128 128,64 Z"/></g></svg> ');var Ag=new Image;Ag.src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><circle style="fill:#ffffff" cx="64" cy="64" r="64" /></svg>');var yg={ARROW:zg,CIRCLE:Ag};tg.DashImage=yg,tg.MAX_LINE_WIDTH=100;var Bg=new tg;tg.DEFAULT_STYLE=Bg;var Cg="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");tg.prototype.P=function(){for(var e={},n=Cg.length,r;n--;)r=Cg[n],e[r]=this[r];return e},tg.prototype.forWorkerMessage=tg.prototype.P;function Dg(e,n){var r;Dg.g.constructor.call(this,n),n&&this.Cb(n.style),e&&(this.We=!0),n&&(r=n.arrows)&&this.Pw(r)}u(Dg,N),t("H.map.Spatial",Dg),Dg.prototype.type=og.SPATIAL,Dg.prototype.ro=0,Dg.prototype.style=Bg,Dg.prototype.J=function(){return this.style},Dg.prototype.getStyle=Dg.prototype.J,Dg.prototype.Cb=function(e){var n=!0;return e?this.style=C(e,tg)?e:new tg(e):this.style?delete this.style:n=!1,n&&this.invalidate(hg.VISUAL),this},Dg.prototype.setStyle=Dg.prototype.Cb,Dg.prototype.qz=function(){return this.Tg},Dg.prototype.getArrows=Dg.prototype.qz,Dg.prototype.Pw=function(e){var n=this.Tg,r=!1;return!e&&n?(delete this.Tg,r=!0):!e||n&&n.da(e)||(this.Tg=new lg(e),r=!0),r&&this.style.strokeColor!=="none"&&this.qa(1),this},Dg.prototype.setArrows=Dg.prototype.Pw;function Eg(e,n){var r=!1,o=!1,s;if(n.length){for(r=0;r<n.length;r++)if(n[r]!==jg){o=!0;break}n=e.style,r=o?n.Xj||n.Nc&&e.We||(s=e.Tg||!1)&&n.Vj&&s.Nc:n.Nc}return r&&e.Vd(!0)}Dg.prototype.We=!1,Dg.prototype.bB=function(){return this.We},Dg.prototype.isClosed=Dg.prototype.bB,Dg.prototype.getGeometriesForTile=Dg.prototype.xh,Dg.prototype.Hp=function(){return B},Dg.prototype.getLabels=Dg.prototype.Hp;function Fg(e,n){Fg.g.constructor.call(this,e,n)}u(Fg,Dg),t("H.map.GeoShape",Fg),Fg.prototype.getBoundingBox=Fg.prototype.C;function Gg(e,n,r,o){var s=[],l=n.length,h;for(h=0;h<l;h++){var p=n[h];if(p.length){var d=s,g=d.push,y=void 0,v=e,_=r,w=o,I=[],G=p.length,_t=0;for(v.Ft=0,y=y||0;_t<G;)I.push(Hg(v,p[_t++],p[_t++],y,w));_&&I.push(Hg(v,p[0],p[1],y,w)),g.call(d,I)}}return s}function Hg(e,n,r,o,s){var l=e.Ft;return l&&180<Ib(l-r)&&(r+=0>l?-360:360),e.Ft=r,s.wq(n,r+o)}function Ig(e,n,r){for(var o=n,s,l=e.length+n,h,p;o--;){for(n=e[o],h=n.length,s=Array(h);h--;)p=n[h],s[h]=new L(p.x+r,p.y);e[--l]=s}}function Jg(e,n){Jg.g.constructor.call(this,!1,n),this.X(e)}u(Jg,Fg),t("H.map.Polyline",Jg),Jg.prototype.C=function(){return this.Hb.C()},Jg.prototype.getBoundingBox=Jg.prototype.C,Jg.prototype.X=function(e){var n=this.X,r,o;if(C(e,rf)){var s=e.ha;if(r=s.length)for(o=0;o<r;o++)Kg(s[o],n);else throw new D(n,0)}else Kg(e,n);return this.Uf=!!s,this.Hb=e,this.qa(hg.SPATIAL),this},Jg.prototype.setGeometry=Jg.prototype.X,Jg.prototype.V=function(){return this.Hb},Jg.prototype.getGeometry=Jg.prototype.V,Jg.prototype.clip=function(e){var n=this.Hb;return nf(this.Uf?n.ha[0]:n,e)},Jg.prototype.clip=Jg.prototype.clip,Jg.prototype.xh=function(e){var n=this.Hb,r,o=[];if(this.Uf)for(n=n.ha,r=n.length;r--;)Lg(this,n[r],e,o);else Lg(this,n,e,o);return o.length?o:B},Jg.prototype.getGeometriesForTile=Jg.prototype.xh;function Kg(e,n){if(!C(e,K)||2>e.Mj())throw new D(n,0)}function Lg(e,n,r,o){var s=nf(n,r.nm());if(s.length&&(n=r.pm(),e=Gg(e,s,!1,n),s=e.length)){var l=r.Pj();n=n.w,r.x||Ig(e,s,-n),r.x===(1<<r.z)-1&&Ig(e,s,n),r=tf(e,l.left,l.top,l.right,l.bottom,!1),r.length&&o.push(new ig(r))}}Jg.prototype.P=function(){var e=Jg.g.P.call(this),n=e.properties;return e.geometry=this.V().P(),n.style=this.J().P(),n.height=0,e},Jg.prototype.forWorkerMessage=Jg.prototype.P;var Mg={PENDING:0,ACTIVE:1,DONE:2};t("H.map.render.RenderState",Mg);function Ng(e,n){n=n||{},"status"in n&&(this.status=+n.status),"statusText"in n&&(this.statusText=n.statusText),this.ok=200<=this.status&&300>this.status,this.Su=!1,e?typeof e=="string"?this.Ko=e:(n=x.ArrayBuffer)&&n.prototype.isPrototypeOf(e)?this.Bf=e:n&&e.buffer?this.Bf=e.buffer:x.Blob.prototype.isPrototypeOf(e)&&(this.Fl=e):this.Ko=""}t("H.net.Response",Ng),Ng.prototype.type="default",Ng.prototype.type=Ng.prototype.type,Ng.prototype.status=200,Ng.prototype.status=Ng.prototype.status,Ng.prototype.statusText="OK",Ng.prototype.statusText=Ng.prototype.statusText;function Og(e){if(e.Su)return Cd(new TypeError("Already read"));e.Su=!0}Ng.error=function(){return Ng.mp||(Ng.mp=new Ng(null,{status:0,statusText:""}),Ng.mp.type="error"),Ng.mp},Ng.error=Ng.error,Ng.prototype.text=function(){var e=Og(this);if(!e)if(this.Ko)e=Bd(this.Ko);else if(this.Bf){e=new Uint8Array(this.Bf);var n=e.length,r=Array(n),o;for(o=0;o<n;o++)r[o]=String.fromCharCode(e[o]);e=Bd(r.join(""))}else e=this.Fl?Pg(this.Fl):Cd("Unsupported response body");return e},Ng.prototype.json=function(){return this.text().then(x.JSON.parse)},Ng.prototype.blob=function(){var e,n=Og(this);return n||(this.Fl?e=this.Fl:this.Bf&&(e=new Blob([this.Bf],{type:"application/octet-stream"}))),n||Bd(e)},Ng.prototype.arrayBuffer=function(){return this.Bf?Og(this)||Bd(this.Bf.slice(0)):this.blob().then(Ng.ry)},Ng.ry=function(e){var n=new FileReader;return n.readAsArrayBuffer(e),new td(function(r,o){n.onload=function(){r(n.result)},n.onerror=function(){o(n.error)}})};function Pg(e){var n=new FileReader;return n.readAsText(e),new td(function(r,o){n.onload=function(){r(n.result)},n.onerror=function(){o(n.error)}})}!zb&&x.Response&&x.Response.error&&(Ng=x.Response,rb(Ng.prototype));function Qg(e,n,r){function o(){var y=A(g.Xh,g),v=+d.timeout||0;Rg?(Sg(g,"timeout",y),s.timeout=v):v&&(g.Lx=setTimeout(function(){s.abort(),g.Xh({type:"timeout"})},v)),Sg(g,"error",y),Sg(g,"load",y),s.send(d.data)}var s,l,h,p=r&&r.headers||{},d={},g=this;if(!db(n))throw new D(Qg,1,"function required");e+="",Wa(p,Tg.headers,p),Wa(d,Tg,r||{}),d.headers=p,this.kt=n,this.K=s=new XMLHttpRequest,n=d.method;try{s.open(n,e,!0);for(l in p)p.hasOwnProperty(l)&&(h=p[l])&&s.setRequestHeader(l,h);s.withCredentials=!!d.withCredentials,o()}catch{this.Xh({type:"cors"})}}t("H.net.Xhr",Qg);var Tg={method:"GET",headers:{},data:null},Ug="withCredentials"in new XMLHttpRequest,Rg="timeout"in new XMLHttpRequest;function Sg(e,n,r){Ug?e.K.addEventListener(n,r):e.K["on"+n]=r}function Vg(e,n,r){Ug?e.K.removeEventListener(n,r):e.K["on"+n]=null}Qg.prototype.abort=function(){this.K&&(this.K.abort(),this.K&&this.Xh({type:"abort"}))},Qg.prototype.abort=Qg.prototype.abort,Qg.prototype.Xh=function(e){var n=e.type;e=this.K;var r;this.Lx&&clearTimeout(this.Lx),n==="load"?e instanceof XMLHttpRequest&&e.status!==200&&(r="network"):r=e.readyState===4&&e.status===0&&n=="error"?"cors":n!="error"?n:"network",n=this.Xh,Vg(this,"timeout",n),Vg(this,"error",n),Vg(this,"load",n),e=e.status===0||r&&r!=="network"?Ng.error():new Ng(e.responseText||null,e),r=this.kt,delete this.Xh,delete this.kt,delete this.K,r(e)};function Wg(){var e=Wg.pv;return e||(e=this,Wg.pv=e,rb(Wg.pv),F.call(e),this.zg()),e}u(Wg,F),m=Wg.prototype,m.disposeInternal=function(){Wg.g.disposeInternal.call(this),this.zg()},m.zg=function(){this.wB=10,this.xB=6,this.li=Za(),this.Cr=Za(),this.Hr=0},m.Eo=function(e){e=e.type;var n=this.li[e]||0;if(this.Hr<this.wB&&n<this.xB){var r=++this.lB;return this.Hr++,this.li[e]=n+1,this.Cr[r+""]=e,r}return z},m.$l=function(e){var n=this.Cr[e];if(!fb(n)||!this.li[n])throw new Bb(this.$l,"Unknown requestId");this.Hr--,this.li[n]--,this.li[n]||delete this.li[n],delete this.Cr[e],this.dispatchEvent("allocatable")},m.lB=-1;function Xg(e,n,r,o){if(!Yg[e])throw new D(Xg,0,"Mime type is not supported");this.DB=e,e=o?Ta(o):{},"crossOrigin"in e||(e.crossOrigin="anonymous"),this.Ea=e,Zg.href=n.toString(),Qd.call(this,Zg.protocol+"//"+Zg.hostname,n,r)}u(Xg,Qd),Xg.prototype.Rt=function(){return this.br=Yg[this.DB].call(this),!0},Xg.prototype.Xi=function(){this.br&&(this.br.abort(),delete this.br)};var Yg={"application/json":function(){var e=this,n=$g(this.Ea),r=n.headers;return n.headers=r=r?Ta(r):{},r.Accept="application/json",new Qg(this.data,function(o){200<=o.status&&300>o.status?e.resolve(o.json()):e.reject(o)},n)},"text/plain":function(){var e=this;return new Qg(this.data,function(n){200<=n.status&&300>n.status?e.resolve(n.text()):e.reject(n)},$g(this.Ea))},image:function(){var e=x.document.createElement("img"),n=this,r=this.data;return e.onload=A(this.resolve,this,e),e.onerror=function(){n.reject(Ng.error())},e.crossOrigin=this.Ea.crossOrigin,e.src=r,{abort:function(){e.onerror=e.onload=null,ce&&qe(e)||e.removeAttribute("src")}}}};(function(){try{var e=new XMLHttpRequest;e.open("get","/",!0)}catch{e={}}"response"in e&&(Yg.arraybuffer=function(){var n=new XMLHttpRequest,r=this,o=this.Ea,s=o.headers,l;if(n.open("GET",this.data),ah(n,o),n.responseType="arraybuffer",s)for(l in s)n.setRequestHeader(l,s[l]);return n.onerror=n.ontimeout=function(){r.reject(Ng.error())},n.onload=function(){r.resolve(new Ng(n.response))},n.send(),n})})();var bh=new Td(new Wg);Xg.prototype.Fp=function(){return bh};var Zg=x.document.createElement("a");function $g(e){var n=Ta(e);return delete n.crossOrigin,ah(n,e),n}function ah(e,n){e.withCredentials=n.crossOrigin==="use-credentials"}t("H.util.events.listenOnce",Qc),t("H.util.events.dispatchEvent",function(e,n){return e.dispatchEvent(n)}),t("H.util.events.fireListeners",function(e,n,r,o){if(uc(e))r=e.Kf(n,r,o);else{var s=!0;if((e=Tc(e))&&(n=e.pb[n.toString()]))for(n=n.concat(),e=0;e<n.length;e++){var l=n[e];l&&l.capture==r&&!l.ji&&(l=Zc(l,o),s=s&&l!==!1)}r=s}return r}),t("H.util.events.listen",Pc),t("H.util.events.unlisten",Xc);var ch=Zc;Zc=function(e,n){var r,o,s=!0,l=n[n.currentTarget===n.target?"AT_TARGET":e.capture?"CAPTURING_PHASE":(r=!0,"BUBBLING_PHASE")];return(!r||(o=n.type)!=="pointerenter"&&o!=="pointerleave")&&(n.eventPhase=l,s=ch(e,n),r&&e.src&&e.src.Jb&&e.src.Jb()===null&&delete n.eventPhase),s};function dh(e,n,r){dh.g.constructor.call(this,e),this.oldValue=r,this.newValue=n}u(dh,Ic),t("H.util.ChangeEvent",dh);function eh(e,n,r,o){eh.g.constructor.call(this,e,n,r),this.modifiers=o}u(eh,dh),t("H.map.ChangeEvent",eh);var fh={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};eh.Type=fh,eh.prototype.cy=fh.SIZE,eh.prototype.SIZE=eh.prototype.cy,eh.prototype.Ss=fh.POSITION,eh.prototype.POSITION=eh.prototype.Ss,eh.prototype.Ks=fh.HEADING,eh.prototype.HEADING=eh.prototype.Ks,eh.prototype.Vs=fh.TILT,eh.prototype.TILT=eh.prototype.Vs,eh.prototype.Ls=fh.INCLINE,eh.prototype.INCLINE=eh.prototype.Ls,eh.prototype.Ws=fh.ZOOM,eh.prototype.ZOOM=eh.prototype.Ws,eh.prototype.Es=fh.BOUNDS,eh.prototype.BOUNDS=eh.prototype.Es;function gh(){gh.g.constructor.call(this),this.Pn={},this.ki={position:new ze(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new M(lf([90,-180,90,0,90,180,-90,180,-90,-180]))},this.yu=!1}u(gh,F),t("H.map.ViewModel",gh),gh.prototype.j={za:"update",Pi:"sync"},gh.prototype.Zc=function(e,n){if(!e)throw new D(this.Zc,0,e);var r=e[hh];if(fb(r)&&!Ae(r))throw new D(this.Zc,0,hh);if(r=e[ih],fb(r)&&E(+r))throw new D(this.Zc,0,ih);if(r=e[jh],fb(r)&&!C(r,ye))throw new D(this.Zc,0,jh);return e=x.Object.assign({},e),r=kh(e,this.Pn,this.ki),lh(this,this.Pn,e),this.yu||lh(this,this.ki,e),this.dispatchEvent(new mh(this.Pn,r,n)),this},gh.prototype.setLookAtData=gh.prototype.Zc,gh.prototype.Ib=function(){var e={};return e[hh]=Be(this.ki[hh]),lh(this,e,this.ki,!0),e},gh.prototype.getLookAtData=gh.prototype.Ib;var hh="position",ih="zoom",jh="bounds",nh={Ss:hh,Ws:ih,Ks:"heading",Vs:"tilt",Ls:"incline",Es:jh},oh=Object.keys(nh).map(function(e){return nh[e]});function lh(e,n,r,o){e.Fv={},e.Ev={},e.ov=[];for(var s=e.aC,l=e.$B,h=oh.length,p,d,g;h--;)if(p=oh[h],g=r[p],d=n[p],d==null||!o)if(g!=null){if(fb(s)&&s.call(e,p,d,g),n[p]=p!=="position"||g&&!E(g.lat)&&!E(g.lng)?g:Be(g),fb(l)){switch(p){case"position":d=g&&d&&(g.lat!==d.lat||g.lng!==d.lng);break;case"bounds":d=g&&d&&!g.da(d);break;default:d=g!==d}d&&l.call(e,p)}}else delete n[p]}gh.prototype.aC=function(e,n,r){this.Fv[e]=n,this.Ev[e]=r},gh.prototype.$B=function(e){this.ov.push(ph[e])};var ph=oh.reduce(function(e,n){return e[n]=fh[n.toUpperCase()],e},{});function kh(e,n,r){var o=0;return["tilt","incline","heading",ih].forEach(function(s){E(e[s])?e[s]=E(n[s])?r[s]:n[s]:o|=ph[s]}),[hh,jh].forEach(function(s){e[s]?o|=ph[s]:e[s]=n[s]||r[s]}),o}gh.prototype.rb=function(e){var n={},r={};this.yu=!0,lh(this,this.ki,e),this.Pn={},n.lookAt=this.Ev,r.lookAt=this.Fv,e=this.ov,e=e.length?e.reduce(qh):0,this.dispatchEvent(new eh(this.j.Pi,n,r,e))},gh.prototype.synchronize=gh.prototype.rb;function qh(e,n){return e|n}gh.prototype.Vk=function(e,n){if(E(e=+e))throw new D(this.Vk,0,ih);this.Zc({zoom:e},n)},gh.prototype.Ub=function(){return this.ki.zoom},gh.prototype.Hd=Ab,gh.prototype.startControl=gh.prototype.Hd,gh.prototype.control=Ab,gh.prototype.control=gh.prototype.control,gh.prototype.hc=Ab,gh.prototype.endControl=gh.prototype.hc;function mh(e,n,r){mh.g.constructor.call(this,gh.prototype.j.za,e,null,n),this.animate=this.animate=ob(r)&&0<r&&1/0>r?r:!!r}u(mh,eh);function rh(e,n,r,o){this.left=+e,this.top=+n,this.right=+r,this.bottom=+o}t("H.math.Rect",rh),rh.prototype.set=rh,rh.prototype.set=rh.prototype.set,rh.prototype.Lc=function(){return this.ll||(this.ll=new L(this.left,this.top))},rh.prototype.getTopLeft=rh.prototype.Lc,rh.prototype.Jc=function(){return this.Si||(this.Si=new L(this.right,this.bottom))},rh.prototype.getBottomRight=rh.prototype.Jc,rh.prototype.Ql=function(e,n){return this.left<=e&&this.right>=e&&this.top<=n&&this.bottom>=n},rh.prototype.containsXY=rh.prototype.Ql;function sh(e,n){return new rh(e.x,e.y,n.x,n.y)}rh.fromPoints=sh,rh.prototype.clone=function(){return new rh(this.left,this.top,this.right,this.bottom)},rh.prototype.clone=rh.prototype.clone;function th(e,n){this.w=+e,this.h=+n}t("H.math.Size",th);function uh(e,n){n=n||{};var r;if(!C(e,Element))throw new D(uh,0,e);var o=e.ownerDocument.createElement("div");this.G=e,uh.g.constructor.call(this),this.padding=new rh(0,0,0,0),this.center=new L(0,0),this.margin=0,this.element=o,o.style.zIndex=0,o.style.height=o.style.width="100%",o.style.direction="ltr",o.style.position=e.style.position==="relative"?"absolute":"relative",this.resize(),e.appendChild(o),(r=n.padding)!==B&&this.Vr(r.top,r.right,r.bottom,r.left),this.Qr((r=n.margin)!==B?r:0)}u(uh,F),t("H.map.ViewPort",uh),uh.prototype.j={za:"update",Pi:"sync"},uh.prototype.Qr=function(e){if(this.margin!==+e){if(E(this.margin=+e))throw new D(this.Qr,0,e);this.Ce(),this.dispatchEvent(this.j.za)}},uh.prototype.setMargin=uh.prototype.Qr,uh.prototype.Vr=function(e,n,r,o){var s=this.padding;if(s.top!==e||s.right!==n||s.bottom!==r||s.left!==o){if(E(e+n+r+o))throw new D(this.Vr);s.top=e,s.right=n,s.bottom=r,s.left=o,this.Ce(),this.dispatchEvent(this.j.za)}},uh.prototype.setPadding=uh.prototype.Vr,uh.prototype.Ce=function(){var e=this.padding;this.center.set((this.width+e.left-e.right)/2<<0,(this.height+e.top-e.bottom)/2<<0)},uh.prototype.resize=function(){var e=this.G.offsetWidth,n=this.G.offsetHeight;(this.width!==e||this.height!==n)&&(this.OB=new th(this.width,this.height),this.width=e,this.height=n,this.Ce(),this.dispatchEvent(this.j.za))},uh.prototype.resize=uh.prototype.resize,uh.prototype.rb=function(e){this.dispatchEvent(new eh(this.j.Pi,this.OB,e,fh.SIZE))},uh.prototype.synchronize=uh.prototype.rb,uh.prototype.disposeInternal=function(){this.G.removeChild(this.element),delete this.G,delete this.element,uh.g.disposeInternal.call(this)},uh.prototype.Id=Ab,uh.prototype.startInteraction=uh.prototype.Id,uh.prototype.vd=Ab,uh.prototype.interaction=uh.prototype.vd,uh.prototype.ic=Ab,uh.prototype.endInteraction=uh.prototype.ic,t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function vh(){}function wh(e){return Db(1,Eb(0,.5-Jb(Qb(Wb+Vb*e/180))/Ub/2))}vh.prototype.Sm=function(e,n,r){return r?(r.x=n/360+.5,r.y=wh(e)):r=new L(n/360+.5,wh(e)),r},vh.prototype.latLngToPoint=vh.prototype.Sm,vh.prototype.Re=function(e,n){return this.Sm(e.lat,e.lng,n)},vh.prototype.geoToPoint=vh.prototype.Re;function xh(e){return 0>=e?90:1<=e?-90:$b*(2*Rb(Mb(Ub*(1-2*e)))-Vb)}vh.prototype.Za=function(e,n,r){return r?(r.lat=xh(n),r.lng=360*(e===1?1:dc(e,1))-180):r=new ze(xh(n),360*(e===1?1:dc(e,1))-180),r},vh.prototype.xyToGeo=vh.prototype.Za,vh.prototype.wn=function(e,n){return this.Za(e.x,e.y,n)},vh.prototype.pointToGeo=vh.prototype.wn;var yh=new vh;t("H.geo.mercator",yh);function zh(e,n){this.projection=e||yh,this.Ji=0,this.jl=this.exp=Jb(n||256)/Tb,Ah(this),this.y=this.x=0}t("H.geo.PixelProjection",zh);var Bh=Ib(24)+Ib(-8);zh.prototype.Dn=yh,zh.prototype.projection=zh.prototype.Dn,zh.prototype.x=0,zh.prototype.x=zh.prototype.x,zh.prototype.y=0,zh.prototype.y=zh.prototype.y,zh.prototype.w=Lb(2,Bh),zh.prototype.w=zh.prototype.w,zh.prototype.QA=Lb(2,Bh),zh.prototype.h=zh.prototype.QA,zh.prototype.Va=function(e){if(E(e))throw new D(this.Va,0,e);var n=this.x/this.w,r=this.y/this.h;this.Ji=e,this.jl=this.exp+e,Ah(this),this.x=n*this.w,this.y=r*this.h},zh.prototype.rescale=zh.prototype.Va;function Ah(e){e.jl>Bh&&(e.jl=Bh),e.w=Lb(2,e.jl),e.h=Lb(2,e.jl)}zh.prototype.wu=function(){return this.Ji||0},zh.prototype.getZoomScale=zh.prototype.wu,zh.prototype.Gb=function(e,n){return e=this.projection.Sm(e.lat,e.lng,n),e.x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},zh.prototype.geoToPixel=zh.prototype.Gb,zh.prototype.sk=function(e,n){return this.projection.Za((e.x+this.x)/this.w,(e.y+this.y)/this.h,n)},zh.prototype.pixelToGeo=zh.prototype.sk,zh.prototype.Za=function(e,n,r){return this.projection.Za((e+this.x)/this.w,(n+this.y)/this.h,r)},zh.prototype.xyToGeo=zh.prototype.Za,zh.prototype.wq=function(e,n,r){return e=this.projection.Sm(e,n,r),e.x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},zh.prototype.latLngToPixel=zh.prototype.wq,zh.prototype.ci=function(e){return new L(e.x*this.w-this.x,e.y*this.h-this.y)},zh.prototype.pointToPixel=zh.prototype.ci;function Ch(){this.aa=[],Ch.g.constructor.call(this)}u(Ch,F),t("H.util.OList",Ch);function Dh(e,n,r){if(e=e.aa.length,r)var o=e;else if(E(o=0>(o=+n)?Eb(0,e+o):Db(e,o)))throw new Vd(Ch,n,[0,e-1]);return o}Ch.prototype.Bo=function(e,n){this.aa.splice(n,0,e),this.dispatchEvent(new Eh(this,this.j.Li,n,e,null,null))},Ch.prototype.add=function(e,n){this.Bo(e,Dh(this,n,E(n)))},Ch.prototype.add=Ch.prototype.add,Ch.prototype.nf=function(e){var n=this.aa.splice(e,1)[0];return this.dispatchEvent(new Eh(this,this.j.Ni,e,null,n,null)),n},Ch.prototype.Dd=function(e){return this.get(e),this.nf(e)},Ch.prototype.removeAt=Ch.prototype.Dd,Ch.prototype.remove=function(e){return e=this.indexOf(e),0<=e?(this.nf(e),!0):!1},Ch.prototype.remove=Ch.prototype.remove,Ch.prototype.set=function(e,n){if(this.aa.length!==0||e!==0){this.get(e),e=Dh(this,e,!1);var r=this.aa[e]}return this.aa[e]=n,this.dispatchEvent(new Eh(this,this.j.Oi,e,n,r,null)),r},Ch.prototype.set=Ch.prototype.set,Ch.prototype.indexOf=function(e){return this.aa.indexOf(e)},Ch.prototype.indexOf=Ch.prototype.indexOf,Ch.prototype.get=function(e){var n=Dh(this,e,!1),r=this.aa;if(n>=r.length)throw new Vd(this.get,e,[0,r.length-1]);return r[n]},Ch.prototype.get=Ch.prototype.get,Ch.prototype.cA=function(){return this.aa.length},Ch.prototype.getLength=Ch.prototype.cA,Ch.prototype.Sa=function(){return[].concat(this.aa)},Ch.prototype.asArray=Ch.prototype.Sa,Ch.prototype.flush=function(){for(var e=this.aa.length;e--;)this.nf(e)},Ch.prototype.flush=Ch.prototype.flush,Ch.prototype.disposeInternal=function(){this.flush(),Ch.g.disposeInternal.call(this)},Ch.prototype.j={Li:"add",Ni:"remove",Oi:"set",OD:"move"};function Eh(e,n,r,o,s,l){Eh.g.constructor.call(this,n,e),this.idx=r,this.added=o,this.removed=s,this.moved=l}u(Eh,Ic),Ch.Event=Eh;var Fh={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};t("H.map.provider.Capabilities",Fh),Fh.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Fh.PROVIDES_SPATIALS|Fh.PROVIDES_OVERLAYS|Fh.PROVIDES_MARKERS;var Gh;function Hh(e,n){if(x.URL)return new x.URL(e,n).toString();if(!e||!Ih(e))return e;if(!n||Ih(n))throw new TypeError("Failed to construct 'URL': Invalid base URL");Gh||(Gh=document.createElement("a"),rb(Gh));var r=Gh;return r.href=n,e[0]!=="/"?e=r.href.replace(/\/[^\/]*$/,"/")+e:((n=r.origin)||(n=r.protocol+"//"+r.host),e=n+e),e}function Ih(e){var n=!1;return typeof e=="string"&&(n=!(-1<e.search(/^(http|https|data|blob):/)||e.substr(0,2)==="//")),n}function Jh(e,n){var r,o=arguments.length,s,l;for(r=1;r<o;r++)if((s=arguments[r])&&s!==e&&s!==h){var h=s;for(l in s){var p=s[l];e[l]!==p&&(Kh(p)?Kh(e[l])?e[l]=Jh(e[l],p):e[l]=cb(p):p!==void 0&&(e[l]=cb(p)))}}return e}t("H.util.webgl.mergeObjects",Jh);var Lh=Za();function Mh(e,n,r){var o=r[e];return n&&o in n&&0>eb.indexOf(o)?(n=n[o],++e<r.length?Mh(e,n,r):n):Lh}var Nh=Mh.bind(null,0),Oh={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},Ph={data:1,draw:1,enabled:1,filter:1,properties:1},Qh=Object.keys(Ph);function Rh(e,n,r,o,s,l){var h=o[e],p=r[h];if(++e<o.length){var d=n[h]||{};for(r=Qh.length;r--;){var g=Qh[r];if(g!=="draw"||!l){var y=p[g];y!==B&&(d[g]=cb(y))}}Rh(e,d,p,o,s,l)}else s?d=cb(p):(d=p,delete r[h]);n[h]=n[h]?Jh(n[h],d):d}var Sh=Rh.bind(null,0);function Th(e,n){e in Oh&&(n[e]=1)}function Uh(e,n,r){var o,s,l;for(o in e)if(Ph[o]){if(o==="draw"){var h=e[o];for(s in h){var p=h[s];(l=p.style)?(p.style=n+l,Th(l,r)):(delete h[s],h[n+s]=p,Th(s,r))}}}else Uh(e[o],n,r)}function Vh(e,n){var r={},o,s,l,h;if(n+="_",e=Jh({},e),o=e.styles)for(s in o){var p=o[s];if(delete o[s],o[n+s]=p,l=p.mix)for(lb(l)&&(l=[l]),h=l.length;h--;)Th(l[h],r),l[h]=n+l[h];(h=p.base)&&(l||(l=p.mix=[]),l.unshift(n+h),delete p.base,Th(h,r)),Th(s,r)}else o=e.styles={};if(p=e.layers)for(s in p)l=p[s],delete p[s],(h=l.data)&&!h.layer&&(h.layer=s),p[n+s]=l,Uh(l,n,r);for(s in r)o[n+s]={base:s};return e}function Wh(e,n){var r=e.sources,o=Object.keys(r)[0],s=Jh(r[o],{uid:n});r=e.layers;var l;e.sources={},e.sources[n]=s;for(l in r)e=r[l],e.data?e.data.source===o&&(e.data.source=n):e.data={source:n}}function Xh(e,n){var r,o=e.textures;e=e.fonts;for(r in o){var s=o[r];s.url&&(s.url=Hh(s.url,n))}for(r in e)if(s=e[r],kb(s))for(o=0;o<s.length;o++){var l=s[o];l.url=l.url&&Hh(l.url,n)}else l=s,l.url=l.url&&Hh(l.url,n)}function Yh(e,n){return"function(){return "+("feature."+e+(n||""))+";}"}function Zh(e){return Yh("style."+e,void 0)}function $h(e,n,r,o){return e={base:e,blend:n,blend_order:r},o&&(e.clean_depth=!!o),e}function ai(e){var n={};return n["translucent-"+(e?"extruded-":"")+"polygons"]={color:Zh("fillColor"),order:1,interactive:!0,extrude:e},n}function bi(e,n,r,o){return e={data:{source:e,layer:n}},r&&(e.draw=r),o&&(e.filter=o),e}function Kh(e){return ya(e)&&!kb(e)}function ci(e,n){if(ci.g.constructor.call(this),n&&Ih(n))throw new D(ci,1,"Base URL must be absolute");this.o=di.INIT,this.Ia=null,this.kd=n}u(ci,F),t("H.map.render.Style",ci),ci.prototype.load=ci.prototype.load,ci.prototype.getState=function(){return this.o},ci.prototype.getState=ci.prototype.getState,ci.prototype.F=function(e){this.o=e},ci.prototype.setState=ci.prototype.F,ci.prototype.Ic=function(){return this.kd},ci.prototype.getBaseUrl=ci.prototype.Ic,ci.prototype.Rd=function(){return cb(this.Ia)},ci.prototype.getConfig=ci.prototype.Rd,ci.prototype.yz=function(){return this.Ia},ci.prototype.getConfigReference=ci.prototype.yz,ci.prototype.Dg=function(e){this.Ia=e},ci.prototype.setConfig=ci.prototype.Dg,ci.prototype.Gc=function(e){this.Ia=null,this.F(di.ERROR),this.bq(ei)?this.dispatchEvent(new cd(ei,e,this)):console.error(e)},ci.prototype.dispatchError=ci.prototype.Gc,ci.prototype.disposeInternal=function(){ci.g.disposeInternal.call(this),this.Ia=null};var ei="error",fi={zf:"change",Js:ei},di={ERROR:-1,INIT:0,LOADING:1,READY:2};ci.State=di;function gi(e,n){if(gi.g.constructor.call(this,e,n),lb(e))hi.test(e)&&e.indexOf("import:")===-1?(this.wc=e,n||(this.YA=Ih(this.wc)?B:this.wc)):this.po=e;else if(ya(e))this.Dg(cb(e));else throw new D(gi,0,"invalid style configuration")}u(gi,ci),t("H.map.render.webgl.Style",gi),gi.prototype.load=function(){var e=this,n=this.Ic();this.wc?(this.F(di.LOADING),new Xg("text/plain",this.wc).then(function(r){var o={};return ii(r,n,!1,(o[n]=!0,o))}).then(function(r){return e.Dg(r)},function(r){return e.Gc(r.message)}),delete this.wc):this.po&&(this.F(di.LOADING),ii(this.po,n).then(function(r){return e.Dg(r)},function(r){return e.Gc(r.message)}),delete this.po)},gi.prototype.load=gi.prototype.load,gi.prototype.Uw=function(e,n,r){var o;for(ji(this),e=ki(this,e,this.Uw,r),r=0;r<e.length;r++){var s=e[r].yb.draw;for(o in s){var l=s[o];Kh(l)&&(l.interactive=!!n)}}li(this)},gi.prototype.setInteractive=gi.prototype.Uw,gi.prototype.setProperty=function(e,n,r){var o,s=e.split("."),l=0,h=s.length;if(ji(this),!fb(n))throw new D(this.setProperty,1,"value");if(o=mi(this.Ia,s)){if(!(o.parent instanceof Object)||o.parent instanceof Array)if(r)s.pop(),s=mi(this.Ia,s),o.parent=s.parent[s.En]={};else throw new D(this.setProperty,0,e+" property is not primitive type");o.parent[o.En]=n}else{for(o=this.Ia;l!==h-1;)o[s[l]]={},o=o[s[l++]];o[s[l]]=n}ni(this)&&li(this)},gi.prototype.setProperty=gi.prototype.setProperty,gi.prototype.Op=function(e){return ji(this),(e=mi(this.Ia,e.split(".")))?cb(e.node):void 0},gi.prototype.getProperty=gi.prototype.Op,gi.prototype.removeProperty=function(e){ji(this),(e=mi(this.Ia,e.split(".")))&&e.parent&&e.parent.hasOwnProperty(e.En)&&(delete e.parent[e.En],ni(this)&&li(this))},gi.prototype.removeProperty=gi.prototype.removeProperty,gi.prototype.wj=function(e,n,r){var o;ji(this);var s=this.Ia,l=s.layers,h=ki(this,e,this.wj,!1);for(e=h.length,o={};e--;)Sh(o,l,h[e].id,!!n,!!r);for(r={},h=Object.keys(s),e=h.length;e--;){var p=h[e],d=s[p];r[p]=d===l?o:cb(d)}return n||li(this),r},gi.prototype.extractConfig=gi.prototype.wj,gi.prototype.fk=function(e){if(ji(this),!ya(e))throw new D(this.fk,0,"config");this.Dg(Jh(this.Ia,e))},gi.prototype.mergeConfig=gi.prototype.fk,gi.prototype.Yb=ca(2),gi.prototype.toString=function(){return this.getState()===di.READY?x.H.gl.yaml.dump(this.Ia,{lineWidth:120}):""},gi.prototype.disposeInternal=function(){gi.g.disposeInternal.call(this),delete this.po,delete this.wc};function ni(e){var n=e.Ia,r;if(ya(n)){var o;if(o=e.ts){n=n&&n.sources,o=!1;for(var s in n)if(n[s].type===e.ts){o=!0;break}o=!(!n||o)}o&&(r="invalid source, the only valid type is "+e.ts)}else r="invalid style configuration";return r&&e.Gc(r),!r}function li(e){e.dispatchEvent(new Ic("change",e))}function ji(e){if(e.getState()!==di.READY)throw new Bb(e.fk,"style is not ready yet")}function ki(e,n,r,o){var s=[],l=kb(n)?n:[n],h,p;for(o===void 0&&(o=!0),l=l.sort().reverse();h=l.pop();){n=String(h).split(".");t:{for(var d=e.Ia,g=n.length;g--&&!Ph[n[g]];);if(d&&0>g&&(d=Nh(d.layers,n),Kh(d)))break t;d=Lh}if(d===Lh)throw new D(r,0,'Unresolvable layer ID "'+h+'"');if(s.push({id:n,yb:d}),o)for(p in d)!Ph[p]&&Kh(d[p])&&l.push(h+"."+p)}return s}function mi(e,n){var r=0,o;for(o=n.length;r!==o;){var s=n[r++],l=e;if(e=l[s],!e)break}return r===o?{node:e,parent:l,En:s}:void 0}var hi=/^(http[s]?)?.*\.ya?ml/i;function ii(e,n,r,o){r=r===void 0?!1:r,o=o===void 0?{}:o;try{var s=x.H.gl.yaml.load(e,{json:!0})}catch(l){return Promise.reject(l)}return s&&(e=s.import,lb(e)&&(e=[e]),r&&n&&oi(s,n),delete s.import,kb(e)&&e.length)?(r=e.reduce(function(l,h){var p=n?Hh(h,n):h;return o[p]||(o[p]=!0,l.push(new Xg("text/plain",p).then(function(d){return ii(d,p,!0,o)}))),l},[]),Promise.all(r).then(function(l){var h={};return l.forEach(function(p){return p&&Jh(h,p)}),Jh(h,s),h})):Promise.resolve(s)}function oi(e,n){function r(h){h.url&&(h.url=Hh(h.url,n))}var o=e&&e.fonts;if(o)for(var s in o)kb(o[s])?o[s].forEach(r):r(o[s]);if(e=e&&e.textures)for(var l in e)r(e[l])}gi.normalize=oi,gi.prototype.Dg=function(e){gi.g.Dg.call(this,e),ni(this)&&(this.F(di.READY),li(this))},gi.prototype.Rd=function(){return gi.g.Rd.call(this)},gi.prototype.getConfig=gi.prototype.Rd,gi.prototype.Ic=function(){return this.YA||gi.g.Ic.call(this)},gi.prototype.getBaseUrl=gi.prototype.Ic;var pi={FEATURE:1,SOURCE:2,PROVIDER:3};t("H.map.provider.PickingMode",pi);function qi(e){this.Aa=e}qi.prototype.Je=function(){var e={};if(this.Aa&Fh.PROVIDES_RASTERS&&(e={"translucent-raster":$h("raster","inlay",1)}),this.Aa&Fh.PROVIDES_WEBGL_RENDERABLE_OBJECTS){var n=!!(this.Aa&Fh.CROP_LINES_BY_TILE),r={"translucent-polygons":$h("polygons","inlay",2),"translucent-extruded-polygons":$h("polygons","translucent",3),"translucent-pattern-lines":$h("pattern-lines","translucent",4),"translucent-overlays":$h("overlays","inlay",5),markers:$h("custom_icons","overlay",6,!1)};r["translucent-polygons"].crop_by_tile=!!(this.Aa&Fh.CROP_POLYGONS_BY_TILE),r["translucent-pattern-lines"].crop_by_tile=n,r.markers.suppress_fade=!0,r.markers.stick=!0,Wa(e,r)}return e};function ri(e,n,r,o,s){this.Aa=e,this.uid=n,this.Bv=r,this.Kq=o,this.tileSize=s}ri.prototype.Je=function(){var e={};return e[this.uid]=this.Aa&Fh.PROVIDES_BY_VIEWPORT?si(this,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(this.Aa&Fh.HAS_VOLATILE_DATA)}):this.Aa&Fh.PROVIDES_RASTERS?si(this,"RemoteRasterTileSource",!0,{url:""}):si(this,"ObjectTileSource",!0,{tile_size:this.tileSize}),e};function si(e,n,r,o){return e={type:n,uid:e.uid,tiled:r,max_zoom:e.Kq},o&&Wa(e,o),e}function ti(e,n,r){this.Aa=e,this.uid=n,this.opacity=r,this.$m=this.Aa&Fh.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.ag={}}ti.prototype.Je=function(){if(this.Aa&Fh.PROVIDES_RASTERS&&(this.ag["tile_layer_"+this.uid]=bi(this.uid,"_default",{"translucent-raster":{color:[1,1,1,this.opacity],order:0}})),this.Aa&Fh.PROVIDES_SPATIALS){var e={"translucent-pattern-lines":{color:Zh("strokeColor"),width:Zh("lineWidth * $meters_per_pixel"),join:Zh("lineJoin"),cap:Zh("lineCap"),tail_cap:Zh("lineTailCap"),head_cap:Zh("lineHeadCap"),miter_limit:Zh("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:Zh("lineDash"),extrude:!0,dash_phase:Zh("lineDashOffset")}},n=this.ag,r="polygon_layer_"+this.uid,o=bi(this.uid,"polygons",void 0,this.$m);o.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:ai(!1)},o.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:ai(!0)},n[r]=o,this.ag["outline_layer_"+this.uid]=bi(this.uid,"outlines",e,this.$m),this.ag["polyline_layer_"+this.uid]=bi(this.uid,"polylines",e,this.$m)}return this.Aa&Fh.PROVIDES_OVERLAYS&&(this.ag["overlay_layer_"+this.uid]=bi(this.uid,"overlays",{"translucent-overlays":{color:[1,1,1,this.opacity],order:8190,interactive:!0}})),this.Aa&Fh.PROVIDES_MARKERS&&(this.ag["marker_layer_"+this.uid]=bi(this.uid,"markers",{markers:{sprite:Yh("icon.id"),offset:Yh("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:Yh("icon.stick_color"),height:Yh("icon.stick_height")}}},this.$m)),this.ag};function ui(e,n,r,o,s,l){this.Aa=e,this.uid=n,this.Bv=r,this.Kq=o,this.opacity=s,this.tileSize=l}ui.prototype.Je=function(){if(this.Aa&Fh.PROVIDES_DOM_MARKERS&&!(this.Aa&Fh.PROVIDES_MARKERS))return{};var e=new ri(this.Aa,this.uid,this.Bv,this.Kq,this.tileSize),n=new qi(this.Aa),r=new ti(this.Aa,this.uid,this.opacity);return e=e.Je(),n=n.Je(),r=r.Je(),{sources:e,styles:n,layers:r}};function Q(e){var n=""+he(),r;if(Q.g.constructor.call(this),e=e||{},this.min=e.min||0,this.max=e.max||22,r=e.uri){if(/_/.test(r))throw new D(Q,0,"uri "+r)}else r=n;if(this.uri=r||n,this.uid=n,e.getCopyrights&&ib(e.getCopyrights,"Function",Q)&&(this.getCopyrights=e.getCopyrights),this.Eb=this.Eb.bind(this),this.lq=!0,this.vb=e.engineType||vi,this.vb===wi.HARP&&!H.map.render.harp)throw new D(Q,0,"HARP engine is not supported, module not found")}u(Q,F),t("H.map.provider.Provider",Q),m=Q.prototype,m.j={Mi:"configchange",za:"update"},m.jb=function(e,n){this.dispatchEvent(new dd(this.j.za,n,e))},m.Eb=function(e){e=new dh(this.j.Mi,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},m.disposeInternal=function(){F.prototype.disposeInternal.call(this),this.Ya&&(this.Ya.removeEventListener("change",this.Eb),this.Ya.l(),delete this.Ya)},m.U=function(){return null},Q.prototype.getCopyrights=Q.prototype.U,Q.prototype.getCapabilities=function(){var e=0;return this.qr()&&(e|=Fh.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(e|=Fh.PROVIDES_RASTERS),this.providesSpatials()&&(e|=Fh.PROVIDES_SPATIALS),this.providesOverlays()&&(e|=Fh.PROVIDES_OVERLAYS),this.providesMarkers()&&(e|=Fh.PROVIDES_MARKERS),this.providesDomMarkers()&&(e|=Fh.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(e|=Fh.PROVIDES_GEOJSON),this.providesOMV()&&(e|=Fh.PROVIDES_OMV),e},Q.prototype.getCapabilities=Q.prototype.getCapabilities,Q.prototype.qr=je,Q.prototype.zk=je,Q.prototype.providesRasters=Q.prototype.zk,Q.prototype.me=je,Q.prototype.providesSpatials=Q.prototype.me,Q.prototype.sr=je,Q.prototype.providesOverlays=Q.prototype.sr,Q.prototype.Uc=je,Q.prototype.providesMarkers=Q.prototype.Uc,Q.prototype.Tc=je,Q.prototype.providesDomMarkers=Q.prototype.Tc,Q.prototype.rr=je,Q.prototype.providesGeoJSON=Q.prototype.rr,Q.prototype.Vc=je,Q.prototype.providesOMV=Q.prototype.Vc,Q.prototype.Iz=function(){return this.vb},Q.prototype.getEngineType=Q.prototype.Iz,Q.prototype.WC=function(e){this.vb=e},Q.prototype.setEngineType=Q.prototype.WC,Q.prototype.xk=ke,Q.prototype.preprocessData=Q.prototype.xk,Q.prototype.Qc=1,Q.prototype.Eg=function(e){e=fc(e,0,1),E(e)&&(e=1),this.Qc!==e&&(this.Qc=e,this.lq&&xi(this),this.Eb(),this.jb())},Q.prototype.jA=function(){return this.Qc},Q.prototype.getOpacityInternal=Q.prototype.jA,Q.prototype.Xa=function(e,n){var r=this;if(this.vb===wi.WEBGL&&!C(e,gi)||this.vb===wi.HARP&&!C(e,H.map.render.harp.Style))throw e=Object.entries(wi).find(function(o){return o[1]===r.vb}),new D(this.Xa,0,"Invalid style for engineType "+e);this.Ya&&(this.Ya.removeEventListener("change",this.Eb),this.Ya.removeEventListener(ei,this.Eb),this.Ya.l()),this.Ya=e,this.Ya.addEventListener("change",this.Eb),this.Ya.addEventListener(ei,this.Eb),n||this.Eb(),this.lq=!1},Q.prototype.setStyleInternal=Q.prototype.Xa,Q.prototype.mb=function(){return this.Ya||xi(this),this.Ya},Q.prototype.getStyleInternal=Q.prototype.mb;function xi(e){if(e.vb===wi.WEBGL){var n=new ui(e.getCapabilities(),e.uid,e.min,e.max,e.Qc,e.tileSize);e.Ya=new gi(n.Je())}else e.vb===wi.HARP&&H.map.render.harp&&(e.Ya=new H.map.render.harp.Style({}));e.lq=!0}Q.prototype.qu=function(){var e=this.getCapabilities(),n=pi.FEATURE;return e&Fh.PROVIDES_BY_VIEWPORT?n=pi.SOURCE:e&Fh.PROVIDES_RASTERS?n=null:e&Fh.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(n=pi.PROVIDER),n},Q.prototype.getPickingMode=Q.prototype.qu,Q.prototype.Nz=function(){return!1},Q.prototype.getFeatureProxy=Q.prototype.Nz;function yi(e){e=e||{},yi.g.constructor.call(this),this.min=0,this.max=22,this.Ly=this.dark=!!e.dark,e.min&&this.Tr(e.min),e.max&&this.Rr(e.max),this.pixelProjection=new zh(e.projection,e.minWorldSize),e.provider&&(this.D=e.provider,this.jb=A(this.jb,this),this.D.addEventListener(Q.prototype.j.za,this.jb,!1,this),this.Eb=A(this.Eb,this),this.D.addEventListener(Q.prototype.j.Mi,this.Eb,!1,this))}u(yi,F),t("H.map.layer.Layer",yi),yi.prototype.min=0,yi.prototype.min=yi.prototype.min,yi.prototype.max=22,yi.prototype.max=yi.prototype.max,yi.prototype.j={za:"update",Mi:"configchange",Qs:"minchange",Ps:"maxchange"},yi.prototype.Pp=function(){return this.D},yi.prototype.getProvider=yi.prototype.Pp,yi.prototype.eB=function(e){return this.min<=e&&e<=this.max},yi.prototype.isValid=yi.prototype.eB;function zi(e,n,r){var o=e[n],s=n==="min",l=s?e.Tr:e.Rr;if(r!==o)if(s?r<=e.max:r>=e.min)e[n]=r,e.jb(),e.Eb(),e.dispatchEvent(new dh(s?e.j.Qs:e.j.Ps,r,o));else throw new D(l,0,"Invalid condition min <= max");return e}yi.prototype.Tr=function(e){return zi(this,"min",+e)},yi.prototype.setMin=yi.prototype.Tr,yi.prototype.Rr=function(e){return zi(this,"max",+e)},yi.prototype.setMax=yi.prototype.Rr,yi.prototype.jb=function(){this.dispatchEvent(this.j.za)},yi.prototype.Eb=function(e){e=new dh(this.j.Mi,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},yi.prototype.disposeInternal=function(){yi.g.disposeInternal.call(this)},yi.prototype.U=function(){return null},yi.prototype.getCopyrights=yi.prototype.U;function Ai(e){var n;if(Ai.g.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),e){var r=e.length;for(n=0;n<r;n++)this.add(e[n])}}u(Ai,Ch),t("H.map.DataModel",Ai);function Bi(e,n){var r=n.getProvider&&n.getProvider();r&&(Ci[r.uid]=r),n.ea(e)}function Di(e){var n=e.getProvider&&e.getProvider();n&&delete Ci[n.uid],e.ea(null)}Ai.prototype.add=function(e,n){C(e,yi,this.add,0),Bi(this,e),Ai.g.add.call(this,e,n)},Ai.prototype.add=Ai.prototype.add,Ai.prototype.set=function(e,n){return C(n,yi,this.set,0),Bi(this,n),(e=Ai.g.set.call(this,e,n))&&Di(e),e},Ai.prototype.set=Ai.prototype.set,Ai.prototype.Dd=function(e){var n;return(n=Ai.g.Dd.call(this,e))&&Di(n),n},Ai.prototype.removeAt=Ai.prototype.Dd,Ai.prototype.remove=function(e){var n;return(n=Ai.g.remove.call(this,e))&&Di(e),n},Ai.prototype.remove=Ai.prototype.remove,Ai.prototype.flush=function(){for(var e=this.aa.length;e--;)this.Dd(e);Ai.g.flush.call(this)},Ai.prototype.flush=Ai.prototype.flush;var Ci={};rb(Ci);function Ei(e,n,r){if(e=Ci[e])return C(e[n],Function,Ei,1,"invalid method"),e[n].apply(e,r)}Ai.invoke=Ei;function Fi(e,n,r,o){var s=new rh(0,0,0,0);if(Fi.g.constructor.call(this),!e)throw new D(Fi,0,e);if(!n)throw new D(Fi,1,n);if(!r)throw new D(Fi,2,r);if(typeof o!="object")throw new D(Fi,3,o+" is not an object");if(typeof o.pixelRatio!="number")throw new D(Fi,3,o.pixelRatio+" is not a number");this.ja=o.pixelRatio,this.zoom=0,this.Ab=Jb(this.ja)/Tb,this.pixelProjection=new zh,this.rl={1:s.clone(),2:s.clone(),4:s.clone()},this.xd=new L(.5,.5),this.ya=e,Gi(this,this.ja),this.Id=A(this.Id,this),this.vd=A(this.vd,this),this.ic=A(this.ic,this),e.startInteraction=this.Id,e.interaction=this.vd,e.endInteraction=this.ic,e.addEventListener(e.j.za,this.mg,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.Ng,this.relaunch=this.ba,this.dispose=this.l,this.screenToGeo=this.Wa,this.geoToScreen=this.Ka,this.screenToLookAtData=this.Un,this.De=n,this.Hd=A(this.Hd,this),this.control=A(this.control,this),this.hc=A(this.hc,this),n.startControl=this.Hd,n.control=this.control,n.endControl=this.hc,n.addEventListener(n.j.za,this.ar,!1,this),this.ib=r,this.gn=A(this.gn,this),this.ig=A(this.ig,this),this.jg=A(this.jg,this),this.fn=A(this.fn,this),r.addEventListener(yi.prototype.j.za,this.gn,!1,this),r.addEventListener(r.j.Li,this.ig,!1,this),r.addEventListener(r.j.Ni,this.jg,!1,this),r.addEventListener(r.j.Oi,this.fn,!1,this)}u(Fi,F),t("H.map.render.RenderEngine",Fi),Fi.prototype.Ng=function(){};function Gi(e,n){var r=e.ya,o=r.width,s=r.height,l=r.padding,h=l.top,p=l.left,d=l.bottom;l=l.right,r=r.margin;var g=-(o+p-l)/2<<0,y=-(s+h-d)/2<<0;o+=g,s+=y,e=e.rl,e[1].set((g-r)*n,(y-r)*n,(o+r)*n,(s+r)*n),e[2].set(g*n,y*n,o*n,s*n),e[4].set((g+p)*n,(y+h)*n,(o-l)*n,(s-d)*n)}Fi.prototype.mg=function(){Gi(this,this.ja)},Fi.prototype.disposeInternal=function(){var e=this.ya,n=this.De,r=this.ib;e.removeEventListener(e.j.za,this.mg,!1,this),e.startInteraction===this.Id&&(e.startInteraction=uh.prototype.Id),e.interaction===this.vd&&(e.interaction=uh.prototype.vd),e.endInteraction===this.ic&&(e.endInteraction=uh.prototype.ic),n.removeEventListener(n.j.za,this.ar,!1,this),n.startControl===this.Hd&&(n.startControl=gh.prototype.Hd),n.control===this.control&&(n.control=gh.prototype.control),n.endControl===this.hc&&(n.endControl=gh.prototype.hc),r.removeEventListener(yi.prototype.j.za,this.gn,!1,this),r.removeEventListener(r.j.Li,this.ig,!1,this),r.removeEventListener(r.j.Ni,this.jg,!1,this),r.removeEventListener(r.j.Oi,this.fn,!1,this)},Fi.prototype.Mr=function(e){this.Fo=e},Fi.prototype.setAnimationCallback=Fi.prototype.Mr,Fi.prototype.Dr=function(){this.Fo=void 0},Fi.prototype.resetAnimationCallback=Fi.prototype.Dr,Fi.prototype.control=function(){},Fi.prototype.capture=function(){return Cd(Error("not implemented"))};function Hi(e,n){e.style.transition="opacity 1.5s",Qc(e,"transitionend",n,!1),e.style.opacity=0}var Ii={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};Fi.InteractionModifiers=Ii,m=Fi.prototype,m.j={Us:"render"},m.gn=function(e){this.Nv(e),this.ba()},m.ig=function(e){this.pk(e.idx,e.added)},m.jg=function(e){this.Uq(e.idx,e.removed,e.type===this.ib.j.Oi)},m.fn=function(e){e.removed&&this.jg(e),this.ig(e)},m.Nv=ke,m.pk=function(e,n){this.hq(e,n),e===0&&this.yc(),C(n,yi)&&Ji(this,n,!0),this.mi(),this.ba()},m.yc=function(){var e=this.ib.Sa();if(0<e.length){var n=e[0].max;this.zq=e[0].min,this.yq=n}else e=this.getCapabilities().lookAt.zoom,n=e.max,this.zq=e.min,this.yq=n;e=Ki(this,this.zoom),e!==this.zoom&&(this.zoom=e,this.pixelProjection.Va(e),this.rb())},m.rb=function(e){this.uf=this.Ib(),e&&(this.uf.position=e),this.uf.zoom=this.zoom-this.Ab,this.uf.position.alt=0},m.tx=0,m.heading=180,m.Ib=function(){return Li(this,{position:this.pixelProjection.projection.wn(this.xd),zoom:this.zoom,tilt:this.tx,heading:this.heading})};function Li(e,n){return n.tilt=Mi(e,n.tilt),n.heading=Ni(e,n.heading),n.incline=e.getCapabilities().lookAt.incline.min,n}function Ki(e,n){var r=e.getCapabilities().lookAt.zoom;return fc(n,Eb(r.min,e.zq),Db(r.max,e.yq))}function Mi(e,n){return e=e.getCapabilities().lookAt.tilt,fc(n,e.min,e.max)}function Ni(e,n){return e=e.getCapabilities().lookAt.heading,fc((n%360+360)%360,e.min,e.max)}function Ji(e,n,r){r=r?n.addEventListener:n.removeEventListener,r.call(n,n.j.Qs,e.Vq,!1,e),r.call(n,n.j.Ps,e.Vq,!1,e)}m.hq=ke,m.Uq=ke,m.XC=function(e,n){this.ef={before:e,after:n}},Fi.prototype.setOnRenderCallbacks=Fi.prototype.XC;var Oi={P2D:0,WEBGL:1,HARP:2};Fi.EngineType=Oi;function Pi(){}t("H.util.ICache",Pi),Pi.prototype.add=function(){},Pi.prototype.add=Pi.prototype.add,Pi.prototype.get=function(){},Pi.prototype.get=Pi.prototype.get,Pi.prototype.cm=function(){},Pi.prototype.drop=Pi.prototype.cm,Pi.prototype.forEach=function(){},Pi.prototype.forEach=Pi.prototype.forEach,Pi.prototype.ia=function(){},Pi.prototype.removeAll=Pi.prototype.ia,Pi.prototype.gi=function(){},Pi.prototype.registerOnDrop=Pi.prototype.gi,Pi.prototype.gp=function(){},Pi.prototype.deRegisterOnDrop=Pi.prototype.gp;function Qi(e,n,r){if(this.mk=[],n&&this.gi(n),r&&!db(r))throw new D(Qi,2,r);this.Ne=0,this.filter=r,this.aa={},this.ak=this.ph=null,this.Sr(e)}t("H.util.Cache",Qi),Qi.prototype.add=function(e,n,r){var o,s;if(r=+r,!ob(r)||0>r)throw new D(this.add,2,r);return e=String(e),(s=this.filter?this.filter(e,n,r):!0)&&((o=this.aa[e])?(o.data!==n&&Ri(this,o),this.Ne+=r-o.size,o.size=r,o.data=n,Si(this,o)):this.aa[e]=Ti(this,{id:e,data:n,size:r,zd:null,lf:null},this.ph),Ui(this)),s},Qi.prototype.add=Qi.prototype.add,Qi.prototype.gi=function(e){if(!db(e))throw new D(this.gi,0,e);this.mk.push(e)},Qi.prototype.registerOnDrop=Qi.prototype.gi,Qi.prototype.gp=function(e){this.mk=this.mk.filter(function(n){return n!==e})},Qi.prototype.deRegisterOnDrop=Qi.prototype.gp,Qi.prototype.get=function(e,n){return(e=n?this.aa[e]:Si(this,this.aa[e]))&&e.data},Qi.prototype.get=Qi.prototype.get,Qi.prototype.cm=function(e){var n;(n=this.aa[e])&&this.nf(n,!0)},Qi.prototype.drop=Qi.prototype.cm,Qi.prototype.forEach=function(e,n,r){var o;for(o in this.aa){var s=this.aa[o];(!r||r(o,s.data,s.size))&&e.call(n,o,s.data,s.size)}},Qi.prototype.forEach=Qi.prototype.forEach,Qi.prototype.ia=function(e){var n;for(n in this.aa){var r=this.aa[n];(!e||e(n,r.data,r.size))&&this.nf(this.aa[n],!0)}},Qi.prototype.removeAll=Qi.prototype.ia,Qi.prototype.Sr=function(e){if(!(0<+e))throw new D(Qi.prototype.Sr,0,e);return this.vv=+e,Ui(this),this},Qi.prototype.setMaxSize=Qi.prototype.Sr,Qi.prototype.gA=function(){return this.vv},Qi.prototype.getMaxSize=Qi.prototype.gA,Qi.prototype.Cz=function(){return this.Ne},Qi.prototype.getCurrentSize=Qi.prototype.Cz;function Si(e,n){return n&&(e.ph=Ti(e,n,e.ph)),n}function Ui(e){for(;e.Ne>e.vv&&e.ak;)e.nf(e.ak,!0)}function Ti(e,n,r){return r!==n&&((n.zd||n.lf)&&e.nf(n,!1),(n.zd=r)&&(n.lf=r.lf,r.lf=n),n.lf||(e.ph=n),n.zd||(e.ak=n),e.Ne+=n.size),n}Qi.prototype.nf=function(e,n){var r=e.lf,o=e.zd;return(r||o||e==this.ph&&e==this.ak)&&(r?r.zd=o:this.ph=o,o?o.lf=r:this.ak=r,this.Ne-=e.size,n&&(delete this.aa[e.id],Ri(this,e))),e.zd=e.lf=null,e};function Ri(e,n){for(var r=e.mk.length;r--;)e.mk[r].call(e,n.id,n.data,n.size)}function Vi(e){if(gb(this,Vi),Vi.g.constructor.call(this,e),e&&"tileSize"in e){var n=Jb(+e.tileSize)/Tb;if(isNaN(n)||n%1||0>n||30<n)throw new D(Vi,0,"tileSize: "+e.tileSize);this.tileSize=+e.tileSize}}u(Vi,Q),t("H.map.provider.TileProvider",Vi);function Wi(e,n){return cc(e)-8-Fb(cc(n))}Vi.getZoomLevelOffset=Wi,Vi.prototype.requestTile=Vi.prototype.Oa,Vi.prototype.cancelTile=Vi.prototype.Md,Vi.prototype.cancelTileByKey=Vi.prototype.Yi,Vi.prototype.createTileInternal=Vi.prototype.nd,Vi.prototype.Ud=function(e,n,r){return this.uri.concat("_",e,"_",n,"_",r)},Vi.prototype.getTileKey=Vi.prototype.Ud,Vi.prototype.tileSize=256,Vi.prototype.tileSize=Vi.prototype.tileSize;function Xi(e,n,r,o){this.key="",this.x=e,this.y=n,this.z=r,this.data=o,this.valid=!0}t("H.map.provider.Tile",Xi);function R(e){gb(this,R),R.g.constructor.call(this,e),this.mD=new Yi,this.cc=A(this.cc,this),this.jt=Zi,this.createTileInternal=this.nd.bind(this)}u(R,Vi),t("H.map.provider.RemoteTileProvider",R),R.prototype.Jz=function(){return 1},R.prototype.getEntryWeight=R.prototype.Jz;var Zi,$i=screen.width,aj=screen.height,bj=Xd();bj=Eb(bj,1);var cj=Hb($i*bj*aj*bj/1e6);Zi=new Qi(Lb(2,Eb(8,Db(12,7+cj))));var dj={},ej={};R.prototype.Sb=function(){return this.jt},R.prototype.getCache=R.prototype.Sb,R.prototype.Yn=ca(3),R.prototype.cc=function(e){var n=this.uri;return!e.indexOf(n)&&e.charAt(n.length)==="_"},R.prototype.cacheFilter=R.prototype.cc,R.prototype.$A=function(e,n){n.valid=!1},R.prototype.reload=function(e){var n=this.getCache();e?n.ia(this.cc):n.forEach(this.$A,this,this.cc),fj(this),this.jb(this,{isReload:!0})},R.prototype.reload=R.prototype.reload,R.prototype.Wi=function(){return!1},R.prototype.MAX_STORE_TIME=1/0,R.prototype.sd=function(){return this.mD},R.prototype.ow=function(e,n){n(e)};function gj(e,n,r,o,s,l){return o=~~o,e.requestInternal(n,r,o,function(h,p){e.sd().put(e.Ud(n,r,o),{raw:p&&p.raw||h,timestamp:x.Date.now()},s,l)},l,0)}R.prototype.requestInternal=R.prototype.s,R.prototype.Oa=function(e,n,r,o){var s=this,l=this.getCache();if(E(e=+e))throw new D(this.Oa,0,e);if(E(n=+n))throw new D(this.Oa,0,n);if(E(r=+r))throw new D(this.Oa,0,r);r=~~r;var h=this.getTileKey(e,n,r);return l=l.get(h),l&&l.valid||o||dj[h]||(l=B,this.requestTileAsPromise(e,n,r,o).then(function(p){s.jb(p)},ke)),l},R.prototype.requestTile=R.prototype.Oa,R.prototype.Gw=function(e,n,r,o){var s=this,l=this.getCache(),h=this.getTileKey(e,n,r),p,d,g=this.sd();return ej[h]?ej[h]:(ej[h]=p=new td(function(y,v){function _(w){var I=0,G,_t=function(_r,_o){G=s.createTileInternal(e,n,r,_r,_o),G.key=h,l.add(h,G,1),y(G),hj(h)};w&&(I=x.Date.now()-w.timestamp),w&&I<s.MAX_STORE_TIME?s.ow(w.raw,_t):(0<I&&g.remove(h),(G=l.get(h))&&G.valid||o?y(G||null):dj[h]=s.requestInternal(e,n,r,_t,v))}d=g.get(h,_,_)}),dj[h]||(dj[h]=d),p.then(function(){hj(h)},function(){hj(h)}),p)},R.prototype.requestTileAsPromise=R.prototype.Gw,R.prototype.Fw=function(e,n){var r=this,o=e.id,s=e.tile.coords;return new td(function(l,h){r.Gw(s.x,s.y,s.z,n).then(function(p){var d=z;p=p.bb?p.bb():p.data;for(var g=p.length,y;g--;)if(y=p[g],y.xb()===o){d=y;break}l(d)},h)})},R.prototype.requestObjectAsPromise=R.prototype.Fw;function hj(e){delete dj[e],delete ej[e]}function fj(e){for(var n in dj)e.cc(n)&&e.cancelTileByKey(n)}var ij={cancel:ke};R.prototype.nd=function(e,n,r,o){return new Xi(e,n,r,o)},R.prototype.createTileInternal=R.prototype.nd,R.prototype.Yi=function(e){var n=dj[e];n&&(n.cancel(),hj(e))},R.prototype.cancelTileByKey=R.prototype.Yi,R.prototype.Md=function(e,n,r){this.cancelTileByKey(this.getTileKey(e,n,r))},R.prototype.cancelTile=R.prototype.Md,R.prototype.disposeInternal=function(){R.g.disposeInternal.call(this),this.getCache().ia(this.cc),fj(this)};function Yi(){}R.NullStorage=Yi,Yi.prototype.get=function(e,n){return n(),ij},Yi.prototype.get=Yi.prototype.get,Yi.prototype.put=function(e,n,r){r&&r()},Yi.prototype.put=Yi.prototype.put,Yi.prototype.clear=function(e){e&&e()},Yi.prototype.clear=Yi.prototype.clear,Yi.prototype.remove=function(e,n){n&&n()},Yi.prototype.remove=Yi.prototype.remove;function jj(e){if(jj.g.constructor.call(this,e),e&&(this.Gk={crossOrigin:e.crossOrigin||"anonymous",headers:e.headers||{}},this.Vp=e.getURL),kj(this)){var n=e&&e.style&&e.style instanceof H.map.render.harp.Style?e.style:new H.map.render.harp.Style({styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]});this.Xa(n)}if(!db(this.Vp))throw new D(jj,0,"getURL");if(this.Eg(e.opacity),this.zl=x.URL||x.webkitURL,e=this.Gk.crossOrigin,!(e=e==="anonymous"||e==="use-credentials")){e=this.Vp(0,0,0),n=window.location;var r=document.createElement("a");r.href=e,e=r.hostname===n.hostname&&r.port===n.port&&r.protocol===n.protocol}(this.cx=e&&!!Yg.arraybuffer&&!!this.zl)&&this.Sb().gi(A(this.je,this))}u(jj,R),t("H.map.provider.ImageTileProvider",jj);function kj(e){return!!H.map.render.harp&&e.vb===wi.HARP}jj.prototype.Ed=function(e){this.Eg(e)},jj.prototype.setOpacity=jj.prototype.Ed,jj.prototype.Ue=function(){return this.Qc},jj.prototype.getOpacity=jj.prototype.Ue,jj.prototype.zk=ie,jj.prototype.providesRasters=jj.prototype.zk,jj.prototype.s=function(e,n,r,o,s,l){var h=this,p=this.Vp(e,n,r),d;if(e=ij,p){var g=x.setTimeout(function(){h.cx?(d=new Xg("arraybuffer",p,l,h.Gk),d.then(function(y){return y.blob()}).then(function(y){var v=new Image;v.onload=A(o,null,v,{raw:y}),v.onerror=A(s,null,"bad url");try{v.src=h.zl.createObjectURL(y)}catch{}},s)):(d=new Xg("image",p,l,h.Gk),d.then(o,s))},150);e={cancel:function(){d?d.cancel():x.clearTimeout(g)}}}else o(null);return e},jj.prototype.requestInternal=jj.prototype.s,jj.prototype.ow=function(e,n){var r=new Image;r.onload=function(){n(this)},r.src=this.zl.createObjectURL(e)},jj.prototype.je=function(e,n){(e=n.data)&&e instanceof HTMLImageElement&&this.zl.revokeObjectURL(e.src)},jj.prototype.J=function(){return this.mb()},jj.prototype.getStyle=jj.prototype.J,jj.prototype.Cb=function(e){kj(this)&&e instanceof H.map.render.harp.Style&&this.Xa(e)},jj.prototype.setStyle=jj.prototype.Cb;function lj(e,n){if(n=n||{},!e)throw new D(lj,0,e);this.tileSize=e.tileSize,this.sx={},yi.call(this,{min:n.min!==void 0?n.min:e.min,max:n.max!==void 0?n.max:e.max,minWorldSize:this.tileSize,projection:n.Dn,dark:n.dark,provider:e})}u(lj,yi),t("H.map.layer.BaseTileLayer",lj),lj.prototype.Cj=function(e,n){var r=this.pixelProjection;if(!C(e,J))throw new D(this.Cj,0,e);if(!E(n)){var o=r.wu();r.Va(n)}return e=sh(r.Gb(e.Lc()),r.Gb(e.Jc())),!E(o)&&r.Va(o),e},lj.prototype.geoRectToRect=lj.prototype.Cj,lj.prototype.Gh=function(e,n){var r=Lb(2,Gb(n)),o=this.tileSize;if(!C(e,rh))throw new D(this.Gh,0,e);if(E(n=+n))throw new D(this.Gh,1,n);n=Gb(e.left/o),n===r&&--n;var s=Gb(e.right/o);return s===r&&--s,new rh(n,fc(Gb(e.top/o),0,r-1),s,fc(Gb(e.bottom/o),0,r-1))},lj.prototype.getTileBounds=lj.prototype.Gh,lj.prototype.Oa=function(e,n,r,o){return this.D.requestTile(e,n,r,o)},lj.prototype.requestTile=lj.prototype.Oa,lj.prototype.Md=function(e,n,r){this.D.cancelTile(e,n,r)},lj.prototype.cancelTile=lj.prototype.Md,lj.prototype.U=function(e,n){return this.D.getCopyrights?this.D.getCopyrights(e,n):null},lj.prototype.getCopyrights=lj.prototype.U;function mj(e,n,r,o,s){o=Gb(o);var l=Lb(2,o),h=n.left,p=n.top,d=n.right;r=d+(r?l+(d===n.left?0:1):1);var g=n.bottom,y=[];if(s)var v=h+(1+d-h)/2+s.x/e.tileSize-.5,_=p+(1+g-p)/2+s.y/e.tileSize-.5;for(;h<r;){for(p=n.top;p<=g;)e=h%l,y.push([e,p,o,s?Ib(v-h)+Ib(_-p):0]),p++;h++}return y}lj.prototype.Oj=function(e,n,r,o,s,l){var h,p=[],d,g=this.D;l=l??"__default__";var y=g.requestTile;if(!C(e,rh))throw new D(this.Oj,0,e);if(E(r=+r))throw new D(this.Oj,1,r);if(o||(h={}),n=mj(this,e,n,r,s),e=n.length)for(o||n.sort(nj),r=e;r--;)s=n[r],o||(h[g.Ud.apply(g,s)]=!0),s[3]=+o,(d=y.apply(g,s))&&p.push(d);if(!o){o=h;var v;h=this.sx[l]||{};for(v in h)h.hasOwnProperty(v)&&h[v]&&!o[v]&&this.D.cancelTileByKey(v);this.sx[l]=o}return{total:e,tiles:p}},lj.prototype.getProviderTiles=lj.prototype.Oj;function nj(e,n){return n[3]-e[3]}function oj(){F.call(this),this.reset()}u(oj,F),oj.prototype.start=function(e,n){this.R&&this.reset(),E(e-n)||(this.Ug=+e,this.Vg=+n),this.R=!0},oj.prototype.reset=function(){this.R=!1,this.Ug=this.Vg=B,this.Ro=new pj(0,0,0,0,0,0)},oj.prototype.Lm=function(){return this.R},oj.prototype.j={wo:"animationupdate"};function qj(e){qj.g.constructor.call(this,oj.prototype.j.wo),this.mt=e}u(qj,Ic),oj.prototype.set=function(e,n,r,o,s,l){var h=this.Ro;this.R&&(e=new pj(e/1e3,n/1e3,r/1e3,o/1e3,s/1e3,l/1e3),h.da(e)||(this.Ro=e,this.dispatchEvent(new qj(rj(this)))))};function rj(e){return x.Object.create(e.Ro)}oj.prototype.nc=function(){return rj(this).nc()},oj.prototype.Mf=function(){var e=rj(this),n=this.nc()||1;return new pj(e.Lb/n,e.Mb/n,e.Nb/n,e.ni,e.oi,e.Jk)},oj.prototype.disposeInternal=function(){this.reset(),oj.g.disposeInternal.call(this)};function pj(e,n,r,o,s,l){this.Lb=e,this.Mb=n,this.Nb=r,this.ni=o,this.oi=s,this.Jk=l}pj.prototype.nc=function(){return Kb(this.Lb*this.Lb+this.Mb*this.Mb+this.Nb*this.Nb)},pj.prototype.Mf=function(){var e=this.nc()||1;return new pj(this.Lb/e,this.Mb/e,this.Nb/e,this.ni,this.oi,this.Jk)},pj.prototype.da=function(e){var n=e===this;return!n&&(n=C(e,pj))&&(n=this.Lb===e.Lb&&this.Mb===e.Mb&&this.Nb===e.Nb&&this.ni===e.ni&&this.oi===e.oi&&this.Jk===e.Jk),n};var sj,tj=function(){function e(){}for(var n,r,o,s=$a("o ms moz webkit ").split(B!==void 0?void 0:" "),l=5;l--&&!n;)n=s[l],n=(r=x[n+(n?"R":"r")+"equestAnimationFrame"])&&!E(r.call(window,e))&&(o=x[n+(n?"C":"c")+"ancelAnimationFrame"]);return sj=n?function(h){return r.call(x,h)}:function(h){return x.setTimeout(h,25)},n?function(h){return o.call(x,h)}:function(h){return x.clearTimeout(h)}}(),uj=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function vj(e){return e}t("H.util.animation.ease.LINEAR",vj),t("H.util.animation.ease.EASE_IN_QUAD",function(e){return e*e});function wj(e){return-e*(e-2)}t("H.util.animation.ease.EASE_OUT_QUAD",wj),t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(e){return e*=2,1>e?Lb(e,5)/2:(e-=2,Lb(e,5)/2+1)});function xj(e){return 1-Math.sqrt(1-e*e)}function yj(e){return Kb(2*e-e*e)}t("H.util.animation.ease.EASE_OUT_CIRC",yj);function zj(e){return 1-Math.cos(e*Math.PI/2)}function Aj(e){return Math.sin(e*Math.PI/2)}function Bj(e,n){this.bg={tilt:Cj(e.tilt,n.tilt),heading:Cj(e.heading,n.heading),zoom:n.zoom-e.zoom};var r=this.bp=Be(e.position),o=n.position;e=o.lat*Zb;var s=r.lat*Zb;r=o.lng*Zb-r.lng*Zb,e=Math.atan2(Nb(r)*Pb(e),Pb(s)*Nb(e)-Nb(s)*Pb(e)*Pb(r)),this.qy=(0<=e?e:Xb+e)*$b,this.kh=this.bp.kb(n.position),n=this.bg.zoom,this.Dv=n===0?Dj:Object.assign({},Dj,{zoom:0>n?yj:xj,position:0>n?zj:Aj}),this.fv=Object.assign({},{tilt:0,heading:0,zoom:0})}function Cj(e,n){return e=n-e,-180<e&&180>=e?e:180<e?e-360:e+360}var Dj={tilt:vj,heading:vj,zoom:vj,position:vj};function Ej(e,n){Ej.g.constructor.call(this,n),ib(e,"Function",Ej,0,"invalid render callback"),this.Ar=e}u(Ej,yi),t("H.map.layer.DomLayer",Ej),Ej.prototype.L=function(e,n){return this.Ar(e,n)},t("H.util.Disposable",Fc),Fc.prototype.bc=Fc.prototype.bc,Fc.prototype.addOnDisposeCallback=Fc.prototype.bc,t("H.util.dispose",Ec),Fc.prototype.l=Fc.prototype.l,Fc.prototype.dispose=Fc.prototype.l,Fc.prototype.disposeInternal=Fc.prototype.disposeInternal,Fc.prototype.disposeInternal=Fc.prototype.disposeInternal;function Fj(e,n,r,o){Fj.g.constructor.call(this),this.ld=e,this.ja=o,this.element=e.appendChild(this.createElement(e.ownerDocument)),this.Uk(n,r)}u(Fj,Fc),Fj.prototype.A=function(){return this.element},Fj.prototype.Uk=function(e,n){this.size?(this.size.w=e,this.size.h=n):this.size=new th(e,n),this.Xw(this.element,this.element.style,e,n,this.ja)},Fj.prototype.setSize=Fj.prototype.Uk,m=Fj.prototype,m.mc=function(){return this.size},m.lb=function(){return this.ja},m.Yu=!0,m.Zb=function(e){e!==this.Yu&&(this.element.style.display=e?"block":"none",this.Yu=e)},m.opacity=1,m.Ed=function(e){this.opacity!==e&&(this.Eg(e),this.opacity=e)},m.Ue=function(){return this.opacity},m.vi=function(e){this.element.style.zIndex=e},Fj.prototype.setZIndex=Fj.prototype.vi,Fj.prototype.vu=function(){return+this.element.style.zIndex},Fj.prototype.Qe=function(){},Fj.prototype.clear=function(){},Fj.prototype.disposeInternal=function(){this.clear(),this.ld.removeChild(this.element),this.Uk(0,0),delete this.element,delete this.ld,Fj.g.disposeInternal.call(this)},Fj.prototype.disposeInternal=Fj.prototype.disposeInternal,Fj.prototype.ww=0,Fj.prototype.Sn=function(){++this.ww},Fj.prototype.release=function(){--this.ww||this.l()};function Gj(e){this.yb=e}u(Gj,Fc),Gj.prototype.Tb=function(){return this.yb},Gj.prototype.getLayer=Gj.prototype.Tb,Gj.prototype.DA=function(){return this.Pb},Gj.prototype.getSurface=Gj.prototype.DA,Gj.prototype.sf=function(e){var n=this.Pb;e!==n&&(this.Pb=e,e.Sn(),n&&n.release())},Gj.prototype.setSurface=Gj.prototype.sf,Gj.prototype.disposeInternal=function(){this.Pb.release()},Gj.prototype.disposeInternal=Gj.prototype.disposeInternal,Gj.prototype.Fh=function(){},Gj.prototype.render=Gj.prototype.L;function Hj(e,n){Hj.g.constructor.call(this,e),this.Pd=!(!n||!n.Pd),this.Hq={}}u(Hj,Gj),Hj.prototype.sf=function(e){Hj.g.sf.call(this,e),this.mC=e.ld.ownerDocument},Hj.prototype.setSurface=Hj.prototype.sf;var Ij=(function(e,n){return n=n.V(),C(n,pf)?n.ha:(e[0]=n,e)}).bind(null,[]);Hj.prototype.L=function(e,n,r,o,s,l,h){var p=this.yb,d,g,y,v;if(this.sC=n=this.Hq,this.Hq=r={},o>=p.min&&o<=p.max){var _=this.Xt(e,o,s,l),w=_.markers;if(e=w.length){for(o=[],s=this.Pb,l=0;l<e;l++){p=w[l];var I=Ij(p);for(d=I.length;d--;)(g=h(I[d]))&&((v=n[y=p.xb()+"_"+d])?delete n[y]:v={tv:p},r[y]=v,o.push([v,p,p.kc(),s,g.x,g.y]))}for(o.sort(Jj),e=o.length,l=0;l<e;l++)this.Dw.apply(this,o[l])}}return!_||_.requested&&_.requested===_.total||!_.requested&&w.length===_.total?Mg.DONE:Mg.PENDING},Hj.prototype.render=Hj.prototype.L;function Jj(e,n){var r=e[1].Ve(),o=n[1].Ve();return pg(r,o,!0)||e[5]-n[5]||pg(r,o,!1)}Hj.prototype.La=function(){},Hj.prototype.getObjectsAt=Hj.prototype.La;function Kj(e,n){Kj.g.constructor.apply(this,arguments),this.Gq=0,this.Th=[],this.sp=A(this.sp,this)}u(Kj,Hj),t("H.map.render.dom.MarkerRenderer",Kj),Kj.prototype.Xt=function(){return this.yb.oe.apply(this.yb,arguments)},Kj.prototype.L=function(e,n,r,o,s,l,h){this.sp(),this.KB=0;var p=Kj.g.L.apply(this,arguments),d=this.Pb,g=this.sC,y;for(y in g)Lj(this,d,g[y]);return this.Th.length===0&&p?Mg.DONE:Mg.PENDING},Kj.prototype.render=Kj.prototype.L,Kj.prototype.sf=function(e){Kj.g.sf.call(this,e),this.na=e.lb()},Kj.prototype.setSurface=Kj.prototype.sf,Kj.prototype.sp=function(){for(var e=this.Th.length,n,r,o;e--;)o=this.Th[e],n=o.uo,r=n.kc(),r.Oq(o,r,n);this.Th.length=0},Kj.prototype.Dw=function(e,n,r,o,s,l){var h,p=o.lb(),d=n.Kc();s*=p,l*=p,this.Pd||(s=Fb(s),l=Fb(l)),e.detail&&(d.Lh(e.ZA)?Lj(this,o,e):h=e.detail),h||(e.detail=h=r.eu(this.mC),this.Gq++,db(r.Oq)&&this.Th.push(h)),e.ZA=d.Ld,h.style.zIndex=this.KB++,h.uo=n,o.Qe(h,s,l,0,0)};var Mj,Nj="pointer-events",Oj;if(ce){var Pj;ce&&Ka!==z&&(Ka=(Pj=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Pj[2]:z),Oj=Ka,Oj===9?Nj="display":Oj===10&&(Nj="visibility")}Mj=Nj,Kj.prototype.La=function(e,n,r){var o=this.na,s=le,l,h,p,d,g;if(this.Gq){e/=o,n/=o,o=this.Pb.ld.getRootNode();var y=o.documentElement,v=this.Pb.A(),_=v.getBoundingClientRect();for(e+=_.left,n+=_.top;(h=p=o.elementFromPoint(e,n))&&h!==v&&h!==y&&h!==o.host&&p!==w;){for(;(d=h.parentNode)&&(!db(d.contains)||!d.contains(v));)h=d;if(d===v&&(h!==p||h.nodeName!=="svg")&&0>s.indexOf(g=h.uo)&&(s===le&&(s=[]),s.push(g),r))break;l||(l=[]);var w=h.style;l.push({xt:w.getPropertyValue(Mj),UA:w.getPropertyPriority(Mj),style:w}),w.setProperty(Mj,Mj==="visibility"?"hidden":"none","important"),w=p}if(l)for(n=l.length;n--;)e=l[n],e.style.removeProperty(Mj),lb(e.xt)&&e.style.setProperty(Mj,e.xt,e.UA)}return s},Kj.prototype.getObjectsAt=Kj.prototype.La,Kj.prototype.Fh=function(){return"dom"};function Lj(e,n,r){n.clear(n=r.detail),delete n.uo,e.Gq--,r=(e=r.tv).kc(),r.Sq&&r.Sq(n,r,e)}Kj.prototype.disposeInternal=function(){this.Th.length=0;var e=this.Pb,n=this.Hq,r;for(r in n)Lj(this,e,n[r]);this.Pb.l(),Kj.g.disposeInternal.call(this)},Kj.prototype.disposeInternal=Kj.prototype.disposeInternal;function Qj(e,n){if(E(this.xo=+e))throw new D(Qj,0,e);this.eo=this.sj=0,n&&this.Tw(n)}t("H.util.kinetics.KineticMove",Qj),Qj.prototype.Tw=function(e){return this.eo=e,this.sj=this.gu(),this},Qj.prototype.setInitialSpeed=Qj.prototype.Tw,Qj.prototype.gu=function(){return Math.abs(this.eo/this.xo)},Qj.prototype.getDuration=Qj.prototype.gu,Qj.prototype.Ij=function(e){return this.eo+this.xo*e},Qj.prototype.getCurrentSpeed=Qj.prototype.Ij,Qj.prototype.Bz=function(e){return this.eo*e+this.xo*e*e/2},Qj.prototype.getCurrentPath=Qj.prototype.Bz;function Rj(e,n){var r=n||{},o=r.contextType;if(r=r.contextAttributes,Rj.g.constructor.call(this,n),ib(e,"Function",Rj,0,"invalid render callback"),o){if(Sj.indexOf(o)===-1)throw new D(Rj,1,"invalid context type");this.jj=o}r&&(this.ij=r),this.Ar=e}u(Rj,yi),t("H.map.layer.CanvasLayer",Rj);var Sj=["2d","webgl","webgl2","experimental-webgl"];m=Rj.prototype,m.jj="2d",m.uh=function(){return this.jj},m.getContextAttributes=function(){return this.ij},m.L=function(e,n){return this.Sl&&this.Sl.canvas===e||(this.Sl=e.getContext(this.jj,this.ij)),this.Ar(this.Sl,n)},m.disposeInternal=function(){Rj.g.disposeInternal.call(this),delete this.Sl};function Tj(e,n,r,o,s,l){var h=s||"2d";Tj.g.constructor.apply(this,arguments),this.Zl=this.element.getContext(h,l),this.Bu=h==="2d",this.jj=h,this.ij=l}u(Tj,Fj),m=Tj.prototype,m.createElement=function(e){e=e.createElement("canvas");var n=e.style;return n.position="absolute",n.top=n.left="0",e},m.Xw=function(e,n,r,o,s){e.width=Eb(r,1),e.height=Eb(o,1),n.width=Fb(r/s)+"px",n.height=Fb(o/s)+"px"},m.Eg=function(e){this.Zl.globalAlpha=e},m.Qe=function(e,n,r,o,s){this.Bu&&this.Zl.drawImage(e,n,r,o,s)},m.getContextAttributes=function(){return this.ij},m.uh=function(){return this.jj},m.clear=function(e){var n,r;this.Bu&&(e?this.Zl.clearRect(n=e.left,r=e.top,e.right-n,e.bottom-r):this.element.width=this.size.w)},m.disposeInternal=function(){var e=this.element;e.width=e.height=0,delete this.Zl,Tj.g.disposeInternal.call(this)},Tj.prototype.disposeInternal=Tj.prototype.disposeInternal;function Uj(e){var n="dom";Uj.g.constructor.call(this,e),C(this.yb,Rj)&&(n=e.uh()==="2d"?"2d":"webgl"),this.pD=n}u(Uj,Gj),Uj.prototype.L=function(e,n,r,o,s,l,h,p){h=this.yb;var d=this.Pb,g=!(C(d,Tj)&&d.uh()==="2d");return o>=h.min&&o<=h.max?(g&&d.Zb(!0),h.L(d.A(),{boundingBox:e,zoom:o,screenCenter:n,priorityCenter:l,projection:r,cacheOnly:s,size:d.mc(),pixelRatio:d.lb(),cameraMatrix:p})):(g&&d.Zb(!1),Mg.DONE)},Uj.prototype.Fh=function(){return this.pD};function Vj(e,n,r,o,s){switch(n&&(this.ff=n),fb(r)&&(this.Ho=!!r),this.Ho&&o&&(this.Io=new th(o.w,o.h)),fb(s)&&(this.Gk={crossOrigin:s}),Wj[jb(e)]){case 2:this.gb=e,Xj(this,1);break;case 1:if(qe(e)){this.gb=e,Yj(this),Xj(this,1);break}e=e.src;case 0:if(e){e=ee(e),this.Cm=new Xg("image",e,B,this.Gk),this.Cm.then(A(this.XB,this),A(this.WB,this));break}default:throw Xj(this,-1),new D(Vj,0,"No image data")}}Vj.prototype.o=0,Vj.prototype.getState=function(){return this.o};function Xj(e,n){e.o=n,delete e.Cm,e.ff&&e.ff(n,e)}Vj.prototype.Ho=!0;function Yj(e){if(e.Ho){var n=e.gb,r=Zj(e),o=r&&r.w||+n.width,s=r&&r.h||+n.height,l=Xd();if(C(n,x.HTMLCanvasElement))r=n;else{r=n.ownerDocument.createElement("canvas"),r.width=Hb(o*l),r.height=Hb(s*l);var h=r.getContext("2d");h.scale(l,l),h.drawImage(n,0,0,o,s),Ma&&(h.clearRect(0,0,o,s),h.drawImage(n,0,0,o,s))}e.gb=r}}Vj.prototype.getData=function(){return this.gb||z};var Wj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};m=Vj.prototype,m.Io=z,m.mc=function(){return this.o===1?Zj(this):z};function Zj(e){var n=e.Io,r;if(!n){var o=e.gb;if(n=o.naturalWidth||o.width,n===0&&ce&&Wj[jb(o)]===1){var s=!0;if(r=o.parentNode)var l=o.nextSibling;document.body.appendChild(o)}e.Io=n=new th(o.naturalWidth||o.width,o.naturalHeight||o.height),s&&(r?r.insertBefore(o,l):document.body.removeChild(o))}return n}m.XB=function(e){this.gb=e,Yj(this),Xj(this,1)},m.WB=function(){Xj(this,-1)},m.cancel=function(){this.Cm&&this.Cm.cancel()};function ak(e,n){var r=this;if(!db(n))throw new D(ak,1,n);if(!db(e.next||db(e.cycle)))throw new D(ak,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.Ak=[],this.qw=[],this.HB=e,this.process=n,this.tC=function(){bk(r)},this.nr=null,this.Kw=function(){r.nr||(r.nr=x.setTimeout(r.tC,1))}}t("H.util.AsyncQueue",ak),ak.prototype.push=function(e,n){if(!db(n))throw new D(this.push,1,n);return e=ck(new dk,e,this.Kw,n),this.Ak.push(e),this.Kw(),e},ak.prototype.push=ak.prototype.push,ak.prototype.An=function(){bk(this)};function bk(e){var n=e.qw,r=0,o=e.HB;for(o.yt(),e.nr=null;r<n.length;){var s=n[r];s.Uu?n.splice(r,1):r++}for(;s=o.next(e.Ak,e.qw);)s.cancelled?s.done(null,"cancelled"):(n.push(s),e.process(s,s.data))}function dk(){ck(this,null,null,null)}ak.Task=dk;function ck(e,n,r,o){return e.data=n,e.cancelled=!1,e.Uu=!1,e.RB=r,e.SB=o,e.Qo=null,e}dk.prototype.done=function(e,n){this.Uu=!0,this.RB(),this.SB(this,e,n)},dk.prototype.done=dk.prototype.done,dk.prototype.cancel=function(){this.Qo&&this.Qo(),this.cancelled=!0},dk.prototype.cancel=dk.prototype.cancel,dk.prototype.VC=function(e){return this.Qo=e,this},dk.prototype.setCancelFn=dk.prototype.VC;function ek(){}ak.Mode=ek,ek.prototype.next=function(){},ek.prototype.yt=function(){};function fk(e,n){fk.g.constructor.call(this,new gk(e),n)}u(fk,ak),t("H.util.SequentialQueue",fk);function gk(e){if(isNaN(e)||0>e)throw new D(fk,1,'Argument "maxTime" must be a positive number');this.AB=e,this.$k=uj()}gk.prototype.next=function(e){return e.length&&uj()-this.$k<this.AB?e=e.shift():null},gk.prototype.yt=function(){this.$k=uj()};function hk(e,n,r,o){return e-=r,n-=o,e*e+n*n}function ik(e,n,r){return jk(e,n*n,r||0,0,e.length-1)}t("H.math.simplifyDP",ik);function jk(e,n,r,o,s){var l=0,h=o,p=e[o].x,d=e[o].y,g=e[s].x,y=e[s].y,v=o+1,_=hk(p,d,g,y);if(_)for(;v<s;){var w=e[v++],I=w.x;w=w.y;var G=((I-p)*(g-p)+(w-d)*(y-d))/_;I=0>G?hk(I,w,p,d):1<G?hk(I,w,g,y):hk(I,w,p+G*(g-p),d+G*(y-d)),I>l&&(l=I,h=v-1)}else for(;v<s;)w=e[v++],I=w.x,w=w.y,I=hk(I,w,p,d),I>l&&(l=I,h=v-1);return l>=n||0<r&&h-o?(--r,1<h-o?(o=jk(e,n,r,o,h),o.splice(o.length-1,1)):o=[e[o]],o=1<s-h?o.concat(jk(e,n,r,h,s)):o.concat(e.slice(h,s+1))):o=[e[o],e[s]],o}function kk(e,n,r,o,s,l,h,p){kk.g.constructor.call(this,n,r,o,null),this.key=e,this.Ad=p,this.ed=s,this.na=l,this.ei={},this.zL=h,this.Vm=Hb(tg.MAX_LINE_WIDTH/2*this.na+1)}u(kk,Xi),t("H.map.provider.SpatialTile",kk),kk.prototype.yg=bc,kk.prototype.xr=bc,kk.prototype.pf=bc;function lk(e){return e.Ad.getInvalidations(og.SPATIAL)}function mk(e){var n=lk(e),r=n.Ld,o=e.yg,s=o===r,l;if(!(s||n.Qu(o)||n.sq(o))){s=e.Ig;var h=e.ei;if(n.Km(o))for(l=s.length;l--;){var p=s[l];if(p.Kc().Km(o)){s.splice(l,1);var d=d||nk(e,p.xb())}}if(n.uq(o)){for(l=s.length;l--;)if(p=s[l],p.Kc().uq(o)){var g=1;if((p=h[p.xb()])&&p.wm){d=1;break}}g&&s.sort(ok)}if(!d&&n.Lh(o)){for(l=s.length;l--;)if(s[l].Kc().Lh(o)){var y=1;break}}e.xr!==o||y||(e.xr=r,e.pf!==o||d||(e.pf=r)),e.yg=r,s=!0}return s}kk.prototype.Jh=function(){var e=lk(this),n=e.Ld,r=this.pf,o=r===n;return o||(this.Ad.tw&&!e.Lh(r)?o=!0:mk(this)&&(o=this.pf===n)),o},kk.prototype.isCanvasValid=kk.prototype.Jh,Object.defineProperty(kk.prototype,"valid",{get:function(){return this.Jh()},set:ke,configurable:!0});function pk(e,n){this.gm=e,this.wm=n}function nk(e,n){e=e.ei;var r=e[n];if(r)return delete e[n],r.wm}kk.prototype.Ig=le;function qk(e){var n=lk(e),r=e.yg,o=e.Ig,s;if(!mk(e)){for(s=o.length;s--;){var l=o[s],h=l.Kc();(h.Km(r)||h.sq(r))&&nk(e,l.xb())}e.Ig=e.Ad.requestSpatialsByTile(e,!1,!1).sort(ok),e.yg=n.Ld}}function ok(e,n){return pg(e.Ve(),n.Ve(),!1)}kk.prototype.bb=function(){return this.Ig},kk.prototype.getObjects=kk.prototype.bb,kk.prototype.FA=function(){return this.ed},kk.prototype.getTileSize=kk.prototype.FA;var rk={};kk.prototype.Pj=function(){var e=this.ed+"_"+this.na,n=rk[e];if(!n){n=-this.Vm;var r=this.ed-n;n=rk[e]=new rh(n,n,r,r)}return n},kk.prototype.getPxClipRect=kk.prototype.Pj,kk.prototype.nm=function(){var e=this.lz;if(!e){var n=this.pm();e=0;var r=this.ed;this.z&&(r-=e+=this.Pj().top),e=this.lz=Ge(n.sk(new L(e,e)),n.sk(new L(r,r)))}return e},kk.prototype.getGeoClipRect=kk.prototype.nm,kk.prototype.pm=function(){var e=this.vC;if(!e){var n=this.ed;e=this.vC=new zh(B,n),e.Va(this.z),e.x=this.x*n,e.y=this.y*n}return e},kk.prototype.getPxProj=kk.prototype.pm,kk.prototype.lb=function(){return this.na},kk.prototype.getPixelRatio=kk.prototype.lb,kk.prototype.Hn=function(){var e=this.data;return e&&(this.data=null,this.pf=bc),e},kk.prototype.releaseCanvas=kk.prototype.Hn,kk.prototype.In=function(){this.ei={},delete this.Ig,this.yg=bc},kk.prototype.releaseData=kk.prototype.In,kk.prototype.L=function(e){var n=e.getContext("2d"),r,o,s,l,h=0;if(qk(this),this.pf<this.yg){var p=this.Ig;if(r=p.length){e.width=e.height=this.ed,n.clearRect(0,0,this.ed,this.ed);var d=this.ei;for(o=0;o<r;o++){var g=p[o],y=g.xb();if(l=(s=d[y])?s.gm:g.getGeometriesForTile(this)){if(s)g.Kc().Lh(this.pf)&&(s.wm=Eg(g,l)),s=s.wm;else{s=Eg(g,l);for(var v,_=l,w=g.We?2:0,I=_.length;I--;){var G=_[I];if(G!==jg){var _t=G.Rc;for(v=_t.length;v--;)G=_t[v],4<G.length&&(_t[v]=ik(G,.6,w))}}this.ei[y]=new pk(l,s)}if(s){for(n.save(),_=g.We?this.BC:this.CC,y=0;y<l.length;y++)_.call(this,g,l[y],g.J(),n);if(l=g.getLabels(this))for(g=n,y=l.length;y--;)for(w=l[y],_=w.size,g.font=_+"px "+w.font,g.fillStyle=w.color,g.textAlign="center",g.translate(w.x,w.y),g.rotate(w.angle),_=w.lineHeight||1.375*_,I=w.lines,w=I.length;w--;)g.fillText(I[w],0,w*_);n.restore()}h|=+s}}}this.data=h?e:null,this.xr=this.pf=this.yg}else this.data&&(h=1);return 0<h},kk.prototype.render=kk.prototype.L,kk.prototype.data=null,kk.prototype.CC=function(e,n,r,o){var s;r.Xj&&(sk(o,r,this.na),tk(n,o,!1,!0,!1,this.ed,this.Vm)),r.Vj&&(s=e.Tg)&&s.Nc&&(uk(o,s),vk(this,o,n,s,r.lineWidth))},kk.prototype.BC=function(e,n,r,o){var s=r.Nc,l=r.Xj,h,p=this.ed,d=this.Vm;if(n===jg)s&&(uk(o,r),o.fillRect(0,0,p,p));else{if(l&&sk(o,r,this.na),r.Vj&&(h=e.Tg)){var g=r.lineWidth;h.Nc||(h=null)}e=n.sn,e===ac?((l||s)&&(uk(o,r),tk(n,o,!0,l,s,p,this.Vm)),h&&(uk(o,h),vk(this,o,n,h,g,0))):(s&&(uk(o,r),tk(n,o,!0,!1,s,p,d,0,e)),l&&tk(n,o,!1,l,!1,p,d,e),h&&(uk(o,h),vk(this,o,n,h,g,e)))}};function tk(e,n,r,o,s,l,h,p,d){var g=e.Rc,y=-h;if(h=l+h,p=p||0,d===B&&(d=g.length),s&&e===jg)n.fillRect(0,0,l,l);else if(d>p){for(n.beginPath(),l=p;l<d;l++){var v=g[l],_=v.length;if(v===kg)n.moveTo(y,y),n.lineTo(y,h),n.lineTo(h,h),n.lineTo(h,y);else{var w=v[0];for(n.moveTo(w.x,w.y),p=1;p<_;p++)w=v[p],n.lineTo(w.x,w.y)}r&&n.closePath()}r&&s&&n.fill(e.Uj!==ac?"evenodd":"nonzero"),o&&n.stroke()}}function sk(e,n,r){var o;e.strokeStyle=n.strokeColor,e.lineWidth=n.lineWidth*r,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.miterLimit=n.miterLimit,e.setLineDash&&(o=n.lineDash)!==le&&(e.setLineDash(o),e.lineDashOffset=n.lineDashOffset)}function uk(e,n){e.fillStyle=n.fillColor}function vk(e,n,r,o,s,l){var h=s*o.width/2;s=s*o.length/2;var p=s/2;o=2*s*o.frequency;var d=Kb(Lb(s,2)+Lb(h,2));e=e.ed-d,e=new rh(d,d,e,e),r=r.Rc;var g,y,v,_,w,I,G,_t=Ub/2;for(l=l||0,d=r.length;d-- >l;){var _r=0,_o=r[d];if(y=g=_o.length){var Ca=_o;for(y=Ca.length,v=0;--y;)v+=Ca[y].kb(Ca[y-1]);y=(Ca=v)>=o}if(y)for(y=Db(Gb(Ca/o),1e3),y=Ca/(y+1),v=y/2;--g;){for(_=(w=_o[g]).kb(I=_o[g-1]);v<=_r+_;){var _a=w.x+(I.x-w.x)*(G=(v-_r)/_);G=w.y+(I.y-w.y)*G,e.Ql(_a,G)&&(n.save(),n.translate(_a,G),n.rotate(-Rb((I.y-w.y)/(w.x-I.x))+(w.x<I.x?_t:-_t)),n.beginPath(),n.moveTo(-h,-s),n.lineTo(0,s),n.lineTo(h,-s),n.lineTo(0,-p),n.closePath(),n.fill(),n.restore()),v+=y}_r+=_}}}var wk=[];kk.prototype.La=function(e,n,r){for(var o=this.Ig,s=o.length,l,h,p,d,g,y,v=le,_,w=this.na;s--;)if(h=o[s],h.Vd(!0)&&(p=this.ei[h.xb()])&&(d=p.gm)){for(l=h.J(),y=l.fillColor!=="none"&&h.We,_=l.strokeColor==="none"?0:l.lineWidth*w,l=d.length;l--;){g=d[l];var I;if(!(I=y&&g===jg)&&(I=y||_)){var G;I=e;var _t=n,_r=y,_o=_,Ca=g.Uj,_a=g.sn,_l=_a!==ac,Qa=g.Rc,Kc=Qa.length,jc=0,_h=0,_m=!1;for(g=0;g<Kc;g++){var ry=Qa[g],uy=g>=_a,ay=!uy&&g>=Ca;if(ry===kg&&_r)ay?jc++:_h++;else{var ey=ry.length;for(wk.length=2*ey,G=0;G<ey;G++){var _y=ry[G];wk[2*G]=_y.x,wk[2*G+1]=_y.y}if(G=_r&&!uy,uy=_l&&!uy?0:_o,G||uy){if(uy=kc(I,_t,wk,uy,G),uy===hc.EDGE||uy===hc.VERTEX){_m=!0;break}else if(uy===hc.SURFACE){if(ay)jc++;else if(_h++,Ca===ac)break}}}}I=_m||0<_h&&!(jc%2)}if(I){v===le&&(v=[]),v.push(h);break}}if(r&&v.length)break}return v};function xk(e,n){var r;xk.g.constructor.call(this,n),this.sw=e,this.na=e=n.pixelRatio,this.tileSize=r=1<<Fb(cc((n.tileSize||256)*e)),this.vs=Wi(r,e),this.je=A(this.je,this),this.Qq=A(this.Qq,this),this.rg=A(this.rg,this),this.kg=A(this.kg,this),this.ge=A(this.ge,this),this.sw.addEventListener(Q.prototype.j.za,this.ge,!1,this),this.Zg=[],this.vf=new Qi(n.tileCacheSize||256,this.je),this.cp=new Qi(n.dataCacheSize||512,this.Qq),this.Mn=new fk(20,this.rg),this.pg={},this.ev=uj()}u(xk,Vi),xk.prototype.ge=function(e){e=e.target,e.type===og.SPATIAL&&this.jb(e)},xk.prototype.Oa=function(e,n,r,o){var s=this.getTileKey(e,n,r),l;if(l=this.vf.get(s,o)){if(o||l.Jh())return l;o||this.vf.cm(s)}if((l=this.cp.get(s,o))&&(o||mk(l)))return e=this.Zg.pop()||document.createElement("canvas"),l.L(e)||this.Zg.push(e),this.vf.add(s,l,1),l;o||((l=this.pg[s])?l.count++:(l=this.Mn.push([s,e,n,r],this.kg),l.count=1,this.pg[s]=l))},xk.prototype.requestTile=xk.prototype.Oa,xk.prototype.nd=function(){},xk.prototype.createTileInternal=xk.prototype.nd,xk.prototype.An=function(){var e=uj();33<e-this.ev&&(this.Mn.An(),this.ev=e)},xk.prototype.Md=function(e,n,r){this.Yi(this.getTileKey(e,n,r))},xk.prototype.cancelTile=xk.prototype.Md,xk.prototype.Yi=function(e){var n;(n=this.pg[e])&&(n.count--,n.count||(n.cancel(),delete this.pg[e]))},xk.prototype.cancelTileByKey=xk.prototype.Yi,m=xk.prototype,m.rg=function(e,n){var r=n[0],o=n[1],s=n[2],l=n[3];r=this.vf.get(r)||new kk(r,o,s,l,this.tileSize,this.na,l+this.vs,this.sw),o=r.data||this.Zg.pop()||document.createElement("canvas"),r.L(o)||this.Zg.push(o),n.push(r),e.done(r)},m.kg=function(e,n){e=e.data[0],n&&this.vf.add(e,n,1),delete this.pg[e],this.jb()},m.je=function(e,n){n.data&&this.Zg.push(n.Hn()),this.cp.add(e,n,1)},m.Qq=function(e,n){n.In()},m.disposeInternal=function(){for(var e in this.pg)this.pg[e].cancel();this.vf.ia(),this.cp.ia(),this.Zg.length=0,xk.g.disposeInternal.call(this)};function yk(e,n){lj.call(this,e,n)}u(yk,lj),t("H.map.layer.TileLayer",yk),yk.prototype.xg=function(e,n,r,o,s){if(!C(e,J))throw new D(this.xg,0,e);if(E(n=+n))throw new D(this.xg,1,n);n=Gb(n),this.pixelProjection.Va(n),e=this.Cj(e);var l=this.Gh(e,n);return this.Oj(l,e.left>e.right,n,r,o,s)},yk.prototype.requestTiles=yk.prototype.xg;function zk(e,n){n=n?Ta(n):{},n.tileSize=n.tileSize||256,n.pixelRatio=n.pixelRatio||Xd(),n.max=24,this.Hg=new xk(e,n),this.xi=new yk(this.Hg),n.minWorldSize=this.Hg.tileSize,n.provider=e,zk.g.constructor.call(this,n),this.tileSize=this.xi.tileSize,this.ln=A(this.ln,this),this.Hg.addEventListener(this.Hg.j.za,this.ln),e.addEventListener(e.j.za,this.ln)}u(zk,yi),t("H.map.layer.ObjectLayer",zk),zk.prototype.ln=function(e){e.currentTarget!==this.Hg&&e.target.type===og.SPATIAL||this.jb()};var Ak={markers:le,total:0};zk.prototype.pe=function(e,n,r){var o=this.D,s;return o.providesMarkers()&&(s=o.requestMarkers(e,n,!0,r)).length?{markers:s,total:s.length}:Ak},zk.prototype.requestMarkers=zk.prototype.pe,zk.prototype.oe=function(e,n,r){var o=this.D,s;return o.providesDomMarkers()&&(s=o.requestDomMarkers(e,n,!0,r)).length?{markers:s,total:s.length}:Ak},zk.prototype.requestDomMarkers=zk.prototype.oe;var Bk={tiles:le,total:0};zk.prototype.xg=function(e,n,r,o){if(this.D.providesSpatials()){var s=this.xi.xg(e,n,r,o);r||(this.Hg.An(),s=this.xi.xg(e,n,!0,o))}else s=Bk;return s},zk.prototype.requestTiles=zk.prototype.xg,zk.prototype.Oa=function(e,n,r,o){return this.xi.Oa(e,n,r,o)},zk.prototype.requestTile=zk.prototype.Oa,zk.prototype.Md=function(e,n,r){this.xi.Md(e,n,r)},zk.prototype.cancelTile=zk.prototype.Md;var Ck={overlays:le,total:0};zk.prototype.wg=function(e,n,r){var o=this.D,s=Ck;return o.providesOverlays&&o.providesOverlays()&&(e=o.requestOverlays(e,n,!0,r),n=e.length)&&(s={overlays:e,total:n}),s},zk.prototype.requestOverlays=zk.prototype.wg,zk.prototype.disposeInternal=function(){this.Hg.l(),this.xi.l(),this.D.dispose(),zk.g.disposeInternal.call(this)};var Dk={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Ii.ZOOM,COORD:Ii.COORD},capture:!0};t("H.map.render.webgl.capabilities",Dk);function Ek(e){var n,r=this,o=x.H.gl;Ek.g.constructor.call(this),this.m=n=o.Scene.create(x.URL.createObjectURL(se(JSON.stringify(Fk))),{viewport:e.viewport,container:e.ld,disableRenderLoop:!0,devicePixelRatio:e.devicePixelRatio,logLevel:"error"}),e.ZB&&n.subscribe({load:e.ZB}),n.subscribe({view_complete:function(){r.Jr=!0,e.Pv()}});var s=n.requestRedraw;n.requestRedraw=function(){s.apply(n),e.Pv()},this.Kr=A(this.Kr,this),this.Kn=A(this.Kn,this),this.rs=0,this.Sh={},this.Gd={}}u(Ek,Fc),m=Ek.prototype,m.Jr=!1;function Gk(e){e=e.m.sources;var n;for(n in e){var r=e[n];if(r.hasPendingCommands&&r.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}m.L=function(){var e=x.H.gl.Task;return this.m.immediateRedraw(),e.setState({user_moving_view:this.m.view.user_input_active}),e.processAll(),this.Jr&&!this.m.dirty&&!this.m.building&&!Gk(this)&&!Object.keys(this.Gd).length};function Hk(e){e.Jr=!1,e.m.resetViewComplete()}function Ik(e){return e.m.view}function Jk(e,n){function r(){var s=n.Sa(),l={},h={},p,d,g,y=++e.rs,v,_;for(Jh(h,Fk),d=0;d<s.length;d++){var w=s[d];if(p=w.D){var I=p.mb();if(I.getState()===di.READY){var G=I.Rd();if(!Sa(G)){delete G.cameras,delete G.camera,l[d]=G=Vh(G,d),!C(w,zk)&&G.sources&&Wh(G,p.uid);for(g in G.sources){var _t=G.sources[g];_t.max_zoom=Db(p.max,Dk.lookAt.zoom.max),_t.max_display_zoom=w.max,_t.min_display_zoom=w.min,(_=p.tileSize)&&(2<=o&&256<_&&p instanceof jj&&(_/=2),_t.tile_size=_)}(v=I.Ic())&&Xh(G,v),Jh(h,G)}}}}return Jh(h.layers.skybox.draw.skybox.color,h.scene.sky),e.m.config=h,e.m.updateConfig().then(function(){var _r={},_o,Ca;if(y!==e.rs)return!1;e.rs=0;for(Ca in l){w=s[+Ca];var _a=l[Ca].sources;for(_o in _a)(_a=e.m.sources[_o])&&(_r[_o]=_a,_a.initialize&&w.getProvider()&&_a.initialize(w.getProvider(),e.Kr,e.m.getWorkers().length,_a.tiled?B:e.m.tile_manager.getWorkerForTile(z,_a)))}for(_o in e.Sh)!_r[_o]&&e.Sh[_o].dispose&&e.Sh[_o].dispose();return e.Sh=_r,!0})}var o=e.m.pixelRatio();e.m.initialized?r():e.m.load(z,{blocking:!1}).then(r)}m.Kr=function(e,n,r){var o=this,s=this.m.sources[e],l=r&&r.isReload;n?this.Gd[e]!==!0&&(this.Gd[e]||(this.Gd[e]={rx:{},it:[]}),C(n,Xi)?this.Gd[e].rx[n.x+"/"+n.y+"/"+n.z]=!0:(n=n.boundingBox,this.Gd[e].it.push(new J(n[0],n[1],n[2],n[3])))):this.Gd[e]=!0,s&&s.has_volatile_data?Kk(this,l):(x.clearTimeout(this.Aw),this.Aw=x.setTimeout(function(){return Kk(o,l)},100))},m.Kn=function(e){var n=!1,r=this.Gd[e.source.name],o=x.H.gl;if(r)if(r===!0)n=!0;else{var s=o.Tile.coord(o.Geo.wrapTile(e.coords));if(n=!!r.rx[s.key],!n){var l=o.Geo.getTileBoundingBox(s,e.source.tile_size,tg.MAX_LINE_WIDTH/2);l=Ge(l.getTopLeft(),l.getBottomRight()),n=r.it.some(function(h){return h.Vf(l,!0)||l.Ff(h.wb(),!0)})}}return n};function Kk(e,n){var r=e.m.tile_manager;r.removeTiles(e.Kn),r.updateTilesForView(),n&&r.removeCachedTiles(e.Kn),Hk(e),e.Gd={}}m.Rd=function(){return this.m.config};function Lk(e,n,r,o){e.m.getFeatureAt(n,r,o),e.m.update()}function Mk(e){return e.m.screenshot(void 0).then(function(n){return new td(function(r,o){new Vj(URL.createObjectURL(n.blob),function(s,l){s===1?r(l.getData()):o()},!1)})})}m.lb=function(){return this.m.pixelRatio()},m.disposeInternal=function(){var e=this.Sh;Ek.g.disposeInternal.call(this),this.m.destroy(),this.Gd={},e&&Object.keys(e).forEach(function(n){e[n].dispose()}),x.clearTimeout(this.Aw),delete this.Sh,delete this.m},Ek.prototype.disposeInternal=Ek.prototype.disposeInternal;var Fk={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}};function Nk(e,n){if(E(this.x=+e))throw new D(Nk,0,e);if(E(this.y=+n))throw new D(Nk,1,n)}m=Nk.prototype,m.add=function(e){return new Nk(this.x+e.x,this.y+e.y)},m.Lt=function(e){if(!C(e,Nk))throw new D(this.Lt,0,e);return e=this.multiply(e),e.x+e.y},m.multiply=function(e){if(!C(e,Nk))throw new D(this.multiply,0,e);return new Nk(this.x*e.x,this.y*e.y)},m.Va=function(e){return new Nk(this.x*e,this.y*e)};function Ok(e){return Kb(e.Lt(e))}m.normalize=function(){var e=Ok(this);return e!==0?new Nk(this.x/e,this.y/e):this};function Pk(e){e=e||me,this.FB=fb(e.EB)?e.EB:3,this.wv=fb(e.zB)?e.zB:300,this.Hx=fb(e.ED)?e.ED:3,this.uD=fb(e.tD)?e.tD:50,this.fi=[],this.clear()}t("H.map.render.InteractionUtils",Pk),Pk.prototype.cB=function(){return this.Kh},Pk.prototype.isGestureDetected=Pk.prototype.cB,Pk.prototype.start=function(e,n){var r=Ii.HEADING,o=Ii.TILT;this.R&&this.clear(),this.ik=e,this.Jm=!!n,this.R=!0,this.Kh=!(e&(r|o))||e===r||e===o},Pk.prototype.start=Pk.prototype.start,Pk.prototype.store=function(e,n,r,o,s){var l=!1;if(this.R){if(e=new Qk(e,n,r,o,s),l=e.Ru,this.Vn=this.$e,this.$e=e,this.zj){if(this.ym=!0,l){n=this.ik;var h=this.Kh;if(!h&&this.ym){s=Ii.HEADING;var p=Ii.TILT;r=Ii.COORD,o=Ii.ZOOM;var d=n&(r|p)?this.Ah(!0):Rk,g=n&o?this.jm(!0):1,y=n&s?Ib(this.Bp(!0)):0,v=Ib(d.x),_=Ib(d.y);d=10<v||10<_,v=10<_&&_>3*v,g=.8>g||1.2<g,y=7<y,n&p&&(y||g||d&&!v?Sk(this,p):v&&(Sk(this,~p>>>0),h=!0)),!h&&n&s&&n&(r|o)&&(g||d?(Sk(this,s),h=!0):y&&(Sk(this,p),h=!0)),this.Kh=h}}}else this.zj=e,l||(this.Kh=!0);this.Jm&&this.fi.push(e)}return l},Pk.prototype.store=Pk.prototype.store,Pk.prototype.clear=function(){this.fi.length=0,this.R=this.Jm=this.ym=this.Kh=!1,this.zj=this.Vn=this.$e=void 0},Pk.prototype.clear=Pk.prototype.clear,Pk.prototype.$d=function(e){return 0<(this.ik&e)},Pk.prototype.isModifierEnabled=Pk.prototype.$d;function Sk(e,n){e.ik^=e.ik&n}Pk.prototype.Lm=function(){return this.R},Pk.prototype.isRunning=Pk.prototype.Lm;var Rk=ab(new Nk(0,0));Pk.prototype.Mf=function(){var e;if(this.Jm){var n=this.fi,r=n.length,o=0;for(e=new Nk(0,0);--r&&o<this.Hx;)e=e.add(Tk(n[r-1],n[r])),o++}else e=this.Ah();return e.normalize()},Pk.prototype.getDirection=Pk.prototype.Mf,Pk.prototype.nc=function(e){e=e||uj();var n,r;if(this.Jm){var o=this.fi,s=this.fi.length,l=this.fi[s-1];for(r=n=0;--s&&n<this.Hx;)r+=Ok(Tk(o[s],o[s-1])),n++;o=r/n}else l=this.$e,o=Ok(this.Ah());return o=o>=this.FB&&e-l.timestamp<=this.uD?o>this.wv?this.wv:o:0},Pk.prototype.getSpeed=Pk.prototype.nc,Pk.prototype.im=function(){return this.$e?Uk(this.$e):B},Pk.prototype.getBifocalCenter=Pk.prototype.im,Pk.prototype.Ah=function(e){return(e=e?this.zj:this.Vn)?Tk(e,this.$e):new Nk(0,0)},Pk.prototype.getMoveVector=Pk.prototype.Ah,Pk.prototype.jm=function(e){var n=1;if(this.ym){var r=this.$e;e=e?this.zj:this.Vn,(e=Vk(e))&&(r=Vk(r))&&(n=r/e)}return n},Pk.prototype.getBifocalScaling=Pk.prototype.jm,Pk.prototype.Bp=function(e){if(this.ym){var n=e?this.zj:this.Vn,r=this.$e;e=n.qg;var o=r.qg,s=0;e&&o&&(n=n.ke,r=r.ke,s-=Sb(o.y-r.y,o.x-r.x)*$b-Sb(e.y-n.y,e.x-n.x)*$b),e=s}else e=0;return e},Pk.prototype.getBifocalRotation=Pk.prototype.Bp;function Qk(e,n,r,o,s){this.ke=new L(e,n),r!==B&&(this.qg=new L(r,o),this.Ru=!0),this.timestamp=s!==B?s:uj()}Qk.prototype.Ru=!1;function Uk(e){var n=e.ke;return(e=e.qg)?new L(n.x-(n.x-e.x)/2,n.y-(n.y-e.y)/2):B}function Wk(e,n){var r=e.ke;return(e=e.qg)&&e.kb(n)<r.kb(n)?e:r}function Tk(e,n){var r=e.qg,o=n.qg;return o&&r?(n=Uk(n),e=Uk(e)):r?(n=n.ke,e=Wk(e,n)):o?(e=e.ke,n=Wk(n,e)):(n=n.ke,e=e.ke),new Nk(n.x-e.x,n.y-e.y)}function Vk(e){var n=e.qg;return n?e.ke.kb(n):0}function Xk(e){var n=Yk[e];if(!n)if(e in Zk)n=Yk[e]=e;else{n=$k.length;var r="",o=e.substr(0,1).toUpperCase()+e.substr(1),s="",l=!1;for(al&&(s=al+o,l=s in Zk);n--&&!l;)r=$k[n],s=r+o,l=s in Zk;if(l&&(al=r),n=l?s:null)Yk[e]=n;else throw Error("Could not find any variant of CSS property ["+e+"]")}return n}t("H.dom.cssPrefixer.prefix",Xk);var $k=["O","Ms","ms","Moz","Webkit"],Yk={},al="",Zk=document.createElement("span").style;function bl(e,n,r,o){bl.g.constructor.apply(this,arguments)}u(bl,Fj),t("H.map.render.dom.Surface",bl),m=bl.prototype,m.uh=function(){return"dom"},m.createElement=function(e){return e=e.createElement("DIV"),e.style.position="absolute",e.style.pointerEvents="none",e},m.Xw=function(e,n,r,o){n.width=r+"px",n.height=o+"px"},m.Eg=function(e){this.element.style.opacity=e},m.Qe=function(e,n,r){var o=this.ja,s=e.style;s[Xk("transform")]="matrix(1,0,0,1,"+n/o+","+r/o+")",e.parentNode!==this.element&&(s.position="absolute",this.element.appendChild(e),this.element.style.pointerEvents="auto",getComputedStyle(e).pointerEvents==="auto"&&(e.style.pointerEvents="all"),this.element.style.pointerEvents="none")},m.clear=function(e){e?this.element.removeChild(e):this.element.innerHTML=""};function cl(e,n){this.Cy=e,this.na=n}function dl(e,n,r){var o=[],s={ld:e.Cy,width:n.w,height:n.h,ja:e.na};for(e=0;e<r.length;e++){n=r[e];var l=n.Fh(),h={};Wa(h,s);var p=n.Pb;switch(l){case"2d":if(C(n.Tb(),Rj)&&(h.Wo=n.Tb().getContextAttributes()),l=y&&y.uh()==="2d"){l=h.Wo;var d=y.ij;l=d===l?!0:d&&!l?!d.alpha&&!d.willReadFrequently:l&&!d?!l.alpha&&!l.willReadFrequently:!l.alpha==!l.alpha&&!d.willReadFrequently==!l.willReadFrequently}if(l)var g=!1;else if(p&&!g){var y=p;g=!1}else y=new Tj(h.ld,h.width,h.height,h.ja,"2d",h.Wo),g=!0;break;case"dom":y=p||new bl(h.ld,h.width,h.height,h.ja),g=!p;break;default:y=p||new Tj(h.ld,h.width,h.height,h.ja,n.Tb().uh(),h.Wo),g=!p}o[o.length-1]!==y&&(y.vi(o.length),o.push(y)),n.sf(y)}return o}function el(e,n){var r,o=e,s=n||[];if(e!==fl.NONE){if(n=r=s.length,gl.indexOf(o)===-1)throw new D(el,0,e);if(!s)throw new D(el,1,s);for(;r--;)if(E(s[r]))throw new D(el,1,s);if(o===fl.RECT&&3<n&&(s=[s[0],s[1],s[2],s[1],s[2],s[3],s[0],s[3]],o=fl.POLYGON),o===fl.CIRCLE&&2<n&&(e=s[2],0<e)){o=s[0];var l=s[1];r=Db(2*Hb(e),40);var h=360/r;for(s=[];r--;){var p=h*r*Zb;s.push(o+Nb(p)*e,l+Pb(p)*e)}o=fl.POLYGON}if(o!==fl.POLYGON||!n||s.length%2)throw new D(el,1,s);this.hw=s}}t("H.map.HitArea",el);var fl={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};el.ShapeType=fl;var gl=[fl.RECT,fl.CIRCLE,fl.POLYGON];el.prototype.Bm=function(e,n,r){return this.hw?kc(e,n,this.hw,r,!0):hc.NONE},el.prototype.hitTest=el.prototype.Bm;function hl(e,n){var r;gb(this,hl),hl.g.constructor.call(this,n),this.X(e),n&&"icon"in n&&(r=n.icon),this.ve(r||this.Dp())}u(hl,N),t("H.map.AbstractMarker",hl),hl.prototype.V=function(){return this.hm},hl.prototype.getGeometry=hl.prototype.V,hl.prototype.X=function(e){var n=this.hm;return C(e,ze)||C(e,Nf)?this.hm=e:(Ae(e,this.X,0),this.hm=Be(e)),n&&this.qa(hg.SPATIAL),this},hl.prototype.setGeometry=hl.prototype.X,hl.prototype.C=function(){return this.hm.C()},hl.prototype.kc=function(){return this.icon},hl.prototype.getIcon=hl.prototype.kc,hl.prototype.ve=function(e){var n=this.icon,r=!n;if(n!==e){if(!this.Xu(e))throw r?new D(this.constructor,1,e):new D(this.ve,0,e);this.icon=e,r||this.qa(hg.VISUAL)}return this},hl.prototype.setIcon=hl.prototype.ve,hl.prototype.Dp=function(){var e=this.Ny;return e||(e=this.constructor.prototype.Ny=this.tt(il)),e};var il={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new th(38,47),anchor:new L(19,45),hitArea:new el(fl.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};hl.prototype.P=function(){var e=hl.g.P.call(this),n=this.kc(),r=n.mc(),o=n.Db;return e.geometry=this.V().P(),r&&(n=e.properties.icon={id:n.uid},n.size={w:r.w,h:r.h},n.offset=[r.w/2-(o?o.x:0),r.h/2-(o?o.y:0)]),e},hl.prototype.forWorkerMessage=hl.prototype.P;function jl(e,n,r,o,s){if(!db(e.Mr)||!db(e.Dr))throw new D(jl,0,e);if(this.bt=e,!db(this.AD=n))throw new D(jl,1,n);if(E(this.sj=+r))throw new D(jl,2,r);if(!db(this.Gv=o)&&o!=null)throw new D(jl,3,o);if(!db(this.Mt=s)&&s!=null)throw new D(jl,4,s);this.id=new fe().next(),this.R=!1}t("H.util.animation.Animation",jl),jl.prototype.start=function(){var e=this;this.$k=uj(),this.R=!0;var n=this.$k;this.bt.Mr(function(){if(e.R){var r=uj(),o=r-e.$k,s=o/e.sj,l=!1;1<=s&&(s=1,l=!0),e.AD(e.Mt?e.Mt(s):s,o,r-n,r),n=r,l&&e.stop()}else e.stop()})},jl.prototype.start=jl.prototype.start,jl.prototype.stop=function(e){this.R=!1,this.bt.Dr(),e||this.Gv&&this.Gv(this)},jl.prototype.stop=jl.prototype.stop,jl.prototype.Lm=function(){return this.R},jl.prototype.isRunning=jl.prototype.Lm;function S(e,n,r,o){var s;if(S.g.constructor.call(this,e,n,r,o),this.qp=new Qi(this.$x),this.Xb=new L(0,0),(s=o.renderBaseBackground)&&(this.Cw=s.lower,this.Bw=s.higher),this.uj=!!o.enableSubpixelRendering,this.Kg=kl,this.ma=new Pk,this.T=o=new oj,this.fg=A(this.fg,this),o.addEventListener(o.j.wo,this.fg),o=e.element,this.qc=e=o.ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,o.insertBefore(e,o.firstChild),this.cl=new cl(this.qc,this.ja),this.Um=n.Ib().position,n=x.H.gl,!n)throw new Bb(S,'"H-webgl" module is missing');this.m=new Ek({viewport:this.ya,ld:this.qc,devicePixelRatio:this.ja,Pv:A(this.ba,this)}),n.WorkerBroker.addTarget("model",Ai),this.gq(),this.Tq=A(this.Tq,this),this.vg=A(this.vg,this),this.Ka=A(this.Ka,this),r.addEventListener(yi.prototype.j.Mi,this.Tq),this.o=ll,this.zoom=Ki(this,this.De.Ub()),this.yc(),this.mg()}u(S,Fi),t("H.map.render.webgl.RenderEngine",S),S.prototype.$x=100,S.prototype.Ib=function(){var e=this.Um;return Li(this,{position:{mB:e.mB,tB:e.tB},zoom:this.zoom,tilt:this.tx,heading:this.heading})},S.prototype.Tq=function(e){e=(e=e.target.D)&&e.mb(),(e&&e.getState())===di.INIT?e.load():(Hk(this.m),Jk(this.m,this.ib),this.ba())},S.prototype.type=Oi.WEBGL;var ll=2;S.prototype.getState=function(){return this.o},S.prototype.getState=S.prototype.getState,S.prototype.Fj=function(e,n){e=n-e;var r=Lb(2,8+this.zoom);return e<r/2?e:e-r*n/Ib(n)};function ml(e,n,r){function o(p){return s[p]+Cj(s[p],n[p])/2}if(!(r&fh.POSITION||r&fh.BOUNDS))return null;var s=Ik(e.m).getLookAtData();r=s.position;var l=n.position,h=n.bounds;return If(s.bounds,l.lat,l.lng,!1)||h&&If(h,r.lat,r.lng,!1)?null:(r=nl(e,{tilt:o("tilt"),heading:o("heading"),incline:0,bounds:He([r,l])}),r.zoom=Ki(e,r.zoom-.5),delete r.bounds,r)}S.prototype.mr=!1;function ol(e,n,r,o){return e=e.getCapabilities().lookAt[o],Ib(o==="zoom"?r[o]-n[o]:Cj(n[o],r[o]))/(e.max-e.min)||0}function pl(e,n,r){return e=Eb(8*ol(e,n,r,"zoom"),ol(e,n,r,"heading"),ol(e,n,r,"tilt")/2),fc(3e3*e,300,4e3)}S.prototype.ar=function(e){var n=this,r=e.newValue,o=e.modifiers,s=Ik(this.m);this.Jg(),this.Xb.set(0,0);var l=this.Do(r);if(oh.forEach(function(y){o&e[y.toUpperCase()]||delete l[y]}),e.animate){s=Ik(this.m).getLookAtData();var h=nl(this,l);r=ml(this,h,o);var p=1;ob(e.animate)&&(p=1/e.animate);var d=function(){return n.mr=!1};if(delete h.bounds,this.mr=!0,r){s=pl(this,s,r);var g=pl(this,r,h);ql(this,r,s*p,function(){return ql(n,h,g*p,d)})}else r=pl(this,s,h),ql(this,h,r*p,d)}else rl(l),s.setLookAtData(l);sl(this),Hk(this.m),this.ba()};function nl(e,n){return rl(n),Ik(e.m).getBestLookAtData(n)}function rl(e){var n=e.bounds;!n||n instanceof M||(e.bounds=Ff(n.C()))}function tl(e,n,r){Ik(e.m).setLookAtData(n),Hk(e.m),sl(e),e.ba(),r&&setTimeout(r,0)}function ql(e,n,r,o){var s=Ik(e.m).getLookAtData(),l=new Bj(s,n);l.bg.tilt+l.bg.heading+l.bg.zoom+l.kh!==0?e.ad(function(h){for(var p in l.bg)if(l.bg[p]!==0){var d=l.Dv[p](h);s[p]+=l.bg[p]*(d-l.fv[p]),l.fv[p]=d}return l.kh!==0&&(s.position=l.bp.mo(l.qy,l.kh*l.Dv.position(h),!0)),tl(e,s)},r,function(){return tl(e,n,o)}):tl(e,n,o)}S.prototype.Wn=function(){},S.prototype.setAnimationDuration=S.prototype.Wn,S.prototype.zp=function(){},S.prototype.getAnimationDuration=S.prototype.zp,S.prototype.Xn=function(){},S.prototype.setAnimationEase=S.prototype.Xn,S.prototype.Ap=function(){},S.prototype.getAnimationEase=S.prototype.Ap,S.prototype.Qn=function(){},S.prototype.resetAnimationDefaults=S.prototype.Qn;function ul(e,n){e.qp.ia(function(r,o){return o.Jb()===n})}m=S.prototype,m.Nv=function(e){ul(this,e.target.D),Hk(this.m),this.ba()},m.pk=function(e,n){S.g.pk.call(this,e,n),vl(n)&&(Hk(this.m),(e=(e=n.D)&&e.mb())&&e.getState()===di.INIT&&e.load())},m.Uq=function(e,n,r){var o;if(this.$j=uj(),ul(this,n.D),n.requestDomMarkers||C(n,Rj)||C(n,Ej)){var s=this.qe.ka;for(o=s.length;o--;){var l=s[o];if(l.Tb()===n){s.splice(o,1),l.l();break}}}vl(n)&&Jk(this.m,this.ib),this.af=this.ib.Sa(),e===0&&(Ji(this,n,!1),this.yc()),dl(this.cl,this.Sf(),this.Pf()),this.mi(),r||this.ba()};function vl(e){return!(C(e,Ej)||C(e,Rj))}m.gq=function(){var e=this.ib.Sa(),n=0,r=e.length;for(this.qe={Pe:[],ka:[]},this.af=e;n<r;n++){var o=e[n];this.pk(n,o),Ji(this,o,!0)}this.yc()},m.Vq=function(){this.yc()},m.yc=function(){S.g.yc.call(this);var e=this.getCapabilities().lookAt.zoom;Ik(this.m).setZoomConstraints(Eb(e.min,this.zq),Db(e.max,this.yq))},m.hq=function(e,n){var r;if(n){if(e={Pd:this.uj,Ab:this.Ab},n.L?C(n,Rj)?r=new Uj(n):C(n,Ej)&&(r=new Uj(n)):n.requestDomMarkers&&(r=new Kj(n,e)),r){this.qe.ka.push(r);var o=this.ib.Sa();this.qe.ka.sort(function(s,l){return o.indexOf(s.yb)-o.indexOf(l.yb)}),dl(this.cl,this.Sf(),this.Pf())}vl(n)&&Jk(this.m,this.ib)}this.af=this.ib.Sa()},m.Pf=function(){return this.qe.ka.filter(fb)},m.Po=function(){return this.o===ll},m.Do=function(e){var n=e.position;return Li(this,{zoom:Ki(this,e.zoom),position:new ze(n.lat,n.lng),tilt:e.tilt,heading:e.heading,bounds:e.bounds})};function sl(e){var n=Ik(e.m).getLookAtData();e.zoom=n.zoom,e.Um=n.position}m.Fs=4007501668557849e-8;function wl(e,n){return n=Ik(e.m).geoToMeters(n),new L(n.x/e.Fs+.5,1-(n.y/e.Fs+.5))}function xl(e,n){return n.sub(wl(e,e.Um)).scale(Lb(2,8+e.zoom))}m.Ka=function(e){return Ik(this.m).geoToPixel(e)},S.prototype.geoToScreen=S.prototype.Ka,S.prototype.Wa=function(e,n){return Ik(this.m).xyToGeo(e,n)},S.prototype.screenToGeo=S.prototype.Wa,S.prototype.Un=function(e,n){return e=this.Wa(e,n),n=this.De.Ib(),n.position=e,n};function yl(e,n,r,o,s,l,h,p){var d,g,y=0,v,_=function(){--y===0&&l(s)};if(p&&p.features)for(y=g=p.features.length,v=0;v<g;v++){var w=p.features[v],I=w.id;if(d=e.m.m.sources[w.source_name]){var G=d.provider,_t=G.qu();if(_t===pi.SOURCE){var _r=w.source_layer;if(_r==="overlays")zl(e,n,r,o,s,d,w.properties.overlays_config);else if(d=d.getMapObjectById(I)){if(_r!=="markers")s.push(d);else if(Al(e,n,r,d))s.push(d);else if(o&&!h){var _o=!0;Lk(e.m,{x:n,y:r},{radius:3.5,top_most_only:!1},function(Ca){yl(e,n,r,o,s,l,!0,Ca)})}}y--}else _t===pi.FEATURE?(_r=w.tile.coords,_o=G.getFeatureProxy(w.properties,_r,function(Ca){Ca&&(Ca.Ww(G),s.push(Ca)),_()}),_o||(d=e.qp.get(I),d||(d=new mg(w),d.ea(G),e.qp.add(I,d,1)),s.push(d),y--)):_t===pi.PROVIDER&&(_o=!0,G.Fw(w,!1).then(function(Ca){Ca&&(!(Ca instanceof hl)||Al(this,n,r,Ca))&&s.push(Ca),_()},function(){_()},e))}}_t&&(_o||y!==0)||l(s)}function zl(e,n,r,o,s,l,h){var p;for(e=e.Wa(n,r),n=h.length;n--&&(!(p=l.getMapObjectById(h[n].id))||0<=s.indexOf(p)||!p.V().Ff(e)||(s.push(p),!o)););}function Al(e,n,r,o){var s=o.kc(),l=s.Am,h,p=!l;if(l)if(s=s.Db,n+=s.x,r+=s.y,s=o.V(),C(s,Nf))for(o=s.ha,h=o.length;h--&&!p;)s=e.Ka(o[h]),p=l.Bm(n-s.x,r-s.y,0)!==hc.NONE;else s=e.Ka(s),p=l.Bm(n-s.x,r-s.y,0)!==hc.NONE;return p}S.prototype.La=function(e,n,r,o){var s=this,l=[];l=this.Mp(l,this.qe.ka,e*this.ja,n*this.ja,r),r&&l.length?o(l):this.m.m.initialized?Lk(this.m,{x:e,y:n},{radius:3.5,top_most_only:r},function(h){yl(s,e,n,r,l,o,!1,h)}):o(l)},S.prototype.getObjectsAt=S.prototype.La,m=S.prototype,m.Mp=function(e,n,r,o,s){for(var l=n.length,h;l--&&!((h=n[l])&&h.La&&(e=e.concat(h.La(r,o,s)),e.length&&s)););return e},m.xe=z,m.Sf=function(){var e=this.rl[2];return{w:e.right-e.left,h:e.bottom-e.top}},m.mg=function(){var e=this.qe.ka.length;Gi(this,this.ja),this.Xb.set(0,0);var n=this.Sf(),r=n.w,o=n.h;for(this.m.m.handleViewportUpdate();e--;){n=this.qe.ka[e].Pb;var s=n.mc();s.w===r&&s.h===o||n.Uk(r,o)}this.xe=new th(r,o),Hk(this.m),this.ba()},m.getCapabilities=function(){return Dk},S.prototype.getCapabilities=S.prototype.getCapabilities,m=S.prototype,m.Lk=function(){this.sa&&this.sa.R||(Gk(this.m)||uj()-this.$j<this.Kg)&&!this.ne?this.rh||(this.rh=sj(this.vg)):(this.ne&&(this.mi(),this.qj()),this.o=ll)},m.rh=0,m.mi=function(){this.qe.Pe.length=0},m.vg=function(){this.rh=0,this.ef&&this.ef.before();var e=Ik(this.m),n=e.getLookAtData(!1),r=e.getLookAtData(!0);e=this.ya.center.clone(),r=r.bounds.C();var o=this.zoom,s=this.Xb,l=this.af,h=l.length;for(this.Kg=kl;h--;){var p=l[h];C(p,yi)&&p.D&&p.D.xk(r,o)}this.ne=this.m.L(),this.De.rb(n),this.ne=this.Ln(r,e,o,!1,s,this.qe)&&this.ne,this.xe&&(this.ya.rb(this.xe),this.xe=z),this.sa&&this.sa.R&&this.Fo(),this.ef&&this.ef.after(),this.Lk()},m.Ln=function(e,n,r,o,s,l){var h=l.ka.length,p=!0,d;for(d=0;d<h;d++){var g=l.ka[d],y=l.Pe;if(g){var v=g.L(e,n,void 0,r,o,s,this.Ka,this.m.m.getCameraMatrix());v===Mg.ACTIVE&&(this.Kg=1/0),v!==Mg.DONE||y[d]||(this.qj(g.Tb()),y[d]=!0),y[d]||(p=!1)}}return p},m.qj=function(e){this.mr||setTimeout(A(this.dispatchEvent,this,{type:this.j.Us,target:e||this}),1)},m.disposeInternal=function(){var e=this.ib.Sa()[0],n=this.ya;tj(this.rh),this.bd(!0),e&&Ji(this,e,!1),this.Pf().forEach(function(r){r.l()}),n.element&&n.element.removeChild(this.qc),delete this.qc,this.o=3,this.m.l(),S.g.disposeInternal.call(this)},m.ba=function(){this.$j=uj(),this.Po()&&(this.ne=!1,this.o=1,this.Lk())},m.zc=function(e,n){this.Sg(e,n),this.Xb.set(0,0),Hk(this.m),this.ba()},m.Sg=function(e,n){Ik(this.m).applyPxOffset([e,n]),sl(this)},m.Ng=function(e,n,r){e=Ki(this,Ki(this,e)),this.sb(e,n,r)},S.prototype.zoomAt=S.prototype.Ng,S.prototype.sb=function(e,n,r){Ik(this.m).setLookAtData({zoom:e},ob(n)&&ob(n)?[n,r]:B),sl(this),Hk(this.m),this.ba()},S.prototype.Jg=function(){this.bd(!0),this.T.R&&this.hc(!0),this.ma.R&&this.ic(!0)},S.prototype.Rk=function(e){if(e){var n={};n.wk=e.power,n.tj=e.ease,n.duration=e.duration,this.ta=n}},S.prototype.Id=function(e,n){var r=!!(n||e&(Ii.HEADING|Ii.TILT));this.Jg(),this.Rk(n),this.ma.start(e,r),Ik(this.m).setPanning(!0)},S.prototype.startInteraction=S.prototype.Id,S.prototype.vd=function(e,n,r,o,s){var l=this.ma,h=!1;if(l.R){var p=Ik(this.m),d=p.getLookAtData(),g=this.ya.center;g=[g.x,g.y],n=l.store(e,n,r,o,s),r=l.im(),e=l.Ah(),o=this.ma.jm(),s=this.ma.Bp(),l.Kh&&(l.$d(Ii.TILT)&&(p.setLookAtData({tilt:Mi(this,d.tilt+e.y/this.ya.height*-180)},g),h=!0),n&&o!==1&&l.$d(Ii.ZOOM)&&(h=l.im(),this.sb(Ki(this,Jb(Lb(2,this.zoom)*o)/Tb),h.x,h.y),h=!0),l.$d(Ii.COORD)&&0<Ok(e)&&(this.zc(-e.x,-e.y),h=!0),l.$d(Ii.HEADING)&&(n?p.setLookAtData({heading:d.heading+Ni(this,s)},[r.x,r.y]):e.x&&p.setLookAtData({heading:Ni(this,d.heading+e.x/this.ya.width*360)},g),h=!0),h&&(Hk(this.m),this.ba()))}},S.prototype.interaction=S.prototype.vd,S.prototype.ic=function(e){var n=this;if(this.ma.R&&!e){if(this.ta){e=this.ma.nc();var r=this.ma.Mf(),o=this.ta.duration,s=(this.ta.wk||1)*e,l=new Qj(-s/(0<o?o:1),s);!E(r.x)&&!E(r.y)&&0<s&&n.ma.$d(Ii.COORD)&&this.ad(function(h){s=l.Ij(h*o),E(s)||n.zc(Fb(-r.x*s),Fb(-r.y*s))},o,void 0,this.ta.tj)}delete this.ta,this.ma.clear()}Ik(this.m).setPanning(!1),this.ba()},S.prototype.endInteraction=S.prototype.ic,S.prototype.Hd=function(e,n,r){this.Jg(),this.T.start(n,r),this.Rk(e),Ik(this.m).setPanning(!0)},S.prototype.startControl=S.prototype.Hd,S.prototype.control=function(e,n,r,o,s,l){for(var h=0,p;h<arguments.length;h++)if(p=+arguments[h],p!==p)throw new D(this.control,h,p);this.T.R&&this.T.set(e,n,r,o,s,l)},S.prototype.control=S.prototype.control,S.prototype.hc=function(e,n){var r=this,o;if(this.T.R){this.bd(!0);var s=uj(),l=s-this.kj;if(1<=l){var h=rj(this.T);this.Ri(h,l)}if(!this.ta||e||n)typeof n=="function"&&(e=Ik(this.m),e=e.getLookAtData(),n(e),this.Go(e));else{n=this.T.nc();var p=this.T.Mf(),d=this.ta.duration,g=(this.ta.wk||1)*n,y=new Qj(-g/(0<d?d:1),g);!E(p.Lb)&&!E(p.Mb)&&0<g&&this.ad(function(v,_,w,I){s&&(w=I-s,s=0),g=y.Ij(v*d)*w,E(g)||((o=p.Nb*g)&&r.sb(Ki(r,r.zoom+o),r.T.Ug,r.T.Vg),r.zc(Fb(p.Lb*g),Fb(p.Mb*g)))},d,void 0,this.ta.tj)}this.T.reset(),Ik(this.m).setPanning(!1),this.ba()}},S.prototype.endControl=S.prototype.hc,m=S.prototype,m.Go=function(e){var n=this,r=xl(this,wl(this,e.position)),o=r.y;r=r.x;var s=e.zoom,l=xl(this,wl(this,this.Um));e=l.y;var h=l.x;l=this.zoom;var p=this.T.nc(),d=this.T.Ug,g=this.T.Vg,y=0;if(r=this.Fj(h,r),r-=h,o-=e,l=s-l,e=Kb(r*r+o*o+l*l),p!==0&&e!==0){var v=r/e,_=o/e,w=l/e,I=p*p/(2*e);this.ad(function(G,_t){var _r;G!==1?(G=p*_t-I*_t*_t/2,_t=G-y,(_r=w*_t)&&(_r=Ki(n,n.zoom+_r),n.sb(_r,d,g)),n.zc(Fb(v*_t),Fb(_*_t)),y=G):(n.sb(Ki(n,s),d,g),n.ba())},2*e/p)}},m.fg=function(e){var n=this,r=e.mt;this.Xb.set(0,0),r.Lb||r.Mb||r.Nb||r.ni||r.oi||r.Jk?(this.kj=uj(),this.ad(function(o,s,l,h){n.kj=h,n.Ri(r,l)},ac),this.ba()):this.bd(!0)},m.Ri=function(e,n){n=n||0;var r=this.T,o=Ik(this.m),s=o.getLookAtData();e.Nb&&this.sb(Ki(this,s.zoom+e.Nb*n),r.Ug,r.Vg),o.setLookAtData({heading:Ni(this,s.heading+e.oi*n),tilt:Mi(this,s.tilt+e.ni*n)}),sl(this),this.zc(e.Lb*n,e.Mb*n)},m.ad=function(e,n,r,o){this.sa&&this.sa.R&&this.sa.stop(!0),this.sa=new jl(this,e,n,r,o),this.sa.start()},m.bd=function(e){this.sa&&this.sa.R&&this.sa.stop(e)},m.kp=function(){},S.prototype.enter=S.prototype.kp,S.prototype.pp=function(e){Hi(this.qc,e)},S.prototype.exit=S.prototype.pp,S.prototype.capture=function(e,n,r,o){var s=this;return Mk(s.m).then(function(l){var h=s.qc.ownerDocument.createElement("canvas"),p=s.ja,d=h.getContext("2d"),g=s.m.lb()/p,y=(r-e)*p;return p*=o-n,h.width=y,h.height=p,d.drawImage(l,e*g,n*g,y*g,p*g,0,0,y,p),h})},S.prototype.mz=function(e){return Ik(this.m).geoToMeters(e)},S.prototype.geoToMeters=S.prototype.mz,S.prototype.CB=function(e){return Ik(this.m).metersToGeo(e)},S.prototype.metersToGeo=S.prototype.CB;var kl=5e3;function Bl(e,n){db(e)&&(this.Tv=e),ob(n)&&(this.ml=n)}t("H.util.Request",Bl),Bl.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var Cl=[0,1,2,3,4];Bl.prototype.o=0,Bl.prototype.getState=function(){return this.o},Bl.prototype.getState=Bl.prototype.getState,Bl.prototype.F=function(e){if(0>Cl.indexOf(e))throw new D(this.F,0,e);(this.o!==e||e===1&&1<this.ml)&&(this.o=e,this.Tv&&this.Tv(this))},Bl.prototype.ml=1,Bl.prototype.IA=function(){return this.ml},Bl.prototype.getTotal=Bl.prototype.IA,Bl.prototype.Bn=0,Bl.prototype.tA=function(){return this.Bn},Bl.prototype.getProcessed=Bl.prototype.tA,Bl.prototype.Vt=0,Bl.prototype.Mz=function(){return this.Vt},Bl.prototype.getFailed=Bl.prototype.Mz;function Dl(e,n){e.Bn<e.ml&&(fb(n)||(n=2),n===0||n===1||e.o!==0&&e.o!==1||(e.Bn++,n!==2&&e.Vt++,e.F(e.Bn<e.ml?1:2)))}Bl.prototype.Xi=function(){},Bl.prototype.cancel=function(){this.o!==3&&(this.Xi(),this.F(3))},Bl.prototype.cancel=Bl.prototype.cancel;function El(e,n,r,o,s,l){El.g.constructor.call(this,isNaN(e)?15:e,n,r,o,s,l)}u(El,Ke),El.prototype.Ll=function(e){for(var n,r,o=this.head,s=e;s;){if(e=s.entries){if(n=e.length){if(2>n&&(r=s.parent)&&r.hb===1){r.removeChild(s),o===s&&(o=r),r.entries=e,s=e[0].node=r;continue}}else if(delete s.entries,(r=s.parent)&&(r.removeChild(s),o===s&&(o=r),r.hb===1)){s=r.hb?r[0]||r[1]||r[2]||r[3]:null;continue}}break}this.head!==o&&(this.head=o,this.jd())},El.prototype.Yd=function(e,n){if(Re(this.root,e,n,e,n))return this.Vb(this.root,e,n,this.Qh);throw Error("Coordinates out of bounds")},El.prototype.Vb=function(e,n,r,o){var s=e.entries;if(o)if(e.hb)s=this.Sj(e,n,r,o);else if(s){s=s[0];var l=e.th(+(s[1]>=e[8])|+(s[0]>=e[9])<<1);l.entries=e.entries,delete e.entries,s.node=l,this.jd(l),s=this.Sj(e,n,r,o)}else e.Qg(s=new Fl(n,r)),this.jd(e),Ne(this,s,!0);else s||this.jd(e),e.Qg(s=new Fl(n,r)),Ne(this,s,!0);return s},El.prototype.Sj=function(e,n,r,o){return this.Vb(e.th(+(n>=e[8])|+(r>=e[9])<<1),n,r,o-1)};function Fl(e,n){this.id=Qe++,this[0]=n,this[1]=e}Fl.prototype.Nf=function(e){return this[e%2]};function Gl(){this.Ae=new El(10,180,90,0,0,!0)}m=Gl.prototype,m.jc=0,m.I=null,m.C=function(){var e=this.I,n;return!e&&(n=Le(this.Ae))&&(this.I=e=new J(-n[0],n[3],-n[2],n[1])),e},m.Yd=function(e){return++this.jc,this.I=null,this.Ae.Yd(e.lng,-e.lat)},m.remove=function(e){return(e=this.Ae.remove(e))&&(--this.jc,this.I=null),e},m.Fm=function(e,n,r){var o=this.Ae,s=e.Lc(),l=e.Jc(),h=-s.lat;s=s.lng;var p=-l.lat;return l=l.lng,e.pc()?o.ob(-180,h,l,p,r,n).concat(o.ob(s,h,180,p,r,n)):o.ob(s,h,l,p,r,n)};function Hl(e,n,r){var o="anonymous",s=1;this.Wg=A(this.Wg,this),N.call(this,r),this.X(e),r&&(e="crossOrigin",e in r&&(o=r[e]),e="opacity",e in r&&(s=r[e])),this.Rw(n,o),this.Ed(s)}u(Hl,N),t("H.map.Overlay",Hl),Hl.prototype.type=og.OVERLAY,Hl.prototype.C=function(){return this.I},Hl.prototype.getBoundingBox=Hl.prototype.C,Hl.prototype.ti=function(e){return C(e,J,this.ti,0,e),this.X(e)},Hl.prototype.setBoundingBox=Hl.prototype.ti,Hl.prototype.V=function(){return this.I},Hl.prototype.getGeometry=Hl.prototype.V,Hl.prototype.X=function(e){var n=this.I,r=!n;return C(e,J,this.X,0,e),(r||!n.da(e))&&(this.I=e,r||this.qa(hg.SPATIAL)),this},Hl.prototype.setGeometry=Hl.prototype.X,Hl.prototype.Se=function(){return this.gb.getData()},Hl.prototype.getBitmap=Hl.prototype.Se,Hl.prototype.Rw=function(e,n){var r=this.gb;return r&&r.getState()!==1&&r.cancel(),this.gb=new Vj(e,this.Wg,!0,B,n),this},Hl.prototype.setBitmap=Hl.prototype.Rw,Hl.prototype.Wg=function(e,n){this.gb=n,e===1&&this.qa(hg.VISUAL)},Hl.prototype.Ue=function(){return this.Qc},Hl.prototype.getOpacity=Hl.prototype.Ue,Hl.prototype.Ed=function(e){var n=this.Qc,r=2>n;if(e-=0,0<=e&&1>=e)e!==n&&(this.Qc=e,r&&this.qa(hg.VISUAL));else throw new D(this.Ed,0);return this},Hl.prototype.setOpacity=Hl.prototype.Ed,Hl.prototype.P=function(){var e=Hl.g.P.call(this);return e.geometry=Ff(this.I).P(),e.properties.overlay=!0,e},Hl.prototype.forWorkerMessage=Hl.prototype.P;function Il(e,n){if(!C(e,Element)){if(Jl.innerHTML=e,e=Jl.firstElementChild,!e)throw new D(Il,0,"No element data");Jl.removeChild(e);var r=!0;Jl.innerHTML=""}this.Uo=ne(e).length!==0,this.Nt=r?e:oe(e,x.document,this.Uo),n&&(r="onAttach",r in n&&ib(e=n[r],"Function",Il,1,r)&&(this.Oq=e),r="onDetach",r in n&&ib(e=n[r],"Function",Il,1,r)&&(this.Sq=e))}t("H.map.DomIcon",Il);var Jl=document.createElement("DIV");Il.prototype.Oq=null,Il.prototype.Sq=null,Il.prototype.eu=function(e){return oe(this.Nt,e,this.Uo)},Il.prototype.Uo=!1;function Kl(e,n){Kl.g.constructor.call(this,e,n)}u(Kl,hl),t("H.map.DomMarker",Kl),Kl.prototype.type=og.DOM_MARKER,Kl.prototype.ro=2,Kl.prototype.tt=function(e){var n=new Il(e.svg,e);return e=e.anchor,n.Nt.style.margin=-e.y+"px 0 0 -"+e.x+"px",n},Kl.prototype.Xu=function(e){return C(e,Il)};function Ll(e,n){var r,o="anonymous";if(this.uid=Ml.next(),Ll.g.constructor.call(this),n){var s="size";if(s in n){var l=n[s];if(!l||isNaN(l.w)||isNaN(l.h))throw new D(Ll,1,s);this.co=new th(l.w,l.h)}if(s="anchor",s in n){if(l=n[s],!l||isNaN(l.x)||isNaN(l.y))throw new D(Ll,1,s);this.Db=new L(l.x,l.y)}s="hitArea",s in n&&(l=n[s],C(l,el,Ll,1),this.Am=n[s]),s="asCanvas",s in n&&(r=n[s]),s="crossOrigin",s in n&&(o=n[s]),l=n.stickHeight,l===+l&&0<l&&(this.jD=l),s="stickColor",l=n[s],s in n&&lb(l)&&(this.iD=l)}e=new Vj(e,A(this.Wg,this),r,this.co,o),n=this.o=e.getState(),n!==0?this.Wg(n,e):this.El=e}u(Ll,F),t("H.map.Icon",Ll);var Ml=new fe;Ll.State={ERROR:-1,LOADING:0,READY:1},Ll.prototype.getState=function(){return this.o},Ll.prototype.getState=Ll.prototype.getState,Ll.prototype.Wg=function(e,n){if(this.gb=n.getData(),e===1){var r=this.co;r||(r=this.co=n.mc()),this.Db||(this.Db=new L(r.w/2|0,r.h))}this.El&&(this.o=e,delete this.El,this.dispatchEvent("statechange"))},Ll.prototype.gb=z,Ll.prototype.Se=function(){return this.gb},Ll.prototype.getBitmap=Ll.prototype.Se,Ll.prototype.mc=function(){return this.co||z},Ll.prototype.getSize=Ll.prototype.mc,Ll.prototype.Db=z,Ll.prototype.yp=function(){return this.Db},Ll.prototype.getAnchor=Ll.prototype.yp,Ll.prototype.Am=z,Ll.prototype.Sz=function(){return this.Am},Ll.prototype.getHitArea=Ll.prototype.Sz,Ll.prototype.disposeInternal=function(){Ll.g.disposeInternal.call(this),this.gb?(this.gb.removeAttribute("src"),delete this.gb):(this.El.cancel(),delete this.El)};function Nl(e){var n;gb(this,Nl),Nl.g.constructor.call(this,e),this.Wf=e=[];for(n in og)e[og[n]]=new gg}u(Nl,Q),t("H.map.provider.ObjectProvider",Nl),Nl.prototype.qr=ie,Nl.prototype.providesByViewport=Nl.prototype.qr,Nl.prototype.Kc=function(e){return this.Wf[e||og.ANY]},Nl.prototype.getInvalidations=Nl.prototype.Kc,Nl.prototype.Ih=function(e,n){if(n!==hg.NONE){var r=this.Wf[og.ANY],o=r.Ld+1;r.update(o,n),r=this.Wf[e.type],r.update(o,n),e.Kc().update(o,n),this.jb(e)}},Nl.prototype.invalidateObject=Nl.prototype.Ih,Nl.prototype.requestOverlays=Nl.prototype.wg,Nl.prototype.requestSpatials=Nl.prototype.Nn,Nl.prototype.requestSpatialsByTile=Nl.prototype.On,Nl.prototype.tw=!1,Nl.prototype.requestMarkers=Nl.prototype.pe,Nl.prototype.requestDomMarkers=Nl.prototype.oe;function Ol(e,n){var r=n&&(+n.extrusion||+n.extrude)||0,o=n&&+n.elevation||0,s=0;if(Ol.g.constructor.call(this,!0,n),0<o&&(s+=o,this.If=o),0<r&&(s+=r,this.nh=r),2047<s)throw new Vd(Ol,s,[0,2047]);C(e,K)?this.X(new M(e)):this.X(e)}u(Ol,Fg),t("H.map.Polygon",Ol);var Pl=new M(new K([0,0,0,0,0,0,0,0,0]));Ol.prototype.nh=0,Ol.prototype.If=0,Ol.prototype.Hb=Pl,Ol.MAX_EXTRUDE_HEIGHT=2047,Ol.prototype.Pr=function(e){var n=+e;if(n!==e)throw new D(this.Pr,0,e);if(0>n||2047<this.If+n)throw new Vd(this.Pr,this.If+n,[0,2047]);this.nh=n,this.qa(hg.SPATIAL)},Ol.prototype.setExtrusion=Ol.prototype.Pr,Ol.prototype.Lz=function(){return this.nh},Ol.prototype.getExtrusion=Ol.prototype.Lz,Ol.prototype.Or=function(e){var n=+e;if(n!==e)throw new D(this.Or,0,e);if(0>n||2047<this.nh+n)throw new Vd(this.Or,this.nh+n,[0,2047]);this.If=n,this.qa(hg.SPATIAL)},Ol.prototype.setElevation=Ol.prototype.Or,Ol.prototype.Gz=function(){return this.If},Ol.prototype.getElevation=Ol.prototype.Gz,Ol.prototype.V=function(){return this.Hb},Ol.prototype.getGeometry=Ol.prototype.V,Ol.prototype.X=function(e){if(C(e,M))var n=!1;else C(e,Mf,this.X,0),n=!0;return this.Uf=n,n=this.Hb,this.Hb=e,n!==Pl&&this.qa(hg.SPATIAL),this},Ol.prototype.setGeometry=Ol.prototype.X,Ol.prototype.C=function(){return this.V().C()},Ol.prototype.getBoundingBox=Ol.prototype.C,Ol.prototype.xh=function(e){var n,r=this.V(),o,s;if(this.Uf){r=r.ha;var l=0;for(s=r.length;l<s;l++)(o=Ql(this,r[l],e,r[l].jf))&&(n||(n=[]),n.push(o))}else o=this.jf,o===B&&(o=this.Uf?Gf.NORTH:this.V().jf),(o=Ql(this,r,e,o))&&(n=[o]);return n},Ol.prototype.getGeometriesForTile=Ol.prototype.xh;function Ql(e,n,r,o){var s,l,h=0,p=!0;if(s=Rl(e,n.Fb,r,o,n.C())){var d=new ig(s),g=n.cb;if(l=g.length)for(d.Uj=d.Rc.length;h<l;h++)(s=Rl(e,g[h],r,o,n.du(h)))&&(d.Rc=d.Rc.concat(s));for(l=d.Rc.length,h=0;h<l;h++)if(d.Rc[h]!==kg){p=!1;break}p&&(d=h%2?jg:B)}return d}function Rl(e,n,r,o,s){var l=r.Pj(),h=s,p=h.oc(),d=[[]],g=n.S,y=[],v=g.length,_,w=!1;for(_=0;_<v;_+=3){var I=g[_],G=g[_+1];w||Ib(G)!=180||(y.push(I),y.push(G),y.push(I),y.push(-G),w=!0),y.push(I),y.push(G)}if(g=y,360>p&&h.W==-180&&(h=new J(h.fa,180,h.ga,h.ca)),360>p&&h.ca==180&&(h=new J(h.fa,h.W,h.ga,-180)),h.pc()){for(p=g,I=p.length,g=-1,y=0;y<I-2;y+=2)if(xe(p[y+1],p[y+3])){g=y+2;break}g===-1&&xe(p[I-1],p[1])&&(g=I),g!==-1&&(v=p[g-2],y=p[g-1],_=p[g%I],w=p[(g+1)%I],Ib(v)!==180&&Ib(_)!==180&&(G=Ib(_-v),I=Ib(w-y),I+=180<I?-360:0,w=Ib(180-w),w+=180<w?-360:0,I&&w&&(G/=Ib(I)/Ib(w),v=_+(_>v?-G:G),y=0<y?180:-180,p.splice(g,0,v,y,v,-y)))),g=p}if(d[0]=Sl([].concat(g),h.W),360>h.oc()&&h.Ff(new ze(h.fa,180))&&(g=Sl([].concat(g),h.ca),d.push(g)),h=r.pm(),e=Gg(e,d,!0,h),s.oc()===360&&n.Cp(!0)%2===1){for(n=e,e=r.Pj(),n[0][1].x>n[0][n[0].length-1].x&&(n[0]=n[0].reverse()),g=[],p=n[0].length-1,d=0;d<p;d++)y=n[0][d],g[d]=new L(y.x-2*h.w,y.y),g[d+p]=new L(y.x-h.w,y.y),g[d+2*p]=new L(y.x,y.y),g[d+3*p]=new L(y.x+h.w,y.y),g[d+4*p]=new L(y.x+2*h.w,y.y);n[0]=g,d=h.wq(o,0),d.y=2*e[o===Gf.NORTH?"top":"bottom"],o=d.clone(),d.x=n[0][n[0].length-1].x+1,o.x=n[0][0].x-1,n[0].push(d,o),e=n}if(o=l.left,n=l.top,d=l.right,l=l.bottom,tf(e,o,n,d,l,!0).length){if(!r.nm().Vo(s)){for(r=e,s=[new L(o,n),new L(d,n),new L(d,l),new L(o,l)],l=[],e=r.length;e--;)if(o=vf(s,r[e]))for(n=Tl(o),l.push(n);o.Nq;)o=o.Nq,n=Tl(o),l.push(n);e=l}}else r=Ul(o,n,e[0]),e[1]&&(r=r!==Ul(o,n,e[1])),e=r?[kg]:B;return e}function Ul(e,n,r){var o,s,l,h=o=r[0].x,p=s=r[0].y,d=1;for(l=r.length;d<l;d++){var g=r[d].x,y=r[d].y;g>o?o=g:g<h&&(h=g),y>s?s=y:y<p&&(p=y)}return h<=e&&e<=o&&p<=n&&n<=s&&lc({x:e,y:n},mc(r.concat(r[0])))}function Tl(e){var n=[],r=e;do{var o=Fb(100*(r.jC?r.jC:r.x))/100,s=Fb(100*(r.kC?r.kC:r.y))/100;if(!l||.01<Kb(Lb(l.x-o,2)+Lb(l.y-s,2))){var l=new L(o,s);n.push(l)}r=r.next}while(r&&r!==e);return n}Ol.prototype.Ti=z;function Sl(e,n){var r,o=Number.POSITIVE_INFINITY,s=-1,l=e.length;for(r=0;r<l;r+=2){var h=Ib(e[r+1]-n);h+=180<h?360-h:h,h<o&&(o=h,s=r)}return 0<r?(n=e.splice(s,e.length-s),n.concat(e)):e}Ol.prototype.P=function(){var e=Ol.g.P.call(this),n=this.V(),r=this.Uf?n.ha:[n],o,s=e.properties,l=e.geometry=n.P();if(s.style=this.J().P(),s.height=this.nh+this.If,s.min_height=this.If,this.C().pc()&&(l.type="MultiPolygon",this.Uf)){var h=[];r.forEach(function(p,d){o=l.coordinates[d],p.C().pc()?h=h.concat(o):h.push(o)}),l.coordinates=h}return e},Ol.prototype.forWorkerMessage=Ol.prototype.P;function T(e){var n={};this.Eu=n.previousSibling=n.nextSibling=n,this.fD=new fe,T.g.constructor.call(this,e),e&&"objects"in e&&this.hd(e.objects)}u(T,N),t("H.map.Group",T),T.prototype.type=og.GROUP,T.prototype.ui=function(e,n){return this.lr=!0,e=T.g.ui.call(this,e,n),this.lr=!1,e&&this.forEach(Vl,!0),e},T.prototype.setProvider=T.prototype.ui;function Vl(e,n,r){e.ui(r.D)}T.prototype.contains=function(e){var n=this===e;if(!n&&this.ah&&C(e,N))for(;!n&&e;)e===this?n=!0:e=e.Ma;return n},T.prototype.contains=T.prototype.contains,T.prototype.Hk=function(){this.qo=B,this.forEach(Wl,!0)},T.prototype.resetZInfo=T.prototype.Hk;function Wl(e){e.Hk()}T.prototype.lr=!1,T.prototype.qa=function(e){var n=T.g.qa.call(this,e);return n&&!this.lr&&(this.Zt=e,this.forEach(Xl,!0),delete this.Zt),n},T.prototype.invalidate=T.prototype.qa;function Xl(e,n,r){e.qa(r.Zt)}T.prototype.forEach=function(e,n,r){var o;if(this.ah){var s=this.Eu,l=s.nextSibling;for(o=0;l!==s;){var h=l.nextSibling;e.call(r,l,o++,this),n&&C(l,T)&&l.forEach(e,n,r),l=h}}},T.prototype.forEach=T.prototype.forEach,T.prototype.bb=function(e){var n=[];return this.forEach(Yl,e,n),n},T.prototype.getObjects=T.prototype.bb,T.prototype.C=function(){var e=null;return this.ah&&this.forEach(function(n){n.C&&(n=n.C())&&(e=e?e.yd(n):n)}),e},T.prototype.getBoundingBox=T.prototype.C;function Yl(e){this.push(e)}T.prototype.ah=0,T.prototype.wz=function(){return this.ah},T.prototype.getChildCount=T.prototype.wz,T.prototype.Y=function(e){var n=this.Eu,r=n.previousSibling;if(C(e,N,this.Y,0),e.contains(this))throw new Bb(this.Y,"The new object contains the parent group");var o=e.sm(!0),s=e.Ma;if(s!==this){if(s){s=e.previousSibling;var l=e.nextSibling;s.nextSibling=l,l.previousSibling=s}e.Ma=this,N.g.ea.call(e,this),r.nextSibling=e,e.previousSibling=r,e.nextSibling=n,n.previousSibling=e,this.ah++}return e.ds=this.fD.next(),e.Hk(),n=e.ui(this.D,this.Y),e.sm(!0)!==o&&e.qa(hg.VOLATILITY),n||e.qa(hg.Z_ORDER),e},T.prototype.addObject=T.prototype.Y,T.prototype.hd=function(e){var n;kb(e,this.hd,0);var r=e.length;for(n=0;n<r;n++)this.Y(e[n])},T.prototype.addObjects=T.prototype.hd,T.prototype.Na=function(e){if(!e||e.Ma!==this)throw new Bb(this.Na,"object not found");var n=e.previousSibling,r=e.nextSibling;return n.nextSibling=r,r.previousSibling=n,e.Ma=null,N.g.ea.call(e,null),delete e.previousSibling,delete e.nextSibling,C(e.D,O)&&e.ui(null,this.Na),this.ah--,e},T.prototype.removeObject=T.prototype.Na,T.prototype.ug=function(e){var n;kb(e,this.ug,0);var r=e.length;for(n=0;n<r;n++)this.Na(e[n])},T.prototype.removeObjects=T.prototype.ug,T.prototype.ia=function(){var e=this.bb();this.ug(e)},T.prototype.removeAll=T.prototype.ia,T.prototype.ye=function(e){for(var n=this.bb(),r=0,o=n.length,s=[],l,h,p;r<o;r++)p=n[r],p instanceof T?(l=e?e(p.getData()):p.getData(),h=rg(this,l,!!e),l={type:"Feature"},l.properties=h,p.hi&&(l.id=p.hi),l.geometry={},l.geometry.type="GeometryCollection",l.geometry.geometries=Zl(this,p.bb()),s.push(l)):s.push(p.ye(e));return{type:"FeatureCollection",features:s}},T.prototype.toGeoJSON=T.prototype.ye;function Zl(e,n){for(var r=0,o=n.length,s,l=[];r<o;r++)s=n[r],s=s instanceof T?{type:"GeometryCollection",geometries:Zl(e,s.bb())}:s instanceof hl||s instanceof Hl||s instanceof Jg||s instanceof Ol?s.V().ye():{type:"FeatureCollection",features:le},l.push(s);return l}T.prototype.P=function(){var e=T.g.P.call(this);return e.type="Group",e},T.prototype.forWorkerMessage=T.prototype.P;function O(e){e=e||{},O.g.constructor.call(this,e),this.Ag=e=new T({min:e.min,max:e.max}),e.D=this,e.ea(this),e.qa(hg.ADD),this.rk=new Ve,this.yi=new Ve,this.ek=new Gl,this.jk=new Ve,this.bm=new Gl,this.Zm=new Ve}u(O,Nl),t("H.map.provider.LocalObjectProvider",O),O.prototype.getCapabilities=function(){return Fh.PROVIDES_BY_VIEWPORT|Fh.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Fh.PROVIDES_DOM_MARKERS|Fh.CROP_LINES_BY_TILE},O.prototype.mb=function(){if(!this.Vi&&(this.Vi=O.g.mb.call(this),this.Vi instanceof gi)){var e=new ui(this.getCapabilities()|Fh.HAS_VOLATILE_DATA,this.uid+"_vol",this.min,this.max,this.Qc,this.tileSize);this.Vi.fk(e.Je())}return this.Vi},O.prototype.getStyleInternal=O.prototype.mb,O.prototype.Xa=function(e,n){O.g.Xa.call(this,e,n),this.Vi=null},O.prototype.setStyleInternal=O.prototype.Xa,O.prototype.rd=function(){return this.Ag},O.prototype.getRootGroup=O.prototype.rd,O.prototype.Ih=function(e,n){n&hg.SPATIAL&&this.Y(e),O.g.Ih.call(this,e,n)},O.prototype.invalidateObject=O.prototype.Ih,O.prototype.Y=function(e){var n;if(C(e,N,this.Y,0),e.D!==this)throw new Bb(this.Y,"foreign object");this.Na(e);var r=e.type;if(r===og.MARKER)if((n=e.V())instanceof ze){var o=!0;r=this.ek}else r=this.jk;else r===og.DOM_MARKER?(n=e.V())instanceof ze?(o=!0,r=this.bm):r=this.Zm:r=r===og.OVERLAY?this.rk:this.yi;o=o?r.Yd(n):r.Lu(e.C()),o.Cs=e,e.As=o},O.prototype.Na=function(e){var n;if(e){if(e.D!==this){if(C(e,N))throw new Bb(this.Na,"foreign object")}else if(n=e.As){var r=e.type;r===og.MARKER?this.ek.remove(n)||this.jk.remove(n):r===og.DOM_MARKER?this.bm.remove(n)||this.Zm.remove(n):r===og.OVERLAY?this.rk.remove(n):this.yi.remove(n),delete n.Cs,delete e.As}}},O.prototype.removeObject=O.prototype.Na;function $l(e,n,r,o,s,l,h){if(h=h||[],n.jc)for(e=n!==e.ek&&n!==e.jk,s=!s,n=n.Fm(r,l,l),r=n.length,l=0;l<r;l++){var p=n[l].Cs,d;if(d=o!==void 0){for(var g=Gb(o),y=p;(d=y.zb<=g&&y.Oc>=g)&&(y=y.Ma););d=!d}d||!s&&!p.Vd(!0)||(e||p.kc().getState()===1)&&h.push(p)}return h}O.prototype.sr=function(){return 0<this.rk.jc},O.prototype.providesOverlays=O.prototype.sr,O.prototype.wg=function(e,n,r){return $l(this,this.rk,e,n,r,!1).filter(function(o){return o.Se()})},O.prototype.requestOverlays=O.prototype.wg,O.prototype.me=function(){return 0<this.yi.jc},O.prototype.providesSpatials=O.prototype.me,O.prototype.Nn=function(e,n,r){return $l(this,this.yi,e,n,r,!1)},O.prototype.requestSpatials=O.prototype.Nn,O.prototype.On=function(e,n){return $l(this,this.yi,e.nm(),e.zL,n,!1)},O.prototype.requestSpatialsByTile=O.prototype.On,O.prototype.Uc=function(){return 0<this.ek.jc+this.jk.jc},O.prototype.providesMarkers=O.prototype.Uc,O.prototype.pe=function(e,n,r){return am(this,e,n,r,!1)},O.prototype.requestMarkers=O.prototype.pe;function am(e,n,r,o,s){var l=$l(e,e.ek,n,r,o,s);return $l(e,e.jk,n,r,o,s,l),l}O.prototype.Tc=function(){return 0<this.bm.jc+this.Zm.jc},O.prototype.providesDomMarkers=O.prototype.Tc,O.prototype.oe=function(e,n,r){return bm(this,e,n,r,!1)},O.prototype.requestDomMarkers=O.prototype.oe;function bm(e,n,r,o,s){var l=$l(e,e.bm,n,r,o,s);return $l(e,e.Zm,n,r,o,s,l),l}function cm(e,n,r){var o=r.V(),s,l=dm.bind(null,e);e=em.bind(null,e),C(r,Jg)?s=C(o,K)?l(o):o.ha.some(l):C(r,Ol)?s=C(o,M)?e(o):o.ha.some(e):C(r,Hl)&&(s=e(Ff(o))),s&&n.push(r)}function dm(e,n){t:{var r=n.S,o=Kf(e,n);if(!o){n=n.S.length;for(var s=0;s<n;s+=3)if(If(e,r[s],r[s+1])){e=!0;break t}}e=o}return e}function em(e,n){return Lf(e,n)}function fm(e,n,r){for(var o=e.length;o--;){var s=e[o],l=s.V();if(C(l,Nf)){l=l.ha;for(var h=l.length,p;h--;)if(p=l[h],If(n,p.lat,p.lng)){r.push(s);break}}else If(n,l.lat,l.lng)&&r.push(s)}}O.prototype.bb=function(e,n,r,o,s){var l=this,h=e.C(),p=[],d=Bd(),g=1;if(h)for(;g&og.ANY;){if(g&o)switch(g){case og.MARKER:d=d.then(function(){return am(l,h,r,n,!0)}).then(function(y){return fm(y,e,p)});break;case og.DOM_MARKER:d=d.then(function(){return bm(l,h,r,n,!0)}).then(function(y){return fm(y,e,p)});break;case og.SPATIAL:d=d.then(function(){return $l(l,l.yi,h,r,n,!0)}).then(function(y){y.forEach(cm.bind(null,e,p))});break;case og.OVERLAY:d=d.then(function(){return $l(l,l.rk,h,r,n,!0)}).then(function(y){y.forEach(cm.bind(null,e,p))})}g<<=1}d.then(function(){return s(p)})},O.prototype.Of=function(e,n,r){r=r||me;var o=r.zoom,s=r.visiblesOnly;r=r.types;var l=og.ANY;C(e,M,this.Of,0,"area"),ib(n,"Function",this.Of,1,"callback"),ib(o,"Number",this.Of,2,"options"),this.bb(e,fb(s)?!!s:!0,o,fb(r)?r&l:l,n)},O.prototype.getObjectsWithin=O.prototype.Of,O.prototype.disposeInternal=function(){O.g.disposeInternal.call(this),this.Ag.ia()};function gm(){if(this.constructor=this.constructor,!lb("STATIC_DB"))throw new D(this.constructor,0);if(this.Ju=hm(),!this.Ju)throw new Bb(this.constructor,"This browser does not support IndexedDB");this.JB="STATIC_DB",this.gf=[],this.Yh=[],this.$q=A(this.$q,this)}var im,jm;m=gm.prototype,m.put=function(e,n,r,o){if(!lb(e)&&!ob(e))throw new D(this.put,0);if(!km(n))throw new D(this.put,1);lm(this,function(s){mm(s.put(n,e),r,o)},o)},m.get=function(e,n,r){var o;if(!lb(e)&&!ob(e))throw new D(this.get,0);if(!db(n))throw new D(this.get,1);return lm(this,function(s){o=s.get(e),mm(o,n,r)},r),{cancel:function(){o&&(o.onsuccess=ke)}}},m.remove=function(e,n,r){if(!lb(e)&&!ob(e))throw new D(this.remove,0);lm(this,function(o){mm(o.delete(e),n,r)},r)},m.clear=function(e,n){lm(this,function(r){mm(r.clear(),e,n)},n)},m.yl="data",m.Sx=500,m.$q=function(){var e=this.ng.result;e.objectStoreNames.contains(this.yl)||e.createObjectStore(this.yl)};function nm(e,n,r){if(e.ng)e.gf?(e.gf.push(n),r&&e.Yh.push(r)):e.pn?r&&r(e.pn):n(e.ng.result);else{e.ng=e.Ju.open("H_"+e.JB,1),e.ng.onupgradeneeded=e.$q;var o=e.ng.onerror=function(){clearTimeout(e.Uv),e.pn=this.error,e.Yh.forEach(function(s){s(e.pn)}),delete e.gf,delete e.Yh};e.Uv=setTimeout(function(){o.call({error:Error("DbOpenTimeoutError")})},e.Sx),e.ng.onsuccess=function(){clearTimeout(e.Uv),e.gf?(e.gf.forEach(function(s){s(this.result)},this),delete e.gf,delete e.Yh):(delete e.ng,delete e.pn,e.gf=[],e.Yh=[])},e.gf.push(n),r&&e.Yh.push(r)}}function lm(e,n,r){nm(e,function(o){o=o.transaction([e.yl],"readwrite"),n(o.objectStore(e.yl))},r)}function mm(e,n,r){n&&(e.onsuccess=function(){n(this.result)}),r&&(e.onerror=function(){r(this.error)})}function km(e){var n=Object.prototype.toString.call(e);return n==="[object Blob]"||n==="[object ArrayBuffer]"||lb(e)||ya(e)}function om(){return im||(im=new gm),im}t("H.util.IndexedDBStorage.getInstance",om);function hm(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function pm(){var e="";if(!fb(jm))if(window.location.protocol==="file:"&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jm=!1;else{try{var n=hm();e="H_TEST_DB";var r=n&&n.open(e,1)}catch{}jm=!!r&&r.onupgradeneeded===null,r&&n.deleteDatabase&&n.deleteDatabase(e)}return jm}t("H.util.IndexedDBStorage.isSupported",pm);function qm(){}t("H.util.ICapturable",qm),qm.prototype.capture=function(){},qm.prototype.capture=qm.prototype.capture;function rm(e,n){var r=e.A(),o=r.ownerDocument;rm.g.constructor.call(this),this.u=e,this.G=r=r.appendChild(sm(o,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.Gl=sm(o,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),r.appendChild(this.Gl),r=r.appendChild(sm(o,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.ho=r.appendChild(sm(o,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.ho.target="_blank",this.ho.tabIndex=1,this.Ul=r.appendChild(sm(o,"SPAN","margin:0px 8px")),this.cg=r.appendChild(sm(o,"SPAN")),this.bv=Ta(tm),this.Ur(n),this.Ei=A(this.Ei,this),this.fe=A(this.fe,this),this.u.addEventListener(this.u.j.Os,this.Ei),this.u.O.addEventListener("add",this.fe),this.u.O.addEventListener("remove",this.fe),this.u.O.addEventListener("set",this.fe),this.fe()}var um;u(rm,Fc),t("H.map.Imprint",rm);var tm={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US",mark:""};rm.prototype.Ur=function(e){var n,r=this.Gl.firstElementChild.firstElementChild.children;e||(this.bv=Ta(tm));var o=this.bv;for(n in o)e&&n in e&&(o[n]=e[n]);e=(this.oq=e=o.invert)?vm:wm,r[0].style.fill=e.ax,r[0].style.fillOpacity=""+e.bx,r[1].style.fill=e.ox,r[1].style.fillOpacity=""+e.px,e=o.locale,xm[e]||(e="en-US",o.locale=e),this.ho.innerHTML=xm[e],e=e.split("-"),this.ho.href=o.href.replace("{LN}",e[0]).replace("{CN}",e[1].toLowerCase()),o.mark?(this.cg.innerHTML=o.mark,this.cg.style.margin="0px 8px"):(this.cg.innerHTML="",this.cg.style.margin="0px"),this.G.style.font=o.font},rm.prototype.setOptions=rm.prototype.Ur;function sm(e,n,r,o,s){return e=e.createElement(n),r&&(e.style.cssText=r),o&&(e.innerHTML=o),s&&(e.className=s),e}rm.prototype.A=function(){return this.G},rm.prototype.Ei=function(){this.Ul.innerHTML=this.Gs+" "+this.U()},rm.prototype.fe=function(){this.Ei(),setTimeout(this.Ei,5e3)};var wm={ox:"#0F1621",px:.3,ax:"#fff",bx:.6},vm={ox:"#fff",px:1,ax:"#0F1621",bx:.7},ym="1987&ndash;"+Eb(2015,new Date().getFullYear())+" HERE";rm.prototype.U=function(){var e=this.u,n=e.Ub(),r=e.wa.Ib().bounds;e=e.O;var o=e.aa.length,s={},l=0,h,p,d,g=[ym];if(r){for(;l<o;l++)if(p=e.get(l).getCopyrights(r.C(),n))for(h=0;h<p.length;h++)s[d=p[h].label]||(g.push(d),s[d]=1)}return g.join(", ")},rm.prototype.getCopyrights=rm.prototype.U,rm.prototype.J=function(){return this.G.style},rm.prototype.Gs="\xA9",rm.prototype.disposeInternal=function(){if(this.u.removeEventListener(this.u.j.Os,this.Ei),this.u.O.removeEventListener("add",this.fe),this.u.O.removeEventListener("remove",this.fe),this.u.O.removeEventListener("set",this.fe),this.G.parentNode){var e=this.G;e.parentNode.removeChild(e)}},rm.prototype.disposeInternal=rm.prototype.disposeInternal,rm.prototype.capture=function(e,n,r,o){var s=e.getContext("2d"),l=window.getComputedStyle(this.Ul.parentElement),h=2*mb(l.paddingLeft,10),p=(this.Ul.offsetWidth+2*h)*n,d=this.Ul.offsetHeight*n,g=this.cg.innerHTML.length!==0?this.cg.offsetWidth*n:0,y=nb(l.getPropertyValue("font-size")),v=this.G.ownerDocument,_=+e.width,w=+e.height,I=16*n,G=this.Gl.childNodes[0].getBoundingClientRect(),_t=G.width*n,_r=G.height*n,_o=ke;db(o)&&(_o=function(){o("capture_error")}),s.fillStyle=l.backgroundColor,s.fillRect(_-p-g,w-d,p+g,d),p=this.cg.innerHTML,p=this.Gs+" "+function(Ca){return Ca=sm(v,"div",null,Ca),Ca.textContent||Ca.innerText||""}(this.U())+(p?" "+p:""),s.font=y*n+"px "+l.getPropertyValue("font-family"),s.fillStyle=l.getPropertyValue("color"),s.textBaseline="bottom",s.textAlign="right",s.fillText(p,_-h*n,w),zm(this,s.font,function(Ca){new Xg("image",Ca).then(function(_a){s.drawImage(_a,I,w-(_r+I),_t,_r),r(e)},_o)},_o)},rm.prototype.capture=rm.prototype.capture;function zm(e,n,r,o){Am(A(function(s){s?this.oq?r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):(s=this.Gl.cloneNode(!0),s.firstChild.setAttribute("style","font:"+n),r(ee(s.innerHTML)))},e),o)}rm.prototype.oq=!1;function Am(e,n){var r="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),o=um;fb(o)?e(o):new Xg("image",r).then(function(s){ae.drawImage(s,0,0);try{ae.getImageData(0,0,1,1),o=!1}catch(l){o=l.code===18}finally{um=o,e(o)}},n)}rm.prototype.hy=function(e,n){xm[e]=n},rm.prototype.addL11NString=rm.prototype.hy;var xm={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015Bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xE7o","pt-PT":"Termos do servi\xE7o","ru-RU":"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F","tr-TR":"Servis Ko\u015Fullar\u0131","zh-CN":"\u4F7F\u7528\u6761\u6B3E"};function Bm(e,n,r,o,s,l){var h;for(h=[];o<=s;o++){var p=h.concat,d=e,g=r,y=Gb(o);d.pixelProjection.Va(y);var v=d.Cj(g);g=d.Gh(v,y),y=mj(d,g,v.left>v.right,y),h=p.call(h,y)}for(e=h.length,Bl.call(this,l,e),this.jx=r=[],this.Zq=A(this.Zq,this),this.Yq=A(this.Yq,this),this.F(1);e--;)l=h[e],r.push(gj(n,l[0],l[1],l[2],this.Zq,this.Yq))}u(Bm,Bl),Bm.prototype.Zq=function(){Dl(this,2)},Bm.prototype.Yq=function(){Dl(this,4)},Bm.prototype.Xi=function(){for(var e=this.jx,n=e.length;n--;)e[n].cancel();delete this.jx};function U(e,n,r){var o={};if(!(e instanceof HTMLElement))throw new D(U,0);if(U.g.constructor.call(this),this.Ea=Cm(r,U),this.wa=r=new gh,this.Fq=!1,r.addEventListener(r.j.Pi,this.Qv,!1,this),!C(e,Element))throw new D(U,0,e);r=this.G=e.ownerDocument.createElement("div");var s=r.style;if(s.position="relative",s.height=r.style.width="100%",s.overflow="hidden",s.webkitTapHighlightColor="transparent",s.webkitTapHighlightColor!=="transparent"&&(s.webkitTapHighlightColor="rgba(0,0,0,0)"),e.appendChild(r),this.ra=new uh(this.G,this.Ea),this.ra.addEventListener(this.ra.j.Pi,this.Qv,!1,this),e=this.O=new Ai(this.Ea.layers),e.addEventListener(e.j.Oi,this.Rq,!1,this),e.addEventListener(e.j.Li,this.Rq,!1,this),e.addEventListener(e.j.Ni,this.Rq,!1,this),!this.qb&&Dm(this),this.oa=null,this.O.add(n,0),this.Ba=this.Yo(this.Ea.engineType!=null?this.Ea.engineType:vi,this.Ea),this.jp=A(this.jp,this),n=this.Ea.imprint,n!==B&&typeof n!="object")throw new D(U,1,"imprint");Em&&(n||(n={}),n.mark=n.mark||"GS (2022) 5659"),this.Xd=n===null?n:new rm(this,n),n=this.Ea.autoColor,this.ht=n===B||!!n,Fm(this),(n=this.Ea.zoom)&&(o.zoom=n),(n=this.Ea.bounds)&&(o.bounds=n),(n=this.Ea.center)&&(o.position=n),this.wa.Zc(o)}u(U,F),t("H.Map",U),U.prototype.draggable=U.prototype.draggable=!1;function Cm(e,n){if(e){var r=e.pixelRatio;if(r===B)e.pixelRatio=Xd();else if(!(0<r))throw new D(n,0,"pixelRatio: "+r)}else e={},e.pixelRatio=Xd();return e.renderBaseBackground||(e.renderBaseBackground={lower:3,higher:2}),e}U.prototype.by=333,U.prototype.disposeInternal=function(){this.ht=!1,this.Xd&&this.Xd.l(),this.Ba.dispose(),this.wa.l(),this.ra.l(),this.qb.l(),this.rc.l(),this.O.l();var e=this.G;e.parentNode.removeChild(e),delete this.G,F.prototype.disposeInternal.call(this)},U.prototype.A=function(){return this.G},U.prototype.getElement=U.prototype.A,U.prototype.lb=function(){return this.Ea.pixelRatio},U.prototype.getPixelRatio=U.prototype.lb;function Fm(e){e.Xd&&e.ht&&e.Xd.Ur({invert:e.oa&&e.oa.Ly})}U.prototype.Rq=function(e){var n=e.added,r=e.removed;n&&n.D&&n.D.ea(this),r&&r.D&&r.D.ea(null),r===this.qb&&(delete this.qb,delete this.rc),r===this.oa&&(this.oa=null),e.idx===0&&(this.dispatchEvent(new dh(this.j.xl,this.oa=e.type!==this.O.j.Ni?n:0<this.O.aa.length?this.O.get(0):z,e.type!==this.O.j.Li?r:1<this.O.aa.length?this.O.get(1):z)),Fm(this))},U.prototype.Qv=function(e){e.modifiers&&(this.Fq||(Gm(this,"start"),this.Fq=!0),Gm(this,"",e),this.sv&&x.clearTimeout(this.sv),this.sv=x.setTimeout(this.jp,this.by))};function Gm(e,n,r){e.dispatchEvent(r?new eh(e.j.Ns,r.newValue,r.oldValue,r.modifiers):e.j.Ns+n)}U.prototype.jp=function(){Gm(this,"end"),this.Fq=!1},U.prototype.Zn=function(e,n){return this.Ba.getCapabilities().lookAt&&this.wa.Zc({position:e},!!n),this},U.prototype.setCenter=U.prototype.Zn,U.prototype.wb=function(){var e=this.wa.Ib();return e?e.position:z},U.prototype.getCenter=U.prototype.wb,U.prototype.Vk=function(e,n){return this.wa.Vk(e,!!n),this},U.prototype.setZoom=U.prototype.Vk,U.prototype.Ub=function(){return this.wa.Ub()},U.prototype.getZoom=U.prototype.Ub,U.prototype.Ng=function(e,n,r){this.Ba.zoomAt(e,n,r)},U.prototype.zoomAt=U.prototype.Ng,U.prototype.NA=function(){return this.ra},U.prototype.getViewPort=U.prototype.NA,U.prototype.MA=function(){return this.wa},U.prototype.getViewModel=U.prototype.MA,U.prototype.aA=function(){return this.O},U.prototype.getLayers=U.prototype.aA,U.prototype.Vz=function(){return this.Xd},U.prototype.getImprint=U.prototype.Vz,U.prototype.capture=function(e,n,r,o,s,l){function h(_o,Ca){_?_o.cancel():(G.save(),Ca.capture(I,y,function(_a){G.restore(),_o.done(_a)},function(_a){_o.done(null,_a),p(null)}))}function p(_o){_||(_=!0,e(_o))}var d=this.Ba,g=d.getCapabilities(),y=this.Ea.pixelRatio,v=this.ra,_=!1,w=this,I,G;if(!db(e))throw new D(this.capture,0,e);r=r||0,o=o||0,s=s||v.width,l=l||v.height;var _t=Eb(0,Db(r,s)),_r=Eb(0,Db(o,l));r=Db(v.width,Eb(r,s)),o=Db(v.height,Eb(o,l)),g.capture?d.capture(_t,_r,r,o).then(function(_o){var Ca=w.Xd,_a=n||[];I=_o,G=I.getContext("2d"),I.style.width=I.width/y+"px",I.style.height=I.height/y+"px";var _l=new fk(10,h);_a=_a.concat(Ca).filter(function(Qa){return db(Qa&&Qa.capture)}),_a.length?(_o=_a.pop(),_a.forEach(function(Qa){_l.push(Qa,ke)}),_l.push(_o,A(p,w,I)),_l.An()):p(I)},function(){p(z)}):e(null)},U.prototype.capture=U.prototype.capture,U.prototype.Hz=function(){return this.Ba},U.prototype.getEngine=U.prototype.Hz,U.prototype.Yo=function(e,n){if(n=n?Cm(n,this.Yo):this.Ea,Fm(this),e===wi.P2D)return new x.H.map.render.p2d.RenderEngine(this.ra,this.wa,this.O,n);if(e===wi.WEBGL)return new S(this.ra,this.wa,this.O,n);if(e===wi.HARP)return new x.H.map.render.harp.RenderEngine(this.ra,this.wa,this.O,n);throw new D(this.Yo,0,e)},U.prototype.al=function(e,n,r,o,s){if(n=fb(n)?C(n,J,this.al,1,n)&&n:this.wa.Ib().bounds.C(),s=s||this.oa,!C(s,lj))throw new D(this.al,4);var l=s.D,h=this.lb(),p=s.tileSize;if(2<=h&&256<p&&l instanceof jj&&(p/=2),h=this.Ub(),p=Math.log2(p)-8,r=fb(r)?+r:h,o=fb(o)?+o:h,!(r<=o))throw new D(this.al,B,"!(min <= max)");h=l.min;var d=l.max,g=this.Ba.type===wi.WEBGL?Gb:Fb;if(r=fc(g(r)-p,h,d),o=fc(g(o)-p,h,d),!(l&&C(l,R)&&pm()&&l.Wi()))throw new Bb(this.al,"Storing is not supported");return new Bm(s,l,n,r,o,e)},U.prototype.storeContent=U.prototype.al;function Hm(e){Bl.call(this,e)}u(Hm,Bl),Hm.prototype.iC=function(){Dl(this,2)},Hm.prototype.hC=function(){Dl(this,4)},U.prototype.zy=function(e){return e=new Hm(e),om().clear(A(e.iC,e),A(e.hC,e)),e},U.prototype.clearContent=U.prototype.zy,U.prototype.Bl=function(e,n){var r=this.O,o=r.indexOf(e),s=n!==+n;return n=s?r.aa.length-1:n,0>o?r.add(e,n):o-n&&(r.Dd(o),r.add(e,s?n-1:n)),this},U.prototype.addLayer=U.prototype.Bl,U.prototype.ii=function(e){var n=this.O.indexOf(e);return e!==this.oa&&e!==this.qb&&n!==-1&&this.O.Dd(n),this},U.prototype.removeLayer=U.prototype.ii,U.prototype.Cg=function(e){return this.oa!==e&&(this.O.aa.length&&this.O.get(0)!==this.qb?this.O.set(0,e):this.O.add(e,0),this.oa=e),this},U.prototype.setBaseLayer=U.prototype.Cg,U.prototype.sz=function(){return this.oa},U.prototype.getBaseLayer=U.prototype.sz,U.prototype.Ka=function(e){if(!Ae(e))throw new D(this.Ka,0,e);return(e=this.Ba.geoToScreen(e))?sf(e):z},U.prototype.geoToScreen=U.prototype.Ka,U.prototype.Wa=function(e,n){var r;if(r=+E(e)||2*+E(n))throw new D(this.Wa,r-1,arguments[r-1]);return(r=this.Ba.screenToGeo(e,n))?Be(r):z},U.prototype.screenToGeo=U.prototype.Wa,U.prototype.Un=function(e,n){return this.Ba.screenToLookAtData(e,n)},U.prototype.screenToLookAtData=U.prototype.Un,U.prototype.Y=function(e){if(!C(e,N))throw new D(this.Y,0,e);return!this.qb&&Dm(this),this.rc.rd().Y(e),e},U.prototype.addObject=U.prototype.Y,U.prototype.Na=function(e){if(!C(e,N))throw new D(this.Na,0,e);return!this.qb&&Dm(this),this.rc.rd().Na(e),e},U.prototype.removeObject=U.prototype.Na,U.prototype.bb=function(e){return!this.qb&&Dm(this),this.rc.rd().bb(e)},U.prototype.getObjects=U.prototype.bb,U.prototype.hd=function(e){var n;kb(e,this.hd,0,e),!this.qb&&Dm(this);var r=e.length;for(n=0;n<r;n++)this.Y(e[n]);return this},U.prototype.addObjects=U.prototype.hd,U.prototype.ug=function(e){var n;kb(e,this.ug,0,e),!this.qb&&Dm(this);var r=e.length;for(n=0;n<r;n++)this.Na(e[n]);return this},U.prototype.removeObjects=U.prototype.ug,U.prototype.Ch=function(e,n,r){var o;if(o=+E(e)||2*+E(n))throw new D(this.Ch,o-1,arguments[o-1]);this.Ba.getObjectsAt(e,n,!0,function(s){r(s[0])})},U.prototype.getObjectAt=U.prototype.Ch,U.prototype.La=function(e,n,r,o){var s;if(s=+E(e)||2*+E(n))throw new D(this.Ch,s-1,arguments[s-1]);this.Ba.getObjectsAt(e,n,!1,r,!!o)},U.prototype.getObjectsAt=U.prototype.La,U.prototype.Of=function(e,n,r){r=r||{};var o=r.zoom;r.zoom=fb(o)?o:this.wa.Ub(),this.rc.Of(e,n,r)},U.prototype.getObjectsWithin=U.prototype.Of;function Dm(e){e.rc=new O({max:24,engineType:e.Ea.engineType}),e.qb=new zk(e.rc,e.Ea),e.O.add(e.qb)}var Im=Oi.HARP,wi={P2D:Oi.P2D,WEBGL:Oi.WEBGL,HARP:Im};U.EngineType=wi,U.prototype.j={ND:"mapviewchangestart",Ns:"mapviewchange",Os:"mapviewchangeend",xl:"baselayerchange"};function Jm(e,n,r,o){if(!e||!n||!r)throw new D(Jm,B,"Must specify name, version and revision parameter");this.name=e,this.version=n,this.revision=r,o&&Wa(this,o)}t("H.util.BuildInfo",Jm),Jm.prototype.toString=function(){var e,n=[];for(e in this)lb(this[e])&&n.push(this[e]);return n.join(";")};var Km={};function Lm(e,n,r,o){if(!e)throw new D(Lm,1,"Must specify a name parameter");return Km[e]||(Km[e]=new Jm(e,n,r,o))}Jm.get=Lm;function Mm(e,n){Mm.g.constructor.call(this,e,n)}u(Mm,hl),t("H.map.Marker",Mm),Mm.prototype.type=og.MARKER,Mm.prototype.ro=1,Mm.prototype.qa=function(e){if(e!==hg.VISUAL||this.lw===1||this.icon.getState()===1)var n=Mm.g.qa.call(this,e);return n||!1},Mm.prototype.invalidate=Mm.prototype.qa,m=Mm.prototype,m.lw=0,m.Xu=function(e){return C(e,Ll)},m.qq=!1,m.Mv=function(){this.qa(hg.VISUAL)},m.ve=function(e){var n=this.icon;return this.qq&&(n.removeEventListener("statechange",this.Mv,!1,this),delete this.qq),n&&(this.lw=n.getState()),Mm.g.ve.call(this,e),e.getState()===0&&(this.qq=!0,Qc(e,"statechange",this.Mv,!1,this)),this},Mm.prototype.setIcon=Mm.prototype.ve,Mm.prototype.tt=function(e){return new Ll(e.svg,e)},Mm.prototype.P=function(){var e=this.getIcon(),n=e.jD||0,r=Mm.g.forWorkerMessage.call(this),o=r.properties.icon;return o&&0<n&&Wa(o,{stick_color:e.iD,stick_height:n}),r},Mm.prototype.forWorkerMessage=Mm.prototype.P;function Nm(e,n,r){Nm.g.constructor.call(this,Pl,r),this.Zn(e),this.Yr(n),r&&this.jw in r&&this.Xr(r[this.jw])}u(Nm,Ol),t("H.map.Circle",Nm),Nm.prototype.Zn=function(e){(e=Be(e)).da(this.Df)||(this.Df=e,Om(this))},Nm.prototype.setCenter=Nm.prototype.Zn,Nm.prototype.wb=function(){return this.Df},Nm.prototype.getCenter=Nm.prototype.wb,Nm.prototype.Yr=function(e){if(E(e=fc(e,0,637100079e-2*Ub/2)))throw new D(this.Yr,0,e);this.wr!==e&&(this.wr=e,Om(this))},Nm.prototype.setRadius=Nm.prototype.Yr,Nm.prototype.vA=function(){return this.wr},Nm.prototype.getRadius=Nm.prototype.vA,Nm.prototype.zn=60,Nm.prototype.Xr=function(e){if(!ob(e))throw new D(this.Xr,0,e);this.zn!==(e=fc(Fb(e),4,360))&&(this.zn=e,Om(this))},Nm.prototype.setPrecision=Nm.prototype.Xr,Nm.prototype.jw="precision",Nm.prototype.sA=function(){return this.zn},Nm.prototype.getPrecision=Nm.prototype.sA,Nm.prototype.X=function(){return this},Nm.prototype.setGeometry=Nm.prototype.X,Nm.prototype.V=function(){return this.Hb===Pl&&Nm.g.X.call(this,Pm(this)),this.Hb},Nm.prototype.getGeometry=Nm.prototype.V;function Om(e){e.Hb!==z&&Nm.g.X.call(e,Pm(e))}function Pm(e){var n=e.Df,r=n.lat,o=e.wr,s=0,l=new K;if(Ib(r)===90)for(r=n.mo(0,o,!0).lat;360>s;s+=120)l.tr(r,s-180,B);else for(e=e.zn,e=360/e;360>s;s+=e)l.sg(n.mo(s,o,!0));return n=new M(l),0>r&&n.Vw(Gf.SOUTH),n}function Qm(){Qm.g.constructor.call(this),this.fd=Rm(this),this.Cn=Za(),this.nn=A(this.nn,this),this.fd.addEventListener("message",this.nn),this.el={}}u(Qm,F),Qm.prototype.disposeInternal=function(){this.fd.terminate()},Qm.prototype.pw=function(e){var n=e.type,r=!!this.Cn[n],o=e.data,s=Sm++,l=o&&o.zD?o.zD:B,h=!0;return r?(this.el[s]=e,Tm(this,n,s,o&&o.message,l)):(e.reject(new D(this.pw,0,"processor_not_found")),h=!1),h},Qm.prototype.nn=function(e){e=e.data;var n=this.el[e.taskId],r=e.taskId,o=e.data,s=this;if(e.type===2)new Xg("arraybuffer",o).then(function(l){return l.arrayBuffer()}).then(function(l){s.fd.postMessage(["3",r,[l]],[l])},function(){s.fd.postMessage(["3",r,[null,"ERROR"]])});else{if(n){switch(e.type){case 1:n.resolve(o);break;case 0:n.reject(o)}delete this.el[r]}this.dispatchEvent(new Ic(this.j.IDLE))}};var Sm=0;function Um(e,n,r){var o=Sm++,s;return e.el[o]=s=Dd(),Tm(e,n,o,r),s.promise}function Tm(e,n,r,o,s){o===B||Ba(o)||(o=[o]);try{e.fd.postMessage([n,r,o],s)}catch(l){e=e.el[r],e.reject(l.message)}}Qm.prototype.j={IDLE:"idle",Js:"error"},Qm.prototype.iy=function(e,n){var r=this.$y||(this.$y=new Ic(this.j.Js));r.data=n,delete this.Cn[e],this.dispatchEvent(r)},Qm.prototype.importScripts=function(e){Um(this,"0",e)};function Rm(a){var b=x.H.__bootstrap__;if(b=db(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(se(b,"application/javascript")))}catch{}return c||(a=new Vm(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Wm(a)),c}function Wm(e){F.call(this),this.fd=e}u(Wm,F),Wm.prototype.postMessage=function(e){x.setTimeout(A(this.rC,this,e),0)},Wm.prototype.rC=function(e){var n=new Ic("message");n.data=e,this.fd.dispatchEvent(n)},Wm.prototype.terminate=function(){this.fd.l(),this.l()};function Vm(e){F.call(this),this.fd=e,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}u(Vm,F),Vm.prototype.postMessage=function(e){var n=new Ic("message");n.data=e,x.setTimeout(A(this.fd.nn,this.fd,n),0)};function Xm(){var e=Ym;return e||(e=Ym=this,F.call(e),this.zg()),e}var Ym;u(Xm,F),m=Xm.prototype,m.disposeInternal=function(){Xm.g.disposeInternal.call(this),this.zg()},m.zg=function(){var e=this.oo,n;if(e)for(n=e.length;n--;)e[n].l();this.oo=[],rb(this.oo),this.Dm={},this.rw=Za()},m.Eo=function(e){var n;if(e=e.type,n=this.rw[e]){var r=this.oo,o=r[0];o||(o=r[0]=new Qm,this.bc(Ja(Ec,o)),Sa(this.Dm)||o.importScripts(x.Object.keys(this.Dm))),r=o,r.Cn[e]||(r.Cn[e]=n,Um(r,"1",[e,db(n)?n+"":n]).then(ke,A(r.iy,r,e)))}else throw new Bb(this.Eo,'Unknown type "'+e+'"');return o},m.$l=function(){},m.registerProcessor=function(e,n){var r=this.rw,o=r[e];if(o){if(n!==o)throw new Bb(this.registerProcessor,'Type "'+e+'" is already registered')}else r[e]=n},m.importScripts=function(e){[].concat(e).forEach(function(n){this.Dm[n]||(this.Dm[n]=!0,this.oo.forEach(function(r){r.importScripts(n)}))},this)};function Zm(e,n,r){Qd.call(this,e,n,r)}var $m;u(Zm,Qd),Zm.prototype.Fp=function(){return $m||($m=new Td(new Xm)),$m},Zm.prototype.Xi=function(){},Zm.prototype.Rt=function(e){return e.pw(this)};function an(e,n){an.g.constructor.call(this,Pl,n),this.ti(e)}u(an,Ol),t("H.map.Rect",an),an.prototype.ti=function(e){if(!C(e,J))throw new D(this.ti,0,e);e.da(this.Ti)||(this.Ti=this.I=e,this.Hb!==z&&an.g.X.call(this,Ff(e)))},an.prototype.setBoundingBox=an.prototype.ti,an.prototype.C=function(){return this.I},an.prototype.getBoundingBox=an.prototype.C,an.prototype.X=function(){return this},an.prototype.setGeometry=an.prototype.X,an.prototype.V=function(){return this.Hb===Pl&&an.g.X.call(this,Ff(this.Ti)),this.Hb},an.prototype.getGeometry=an.prototype.V;function bn(e,n){bn.g.constructor.call(this,e,n)}u(bn,lj),t("H.map.layer.MarkerTileLayer",bn);var cn={markers:[],total:0,requested:0};function dn(e,n,r,o,s){var l=Gb(r);e.pixelProjection.Va(l),n=e.Gh(e.Cj(n),l),r=e.Oj(n,n.left>n.right,~~r,o,s),e=r.tiles,r=r.total,o=e.length,s=[];var h;for(h=0;h<o;h++)for(n=e[h],l=n.data.length;l--;)s.push(n.data[l]);return{markers:s,total:e.length,requested:r}}bn.prototype.pe=function(e,n,r,o){return this.D.providesDomMarkers()?cn:dn(this,e,n,r,o)},bn.prototype.requestMarkers=bn.prototype.pe,bn.prototype.oe=function(e,n,r,o){return this.D.providesDomMarkers()?dn(this,e,n,r,o):cn},bn.prototype.requestDomMarkers=bn.prototype.oe,t("H.map.Style",gi),gi.State=di;function en(){return Lm("H-core","1.56.0","2eb8e90",{region:"row"})}t("H.buildInfo",en);var Em=en().region==="cn",vi=wi[Em?"HARP":"WEBGL"],fn,gn="maps".concat("js-"),hn,jn,kn,ln,mn;if(hn=x.document.querySelector('script[src*="'+gn+'"]'),!hn){for(jn=x.document.getElementsByTagName("script"),ln=new RegExp("^.*"+gn),mn=0,kn=jn.length;mn<kn;mn++)if(ln.test(jn[mn].src)){hn=jn[mn];break}}fn=hn?hn.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",function(){return fn});function nn(){var e=decodeURIComponent(fn);if(e){e=e[e.length-1]==="/"?e.substring(0,e.length-1):e;var n=x.document,r="";n?(n=n.createElement("a"),n.href=e,r=n.href):/[\w]+:\/\//.test(e)&&(r=e),e=new URL(r),e.pathname+=e.pathname[e.pathname.length-1]==="/"?"styles":"/styles",e=e.toString()}else e="https://js.api.here.com/v3/3.1.56.0/styles";return e}t("H.getStylePath",nn);function on(e){var n=e.ownerDocument;n=n.documentElement||n.body.parentNode||n.body;try{var r=e.getBoundingClientRect()}catch{r={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:r.left+(typeof window.pageXOffset=="number"?window.pageXOffset:n.scrollLeft),y:r.top+(typeof window.pageYOffset=="number"?window.pageYOffset:n.scrollTop)}}var pn=(function(){return this}).apply(null);function qn(e,n,r,o,s,l){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(n))throw Error("y needs to be a number");if(isNaN(r))throw Error("pointer must have an id");this.viewportX=e,this.viewportY=n,this.target=null,this.id=r,this.type=o,this.dragTarget=null,this.button=fb(s)?s:-1,this.buttons=fb(l)?l:0,this.Pm=this.button}t("H.mapevents.Pointer",qn);function rn(e,n,r){if(isNaN(n))throw Error("x needs to be a number");if(isNaN(r))throw Error("y needs to be a number");e.viewportX=n,e.viewportY=r}qn.prototype.Yz=function(){return this.Pm},qn.prototype.getLastChangedButton=qn.prototype.Yz;function sn(e,n){e.Pm=n,e.buttons|=tn[+n]||0}function un(e,n){e.Pm=n,e.buttons&=~(tn[+n]||0)}var tn=[1,4,2],vn={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};qn.Button=vn;function wn(e){this.Da=e instanceof Array?e.slice(0):[]}m=wn.prototype,m.clear=function(){this.Da.splice(0,this.Da.length)},m.length=function(){return this.Da.length},m.item=function(e){return this.Da[e]||null},m.indexOf=function(e){for(var n=this.Da.length;n--;)if(this.Da[n].id===e)return n;return-1};function xn(e,n){return n=e.indexOf(n),n!==-1?e.Da[n]:null}m.remove=function(e){return e=this.indexOf(e),e!==-1?this.Da.splice(e,1)[0]:null};function yn(e,n){for(var r=e.Da.length,o=[];r--;)e.Da[r].type!==n&&o.push(e.Da[r]);e.Da=o}function zn(e,n){for(var r=e.Da.length;r--;)if(e.Da[r].dragTarget===n)return!0;return!1}m.push=function(e){if(e instanceof qn)return this.Da.push(e);throw Error("list needs a pointer")},m.Sa=function(){return this.Da},m.clone=function(){return new wn(this.Da)};function An(e,n,r,o,s,l,h){An.g.constructor.call(this,e),this.pointers=n,this.changedPointers=r,this.targetPointers=o,this.currentPointer=s,this.originalEvent=h,this.target=l}u(An,Ic),t("H.mapevents.Event",An);function Bn(e,n,r){if(r=r||{},!(e instanceof U))throw Error("events: map instance required");if(!(n instanceof Array))throw Error("events: map array required");Fc.call(this),this.fp=r.fp||300,this.zt=r.zt||50,this.mx=r.mx||50,this.nx=r.nx||500,this.Dq=r.Dq||900,this.Cq=r.Cq||8,this.map=e,this.ya=this.map.ra,this.element=this.ya.element,this.np=n,this.pointers=new wn,this.changedPointers=new wn,this.Zf={},this.Ja=null,this.em=!0,this.Nk={},this.rf={},this.bk=null,this.nj=A(this.nj,this),this.Qt={pointerdown:this.Ty,pointermove:this.Uy,pointerup:this.Vy,pointercancel:this.Sy},Cn(this)}u(Bn,Fc);function Cn(e,n){var r,o=e.np.length;for(r=0;r<o;r++){var s=e.np[r],l=s.listener;typeof l=="function"&&(n?(s.target||e.element).removeEventListener(s.$a,l):(s.target||e.element).addEventListener(s.$a,l))}}function Dn(e,n,r){var o;if(typeof e.Qt[n]=="function"){n!=="pointermove"&&(e.em=!0);var s=0;for(o=e.changedPointers.length();s<o;s++){var l=e.changedPointers.item(s);e.element.contains(r.composedPath()[0])?En(e,l,e.It.bind(e,r,n,l)):e.It(r,n,l,null)}}e.changedPointers.clear()}m=Bn.prototype,m.It=function(e,n,r,o){Fn(r.id,this.Nk),this.Qt[n].call(this,r,o,e)};function En(e,n,r){if(e.Ja===n)r(n.target);else{var o=e.ya,s=n.viewportX;if(n=n.viewportY,0>s||0>n||s>=o.width||n>=o.height)r(z);else{var l=e.map;l.Ch(s,n,function(h){r(h||l)})}}}m.Vy=function(e,n,r){var o=e.id;e.target=n,Gn(this,e,r),Hn(this,n,"pointerup",r,e),e.type!=="mouse"&&Hn(this,n,"pointerleave",r,e),n=this.Zf[e.id];var s={x:e.viewportX,y:e.viewportY},l=r.timeStamp,h=e.target,p=this.bk;n&&n.target===h&&n.vk.kb(s)<this.mx&&l-n.ps<this.nx?(Hn(this,h,"tap",r,e),p&&p.target===h&&l-p.ps<this.fp?p.vk.kb({x:e.viewportX,y:e.viewportY})<this.zt&&(Hn(this,h,"dbltap",r,e),this.bk=null):this.bk={target:h,vk:new L(e.viewportX,e.viewportY),ps:r.timeStamp}):this.bk=null,this.Zf={},Fn(o,this.rf)};function Gn(e,n,r){n===e.Ja&&(Hn(e,n.dragTarget,"dragend",r,n),e.Ja=null,Fn(n.id,e.Nk)),n.dragTarget=null}m.nj=function(e,n){var r=this;Hn(this,e.dragTarget,"drag",n,e),Fn(e.id,this.Nk),this.Nk[e.id]=setTimeout(function(){r.nj(e,n)},150)};function Fn(e,n){n[e]&&(n[e].timeout?clearTimeout(n[e].timeout):clearTimeout(n[e]),delete n[e])}function In(e,n,r){var o=n.target,s=new L(n.viewportX,n.viewportY),l=n.id;Fn(l,e.rf);var h=setTimeout(function(){o&&o===n.target&&s.kb({x:n.viewportX,y:n.viewportY})<e.Cq&&(Hn(e,o,"longpress",r,n),delete e.Zf[n.id])},e.Dq);e.rf[l]={timeout:h,vk:s}}m.Uy=function(e,n,r){var o=e.dragTarget,s=e.id,l=e.target;e.target=n,l!==n&&(Hn(this,l,"pointerleave",r,e),Hn(this,n,"pointerenter",r,e)),o?this.Ja?(this.nj(e,r),this.rf[s]&&this.rf[s].vk.kb({x:e.viewportX,y:e.viewportY})>this.Cq&&Fn(s,this.rf)):this.em?this.em=!1:(this.Ja=e,Hn(this,o,"dragstart",r,e),this.nj(e,r),delete this.Zf[s],this.em=!0):(!this.Ja||this.Ja&&this.Ja.dragTarget!==n&&this.Ja.dragTarget!==this.map)&&Hn(this,n,"pointermove",r,e)},m.Ty=function(e,n,r){var o=!(/^(?:mouse|pen)$/.test(e.type)&&r.button!==0);if(n){e.target=n,this.Zf[e.id]={vk:new L(e.viewportX,e.viewportY),target:e.target,ps:r.timeStamp},e.type!=="mouse"&&Hn(this,n,"pointerenter",r,e);var s=Hn(this,n,"pointerdown",r,e);!this.Ja&&o&&(n.draggable&&!zn(this.pointers,n)?e.dragTarget=n:!this.map.draggable||s.defaultPrevented||zn(this.pointers,this.map)||(e.dragTarget=this.map)),In(this,e,r)}},m.Sy=function(e,n,r){var o=e.id;e.target=null,n?(Hn(this,n,"pointerleave",r,e),Hn(this,n,"pointercancel",r,e)):Hn(this,this.map,"pointercancel",r,e),Gn(this,e,r),this.Zf={},Fn(o,this.rf)};function Hn(e,n,r,o,s){if(n&&typeof n.dispatchEvent=="function"){var l=An,h=e.pointers.Sa(),p=e.changedPointers.Sa();e=e.pointers;var d,g=e.Da.length,y=[];for(d=0;d<g;d++)e.Da[d].target===n&&y.push(e.Da[d]);l=new l(r,h,p,y,s,n,o),s.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(r)?s.Pm:vn.NONE,n.dispatchEvent(l)}return l}m.disposeInternal=function(){Cn(this,!0),this.pointers.clear(),this.changedPointers.clear();var e=this.Nk,n;for(n in e)Fn(n,e);e=this.rf;for(var r in e)Fn(r,e);delete this.element,delete this.np,delete this.pointers,delete this.changedPointers,delete this.map,this.bk=null,delete this.Zf,this.Ja=null,Fc.prototype.disposeInternal.call(this)};function Jn(e){this.Hh=A(this.Hh,this),Bn.call(this,e,[{$a:"touchstart",listener:this.Hh},{$a:"touchmove",listener:this.Hh},{$a:"touchend",listener:this.Hh},{$a:"touchcancel",listener:this.Hh}]),this.Ax={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.Iu=(e=(e=e.Xd)?e.A():null)?Array.prototype.slice.call(e.querySelectorAll("a"),0):[]}u(Jn,Bn),Jn.prototype.Hh=function(e){var n=e.touches,r=this.pointers.length(),o;if(e.type==="touchstart"&&r>=n.length){for(r=this.pointers.clone(),o=n.length;o--;)r.remove(n[o].identifier);for(o=r.length();o--;)this.pointers.remove(r.item(o).id);this.changedPointers=r,Dn(this,"pointercancel",e),this.changedPointers.clear()}if(this.Ax[e.type]){n=on(this.ya.element),r=e.type,o=e.changedTouches;var s=o.length,l;for(this.changedPointers.clear(),l=0;l<s;l++){var h=o[l],p=xn(this.pointers,h.identifier),d=h.pageX-n.x,g=h.pageY-n.y;if(p)if(r==="touchmove"){h=Math.abs(p.viewportX-d);var y=Math.abs(p.viewportY-g);(1<h||1<y||h===1&&y===1)&&(rn(p,d,g),this.changedPointers.push(p))}else r==="touchend"&&(this.pointers.remove(p.id),this.changedPointers.push(p),un(p,vn.LEFT));else p=new qn(d,g,h.identifier,"touch",vn.LEFT,1),this.pointers.push(p),this.changedPointers.push(p)}Dn(this,this.Ax[e.type],e),this.Iu.indexOf(e.target)===-1&&e.preventDefault()}},Jn.prototype.disposeInternal=function(){this.Iu=null,Bn.prototype.disposeInternal.call(this)};function Kn(e){var n=Ln(this);(window.PointerEvent||window.MSPointerEvent)&&n.push({$a:"MSHoldVisual",listener:"prevent"}),Bn.call(this,e,n)}u(Kn,Bn);function Ln(e){var n=!!window.PointerEvent,r,o,s=[];return e.$p=A(e.$p,e),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(l){r=l.toLowerCase().replace(/ms/g,""),o=n?r:l,s.push({$a:o,listener:e.$p,target:/^pointer(up|move)$/.test(r)?window:null})}),s}var Mn={2:"touch",3:"pen",4:"mouse"};Kn.prototype.$o=function(e,n){var r=e.pointerType;return typeof r=="number"&&(r=Mn[r]),e=new qn(n.x,n.y,e.pointerId,r,e.button,e.buttons),this.pointers.push(e),e},Kn.prototype.$p=function(e){var n=window.PointerEvent?e.type:e.type.toLowerCase().replace(/ms/g,""),r=on(this.element),o=xn(this.pointers,e.pointerId),s=e.pageX-r.x;r=e.pageY-r.y;var l=Mn[e.pointerType]||e.pointerType;Ma&&x.getComputedStyle(this.ya.element).direction==="rtl"&&(s-=(x.devicePixelRatio-1)*this.ya.width),o||/^pointer(up|out|cancel)$/.test(n)||l==="touch"&&n!=="pointerdown"||(o=this.$o(e,{x:s,y:r})),o&&(/^pointer(up|cancel)$/.test(n)?(l==="touch"&&this.pointers.remove(o.id),un(o,e.button)):n==="pointerdown"&&(e.pointerType==="touch"&&(yn(this.pointers,"mouse"),yn(this.pointers,"pen")),sn(o,e.button)),this.changedPointers.push(o),n!=="pointermove"?(rn(o,s,r),Dn(this,/^pointer(over|out)$/.test(n)?"pointermove":n,e)):(o.viewportX!==s||o.viewportY!==r)&&(rn(o,s,r),Dn(this,n,e))),this.changedPointers.clear()};function Nn(e,n,r,o,s){Nn.g.constructor.call(this,"wheel"),this.delta=e,this.viewportX=n,this.viewportY=r,this.target=o,this.originalEvent=s}u(Nn,Ic),t("H.mapevents.WheelEvent",Nn);function On(e){var n="onwheel"in document;this.ay=n,this.Zx=(n?"d":"wheelD")+"elta",this.aq=A(this.aq,this),On.g.constructor.call(this,e,[{$a:(n?"":"mouse")+"wheel",listener:this.aq}]),this.ra=this.map.ra}u(On,Bn),On.prototype.normalize=function(e,n,r){var o=this.Zx,s=e[o+(o+"Y"in e?"Y":"")],l;if(Ma&&x.getComputedStyle(this.ra.element).direction==="rtl"&&(n-=(x.devicePixelRatio-1)*this.ra.width),s){var h=Math.abs,p=h(s);s=(!(l=e[o+"X"])||3<=p/h(l))&&(!(l=e[o+"Z"])||3<=p/h(l))?(+(0<s)-+(0>s))*(this.ay?1:-1):0}return new Nn(s,n,r,null,e)},On.prototype.aq=function(e){if(!e.Px){var n=on(this.element);n=this.normalize(e,e.pageX-n.x,e.pageY-n.y),n.delta&&(e.stopImmediatePropagation(),e.preventDefault(),this.map.Ch(n.viewportX,n.viewportY,this.Lp.bind(this,n)))}},On.prototype.Lp=function(e,n){var r=e.target=n||this.map,o,s;setTimeout(function(){r.dispatchEvent(e),e.defaultPrevented||(o=e.originalEvent,s=new x.WheelEvent("wheel",o),s.Px=!0,o.target.dispatchEvent(s))},0)};function Pn(e,n,r,o){Pn.g.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=e,this.viewportY=n,this.target=r,this.originalEvent=o}u(Pn,Ic),t("H.mapevents.ContextMenuEvent",Pn);function Qn(e){this.Xp=A(this.Xp,this),this.Zp=A(this.Zp,this),this.Yp=A(this.Yp,this),this.qn=!1,this.ih=-1,this.gv=0,Qn.g.constructor.call(this,e,[{$a:"contextmenu",listener:this.Xp},{target:e,$a:"longpress",listener:this.Zp},{target:e,$a:"dbltap",listener:this.Yp}])}u(Qn,Bn),m=Qn.prototype,m.Zp=function(e){var n=e.currentPointer;n.type==="touch"&&e.pointers.length===1&&Rn(this,n.viewportX,n.viewportY,e.originalEvent,e.target)},m.Yp=function(e){e.currentPointer.type==="touch"&&(this.gv=Date.now())},m.Xp=function(e){var n=this;this.ih===-1?this.ih=setTimeout(function(){var r=on(n.element),o=e.pageX-r.x;r=e.pageY-r.y,n.ih=-1,Rn(n,o,r,e)},this.fp):(clearInterval(this.ih),this.ih=-1),e.preventDefault()};function Rn(e,n,r,o,s){var l=e.map,h=Date.now()-e.gv;s?!e.qn&&h>e.Dq&&(e.qn=!0,s.dispatchEvent(new Pn(n,r,s,o)),Qc(l.A(),Sn,e.Ht,!1,e)):l.Ch(n,r,e.Lp.bind(e,n,r,o))}m.Lp=function(e,n,r,o){Rn(this,e,n,r,o&&db(o.dispatchEvent)?o:this.map)},m.Ht=function(){this.qn&&(this.qn=!1,this.map.dispatchEvent(new Ic("contextmenuclose",this.map)))},m.disposeInternal=function(){var e=this.map.A();clearInterval(this.ih),e&&Xc(e,Sn,this.Ht,!1,this),Bn.prototype.disposeInternal.call(this)};var Sn=["mousedown","touchstart","pointerdown","wheel"];function Tn(e){this.Tf=A(this.Tf,this),Bn.call(this,e,[{$a:"mousedown",listener:this.Tf},{$a:"mousemove",listener:this.Tf,target:window},{$a:"mouseup",listener:this.Tf,target:window},{$a:"mouseover",listener:this.Tf},{$a:"mouseout",listener:this.Tf},{$a:"dragstart",listener:this.gC}])}u(Tn,Bn),Tn.prototype.$o=function(e){return e=new qn(e.x,e.y,1,"mouse"),this.pointers.push(e),e},Tn.prototype.Tf=function(e){var n=e.type,r=on(this.element),o={x:e.pageX-r.x,y:e.pageY-r.y};r=this.pointers.item(0)||this.$o(o),this.changedPointers.push(r),rn(r,o.x,o.y),/^mouse(?:move|over|out)$/.test(n)?Dn(this,"pointermove",e):(/^mouse(down|up)$/.test(n)&&(o=e.which-1,pn.RegExp.$1==="up"?un(r,o):sn(r,o)),Dn(this,n.replace("mouse","pointer"),e)),this.changedPointers.clear()},Tn.prototype.gC=function(e){e.preventDefault()};function Un(e){var n=e.ra.element.style;if(Vn.indexOf(e)!==-1)throw Error("InvalidArgument: map is already in use");this.u=e,Vn.push(e),n.msTouchAction=n.touchAction="none",Na||!window.PointerEvent&&!window.MSPointerEvent?(this.zx=new Jn(this.u),this.Cv=new Tn(this.u)):this.zx=new Kn(this.u),this.FD=new On(this.u),this.Dy=new Qn(this.u),this.u.bc(this.l,this),Fc.call(this)}u(Un,Fc),t("H.mapevents.MapEvents",Un);var Vn=[];rb(Vn),Un.prototype.l=function(){delete this.u,this.zx.l(),this.FD.l(),this.Dy.l(),this.Cv&&this.Cv.l(),Vn.splice(Vn.indexOf(this.u),1),Fc.prototype.l.call(this)},Un.prototype.dispose=Un.prototype.l,Un.prototype.rz=function(){return this.u},Un.prototype.getAttachedMap=Un.prototype.rz;function Wn(e,n){n=n===void 0?{}:n;var r;if(Wn.g.constructor.call(this),Xn.indexOf(e)!==-1)throw new D(Wn,0,"events are already used");this.u=r=e.u,this.qv=e,Xn.push(e),r.draggable=!0,this.ta=n.kinetics||{duration:600,ease:wj},this.IB=n.modifierKey||"Alt",this.enable(n.enabled),this.Gi=r.ra,this.sl=this.Gi.element,this.Rm=0,r.addEventListener("dragstart",this.Bd,!1,this),r.addEventListener("drag",this.hg,!1,this),r.addEventListener("dragend",this.df,!0,this),r.addEventListener("wheel",this.Sv,!1,this),r.addEventListener("dbltap",this.Kv,!1,this),r.addEventListener("pointermove",this.he,!1,this),Pc(this.sl,"contextmenu",this.bn,!1,this),e.bc(this.l,this)}u(Wn,Fc),t("H.mapevents.Behavior",Wn);var Xn=[];rb(Xn),Wn.prototype.Rb=0;var Yn={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};Wn.Feature=Yn;var Zn=Yn.PANNING,$n=Yn.PINCH_ZOOM,ao=Yn.WHEEL_ZOOM,bo=Yn.DBL_TAP_ZOOM,co=Yn.FRACTIONAL_ZOOM,eo=Yn.TILT,fo=Yn.HEADING,go=Zn|$n|ao|bo|co|eo|fo;Wn.DRAGGING=Zn,Wn.WHEELZOOM=ao,Wn.DBLTAPZOOM=bo,Wn.FRACTIONALZOOM=co;function ho(e,n){if(e!==+e||e%1||0>e||2147483647<e)throw new D(n,0,"integer in range [0...0x7FFFFFFF] required")}Wn.prototype.disable=function(e){var n=this.Rb;e!==B?(ho(e,this.disable),n^=n&e):n=0,this.Gi.endInteraction(!0),this.Rb=n,this.u.draggable=0<(n&(Zn|eo|fo|$n))},Wn.prototype.disable=Wn.prototype.disable,Wn.prototype.enable=function(e){var n=this.Rb;e!==B?(ho(e,this.enable),n|=e&go):n=go,this.Rb=n,this.u.draggable=0<(n&(Zn|eo|fo|$n))},Wn.prototype.enable=Wn.prototype.enable,Wn.prototype.isEnabled=function(e){return ho(e,this.isEnabled),e===(this.Rb&e)},Wn.prototype.isEnabled=Wn.prototype.isEnabled;function io(e,n,r){var o=n.currentPointer.type==="touch",s=0,l;if(l=!o){l=e.IB;var h=n.originalEvent;l=h.getModifierState?h.getModifierState(l):!!h[l.replace(/^Control$/,"ctrl").toLowerCase()+"Key"]}return l?s|=eo|fo:(s|=Zn,o&&(n=n.pointers,n.length===2&&(s|=$n|fo,r?55>Ib(n[0].viewportY-n[1].viewportY)&&(s|=eo):e.iq&Ii.TILT&&(s|=eo)))),s&=e.Rb,(s&eo?Ii.TILT:0)|(s&fo?Ii.HEADING:0)|(s&$n?Ii.ZOOM:0)|(s&Zn?Ii.COORD:0)}function jo(e){var n=e.pointers;return e=n[0],n=n[1],e=[e.viewportX,e.viewportY],n&&e.push(n.viewportX,n.viewportY),e}m=Wn.prototype,m.iq=0,m.Bd=function(e){var n=io(this,e,!0);if(this.iq=n){var r=this.Gi;if(e=jo(e),r.startInteraction(n,this.ta),r.interaction.apply(r,e),this.Rb&ao&&!(this.Rb&co)&&(n=e[0],r=e[1],this.Rm)){e=this.u.Ub();var o=(0>this.Rm?Hb:Gb)(e);e!==o&&(this.Rm=0,this.Ji(e,o,n,r))}}},m.hg=function(e){var n=io(this,e,!1);if(n!==this.iq)e.originalEvent.type!=="pointerout"&&e.originalEvent.type!=="pointerover"&&(this.df(e),this.Bd(e));else if(n){n=this.Gi;var r=jo(e);n.interaction.apply(n,r),e.originalEvent.preventDefault()}},m.df=function(e){io(this,e,!1)&&this.Gi.endInteraction(!this.ta)},m.Ji=function(e,n,r,o){var s=this.u.wa;if(isNaN(+e))throw Error("start zoom needs to be a number");if(isNaN(+n))throw Error("to zoom needs to be a number");+n-+e!==0&&(s.startControl(null,r,o),s.control(0,0,6,0,0,0),s.endControl(!0,function(l){l.zoom=n}))},m.Sv=function(e){if(!e.defaultPrevented&&this.Rb&ao){var n=e.delta,r=this.u.Ub(),o=this.u,s=o.Ba.type;o=this.Rb&co?r-n:(0>-n?Hb:Gb)(r)-n,(s===wi.P2D||s===wi.WEBGL||s===wi.HARP)&&(this.Ji(r,o,e.viewportX,e.viewportY),this.Rm=n),e.preventDefault()}},m.he=function(){},m.Kv=function(e){var n=e.currentPointer,r=this.u.Ub(),o=e.currentPointer.type,s=this.u.Ba.type;(s===wi.P2D||s===wi.WEBGL||s===wi.HARP)&&this.Rb&bo&&(e=o==="mouse"?e.originalEvent.button===0?-1:1:0<e.pointers.length?1:-1,e=this.Rb&co?r-e:(0>-e?Hb:Gb)(r)-e,this.Ji(r,e,n.viewportX,n.viewportY))},m.bn=function(e){return this.Rb&bo?(e.preventDefault(),!1):!0},m.l=function(){var e=this.u;e&&(e.draggable=!1,e.removeEventListener("dragstart",this.Bd,!1,this),e.removeEventListener("drag",this.hg,!1,this),e.removeEventListener("dragend",this.df,!0,this),e.removeEventListener("wheel",this.Sv,!1,this),e.removeEventListener("dbltap",this.Kv,!1,this),e.removeEventListener("pointermove",this.he,!1,this),delete this.u),this.sl&&(this.sl.style.msTouchAction="",Xc(this.sl,"contextmenu",this.bn,!1,this),delete this.sl),delete this.Gi,delete this.ta,Xn.splice(Xn.indexOf(this.qv),1),delete this.qv,Fc.prototype.l.call(this)},Wn.prototype.dispose=Wn.prototype.l,t("H.mapevents.buildInfo",function(){return Lm("H-mapevents","1.56.0","2eb8e90",{region:"row"})}),R.prototype.Yn=da(3,function(e){var n=this.getCache(),r=this;if(e!==z){C(e,Qi,R.prototype.Yn,0);var o=e}else o=Zi;o!==n&&n.ia(function(s,l,h){return r.cc(s)?(o.add(s,l,h),!0):!1}),this.jt=o}),gi.prototype.Yb=da(2,function(e){this.ts=e,e=this.getState(),e!==di.INIT&&e!==di.LOADING&&ni(this)});function ko(e){return e=e.Ud("_#-;,:","_#-;,:","_#-;,:"),new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function lo(e,n){return Wa.apply(null,arguments),e}function mo(e,n){var r=x.console;r&&r.warn&&(e=hb(e)+" is deprecated and will be removed soon. ",n&&(e+=n),r.warn(e))}var no={};function oo(){this.qs={}}function po(e,n){for(var r in n)n.hasOwnProperty(r)&&e.Bo(r,n[r])}oo.prototype.Bo=function(e,n){e=this.qs[e]||(this.qs[e]=[]);var r,o=n.length;for(r=0;r<o;r++){var s=new no.Rs(n[r]);e.push(s)}},oo.prototype.query=function(e,n,r){e=this.qs[e];var o,s=e?e.length:0,l=[];for(o=0;o<s;o++)e[o].Vf(n,r)&&l.push(e[o]);return l},no.Rs=function(e){var n,r=e.boxes;if(this.alt=e.alt,this.label=e.label,this.min=e.minLevel,this.max=e.maxLevel,this.Gn=[],r&&(n=r.length)){var o=r[0],s=new J(o[0],o[1],o[2],o[3]);for(this.Gn.push(s),this.rn=new J(o[0],o[1],o[2],o[3]),e=1;e<n;e++)o=r[e],s=new J(o[0],o[1],o[2],o[3]),this.Gn.push(s),this.rn.yd(s,!1,this.rn)}},no.Rs.prototype.Vf=function(e,n){if(e>=this.min&&e<=this.max)if((e=this.Gn.length)&&this.rn){if(this.rn.Vf(n)){for(;e--;)if(this.Gn[e].Vf(n))return!0}}else return!0;return!1};function V(e,n,r,o,s,l){if(e&&n)this.$r(e),this.Qk(n),this.Fg(r),this.Wr(s),this.Nw(l),this.Tk(o);else throw new D(V,B,'Parameters "scheme" and "host" must be specified')}t("H.service.Url",V);function qo(e,n){var r=x.document,o,s="";if(r){if(s=r.createElement("a"),n){var l=(o=r.getElementsByTagName("base")[0])&&o.href,h=r.head,p=o||h.appendChild(r.createElement("base"));p.href=n}s.href=e,s=s.href,n&&(o?o.href=l:h.removeChild(p))}else/[\w]+:\/\//.test(e)&&(s=e);l=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(s),e=l[1],h=l[4],n=l[5],p=l[6],r=l[7],o=l[8],!l[2]&&h&&/@/.test(h)&&(h=h.split("@")[1]),l=V,p=p&&0<p.length?p.substr(1):"",s={};var d,g;if(r)for(d=/([?&]?([^=&+]+))(=([^&]+))?/g;g=d.exec(r);)s[decodeURIComponent(g[2])]=g[4]?decodeURIComponent(g[4]):void 0;return new l(e,h,p,s,isNaN(+n)?void 0:+n,o&&0<o.length?o.substr(1):"")}V.parse=qo,V.prototype.clone=function(){var e={},n;for(n in this.Fa)e[n]=this.Fa[n];return new V(this.pi,this.Qj,this.hf,e,this.uk,this.Db)},V.prototype.clone=V.prototype.clone,V.prototype.$r=function(e){if(!e||typeof e!="string")throw new D(this.$r,0,'The "scheme" parameter must be a non-empty string.');return this.pi=e,this},V.prototype.setScheme=V.prototype.$r,V.prototype.AA=function(){return this.pi},V.prototype.getScheme=V.prototype.AA,V.prototype.Qk=function(e){if(!e||typeof e!="string"||e.charAt(0)==="-"||e.charAt(0)==="."||e.charAt(e.length-1)===".")throw new D(this.Qk,0,'The "host" parameter is not a valid host name.');return this.Qj=e,this},V.prototype.setHost=V.prototype.Qk,V.prototype.Tz=function(){return this.Qj},V.prototype.getHost=V.prototype.Tz,V.prototype.Fg=function(e){return this.hf=e||void 0,this},V.prototype.setPath=V.prototype.Fg,V.prototype.mA=function(){return this.hf},V.prototype.getPath=V.prototype.mA,V.prototype.Tk=function(e){if(e)if(typeof e=="object")this.Fa=e;else throw new D(this.Tk,0,'Parameter "params" must be an object.');else this.Fa={};return this},V.prototype.setQuery=V.prototype.Tk,V.prototype.Cu=function(){return!ro(this)},V.prototype.hasQuery=V.prototype.Cu,V.prototype.getQuery=function(){return this.Fa},V.prototype.getQuery=V.prototype.getQuery,V.prototype.Wr=function(e){if(e===void 0)this.uk=e;else{var n=fc(+e<<0,0,65535);if(n!=e)throw new D(this.Wr,0,'Parameter "port" must be an integer in range [0...65535]');this.uk=n}return this},V.prototype.setPort=V.prototype.Wr,V.prototype.rA=function(){return this.uk},V.prototype.getPort=V.prototype.rA,V.prototype.Nw=function(e){return this.Db=e||void 0,this},V.prototype.setAnchor=V.prototype.Nw,V.prototype.yp=function(){return this.Db},V.prototype.getAnchor=V.prototype.yp,V.prototype.B=function(e){if(typeof e!="object")throw new D(this.B,0,'Parameter "other" must be an object.');var n=this.Fa,r;for(r in e)e.hasOwnProperty(r)&&typeof e[r]!="function"&&(n[r]=e[r]);return this},V.prototype.mergeQuery=V.prototype.B,V.prototype.Ha=function(e){if(!e||typeof e!="string")throw new D(this.Ha,0,'Parameter "subDomain" must be a non-empty string');return e.substr(e.length-1)==="."&&(e=e.substr(0,e.length-1)),this.Qk(e+"."+this.Qj)},V.prototype.addSubDomain=V.prototype.Ha,V.prototype.v=function(e){if(!e||typeof e!="string")throw new D(this.v,0,'Parameter "subPath" must be a non-empty string');return this.Fg((this.hf?this.hf+"/":"")+e)},V.prototype.addSubPath=V.prototype.v,V.prototype.toString=function(){return[this.pi+"://",this.Qj,this.uk?":"+this.uk:"",this.hf||!ro(this)||this.Db?"/":"",this.hf?encodeURI(this.hf):"",so(this),this.Db?"#"+encodeURIComponent(this.Db):""].join("")},V.prototype.toString=V.prototype.toString;function to(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16)})}function so(e){var n=[],r=e.Fa,o={},s;for(s in r){if(r.hasOwnProperty(s)&&typeof r[s]!="function"){var l=e.Fa[s];o.Og=to(s),C(l,uo)?l.jo.forEach(function(h){return function(p){n.push(h.Og+"="+to(p))}}(o)):C(l,vo)?n.push(o.Og+"="+l.jo.map(function(h){return to(h)}).join(l.Qy)):n.push(l===void 0?o.Og:o.Og+"="+to(l))}o={Og:o.Og}}return 0<n.length?"?"+n.join("&"):""}function wo(e){var n=Lm("H-service","1.56.0","2eb8e90",{region:"row"});return e.Fa.xnlp="CL_JSMv3."+n.version,e}function ro(e){var n,r=0;for(n in e.Fa)if(e.Fa.hasOwnProperty(n)&&typeof e.Fa[n]!="function"&&(r++,0<r))break;return!r}function xo(e,n){if(kb(e))for(var r=0;r<e.length;r++){var o=e[r];if(!lb(o)&&!ob(o)){var s="The Array does not contain only strings and numbers";break}}else s="Not an Array";if(s)throw new D(n,0,e);return e}function uo(e){this.jo=xo(e,uo)}V.MultiValueQueryParameter=uo,uo.prototype.LA=function(){return this.jo},uo.prototype.getValues=uo.prototype.LA;function vo(e,n){if(this.jo=xo(e,vo),!/^[!\$\(\)\*\+,;]$/.test(n))throw new D(vo,1,'Invalid delimiter "'+n+'"');this.Qy=n}V.DelimitedQuerySubValues=vo;function yo(e,n,r){var o=this,s=r||{},l=+s.min,h=+s.max;s.tileSize=s.tileSize||512,s.min=l?fc(l,1,17):1,s.min+=Wi(s.tileSize,1),s.max=h?fc(h,1,17):17,yo.g.constructor.call(this,s),C(e,zo,yo,0),C(n,ci,yo,1),this.$=e,n.Yb&&n.Yb("OMV"),this.Xa(n,!0),this.xn=!1,r&&(r.politicalView&&(this.yn=r.politicalView),Ao(this,r.lg,r.lg2),this.xn=!!r.pois),this.xw=function(){o.Hl=ko(o),o.reload(!1)},e.addEventListener("versionupdate",this.xw),this.Hl=ko(this),yo.prototype.Xo=function(){var p=/^v2\/vectortiles\/(.+)\/mc$/.exec(e.i().hf);return p?p[1]:B+""}()}u(yo,R),t("H.service.omv.Provider",yo),yo.prototype.Vc=ie,yo.prototype.providesOMV=yo.prototype.Vc,yo.prototype.cc=function(e){return this.Hl.test(e)},yo.prototype.cacheFilter=yo.prototype.cc,yo.prototype.Ud=function(e,n,r){return this.$.Rf(e,n,r).toString()},yo.prototype.getTileKey=yo.prototype.Ud,yo.prototype.Sb=function(){return this.PB},yo.prototype.getCache=yo.prototype.Sb,yo.prototype.qA=function(){return this.yn},yo.prototype.getPoliticalView=yo.prototype.qA,yo.prototype.YC=function(e){var n=this.yn;this.yn=e,this.dispatchEvent(new dh("politicalviewchange",this.yn,n))},yo.prototype.setPoliticalView=yo.prototype.YC,yo.prototype.MAX_STORE_TIME=2592e6,yo.prototype.Wi=function(){return pm()},yo.prototype.sd=function(){return pm()?om():yo.g.sd.call(this)},yo.prototype.s=function(e,n,r,o,s){return this.$.Oa(e,n,r,o,s)},yo.prototype.requestInternal=yo.prototype.s,yo.prototype.Cb=function(e){e.Yb&&e.Yb("OMV"),this.Xa(e)},yo.prototype.setStyle=yo.prototype.Cb,yo.prototype.J=function(){return yo.g.mb.apply(this)},yo.prototype.getStyle=yo.prototype.J,yo.prototype.mb=function(){var e=yo.g.mb.apply(this),n=e.getState()===di.READY,r=e.Rd();return n&&r&&r.global&&(this.pq&&(this.mw&&(r.global.ux_language=this.mw),this.Wt&&(r.global.ux_language_fallback=this.Wt)),this.xn&&r.global.poi&&r.global.poi.default&&(r.global.poi.default.visible=this.xn),this.pq||this.xn)&&(e=new gi(r,e.Ic())),e},yo.prototype.getStyleInternal=yo.prototype.mb;function Ao(e,n,r){var o=lb(n),s=lb(r);o&&(e.mw=n),s&&(e.Wt=r),(o||s)&&(e.Zj=[],o=/^([a-zA-Z]{2})(-|$)/,(s=o.exec(n))&&(s[1]==="zh"?e.Zj.push(n):e.Zj.push(s[1])),(s=o.exec(r))&&(s[1]==="zh"?e.Zj.push(r):e.Zj.push(s[1])),e.pq=!0)}yo.prototype.pq=!1;var Bo=["en"];yo.prototype.Ip=function(){return this.Zj||Bo},yo.prototype.getLanguages=yo.prototype.Ip,yo.prototype.disposeInternal=function(){yo.g.disposeInternal.call(this),this.$.removeEventListener("versionupdate",this.xw)},yo.prototype.PB=new Qi(256),yo.prototype.U=function(e,n){return this.$.U().query(this.Xo,n,e)},yo.prototype.getCopyrights=yo.prototype.U;var Co=globalThis;function Do(){}Do.prototype.pop=function(e){return this[e]||(this[e]=[]),this[e].pop()||document.createElement("canvas")},Do.prototype.push=function(e,n){this[n]||(this[n]=[]),this[n].push(e)};var Eo=new Do;t("H.service.util.eval",function(a){return eval(a)});function Fo(e,n){C(e,Go,Fo,0);var r={};Object.assign(r,n),r.min=r.min||0,r.max=r.max||20,r.tileSize=r.tileSize||512,r.getURL=function(o,s,l){return e.Rf(o,s,l).clone().B({size:r.tileSize})},jj.call(this,r),this.$=e}u(Fo,jj),t("H.service.rasterTile.Provider",Fo),Fo.prototype.U=function(e,n){var r=this.$;return r.U().query(r.Di.Rn+"."+r.J(),n,e)},Fo.prototype.getCopyrights=Fo.prototype.U,Fo.prototype.Wi=function(){return pm()},Fo.prototype.sd=function(){return pm()?om():Fo.g.sd.call(this)};function X(e){e=lo({},this.Oy,e);var n=e.apikey||e.apiKey,r=e.baseUrl;if(r=n?r?0:"baseUrl":"apikey")throw new D(X,0,'"'+r+'" must be specified');this.Qw(e.baseUrl),this.ct=n,this.kd.B({apikey:n}),this.Mc=e.headers||{},this.UC=Ta(e.servicesConfig||{})}t("H.service.Platform",X),X.prototype.Oy={apikey:null,baseUrl:new V("https","hereapi"+(Em?".cn":".com"))},X.prototype.Qw=function(e){this.kd=wo(e.clone()),this.ct=e=this.ct,this.kd.B({apikey:e})},X.prototype.setBaseUrl=X.prototype.Qw,X.prototype.Ic=function(){return this.kd},X.prototype.getBaseUrl=X.prototype.Ic,X.prototype.Ta=function(e,n){try{return e.Hm=!0,new e(lo({platformBaseUrl:this.Ic(),headers:this.Mc},this.UC[e.CONFIG_KEY]||{},n||{}))}finally{e.Hm=!1}},X.prototype.createService=X.prototype.Ta,X.prototype.Yl=function(e,n,r){var o=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!ya(e)&&!lb(e))throw new D(this.Yl,0,"is invalid: must be either a configuration object or a URL");if(!db(n))throw new D(this.Yl,1,"is invalid: must be a Function");if(!db(r))throw new D(this.Yl,2,"is invalid: must be a Function");var s=new H.map.render.harp.Style(e);s.addEventListener("change",function(){var l=s.getState();if(l===-1)r(Error("H.service.platform#createHybridLayers method failed to load style configuration"));else if(l===2){l={dark:!0};var h=o.Qp({resource:"background",queryParams:{style:"satellite.day"}}),p=s.Rd(),d={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};p.definitions&&(p.definitions["Satellite.Texture.Gamma"]!==void 0&&(d.styles[0].attr.gamma=p.definitions["Satellite.Texture.Gamma"]),p.definitions["Satellite.Texture.Brightness"]!==void 0&&(d.styles[0].attr.brightness=p.definitions["Satellite.Texture.Brightness"])),h=new Fo(h,{engineType:Im,style:new H.map.render.harp.Style(d)}),n({raster:new yk(h,l),vector:o.Bh().md(s,{engineType:Im},l),traffic:o.Tp().md(s,{engineType:Im},l)})}}),s.load()},X.prototype.createHybridLayers=X.prototype.Yl;function Ho(e,n){if(n=n===void 0?{}:n,!e.Hm)throw new Bb(e);Ho.g.constructor.call(this);var r=Io(this,n);if(!r.baseUrl&&!r.platformBaseUrl)throw new D(e,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.wc=(r.baseUrl?r.baseUrl:r.platformBaseUrl).clone(),e=r.baseUrl?n:r,e.host&&this.wc.Qk(e.host),e.subDomain&&this.wc.Ha(e.subDomain),e.path&&this.wc.Fg(e.path),wo(this.wc),this.Mc=r.headers||{}}u(Ho,F),t("H.service.Service",Ho);function Io(e,n){return e=e.Ca(),n?lo({},e,n):e}Ho.prototype.Ca=function(){return{}},Ho.prototype.i=function(){return this.wc},Ho.prototype.getUrl=Ho.prototype.i,Ho.prototype.s=function(e,n,r,o){return o=new Xg(o===void 0?"application/json":o,e.toString(),Rd,{headers:this.Mc}),o.then(n,Jo(this,e,r)),o};function Jo(e,n,r){return function(o){return typeof o.json!="function"?Promise.reject(r(Ko(n,o))):o.json().then(function(s){return r(e.qd(s))},function(){return r(Ko(n,o))})}}Ho.prototype.qd=function(e){return Error(e.message)};function Ko(e,n){return Error((n.statusText?"["+n.statusText+"] ":"")+e+" request failed")}function zo(e){zo.g.constructor.call(this,zo,e);var n=Io(this,e).mapVersion;this.Fn=e.queryParams||{},this.dk=fb(n)?n:Lo[this.i().toString()],fb(this.dk)||Mo(this)}u(zo,Ho),t("H.service.omv.Service",zo),zo.prototype.Ca=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},zo.CONFIG_KEY="omv";var Lo={};rb(Lo),zo.prototype.eA=function(){return this.dk},zo.prototype.getMapVersion=zo.prototype.eA;function Mo(e){e.s(e.i().clone().v("../../info"),function(n){n=n.mapVersion;var r=e.i().toString();e.dk=n,n!==Lo[r]&&(Lo[r]=n,e.dispatchEvent("versionupdate"))},function(){})}zo.prototype.md=function(e,n,r){n=n||{};var o={min:0,max:22};return ya(r)&&lo(o,r),Em&&(n.min=o.min=4),new yk(new yo(this,e,n),o)},zo.prototype.createLayer=zo.prototype.md,zo.prototype.Oa=function(e,n,r,o,s){return this.s(this.Rf(e,n,r),function(l){return l.arrayBuffer().then(o,s)},s,"arraybuffer")},zo.prototype.Rf=function(e,n,r){return e=this.i().clone().v(r+"/"+e+"/"+n+"/omv"),fb(this.dk)&&e.B({mv:this.dk}).B(this.Fn),e},zo.prototype.rm=function(e){return nn()+"/"+e},zo.prototype.Nj=function(e,n){if(!db(e))throw new D(this.Nj,0,'"onResult" must be a function');if(!db(n))throw new D(this.Nj,1,'"onError" must be a function');return this.s(this.i().clone().Fg("v2/vectortiles/pviews"),e,n)},zo.prototype.getPoliticalViews=zo.prototype.Nj,X.prototype.Bh=function(e){return this.Ta(zo,e)},X.prototype.getOMVService=X.prototype.Bh,zo.prototype.Jf=function(){this.ec=new oo,this.s(this.i().clone().v("../../copyrights"),A(this.pl,this),ke)},zo.prototype.pl=function(e){po(this.ec,e),this.dispatchEvent("copyrightupdate")},zo.prototype.U=function(){return this.ec||this.Jf(),this.ec},zo.prototype.getCopyrights=zo.prototype.U,X.prototype.Xl=function(e,n,r,o,s,l){function h(_h,_m,ry){_m=_h.rm(_m),_m=w?new gi(_m):new H.map.render.harp.Style(_m);var uy={engineType:g};v&&v.politicalView&&(uy.politicalView=v.politicalView),r&&(uy.lg=r),o&&(uy.lg2=o),l&&(uy.pois=l);var ay;return ry&&(ay={dark:ry}),_h.md(_m,uy,ay)}function p(_h,_m,ry,uy,ay){return _h.Od(_m,ry,I,uy,G,1,ay,y)}var d=this,g=vi,y={crossOrigin:"anonymous"};if(ya(e)){var v=e;"crossOrigin"in v&&(y.crossOrigin=v.crossOrigin),e=v.tileSize,n=v.ppi,r=v.lg,o=v.lg2,s=v.style,l=v.pois,v.engineType!==void 0&&(g=v.engineType,y.engineType=g)}var _=g===wi.HARP,w=g===wi.WEBGL,I=e||512,G={};if(0>[72,250,320,500].indexOf(+n)){if(n!==B)throw new D(this.Xl,1,n)}else G.ppi=+n;if(r&&(G.lg=r),o&&(G.lg2=o),s&&(G.style=s),l&&(G.pois=!!l),_&&!H.map.render.harp)throw new D(this.Xl,0,"HARP engine is not supported, module not found");if(e={},Em)lo(e,{vector:{normal:{map:h(this.Bh(),"harp/oslo/normal.day.json")}}});else{s=this.Kp();var _t=this.Kp({type:"aerial"}),_r=this.Sp(),_o=_r.vt(G.lg?{lg:G.lg,i18n:!0,engineType:g}:{engineType:g});if(lo(e,{raster:{normal:{xbase:p(s,"xbasetile","normal.day","png8",!1),xbasenight:p(s,"xbasetile","normal.night","png8",!0),base:p(s,"basetile","normal.day","png8",!1),basenight:p(s,"basetile","normal.night","png8",!0),map:p(s,"maptile","normal.day","png8",!1),mapnight:p(s,"maptile","normal.night","png8",!0),trafficincidents:_o,transit:p(s,"maptile","normal.day.transit","png8",!1),labels:p(s,"labeltile","normal.day","png",!1)},satellite:{xbase:p(_t,"xbasetile","hybrid.day","jpg",!0),base:p(_t,"basetile","hybrid.day","jpg",!0),map:p(_t,"maptile","hybrid.day","jpg",!0),labels:p(_t,"labeltile","hybrid.day","png",!0)},terrain:{xbase:p(_t,"xbasetile","terrain.day","jpg",!1),base:p(_t,"basetile","terrain.day","jpg",!1),map:p(_t,"maptile","terrain.day","jpg",!1),labels:p(_t,"labeltile","terrain.day","png",!1)}}}),_||w){lo(e,{vector:{normal:{traffic:_r.ut(void 0,g),trafficincidents:_o}}}),_t=this.Bh({queryParams:{content:"default,transit"}}),s=this.Tp(),_r=this.Bh({queryParams:{content:"default,advanced_roads,transit"}});var Ca=this.Bh({queryParams:{content:"default,hillshade,contours,transit"}});if(w)e.vector.normal.map=h(_t,"omv/miami/normal.day.yaml"),e.vector.normal.truck=h(_t,"omv/miami/truck.day.yaml");else if(_){e.vector.normal.map=h(_t,"harp/oslo/normal.day.json"),e.vector.normal.truck=h(_t,"harp/oslo/normal.day.json"),e.vector.normal.logistics=h(_r,"harp/oslo/logistics.day.json"),e.vector.normal.logisticsnight=h(_r,"harp/oslo/logistics.night.json"),_o=h(Ca,"harp/oslo/topo.day.json"),Ca=h(Ca,"harp/oslo/topo.night.json");var _a=function(_h){if(_h=_h.target,_h.getState()===2){_h.removeEventListener("change",_a);var _m=_h.getEnabledFeatures()||[];[{feature:"terrain",mode:"hillshade"},{feature:"contours",mode:"all"}].forEach(function(ry){var uy=_m.findIndex(function(ay){return ay.feature===ry.feature});_m.splice(uy,uy===-1?0:1,ry)}),_h.setEnabledFeatures(_m)}};_o.D.J().addEventListener("change",_a),Ca.D.J().addEventListener("change",_a),e.vector.normal.topo=_o,e.vector.normal.toponight=Ca;var _l={ppi:72<n?400:100,size:256<I?512:256,features:"pois:"+(l===!0||lb(l)&&/[^0]/.test(l)?"all":"disabled")};r&&(_l.lang=r),o&&(_l.lang2=o),v&&v.politicalView&&(_l.pview=v.politicalView),n={dark:!0},_o=function(_h,_m,ry,uy,ay){var ey=lo({},_l);return/^explore\./.test(ry)||delete ey.features,_h=d.Qp({format:_m,resource:_h,queryParams:lo({style:ry},ey)}),ay=new Fo(_h,{engineType:g,style:ay}),new yk(ay,uy)},lo(e.raster.normal,{base:_o("background","png8","explore.day"),basenight:_o("background","png8","explore.night",n),map:_o("base","png8","explore.day"),mapnight:_o("base","png8","explore.night",n),labels:_o("label","png","explore.day")}),lo(e.raster.satellite,{xbase:_o("background","jpeg","satellite.day",n),base:_o("background","jpeg","explore.satellite.day",n),map:_o("base","jpeg","explore.satellite.day",n),labels:_o("label","png","explore.satellite.day")}),lo(e.vector.normal,{mapnight:h(_t,"harp/oslo/normal.night.json",!0),lite:h(_t,"harp/oslo/lite.day.json"),litenight:h(_t,"harp/oslo/lite.night.json",!0),ism:h(_t,"harp/oslo/road.network.day.json"),ismnight:h(_t,"harp/oslo/road.network.night.json",!0),roadnetwork:h(_t,"harp/oslo/road.network.day.json"),roadnetworknight:h(_t,"harp/oslo/road.network.night.json",!0)}),Ca={styles:[{technique:"raster",attr:{gamma:["step",["zoom"],.9,13,1],brightness:["step",["zoom"],.6,12,.7,13,.8,14,.8,17,.9]}}]};for(var Qa=[],Kc=0;6>Kc;Kc++){var jc=new H.map.render.harp.Style(JSON.parse(JSON.stringify(Ca)));jc=_o("background","jpeg","satellite.day",n,jc),Qa.push(jc)}e.hybrid={day:{raster:Qa[0],vector:h(_t,"harp/oslo/hybrid.day.json",!0),traffic:h(s,"harp/oslo/hybrid.day.json",!0)},night:{raster:Qa[1],vector:h(_t,"harp/oslo/hybrid.night.json",!0),traffic:h(s,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:Qa[2],vector:h(_t,"harp/oslo/lite.hybrid.day.json",!0),traffic:h(s,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:Qa[3],vector:h(_t,"harp/oslo/lite.hybrid.night.json",!0),traffic:h(s,"harp/oslo/lite.hybrid.night.json",!0)},logistics:{raster:Qa[4],vector:h(_r,"harp/oslo/logistics.hybrid.day.json",!0),traffic:h(s,"harp/oslo/logistics.hybrid.day.json",!0)},logisticsnight:{raster:Qa[5],vector:h(_r,"harp/oslo/logistics.hybrid.night.json",!0),traffic:h(s,"harp/oslo/logistics.hybrid.night.json",!0)}}}_t={traffic:{}},_t.traffic.map=h(s,w?"traffic/vector.tile.yaml":"harp/oslo/normal.day.json"),_&&(_t.traffic.logistics=h(s,"harp/oslo/logistics.day.json"),_t.traffic.logisticsnight=h(s,"harp/oslo/logistics.night.json"),_t.traffic.mapnight=h(s,"harp/oslo/normal.night.json"),_t.traffic.lite=h(s,"harp/oslo/lite.day.json"),_t.traffic.litenight=h(s,"harp/oslo/lite.night.json")),lo(e.vector,_t)}}return e},X.prototype.createDefaultLayers=X.prototype.Xl;function No(e){No.g.constructor.call(this,No,e),this.tu=e.getToken}u(No,Ho),t("H.service.iml.Service",No),No.prototype.Ca=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},No.prototype.qd=function(e){function n(){for(var o=fa(r),s=o.next();!s.done;s=o.next()){s=s.value;var l=s.format;if(s.keys.every(function(h){return e[h]}))return l()}return JSON.stringify(e)}var r=[{keys:["code","title","cause","action"],format:function(){return e.code+": "+e.title+"; cause: "+e.cause+"; action: "+e.action}},{keys:["error","error_description"],format:function(){return e.error+": "+e.error_description}},{keys:["error","errorMessage"],format:function(){return e.error+": "+e.errorMessage}}];return Error(ya(e)?n():e)},No.prototype.Eh=function(e,n,r,o,s){var l=this.Eh;return Oo(l,0,e,n),Po(l,2,r,o),e=this.i().clone().v(e+"/layers/"+n+"/statistics").B(s||{}),this.K(e,"GET",r,o)},No.prototype.getStatistics=No.prototype.Eh,No.prototype.lm=function(e,n,r,o,s,l,h,p,d){var g=d?"":".mvtf";return e=this.i().clone().v(o+"/layers/"+s+"/tile/web/"+r+"_"+e+"_"+n+g).B(Object.assign({clip:!0},p)),this.K(e,"GET",d?l:function(y){return y.arrayBuffer().then(l)},h,void 0,d?"application/json":"arraybuffer")},No.prototype.getFeaturesByTile=No.prototype.lm,No.prototype.hu=function(e,n,r,o,s,l){var h=this.hu;return Qo(h,e),Oo(h,1,n,r),Po(h,3,o,s),e=Ro(this,e,n,r,l),this.K(e,"GET",o,s)},No.prototype.getFeatureById=No.prototype.hu,No.prototype.Te=function(e,n,r,o,s,l){var h=this.Te;return So(h,e),Oo(h,1,n,r),Po(h,3,o,s),e=To(this,e,n,r,l),this.K(e,"GET",o,s)},No.prototype.getFeaturesById=No.prototype.Te,No.prototype.wh=function(e,n,r,o,s){var l=this.wh;if(!ya(e)||!(e.bbox||e.north&&e.east&&e.south&&e.west))throw new D(l,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return Oo(l,1,n,r),Po(l,3,o,s),e=this.i().clone().v(n+"/layers/"+r+"/bbox").B(e),this.K(e,"GET",o,s)},No.prototype.getFeaturesByBoundingBox=No.prototype.wh,No.prototype.ju=function(e,n,r,o,s){var l=this.ju;if(!(ya(e)&&e.radius&&(e.lat&&(e.lng||e.lon)||e.refCatalogHrn&&e.refLayerId&&e.refFeatureId)))throw new D(l,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return Oo(l,1,n,r),Po(l,3,o,s),e=this.i().clone().v(n+"/layers/"+r+"/spatial").B(e),this.K(e,"GET",o,s)},No.prototype.getFeaturesByPointAndRadius=No.prototype.ju,No.prototype.iu=function(e,n,r,o,s,l){var h=this.iu;if(!ya(e)||!e.radius)throw new D(h,0,'must be an object with "radius"');return Uo(h,1,n),Oo(h,2,r,o),Po(h,4,s,l),e=this.i().clone().v(r+"/layers/"+o+"/spatial").B(e),this.K(e,"POST",s,l,n)},No.prototype.getFeaturesByGeometryAndRadius=No.prototype.iu,No.prototype.Lw=function(e,n,r,o,s){var l=this.Lw;return Oo(l,0,e,n),Po(l,2,r,o),e=this.i().clone().v(e+"/layers/"+n+"/search").B(s||{}),this.K(e,"GET",r,o)},No.prototype.searchFeatures=No.prototype.Lw,No.prototype.Zu=function(e,n,r,o,s){var l=this.Zu;return Oo(l,0,e,n),Po(l,2,r,o),e=this.i().clone().v(e+"/layers/"+n+"/iterate").B(s||{}),this.K(e,"GET",r,o)},No.prototype.iterateFeatures=No.prototype.Zu,No.prototype.mf=function(e,n,r,o,s,l){var h=this.mf;return Uo(h,0,e),Oo(h,1,n,r),Po(h,3,o,s),n=Vo(this,n,r,l),this.K(n,"PUT",o,s,e)},No.prototype.putFeatures=No.prototype.mf,No.prototype.kf=function(e,n,r,o,s,l){var h=this.kf;return Uo(h,0,e),Oo(h,1,n,r),Po(h,3,o,s),n=Vo(this,n,r,l),this.K(n,"POST",o,s,e)},No.prototype.postFeatures=No.prototype.kf,No.prototype.Hf=function(e,n,r,o,s){var l=this.Hf;return So(l,e),Oo(l,1,n,r),Po(l,3,o,s),e=To(this,e,n,r),this.K(e,"DELETE",o,s)},No.prototype.deleteFeatures=No.prototype.Hf,No.prototype.vw=function(e,n,r,o,s,l,h){var p=this.vw;return Qo(p,e),Uo(p,1,n),Oo(p,2,r,o),Po(p,4,s,l),e=Ro(this,e,r,o,h),this.K(e,"PUT",s,l,n)},No.prototype.putFeature=No.prototype.vw,No.prototype.bw=function(e,n,r,o,s,l,h){var p=this.bw;return Qo(p,e),Uo(p,1,n),Oo(p,2,r,o),Po(p,4,s,l),e=Ro(this,e,r,o,h),this.K(e,"PATCH",s,l,n)},No.prototype.patchFeature=No.prototype.bw,No.prototype.Ct=function(e,n,r,o,s){var l=this.Ct;return Qo(l,e),Oo(l,1,n,r),Po(l,3,o,s),e=Ro(this,e,n,r),this.K(e,"DELETE",o,s,void 0,"text/plain")},No.prototype.deleteFeature=No.prototype.Ct;function Vo(e,n,r,o){return e.i().clone().v(n+"/layers/"+r+"/features").B(o||{})}function To(e,n,r,o,s){return n=Object.assign({},s,{id:new uo(n)}),Vo(e,r,o,n)}function Ro(e,n,r,o,s){return e.i().clone().v(r+"/layers/"+o+"/features/"+n).B(s||{})}No.prototype.K=function(e,n,r,o,s,l){return l=l===void 0?"application/json":l,n={method:n,headers:Object.assign({},s?{"Content-Type":"application/geo+json"}:void 0,typeof this.tu=="function"?{Authorization:"Bearer "+this.tu()}:void 0,this.Mc)},s&&(n.data=JSON.stringify(s)),s=new Xg(l,e.toString(),Rd,n),s.then(r,Jo(this,e,o)),s},No.CONFIG_KEY="iml";function Oo(e,n,r,o){ib(r,"String",e,n,"must be a string"),ib(o,"String",e,n+1,"must be a string")}function Qo(e,n){ib(n,"String",e,0,"must be a string")}function So(e,n){if(!Array.isArray(n)||n.length===0||n.some(function(r){return typeof r!="string"}))throw new D(e,0,"must be a non-empty array of strings")}function Uo(e,n,r){if(!ya(r))throw new D(e,n,"must be a GeoJSON object")}function Po(e,n,r,o){if(!db(r))throw new D(e,n,"must be a function");if(!db(o))throw new D(e,n+1,"must be a function")}X.prototype.Uz=function(e){return this.Ta(No,e)},X.prototype.getIMLService=X.prototype.Uz;function Wo(e,n,r,o){if(Wo.g.constructor.call(this,o?{min:o.min,max:o.max,engineType:o.engineType}:void 0),C(e,No,Wo,0),!lb(n))throw new D(Wo,1,'"catalogHrn" must be a string');if(!lb(r))throw new D(Wo,2,'"layerId" must be a string');this.$=e,this.$g=n,this.Nh=r,this.Ok=ya(o)&&ya(o.parameters)?o.parameters:{},this.Xa(this.Ep())}u(Wo,R),t("H.service.iml.Provider",Wo),Wo.prototype.s=function(e,n,r,o,s){return this.$.lm(e,n,r,this.$g,this.Nh,o,s,this.Ok)},Wo.prototype.requestInternal=Wo.prototype.s,Wo.prototype.Vc=ie,Wo.prototype.providesOMV=Wo.prototype.Vc,Wo.prototype.J=function(){return this.mb()},Wo.prototype.getStyle=Wo.prototype.J,Wo.prototype.Cb=function(e){C(e,gi)&&e.Yb("MVT"),this.Xa(e)},Wo.prototype.setStyle=Wo.prototype.Cb,Wo.prototype.Ep=function(){return this.vb===wi.WEBGL?new gi({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.$g+":"+this.Nh},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.$g+":"+this.Nh,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.$g+":"+this.Nh,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.$g+":"+this.Nh,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.$g+":"+this.Nh,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]})};function Xo(){}t("H.service.extension.dataView.ITable",Xo),Xo.prototype.zh=function(){},Xo.prototype.getMeta=Xo.prototype.zh,Xo.prototype.Dh=function(){},Xo.prototype.getRowCount=Xo.prototype.Dh,Xo.prototype.Td=function(){},Xo.prototype.getRow=Xo.prototype.Td,Xo.prototype.ab=function(){},Xo.prototype.getColumnNames=Xo.prototype.ab,Xo.prototype.Gj=function(){},Xo.prototype.getColumn=Xo.prototype.Gj,Xo.prototype.ua=function(){},Xo.prototype.getCell=Xo.prototype.ua,Xo.prototype.concat=function(){},Xo.prototype.concat=Xo.prototype.concat;function Yo(){}t("H.service.extension.dataView.IColumn",Yo),Yo.prototype.ua=function(){},Yo.prototype.getCell=Yo.prototype.ua;function Zo(){}t("H.service.extension.dataView.IRow",Zo),Zo.prototype.ab=function(){},Zo.prototype.getColumnNames=Zo.prototype.ab,Zo.prototype.ua=function(){},Zo.prototype.getCell=Zo.prototype.ua,Zo.prototype.Qf=function(){},Zo.prototype.getTable=Zo.prototype.Qf;function $o(e,n){this.$b=e,this.Nl=n}t("H.service.extension.dataView.ObjColumn",$o),$o.prototype.ua=function(e){return this.$b.ua(e,this.Nl)},$o.prototype.getCell=$o.prototype.ua;function ap(e,n){this.$b=e,this.Kk=n}t("H.service.extension.dataView.ObjRow",ap),ap.prototype.ab=function(){return this.$b.ab()},ap.prototype.getColumnNames=ap.prototype.ab,ap.prototype.ua=function(e){return this.$b.ua(this.Kk,e)},ap.prototype.getCell=ap.prototype.ua,ap.prototype.Qf=function(){return this.$b},ap.prototype.getTable=ap.prototype.Qf;function bp(e,n,r){var o;if(n=n||(e&&e.length?Object.keys(e[0]):B),this.Ob=e,n)for(this.eh=n,this.To=e=Za(),o=n.length;o--;)e[n[o]]=!0;r!==B&&(this.Lq=r)}t("H.service.extension.dataView.ObjTable",bp),m=bp.prototype,m.Lq=B,m.Ob=B,m.eh=B,m.To=B,m.zh=function(){return this.Lq},bp.prototype.getMeta=bp.prototype.zh,bp.prototype.Dh=function(){return this.Ob?this.Ob.length:0},bp.prototype.getRowCount=bp.prototype.Dh,bp.prototype.Td=function(e){var n=this.Ob;return n&&n[e]?new ap(this,e):B},bp.prototype.getRow=bp.prototype.Td,bp.prototype.ab=function(){return this.eh||le},bp.prototype.getColumnNames=bp.prototype.ab,bp.prototype.Gj=function(e){return this.To[e]?new $o(this,e):B},bp.prototype.getColumn=bp.prototype.Gj,bp.prototype.ua=function(e,n){var r=this.Ob;return(e=r&&this.To[n]&&r[e])&&e[n]},bp.prototype.getCell=bp.prototype.ua,bp.prototype.concat=function(){var e=arguments.length,n,r=this.eh,o=""+this.eh,s=(this.Ob||[]).slice();for(n=0;n<e;n++){var l=arguments[n];if(!(l instanceof bp))throw new D(this.concat,n);if(l.Ob){if(r&&""+l.eh!==o)throw new D(this.concat,n,"Incompatible columns!");s=s.concat(l.Ob)}}return new bp(s,this.eh,this.Lq)},bp.prototype.concat=bp.prototype.concat;function cp(e,n,r,o){if(!db(r))throw new D(e,n,"has invalid type");if(!db(o))throw new D(e,n+1,"has invalid type")}function dp(e,n,r,o,s,l){cp(dp,1,n,r),cp(dp,2,o,s),(this.Tn=e.length)?(this.Ob=e,this.mn=n,this.dn=r,this.kk=0,this.vn=A(this.vn,this),this.Hy=o,this.Fy=s,this.Zh=Za(),Wa(this.Zh,ep,l||{}),this.ks={},x.setTimeout(this.vn,0)):n(le,!0)}var ep={duration:100,oz:"geometry",nz:"WKT",TC:"searchAttributes",At:B};dp.prototype.vn=function(){for(var e=[],n=!1,r=uj(),o;this.kk<this.Tn;){var s=this.Ob[this.kk];if(n=s.attributes,o=s.layerId||this.Zh.At,s.distance&&(n[this.Zh.TC]={nearest:new ze(s.nearestLat,s.nearestLon),distance:s.distance}),s=s[this.Zh.oz]){try{var l=Pf(new Pa(s))}catch(h){this.dn(new x.Error(h.message)),n=!0;break}n[this.Zh.nz]=l}if((s=this.ks[o])||(s=this.ks[o]=this.Hy({layerId:o,columnNames:Object.keys(n)})),n=this.Fy(s,n),e.push(n),this.kk++,(n=this.kk===this.Tn)||uj()-r>=this.Zh.duration){this.mn(e,n);break}}n?this.ks={}:this.kl=x.setTimeout(this.vn,0)},dp.prototype.cancel=function(){x.clearTimeout(this.kl),this.kk<this.Tn&&this.dn(new x.Error("parsing canceled"))},dp.prototype.cancel=dp.prototype.cancel;function fp(e,n,r,o){o=o||gp,this.Fk={},o.provider=e,this.invalidate=je,fp.g.constructor.call(this,n,o),delete this.invalidate,r&&(this.BD=r),this.qa(hg.ADD)}u(fp,Dg),t("H.service.remote.Spatial",fp);var gp={};fp.prototype.xb=function(){return this.BD||Dg.prototype.xb.call(this)},fp.prototype.getId=fp.prototype.xb,fp.prototype.Sn=ke,fp.prototype.retain=fp.prototype.Sn,fp.prototype.release=ie,fp.prototype.release=fp.prototype.release;function hp(e,n){this.gm=e,n&&(this.labels=n)}var ip=new hp(le);fp.prototype.xh=function(e){return(this.Fk[e.key]||ip).gm},fp.prototype.getGeometriesForTile=fp.prototype.xh,fp.prototype.Hp=function(e){return(this.Fk[e.key]||ip).labels},fp.prototype.getLabels=fp.prototype.Hp;function jp(e,n,r){e.Fk[n.key]=new hp(r,void 0)}function kp(e,n,r){var o=e===8;this.Ai=n,this.Pt=r||ke,(this.Mm=e===4||o)?this.We=o:this.Vu=e===1,this.cu=this.Mm?"$HProjGeometry":"geometry"}kp.prototype.parse=function(e,n,r){var o,s={},l=[],h,p,d=0;for(h=r.length;d<h;d++){var g=r[d],y=g.Rows;if(g=y.length){var v=Object.keys(y[0]).filter(function(I){return I!=="geometry"&&I!=="$HProjGeometry"});for(v=new bp(y,v),p=0;p<g;p++){var _=y[p];if(o=_[this.cu]){if(delete _[this.cu],_=v.Td(p))try{var w=this.Mm?lp(this,e,n,_,o):mp(this,e,_,o.path);w.ea(e),l.push(w)}catch(I){this.Pt(I.message)}}else this.Pt("Layer must contain geometries")}}}return s[this.Mm?"spatials":this.Vu?"markers":"domMarkers"]=l,s};function lp(e,n,r,o,s){var l=[],h=s.paths,p=h.length,d=0,g=e.Ai&&e.Ai(o);for(e=new fp(n,e.We,B,{style:g||e.Py,data:o});d!==p;){n=l,o=n.push,g=h[d++];for(var y=0,v=g.length,_=[];y<v;)_.push(new L(g[y++],g[y++]));o.call(n,_)}return jp(e,r,[new ig(l,s.interiorsIndex,s.outlinesIndex)]),e}function mp(e,n,r,o){o=new ze(o[0],o[1]);var s=e.Ai&&e.Ai(r);return e.Vu?(e={icon:s,data:r,provider:n},e=new Mm(o,e)):(e={icon:s,data:r,provider:n},e=new Kl(o,e)),e}function np(e,n){var r={};this.oC=e,Wa(r,n||r),Nl.call(this,r),this.Jn={},e=this.Kc(og.SPATIAL),e.update(e.Ld+1,hg.ADD)}u(np,Nl),t("H.service.remote.ObjectProvider",np),np.prototype.l=function(){Nl.prototype.l.call(this)},np.prototype.dispose=np.prototype.l,np.prototype.pe=function(){return le},np.prototype.requestMarkers=np.prototype.pe,np.prototype.oe=function(){return le},np.prototype.requestDomMarkers=np.prototype.oe,np.prototype.wg=function(){return le},np.prototype.requestOverlays=np.prototype.wg,np.prototype.Uc=ie,np.prototype.providesMarkers=np.prototype.Uc,np.prototype.Tc=ie,np.prototype.providesDomMarkers=np.prototype.Tc,np.prototype.me=ie,np.prototype.providesSpatials=np.prototype.me,np.prototype.Nn=function(){return le},np.prototype.requestSpatials=np.prototype.Nn;function op(e){return e.Vd(!0)}np.prototype.On=function(e,n){return e=pp(this,e,rp),n&&(e=e.filter(op)),e},np.prototype.requestSpatialsByTile=np.prototype.On;function pp(e,n,r){var o=n.Ki&&n.Ki[r],s;return!o&&(s=n.ul)&&(delete n.ul,(n.Ki=e=e.oC.parse(e,n,s))&&(o=e[r])),o||le}np.prototype.Y=function(e){var n=e.xb();if(this.Jn[n])throw new Bb(this.Y,"Remote object "+n+" already added");return this.Jn[n]=e},np.prototype.Na=function(e){delete this.Jn[e.xb()]};var rp="spatials";function sp(e){e=e||{};var n=e.tileCacheSize||1024,r=e.resultType,o=e.styleCallback;if(fb(e.min)||(e.min=12),sp.g.constructor.call(this,e),tp.indexOf(r)===-1)throw new D(sp,2,"invalid resultType");if(this.resultType=r,o&&!db(o))throw new D(sp,2,"invalid style callback");this.Ai=o,this.na=e.pixelRatio||Xd(),this.Gc=A(this.Gc,this),this.Yn(new Qi(n,A(this.je,this))),this.createTileInternal=r===4||r===8?A(this.Gy,this):A(this.Ey,this)}u(sp,R),t("H.service.extension.TileProvider",sp),sp.prototype.rq=!1,sp.prototype.getCapabilities=function(){return sp.g.getCapabilities.call(this)|Fh.CROP_LINES_BY_TILE|Fh.CROP_POLYGONS_BY_TILE},sp.prototype.Oa=function(e,n,r,o){return this.rq?sp.g.Oa.call(this,e,n,r,o):B},sp.prototype.requestTile=sp.prototype.Oa,sp.prototype.Gc=function(e){this.dispatchEvent(new cd("error",lb(e)?e:e+"",this))},sp.prototype.Uc=function(){return this.resultType===1},sp.prototype.providesMarkers=sp.prototype.Uc,sp.prototype.Tc=function(){return this.resultType===2},sp.prototype.providesDomMarkers=sp.prototype.Tc,sp.prototype.me=function(){return this.resultType===4||this.resultType===8},sp.prototype.providesSpatials=sp.prototype.me;function up(e){var n=e.Ad;return n||(e.aw||(e.aw=e.pu(e.resultType,e.Ai,e.Gc)),n=e.Ad=new np(e.aw),n.ea(e),n.addEventListener(e.j.za,A(e.ge,e)),n.tw=!0),n}sp.prototype.Ey=function(e,n,r,o){var s=this.getTileKey(e,n,r);s=this.Sb().get(s);var l=this.resultType==2,h=[],p=up(this);for(s?s.valid=!0:(e=s=new Xi(e,n,r,z),delete e.Ki,e.ul=o),o=l?pp(p,s,"domMarkers"):pp(p,s,"markers"),n=o.length;n--;)e=o[n],e.ys=s,(l||e.kc().getState()===1)&&h.push(e);return s.data=h,s},sp.prototype.ge=function(e){(e=e.target.ys)&&(e.valid=!1)},sp.prototype.$C=function(e){this.Ew=!!e},sp.prototype.setTileCanvasRendering=sp.prototype.$C,sp.prototype.Ew=!0,sp.prototype.Gy=function(e,n,r,o){var s=up(this),l=this.getTileKey(e,n,r),h=this.tileSize,p=this.Sb().get(l);return p||(e=p=new kk(l,e,n,r,h,this.na,r,s),delete e.Ki,e.ul=o),this.Ew?(o=Eo.pop(h),p.L(o)||Eo.push(o,h)):qk(p),p},sp.prototype.je=function(e,n){var r;if(this.resultType===4||this.resultType===8){for(e=n.bb(),r=e.length;r--;)delete e[r].Fk[n.key];(e=n.Hn())&&(Eo.push(e,this.tileSize),n.In())}else for(e=n.data,r=e.length;r--;)delete e[r].ys},sp.prototype.disposeInternal=function(){sp.g.disposeInternal.call(this),up(this).l()};var vp={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};sp.ResultType=vp;var tp=[1,2,4,8];function wp(e){var n=xp;if(!e||!lb(de(e.layerId,e.layer))||!ob(e.level)||fb(e.rowFilter)&&!db(e.rowFilter)||fb(e.rowFilterContext)&&!ya(e.rowFilterContext))throw new D(n,1,fb("invalid layer config")?"invalid layer config":e)}function xp(e,n,r){var o=this,s=n&&n.rowFilter,l=r.resultType;xp.g.constructor.call(this,r),C(e,yp,xp,0),wp(n),s?(r=Ta(n),r.rowFilter=s.toString()):r=Ta(n),delete r.layer,r.layerId=de(n.layerId,n.layer),new Xm().registerProcessor("pde","H.service.extension.worker.processor"),e=e.i().clone().v(zp+"."+Ap).B({meta:1}),new Zm("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:l===4,serverUrl:e.toString(),layerConfigs:[r],horizontalMargin:1}]}).then(function(){o.rq=!0,o.jb()},this.Gc)}u(xp,sp),t("H.service.extension.platformData.TileProvider",xp),xp.prototype.pu=function(e,n,r){return e=new kp(e,n,r),e.Py=Bp,e};var Bp=new tg({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});xp.prototype.s=function(e,n,r,o,s){var l=this,h=this.getTileKey(e,n,r),p;h=this.Sb().get(h);var d={cancel:ke},g=!0,y=this.resultType;if(h&&(y===4||y===8?h.Jh()||(o(Eo.pop(this.tileSize),null),g=!1):(o(z),g=!1)),g){var v=Co.setTimeout(function(){p=new Zm("pde",{message:[l.uid,1,[e,n,r]]}),p.then(o,s)},500);d.cancel=function(){p?p.cancel():Co.clearTimeout(v)}}return d},xp.prototype.requestInternal=xp.prototype.s,xp.prototype.disposeInternal=function(){xp.g.disposeInternal.call(this),new Zm("pde",{message:[this.uid,3]})},xp.ResultType=vp;function Cp(e){this.xy=e}Cp.prototype.cancel=function(){for(var e=this.xy,n=e.length;n--;)e[n].cancel();e.length=0},Cp.prototype.cancel=Cp.prototype.cancel;function yp(e){yp.g.constructor.call(this,yp,e),mo(yp)}u(yp,Ho),t("H.service.extension.platformData.Service",yp),yp.prototype.Ca=function(){return{subDomain:"s.fleet.ls",path:"1"}},yp.CONFIG_KEY="platformData",yp.prototype.request=function(e,n,r,o,s){return this.K(e,n,r,o,s)},yp.prototype.request=yp.prototype.request,yp.prototype.K=function(e,n,r,o,s){var l="text/plain";if(!e)throw new D(this.request,0,e);if(!n)throw new D(this.request,1,n);if(!o)throw new D(this.request,3,o);if(!s)throw new D(this.request,4,s);return e=this.i().clone().v(e+"."+n).B(r),n===Dp.JSON&&(l="application/json"),this.s(e,o,s,l)};var zp="tiles";yp.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:zp,FILE:"file",INDEX:"index"};var Ap="json",Dp={TXT:"txt",JSON:Ap,HTML:"html",BIN:"bin"};yp.EntryPointType=Dp,yp.prototype.Od=function(e,n){var r=n&&n.resultType;return e=new xp(this,e,n),r==1||r===2?new bn(e):new yk(e)},yp.prototype.createTileLayer=yp.prototype.Od,yp.prototype.Bg=function(e,n,r,o){var s=[],l,h=n.layer_id||n.layer_ids;return e=this.request(e,Ap,n,function(p){l=new dp(p.geometries,r,o,function(d){return new bp([],d.columnNames,d)},function(d,g){var y=d.Td;return d.Ob?d.Ob.push(g):d.Ob=[g],y.call(d,d.Ob.length-1)},{At:h}),s.push(l)},function(p){o(new x.Error(p))}),s.push(e),new Cp(s)};function Ep(e,n,r){if(!kb(e))throw new D(r,0,"has invalid type");if(!kb(n))throw new D(r,1,"has invalid type");if(e.length!==n.length||!e.length)throw new D(r,1,"specify one key attribute for each given layer id in the same order")}yp.prototype.re=function(e,n,r,o,s,l){function h(g,y){y&&p--,o(g,!p)}var p,d=[];for(Ep(e,n,this.re),cp(this.re,3,o,s),C(r,J,this.re,2),r={bbox:r.fa+","+r.W+";"+r.ga+","+r.ca},l&&Wa(r,l),e=r.layer_id?[r.layer_id]:e,l=0,p=e.length;l<p;l++)r.layer_id=e[l],r.key_attribute=n[l],d.push(this.Bg("search/bbox",r,h,s));return new Cp(d)},yp.prototype.searchByBoundingBox=yp.prototype.re,yp.prototype.Xc=function(e,n,r,o,s,l,h){if(Ep(e,n,this.Xc),C(r,ze,this.Xc,2,"has invalid type"),!ob(o))throw new D(this.Xc,3,"has invalid type");return cp(this.Xc,4,s,l),e={layer_ids:e.join(","),key_attributes:n.join(","),proximity:r.lat+","+r.lng+","+o},h&&Wa(e,h),this.Bg("search/proximity",e,s,l)},yp.prototype.searchByProximity=yp.prototype.Xc,yp.prototype.Wc=function(e,n,r,o,s,l,h){var p="";if(Ep(e,n,this.Wc),!lb(r)&&!C(r,K))throw new D(this.Wc,1,"has invalid type");if(!ob(o))throw new D(this.Wc,2,"has invalid type");if(cp(this.Wc,4,s,l),e={layer_ids:e.join(","),key_attributes:n.join(","),radius:o},lb(r))e.route_id=r;else{for(o=r.S,r=0,n=o.length;r<n;r+=3)p+=o[r]+","+o[r+1],r<n-3&&(p+=";");e.corridor=p}return h&&Wa(e,h),this.Bg("search/corridor",e,s,l)},yp.prototype.searchByCorridor=yp.prototype.Wc,X.prototype.oA=function(e){return this.Ta(yp,e)},X.prototype.getPlatformDataService=X.prototype.oA;function Fp(e){mo(Fp,"Use HERE Geocoding and Search API v7 instead."),Fp.g.constructor.call(this,Fp,e)}u(Fp,Ho),t("H.service.PlacesService",Fp),Fp.prototype.Ca=function(){return{subDomain:"places.ls",path:"places/v1"}},Fp.CONFIG_KEY="places",Fp.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},Fp.prototype.request=function(e,n,r,o){return this.K(e,n,r,o)},Fp.prototype.request=Fp.prototype.request,Fp.prototype.K=function(e,n,r,o){return e=this.i().clone().v(e).B(n||{}),this.s(e,r,o)},Fp.prototype.search=function(e,n,r){return this.K("discover/search",e,n,r)},Fp.prototype.search=Fp.prototype.search,Fp.prototype.oD=function(e,n,r){return this.K("suggest",e,n,r)},Fp.prototype.suggest=Fp.prototype.oD,Fp.prototype.dz=function(e,n,r){return this.K("discover/explore",e,n,r)},Fp.prototype.explore=Fp.prototype.dz,Fp.prototype.my=function(e,n,r){return this.K("discover/around",e,n,r)},Fp.prototype.around=Fp.prototype.my,Fp.prototype.TA=function(e,n,r){return this.K("discover/here",e,n,r)},Fp.prototype.here=Fp.prototype.TA,Fp.prototype.yy=function(e,n,r){return this.K("categories/places",e,n,r)},Fp.prototype.categories=Fp.prototype.yy,Fp.prototype.gz=function(e,n,r,o){return e=qo(e).B(this.i().getQuery()).B(o||{}),this.s(e,n,r)},Fp.prototype.follow=Fp.prototype.gz,X.prototype.nA=function(e){return this.Ta(Fp,e)},X.prototype.getPlacesService=X.prototype.nA;function Gp(e){Fp.g.constructor.call(this,Gp,e),mo(Gp)}u(Gp,Ho),t("H.service.extension.customRoute.Service",Gp),Gp.prototype.Ca=function(){return{subDomain:"s.fleet.ls",path:"2"}},Gp.CONFIG_KEY="customRoute",Gp.prototype.qd=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(n){return n.message}).join(". "):e)},Gp.prototype.Xg=function(e,n,r){return cp(this.Xg,1,n,r),e=this.i().clone().v("calculateroute.json").B(e),this.s(e,n,r)},Gp.prototype.calculateRoute=Gp.prototype.Xg,X.prototype.Ez=function(e){return this.Ta(Gp,e)},X.prototype.getCustomRoutingService=X.prototype.Ez,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"});function Hp(e){var n=Ip;if(!e||!lb(e.layerId)||fb(e.rowFilter)&&!db(e.rowFilter)||fb(e.rowFilterContext)&&!ya(e.rowFilterContext))throw new D(n,1,fb("invalid layer config")?"invalid layer config":e)}function Jp(e){return lb(e)&&/^[A-Z][A-Z0-9_]*$/.test(e)}function Kp(e){for(var n=e&&e.length,r=2<=n&&e[--n]==="WKT"&&e[--n]==="GEOMETRY_ID";r&&n--;)r=Jp(e[n]);return r}function Lp(e,n){var r="",o=[];if(n){var s=e.geometries;if(s&&s.length){var l=Object.keys(s[0].attributes);for(r=r+("Meta:	"+n+`
`)+l.join("	"),r+=`	WKT
`,e=0;e<s.length;e++){var h=s[e].attributes,p=s[e].geometry;for(n=0;n<l.length;n++)o.push(h[l[n]]);r+=o.join("	"),r+="	"+p+`
`,o=[]}}}else{if(p={},o=[],e.geometries)for(s=0;s<e.geometries.length;s++)n=e.geometries[s],p[n.layerId]||(p[n.layerId]=[]),p[n.layerId].push(n);for(l in p)o.push({layerId:l,geometries:p[l]});for(e=0;e<o.length;e++)r+=Lp(o[e],o[e].layerId)}return r}function Ip(e,n,r){var o=this,s=n&&n.rowFilter,l;Ip.g.constructor.call(this,r),C(e,Mp,Ip,0);var h=r.resultType;if(Hp(n),s){var p=Ta(n);p.rowFilter=s.toString()}else p=n;new Xm().registerProcessor("cle","H.service.extension.worker.processor");var d=n.layerId;e.request(Np,Op,{detail_level:"all",layer_id:d},function(g){g=g.layers;var y;for(y=0;y<g.length;y++)if(g[y].layerId===d){p.level=g[y].level;break}l=e.i().clone().v(Pp+"."+Op).B({meta:1}),new Zm("cle",{message:[o.uid,0,{tileSize:o.tileSize,projected:!0,onlyOutline:h===4,serverUrl:l.toString(),layerConfigs:[p],batchTiles:!1,horizontalMargin:1}]}).then(function(){o.rq=!0,o.jb()},o.Gc)},function(g){o.Gc(g.message)})}u(Ip,sp),t("H.service.extension.customLocation.TileProvider",Ip),Ip.prototype.pu=function(e,n,r){return new kp(e,n,r)},Ip.prototype.s=function(e,n,r,o,s){var l=this,h=this.getTileKey(e,n,r),p;h=this.Sb().get(h);var d={cancel:ke},g=!0,y=this.resultType;if(h&&(y===4||y===8?h.Jh()||(o(Eo.pop(this.tileSize),null),g=!1):(o(z),g=!1)),g){var v=Co.setTimeout(function(){p=new Zm("cle",{message:[l.uid,1,[e,n,r]]}),p.then(o,s)},500);d.cancel=function(){p?p.cancel():Co.clearTimeout(v)}}return d},Ip.prototype.requestInternal=Ip.prototype.s,Ip.prototype.disposeInternal=function(){Ip.g.disposeInternal.call(this),new Zm("cle",{message:[this.uid,3]})};function Qp(){if(Rp)throw new Bb(Qp)}t("H.service.extension.customLocation.Table",Qp);var Rp=!0;function Sp(e,n){var r;Rp=!1;var o=new Qp;Rp=!0,o.Ym=bb(x.JSON.parse(x.JSON.stringify(e))),e=e.columnNames;var s=Za();for(r=e.length;r--;)s[e[r]]=r;if(o.So=s,o.Fc=e.length,n){if(n.length%e.length)throw new D(Sp,1,"Invalid number of cells")}else n=[];return o.tb=n,o}Qp.prototype.zh=function(){return this.Ym},Qp.prototype.getMeta=Qp.prototype.zh,Qp.prototype.Dh=function(){return this.tb.length/this.Fc},Qp.prototype.getRowCount=Qp.prototype.Dh,Qp.prototype.Td=function(e){return e<this.tb.length/this.Fc?new Tp(this,e):B},Qp.prototype.getRow=Qp.prototype.Td,Qp.prototype.zA=function(){var e=this.tb.length/this.Fc,n,r=new x.Array(e);for(n=0;n<e;n++)r[n]=new Tp(this,n);return r},Qp.prototype.getRows=Qp.prototype.zA,Qp.prototype.zo=function(e){var n=this.Fc,r=this.tb,o=r.length/this.Fc;if(!e||e.length%n)throw new D(this.zo,0,"Invalid number of cells");return this.tb=r.concat(e),o},Qp.prototype.addCells=Qp.prototype.zo,Qp.prototype.jy=function(){for(var e=this.Fc,n=this.tb,r=this.tb.length/this.Fc;e--;)n.push(z);return this.Td(r)},Qp.prototype.addRow=Qp.prototype.jy,Qp.prototype.ab=function(){return this.Ym.columnNames},Qp.prototype.getColumnNames=Qp.prototype.ab,Qp.prototype.Gj=function(e){return this.So[e]===B?B:new Up(this,e)},Qp.prototype.getColumn=Qp.prototype.Gj,Qp.prototype.ua=function(e,n){return this.tb[e*this.Fc+this.So[n]]},Qp.prototype.getCell=Qp.prototype.ua,Qp.prototype.te=function(e,n,r){if(n=this.So[n],e>=this.tb.length/this.Fc)throw new D(this.te,0,"Row index out of bounds");if(n===B)throw new D(this.te,0,"Column unknown");this.tb[e*this.Fc+n]=r},Qp.prototype.setCell=Qp.prototype.te,Qp.prototype.concat=function(e){var n=arguments.length,r,o=""+this.ab(),s=this.tb?this.tb.slice():[];for(r=0;r<n;r++){var l=arguments[r];if(!(l instanceof Qp))throw new D(this.concat,r);if(""+l.ab()!==o)throw new D(this.concat,r,"Incompatible columns!");l.tb&&(s=s.concat(l.tb))}return Sp(this.Ym,s)},Qp.prototype.concat=Qp.prototype.concat;var Vp=/(\n|\t|\r|")/;Qp.prototype.os=function(e,n){var r,o=this.Fc,s=this.ab(),l=[],h=[],p=this.tb,d=-1;for(r=0;r<o;r++)(!e||e.test(s[r]))&&(s[r]==="WKT"&&(d=l.length),l.push(r));if(!(e=l.length))throw new D(this.os,1,"No columns filtered");if(Wp(this,h,s,0,o,l,e,d),n){var g=n.length;for(r=0;r<g;r++)h.push(`
`),s=n[r],Wp(this,h,p,s,o,l,e,d)}else for(g=this.Dh(),s=0;s<g;s++)h.push(`
`),Wp(this,h,p,s,o,l,e,d);return h.join("")};function Wp(e,n,r,o,s,l,h,p){var d;for(d=0;d<h;d++){d&&n.push("	");var g=r[o*s+l[d]];if(d!==p){if(g!==z){if(g=String(g),Vp.test(g))throw new D(e.os,0,'Invalid character (\\n, \\r, \\t, or ") in row '+o+" column "+e.Ym.columnNames[l[d]]);n.push(g)}}else n.push(g)}}function Up(e,n){this.$b=e,this.Nl=n}Qp.Column=Up,Up.prototype.ua=function(e){return this.$b.ua(e,this.Nl)},Up.prototype.getCell=Up.prototype.ua,Up.prototype.te=function(e,n){this.$b.te(e,this.Nl,n)},Up.prototype.setCell=Up.prototype.te;function Tp(e,n){this.$b=e,this.Kk=n}Qp.Row=Tp,Tp.prototype.ab=function(){return this.$b.ab()},Tp.prototype.getColumnNames=Tp.prototype.ab,Tp.prototype.ua=function(e){return this.$b.ua(this.Kk,e)},Tp.prototype.getCell=Tp.prototype.ua,Tp.prototype.te=function(e,n){this.$b.te(this.Kk,e,n)},Tp.prototype.setCell=Tp.prototype.te,Tp.prototype.Qf=function(){return this.$b},Tp.prototype.getTable=Tp.prototype.Qf;function Xp(e){if(e===B)e="	";else if(!/^[^"\r\n]$/.test(e))throw new D(Xp,0);this.Yx=String(e).charCodeAt(0),this.wd=A(this.wd,this),this.o=Yp}var Yp=0;m=Xp.prototype,m.getState=function(){return this.o};function Zp(e,n,r){var o=e.o;if(o!==n)throw o===1&&(e.o=Yp),new Bb(r,"Requires state: "+["READY","PARSE","PAUSE"][n]+" but found "+["READY","PARSE","PAUSE"][o])}m.abort=function(){Zp(this,2,Xp.prototype.abort),this.o=Yp},m.wd=function(e){throw this.o=Yp,new D(Xp.prototype.parse,0,"Malformed DSV at row "+this.cd.Gr+" column "+this.cd.gj+": "+e)};function $p(e,n){var r=[];return e.parse(n,function(o,s,l){return 1>o&&(r[s]=l),0<o}),e.o=Yp,r}m.parse=function(e,n,r){Zp(this,Yp,Xp.prototype.parse),e=e.trim(),this.cd=new aq(e,this.Yx,this.wd),this.VB=n,this.Hv=r||je,this.o=2,this.resume()},m.Hv=je,m.resume=function(){var e=this.cd,n=[];Zp(this,2,Xp.prototype.resume),this.o=1;do{if(!e.cq){this.o=Yp;break}if(s>e.gj){if(r!==void 0&&r!==s){this.cd.wd("The number of columns must be the same for all rows");return}var r=s}var o=e.Gr,s=e.gj,l=e.Ol,h=this.Hv(o,s,e);if(e.Ol>l)for(;e.next()!==-1;);else{for(;(l=e.next())!==-1;)n.push(l);h=String.fromCharCode.apply(z,n),n.length=0}bq(e),this.VB(o,s,h)&&(this.o=e.cq?2:Yp)}while(this.o===1);this.o!=2&&r!==void 0&&0<s&&r!==s&&this.cd.wd("The number of columns must be the same for all rows")};function aq(e,n,r){this.cd=new Pa(e),this.Is=n,this.cq=!0,this.Ol=this.Gr=this.gj=0,bq(this),this.wd=r,this.Cc=[],this.Xf=!1}m=aq.prototype,m.Ol=0;function bq(e){var n=e.cd.eb();e.Yt=!1,(e.dB=n===34)&&e.cd.next()}function cq(e,n){var r=e.cd;switch(e.Yt=!0,n){case e.Is:e.gj++;break;case 13:r.next(),r.eb()!==10&&e.wd("CR without LF");case 10:e.gj=0,e.Gr++;break;case-1:e.cq=!1;break;default:e.wd("End of field expected")}return r.next(),-1}m.eb=function(){if(this.Yt)var e=-1;else{var n=this.cd;if(e=n.eb(),this.dB)switch(e){case 34:n.next(),e=n.eb(),e!==34&&(e=cq(this,e));break;case-1:this.wd("Closing quotation mark expected")}else switch(e){case 34:this.wd("Unexpected quotation mark");case this.Is:case 13:case 10:case-1:e=cq(this,e)}}return e},m.zi=function(){this.Xf=!0,this.Cc=[]},m.mh=function(){var e=this.Cc.slice();return this.Xf=!1,this.Cc=[],e},m.next=function(){var e=this.eb();return e!==-1&&this.cd.next(),this.Xf&&this.Cc.push(e),this.Ol++,e};function dq(e,n,r,o){if(o=o||{},!n)throw new D(dq,1,"has to be a function");if(!r)throw new D(dq,2,"has to be a function");for(this.mn=n,this.dn=r,this.bh=[],this.Mc={},this.xq=[],this.lh={},this.fs={},this.ls={},this.lx={},this.sj=o.duration||100,this.Gm=A(this.Gm,this),e=e.split("Meta:	").slice(1),n=0;n<e.length;n++){o=e[n].split(`
`),r=o[0].split("	")[0],o=o.slice(1).join(`
`),this.lh[r]=new Xp,this.Mc[r]=$p(this.lh[r],o);var s={layerId:r,columnNames:this.Mc[r]};this.xq.push(r),this.lx[r]=Sp(s),this.fs[r]=uj(),eq(this,o,r),this.Gm(r)}}function eq(e,n,r){var o=[],s=e.Mc[r].length-1,l=e.lx[r];try{e.lh[r].parse(n,function(h,p,d){var g=!1;return 0<h&&(o[p]=d,p===s&&(e.bh.push(l.Td(l.zo(o))),uj()-e.fs[r]>e.sj&&(g=!0))),g},function(h,p,d){if(0<h&&p===s)return Pf(d)})}catch(h){e.dn(h)}}dq.prototype.cancel=function(){for(var e in this.ls)x.clearTimeout(this.ls[e])},dq.prototype.cancel=dq.prototype.cancel,dq.prototype.Gm=function(e){var n=this,r,o;this.ls[e]=x.setTimeout(function(){if(n.lh[e].getState()===2)n.fs[e]=uj(),n.mn(n.bh,!1),n.bh=[],n.lh[e].resume(),n.Gm(e);else{for(r=!0,o=0;o<n.xq.length;o++)if(n.lh[n.xq[o]].getState()!==Yp){r=!1;break}r&&(0<n.bh.length&&n.mn(n.bh,!0),n.bh=[])}},0)};function Mp(e){Mp.g.constructor.call(this,Mp,e),mo(Mp)}u(Mp,Ho),t("H.service.extension.customLocation.Service",Mp),Mp.prototype.Ca=function(){return{subDomain:"fleet.ls",path:"2"}},Mp.CONFIG_KEY="customLocation",Mp.prototype.Od=function(e,n){var r=n&&n.resultType;return e=new Ip(this,e,n),r===1||r===2?new bn(e):new yk(e)},Mp.prototype.createTileLayer=Mp.prototype.Od;function fq(e,n,r,o){e=e===gq?"changes":"file";var s=n[e],l=lb(s),h=!l&&C(s,Blob);if(!l&&!h)throw new D(o,0,"Invalid "+e+" parameter");if(hq)s=h?s:se(s,"text/plain"),o=new x.FormData,o.append(e,s,s.name||e+".wkt"),r.method="POST",r.data=o,delete n[e];else if(h)throw new D(o,0,"Sending Blob data is not supported by the browser")}var hq=x.FormData&&!!x.FormData.prototype.append;Mp.prototype.request=function(e,n,r,o,s){return this.K(e,n,r,o,s)},Mp.prototype.request=Mp.prototype.request,Mp.prototype.K=function(e,n,r,o,s){var l="text/plain",h=e===iq.LAYERS_UPLOAD||e===iq.LAYERS_MODIFY||e===iq.LAYERS_IMPORT,p=r,d={data:B,method:"GET",headers:this.Mc};if(!e)throw new D(this.request,0,e);if(!n)throw new D(this.request,1,n);cp(this.request,3,o,s),h&&(C(r,Object,this.request,2,"Invalid request parameters"),p=Ta(r),fq(e,p,d,this.request));var g=this.i().clone().v(e+"."+n).B(p);return n===jq.JSON&&(l="application/json"),e=new Xg(l,g.toString(),Rd,d),e.then(function(y){var v=y.issues;v&&y.error_id&&y.response_code?s(Error(v[0].message)):o(y)},function(y){y.type==="error"||y.status===404?s(Error(y.statusText||"Unable to load data")):y.json().then(function(v){s(Error("["+v.issues[0].message+"] "+g+" request failed"))},function(){s(Error("["+y.statusText+"] "+g+" request failed"))})}),e};var Np="layers/list",gq="layers/modify",Pp="tiled/tile",iq={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:Np,LAYERS_MODIFY:gq,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Pp};Mp.EntryPoint=iq;var Op="json",jq={TXT:"txt",JSON:Op};Mp.EntryPointType=jq,Mp.prototype.Tb=function(e,n,r){var o=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:e},function(s){var l=String(s).replace(/[\r\n]+$/g,"").split("	");o.request(Np,Op,{layer_id:e,detail_level:"all"},function(h){h=h.layers[0],h.columnNames=l,n(Sp(h))},r)},r)},Mp.prototype.getLayer=Mp.prototype.Tb,Mp.prototype.zu=function(e,n,r,o){function s(){return++h<l?p.request("layers/access/grant",Op,{layer_id:e,granted_app_id:n[h].grantedAppId,permissions:n[h].permissions.join(",")},s,o):p.Tb(e,r,o)}var l=n&&n.length,h=-1,p=this;return s()},Mp.prototype.grantAccess=Mp.prototype.zu,Mp.prototype.Dt=function(e,n,r){return this.request("layers/delete",Op,{layer_ids:e},n,r)},Mp.prototype.deleteLayer=Mp.prototype.Dt,Mp.prototype.md=function(e,n,r){function o(){setTimeout(function(){d.Tb(h,function(_){setTimeout(s.bind(null,_),y)},function(){64e3>g?(g+=y,o()):r(x.Error("Timeout"))})},y),y*=2}function s(_){var w=JSON.stringify(_.ab()),I=e.grants;if(w!==JSON.stringify(p)){var G="Results into different column names on the backend: "+w;setTimeout(function(){d.Dt(h,function(){r(x.Error(G))},function(_t){r(x.Error(G+". "+_t.message))})},y)}else I&&I.length?d.zu(h,I,n,r):n(_)}var l,h,p,d=this,g=0,y=1e3,v=!e||!Jp(h=e.layerId)&&(l="layerId")||!Kp(p=e.columnNames)&&(l="columnNames")?0:db(n)?db(r)?-1:2:1;if(0<=v)throw new D(d.md,v,l||arguments[v]);return d.Tb(h,function(){r(x.Error("Layer exists already"))},function(){var _={layer_id:h,file:p.join("	")},w=e.level,I=e.storage;w!==B&&(_.level=w),I!==B&&(_.storage=I),d.request("layers/upload",Op,_,o,r)})},Mp.prototype.createLayer=Mp.prototype.md,Mp.prototype.Bg=function(e,n,r,o){var s=[],l;return e=this.request(e,Op,n,function(h){h.geometries.length?(h=Lp(h,n.layer_id),l=new dq(h,r,o),s.push(l)):r(le,!0)},o),s.push(e),new Cp(s)},Mp.prototype.Xc=function(e,n,r,o,s,l){if(!kb(e))throw new D(this.Xc,0,"has invalid type");if(C(n,ze,this.Xc,1,"has invalid type"),!ob(r))throw new D(this.Xc,2,"has invalid type");return cp(this.Xc,3,o,s),e={layer_ids:e.join(","),proximity:n.lat+","+n.lng+","+r},l&&Wa(e,l),this.Bg("search/proximity",e,o,s)},Mp.prototype.searchByProximity=Mp.prototype.Xc,Mp.prototype.Wc=function(e,n,r,o,s,l){var h="";if(!kb(e))throw new D(this.Wc,0,"has invalid type");if(!lb(n)&&!C(n,K))throw new D(this.Wc,1,"has invalid type");if(!ob(r))throw new D(this.Wc,2,"has invalid type");if(cp(this.Wc,3,o,s),e={layer_ids:e.join(","),radius:r},lb(n))e.route_id=n;else{var p=n.S;for(n=0,r=p.length;n<r;n+=3)h+=p[n]+","+p[n+1],n<r-3&&(h+=",");e.corridor=h}return l&&Wa(e,l),this.Bg("search/corridor",e,o,s)},Mp.prototype.searchByCorridor=Mp.prototype.Wc,Mp.prototype.re=function(e,n,r,o,s){function l(d,g){g&&p--,r(d,!p)}var h=[],p;if(!kb(e))throw new D(this.re,0,"has invalid type");for(C(n,J,this.re,1,"has invalid type"),cp(this.re,2,r,o),n={bbox:n.fa+","+n.W+";"+n.ga+","+n.ca},s&&Wa(n,s),e=n.layer_id?[n.layer_id]:e,s=0,p=e.length;s<p;s++)n.layer_id=e[s],h.push(this.Bg("search/bbox",n,l,o));return new Cp(h)},Mp.prototype.searchByBoundingBox=Mp.prototype.re,Mp.prototype.Lr=function(e,n,r,o){var s,l=[];if(!lb(e))throw new D(this.Lr,0,"has invalid type");cp(this.Lr,1,n,r);var h={layer_id:e};return o&&Wa(h,o),o=this.request("search/all",Op,h,function(p){p.geometries.length?(p=Lp(p,e),s=new dq(p,n,r),l.push(s)):n(le,!0)},r),l.push(o),new Cp(l)},Mp.prototype.searchAll=Mp.prototype.Lr;var kq={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function lq(e,n,r,o,s,l){function h(){I++,o(this,I===_)}function p(Ca){I++,s(Ca,this,I===_)}var d=n!=="append",g,y={},v=Za(),_=0,w=[],I=0;if(!kb(r))throw new D(l,0,r);for(cp(l,1,o,s),g=r.length;g--;){var G=r[g];if(C(G,Tp)){var _t=G.Qf().zh().layerId,_r=G.ua("GEOMETRY_ID");if(d){if(_r===z||String(_r)==="")var _o='GEOMETRY_ID must not be null or ""';y[_r=_t+"_"+_r]&&(_o="same GEOMETRY_ID for multiple rows"),y[_r]=G}else _r!==z&&String(_r)!==""&&(_o='GEOMETRY_ID must be null or ""')}else _o="Invalid type";if(_o)throw new D(l,0,"- Invalid row at index "+g+", "+_o);_r=v[_t],_r||(_r=v[_t]=[],_++),_r.push(G)}for(_t in v){for(_r=v[_t],r=[],g=_r.length;g--;)r.push(_r[g].Kk);w.push(e.request(gq,Op,{layer_id:_t,action:n,changes:_r[0].Qf().os(kq[n]||null,r)},A(h,_r),A(p,_r)))}return new Cp(w)}Mp.prototype.dt=function(e,n,r){return lq(this,"append",e,n,r,this.dt)},Mp.prototype.appendRows=Mp.prototype.dt,Mp.prototype.Fx=function(e,n,r){return lq(this,"update",e,n,r,this.Fx)},Mp.prototype.updateRows=Mp.prototype.Fx,Mp.prototype.Et=function(e,n,r){return lq(this,"delete",e,n,r,this.Et)},Mp.prototype.deleteRows=Mp.prototype.Et,X.prototype.Dz=function(e){return this.Ta(Mp,e)},X.prototype.getCustomLocationService=X.prototype.Dz;function mq(e){mq.g.constructor.call(this,mq,e),mo(mq)}u(mq,Ho),t("H.service.extension.geofencing.Service",mq),mq.prototype.Ca=function(){return{subDomain:"fleet.ls",path:"2"}},mq.CONFIG_KEY="geofencing",mq.prototype.request=function(e,n,r,o){return this.K(e,n,r,o)},mq.prototype.request=mq.prototype.request,mq.prototype.qd=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(n){return n.message}).join(". "):e.message||e.response_code)},mq.prototype.K=function(e,n,r,o){if(!e)throw new D(this.request,0,e);if(!db(r))throw new TypeError("onResult must be a function");if(!db(o))throw new TypeError("onError must be a function");return e=this.i().clone().v(e+".json").B(n),this.s(e,r,o)},mq.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},X.prototype.Qz=function(e){return this.Ta(mq,e)},X.prototype.getGeofencingService=X.prototype.Qz;function Go(e){e=e===void 0?{}:e,Go.g.constructor.call(this,Go,e),this.Di={Rn:e.resource||"base",Dn:e.projection||"mc",format:e.format||"png8"},this.Fn=e.queryParams||{}}u(Go,Ho),t("H.service.rasterTile.Service",Go),m=Go.prototype,m.J=function(){return this.Fn.style||"explore.day"},m.Rf=function(e,n,r){return this.i().clone().v(this.Di.Rn+"/"+(this.Di.Dn+"/")+(r+"/"+e+"/"+n+"/")+this.Di.format).B(this.Fn)},m.Ca=function(){return{subDomain:"maps",path:"v3"}},m.U=function(){return this.ec||this.Jf(),this.ec},m.Jf=function(){this.ec=new oo,this.s(this.i().clone().v("copyright"),A(this.pl,this),ke)},m.pl=function(e){var n=e.copyrights;e=e.resources;var r={},o=this.Di.Rn+"."+this.J();r[o]=[],e[this.Di.Rn].styles[this.J()].forEach(function(s){n[s].forEach(function(l){var h=[];l.boundingBoxes.forEach(function(p){h.push([p.north,p.west,p.south,p.east])}),r[o].push({boxes:h,label:l.label,alt:l.alt,minLevel:l.minLevel,maxLevel:l.maxLevel})})}),po(this.ec,r)},m.Lj=function(e,n){return this.s(this.i().clone().v("info"),e,n)},Go.prototype.getInfo=Go.prototype.Lj,Go.prototype.Nj=function(e,n){return this.s(this.i().clone().v("politicalViews"),e,n)},Go.prototype.getPoliticalViews=Go.prototype.Nj,Go.prototype.Oz=function(e,n){return this.s(this.i().clone().v("features"),e,n)},Go.prototype.getFeatures=Go.prototype.Oz,Go.prototype.Ip=function(e,n){return this.s(this.i().clone().v("languages"),e,n)},Go.prototype.getLanguages=Go.prototype.Ip,Go.CONFIG_KEY="rasterTile",X.prototype.Qp=function(e){return this.Ta(Go,e)},X.prototype.getRasterTileService=X.prototype.Qp;function nq(e){nq.g.constructor.call(this,nq,e),this.Iw=Io(this,e).reverseSubDomain,mo(nq,"Use HERE Geocoding and Search API v7 instead.")}u(nq,Ho),t("H.service.GeocodingService",nq),nq.prototype.Ca=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},nq.CONFIG_KEY="geocoding",nq.prototype.qd=function(e){return Error(e.Details||e.message||e.error)},nq.prototype.xp=function(e,n,r){return e=this.i().clone().v("geocode.json").B(e),this.s(e,n,r)},nq.prototype.geocode=nq.prototype.xp,nq.prototype.Fr=function(e,n,r){return e=this.i().clone().v("reversegeocode.json").B(e),this.Iw&&e.Ha(this.Iw),this.s(e,n,r)},nq.prototype.reverseGeocode=nq.prototype.Fr,nq.prototype.search=function(e,n,r){return e=this.i().clone().v("search.json").B(e),this.s(e,n,r)},nq.prototype.search=nq.prototype.search,X.prototype.Pz=function(e){return this.Ta(nq,e)},X.prototype.getGeocodingService=X.prototype.Pz;function oq(e,n,r){r=r||{};var o=+r.min,s=+r.max;r.min=o?fc(o,1,17):1,r.max=s?fc(s,1,17):17,oq.g.constructor.call(this,r),C(e,pq,oq,0),C(n,ci,oq,1),this.$=e,n.Yb&&n.Yb("OMV"),this.Xa(n,!0),this.Hl=ko(this)}u(oq,R),t("H.service.trafficVectorTile.Provider",oq),oq.prototype.Vc=ie,oq.prototype.providesOMV=oq.prototype.Vc,oq.prototype.cc=function(e){return this.Hl.test(e)},oq.prototype.cacheFilter=oq.prototype.cc,oq.prototype.Ud=function(e,n,r){return this.$.Rf(e,n,r).toString()},oq.prototype.getTileKey=oq.prototype.Ud,oq.prototype.Sb=function(){return this.vf},oq.prototype.getCache=oq.prototype.Sb,oq.prototype.MAX_STORE_TIME=2592e6,oq.prototype.Wi=function(){return pm()},oq.prototype.sd=function(){return pm()?om():oq.g.sd.call(this)},oq.prototype.s=function(e,n,r,o,s){return this.$.Oa(e,n,r,o,s)},oq.prototype.requestInternal=oq.prototype.s,oq.prototype.Cb=function(e){e.Yb&&e.Yb("OMV"),this.Xa(e)},oq.prototype.setStyle=oq.prototype.Cb,oq.prototype.J=function(){return oq.g.mb.apply(this)},oq.prototype.getStyle=oq.prototype.J,oq.prototype.vf=new Qi(256),oq.prototype.U=function(){return null},oq.prototype.getCopyrights=oq.prototype.U;function pq(e){pq.g.constructor.call(this,pq,e),this.Aq=(e||me).layer||"traffic",this.le="mc",this.iz="omv"}u(pq,Ho),t("H.service.trafficVectorTile.Service",pq),pq.prototype.Ca=function(){return{subDomain:"traffic.vector",path:"v2"}},pq.CONFIG_KEY="trafficVectorTile",pq.prototype.md=function(e,n,r){n=n||{};var o={min:0,max:22};return ya(r)&&lo(o,r),new yk(new oq(this,e,n),o)},pq.prototype.createLayer=pq.prototype.md,pq.prototype.Oa=function(e,n,r,o,s){return this.s(this.Rf(e,n,r),function(l){return l.arrayBuffer().then(o,s)},s,"arraybuffer")},pq.prototype.Rf=function(e,n,r){return this.i().clone().v("traffictiles/"+this.Aq+"/"+this.le+"/"+r+"/"+e+"/"+n+"/"+this.iz)},pq.prototype.rm=function(e){return nn()+"/"+e},pq.prototype.$z=function(){return this.Aq},pq.prototype.getLayerName=pq.prototype.$z,X.prototype.Tp=function(e){return this.Ta(pq,e)},X.prototype.getTrafficVectorTileService=X.prototype.Tp;function qq(e,n,r,o,s,l,h){var p=this;h=h||{},l=l||{};var d=e.i().clone().v(n+"/"+e.fb+"/"+r).B(l),g=e.$c;this.$=e,this.qx=d,jj.call(this,{tileSize:o,max:o===512?19:20,min:o===512?2:0,getURL:function(y,v,_){var w=p.qx.clone();return g&&w.Ha(g[(_+v+y)%g.length]),w.v(_+"/"+y+"/"+v+"/"+o+"/"+s),w.toString()},crossOrigin:h.crossOrigin,headers:h.headers,uri:d.toString().replace(/_/g,"")+o,engineType:h.engineType}),this.sD=n,this.pi=r,this.Fa=l,this.Xo=r.split(".")[0],this.Be=A(this.Be,this),this.getCopyrights=this.U,this.Xe=!1,e.addEventListener("versionupdate",this.Be)}u(qq,jj),qq.prototype.MAX_STORE_TIME=2592e6,qq.prototype.s=function(e,n,r,o,s,l){return this.Xe||(mo(rq,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.Xe=!0),qq.g.s.call(this,e,n,r,o,s,l)},qq.prototype.requestInternal=qq.prototype.s,qq.prototype.disposeInternal=function(){jj.prototype.disposeInternal.call(this),this.$.removeEventListener("versionupdate",this.Be)},qq.prototype.U=function(e,n){return this.$.U().query(this.Xo,n,e)},qq.prototype.getCopyrights=qq.prototype.U,qq.prototype.Be=function(){var e=this.$;this.qx=e.i().clone().v(this.sD+"/"+e.fb+"/"+this.pi).B(this.Fa),this.reload(!1)},qq.prototype.Wi=function(){return pm()},qq.prototype.sd=function(){return pm()?om():qq.g.sd.call(this)};function rq(e){rq.g.constructor.call(this,rq,e),e=Io(this,e),this.$c=e.shards,(this.Qa=e.ignoreTypes?null:e.type)&&this.i().Ha(this.Qa),this.fb=e.version,this.ec=new oo,this.pr={},this.Wl=0,this.fb==="newest"&&this.rp()}u(rq,Ho),t("H.service.MapTileService",rq),rq.prototype.Ca=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},rq.CONFIG_KEY="maptile";function sq(e,n){for(var r={},o=e[n+"s"][n],s=o.length;s--;)r[o[s].id]=o[s];e[n+"s"]=r}rq.prototype.uu=function(){return this.Qa},rq.prototype.getType=rq.prototype.uu,rq.prototype.Wp=function(){return this.fb},rq.prototype.getVersion=rq.prototype.Wp,rq.prototype.cs=function(e){this.fb=e},rq.prototype.U=function(){return this.Wl||(this.fb&&this.fb!=="newest"||this.Qa==="traffic")&&this.Jf(),this.ec},rq.prototype.getCopyrights=rq.prototype.U,m=rq.prototype,m.ss=function(e){e=e.response;var n;if(sq(e,"map"),sq(e,"scheme"),sq(e,"tiletype"),sq(e,"format"),sq(e,"resolution"),sq(e,"language"),this.fb==="newest"&&this.Qa!=="traffic")for(n in e.maps)e.maps[n].hash&&e.maps[n].newest&&(this.cs(e.maps[n].hash),this.dispatchEvent("versionupdate"));this.fq=e,this.dispatchEvent("infoupdate")},m.pl=function(e){po(this.ec,e),this.dispatchEvent("copyrightupdate")},m.rp=function(){var e=this,n=this.i().clone().v("info").B({output:"json"});this.$c&&n.Ha(this.$c[0]),this.s(n,function(r){e.ss(r)},function(r){throw r})},m.Jf=function(){var e=this,n=this.i().clone().v("copyright").v(e.fb).B({output:"json"});this.$c&&n.Ha(this.$c[0]),this.Wl=1,this.s(n,function(r){e.Wl=2,e.pl(r)},function(r){throw e.Wl=-1,r})},m.Lj=function(){return this.fq},rq.prototype.getInfo=rq.prototype.Lj,rq.prototype.oj=function(e,n,r,o,s,l){var h=this.i().clone().v(e+"/"+this.fb+"/"+n+"/"+r+"/"+o).B(s||{}).toString(),p=0,d,g=h.length;if(g!==0)for(d=0;d<g;d++){var y=h.charCodeAt(d);p=(p<<5)-p+y,p|=0}return h=p,p=this.pr[h],p||(p=new qq(this,e,n,r,o,s,lo({headers:this.Mc},l||{})),this.pr[h]=p),p},rq.prototype.createTileProvider=rq.prototype.oj,rq.prototype.Od=function(e,n,r,o,s,l,h,p){return e=this.oj(e,n,r,o,s,p),new yk(e,{opacity:l,dark:!!h})},rq.prototype.createTileLayer=rq.prototype.Od,X.prototype.Kp=function(e){return this.Ta(rq,e)},X.prototype.getMapTileService=X.prototype.Kp;function tq(e){if(!e||!db(e.requestData))throw new D(tq,0,"options.requestData");tq.g.constructor.call(this,e),this.EC=e.requestData,this.uC=!!e.providesDomMarkers}u(tq,R),t("H.map.provider.MarkerTileProvider",tq),tq.prototype.s=function(e,n,r,o,s){var l=this;return this.EC(e,n,r,function(h){for(var p=[],d,g,y=h.length;y--;)g=h[y],g.qD=l.getTileKey(e,n,r),g.ea(l),d=g.kc(),(C(g,Kl)||d.getState()===1)&&p.push(h[y]);o(p)},s)},tq.prototype.requestInternal=tq.prototype.s,tq.prototype.Ih=function(e,n){n===hg.VISUAL&&(e=this.Sb().get(e.qD))&&(e.valid=!1,this.jb(e))},tq.prototype.invalidateObject=tq.prototype.Ih,tq.prototype.Tc=function(){return this.uC},tq.prototype.providesDomMarkers=tq.prototype.Tc,tq.prototype.Uc=ie,tq.prototype.providesMarkers=tq.prototype.Uc;function uq(){this.ud={}}uq.prototype.kc=function(e,n){var r=e+n,o;return(o=this.ud[r])?o:(e=vq.MARKER.replace("{{icon}}",wq[e]||wq.OTHER),e=e.replace("{{color}}",xq[n]||xq.BLOCKING),n={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new el(fl.POLYGON,yq.MARKER)},this.ud[r]=o=new Ll(e,n))};var vq={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},wq={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},xq={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},yq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function zq(e,n,r){r=r||{},r.criticality||(r.criticality="major,critical"),C(e,Aq,zq,0),tq.call(this,{max:20,min:8,requestData:A(this.JC,this),engineType:r.engineType}),this.ud=new uq,this.$=e,this.Fa=r,this.reload=A(this.reload,this),this.yr=setInterval(this.reload,n||18e4)}u(zq,tq),t("H.service.traffic.incidents.Provider",zq);var Bq={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};zq.prototype.JC=function(e,n,r,o,s){var l=this,h=this.ud;return this.$.requestIncidentsByTile(e,n,r,function(p){var d=[];p=p.TRAFFIC_ITEMS;var g;if(p)for(p=p.TRAFFIC_ITEM,g=p.length;g--;){var y=p[g],v=y.TRAFFIC_ITEM_TYPE_DESC;switch(v){case"ACCIDENT":case"CONGESTION":var _=v;break;case"CONSTRUCTION":_="ROADWORKS";break;default:_="OTHER"}_=h.kc(_,Bq[y.CRITICALITY.DESCRIPTION]),v=y.LOCATION.GEOLOC.ORIGIN,v=new Mm({lat:v.LATITUDE,lng:v.LONGITUDE},{provider:l,icon:_}),v.setData(y),d.push(v)}o(d)},s,this.Fa)},zq.prototype.l=function(){tq.prototype.l.call(this),clearInterval(this.yr)},zq.prototype.dispose=zq.prototype.l;function Cq(e){Cq.g.constructor.call(this,Cq,e)}u(Cq,Ho),t("H.service.traffic.Service7",Cq),Cq.prototype.Ca=function(){return{subDomain:"data.traffic",path:"v7"}},Cq.CONFIG_KEY="traffic_v7",Cq.prototype.IC=function(e,n,r,o){return e=this.i().clone().v(["incidents",e].join("/")).B(n||{}),this.s(e,r,o)},Cq.prototype.requestIncidentById=Cq.prototype.IC,Cq.prototype.GC=function(e,n,r){return e=this.i().clone().v("flow").B(e||{}),this.s(e,n,r)},Cq.prototype.requestFlowByArea=Cq.prototype.GC,Cq.prototype.LC=function(e,n,r){return e=this.i().clone().v("incidents").B(e||{}),this.s(e,n,r)},Cq.prototype.requestIncidentsByArea=Cq.prototype.LC;var Dq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Eq(e,n,r,o){Eq.g.constructor.call(this,{min:10,max:21,engineType:o}),C(e,Aq,Eq,0),this.$=e,this.Fa=r||Fq,this.Fa.responseattributes="sh,fc",this.yr=setInterval(A(this.reload,this),n||18e4),this.vb===wi.WEBGL?this.Xa(new gi(e.rm("traffic/flow.yaml")),!0):this.Xa(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(Eq,R),t("H.service.traffic.flow.Provider",Eq),Eq.prototype.rr=ie,Eq.prototype.providesGeoJSON=Eq.prototype.rr,Eq.prototype.J=function(){return this.mb()},Eq.prototype.getStyle=Eq.prototype.J,Eq.prototype.Cb=function(e){e.Yb&&e.Yb("GeoJSONTileSource"),this.Xa(e)},Eq.prototype.setStyle=Eq.prototype.Cb;var Fq={locationreferences:"tmc,shp"};Eq.prototype.disposeInternal=function(){Eq.g.disposeInternal.call(this),clearInterval(this.yr)},Eq.prototype.s=function(e,n,r,o,s){return this.$.requestFlowByTile(e,n,r,function(l){l.type&&l.type.indexOf("Error")!==-1?s(l.Details):o(l)},s,this.Fa)},Eq.prototype.requestInternal=Eq.prototype.s,Eq.prototype.nd=function(e,n,r,o,s){var l,h,p,d,g={type:"FeatureCollection",features:[]},y,v=o.RWS.length;for(l=0;l<v;l++){var _=o.RWS[l],w=_.RW,I=w.length,G=Dq.indexOf(_.EXTENDED_COUNTRY_CODE+_.EBU_COUNTRY_CODE)!==-1;for(_=0;_<I;_++){var _t=w[_].FIS,_r=_t.length;for(_t=0;_t<_r;_t++){var _o=w[_].FIS[_t].FI,Ca=_o.length;for(h=0;h<Ca;h++){var _a=_o[h],_l=[],Qa=_a.CF[0],Kc=!!Qa.SSS,jc={type:"Feature",properties:Qa,geometry:{type:"MultiLineString",coordinates:_l}};for(jc.properties.LHT=G,_a.SHP.length&&(jc.properties.FC=_a.SHP[0].FC),Kc&&(y=[]),Qa=0;Qa<_a.SHP.length;Qa++){var _h=_a.SHP[Qa].value,_m=_h.length;for(p=0;p<_m;p++){var ry=Kc?y:void 0,uy=new Pa(_h[p].trim()),ay=[],ey={};for(uy.zi();(d=uy.eb())!==-1;)d===Gq?(ey.lat=+String.fromCharCode.apply(Eq,uy.mh()),uy.next(),uy.zi()):d===Hq?(ey.lng=+String.fromCharCode.apply(Eq,uy.mh()),ay.push([ey.lng,ey.lat]),ry&&ry.push(Be(ey)),ey=[],uy.next(),uy.zi()):uy.next();ey.lng=+String.fromCharCode.apply(Eq,uy.mh()),ay.push([ey.lng,ey.lat]),ry&&ry.push(Be(ey)),d=ay,_l.push(d)}}g.features.push(jc)}}}}return Eq.g.nd.call(this,e,n,r,g,s)},Eq.prototype.createTileInternal=Eq.prototype.nd;var Hq=32,Gq=44;function Iq(e){function n(y){o.contains(s)&&o.removeChild(s),g&&clearTimeout(g),delete Iq.Br[l],y&&e.Ot&&e.Ot.call(d,y)}if(!e.url||!e.Oo)throw Error('Parameter "options" must specify at least a URL and a callback.');if(typeof e.Oo!="function")throw Error("Parameters options.callback must be a function");var r=e.VD||document,o=r.getElementsByTagName("head")[0],s=r.createElement("script");r=e.url instanceof V?e.url:qo(e.url,e.TD);var l=Iq.PC++,h=e.vy||"callback",p=e.Oo,d={},g=null;return d.id=l,d.cancel=function(){n("cancelled")},e.timeout!==0&&(g=x.setTimeout(function(){n("timeout")},e.timeout||3e4)),Iq.Br[l]=function(y){n(),p.call(d,y)},s.type="text/javascript",s.src=r.toString()+(r.Cu()?"&":"?")+h+"="+(e.WD?"H.service.jsonp.handleResponse("+l+")":encodeURI("H.service.jsonp.handleResponse("+l+")")),o.appendChild(s),d}t("H.service.jsonp",Iq),Iq.RA=function(e){return(e=Iq.Br[e])?e:function(){}},Iq.handleResponse=Iq.RA,Iq.PC=0,Iq.Br={};function Aq(e){Aq.g.constructor.call(this,Aq,e),this.wy=Io(this,e).callbackKey,this.Xe=!1}u(Aq,Ho),t("H.service.traffic.Service",Aq),Aq.prototype.Ca=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},Aq.CONFIG_KEY="traffic",Aq.prototype.ut=function(e,n){return new yk(new Eq(this,void 0,e,n),{max:22})},Aq.prototype.createFlowLayer=Aq.prototype.ut,Aq.prototype.vt=function(e){return new bn(new zq(this,void 0,e))},Aq.prototype.createIncidentsLayer=Aq.prototype.vt;function Jq(e,n,r,o){return e.Xe||(mo(Aq,"Use HERE Traffic API v7 instead."),e.Xe=!0),Iq({url:n,Oo:r,Ot:function(s){o(Error("["+s+"] "+n+" request failed"))},vy:e.wy})}Aq.prototype.KC=function(e,n,r){return e=this.i().clone().v("incidents.json").B(e),Jq(this,e,n,r)},Aq.prototype.requestIncidents=Aq.prototype.KC,Aq.prototype.HC=function(e,n,r,o,s,l){return e=this.i().clone().v(["flow/json",r,e,n].join("/")).B(l||{}),Jq(this,e,o,s)},Aq.prototype.requestFlowByTile=Aq.prototype.HC,Aq.prototype.MC=function(e,n,r,o,s,l){return e=this.i().clone().v(["incidents/json",r,e,n].join("/")).B(l||{}),Jq(this,e,o,s)},Aq.prototype.requestIncidentsByTile=Aq.prototype.MC,Aq.prototype.rm=function(e){return nn()+"/"+e},X.prototype.Sp=function(e,n){if(n=n||6,n===6)n=Aq;else if(n===7)n=Cq;else throw new D(this.Sp,1,"allowed values are 6 and 7");return this.Ta(n,e)},X.prototype.getTrafficService=X.prototype.Sp;function Kq(e){Kq.g.constructor.call(this,Kq,e)}u(Kq,Ho),t("H.service.SearchService",Kq),Kq.CONFIG_KEY="search",Kq.prototype.Ca=function(){return{subDomain:"search",path:"v1"}},Kq.prototype.qd=function(e){return e=[e.title,e.action,e.cause].filter(function(n){return n}),Error(e.join(". "))},Kq.prototype.xp=function(e,n,r){return e=this.i().clone().Ha("geocode").v("geocode").B(e),this.s(e,n,r)},Kq.prototype.geocode=Kq.prototype.xp,Kq.prototype.Fr=function(e,n,r){return e=this.i().clone().Ha("revgeocode").v("revgeocode").B(e),this.s(e,n,r)},Kq.prototype.reverseGeocode=Kq.prototype.Fr,Kq.prototype.oy=function(e,n,r){return e=this.i().clone().Ha("autosuggest").v("autosuggest").B(e),this.s(e,n,r)},Kq.prototype.autosuggest=Kq.prototype.oy,Kq.prototype.Ry=function(e,n,r){return e=this.i().clone().Ha("discover").v("discover").B(e),this.s(e,n,r)},Kq.prototype.discover=Kq.prototype.Ry,Kq.prototype.vB=function(e,n,r){return e=this.i().clone().Ha("lookup").v("lookup").B(e),this.s(e,n,r)},Kq.prototype.lookup=Kq.prototype.vB,Kq.prototype.sy=function(e,n,r){return e=this.i().clone().Ha("browse").v("browse").B(e),this.s(e,n,r)},Kq.prototype.browse=Kq.prototype.sy,X.prototype.BA=function(e){return this.Ta(Kq,e)},X.prototype.getSearchService=X.prototype.BA;function Lq(e){Lq.g.constructor.call(this,Lq,e)}u(Lq,Ho),t("H.service.publicTransit.Service",Lq),Lq.prototype.Ca=function(){return{subDomain:"transit.router",path:"v8"}},Lq.CONFIG_KEY="publicTransit",Lq.prototype.yA=function(e,n,r){return e=this.i().clone().v("routes").B(e),this.s(e,n,r)},Lq.prototype.getRoutes=Lq.prototype.yA,Lq.prototype.Fz=function(e,n,r){return e=this.i().clone().v("departures").B(e),this.s(e,n,r)},Lq.prototype.getDepartures=Lq.prototype.Fz,Lq.prototype.CA=function(e,n,r){return e=this.i().clone().v("stations").B(e),this.s(e,n,r)},Lq.prototype.getStations=Lq.prototype.CA,Lq.prototype.qd=function(e){return Error(JSON.stringify(e))},X.prototype.uA=function(e){return this.Ta(Lq,e)},X.prototype.getPublicTransitService=X.prototype.uA;function Mq(e){if(this.ns=!!e.toBypassToken,!this.ns&&!e.token)throw new D(Mq,0,'"token" must be specified');mo(Mq,"Use HERE IML service instead."),Mq.g.constructor.call(this,Mq,e),this.xx=e.token,this.st={},this.Vl={}}u(Mq,Ho),t("H.service.xyz.Service",Mq),Mq.prototype.Ca=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},Mq.prototype.qd=function(e){return Error(e.errorMessage||e.message)},Mq.prototype.Np=function(e,n,r){return ib(e,"String",this.Np,0,'"projectId" must be a string'),Nq(this.Np,1,n,r),e=Oq(this.i().clone().Fg("project-api/projects/"+e)),this.s(e,n,r)},Mq.prototype.getProject=Mq.prototype.Np,Mq.prototype.su=function(e,n,r){return Nq(this.su,0,e,n),r=Pq(this,this.i().clone().B(r||{})),this.s(r,e,n)},Mq.prototype.getSpaces=Mq.prototype.su,Mq.prototype.qm=function(e,n,r){return ib(e,"String",this.qm,0,'"spaceId" must be a string'),Nq(this.qm,1,n,r),e=Pq(this,this.i().clone().v(e)),this.s(e,n,r)},Mq.prototype.getSpace=Mq.prototype.qm,Mq.prototype.Eh=function(e,n,r){return ib(e,"String",this.Eh,0,'"spaceId" must be a string'),Nq(this.Eh,1,n,r),e=Pq(this,this.i().clone().v(e+"/statistics")),this.s(e,n,r)},Mq.prototype.getStatistics=Mq.prototype.Eh,Mq.prototype.lm=function(e,n,r,o,s,l,h){return e=Pq(this,this.i().clone().v(o+"/tile/web/"+r+"_"+e+"_"+n+".mvtf").B(Object.assign({clip:!0},h))),this.s(e,function(p){return p.arrayBuffer().then(s)},l,"arraybuffer")},Mq.prototype.search=function(e,n,r,o){return ib(e,"String",this.search,0,'"spaceId" must be a string'),Nq(this.search,1,n,r),e=Pq(this,this.i().clone().v(e+"/search").B(o||{})),this.s(e,n,r)},Mq.prototype.search=Mq.prototype.search,Mq.prototype.Te=function(e,n,r,o){if(ib(e,"String",this.Te,0,'"spaceId" must be a string'),!ya(n))throw new D(this.Te,1,'"params" must be an object');return Nq(this.Te,2,r,o),e=Pq(this,this.i().clone().v(e+"/features").B(n)),this.s(e,r,o)},Mq.prototype.getFeaturesById=Mq.prototype.Te,Mq.prototype.wh=function(e,n,r,o){if(ib(e,"String",this.wh,0,'"spaceId" must be a string'),!ya(n))throw new D(this.Te,1,'"params" must be an object');return Nq(this.wh,2,r,o),e=Pq(this,this.i().clone().v(e+"/bbox").B(n)),this.s(e,r,o)},Mq.prototype.getFeaturesByBoundingBox=Mq.prototype.wh,Mq.prototype.U=function(e){var n=this.st[e];return n||(this.Vl[e]||this.Jf(e),null)},Mq.prototype.mf=function(e,n,r,o,s){if(ib(e,"String",this.mf,0,'"spaceId" must be a string'),!ya(n))throw new D(this.mf,1,'"geojsonObject" must be an object');if(Nq(this.mf,2,r,o),s&&!ya(s))throw new D(this.mf,4,'"opt_params" must be an object');return Qq(this,e,r,o,"PUT",n,s)},Mq.prototype.putFeatures=Mq.prototype.mf,Mq.prototype.kf=function(e,n,r,o,s){if(ib(e,"String",this.kf,0,'"spaceId" must be a string'),!ya(n))throw new D(this.kf,1,'"featureCollection" must be an object');if(Nq(this.kf,2,r,o),s&&!ya(s))throw new D(this.kf,4,'"opt_params" must be an object');return Qq(this,e,r,o,"POST",n,s)},Mq.prototype.postFeatures=Mq.prototype.kf,Mq.prototype.Hf=function(e,n,r,o){if(ib(e,"String",this.Hf,0,'"spaceId" must be a string'),!ya(n))throw new D(this.Hf,1,'"params" must be an object');return Nq(this.Hf,2,r,o),Qq(this,e,r,o,"DELETE",B,n)},Mq.prototype.deleteFeatures=Mq.prototype.Hf;function Qq(e,n,r,o,s,l,h){var p=Object.assign(e.ns?{}:{authorization:"Bearer "+e.xx},{"Content-Type":"application/geo+json"},e.Mc);return s={method:s,headers:p},l&&(s.data=JSON.stringify(l)),n=Oq(e.i().clone().v(n+"/features").B(h||{})),l=new Xg("application/json",n.toString(),Rd,s),l.then(r,Jo(e,n,o)),l}Mq.prototype.Jf=function(e){var n=this;this.Vl[e]=Rq,this.qm(e,function(r){n.Vl[e]=Sq,n.st[e]=r.copyright,n.dispatchEvent("copyrightupdate")},function(r){throw n.Vl[e]=Tq,r})};function Pq(e,n){return e.ns?n:Oq(n).B({access_token:e.xx})}function Oq(e){var n=Object.assign({},e.getQuery());return delete n.apikey,e.Tk(n)}Mq.CONFIG_KEY="xyz";var Rq=1,Sq=2,Tq=-1;function Nq(e,n,r,o){if(!db(r))throw new D(e,n,'"onResult" must be a function');if(!db(o))throw new D(e,n+1,'"onError" must be a function')}X.prototype.OA=function(e){return this.Ta(Mq,e)},X.prototype.getXYZService=X.prototype.OA;function Uq(e,n,r){var o;if(Uq.g.constructor.call(this,r?{min:r.min,max:r.max,engineType:r.engineType}:void 0),C(e,Mq,Uq,0),!lb(n))throw new D(Uq,1,'"spaceId" must be a string');if(this.$=e,this.Gg=n,this.Ok={},r&&(["limit","simplificationLevel","tags"].forEach(function(s){s in r&&(this.Ok[s]=r[s])},this),e=r.parameters))for(o in e)this.Ok[o]=e[o];this.Xa(this.Ep())}u(Uq,R),t("H.service.xyz.Provider",Uq),Uq.prototype.s=function(e,n,r,o,s){return this.$.lm(e,n,r,this.Gg,o,s,this.Ok)},Uq.prototype.requestInternal=Uq.prototype.s,Uq.prototype.U=function(){return this.$.U(this.Gg)},Uq.prototype.getCopyrights=Uq.prototype.U,Uq.prototype.Vc=ie,Uq.prototype.providesOMV=Uq.prototype.Vc,Uq.prototype.J=function(){return this.mb()},Uq.prototype.getStyle=Uq.prototype.J,Uq.prototype.Cb=function(e){C(e,gi)&&e.Yb("MVT"),this.Xa(e)},Uq.prototype.setStyle=Uq.prototype.Cb,Uq.prototype.Ep=function(){return this.vb===wi.WEBGL?new gi({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.Gg},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.Gg,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.Gg,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.Gg,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.Gg,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]})};function Vq(e){Vq.g.constructor.call(this,Vq,e),mo(Vq,"Use HERE Routing API v8 instead.")}u(Vq,Ho),t("H.service.RoutingService",Vq),Vq.prototype.Ca=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Vq.prototype.qd=function(e){return Error(e.details)},Vq.CONFIG_KEY="routing",Vq.prototype.Xg=function(e,n,r){return e=this.i().clone().v("calculateroute.json").B(e),this.s(e,n,r)},Vq.prototype.calculateRoute=Vq.prototype.Xg,Vq.prototype.Mo=function(e,n,r){return e=this.i().clone().Ha("isoline").v("calculateisoline.json").B(e),this.s(e,n,r)},Vq.prototype.calculateIsoline=Vq.prototype.Mo;function Wq(e){Wq.g.constructor.call(this,Wq,e)}u(Wq,Ho),t("H.service.RoutingService8",Wq),Wq.CONFIG_KEY="routing_v8",Wq.prototype.Ca=function(){return{subDomain:"router",path:"v8/routes"}},Wq.prototype.qd=function(e){return Error((e&&e.status===void 0?401:e.status)===401?e.error_description:e.title,{cause:e})},Wq.prototype.Xg=function(e,n,r){return e=this.i().clone().B(e),this.s(e,n,r)},Wq.prototype.calculateRoute=Wq.prototype.Xg,Wq.prototype.Mo=function(e,n,r){return e=this.i().clone().Ha("isoline").Fg("v8/isolines").B(e),this.s(e,n,r)},Wq.prototype.calculateIsoline=Wq.prototype.Mo,X.prototype.ru=function(e,n){if(n=Em?8:+n||7,n===7)n=Vq;else if(n===8)n=Wq;else throw new D(this.ru,1,"allowed values are 7 and 8");return this.Ta(n,e)},X.prototype.getRoutingService=X.prototype.ru,t("H.service.buildInfo",function(){return Lm("H-service","1.56.0","2eb8e90",{region:"row"})});function Xq(e){gb(this,Xq),this.url=e,this.hj=[],this.ae=z,this.mj=A(this.mj,this),F.call(this)}u(Xq,F),t("H.data.AbstractReader",Xq);var Yq={ERROR:-1,LOADING:0,VISIT:1,READY:2};Xq.State=Yq,Xq.prototype.state=Yq.READY,Xq.prototype.j={ey:"statechange"},Xq.prototype.Tb=function(){if(!this.ae){this.ae=new O;var e=this.ae.rd();e.hd(this.hj)}return new zk(this.ae)},Xq.prototype.getLayer=Xq.prototype.Tb,Xq.prototype.lA=function(){return this.hj.concat([])},Xq.prototype.getParsedObjects=Xq.prototype.lA,Xq.prototype.i=function(){return this.url},Xq.prototype.getUrl=Xq.prototype.i,Xq.prototype.bD=function(e){if(this.state===Yq.LOADING||this.state===Yq.VISIT)throw Error("InvalidState: state "+this.state);return this.hj=[],this.ae=z,this.url=e,this},Xq.prototype.setUrl=Xq.prototype.bD,Xq.prototype.getState=function(){return this.state},Xq.prototype.getState=Xq.prototype.getState,Xq.prototype.F=function(e,n,r){this.state=e,this.dispatchEvent(new Zq(n||this,this.j.ey,e,r||""))},Xq.prototype.parse=function(){var e=this;fb(this.url)?(this.F(Yq.LOADING),new Xg("text/plain",this.url).then(function(n){try{e.mj(n)}catch(r){e.F(Yq.ERROR,z,r.message)}},function(){e.F(Yq.ERROR,z,"Error loading file")})):e.F(Yq.ERROR,z,"File url was not set")},Xq.prototype.parse=Xq.prototype.parse;function Zq(e,n,r,o){Zq.g.constructor.call(this,n,e),this.state=r,this.message=o}u(Zq,Ic),Xq.Event=Zq;function $q(e,n){this.Ya=e,this.Oe=n}$q.prototype.create=function(e,n){var r=e.coordinates;switch(e.type){case"Point":var o=new Mm(ar(r));break;case"LineString":o=new Jg(br(r));break;case"Polygon":o=new Ol(cr(r));break;case"MultiPoint":var s=0,l=r.length;if(o=[],this.Oe){for(;s<l;s++)o.push(ar(r[s]));r=new Mm(new Nf(o))}else{for(;s<l;s++)o.push(new Mm(ar(r[s])));r=new T,r.hd(o)}o=r,l="multiPoint";break;case"MultiLineString":if(s=0,l=r.length,o=[],this.Oe){for(;s<l;s++)o.push(br(r[s]));r=new Jg(new rf(o))}else{for(;s<l;s++)o.push(new Jg(br(r[s])));r=new T,r.hd(o)}o=r,l="multiLineString";break;case"MultiPolygon":if(o=[],s=0,l=r.length,this.Oe){for(;s<l;s++)o.push(cr(r[s]));r=new Ol(new Mf(o))}else{for(;s<l;s++)o.push(new Ol(cr(r[s])));r=new T,r.hd(o)}o=r,l="multiPolygon";break;case"GeometryCollection":r=o=new T,s=e.geometries,l=0;for(var h=s.length;l<h;l++)this.create(s[l],r);l="geometryCollection"}return o&&(r=o,s=e.properties,e=e.id,h={},s&&(this.Oe?h=s:h.properties=s),l&&!this.Oe&&(h[l]=!0),e&&r.Zr(e),r.setData(h),this.Ya(o)),n&&o&&n.Y(o),o},$q.prototype.create=$q.prototype.create;function ar(e){return new ze(e[1],e[0])}function cr(e){for(var n=br(e[0]),r=[],o,s=1,l=e.length;s<l;s++)o=br(e[s]),r.push(o);return new M(n,r)}function br(e){for(var n=0,r=e.length,o=new K;n<r;n++)o.sg(ar(e[n]));return o}function dr(e,n){n=n||{},this.Ya=n.style||this.gh,(this.Oe=!!n.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),Xq.call(this,e)}u(dr,Xq),t("H.data.geojson.Reader",dr),dr.prototype.mj=function(e){var n,r;try{var o=typeof e=="string"?JSON.parse(e):e;if(typeof o=="object"){var s=new $q(this.Ya,this.Oe);switch(o.type){case"FeatureCollection":if(n=o.features){var l=new T;for(this.Rg(l),r=0;r<n.length;r++){var h=er(n[r]);(h=s.create(h))&&l.Y(h)}}break;case"Feature":h=er(o),(h=s.create(h))&&this.Rg(h);break;default:(h=s.create(o))&&this.Rg(h)}this.F(Yq.READY)}else this.F(Yq.ERROR,z,"Invalid syntax")}catch(p){this.F(Yq.ERROR,z,"Parse error. "+p.message)}},dr.prototype.nC=function(e){this.F(Yq.LOADING),this.mj(e)},dr.prototype.parseData=dr.prototype.nC,dr.prototype.gh=function(){};function er(e){var n={};if(e.geometry){var r=e.geometry;n.type=r.type,n.properties=e.properties,r.coordinates&&(n.coordinates=r.coordinates),r.geometries&&(n.geometries=r.geometries),e.id&&(n.id=e.id)}return n}dr.prototype.Rg=function(e){this.ae&&this.ae.rd().Y(e),this.hj.push(e),this.F(Yq.VISIT,e)};function fr(e,n,r,o,s){s&1&&gr(e,e,n,r,o,0),s&2&&gr(e,e,n,r,o,1),s&4&&gr(e,e,n,r,o,2),s&8&&gr(e,e,n,r,o,3)}function gr(e,n,r,o,s,l){for(var h=(r+1)*(r+1),p,d=4*o,g=r+1,y,v=[{r:0,kz:0,b:0,a:0,next:null}],_=1,w=["r","g","b","a"][l],I=2*r+1,G,_t;_<I;_++)v[_]={r:0,kz:0,b:0,a:0,next:null},v[_-1].next=v[_];v[2*r].next=v[0];var _r=4*(o-1);for(p=0;p<s;p++){var _o=p*d,Ca=e[_o+l],_a=Ca*g*(r+2)/2;for(I=Ca*g,_=0;_<=r;_++)v[_][w]=Ca;var _l=0;for(_=1;_<=r;_++){var Qa=_<o?_o+4*_:_o+_r;Qa=e[Qa+l],_a+=Qa*(g-_),_l+=Qa,v[r+_][w]=Qa}Qa=v[0],G=v[g],_=_o,_t=4*g;var Kc=_o+_r;for(Ca=0;Ca<o;Ca++){n[_+l]=_a/h,_a-=I;var jc=Ca+g<o?_+_t:Kc;if(jc=e[jc+l],_l+=jc,_a+=_l,I-=Qa[w],I+=G[w],_l-=G[w],Qa[w]=jc,Qa=Qa.next,G=G.next,_+=4,!_a)for(;(y=4*(Ca+g))<d&&e[_o+l+y]===0;)Ca++,_+=4}}for(_o=(s-1)*d,Ca=0;Ca<o;Ca++){for(e=4*Ca,p=n[e+l],_a=p*g*(r+2)/2,I=p*g,_=0;_<=r;_++)v[_][w]=p;for(_l=0,_=1;_<=r;_++)Qa=_<s?e+_*d:e+_o,Qa=n[Qa+l],_a+=Qa*(r-_+1),_l+=Qa,v[r+_][w]=Qa;for(Qa=v[0],G=v[g],_=e,Kc=g*d,_r=e+_o,p=0;p<s;p++)if(n[_+l]=_a/h,_a-=I,jc=p+g<s?_+Kc:_r,jc=n[jc+l],_l+=jc,_a+=_l,I-=Qa[w],I+=G[w],_l-=G[w],Qa[w]=jc,Qa=Qa.next,G=G.next,_+=d,!_a)for(;(y=p+g)<s&&n[y*d+l+e]===0;)p++,_+=d}}function hr(e,n,r){this.WA=n=e>>n,this.yB=Math.log(n)*Math.LOG2E,this.Cc=e=document.createElement("CANVAS"),this.ty=e.getContext("2d"),this.uy=e.width=e.height=3*n;var o=document.createElement("canvas");e=r.Pu;var s=r.lD;n=[];var l;o.width=256,o.height=1,o=o.getContext("2d");for(h in s)s.hasOwnProperty(h)&&n.push({stop:parseFloat(h),value:s[h]});s=n.length,n.sort(this.kD),0<n[0].stop&&n.unshift({stop:0,value:n[0].value}),1>n[s-1].stop&&n.push({stop:1,value:n[s-1].value}),s=n.length;var h=o.createLinearGradient(0,0,256,0);for(l=0;l<s;l++){if(!e&&d){var p=d.stop+(n[l].stop-d.stop)/2;h.addColorStop(p,d.value),h.addColorStop(p,n[l].value)}h.addColorStop(n[l].stop,n[l].value);var d=n[l]}o.fillStyle=h,o.fillRect(0,0,256,1),this.By=o.getImageData(0,0,256,1).data,this.XA=r.Pu}hr.prototype.kD=function(e,n){return e.stop-n.stop},hr.prototype.Rx="#000",hr.prototype.fy="#080";function ir(e,n){this.canvas=e,this.size=n}function jr(e,n,r){this.bf=e=fc(e,0,30),this.Qa=n,this.pj=r,this.gs=[],this.di=[];do this.di[e]=[],this.gs[e]=new kr;while(e--);n===lr?(this.Ts=mr,this.normalize=nr):(this.Ts=or,this.normalize=pr),this.gk=1/0,this.Xm=-1/0}var qr=Math.log(.5);function nr(e){return this.ip?Math.round((e-this.gk)/this.ip*255):127}function pr(e){return this.bu===void 0?127:Math.round(255*Math.pow(e,this.bu))}jr.prototype.xc=function(e){var n,r,o=e.value;o===void 0&&(o=1),o>this.Xm&&(this.Xm=o,this.ip=this.Xm-this.gk),o<this.gk&&(this.gk=o,this.ip=this.Xm-this.gk);var s=yh.Re(e).scale(1073741823).floor();o=this.bf;var l=s.x>>30-o;for(s=s.y>>30-o,r=this.Ts;-1<o;){this.di[o][s]||(this.di[o][s]=[]),(n=this.di[o][s][l])||(n=this.di[o][s][l]=new r(l,s,o)),n.xc(e,o);var h=this.gs[o];h.zv>n.dd&&(h.zv=n.dd),h.Rh<n.dd&&(h.Rh=n.dd),h.yv>n.Ac&&(h.yv=n.Ac),h.Iq<n.Ac&&(h.Iq=n.Ac),o--,l>>=1,s>>=1}};function rr(e,n,r,o,s){var l=1<<n,h,p;return o=ec(o,l),l=0<=r&&r<l&&(h=e.di[n])&&(p=h[r])&&(l=p[o])||null,!l&&s&&0<=n&&(l=rr(e,n-1,r>>1,o>>1,s)),l}function sr(e,n,r,o,s,l){for(var h,p=[];r<=o;r++)for(h=s;h<=l;h++)p.push(rr(e,n,r,h,!1));return p}function tr(e,n){var r=0,o=0,s=rr(e,0,0,0,!1),l;return n.fm||(n.z===e.bf?n.Bj=n.Ac:(ur(e,n,function(h){var p=vr(e,h),d=4-p.length;if(h.z!==e.bf){for(l=0;l<p.length;l++)r+=p[l].Ac,o++;r+=d*s.Ac,o+=d}}),n.Bj=r/o),n.fm=!0),n.Bj}function ur(e,n,r){n=[n];for(var o,s;0<n.length;)s=n.shift(),o=vr(e,s),r(s),n.push.apply(n,o)}function vr(e,n){var r=[],o,s,l;for(s=0;1>=s;s++)for(l=0;1>=l;l++)(o=rr(e,n.z+1,2*n.x+s,2*n.y+l,!1))&&r.push(o);return r}jr.prototype.clear=function(){jr.call(this,this.bf,this.Qa,this.pj)};function or(e,n,r){this.x=e,this.y=n,this.z=r,this.Ac=this.dd=this.count=0,this.fm=!1,this.Bj=0}or.prototype.xc=function(e,n){this.count++,this.dd+=e.value||1,this.Ac=this.dd/Math.pow(2,2*(30-n))};function mr(e,n,r){this.x=e,this.y=n,this.z=r,this.Ac=this.dd=this.count=0,this.fm=!1,this.Bj=0}mr.prototype.xc=function(e){e=e.value,this.dd+=e!==void 0?e:1,this.Ac=this.dd/++this.count,this.fm=!1};function kr(){this.zv=this.yv=1/0,this.Rh=this.Iq=-1/0}function wr(e,n){var r,o=0;if(!ya(e)||Sa(e))throw new D(wr,0,e);for(r in e){var s=+r;if(o++,!(ob(s)&&0<=s&&1>=s&&lb(e[r])))throw new D(wr,0,e)}if(2>o)throw new D(wr,0,"Specify at least 2 stops");this.lD=e,this.Pu=!!n}t("H.data.heatmap.Colors",wr);var xr=new wr({0:"#008","0.2":"#0b0","0.5":"#ff0","0.7":"#f00"},!0);wr.DEFAULT=xr;function yr(e){var n=e||{},r=+n.sampleDepth,o=n.pointSize;e=+n.coarseness;var s=n.colors,l={min:n.min,max:n.max,engineType:n.engineType},h=n.tileSize,p=+n.dataMax;if(n.tileSize&&(l.tileSize=h),R.call(this,l),this.Eg(n.opacity),this.Qa=n.type==="value"?lr:zr,this.sampleDepth_=ob(r)?fc(Math.round(r),1,8):4,this.Jw=this.Qa===zr?ob(o)?fc(Math.round(7-o),0,6):2:1,this.et=!!n.assumeValues,n=this.max,this.pj=ob(p)?fc(Math.round(p),this.min,n+this.sampleDepth_):n,e=ob(e)?fc(Math.round(e),0,3):1,s&&!C(s,wr))throw new D(yr,0,"colors");this.Ci=new jr(n+this.sampleDepth_+this.Jw,this.Qa,this.pj),this.rD=new hr(this.tileSize,e,s||xr),this.rg=A(this.rg,this),this.kg=A(this.kg,this),this.Mn=new fk(20,this.rg)}u(yr,R),t("H.data.heatmap.Provider",yr),yr.prototype.Ed=function(e){this.Eg(e)},yr.prototype.setOpacity=yr.prototype.Ed,yr.prototype.Ue=function(){return this.Qc},yr.prototype.getOpacity=yr.prototype.Ue,yr.prototype.zk=ie,yr.prototype.providesRasters=yr.prototype.zk,yr.prototype.s=function(e,n,r,o,s){var l=this.et,h,p;if(rr(this.Ci,0,0,0,!1)){if(!l){var d=sr(this.Ci,r,n-1,n+1,e-1,e+1);for(h=d.length;h--&&!l;)if(d[h]!==null){l=!0;break}}l&&(p=this.Mn.push([e,n,r,o,s],this.kg))}return l||o(null),p||ij},yr.prototype.requestInternal=yr.prototype.s,yr.prototype.rg=function(e,n){var r=e.done,o=n[0],s=n[1],l=n[2];n=document.createElement("canvas");var h=this.tileSize,p=n.getContext("2d");n.width=n.height=h;var d=this.rD,g=this.Ci,y=this.et,v=this.Qa,_=this.Jw,w=d.WA,I=d.ty,G,_t,_r=v===zr?_===void 0?2:_:1;_=_r,_r=Math.min(this.sampleDepth_+_r,d.yB);var _o=d.uy,Ca=g.bf;if(y&&v===lr){for(_t=-1;1>=_t;_t++)for(y=-1;1>=y;y++){var _a=(_a=rr(g,l,s+_t,o+y,!0))?g.normalize(tr(g,_a)):128;I.fillStyle="rgba("+_a+",128,0,1)",I.fillRect((y+1)*w,(_t+1)*w,w,w)}y=w-Math.floor(w/10),_t=3,_a=I.getImageData(0,0,_o,_o),fr(_a.data,y,_o,_o,_t),I.putImageData(_a,0,0)}else I.fillStyle=y?d.fy:d.Rx,I.fillRect(0,0,_o,_o);for(;_<=_r&&l+_<=Ca;_++){y=w>>_,_t=w-y;var _l=v===zr?127+Math.floor(128/(1<<_r-_)):255;_a=(1<<_)+2;var Qa=1<<_,Kc=o<<_,jc=s<<_;for(Qa=sr(g,l+_,jc-1,jc+Qa,Kc-1,Kc+Qa),Kc=Qa.length;Kc--;){jc=Kc%_a;var _h=Kc/_a<<0;(G=Qa[Kc])&&(G=g.normalize(G.Ac),I.fillStyle="rgba("+G+","+_l+",0,1)",I.fillRect(jc*y+_t,_h*y+_t,y,y))}_a=I,_l=y,Qa=_t,Kc=w+2*y,y=w+2*y,jc=jc=3,_h=I.getImageData(Qa,_t,Kc,y),fr(_h.data,_l,Kc,y,jc),_a.putImageData(_h,Qa,_t)}for(o=I.getImageData(0,0,_o,_o),s=d.By,l=d.XA,g=o.data,_r=0,_o=g.length;_r<_o;_r+=4)v=g[_r],_=g[_r+1],s.length===4&&(v=0),g[_r]=s[4*v],g[_r+1]=s[4*v+1],g[_r+2]=s[4*v+2],g[_r+3]=s[4*v+3]*(l?_/255:10>_?0:1);I.putImageData(o,0,0),d=new ir(d.Cc,w),w=d.size,p.drawImage(d.canvas,w,w,w,w,0,0,h,h),r.call(e,n)},yr.prototype.kg=function(e,n,r){var o=e.data;e=o[3],o=o[4],r?o():e(n)},yr.prototype.Zs=function(e,n){var r;if(!kb(e))throw new D(this.Zs,0,e);if(r=e.length){for(;r--;)this.Ci.xc(e[r]);e=this.Ci;var o;r=e.gs;var s=e.bf,l=0;if(e.Qa===zr){var h=r[e.bf].Rh;for(o=e.bf;0<=o&&r[o].Rh===h;o--)l=o;for(h=r[0].Rh,o=0;o<=l&&h===r[o].Rh;o++)s=o;l>e.pj&&(l=e.pj),h=Math.round(s+(l-s)/2),e.bu=qr/Math.log(r[h].Iq)}this.reload(!!n)}},yr.prototype.addData=yr.prototype.Zs,yr.prototype.clear=function(){this.Ci.clear(),this.reload(!0)},yr.prototype.clear=yr.prototype.clear;var zr=0,lr=1;function Ar(){}t("H.data.utils.Dom",Ar),Ar.prototype.sh=function(e){return!!e&&/^\s*(1|true)\s*$/i.test(this.Ua(e))},Ar.prototype.getBoolean=Ar.prototype.sh,Ar.prototype.Ua=function(e){var n;try{if(e.nodeType===Node.ATTRIBUTE_NODE)return e.value;var r="",o=0,s=e.childNodes;for(n=s.length;o<n;o++)s[o].nodeType!==Node.COMMENT_NODE&&(r+=s[o].nodeValue.replace(/^\s+|\s+$/g,""))}catch{}return r||""},Ar.prototype.getString=Ar.prototype.Ua,Ar.prototype.mm=function(e){return parseFloat(this.Ua(e))||0},Ar.prototype.getFloat=Ar.prototype.mm,Ar.prototype.$v=function(e){var n=e.split(/\s+/),r=n.length,o=!(n&&r==1),s=o?1:3,l=[],h;for(o||(n=e.split(","),r=n.length),h=0;h<r;h+=s)if(e=this.fr(o?n[h]:h+3>n.length?null:n.slice(h,h+3)))l.push(e);else return[];return l},Ar.prototype.parseCoords=Ar.prototype.$v,Ar.prototype.fr=function(e){if(!e)return null;var n=e instanceof Array&&0<e.length&&4>e.length?e:e.split(",");e=parseFloat(n[0]);var r=parseFloat(n[1]);return n=parseFloat(n[2]),isNaN(r)||isNaN(e)?null:new ze(r,e,isNaN(n)?void 0:n)},Ar.prototype.parseCoord=Ar.prototype.fr,Ar.prototype.km=function(e){return e=this.Ua(e),/^[0-9a-fA-F]{8}$/.test(e)?"#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2):"#000000ff"},Ar.prototype.getColor=Ar.prototype.km;function Br(e){e=e.childNodes;for(var n,r=e.length,o=new Ar;r--;)if(n=e[r],n.nodeName==="coordinates"){n=o.Ua(n);var s=[],l=new Ar;try{s=l.$v(n)}catch{s=[]}this.Tl=2>s.length?[]:s}}t("H.data.kml.Line",Br),Br.prototype.vh=function(){for(var e=new K,n=this.Tl?this.Tl.length:0;n--;)e.sg(this.Tl[n]);return e};function Cr(){}Cr.prototype.elevation=0,Cr.prototype.Ut=0;function Dr(e){var n=e.childNodes,r=n.length;for(this.Tt=new K,this.Ou=[];r--;){var o=n[r],s=o.nodeName;if(s==="outerBoundaryIs"||s==="innerBoundaryIs"){var l=o.childNodes;for(o=l.length;o--;){var h=l[o];if(h.nodeName==="LinearRing"){var p=new Br(h);if(s==="outerBoundaryIs"){this.Tt=p.vh();var d=void 0,g=e,y=p.Tl;p=new Ar;var v=g.querySelector("altitudeMode");if(v&&v.parentNode===g&&!/^\s*clampTo/.test(p.Ua(v))&&y){v=y.length;for(var _=0;_<v&&d!==0;_++){var w=y[_].alt;w?d?w!==d&&(d=0):d=w:d=0}(y=g.querySelector("*|altitudeOffset"))&&y.parentNode===h&&y.namespaceURI==="http://www.google.com/kml/ext/2.2"&&(h=p.mm(y))&&(d+=h),d&&(d=Db(2047,d),(h=g.querySelector("extrude"))&&h.parentNode===g&&p.sh(h)?this.Ut=d:this.elevation=d)}}else this.Ou.push(p.vh())}}}}}u(Dr,Cr),t("H.data.kml.Polygon",Dr);function Er(){this.VA={4:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),"ff"].join("")},5:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),e.charAt(4),e.charAt(4)].join("")},7:function(e){return e+"ff"},9:function(e){return e}},this.QC={4:function(e){return[Fr(e.charAt(1)),Fr(e.charAt(2)),Fr(e.charAt(3)),255]},5:function(e){return[Fr(e.charAt(1)),Fr(e.charAt(2)),Fr(e.charAt(3)),Fr(e.charAt(4))]},7:function(e){return e=parseInt(e.substring(1),16),[e>>16&255,e>>8&255,e&255,255]},9:function(e){return e=parseInt(e.substring(1),16),[e>>24&255,e>>16&255,e>>8&255,e&255]}}}t("H.data.utils.ColorHelper",Er);function Fr(e){return e=parseInt(e,16),(e<<4)+e}function Gr(e){return 16>e?"0"+Math.round(e).toString(16):Math.round(e).toString(16)}function Hr(e,n,r){return/^(#|rgb).*/.test(n)?(r||(r="",n.charAt(0)==="#"?r=e.VA[n.length]?n:"":n.substr(0,3)==="rgb"&&(n=n.match(/\d+(\.\d+)?/g),r=n.length,r=2<r&&5>r?["#",Gr(+n[0]),Gr(+n[1]),Gr(+n[2]),3<r?Gr(255*+n[3]):"ff"].join(""):""),n=r),e=e.QC[n.length](n),e[3]=Math.round(e[3]/255*100)/100,e):[0,0,0,255]}Er.prototype.ux=function(e,n){var r="";if(!/^(#|rgb).*/.test(e)){for(r="",e=0;6>e;e++)r+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return r+"ff"}for(e=Hr(this,e,n),n=0;4>n;n++)r+=""+Gr(3>n?Math.floor(Math.random()*(e[n]-0+1))+0:255*e[n]);return r},Er.prototype.toRandomRGBA=Er.prototype.ux;function Ir(e){e=e.childNodes;for(var n,r=e.length,o=null,s=new Ar;r--;)n=e[r],n.nodeName==="coordinates"&&(o=s.Ua(n));this.jv=null,o&&(this.jv=s.fr(o)||null)}t("H.data.kml.Point",Ir),Ir.prototype.vh=function(){return this.jv};function Jr(e){e=e.childNodes;for(var n,r=e.length,o=new Ar,s=new Er;r--;)switch(n=e[r],n.nodeName){case"color":this.color=o.km(n);break;case"colorMode":this.Ay=o.Ua(n)}this.Ay==="random"&&(this.color="#"+s.ux(this.color,!1))}t("H.data.kml.ColorStyle",Jr);function Kr(e){var n=e.childNodes,r=n.length,o=new Ar;for(this.Ml=new Jr(e);r--;)e=n[r],e.nodeName==="width"&&(this.width=o.mm(e))}t("H.data.kml.LineStyle",Kr);function Lr(e){e=e.childNodes;for(var n,r=e.length,o=new Ar;r--;)switch(n=e[r],n.nodeName){case"bgColor":this.bgColor=o.km(n);break;case"textColor":this.textColor=o.km(n);break;case"text":this.text=o.Ua(n);break;case"displayMode":this.displayMode=o.Ua(n)}}t("H.data.kml.BalloonStyle",Lr);function Mr(e){e=e.attributes;for(var n,r=e.length;r--;)switch(n=e[r],n.name){case"x":this.x=parseFloat(n.value);break;case"y":this.y=parseFloat(n.value);break;case"xunits":this.Ye=Ar.prototype.Ua(n)==="fraction";break;case"yunits":this.Zd=Ar.prototype.Ua(n)==="fraction"}}t("H.data.kml.HotSpot",Mr);function Nr(e){var n=e.childNodes,r=new Ar;for(this.offsetX=this.offsetY=0,e=n.length;e--;){var o=n[e];switch(o.nodeName){case"href":this.href=r.Ua(o)}}}t("H.data.kml.Icon",Nr);function Or(e){var n;if(e){e=e.childNodes;var r=e.length;for(n=new Ar;r--;){var o=e[r];switch(o.nodeName){case"scale":this.scale=n.mm(o);break;case"Icon":this.icon=o=new Nr(o);break;case"hotSpot":this.Fu=o=new Mr(o)}}}}t("H.data.kml.IconStyle",Or);function Pr(e){var n=e.childNodes,r=n.length,o=new Ar;for(this.outline=this.fill=!0,this.Ml=new Jr(e);r--;)switch(e=n[r],e.nodeName){case"fill":this.fill=o.sh(e);break;case"outline":this.outline=o.sh(e)}}t("H.data.kml.PolyStyle",Pr);function Qr(e){var n=e.childNodes,r=n.length;for(this.id=e.getAttribute("id");r--;)switch(e=n[r],e.nodeName){case"IconStyle":this.Hu=e=new Or(e);break;case"LineStyle":this.Oh=e=new Kr(e);break;case"PolyStyle":this.gw=e=new Pr(e);break;case"BalloonStyle":this.Dl=e=new Lr(e)}}t("H.data.kml.Style",Qr);function Rr(e,n){var r=e&&e.childNodes||[],o=new Ar;if(!e||!n)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.qC=e,e=r.length;e--;){var s=r[e];switch(s.nodeName){case"name":this.name=o.Ua(s);break;case"description":this.description=o.Ua(s);break;case"visibility":this.visibility=o.sh(s);break;case"open":this.open=o.sh(s);break;case"styleUrl":(this.bl=o.Ua(s))&&(s=this.bl.substr(1),this.ez=n.Rp(s,!1));break;case"Style":this.nv=s=new Qr(s)}}}t("H.data.kml.Feature",Rr);function Sr(e,n){var r=document.createElement("CANVAS");r.width=1,r.height=1,this.hs=e,this.eq={},this.hr={},this.Zy=new Ll(r),this.kd=n||""}Sr.prototype.create=function(e){return this.oh=new Rr(e,this.hs),Tr(this,e)};function Tr(e,n,r){n=n.childNodes;for(var o=n.length,s,l={},h;o--;){var p=n[o];switch(p.nodeName){case"Point":p=new Ir(p),h=Ur(e,"Marker"),(p=p.vh())&&(s=new Mm(p,h),h.gr&&Qc(h.gr,"statechange",A(e.cC,e,h.gr,s,h),!1));break;case"LineString":p=new Br(p),h=Ur(e,"Polyline"),s=new Jg(p.vh(),h);break;case"LinearRing":p=new Br(p),h=Ur(e,"Polyline"),s=new Jg(p.vh(),h);break;case"Polygon":p=new Dr(p),h=Ur(e,"Polygon"),h.elevation=p.elevation,h.extrusion=p.Ut,s=new Ol(new M(p.Tt,p.Ou),h);break;case"MultiGeometry":s=Tr(e,p,new T)}s&&(e.oh.name&&(l.name=e.oh.name),e.oh.description&&(l.description=e.oh.description),h&&h.Dl&&(l.balloonStyle=h.Dl),l.kmlNode=e.oh.qC,s.setData(l),r&&r.Y(s))}return r||s}Sr.prototype.cC=function(e,n,r){var o=r.anchor,s=r.scale;r=s+"_"+o.x+o.y+o.Ye+o.Zd+"_"+r.href;var l={};if(e.getState()===1){var h=this.eq[r];if(!h){var p=o.x,d=o.y;(h=e.mc())&&(h={w:h.w*s,h:h.h*s},l.size=h),p=o.Ye&&h?h.w*p:p*s,d=o.Zd&&h?h.h*(1-d):!o.Zd&&h?h.h-d*s:d*s,l.anchor={x:p,y:d},h=new Ll(e.Se(),l),this.eq[r]=h}n.ve(h)}delete this.hr[r]};function Ur(e,n){var r=e.oh,o={visibility:r.visibility},s=new Er,l=1,h={x:0,y:0,Ye:!1,Zd:!1},p=Vr(e,r.ez);switch(r.nv&&(p=Vr(e,r.nv,p)),n){case"Marker":if(p&&p.Hu){if(s=p.Hu,s.scale&&(l=s.scale),s.Fu){var d=s.Fu;h={x:d.x,y:d.y,Ye:d.Ye,Zd:d.Zd}}s.icon&&s.icon.href?(n=s.icon.href,Wr.test(n)||(n=e.kd+n),s=l+"_"+h.x+h.y+h.Ye+h.Zd+"_"+n,d=e.eq[s]||e.hr[s],d||(d=new Ll(n),e.hr[s]=d),d.getState()===0?(o.icon=e.Zy,o.gr=d,o.href=n,o.anchor=h,o.scale=l):d.getState()===1&&(o.icon=d)):l!==1&&(d||(h={x:14,y:4,Ye:!1,Zd:!1}),s=Ll,e=e.Dp(),d={w:28*l,h:36*l},l={size:new th(d.w,d.h),anchor:new L(h.Ye?d.w*h.x:h.x*l,h.Zd?d.h*(1-h.y):d.h-h.y*l),hitArea:new el(fl.POLYGON,[0*l,16*l,0*l,7*l,8*l,0*l,18*l,0*l,26*l,7*l,26*l,16*l,18*l,34*l,8*l,34*l])},o.icon=new s(e,l))}break;case"Polyline":o.style={},p&&p.Oh&&(l=p.Oh,o.style.strokeColor="rgba("+Hr(s,l.Ml.color,!0)+")",0<=l.width&&(o.style.lineWidth=l.width));break;case"Polygon":o.style={},p&&(p.Oh&&(l=p.Oh,o.style.strokeColor="rgba("+Hr(s,l.Ml.color,!0)+")",0<=l.width&&(o.style.lineWidth=l.width)),p.gw&&(l=p.gw,o.style.fillColor=l.fill?"rgba("+Hr(s,l.Ml.color,!0)+")":"rgba(0,0,0,0)",l.outline||(o.style.lineWidth=0)))}return o.Dl=p.Dl,o}function Vr(e,n,r){r=r||{};for(var o in n)n.hasOwnProperty(o)&&(r[o]=typeof n[o]=="object"?Vr(e,n[o],r[o]):n[o]);return r}var Wr=/^[^:\/]+:/;Sr.prototype.Dp=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>'};function Xr(e,n){e=e.childNodes;var r=e.length,o=new Ar;for(this.nD=n;r--;)switch(n=e[r],n.nodeName){case"key":this.key=o.Ua(n);break;case"styleUrl":this.bl=o.Ua(n)}}t("H.data.kml.Pair",Xr),Xr.prototype.J=function(){if(this.bl){var e=this.key==="highlight";e=this.nD.Rp(this.bl.substr(1),e)}return e},Xr.prototype.getStyle=Xr.prototype.J;function Yr(e,n){var r=e.childNodes,o=r.length;for(this.hs=n,this.id=e.getAttribute("id"),this.un=[];o--;)e=r[o],e.nodeName==="Pair"&&(e=new Xr(e,this.hs),this.un.push(e))}t("H.data.kml.StyleMap",Yr),Yr.prototype.J=function(e){var n=null;e=e?"highlight":"normal";for(var r=this.un.length;r--;)this.un[r].key===e&&(n=this.un[r].J());return n},Yr.prototype.getStyle=Yr.prototype.J;function Zr(){this.ix={}}t("H.data.kml.StyleContainer",Zr),Zr.prototype.Ao=function(e){e&&e.id&&(this.ix["style_"+e.id]=e)},Zr.prototype.addStyle=Zr.prototype.Ao,Zr.prototype.Rp=function(e,n){return e=this.ix["style_"+e],e instanceof Yr&&(e=e.J(n)),e},Zr.prototype.getStyleById=Zr.prototype.Rp;function $r(e){var n=e?e.lastIndexOf("/"):-1;this.Ak=[],Xq.call(this,e),0<=n&&(this.gB=e.substr(0,n)+"/")}u($r,Xq),t("H.data.kml.Reader",$r),$r.prototype.mj=function(e){var n,r=null;if(lb(e)&&e.trim()!=""){try{var o=new DOMParser().parseFromString(e,"text/xml")}catch{this.F(Yq.ERROR,z,"Error parsing KML document");return}if(o.getElementsByTagName("parsererror").length)this.F(Yq.ERROR,z,"Error parsing KML document");else if((e=o.childNodes&&o.childNodes[0].nodeName==="kml"?o.childNodes[0]:void 0)&&(n=as(e.childNodes,"Document")[0]),n=n||e){o=new Zr;for(var s=as(n.childNodes,"Style"),l=as(n.childNodes,"StyleMap"),h=s.length;h--;)e=new Qr(s[h]),o.Ao(e);for(h=l.length;h--;)e=new Yr(l[h],o),o.Ao(e);for(this.NB=new Sr(o,this.gB),e=n.childNodes,n=e.length;n--;)s=e[n],o=r,s.nodeName==="Placemark"?(s=this.NB.create(s))&&this.Rg(s,o):s.nodeName==="Folder"&&(s={group:new T,node:s},this.Rg(s.group,o),this.Ak.push(s)),!n&&(o=this.Ak.shift())&&(e=o.node.childNodes,r=o.group,n=e.length);this.F(Yq.READY)}else this.F(Yq.ERROR,z,"Invalid KML document")}else this.F(Yq.ERROR,z,"Unable to create objects from the empty data")},$r.prototype.Rg=function(e,n){n?n.Y(e):(this.ae&&this.ae.rd().Y(e),this.hj.push(e),this.F(Yq.VISIT,e))};function as(e,n){for(var r=e.length,o,s=[];r--;)o=e[r],o.nodeName===n&&s.push(o);return s}t("H.data.buildInfo",function(){return Lm("H-data","1.56.0","2eb8e90",{region:"row"})}),Ke.prototype.ze=da(1,function(e,n){this.root.ze(e,ob(n)?n:this.Qh)}),Oe.prototype.ze=da(0,function(e,n){var r=0,o;if(!e(this)&&n--)for(;3>=r;r++)(o=this[r])&&o.ze(e,n)});function bs(e,n){this.ir=e,this.de=n}t("H.clustering.grid.NoisePoint",bs),bs.prototype.xa=function(){return Be(this.ir)},bs.prototype.getPosition=bs.prototype.xa,bs.prototype.Wd=function(){return this.ir.wt},bs.prototype.getWeight=bs.prototype.Wd,bs.prototype.Yf=je,bs.prototype.isCluster=bs.prototype.Yf,bs.prototype.Sd=function(){return this.de},bs.prototype.getMinZoom=bs.prototype.Sd,bs.prototype.getData=function(){return this.ir.data},bs.prototype.getData=bs.prototype.getData;function cs(e,n,r){this.Jq=this.de=r,this.jr=[],this.us=0,this.I=Ge(e,n,!0)}t("H.clustering.grid.Cluster",cs),cs.prototype.Qi=function(e){this.Sc||(this.Sc=Be(e)),this.us+=e.wt||1,this.jr.push(e)},cs.prototype.xa=function(){return this.Sc},cs.prototype.getPosition=cs.prototype.xa,cs.prototype.Wd=function(){return this.us},cs.prototype.getWeight=cs.prototype.Wd,cs.prototype.Yf=ie,cs.prototype.isCluster=cs.prototype.Yf,cs.prototype.Sd=function(){return this.de},cs.prototype.getMinZoom=cs.prototype.Sd,cs.prototype.om=function(){return this.Jq},cs.prototype.getMaxZoom=cs.prototype.om,cs.prototype.C=function(){return this.I},cs.prototype.getBoundingBox=cs.prototype.C,cs.prototype.vp=function(e){this.Aj(e)},cs.prototype.forEachEntry=cs.prototype.vp,cs.prototype.Aj=function(e){var n=this;if(!db(e))throw new D(this.Aj,0,e);this.jr.forEach(function(r){e(new bs(r,n.de+1))})},cs.prototype.forEachDataPoint=cs.prototype.Aj;function ds(e){Fc.call(this),this.fc=[];var n;e?Wa(n={},es,e):n=es,this.options=n,Fc.call(this)}u(ds,Fc);var fs={clusters:[],noisePoints:[]},es={projection:yh,min:0,max:22,eps:32,minWeight:2};m=ds.prototype,m.ue=function(e){this.fc=e,this.od=!0},m.xc=function(e){this.fc.push(e),this.od=!0},m.Al=function(e){this.fc=this.fc.concat(e),this.od=!0},m.Dk=function(e){this.fc=this.fc.filter(function(n){return n!==e}),this.od=!0},m.disposeInternal=function(){ds.g.disposeInternal.call(this),delete this.fc},ds.prototype.disposeInternal=ds.prototype.disposeInternal,ds.prototype.Ow=ke;function gs(e){ds.call(this,e)}u(gs,ds),gs.prototype.es=function(e){var n=this.options,r=n.min,o=n.max,s=[],l=[],h;if(this.od){for(h=this.fc;r<=o;r++){for(var p,d=void 0,g,y,v,_,w,I,G,_t=r,_r=h,_o=s,Ca=l,_a=n.eps,_l=n.projection,Qa=n.minWeight,Kc=_r.length,jc=Math.pow(2,_t+8),_h=[];G=_r[--Kc];)if(!G.Bs){for(y=_l.Re(G).scale(jc).floor(),I=jc,w=y.x,_=y.y,g=_h.length;g--;)p=_h[g],v=p.xa(),p.zs||(p.zs=_l.Re(v).scale(jc).floor()),v=p.zs,v=v.kb(y),v<I&&(I=v,d=p);d&&d.C().Ff(G)||(d=new cs(_l.wn({x:(w-_a)/jc,y:(_-_a)/jc}),_l.wn({x:(w+_a)/jc,y:(_+_a)/jc}),_t),_h.push(d)),d.Qi(G),d=null}for(Kc=_h.length;Kc--;)if(p=_h[Kc],g=p.Wd(),g<Qa)for(p=p.jr,g=p.length;G=p[--g];)Ca.push(new bs(G,_t)),G.Bs=!0;else _o.push(p)}for(r=0,o=h.length;r<o;r++)delete h[r].Bs;this.od=!1,e({clusters:s,noisePoints:l})}};function hs(e){this.na=e,this.py=11,e=document.createElement("canvas");var n=e.getContext("2d"),r=this.na,o=14*r;e.width=o,e.height=o,n.scale(r,r),n.beginPath(),n.strokeStyle="#FFFFFF",n.fillStyle="#1080DD",n.arc(7,7,6,0,2*Math.PI,!1),n.fill(),n.lineWidth=1,n.stroke(),this.LB=new Ll(e,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.ot={},this.pt={}}t("H.clustering.theme.Circular",hs);function is(e,n,r){var o,s=document.createElement("canvas"),l=s.getContext("2d"),h=e.na,p=n*h;return s.width=p,s.height=p,l.scale(h,h),h=n+":"+r,(o=e.ot[h])?l.putImageData(o,0,0):(n/=2,l.beginPath(),l.strokeStyle="rgba("+r+",0.2)",l.fillStyle="rgba("+r+",1)",l.arc(n,n,n/5*3,0,2*Math.PI,!1),l.fill(),l.lineWidth=n/5*4,l.stroke(),e.ot[h]=l.getImageData(0,0,p,p)),s}hs.prototype.xz=function(e){var n=e.Wd(),r=this.pt[n];if(!r){if(10>n){r=is(this,28,"118,209,0");var o={x:11,y:18}}else 25>n?(r=is(this,38,"255,105,0"),o={x:13,y:23}):50>n?(r=is(this,38,"240,60,0"),o={x:13,y:23}):100>n?(r=is(this,38,"181,0,21"),o={x:13,y:23}):1e3>n?(r=is(this,48,"181,0,21"),o={x:15,y:28}):(r=is(this,66,"181,0,21"),o={x:20,y:38});var s=r.getContext("2d");s.fillStyle="#FFFFFF",s.font="bold "+this.py+"px Arial",s.fillText(String(n),o.x,o.y),o=r.width/this.na,r=new Ll(r,{size:{w:o,h:o},anchor:{x:o/2,y:o/2}}),this.pt[n]=r}return n=new Mm(e.xa(),{icon:r,min:e.Sd(),max:e.om()}),n.setData(e),n},hs.prototype.getClusterPresentation=hs.prototype.xz,hs.prototype.iA=function(e){var n=new Mm(e.xa(),{icon:this.LB,min:e.Sd()});return n.setData(e),n},hs.prototype.getNoisePresentation=hs.prototype.iA;function js(e){if(ds.call(this,e),e=this.options,e.projection!==yh)throw new D(js,0,"Other projection than mercator not supported yet");this.le=e.projection,this.lp=e.eps,this.GB=e.minWeight,this.dw=new zh(this.le),new Xm().registerProcessor("cluster","H.clustering.dynamicgrid.worker"),this.gg=A(this.gg,this),this.Pq=A(this.Pq,this)}u(js,ds),js.prototype.Ow=function(e,n){this.Jy=e,this.Ky=Gb(n)},js.prototype.es=function(e,n){var r=this.Lg,o=this.Jy,s=this.Ky||0,l=!r||!(r.zoom===s&&r.Ti.da(o));if(o&&(this.od||l)){if(r&&3>r.state&&r.cancel(),this.od=!1,r=this.lp,r>=128*Lb(2,s))var h=ks;else{l=this.dw,l.Va(s);var p=l.Gb(o.Lc());h=l.Gb(o.Jc()),p.y-=r,h.y+=r,p=l.sk(p);var d=l.sk(h);h=new J(p.lat,p.lng,d.lat,d.lng),r=l.Za(r,0).lng+180,h=h.ce(p.lat,p.lng-r,d.lat,p.lng).ce(p.lat,d.lng,d.lat,d.lng+r)}for(r=h,p=this.fc,h=[],l=p.length;l--;)r.Ff(p[l])&&h.push(p[l]);0<h.length?(this.Lg=new ls(o,s,h,this.lp,this.GB,this.le!==yh,e,n),this.Lg.then(this.gg,this.Pq)):e(fs)}},js.prototype.gg=function(e){Ba(e)||(e=new x.Uint32Array(e));for(var n=this.Lg,r=n.dC,o=0,s=e[o++],l=Array(s),h=0,p=[],d=e.length,g=this.Lg.My,y=this.Lg.zoom;s--;)l[h++]=new bs(g[e[o++]],y);for(;o<d;){s=e[o++],h=g[e[o]];var v=this.dw,_=this.lp;v.Va(this.Lg.zoom);var w=v.Gb(h);for(h=v.Za(w.x-_,w.y-_),v=v.Za(w.x+_,w.y+_),h=new J(h.lat,h.lng,v.lat,v.lng),h=new cs(h.Lc(),h.Jc(),y);s--;)h.Qi(g[e[o++]]);p.push(h)}r.call(n,{clusters:p,noisePoints:l})},js.prototype.Pq=function(e){lb(e)&&this.Lg.UB(e)};var ks=new J(90,-180,-90,180);js.prototype.disposeInternal=function(){js.g.disposeInternal.call(this)},js.prototype.disposeInternal=js.prototype.disposeInternal;function ls(e,n,r,o,s,l,h,p){this.Ti=e,this.zoom=n,this.My=r,this.dC=h,this.UB=p,e=r.length,h=3*e,p=new(x.Float64Array||Array)(h);for(var d;e--;)d=r[e],p[--h]=d.lat,p[--h]=d.lng,p[--h]=d.wt;Qd.call(this,"cluster",{message:[p,o,s,n,l]},void 0)}u(ls,Zm);function ms(e,n,r){this.pa=e,this.dm=n,this.de=r}t("H.clustering.fastgrid.NoisePoint",ms),ms.prototype.xa=function(){return this.Sc||(this.Sc=this.pa.Za(this.dm[1],this.dm[0],1)),this.Sc},ms.prototype.getPosition=ms.prototype.xa,ms.prototype.Wd=function(){return this.dm.weight},ms.prototype.getWeight=ms.prototype.Wd,ms.prototype.Yf=je,ms.prototype.isCluster=ms.prototype.Yf,ms.prototype.Sd=function(){return this.de-this.pa.hh},ms.prototype.getMinZoom=ms.prototype.Sd,ms.prototype.getData=function(){return this.dm.data},ms.prototype.getData=ms.prototype.getData;function ns(e,n,r,o,s,l){this.Co=n,e&&(this.parent=e,n&1?(r=e[8],s=e[5]):(r=e[7],s=e[8]),n&2?(o=e[9],l=e[6]):(o=e[4],l=e[9])),this[7]=r,this[5]=s,this[8]=(r+s)/2,this[4]=o,this[6]=l,this[9]=(o+l)/2}m=ns.prototype,m.hb=0,m.th=function(e){return this[e]||(++this.hb,this[e]=new ns(this,e))},m.removeChild=function(e){var n=e.Co;this[n]===e&&(delete this[n],delete e.parent,--this.hb)},m.ze=function(e,n){for(var r=0,o=this;o=o.parent;)++r;os(this,e,n,r)};function os(e,n,r,o){var s,l;if(!n(e,o)&&r--)for(++o,s=0;4>s;s++)(l=e[s])&&os(l,n,r,o)}m.Qg=function(e){(this.entries||(this.entries=[])).push(e)},m.ej=0,m.fj=0,m.Ec=0;function ps(e){this.Qh=e||10,this.Ck=this.Bk=this.$i=this.Zi=2147483648,this.Em()}m=ps.prototype,m.Em=function(){this.head=this.root=new ns(null,NaN,this.Zi-this.Bk,this.$i-this.Ck,this.Zi+this.Bk,this.$i+this.Ck)},m.Ll=function(){qs(this,this.root),this.Em()};function qs(e,n){var r,o;for(r=0;4>r;r++)(o=n[r])&&(qs(e,o),delete n[r]);delete n.parent,delete n.entries}m.jd=function(e){var n=this.head,r;if(e){var o=e;if(o!==n)for(n=o;o=o.parent;)(o.entries||1<o.hb)&&(n=o)}else for(;!n.entries&&2>(r=n.hb)&&r;)n=o;this.head=n},m.Yd=function(e,n,r,o){var s=this.root;if(!(e>=s[7]&&n>=s[4]&&e<=s[5]&&n<=s[6]))throw Error("Coordinates out of bounds");return this.Vb(this.root,e,n,r,this.Qh,o)},m.Vb=function(e,n,r,o,s,l){var h=e.entries;return s?e.hb?h=this.Sj(e,n,r,o,s,l):h?(h=h[0],h=e.th(+(h[1]>=e[8])|+(h[0]>=e[9])<<1),h.entries=e.entries,h.ej=e.ej,h.fj=e.fj,h.Ec=e.Ec,h.dh=e.dh,h.dj=e.dj,h.bj=e.bj,h.cj=e.cj,delete e.entries,this.jd(h),h=this.Sj(e,n,r,o,s,l)):(e.Qg(h=new rs(n,r,o,l)),this.jd(e)):(h||this.jd(e),e.Qg(h=new rs(n,r,o,l))),e.ej+=n*o,e.fj+=r*o,e.Ec+=o,e.dh===B?(e.dh=e.bj=n,e.dj=e.cj=r):(n<e.dh?e.dh=n:n>e.bj&&(e.bj=n),r<e.dj?e.dj=r:r>e.cj&&(e.cj=r)),h},m.Sj=function(e,n,r,o,s,l){return this.Vb(e.th(+(n>=e[8])|+(r>=e[9])<<1),n,r,o,s-1,l)},m.ze=function(e,n){os(this.root,e,n===+n?n:this.Qh,0)};function rs(e,n,r,o){this[0]=n,this[1]=e,this.weight=r,this.data=o}function ss(e,n,r,o){this.pa=e,this.tc=n,this.de=r,this.Jq=o,this.wp=Ia(this.wp,this),this.up=Ia(this.up,this)}t("H.clustering.fastgrid.Cluster",ss),ss.prototype.xa=function(){return this.Sc||(this.Sc=this.pa.Za(this.tc.ej,this.tc.fj,this.tc.Ec)),this.Sc},ss.prototype.getPosition=ss.prototype.xa,ss.prototype.Wd=function(){return this.tc.Ec},ss.prototype.getWeight=ss.prototype.Wd,ss.prototype.Yf=ie,ss.prototype.isCluster=ss.prototype.Yf,ss.prototype.Sd=function(){return this.de?this.de-this.pa.hh:-1/0},ss.prototype.getMinZoom=ss.prototype.Sd,ss.prototype.om=function(){return this.Jq-this.pa.hh},ss.prototype.getMaxZoom=ss.prototype.om,ss.prototype.C=function(){return this.I||(this.I=Ge(this.pa.Za(this.tc.dh,this.tc.dj,1),this.pa.Za(this.tc.bj,this.tc.cj,1),!0)),this.I},ss.prototype.getBoundingBox=ss.prototype.C,ss.prototype.vp=function(e){this.$t=e,this.tc.ze(this.wp,ac)},ss.prototype.forEachEntry=ss.prototype.vp,ss.prototype.wp=function(e,n){var r=!1,o,s;if(e.Ec>=this.pa.Av&&e!==this.tc&&e.Ec!==this.tc.Ec&&(this.$t(new ss(this.pa,e,0,n)),r=!0),!r&&(o=e.entries))for(e=o.length,s=0;s<e;s++)this.$t(new ms(this.pa,o[s],n));return r},ss.prototype.Aj=function(e){this.hz=e,this.tc.ze(this.up,ac)},ss.prototype.forEachDataPoint=ss.prototype.Aj,ss.prototype.up=function(e,n){var r;if(e=e.entries){var o=e.length;for(r=0;r<o;r++)this.hz(new ms(this.pa,e[r],n))}return!1};function ts(e){ds.call(this,e),e=this.options,this.le=e.projection,this.hk=e.min,this.eg=e.max,this.Av=e.minWeight,this.hh=7-Fb(Jb(Eb(1,e.eps))/Tb),this.vr=new ps(Eb(this.hk,this.eg+this.hh))}u(ts,ds),m=ts.prototype,m.ue=function(e){var n=0,r=e.length,o,s=new L(0,0),l=this.le,h=this.vr;for(ts.g.ue.call(this,e),h.Ll();n<r;n++)l.Re(o=e[n],s).scale(4294967296).floor(),h.Yd(s.x,s.y,o.wt,o.data);this.od=!0},m.xc=function(e){ts.g.xc.call(this,e),this.ue(this.fc)},m.Al=function(e){for(var n=e.length,r=ts.g.xc;n--;)r.call(this,e[n]);this.ue(this.fc)},m.Dk=function(e){ts.g.Dk.call(this,e),this.ue(this.fc)},m.Za=function(e,n,r,o){return this.le.Za(e/r/4294967296,n/r/4294967296,o)},m.es=function(e){if(this.od){var n={clusters:[],noisePoints:[]};us(this,this.vr.root,0,this.eg+this.hh,-1/0,n,null),this.od=!1,e(n)}};function us(e,n,r,o,s,l,h){var p=n.Ec,d;if(h&&(h.node.Ec!==p?(l.clusters.push(new ss(e,h.node,h.depth,r-1)),h=null):s++),h||(p>=e.Av?(h={node:n,depth:r},s=r):vs(e,n,s+1,l)),n.hb&&o--)for(r++,p=0;4>p;p++)(d=n[p])&&(us(e,d,r,o,s,l,h),h=null);h&&l.clusters.push(new ss(e,h.node,h.depth,e.eg+e.hh))}function vs(e,n,r,o){n=n.entries;var s;if(n){var l=n.length;for(o=o.noisePoints,s=0;s<l;s++)o.push(new ms(e,n[s],r))}else for(s=0;4>s;s++)(l=e[s])&&vs(e,l,r,o)}m.disposeInternal=function(){ts.g.disposeInternal.call(this),this.vr=null},ts.prototype.disposeInternal=ts.prototype.disposeInternal,t("H.clustering.DataPoint",function(e,n,r,o){this.lat=e,this.lng=n,this.wt=r===+r?r:1,this.data=o});function ws(e,n){n=n||{};var r={},o=n.min||0,s=Eb(o,n.max||22);switch(o={min:o,max:s},ws.g.constructor.call(this,o),this.na=n.pixelRatio||Xd(),Wa(r,es,o,n.clusteringOptions||{}),r.minWeight=Eb(es.minWeight,r.minWeight),r.strategy){case xs.DYNAMICGRID:if(r.projection!==yh)throw new D(ws,1,"Unsupported projection");this.pa=new js(r);break;case xs.GRID:this.pa=new gs(r);break;default:this.pa=new ts(r)}this.pa.ue(e),this.fl=n.theme||new hs(this.na),this.No=A(this.No,this),this.gg=A(this.gg,this),ys(this)}u(ws,O),t("H.clustering.Provider",ws),ws.prototype.disposeInternal=function(){ws.g.disposeInternal.call(this),this.Ag.ia(),this.pa.l(),delete this.pa,delete this.Qm,delete this.fl,x.clearTimeout(this.hp)};var xs={FASTGRID:0,GRID:1,DYNAMICGRID:2};ws.Strategy=xs,ws.prototype.dy=150,ws.prototype.No=function(){this.dispatchEvent("start"),this.pa.es(this.gg,ke)};function ys(e,n,r){e.hp&&x.clearTimeout(e.hp),n&&e.pa.Ow(n,r),e.hp=x.setTimeout(e.No,e.dy)}ws.prototype.gg=function(e){this.Qm=e,zs(this),this.dispatchEvent("end")},ws.prototype.ue=function(e){this.pa.ue(e),ys(this)},ws.prototype.setDataPoints=ws.prototype.ue,ws.prototype.xc=function(e){this.pa.xc(e),ys(this)},ws.prototype.addDataPoint=ws.prototype.xc,ws.prototype.Al=function(e){this.pa.Al(e),ys(this)},ws.prototype.addDataPoints=ws.prototype.Al,ws.prototype.Dk=function(e){this.pa.Dk(e),ys(this)},ws.prototype.removeDataPoint=ws.prototype.Dk,ws.prototype.EA=function(){return this.fl},ws.prototype.getTheme=ws.prototype.EA,ws.prototype.ZC=function(e){this.fl=e,this.Qm&&(this.Ag.ia(),zs(this))},ws.prototype.setTheme=ws.prototype.ZC;function zs(e){var n=e.Qm.clusters,r=e.Qm.noisePoints,o=n.length,s=r.length,l=0<o+s;for(e.Ag.ia();s--;){var h=r[s];e.Ag.Y(e.fl.getNoisePresentation(h))}for(;o--;)r=n[o],e.Ag.Y(e.fl.getClusterPresentation(r));l&&e.jb()}ws.prototype.Tc=function(){return!0},ws.prototype.providesDomMarkers=ws.prototype.Tc,ws.prototype.Uc=function(){return!0},ws.prototype.providesMarkers=ws.prototype.Uc,ws.prototype.me=function(){return!0},ws.prototype.providesSpatials=ws.prototype.me,ws.prototype.xk=function(e,n){ys(this,e,n)},ws.prototype.preprocessData=ws.prototype.xk,t("H.clustering.buildInfo",function(){return Lm("H-clustering","1.56.0","2eb8e90",{region:"row"})});function As(e,n){t:{for(var r=e.length,o=typeof e=="string"?e.split(""):e,s=0;s<r;s++)if(s in o&&n.call(void 0,o[s],s,e)){n=s;break t}n=-1}return 0>n?null:typeof e=="string"?e.charAt(n):e[n]}var Bs={};function Cs(e){var n=e.ownerDocument,r=n.documentElement;n=n.defaultView;var o=e.getBoundingClientRect();return e=o.left,o=o.top,isNaN(n.pageXOffset)?(e+=r.scrollLeft,o+=r.scrollTop):(e+=n.pageXOffset,o+=n.pageYOffset),new L(e,o)}function Ds(e,n,r){n=ob(n)?n+"px":n,r=ob(r)?r+"px":r,e.style[Xk("transform")]="translate("+n+","+r+")"}var Es,Fs=navigator.userAgent,Gs=-1<Fs.indexOf("Android")&&-1<Fs.indexOf("Mozilla/5.0")&&-1<Fs.indexOf("AppleWebKit"),Hs=/AppleWebKit\/([\d.]+)/,Is=Hs.exec(Fs)===null?null:parseFloat(Hs.exec(Fs)[1]);Es=Gs&&Is!==null&&537>Is;var Js=globalThis,Ks=document.createElement("T"),Ls={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};t("H.ui.LayoutAlignment",Ls);function Ms(){this.Zw=this.Gt()}Ms.prototype.Gt=function(){var e=navigator,n=[];return e&&(e.msPointerEnabled?n.push(Ns):e.pointerEnabled&&n.push(Os)),1>n.length&&("TouchEvent"in Js&&n.push(Ps),n.push(Qs)),n.push(Rs),n},Ms.prototype.detectEventSets=Ms.prototype.Gt,Ms.prototype.addEventListener=function(e,n,r,o){for(var s=this.Zw,l,h=s.length,p=!1;h--;)(l=s[h][n])&&(p=!0,e.addEventListener(l,r,o||!1));p||e.addEventListener(n,r,o||!1)},Ms.prototype.removeEventListener=function(e,n,r,o){for(var s=this.Zw,l,h=s.length,p=!1;h--;)(l=s[h][n])&&(p=!0,e.removeEventListener(l,r,o||!1));p||e.removeEventListener(n,r,o||!1)};var Os={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},Ns={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},Ps={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Qs={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"},Rs={start:"keydown",end:"keyup"};function Ss(e){return!(e instanceof KeyboardEvent)||e.code==="Enter"}function Ts(e,n,r,o){return e=e.createElement(n),r&&(e.className=r),o&&(e.innerHTML=o),e}function Us(e,n){for(var r=1,o=arguments.length;r<o;r++)e.appendChild(arguments[r])}var Vs=new Ms;function Ws(e,n,r){Vs.addEventListener(e,n,r,void 0)}function Xs(e,n,r){Vs.removeEventListener(e,n,r,void 0)}function Y(e,n){F.call(this),this.Qa=e||"div",this.Le=n?n.split(" "):[],this.ub=!1,this.Le.push("H_el")}u(Y,F),t("H.ui.base.Element",Y),Y.prototype.L=function(e){if(!e)throw Error("Wrong document object");return this.G=Ts(e,this.Qa,this.Le.join(" ")),this.renderInternal(this.G,e),this.va(this.ub,!0),this.Fd(this.yx),this.Zb(this.Kd),this.tf(this.kx),this.G},Y.prototype.subscribe=function(){},Y.prototype.unsubscribe=function(){},Y.prototype.N=function(){},Y.prototype.renderInternal=Y.prototype.N,Y.prototype.mq=function(){return this.ub},Y.prototype.isDisabled=Y.prototype.mq,Y.prototype.va=function(e,n){return e=!!e,(e!==this.ub||n)&&((this.ub=e)?this.Ga("H_disabled"):this.Bb("H_disabled")),this},Y.prototype.setDisabled=Y.prototype.va,Y.prototype.ep=null,Y.prototype.getData=function(){return this.ep},Y.prototype.getData=Y.prototype.getData,Y.prototype.setData=function(e){this.ep=e},Y.prototype.setData=Y.prototype.setData,Y.prototype.Fd=function(e){var n=this.A();this.yx=e,n&&(e?(n.setAttribute("title",e),n.setAttribute("aria-label",e)):(n.removeAttribute("title"),n.removeAttribute("aria-label")))},Y.prototype.setTooltip=Y.prototype.Fd,Y.prototype.G=null,Y.prototype.A=function(){return this.G},Y.prototype.getElement=Y.prototype.A,Y.prototype.Kd=!0,Y.prototype.Zb=function(e){var n=this.A();this.Kd=e,n&&(n.style.display=e?"":"none")},Y.prototype.setVisibility=Y.prototype.Zb,Y.prototype.Vd=function(){return this.Kd},Y.prototype.getVisibility=Y.prototype.Vd,Y.prototype.kx=-1,Y.prototype.tf=function(e){this.kx=e;var n=this.A();n&&(n.tabIndex=e)},Y.prototype.setTabIndex=Y.prototype.tf,Y.prototype.Ga=function(e){var n=this.A();return 0>this.Le.indexOf(e)&&this.Le.push(e),n&&(n.className=this.Le.join(" ")),this},Y.prototype.addClass=Y.prototype.Ga,Y.prototype.Bb=function(e){e=this.Le.indexOf(e);var n=this.A();return-1<e&&this.Le.splice(e,1),n&&(n.className=this.Le.join(" ")),this},Y.prototype.removeClass=Y.prototype.Bb;function Ys(e){(e=e.A())&&e.parentNode&&e.parentNode.removeChild(e)}Y.prototype.disposeInternal=function(){Y.g.disposeInternal.call(this),Ys(this),this.ep=this.G=null,delete this.yx};function Zs(e,n,r){Y.call(this,e,n),this.dc=r?[].concat(r):[]}u(Zs,Y),t("H.ui.base.Container",Zs),Zs.prototype.va=function(e,n){var r=this.dc?this.dc.length:0;for(Y.prototype.va.call(this,e,n);r--;)this.dc[r].va(e,n);return this},Zs.prototype.setDisabled=Zs.prototype.va,Zs.prototype.Ra=function(e){var n=this.A();return this.dc.push(e),n&&(e.L(n.ownerDocument),n.appendChild(e.A())),this},Zs.prototype.addChild=Zs.prototype.Ra,Zs.prototype.Ej=function(){return[].concat(this.dc)},Zs.prototype.getChildren=Zs.prototype.Ej,Zs.prototype.removeChild=function(e){var n=this.dc.indexOf(e),r=this.A();0<=n&&(this.dc.splice(n,1),r&&r.removeChild(e.A()))},Zs.prototype.removeChild=Zs.prototype.removeChild,Zs.prototype.ia=function(){var e=this.A();e&&this.dc.forEach(function(n){e.removeChild(n.A())}),this.dc=[]},Zs.prototype.N=function(e,n){for(var r=0,o=this.dc.length;r<o;r++)e.appendChild(this.dc[r].L(n))},Zs.prototype.renderInternal=Zs.prototype.N,Zs.prototype.disposeInternal=function(){this.ia(),this.dc.forEach(this.Xy,this),Y.prototype.disposeInternal.call(this)},Zs.prototype.Xy=function(e){e.l()};function $s(e){e=e||{},Y.call(this,"div","H_btn"),this.we(e.label||" "),this.Fd(e.tooltip||""),this.setData(e.data),this.va(!!e.disabled),this.tf(0),this.F(at.UP,!0),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.cn=A(this.cn,this),this.Wh=A(this.Wh,this)}u($s,Y),t("H.ui.base.Button",$s),$s.prototype.va=function(e,n){return e&&this.Bb("H_active"),$s.g.va.call(this,e,n)},$s.prototype.setDisabled=$s.prototype.va,$s.prototype.N=function(e){Ws(e,"start",this.cn),Ws(e,"end",this.Wh),Ws(e,"out",this.Wh),this.we(this.Wb,!0)},$s.prototype.renderInternal=$s.prototype.N,$s.prototype.getState=function(){return this.o},$s.prototype.getState=$s.prototype.getState,$s.prototype.F=function(e,n){return e!==this.o&&(this.o=e,e===at.DOWN?this.Ga("H_active"):this.Bb("H_active"),n||this.dispatchEvent("statechange")),this},$s.prototype.setState=$s.prototype.F,$s.prototype.Gp=function(){return this.Wb},$s.prototype.getLabel=$s.prototype.Gp,$s.prototype.we=function(e,n){return(n||e!==this.Wb)&&(this.Wb=e,(n=this.A())&&(n.innerHTML=e)),this},$s.prototype.setLabel=$s.prototype.we,$s.prototype.cn=function(e){!this.ub&&Ss(e)&&(this.F(at.DOWN),e.preventDefault())},$s.prototype.Wh=function(e){!this.ub&&Ss(e)&&(this.F(at.UP),e.preventDefault())},$s.prototype.disposeInternal=function(){var e=this.A();e&&(Xs(e,"start",this.cn),Xs(e,"end",this.Wh),Xs(e,"out",this.Wh)),Y.prototype.disposeInternal.call(this)};var at={UP:"up",DOWN:"down"};$s.State=at;function bt(e){$s.call(this,e),this.TB=function(n){Ss(n)&&n.preventDefault()},this.ie=A(function(n){!this.ub&&Ss(n)&&(this.toggleState(),n.preventDefault())},this)}u(bt,$s),t("H.ui.base.PushButton",bt),bt.prototype.N=function(e){Ws(e,"start",this.ie),Ws(e,"end",this.TB),this.we(this.Wb,!0)},bt.prototype.renderInternal=bt.prototype.N,bt.prototype.vx=function(){var e=at.DOWN;return this.F(this.getState()===e?at.UP:e),this},bt.prototype.toggleState=bt.prototype.vx,bt.prototype.disposeInternal=function(){var e=this.A();e&&Xs(e,"start",this.ie),$s.prototype.disposeInternal.call(this)};function ct(e){e=e||{},Zs.call(this,"div","H_rdo"),this.ms=new Y("div","H_rdo_title"),this.Ui=new Zs("div","H_rdo_buttons"),this.Ra(this.ms),this.Ra(this.Ui),this.Iv=A(function(n){n.target.getState()===at.DOWN?(this.Mw(n.target,!0),this.dispatchEvent(dt)):n.target.F(at.DOWN,!0)},this),this.addEventListener("statechange",this.Iv),this.bs(e.title||""),e.onActiveButtonChange&&this.addEventListener(dt,e.onActiveButtonChange),e.buttonsOptions&&e.buttonsOptions.forEach(function(n){this.yo(new bt(n))},this)}u(ct,Zs),t("H.ui.base.RadioGroup",ct);var dt="activebuttonchange";ct.prototype.N=function(e,n){Zs.prototype.renderInternal.call(this,e,n),this.bs(this.io,!0)},ct.prototype.renderInternal=ct.prototype.N,ct.prototype.ia=function(){this.Ui.ia()},ct.prototype.bs=function(e,n){return(e!==this.io||n)&&(this.io=e,this.ms.A()&&(this.ms.A().innerHTML=this.io)),this},ct.prototype.setTitle=ct.prototype.bs,ct.prototype.GA=function(){return this.io},ct.prototype.getTitle=ct.prototype.GA,ct.prototype.yo=function(e){if(!(e instanceof bt))throw Error("PushButton expected");return e.ea(this),this.Ui.Ra(e),this},ct.prototype.addButton=ct.prototype.yo,ct.prototype.xC=function(e){return this.Ui.removeChild(e),e.ea(null),this},ct.prototype.removeButton=ct.prototype.xC,ct.prototype.Dj=function(){return this.Ui.Ej()},ct.prototype.getButtons=ct.prototype.Dj,ct.prototype.Mw=function(e,n){for(var r=this.Dj(),o=r.length;o--;)r[o].F(r[o]===e?at.DOWN:at.UP,n)},ct.prototype.setActiveButton=ct.prototype.Mw,ct.prototype.disposeInternal=function(){this.removeEventListener("statechange",this.Iv),this.ia(),Zs.prototype.disposeInternal.call(this)};function et(e){C(e,ad,et,1),Y.call(this,"div","H_context_menu_item"),this.Kb=e,this.lk=A(this.lk,this),this.Ce=A(this.Ce,this),this.Kb.addEventListener("update",this.Ce)}u(et,Y),t("H.ui.context.Item",et),et.prototype.lk=function(e){var n=this.Kb,r=n.callback;r&&!n.isDisabled()&&(this.dispatchEvent("click"),r(e))},et.prototype.N=function(){var e=this,n=this.A();Ws(n,"click",this.lk),Ws(n,"keyup",function(r){r.code.code==="Enter"&&e.lk(r)}),this.tf(-1),this.Ce()},et.prototype.renderInternal=et.prototype.N,et.prototype.Ce=function(){var e=this.A(),n=this.Kb;n.callback?this.Ga("H_clickable"):this.Bb("H_clickable"),n.isDisabled()?this.Ga("H_disabled"):this.Bb("H_disabled"),n=n.getLabel(),Ks.textContent=n,e.innerHTML=Ks.innerHTML.split(`
`).join("<br/>")},et.prototype.disposeInternal=function(){Y.prototype.disposeInternal.call(this),this.Kb.removeEventListener("update",this.Ce)};var ft={};ft=function(e,n,r){Fc.call(this),this.qh=-1,this.G=e,this.Nm=n,this.Lv=r,this.ie=A(this.ie,this),e.focus(),Ws(e,"keydown",this.ie)},u(ft,Fc),ft.prototype.disposeInternal=function(){this.qh=-1,this.Ex(),ft.g.disposeInternal.call(this),Xs(this.G,"keydown",this.ie);var e=this.Lv;this.G=this.Nm=this.Lv=null,e()},ft.prototype.ie=function(e){if(e instanceof KeyboardEvent){var n=this.Nm.length-1,r=/^Arrow(Down|Up)$/.exec(e.code);r?(e={Up:-1,Down:1}[r[1]])&&(this.qh=0>this.qh&&0>e?n:fc(this.qh+e,0,n),this.Ex()):e.code==="Enter"?(n=this.Nm[this.qh],n instanceof $s?(n.Jb()instanceof ct?n.F(at.DOWN):n.vx(),this.l()):n instanceof et&&(n.lk(),this.l())):e.code==="Escape"&&this.l()}},ft.prototype.Ex=function(){var e=this;this.Nm.forEach(function(n,r){r===e.qh?n.Ga("H_focused"):n.Bb("H_focused")})};function gt(){this.o=ht.CLOSED,Zs.call(this,"div","H_overlay")}u(gt,Zs),t("H.ui.base.OverlayPanel",gt),gt.prototype.F=function(e,n){return(e!==this.o||n)&&(this.o=e,e===ht.OPEN?this.Ga("H_open"):this.Bb("H_open")),this},gt.prototype.setState=gt.prototype.F,gt.prototype.getState=function(){return this.o},gt.prototype.getState=gt.prototype.getState,gt.prototype.fw=function(e){var n=e.Ee;e=e.A();var r=this.A(),o=r.style;if(this.Bb("H_top"),this.Bb("H_middle"),this.Bb("H_bottom"),this.Bb("H_left"),this.Bb("H_center"),this.Bb("H_right"),o.bottom=o.top=o.left=o.right=o.margin="",/top/g.test(n)){this.Ga("H_top"),o.top="0",o.margin="0 12px";var s=-1}else/bottom/g.test(n)?(this.Ga("H_bottom"),o.bottom="0",o.margin="0 12px",s=1):(this.Ga("H_middle"),o.top="50%",o.margin="0 12px",o.marginTop=-Math.round(.5*r.offsetHeight)+"px",s=0);/left/g.test(n)?(this.Ga("H_left"),o.left=e.offsetWidth+"px",o.marginLeft="12px"):/right/g.test(n)?(this.Ga("H_right"),o.right=e.offsetWidth+"px",o.marginRight="12px"):(this.Ga("H_center"),o.left="50%",0>s?(o.top=e.offsetHeight+"px",o.marginTop="12px"):0<s&&(o.bottom=e.offsetHeight+"px",o.marginBottom="12px"),o.marginLeft=-Math.round(.5*r.offsetWidth)+"px",e.appendChild(r))},gt.prototype.pointToControl=gt.prototype.fw;var ht={OPEN:"open",CLOSED:"closed"};gt.State=ht;function it(){Zs.call(this,"div","H_ctl"),this.map=null,this.Ee="top-left"}u(it,Zs),t("H.ui.Control",it),it.prototype.Pa=function(e){this.map=e},it.prototype.L=function(e){return Zs.prototype.L.call(this,e)},it.prototype.N=function(e,n){Zs.prototype.renderInternal.call(this,e,n),this.Yc(this.Ee)},it.prototype.renderInternal=it.prototype.N,it.prototype.qk=function(){},it.prototype.onUnitSystemChange=it.prototype.qk,it.prototype.lc=function(){return this.map},it.prototype.getMap=it.prototype.lc,it.prototype.la=function(){return this.uB},it.prototype.getLocalization=it.prototype.la,it.prototype.pz=function(){return this.Ee},it.prototype.getAlignment=it.prototype.pz,it.prototype.Yc=function(e){return typeof e=="string"&&Ls[e.replace("-","_").toUpperCase()]===e&&(this.Ee=e,this.dispatchEvent("alignmentchange")),this},it.prototype.setAlignment=it.prototype.Yc;function jt(e){e=e||{},it.call(this),this.be=new gt,this.se=this.se.bind(this),this.Dc=this.Dc.bind(this),this.Pc=this.Pc.bind(this),this.um=this.um.bind(this),this.Yc(e.alignment||"bottom-right"),kt(this,e.baseLayers,e.layers)}u(jt,it),t("H.ui.MapSettingsControl",jt);function lt(e,n){var r=[];return e.concat(n).forEach(function(o){r=r.concat(o.layer)}),r}function mt(e,n,r){var o=e.lc();if(o){e=lt(e.Ge,e.$f);var s=lt(n,r);e.forEach(function(l){s.includes(l)||o.ii(l)})}}function kt(e,n,r){mt(e,n,r),e.vq=NaN,e.Ge=kb(n)?n:[],e.$f=kb(r)?r:[],e.Af&&(e.Af.ia(),e.ck.ia(),nt(e))}jt.prototype.subscribe=function(){var e=this.lc();if(e){var n=this.Jb();n&&(n=n.A())&&Pc(n,"pointerdown",this.Pc),Pc(e,"pointerdown",this.Pc),e=e.O,Pc(e,"add",this.se),Pc(e,"remove",this.se),Pc(e,"set",this.se)}},jt.prototype.Pc=function(e){this.be.getState()===ht.OPEN&&(e.currentTarget!==this.lc()&&this.be.A().contains(e.target)||this.Dc())},jt.prototype.unsubscribe=function(){var e=this.lc();if(e){var n=this.Jb();n&&(n=n.A())&&Xc(n,"pointerdown",this.Pc),Xc(e,"pointerdown",this.Pc),e=e.O,Xc(e,"add",this.se),Xc(e,"remove",this.se),Xc(e,"set",this.se)}},jt.prototype.N=function(e,n){var r=this.la().translate("layers.choose");it.prototype.renderInternal.call(this,e,n),this.subscribe(),this.sc=new bt({tooltip:r,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A(function(s){var l=this;s.target.getState()===at.DOWN?(this.be.F(ht.OPEN),this.be.fw(this),this.Yj=new ft(this.A().ownerDocument.body,this.Af.Dj().concat(this.ck.Ej()),function(){l.sc.F(at.UP),l.sc.A().blur()})):x.setTimeout(function(){l.be.F(ht.CLOSED),l.Yj.l()})},this)}),this.Af=new ct({title:r,onActiveButtonChange:(function(){var s=this.vq;t:{for(var l=this.Af.Dj(),h=l.length;h--;)if(l[h].getState()===at.DOWN){l=l[h];break t}l=null}if(l=l.getData(),l=this.Ge[l].layer,h=kb(l),this.map.Cg(h?l[0]:l),(s=this.Ge[s])&&(s=s.layer,kb(s)))for(var p=s.length;1<p--;)this.map.ii(s[p]);if(h)for(s=l.length;1<s--;)this.map.Bl(l[s],1);ot(this,l),this.um(),this.Dc()}).bind(this)}),this.ck=new Zs("div","H_grp"),this.Au=new Y("div","H_separator"),this.Ra(this.sc),this.Ra(this.be),this.be.Ra(this.Af),this.be.Ra(this.Au),this.be.Ra(this.ck),nt(this);var o=this;Ws(this.sc.A(),"focus",function(){o.sc.F(at.DOWN)}),Ws(this.sc.A(),"blur",function(){o.Dc()})},jt.prototype.renderInternal=jt.prototype.N;function ot(e,n){if(e.map.Ba.type===Im){var r=H.map.render.harp.Style;n=[].concat(n);for(var o=0;!l&&o<n.length;o++){var s=n[o].D;if(s.Vc()&&s.J){s=s.J();var l=s.getConfig()||s.getUrl()}}if(l){var h=function(p){p=p.D,p.Vc()&&p.J&&p.J()instanceof r&&p.Cb(new r(l))};e.$f.forEach(function(p){p=p.layer,kb(p)?p.forEach(h):p&&h(p)})}}}function nt(e){var n=e.la();e.Ge.forEach(function(r,o){var s=r.layer;r=new bt({label:pt(n,r.label),data:o,disabled:!s||kb(s)&&!s.length}),r.tf(-1),this.Af.yo(r)},e),e.$f.forEach(function(r,o){var s=r.layer;r=new bt({label:pt(n,r.label),onStateChange:this.YB.bind(this,r.layer),data:o,disabled:!s||kb(s)&&!s.length}),r.tf(-1),this.ck.Ra(r)},e),e.Au.Zb(!(!e.$f.length||!e.Ge.length)),x.setTimeout((function(){this.map&&(this.se(),this.sc.va(!(this.Ge&&this.Ge.length||this.$f&&this.$f.length)))}).bind(e))}jt.prototype.se=function(){var e=this.map.oa,n=this.map.O;this.vq=NaN,this.Ge.forEach(function(r,o){r=r.layer,r=e===(kb(r)?r[0]:r),this.Af.Dj()[o].F(at[r?"DOWN":"UP"],!0),r&&(this.vq=o)},this),this.$f.forEach(function(r,o){r=r.layer;var s=kb(r);o=this.ck.Ej()[o],!r||s&&!r.length?o.va(!0):o.F(at[n.indexOf(s?r[0]:r)!==-1?"DOWN":"UP"],!0)},this)},jt.prototype.YB=function(e,n){e=kb(e)?e:[e],n=n.target.getState()===at.DOWN;for(var r=0;r<e.length;r++)n?this.map.Bl(e[r]):this.map.ii(e[r]);this.um(),this.Dc()},jt.prototype.um=function(){var e=qt(this);e&&(e.vo.D.J().fk(e.D.J().Rd()),this.map.ii(e),e.l(),delete e.vo),rt(this)&&st(this,this.map.oa)};function st(e,n){var r=window.H.service&&window.H.service.omv.Provider,o=n.D;if(r&&n.D instanceof r&&o.J().wj){var s=o.J(),l=(function(){var h=tt.ground.filter(function(g){return!!s.Op("layers."+g)}),p=tt.water.filter(function(g){return!!s.Op("layers."+g)});if(h.concat(p).length){var d={};Jh(d,s.wj(h)),Jh(d,s.wj(p,!1,!0)),delete d.global,h=new gi(d,s.Ic()),h=o.$.md(h),h.vo=n,this.map.Bl(h)}s.removeEventListener(fi.CHANGE,l)}).bind(e);s.getState()!==di.READY?s.addEventListener(fi.CHANGE,l):l()}}function qt(e){return As(e.map.O.Sa(),function(n){return!!n.vo})}function rt(e){e=e.map.O.Sa();var n=window.H.service&&window.H.service.traffic.flow.Provider;return!!n&&e.some(function(r){return r.D instanceof n})}var tt={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function pt(e,n){return/^layers?/.test(n)&&e.xm(n)?e.translate(n):n}jt.prototype.Dc=function(){this.sc.F(at.UP),this.sc.A().blur()},jt.prototype.disposeInternal=function(){jt.g.disposeInternal.call(this),this.unsubscribe()};function ut(e,n){var r={},o={};r["top-left"]=Ts(n,"div",[vt,wt].join(" ")),r["top-center"]=Ts(n,"div",[vt,xt,yt,wt].join(" ")),r["top-right"]=Ts(n,"div",[vt,wt].join(" ")),r["left-top"]=Ts(n,"div",[vt,zt].join(" ")),r["left-middle"]=Ts(n,"div",[vt,At,Bt,zt].join(" ")),r["left-bottom"]=Ts(n,"div",[vt,zt].join(" ")),r["right-top"]=Ts(n,"div",[vt,zt].join(" ")),r["right-middle"]=Ts(n,"div",[vt,Ct,Bt,zt].join(" ")),r["right-bottom"]=Ts(n,"div",[vt,zt].join(" ")),r["bottom-left"]=Ts(n,"div",[vt,wt].join(" ")),r["bottom-center"]=Ts(n,"div",[vt,Dt,yt,wt].join(" ")),r["bottom-right"]=Ts(n,"div",[vt,wt].join(" ")),o["top-left"]=Ts(n,"div",[xt,At].join(" ")),o["top-right"]=Ts(n,"div",[xt,Ct].join(" ")),o["bottom-left"]=Ts(n,"div",[Dt,At].join(" ")),o["bottom-right"]=Ts(n,"div",[Dt,Ct].join(" ")),Us(o["top-left"],r["top-left"],r["left-top"]),Us(o["top-right"],r["top-right"],r["right-top"]),Us(o["bottom-left"],r["left-bottom"],r["bottom-left"]),Us(o["bottom-right"],r["right-bottom"],r["bottom-right"]),Us(e,o["top-left"],o["top-right"],o["bottom-left"],o["bottom-right"],r["top-center"],r["left-middle"],r["right-middle"],r["bottom-center"]),this.at=r}var xt="H_l_top",Dt="H_l_bottom",At="H_l_left",Ct="H_l_right",yt="H_l_center",Bt="H_l_middle",wt="H_l_horizontal",zt="H_l_vertical",vt="H_l_anchor";ut.prototype.update=function(){var e=this.at;Et(e["top-center"],!0),Et(e["bottom-center"],!0),Et(e["left-middle"],!1),Et(e["right-middle"],!1)};function Et(e,n){n?(n=e.offsetWidth,e.style.marginLeft=-Math.round(.5*n)+"px"):(n=e.offsetHeight,e.style.marginTop=-Math.round(.5*n)+"px")}ut.prototype.put=function(e,n){e=e?e.A():null;var r=n?this.at[n]:null;e&&r&&(e.parentElement&&e.parentElement.removeChild(e),r.insertBefore(e,/(bottom|right)$/.test(n)||/(center|middle)/.test(n)&&r.childNodes.length%2?r.firstChild:null)),this.update()};var Ft=[];t("H.ui.i18n.defaultLocales",Ft);var Gt={},Ht=[];function It(e,n){Gt[e]=n,Ft.indexOf(e)===-1&&Ft.push(e),Ht.length?Jt(e,n):Ht=Object.keys(n)}function Jt(e,n){for(var r=Ht,o=r.length,s;o--;)if(s=r[o],!n[s])throw Error("'"+s+"' key missing in translation map for "+e)}It("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.OTHER":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.LANE_RESTRICTION":"Lane restriction","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),It("fi-FI",{"layers.normal":"Karttan\xE4kym\xE4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xE4yt\xE4 liikennetapahtumat","layers.choose":"Valitse n\xE4kym\xE4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xE4henn\xE4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xE4t\xF6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.OTHER":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xE4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xE4\xE4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xF6","traffic.DISABLED_VEHICLE":"Pys\xE4htynyt ajoneuvo","traffic.LANE_RESTRICTION":"Kaista rajoitus","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xE4\xE4ttymisaika:","distance.measurement":"Measure distance"}),It("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.OTHER":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.LANE_RESTRICTION":"Rijstrookbeperking","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),It("pt-BR",{"layers.normal":"Exibi\xE7\xE3o do mapa","layers.satellite":"Sat\xE9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xFAblico","layer.traffic":"Condi\xE7\xF5es do tr\xE2nsito","layer.incidents":"Mostrar incidentes no tr\xE2nsito","layers.choose":"Escolher exibi\xE7\xE3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xE9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xFAblico","traffic.MISCELLANEOUS":"Miscel\xE2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xEDcias","traffic.OTHER":"Outras not\xEDcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xE7\xE3o","traffic.DISABLED_VEHICLE":"Ve\xEDculo incapacitado","traffic.LANE_RESTRICTION":"Restri\xE7\xE3o de pista","traffic.from":"Hora de in\xEDcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),It("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017C zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017C","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015Bci","traffic.OTHER":"Inne wiadomo\u015Bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.LANE_RESTRICTION":"Ograniczenie pasa ruchu","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017Cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),It("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xE4nde","layer.transit":"\xD6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xF6rungen anzeigen","layers.choose":"Ansicht ausw\xE4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xF6\xDFern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xD6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.OTHER":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.LANE_RESTRICTION":"Fahrstreifensperrung","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),It("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xE8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.OTHER":"Autre","traffic.PLANNED_EVENT":"\xC9v\xE9nement pr\xE9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xE9e ferm\xE9e","traffic.WEATHER":"M\xE9t\xE9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xE9hicule en panne","traffic.LANE_RESTRICTION":"Restriction de voie","traffic.from":"Date ou heure de d\xE9but:","traffic.until":"Date et heure de fin estim\xE9es:","distance.measurement":"Measure distance"}),It("zh-CN",{"layers.normal":"\u5730\u56FE\u89C6\u56FE","layers.satellite":"\u536B\u661F","layers.terrain":"\u5730\u5F62","layer.transit":"\u516C\u5171\u4EA4\u901A","layer.traffic":"\u4EA4\u901A\u60C5\u51B5","layer.incidents":"\u663E\u793A\u4EA4\u901A\u4E8B\u4EF6","layers.choose":"\u9009\u62E9\u89C6\u56FE",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4E3A\u300C\u82F1\u91CC\u300D","scale.switchToMetric":"\u5207\u6362\u4E3A\u300C\u516C\u91CC\u300D","scale.km":"\u516C\u91CC","scale.m":"\u7C73","scale.mi":"\u82F1\u91CC","scale.ft":"\u82F1\u5C3A","zoom.out":"\u7F29\u5C0F","zoom.in":"\u653E\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516C\u5171\u4EA4\u901A","traffic.MISCELLANEOUS":"\u7EFC\u5408\u4E8B\u4EF6","traffic.ACCIDENT":"\u4EA4\u901A\u610F\u5916","traffic.OTHER_NEWS":"\u5176\u4ED6\u65B0\u95FB","traffic.OTHER":"\u5176\u4ED6\u65B0\u95FB","traffic.PLANNED_EVENT":"\u9884\u5B9A\u4E8B\u4EF6","traffic.ROAD_HAZARD":"\u9053\u8DEF\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8DEF\u5DF2\u5173\u95ED","traffic.WEATHER":"\u5929\u6C14","traffic.CONGESTION":"\u5835\u585E","traffic.CONSTRUCTION":"\u65BD\u5DE5","traffic.DISABLED_VEHICLE":"\u8F66\u8F86\u629B\u951A","traffic.LANE_RESTRICTION":"\u8F66\u9053\u9650\u5236","traffic.from":"\u5F00\u59CB\u65F6\u95F4\uFF1A","traffic.until":"\u9884\u8BA1\u7ED3\u675F\u65F6\u95F4\uFF1A","distance.measurement":"Measure distance"}),It("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xE9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xFAblico","layer.traffic":"Estado del tr\xE1fico","layer.incidents":"Mostrar incidentes de tr\xE1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xFAblico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xE1s noticias","traffic.OTHER":"M\xE1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xF3n","traffic.DISABLED_VEHICLE":"Veh\xEDculo averiado","traffic.LANE_RESTRICTION":"Restricci\xF3n de carril","traffic.from":"Inicio:","traffic.until":"Finalizaci\xF3n estimada:","distance.measurement":"Measure distance"}),It("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.OTHER":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.LANE_RESTRICTION":"Restrizione di corsia","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),It("tr-TR",{"layers.normal":"Harita g\xF6r\xFCn\xFCm\xFC","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015F\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xF6ster","layers.choose":"G\xF6r\xFCn\xFCm se\xE7",minimap:"Minimap","scale.switchToImperial":"Mile d\xF6n\xFC\u015Ft\xFCr","scale.switchToMetric":"Kilometreye d\xF6n\xFC\u015Ft\xFCr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015Ft\u0131r","zoom.in":"Yak\u0131nla\u015Ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015F\u0131m","traffic.MISCELLANEOUS":"\xC7e\u015Fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011Fer haberler","traffic.OTHER":"Di\u011Fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011Funluk","traffic.CONSTRUCTION":"Yol \xE7al\u0131\u015Fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xE7 ar\u0131zas\u0131","traffic.LANE_RESTRICTION":"\u015Eerit k\u0131s\u0131tlamas\u0131","traffic.from":"Ba\u015Flang\u0131\xE7 zaman\u0131:","traffic.until":"Tahmini biti\u015F zaman\u0131:","distance.measurement":"Measure distance"}),It("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043C \u043A\u0430\u0440\u0442\u044B","layers.satellite":"\u0421\u043F\u0443\u0442\u043D\u0438\u043A\u043E\u0432\u0430\u044F","layers.terrain":"\u041C\u0435\u0441\u0442\u043D\u043E\u0441\u0442\u044C","layer.transit":"\u041E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442","layer.traffic":"\u0414\u043E\u0440\u043E\u0436\u043D\u044B\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u044F","layer.incidents":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0434\u043E\u0440\u043E\u0436\u043D\u044B\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F","layers.choose":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043C\u0438\u043B\u0438","scale.switchToMetric":"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043A\u0438\u043B\u043E\u043C\u0435\u0442\u0440\u044B","scale.km":"\u043A\u043C","scale.m":"\u043C","scale.mi":"\u043C\u0438\u043B\u044C","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041E\u0442\u0434\u0430\u043B\u0438\u0442\u044C","zoom.in":"\u041F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u044C","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442","traffic.MISCELLANEOUS":"\u041F\u0440\u043E\u0447\u0435\u0435 \u0414\u0422\u041F","traffic.ACCIDENT":"\u0414\u0422\u041F","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0438","traffic.OTHER":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041F\u043B\u0430\u043D\u043E\u0432\u043E\u0435 \u043C\u0435\u0440\u043E\u043F\u0440\u0438\u044F\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043E\u0440\u043E\u0436\u043D\u0430\u044F \u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C","traffic.ROAD_CLOSURE":"\u0414\u043E\u0440\u043E\u0433\u0430 \u0437\u0430\u043A\u0440\u044B\u0442\u0430","traffic.WEATHER":"\u041F\u043E\u0433\u043E\u0434\u0430","traffic.CONGESTION":"\u041F\u0440\u043E\u0431\u043A\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043C\u043E\u043D\u0442","traffic.DISABLED_VEHICLE":"\u041D\u0435\u0438\u0441\u043F\u0440\u0430\u0432\u043D\u044B\u0439 \u0430\u0432\u0442\u043E\u043C\u043E\u0431\u0438\u043B\u044C","traffic.LANE_RESTRICTION":"\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u043E\u0441\u044B \u0434\u0432\u0438\u0436\u0435\u043D\u0438\u044F","traffic.from":"\u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430:","traffic.until":"\u041E\u0436\u0438\u0434\u0430\u0435\u043C\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F:","distance.measurement":"\u0418\u0437\u043C\u0435\u0440\u0438\u0442\u044C \u0440\u0430\u0441\u0441\u0442\u043E\u044F\u043D\u0438\u0435"}),It("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xE9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xFAblicos","layer.traffic":"Condi\xE7\xF5es de tr\xE2nsito","layer.incidents":"Mostrar incidentes de tr\xE2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xFAblicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xEDcias","traffic.OTHER":"Outras not\xEDcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xE7\xE3o","traffic.DISABLED_VEHICLE":"Ve\xEDculo avariado","traffic.LANE_RESTRICTION":"Limita\xE7\xE3o da faixa de rodagem","traffic.from":"Hora de in\xEDcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"});function Kt(e,n){if(!lb(e))throw new TypeError("string locale code required");if(ya(n))Jt(e,n);else{if(Ft.indexOf(e)===-1)throw Error("Default locale '"+e+"' does nto exist.");n=Gt[e]}this.u=n||{},this.Tm=e}t("H.ui.i18n.Localization",Kt),Kt.prototype.dA=function(){return this.Tm},Kt.prototype.getLocale=Kt.prototype.dA,Kt.prototype.Xz=function(){return Object.keys(this.u)},Kt.prototype.getKeys=Kt.prototype.Xz,Kt.prototype.xm=function(e){return!(!this.u||!this.u[e])},Kt.prototype.hasKey=Kt.prototype.xm,Kt.prototype.translate=function(e){var n=this.u[e];if(!lb(n))throw Error("Translation missing for key '"+e+"'.");return n},Kt.prototype.translate=Kt.prototype.translate;function Lt(e){e=e||{},it.call(this),this.sc=new bt({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.ff,this)}),this.Ra(this.sc),this.Yc(e.alignment||"right-bottom")}u(Lt,it),t("H.ui.ZoomRectangle",Lt),m=Lt.prototype,m.ff=function(e){var n=this.map,r=n.ra.element;e.target.getState()===at.DOWN?(n.addEventListener("dragstart",this.Bd,!0,this),n.addEventListener("drag",this.hg,!0,this),n.addEventListener("dragend",this.df,!0,this),e=r.ownerDocument.createElement("div"),e.className="H_zoom_lasso",r.appendChild(e),this.Om=e):(n.removeEventListener("dragstart",this.Bd,!0,this),n.removeEventListener("drag",this.hg,!0,this),n.removeEventListener("dragend",this.df,!0,this),r.removeChild(this.Om))},m.Bd=function(e){var n=this.Om.style,r=e.currentPointer,o=r.viewportX;r=r.viewportY,e.target===this.map&&(e.stopPropagation(),n.width="0px",n.height="0px",n.top=r+"px",n.left=o+"px",n.display="block",this.gx=r,this.fx=o)},m.hg=function(e){var n=e.currentPointer,r=n.viewportX,o=n.viewportY;n=this.fx;var s=this.gx,l=this.Om.style;e.target===this.map&&(e.stopPropagation(),e=r-n,r=o-s,l.left=n+(0>e?e:0)+"px",l.top=s+(0>r?r:0)+"px",l.width=Math.abs(e)+"px",l.height=Math.abs(r)+"px")},m.df=function(e){var n=this.map,r=e.currentPointer;e.target===this.map&&(e.stopPropagation(),this.Om.style.display="none",n.wa.Zc({bounds:He([n.Wa(this.fx,this.gx),n.Wa(r.viewportX,r.viewportY)])},!0))},m.N=function(e,n){it.prototype.renderInternal.call(this,e,n),this.sc.Fd(this.la().translate("zoom.rectangle"))},Lt.prototype.renderInternal=Lt.prototype.N;function Mt(e){C(e,Array,Mt,1),Zs.call(this,"div","H_context_menu"),this.BB=e,this.u=null,this.Dc=this.Dc.bind(this)}u(Mt,Zs),t("H.ui.context.Menu",Mt),Mt.prototype.disposeInternal=function(){Mt.g.disposeInternal.call(this),this.Yj&&this.Yj.l(),this.Yj=null},Mt.prototype.disposeInternal=Mt.prototype.disposeInternal,Mt.prototype.N=function(){Zs.prototype.N.apply(this,arguments),this.BB.forEach(function(e){e===bd?e=new Y("div","H_context_menu_item_separator"):(e=new et(e),e.addEventListener("click",this.Dc)),this.Ra(e),this.tf(0)},this),Pc(this.A(),["mousedown","touchstart","pointerdown","wheel"],function(e){e.stopPropagation()}),this.Yj=new ft(this.A(),this.Ej().filter(function(e){return e instanceof et?(e=e.Kb,e.callback&&!e.isDisabled()):!1}),this.Dc)},Mt.prototype.renderInternal=Mt.prototype.N,Mt.prototype.setPosition=function(e,n){if(this.u){var r=this.A(),o=r.offsetWidth,s=r.offsetHeight,l=this.u,h=l.ra.width;l=l.ra.height,e+o>h&&e>h/2&&(e-=o),n+s>l&&n>l/2&&(n-=s),Ds(r,e,n)}},Mt.prototype.setPosition=Mt.prototype.setPosition,Mt.prototype.Dc=function(){this.u&&this.u.dispatchEvent(new Ic("contextmenuclose",this.u))},Mt.prototype.Pa=function(e){this.u=e},Mt.prototype.setMap=Mt.prototype.Pa;var Nt={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",Nt);function Ot(e){e=e||{},it.call(this),this.Ga("H_scalebar"),this.Yc(e.alignment||"right-bottom"),this.maxWidth=150,this.update=A(this.update,this),this.$u=this.Ir=this.Mk=this.dl=null,this.tf(0)}u(Ot,it),t("H.ui.ScaleBar",Ot),Ot.prototype.N=function(e,n){it.prototype.renderInternal.call(this,e,n),e.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',e.style.direction="ltr",this.dl=e.firstChild,n=this.dl.childNodes,this.Mk=n[0],this.Ir=n[1],this.$u=e.lastChild,this.Qb=Nt.METRIC,this.Wy=A(function(r){!this.ub&&Ss(r)&&(this.dispatchEvent("toggleunitsystem"),r.preventDefault())},this),this.ie=A(function(r){!this.ub&&Ss(r)&&r.preventDefault()},this),Ws(e,"start",this.ie),Ws(e,"end",this.Wy),this.Fd(this.la().translate("scale.switchToImperial")),this.update()},Ot.prototype.renderInternal=Ot.prototype.N,Ot.prototype.Pa=function(e){this.map&&this.map.removeEventListener("mapviewchange",this.update),e&&e.addEventListener("mapviewchange",this.update),it.prototype.Pa.apply(this,arguments)},Ot.prototype.setMap=Ot.prototype.Pa,Ot.prototype.capture=function(e,n,r){var o=this.A(),s=o.ownerDocument,l=s.createElement("canvas"),h=l.getContext("2d"),p=s.createElementNS("http://www.w3.org/2000/svg","svg"),d=s.createElementNS("http://www.w3.org/2000/svg","foreignObject"),g=oe(o,s,!1);s=parseFloat(o.offsetWidth)+1;var y=parseFloat(o.offsetHeight),v=s*e;e*=y,l.width=v,l.height=e,p.setAttribute("xmlns","http://www.w3.org/2000/svg"),p.setAttribute("width",v),p.setAttribute("height",e),p.setAttribute("viewBox","0 0 "+s+" "+y),d.setAttribute("width","100%"),d.setAttribute("height","100%"),p.appendChild(d),g.setAttribute("width","100%"),g.setAttribute("height","100%"),g.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var _=window.getComputedStyle(o);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(w){g.style.setProperty(w,_.getPropertyValue(w))}),d.appendChild(g),o=ee(p.outerHTML),new Xg("image",o).then(function(w){h.drawImage(w,0,0),n(l)},r)},Ot.prototype.capture=Ot.prototype.capture,Ot.prototype.qk=function(e){this.Qb=e,this.Fd(e==="imperial"?this.la().translate("scale.switchToMetric"):this.la().translate("scale.switchToImperial")),this.update()},Ot.prototype.onUnitSystemChange=Ot.prototype.qk,Ot.prototype.update=function(){var e;if(this.A()){this.dl=this.dl,this.Mk=this.Mk;var n=this.maxWidth,r=0;if(e=this.map){var o=e.ra,s=Math.round(.5*o.width),l=Math.round(.5*o.height);0<s&&0<l&&(o=e.Wa(s,l))&&(e=e.Wa(s+1,l))&&(r=100*o.kb(e))}r&&(this.Qb===Nt.IMPERIAL?1609.344>r?(s=r/.3048006,e=this.la().translate("scale.ft")):(s=r/1609.344,e=this.la().translate("scale.mi")):1e3>r?(s=r,e=this.la().translate("scale.m")):(s=r/1e3,e=this.la().translate("scale.km")),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),s=r/s*100,s<n/5?(r*=5,s*=5):s<n/2?(r*=2,s*=2):s>n&&(r/=2,s/=2),s=Math.round(s),this.dl.setAttribute("width",s),this.$u.textContent=r+" "+e,this.Mk.points.getItem(2).x=this.Ir.points.getItem(2).x=this.Mk.points.getItem(3).x=this.Ir.points.getItem(3).x=s-2)}};function Pt(e,n){n=n||{};var r=this;Y.call(this,"div","H_ib H_ib_top"),this.Rv=A(function(o){r.ub||!Ss(o)&&o instanceof KeyboardEvent&&o.code!=="Escape"||(r.close(),o.preventDefault())},this),this.update=A(this.update,this),this.am=A(this.am,this),this.setPosition(e),this.Pk(n.content),n.onStateChange&&this.addEventListener("statechange",n.onStateChange),this.F(Qt.OPEN)}u(Pt,Y),t("H.ui.InfoBubble",Pt),Pt.prototype.u=null,Pt.prototype.xa=function(){return this.Sc},Pt.prototype.setPosition=function(e){this.Sc=Be(e),this.update()},Pt.prototype.setPosition=Pt.prototype.setPosition,Pt.prototype.Pa=function(e){this.u=e},Pt.prototype.N=function(e,n){this.Jo=Ts(n,"div","H_ib_body"),this.tailEl_=Ts(n,"div","H_ib_tail"),this.aj=Ts(n,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.aj.setAttribute("tabindex","0"),this.fh=Ts(n,"div","H_ib_content","&nbsp;"),this.Jo.appendChild(this.aj),this.Jo.appendChild(this.fh),Ws(this.aj,"start",this.Rv),this.u.wa.addEventListener("sync",this.update),this.u.ra.addEventListener("sync",this.update),e.appendChild(this.Jo),e.appendChild(this.tailEl_),this.Pk(this.Rl)},Pt.prototype.renderInternal=Pt.prototype.N,Pt.prototype.am=function(){this.Bt||(this.Bt=setTimeout(this.update,0))},Pt.prototype.update=function(){var e=this.A(),n=this.u,r,o="none";if(this.Bt=0,n&&e&&this.getState()===Qt.OPEN){if(r=n.Ka(this.Sc)){var s=r.x;r=r.y,n=n.ra.width,(s>=-n||s<=2*n||r>=-n||r<=2*n)&&(o="",Es?(e.style.left=s-n+"px",e.style.top=r+"px"):Ds(e,s,r))}e.style.display=o,o===""&&(e.style.visibility="visible")}};var Qt={OPEN:"open",CLOSED:"closed"};Pt.State=Qt,Pt.prototype.o=Qt.OPEN,Pt.prototype.getState=function(){return this.o},Pt.prototype.getState=Pt.prototype.getState,Pt.prototype.F=function(e){e!==this.o&&(this.o=e,this.dispatchEvent("statechange")),(e=this.A())&&(this.o===Qt.OPEN?(e.style.display="block",e.style.visibility="hidden",this.am()):e.style.display="none")},Pt.prototype.setState=Pt.prototype.F,Pt.prototype.close=function(){this.F(Qt.CLOSED)},Pt.prototype.close=Pt.prototype.close,Pt.prototype.open=function(){this.F(Qt.OPEN)},Pt.prototype.open=Pt.prototype.open,Pt.prototype.zz=function(){return this.fh||null},Pt.prototype.getContentElement=Pt.prototype.zz,Pt.prototype.Pk=function(e){if(e)if(typeof e=="string"||typeof e.nodeType=="number"&&typeof e.nodeName=="string")this.Rl=e;else throw Error("InfoBubble content must be a string or HTML node.");else this.Rl="";this.A()&&(this.Rl?(this.fh.innerHTML="",typeof this.Rl=="string"?this.fh.innerHTML=e:typeof e.nodeType=="number"&&typeof e.nodeName=="string"&&this.fh.appendChild(e)):this.fh.innerHTML="&nbsp;",this.am())},Pt.prototype.setContent=Pt.prototype.Pk,Pt.prototype.disposeInternal=function(){this.close(),this.Pk(""),this.aj&&Xs(this.aj,"end",this.Rv),this.u&&(this.u.wa.removeEventListener("sync",this.update),this.u.ra.removeEventListener("sync",this.update)),Y.prototype.disposeInternal.call(this)};function Rt(e,n){this.vc=e,this.Bc=null,this.hk=0,this.eg=22,this.yD=n,this.en=A(this.en,this),this.Zo=A(this.Zo,this),e=this.vc.lc(),e.addEventListener("mapviewchange",this.bC,!1,this),this.vb=e.Ba.type,e=e.O,e.addEventListener("add",this.ig,!1,this),e.addEventListener("remove",this.jg,!1,this)}function St(e,n,r){var o=n.D;o&&(r!==void 0&&r)&&o.removeEventListener("tap",e.en),n?(o.addEventListener("tap",e.en),e.hk=o.min,e.eg=o.max):(e.hk=0,e.eg=22)}m=Rt.prototype,m.bC=function(e){var n=e.newValue.zoom;this.Bc&&e.modifiers&e.ZOOM&&(n<this.hk||n>this.eg)&&this.Bc.close()},m.ig=function(e){e=e.added,Tt(e)&&St(this,e)},m.jg=function(e){e=e.removed,Tt(e)&&(this.Bc&&this.Bc.close(),St(this,e,!0))};function Tt(e){return window.H.service&&(e.D instanceof window.H.service.traffic.incidents.Provider||e.D instanceof window.H.service.trafficVectorTile.Provider&&e.D.$.Aq==="incident")}m.en=function(e){var n,r=this.vb===wi.HARP;e.target&&(n=e.target.getData())&&e.currentPointer.button===0&&(r?(n=this.vc.lc().Wa(e.currentPointer.viewportX,e.currentPointer.viewportY),(r=e.target.getData()?e.target.getData().properties.id:null)&&this.yD.requestIncidentById(r,{locationReferencing:"none",lang:this.vc.la().Tm,units:this.vc.Qb===Nt.METRIC?"metric":"imperial"},this.Dx.bind(this,n),console.error)):(r=e.target.V(),this.Dx(r,n)),e.stopPropagation())},m.Dx=function(e,n){if(this.vb===wi.HARP){n=n.incidentDetails;var r=this.vc.la().Tm,o=n.type,s=o.split(/(?=[A-Z])/).join("_").toUpperCase();this.vc.la().xm("traffic."+s)&&(o=this.vc.la().translate("traffic."+s)),e={position:e,title:o,description:n.description.value,startTime:new Date(n.startTime).toLocaleString(r).split(",").join(" "),endTime:new Date(n.endTime).toLocaleString(r).split(",").join(" ")}}else r=n.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),r=this.vc.la().xm("traffic."+r)?this.vc.la().translate("traffic."+r):n.TRAFFIC_ITEM_DESCRIPTION[n.TRAFFIC_ITEM_DESCRIPTION.length-1].value,e={position:e,title:r,description:n.TRAFFIC_ITEM_DESCRIPTION[0].value,startTime:n.START_TIME,endTime:n.END_TIME};this.Zo(e)},m.Zo=function(e){var n=e.position,r=e.title,o=e.description,s=e.startTime;e=e.endTime,this.Bc||(this.Bc=new Pt(n),this.Bc.Ga("H_tib"),this.vc.Ys(this.Bc)),this.Bc.setPosition(n),this.Bc.Pk('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",r).replace("{{desc}}",o).replace("{{traffic.from}}",this.vc.la().translate("traffic.from")).replace("{{traffic.until}}",this.vc.la().translate("traffic.until")).replace("{{from}}",s).replace("{{until}}",e)),this.Bc.open()};var Ut={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function Vt(e){e=e||{};var n;this.yf=!!e.vertical,this.nB=e.length||this.Ux,this.zb=ob(n=e.min)?n:this.Wx,this.Oc=Eb(this.zb,ob(n=e.max)?n:this.Vx),this.hD=E(n=e.step)?this.Xx:n,this.Fi=Wt(this,ob(n=e.value)?n:(this.zb+this.Oc)/2),this.Pc=A(this.Pc,this),this.he=A(this.he,this),this.kn=A(this.kn,this),this.jn=A(this.jn,this),this.tk=e.pointerArea,Y.call(this,"div","H_slider"+(this.yf?"":" H_l_horizontal"))}u(Vt,Y),t("H.ui.base.Slider",Vt),m=Vt.prototype,m.Ms=1,m.Wx=0,m.Vx=100,m.Xx=1,m.Ux="16em",m.bo=function(e,n){var r=this.yf,o=r?"top":"left";return(!this.Ja||n)&&(e=fc(e,this.zb,this.Oc),this.Mh&&(n=100*(e-this.zb)/(this.Oc-this.zb),r=(r?-1:1)*n,this.Mh.style[o]=r+"%",this.xD.style[o]=100+r+"%"),this.Fi=Wt(this,e)),this.Fi},Vt.prototype.setValue=Vt.prototype.bo,Vt.prototype.KA=function(){return this.Fi},Vt.prototype.getValue=Vt.prototype.KA,m=Vt.prototype,m.Wk=function(){if(!this.jq){Ws(this.A(),"start",this.Pc);var e=this.tk;Ws(e,"move",this.he),Ws(e,"end",this.kn),Ws(e,"out",this.jn),this.jq=!0}},m.Bi=function(){if(this.jq){Xs(this.A(),"start",this.Pc);var e=this.tk;Xs(e,"move",this.he),Xs(e,"end",this.kn),Xs(e,"out",this.jn),this.jq=!1}};function Wt(e,n){var r=e.hD;return n=fc(n,e.zb,e.Oc),r?e.zb+Fb((n-e.zb)/r)*r:n}function Xt(e,n){var r=e.Cx,o=e.yf;e.Bx||(e.Bx=r["offset"+(o?"Height":"Width")]),n-=Cs(r)[o?"y":"x"],0>n&&(n=0),n=(e.Oc-e.zb)*n/e.Bx,n=Wt(e,o?e.Oc-n:e.zb+n),e.Fi!==n&&(e.bo(n,!0),e.dispatchEvent(new dh(e.j.zf,n,e.Fi)))}function Yt(e,n){return(n.touches?n.targetTouches[0]:n)["page"+(e.yf?"Y":"X")]}function Zt(e,n){var r=!1,o=e.type;return o.indexOf("pointer")!==-1||o.indexOf("touch")!==-1?r=!0:C(e,MouseEvent)&&(r=e.which===n||e.buttons===n),r}function $t(e){var n=e.touches;return n&&n.length===1||C(e,MouseEvent)}m.Pc=function(e){var n=this.yf;if(Zt(e,this.Ms)&&$t(e)){var r=Yt(this,e),o=e.target;o===this.Mh||o.parentElement===this.Mh?(this.hB=r-Cs(this.Mh)[n?"y":"x"]-this.Mh.offsetWidth/2,this.A().className="H_slider H_slider_active"+(this.yf?"":" H_l_horizontal"),this.Ja=!0):Xt(this,r),e.preventDefault()}},m.kn=function(){this.Ja&&(this.A().className="H_slider "+(this.yf?"":" H_l_horizontal"),this.Ja=!1)},m.jn=function(e){this.Ja&&e.target===this.tk&&(this.Ja=!1)},m.he=function(e){this.Ja&&$t(e)&&(Zt(e,this.Ms)?(Xt(this,Yt(this,e)-this.hB),e.preventDefault()):this.Ja=!1)},m.j={zf:"change"},m.N=function(e,n){var r=Ts(n,"div","H_slider_cont"),o=Ts(n,"div","H_slider_knob_cont"),s=Ts(n,"div","H_slider_knob"),l=Ts(n,"div","H_slider_knob_halo"),h=Ts(n,"div","H_slider_track");n=Ts(n,"div","H_slider_track H_slider_track_active"),e.appendChild(r),r.appendChild(h),h.appendChild(n),r.appendChild(o),o.appendChild(s),o.appendChild(l),this.Cx=h,this.xD=n,this.Mh=o,this.tk||(this.tk=e.ownerDocument.body),r.style[this.yf?"height":"width"]=this.nB,this.bo(this.Fi),this.Wk()},Vt.prototype.renderInternal=Vt.prototype.N,Vt.prototype.disposeInternal=function(){this.Bi()},Vt.prototype.va=function(e,n){return e?this.Bi():this.Cx&&this.Wk(),Y.prototype.va.call(this,e,n)},Vt.prototype.setDisabled=Vt.prototype.va;function au(e){e=e||{};var n=e.slider;it.call(this),this.on=A(this.on,this),this.ql=A(this.ql,this),this.Jd=A(this.Jd,this),n&&(this.Xq=A(this.Xq,this),this.Du=n,this.gD=e.sliderSnaps,this.Ga("H_zoom_slider")),this.tl=new $s({label:Ut.in,onStateChange:this.on}),this.so=new $s({label:Ut.out,onStateChange:this.on}),this.Ga("H_zoom"),this.Ga("H_grp"),this.jz=e.fractionalZoom!==!1,this.setZoomSpeed(e.zoomSpeed||4),this.Yc(e.alignment||"right-middle")}u(au,it),t("H.ui.ZoomControl",au),au.prototype.PA=function(){return this.Ox},au.prototype.getZoomSpeed=au.prototype.PA,au.prototype.cD=function(e){this.Ox=e},au.prototype.setZoomSpeed=au.prototype.cD,au.prototype.Pa=function(e){this.map!==e&&(this.map&&this.map.removeEventListener("mapviewchange",this.ql),bu(this)),it.prototype.Pa.apply(this,arguments),this.map&&(this.Jd(),e.addEventListener("mapviewchange",this.ql),e.addEventListener("baselayerchange",this.Jd))},au.prototype.setMap=au.prototype.Pa,au.prototype.disposeInternal=function(){it.prototype.disposeInternal.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.Jd),bu(this)},au.prototype.N=function(e,n){it.prototype.renderInternal.call(this,e,n),this.tl.Fd(this.la().translate("zoom.in")),this.so.Fd(this.la().translate("zoom.out"))},au.prototype.renderInternal=au.prototype.N,au.prototype.Yc=function(e){var n=this.Ee;return it.prototype.Yc.call(this,e),n!==e&&this.Jd(),this},au.prototype.setAlignment=au.prototype.Yc,au.prototype.ql=function(){var e=this.map,n=e.Ub(),r=e.lb()-1;e=e.oa||e.Ba.getCapabilities().lookAt.zoom,this.Du&&this.wi.bo(n),this.ub||(this.tl.va(n+r>=e.max),this.so.va(n<=e.min))},au.prototype.va=function(e,n){return au.g.va.call(this,e,n),this.ql(),this},au.prototype.setDisabled=au.prototype.va;function bu(e){e.removeChild(e.wi),e.wi=null,e.oa&&(e.oa.removeEventListener("minchange",e.Jd),e.oa.removeEventListener("maxchange",e.Jd),e.oa=null)}au.prototype.on=function(e){e=e.target;var n=e===this.tl?1:-1,r=0<n?Math.ceil:Math.floor,o=this.map,s,l=this;o&&(e.getState()==="down"?(o.wa.startControl(),o.wa.control(0,0,n*this.Ox,0,0,0)):o.wa.endControl(!0,function(h){s=l.jz?h.zoom:r(h.zoom),h.zoom=s}))},au.prototype.Xq=function(e){this.map&&this.map.Vk(e.newValue)},au.prototype.Jd=function(){var e=this.Ee,n=this.lc();if(/^top/g.test(e)||/^bottom/g.test(e)){var r=this.so;e=this.tl;var o=!1}else r=this.tl,e=this.so,o=!0;if(this.removeChild(r),this.removeChild(e),this.Ra(r),this.Du&&n){bu(this),n=o;var s=(o=(r=this.map)&&r.oa)||r.Ba.getCapabilities().lookAt.zoom;(this.oa=o)&&(o.addEventListener("minchange",this.Jd),o.addEventListener("maxchange",this.Jd)),this.wi=new Vt({step:this.gD?1:0,vertical:n,min:s.min,max:s.max,value:r.Ub(),pointerArea:r.A()}),this.wi.addEventListener(this.wi.j.zf,this.Xq),this.Ra(this.wi)}this.Ra(e)};function cu(e,n,r){Kl.call(this,e,{icon:du,visibility:r}),eu(this,n)}u(cu,Kl);function eu(e,n){e.iB=n,e.G&&(e.G.textContent=n)}var du=new Il(Ts(Js.document,"span","H_dm_label"),{onAttach:function(e,n,r){r.G=e,eu(r,r.iB)},onDetach:function(e,n,r){delete r.G}});function fu(e,n){F.call(this),this.Me=e,this.Wb=new cu(this.vD,""),n.push(this.Wb),this.td=new T({objects:n,data:this}),this.$n=this.$n.bind(this)}u(fu,F),m=fu.prototype,m.Ze=!1,m.vD={lat:0,lng:0},m.we=function(e,n){eu(this.Wb,e),this.Wb.X(n)},m.Sk=function(e){(this.Kd=e)?this.$n():(this.kl&&x.clearTimeout(this.kl),this.kl=x.setTimeout(this.$n,100))},m.kl=0,m.$n=function(){this.Wb.Zb(this.Kd)};function gu(e,n){n&&(e.nextSibling=n,n.previousSibling=e)}function hu(e,n,r){r=n.Kj(r||0),this.dg=new Mm(e,{icon:r,zIndex:0}),this.dg.draggable=!0,fu.call(this,n,[this.dg]),e=this.td,e.addEventListener("dragstart",this.Bd,!0,this),e.addEventListener("drag",this.hg,!0,this),e.addEventListener("dragend",this.df,!0,this)}u(hu,fu),m=hu.prototype,m.kh=0,m.j={zf:"change"},m.Jj=function(){return this.kh},m.xa=function(){return this.dg.V()};function iu(e){var n=0;e.nextSibling&&e.previousSibling&&(e.nextSibling.Ze||e.previousSibling.Ze?e.nextSibling.Ze&&!e.previousSibling.Ze&&(n=2):n=1),n=e.Me.Kj(n),e.dg.ve(n)}m.hg=function(e){var n=e.currentPointer;e=n.viewportX,n=n.viewportY,(this.jB!==e||this.kB!==n)&&(this.jB=e,this.kB=n,this.dg.X(this.Me.map.Wa(e-this.uv.x,n-this.uv.y)),this.dispatchEvent(new Ic(this.j.zf,this)))},m.Bd=function(e){var n=e.currentPointer,r=n.viewportX;n=n.viewportY;var o=this.Me.map.Ka(this.xa());this.dg.vi(1),this.uv={x:r-o.x,y:n-o.y},e.stopPropagation()},m.df=function(){this.dg.vi(0)},m.Nr=function(e){this.kh=e,this.we(this.Me.Jt(e),this.xa())};function ju(e,n,r,o){var s=new K,l=[];gu(e,this),gu(this,n),s.sg(e.xa()),s.sg(n.xa()),this.Ph=new Jg(s,{style:r.Oh}),this.xu=new Jg(s,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.Ph.J().lineWidth+2*(o||5))}}),r.outlineStyle&&(this.cr=new Jg(s,{style:r.outlineStyle}),l.push(this.cr)),l.push(this.Ph,this.xu),fu.call(this,r,l),this.dv=this.cv=-1,e=this.td,e.addEventListener("pointermove",this.he,!0,this),e.addEventListener("pointerleave",this.Wq,!0,this)}u(ju,fu),ju.prototype.Jj=function(){var e=this.Ph.V();return e.xj(0).kb(e.xj(1))};function ku(e,n,r){var o=e.Ph.V();o.Yk(3*+r,3,[n.lat,n.lng,0]),e.cr&&e.cr.X(o),e.xu.X(o),e.Ph.X(o)}ju.prototype.he=function(e){var n=e.currentPointer;e=this.previousSibling.xa();var r=this.nextSibling.xa(),o=this.Me.ex,s=n.viewportX;n=n.viewportY,(this.cv!==s||this.dv!==n)&&(this.cv=s,this.dv=n,o.X(this.Me.hA(e,r,{x:s,y:n})),o.Zb(!0))},ju.prototype.Wq=function(){this.Me.ex.Zb()},ju.prototype.Nr=function(){this.we(this.Me.Jt(this.Jj()),this.Ph.C().wb())};var lu={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function mu(e,n){this.Ia=n,this.uc=e,this.nb={Ze:!0},nu(this,this.nb),this.hn=A(this.hn,this)}t("H.ui.distanceMeasurement.Model",mu),m=mu.prototype,m.Im=function(){return this.nb.nextSibling===this.nb},m.Sk=function(e){for(var n=this.nb,r=n.nextSibling;r!==n;)r.Sk(r.previousSibling===n?!1:e),r=r.nextSibling};function ou(e,n){var r=n||e.nb.nextSibling,o=0,s=0;if(n&&!pu(e,n))throw new D(e.Ek,0,n);for(r instanceof hu?o=r.Jj():r instanceof ju&&(o=r.previousSibling.Jj()),n=r;n&&n!==e.nb;n=n.nextSibling,s++)n.Nr(o),s%2===1&&(o+=n.Jj())}m.Qi=function(e){var n=this.nb.previousSibling,r=this.Im();return e=new hu(e,this.Ia,r?0:2),this.uc.Y(e.td),gu(e,this.nb),e.addEventListener(e.j.zf,this.hn),r?nu(this,e):(qu(this,n,e),iu(n),ou(this,n)),e},m.insertBefore=function(e,n){var r,o=1;if(n){if(!pu(this,n))throw new D(this.insertBefore,1,n);(r=n.previousSibling.Ze)&&(o=0),e=new hu(e,this.Ia,o),e.addEventListener(e.j.zf,this.hn),this.uc.Y(e.td),r?(r=this.nb.nextSibling,qu(this,e,r),nu(this,e),n=e,iu(r)):(r=n.previousSibling,n=r.previousSibling,o=r.nextSibling,this.uc.Na(r.td),qu(this,n,e),qu(this,e,o)),ou(this,n)}else e=this.Qi(e);return e},m.ia=function(){nu(this,this.nb),this.uc.ia()},m.Ek=function(e){var n=this.nb,r=e.previousSibling,o=e.nextSibling;if(!pu(this,e))throw new D(this.Ek,0,e);if(this.uc.Na(e.td),r===n){var s=o;s!==n?(e=s.nextSibling,nu(this,e),e.Nr(0),iu(e),ou(this,e)):nu(this,this.nb)}else o===n?(s=r,e=s.previousSibling,gu(e,n),iu(e)):r&&o&&(qu(this,r.previousSibling,o.nextSibling),this.uc.ug([o.td,r.td]),ou(this,r.previousSibling));s&&s!==n&&this.uc.Na(s.td)};function pu(e,n){for(var r=e.nb.nextSibling,o=!1;r!==e.nb;){if(r===n){o=!0;break}r=r.nextSibling}return o}function qu(e,n,r){n=new ju(n,r,e.Ia),e.uc.Y(n.td)}function nu(e,n){e.nb.nextSibling=n,n.previousSibling=e.nb}m.hn=function(e){e=e.target;var n=e.previousSibling,r=e.nextSibling,o=e.xa();if(!r.Ze){ku(r,o,!1);var s=e}n.Ze||(ku(n,o,!0),s=n.previousSibling),ou(this,s)};function ru(e){e=e||{};var n,r=e.lineStyle;it.call(this),this.Lo=new bt({label:lu.btn,onStateChange:A(this.ff,this)}),this.Ra(this.Lo),(n=e.distanceFormatter)&&(this.Kt=n),r&&(this.lv=r,this.Vv=B),this.Yc(e.alignment||"right-bottom"),this.ud={},this.ud[0]=e.startIcon,this.ud[2]=e.endIcon,this.ud[1]=e.stopoverIcon,this.ud[3]=e.splitIcon}u(ru,it),t("H.ui.DistanceMeasurement",ru),m=ru.prototype,m.Qb=Nt.METRIC,m.Tx=22,m.lv={strokeColor:"rgb(39,44,54)",lineWidth:5},m.Vv={strokeColor:"white",lineWidth:7},m.Wk=function(){var e=this.map,n,r={};this.Wj||(this.rc=new O,this.qb=new zk(this.rc,{pixelRatio:this.map.lb()}),this.uc=n=this.rc.rd(),this.uc.Yw(!0),n.addEventListener("dragstart",this.Bd,!0,this),n.addEventListener("dragend",this.Xk,!0,this),n.addEventListener("pointerenter",this.Xk,!0,this),n.addEventListener("pointerleave",this.Wq,!0,this),n.addEventListener("tap",this.eC,!0,this),this.Zk=su(this),r.Jt=A(this.Kt,this),r.Kj=A(this.Kj,this),r.hA=A(this.ou,this),r.map=this.map,r.ex=this.Zk,r.Oh=this.lv,r.outlineStyle=this.Vv,this.Kb=new mu(this.uc,r),this.Wj=!0),this.Zk&&this.uc.Y(this.Zk),e.addEventListener("tap",this.Ov,!0,this),e.O.add(this.qb)},m.Bi=function(){var e=this.map;this.Wj&&(e.removeEventListener("tap",this.Ov,!0,this),e.ii(this.qb),this.Kb.ia())};function su(e){function n(){var p=r.mc();return p={anchor:r.Db.clone().scale(l).floor(),size:new th(Gb(p.w*l),Gb(p.h*l)),hitArea:o},new Ll(r.Se(),p)}var r=e.Kj(3),o=new el(fl.NONE,[]),s,l=r===e.Hs?.5:1;if(r.getState()===1)var h=n();else h=new Ll("<svg/>",{hitArea:o}),r.addEventListener("statechange",function(){r.getState()===1&&s.ve(n())});return s=new Mm(e.map.wb(),{visibility:!1,icon:h})}m.Kt=function(e){var n="m",r=0;return this.Qb==="metric"?1e3<=e&&(e/=1e3,n="km",r=1):(e/=.3048,n="ft",5280<=e&&(e/=5280,n="mi",r=1)),e.toFixed(r)+" "+this.la().translate("scale."+n)},m.ou=function(e,n,r){var o=this.map.Ka(e);return n=this.map.Ka(n),r=new L(r.x,r.y).nu(o,n),this.map.Wa(r.x,r.y)||Be(e)},m.N=function(e,n){var r=this.map.Ba.type===wi.P2D?this.map.lb():1;r*=this.Tx;var o=r/2;it.prototype.renderInternal.call(this,e,n),this.Qb=Nt.METRIC,this.Hs=new Ll(lu.point,{anchor:{x:o,y:o},size:{w:r,h:r},hitArea:new el(fl.CIRCLE,[o,o,o])}),this.Lo.Fd(this.la().translate("distance.measurement"))},ru.prototype.renderInternal=ru.prototype.N,m=ru.prototype,m.Kj=function(e){return this.ud[e]||this.Hs},m.Xk=function(){this.Kb.Sk(!0)},m.Bd=function(){this.Kb.Sk()},m.Wq=function(e){e.currentPointer.type!=="touch"&&this.Kb.Sk()},m.eC=function(e){var n=e.currentPointer,r=e.target.Ma,o;r&&(r=r.getData())instanceof fu&&(o=r),r=o,e=e.originalEvent,e=e.metaKey||e.altKey,r&&(e&&r instanceof hu?this.Kb.Ek(r):r instanceof ju&&(e=r.previousSibling.xa(),o=r.nextSibling.xa(),n={x:n.viewportX,y:n.viewportY},this.Kb.insertBefore(this.ou(e,o,n),r.nextSibling),this.Zk.Zb()),this.Xk())},m.Ov=function(e){var n=e.currentPointer;e=e.target,e!==this.map&&e.getProvider&&e.getProvider()===this.rc||(this.Kb.Qi(this.map.Wa(n.viewportX,n.viewportY)),this.Zk.Zb(),this.Xk())},m.ff=function(e){e.target.getState()==="down"?this.Wk():this.Bi()},m.qk=function(e){this.Qb=e,this.Wj&&(ou(this.Kb),this.Xk())},ru.prototype.onUnitSystemChange=ru.prototype.qk,ru.prototype.disposeInternal=function(){this.Bi(),this.Wj&&(this.rc.l(),this.qb.l()),ru.g.disposeInternal.call(this)},ru.prototype.Pa=function(e){e?this.Lo.getState()===at.DOWN&&(this.map=e,this.Wk()):(this.Bi(),this.Wj=!1),it.prototype.Pa.apply(this,arguments)},ru.prototype.setMap=ru.prototype.Pa;function tu(e,n){try{return e.Hm=!0,new e(n)}finally{e.Hm=!1}}function uu(e,n){var r=e.A(),o=this;F.call(this),this.u=e,this.rj=r.ownerDocument,this.Gf={},this.Ie=[],this.G=Ts(this.rj,"div","H_ui"),this.setDirection(),this.QB=A(function(s){this.kv.put(s.target,s.target.Ee)},this),this.addEventListener("alignmentchange",this.QB),this.fC=A(function(){this.wx()},this),this.addEventListener("toggleunitsystem",this.fC),this.G.addEventListener("contextmenu",this.kw,!1),this.G.addEventListener("MSHoldVisual",this.kw,!1),this.u.addEventListener("contextmenu",this.bn,!1,this),this.u.addEventListener("contextmenuclose",this.Jv,!1,this),this.u.bc(this.l.bind(this)),this.Nd=null,this.rt=-1,this.kv=new ut(this.G,this.rj),this.Qb=Nt.METRIC,vu(this,"en-US"),n&&wu(this,n),r.appendChild(this.G),x.setTimeout(function(){o.kv.update()},1)}u(uu,F),t("H.ui.UI",uu),uu.prototype.kw=function(e){for(var n=e.target;n&&!/\bH_ib_content\b/.test(n.className);)n=n.parentNode;n||e.preventDefault()},uu.prototype.A=function(){return this.G},uu.prototype.getElement=uu.prototype.A,uu.prototype.lc=function(){return this.u},uu.prototype.getMap=uu.prototype.lc,uu.prototype.JA=function(){return this.Qb},uu.prototype.getUnitSystem=uu.prototype.JA,uu.prototype.ao=function(e){var n=this.Gf,r;if(e!==this.Qb)for(r in this.Qb=e,n)n[r]instanceof it&&n[r].onUnitSystemChange(this.Qb)},uu.prototype.setUnitSystem=uu.prototype.ao,uu.prototype.setDirection=function(e){this.G.setAttribute("dir",e||getComputedStyle(this.lc().A()).direction)},uu.prototype.setDirection=uu.prototype.setDirection;function vu(e,n){if(lb(n))var r=n;else if(n instanceof Kt){r=n.Tm;var o=n}else throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");if(r)if(o)e.Bq=o;else if(0<=Ft.indexOf(r))e.Bq=new Kt(r);else throw Error("Locale ["+r+"] is not supported.");else throw Error("No locale was defined.")}uu.prototype.la=function(){return this.Bq},uu.prototype.wx=function(){this.Qb===Nt.METRIC?this.ao(Nt.IMPERIAL):this.ao(Nt.METRIC)},uu.prototype.toggleUnitSystem=uu.prototype.wx,uu.prototype.Ys=function(e){var n=this.Ie.length,r=this.G;if(0>this.Ie.indexOf(e)){e.ea(this),e.Pa(this.u);var o=e.L(this.rj);n=0<n?this.Ie[n-1].A().nextSibling:this.G.firstChild,r.insertBefore(o,n),this.Ie.push(e)}},uu.prototype.addBubble=uu.prototype.Ys,uu.prototype.bn=function(e){var n=e.items;this.Nd&&this.Jv(),clearTimeout(this.rt),this.rt=x.setTimeout((function(){n.length&&(this.Nd=new Mt(n),this.G.insertBefore(this.Nd.L(this.rj),this.G.firstChild),this.Nd.ea(this),this.Nd.Pa(this.u),this.Nd.setPosition(e.viewportX,e.viewportY))}).bind(this),0)},uu.prototype.Jv=function(){this.Nd&&(this.Nd.l(),this.Nd=null)},uu.prototype.wC=function(e){var n=this.Ie.indexOf(e);-1<n&&(e.ea(null),e.Pa(null),this.Ie.splice(n,1),this.G.removeChild(e.A()))},uu.prototype.removeBubble=uu.prototype.wC,uu.prototype.vz=function(){return this.Ie},uu.prototype.getBubbles=uu.prototype.vz,uu.prototype.Pg=function(e,n){if(this.Hj(e))throw Error("A control with name ["+e+"] is already registered.");n.ea(this),n.Pa(this.u),n.uB=this.Bq,n.L(this.rj),n.onUnitSystemChange(this.Qb),this.Gf[e]=n},uu.prototype.addControl=uu.prototype.Pg,uu.prototype.yC=function(e){var n=this.Hj(e);if(n)n.unsubscribe(),n.ea(null),n.Pa(null),Ys(n),delete this.Gf[e];else throw Error("Control ["+e+"] not found in this UI's controls.");return n},uu.prototype.removeControl=uu.prototype.yC,uu.prototype.Hj=function(e){return this.Gf[e]},uu.prototype.getControl=uu.prototype.Hj,uu.prototype.disposeInternal=function(){for(var e in this.Gf)Bs.hasOwnProperty.call(this.Gf,e)&&this.Gf[e].l();this.Ie.forEach(function(n){n.l()}),(e=this.G.parentNode)&&e.removeChild(this.G),F.prototype.disposeInternal.call(this),delete this.G};function wu(e,n){var r,o;n.unitSystem&&e.ao(n.unitSystem),(o=n.locale)&&vu(e,o),(r=n.zoom)&&e.Pg("zoom",new au(ya(r)?r:null)),(r=n.zoomrectangle)&&e.Pg("zoomrectangle",new Lt(ya(r)?r:null)),(r=n.mapsettings)&&e.Pg("mapsettings",new jt(ya(r)?r:null)),(r=n.scalebar)&&e.Pg("scalebar",new Ot(ya(r)?r:null)),(r=n.distancemeasurement)&&e.Pg("distancemeasurement",new ru(ya(r)?r:null))}uu.prototype.capture=function(e,n,r,o){var s=this.Hj("scalebar"),l=e.getContext("2d"),h=e.width,p=e.height,d=this.u.Xd,g=5+(d?d.A().childNodes[1].offsetHeight:0);s&&s.Vd()?s.capture(n,function(y){l.drawImage(y,h-y.width-5*n,p-y.height-g*n),r(e)},o):r(e)},uu.prototype.capture=uu.prototype.capture,uu.createDefault=function(e,n,r){var o=e.Ba.type;if(r=new uu(e,{unitSystem:Nt.METRIC,zoom:{alignment:"right-bottom"},mapsettings:xu(o,n,e.oa),scalebar:{alignment:"bottom-right"},locale:r||"en-US"}),o===wi.P2D){var s=r.Hj("mapsettings"),l=function(){if(s.lc()){var g=xu(o,n,e.oa);kt(s,g.baseLayers,g.layers)}};e.addEventListener(e.j.xl,l),r.bc(function(){e.removeEventListener(e.j.xl,l)}),s.bc(function(){e.removeEventListener(e.j.xl,l)})}if(o===wi.HARP){if(window.H.service){var h=n.vector.traffic.map.D.$.i(),p=new window.H.service.Url(h.pi,h.Qj.split(".").slice(-2).join("."));p=tu(window.H.service.traffic.Service7,{platformBaseUrl:p});var d=p.i().getQuery();d.apikey=h.getQuery().apikey,p.i().Tk(d),new Rt(r,p)}}else new Rt(r);return r},uu.prototype.aD=function(){},uu.prototype.setTrafficIncidentsHandle=uu.prototype.aD;function yu(e,n,r,o){for(var s=e,l=0;s&&l<n.length;l++)s=s[n[l]];if(s&&s!==e)return e={label:r,layer:s},o.push(e),e}function xu(e,n,r){var o=[],s=[],l=n.raster;if(e===wi.P2D&&l){if(yu(n,["raster","normal","map"],"layers.normal",o),yu(n,["raster","satellite","map"],"layers.satellite",o),yu(n,["raster","terrain","map"],"layers.terrain",o),r){for(var h in l)if(l[h]&&l[h].map===r){var p=h;break}}yu(n,["raster","normal","trafficincidents"],"layer.incidents",s),yu(n,["raster",p,"transit"],"layer.transit",s)}else yu(n,["vector","normal","map"],"layers.normal",o),e===wi.WEBGL?(yu(n,["raster","satellite","map"],"layers.satellite",o),yu(n,["vector","normal","traffic"],"layer.traffic",s),yu(n,["vector","normal","trafficincidents"],"layer.incidents",s)):(r=yu(n,["hybrid","day","vector"],"",[]),l=yu(n,["hybrid","day","raster"],"layers.satellite",o),l.layer=[l.layer,r.layer],window.H.service&&(r=n.vector.traffic.map.D.$.i(),n=tu(window.H.service.trafficVectorTile.Service,{baseUrl:r,layer:"flow"}),r=tu(window.H.service.trafficVectorTile.Service,{baseUrl:r,layer:"incident"}),p=nn()+"/harp/oslo/normal.day.json",l=new H.map.render.harp.Style(p),p=new H.map.render.harp.Style(p),n=n.createLayer(l,{engineType:e}),e=r.createLayer(p,{engineType:e}),s.push({label:"layer.traffic",layer:n},{label:"layer.incidents",layer:e})));return{alignment:"bottom-right",baseLayers:o,layers:s}}function zu(e,n){if(n=n||{},!(e&&e instanceof yk))throw Error("Base layer is mandatory for overview UI element");it.call(this),this.dr=new bt({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.ff,this)}),this.Ra(this.dr),this.ai=new Au(e,n.zoomDelta,n.scaleX,n.scaleY),this.Yc(n.alignment||"right-bottom"),this.Ra(this.ai)}u(zu,it),t("H.ui.Overview",zu),zu.prototype.Cg=function(e){return this.ai.Cg(e),this},zu.prototype.setBaseLayer=zu.prototype.Cg,zu.prototype.ff=function(e){e.target.getState()===at.DOWN?(e=this.ai,Bu(e,!0),e.js(),e.Ga(e.Xs),e.u.addEventListener("mapviewchange",e.js,!1,e)):Cu(this.ai)},zu.prototype.N=function(e,n){it.prototype.renderInternal.call(this,e,n),this.dr.A().style.float=this.Ee.match("right")?"right":"left",this.ai.Pa(this.map),this.dr.Fd(this.la().translate("minimap"))},zu.prototype.renderInternal=zu.prototype.N,zu.prototype.disposeInternal=function(){this.ai.l(),Y.prototype.disposeInternal.call(this)};function Au(e,n,r,o){this.oa=e,this.Xs="H_overview_active",typeof n=="number"&&(this.Nx=n),typeof r=="number"&&(this.Yv=r),typeof o=="number"&&(this.Zv=o),Zs.call(this,"div","H_overview")}u(Au,it),Au.prototype.Cg=function(e){this.bi.Cg(e)},Au.prototype.N=function(e,n){n=Ts(n,"div","H_overview_map"),Us(e,n),this.Eq=n},Au.prototype.renderInternal=Au.prototype.N,Au.prototype.renderInternal=Au.prototype.N,m=Au.prototype,m.Nx=3,m.Yv=5,m.Zv=5,m.Pa=function(e){this.u=e,this.bi=new U(this.Eq,this.oa,{pixelRatio:this.u.lb(),engineType:this.u.Ba.type}),this.bi.Xd.A().style.display="none",this.Xv=this.bi.wa,this.rv=this.u.wa};function Cu(e){!e.jh&&Bu(e),e.Bb(e.Xs),e.u.removeEventListener("mapviewchange",e.js,!1,e)}m.js=function(e){e&&e.modifiers&e.SIZE&&Bu(this,!0),e=this.rv.Ib(),e.zoom-=this.Nx,this.Xv.Zc(e)};function Bu(e,n){var r=e.u.ra.element,o=e.A().style,s=r.offsetWidth/e.Yv/10;r=r.offsetHeight/e.Zv/10;var l=e.Eq.style;n?(o.width=s+"em",o.height=r+"em",l.width=s+"em",l.height=r+"em"):o.width=o.height="0em",e.bi.ra.resize()}m.disposeInternal=function(){Au.g.disposeInternal.call(this),Cu(this),this.bi.l(),this.bi=this.Xv=this.rv=this.u=this.oa=this.Eq=null},t("H.ui.buildInfo",function(){return Lm("H-ui","1.56.0","2eb8e90",{region:"row"})});function Du(e,n){n=n||{},C(e,zk,Du,0),Du.g.constructor.call(this,e),this.Pd=!!n.Pd,this.pC=n.Ab||0,this.tn=[],this.Wv={}}u(Du,Gj),Du.prototype.L=function(e,n,r,o,s,l){var h,p=this.yb,d;o-=this.pC,this.tn.length=0;var g=this.Wv;if(this.Wv=h={},o>=p.min&&o<=p.max){var y=p.wg(e,o,s,l),v=y.overlays;if(e=v.length)for(v.sort(qg),o=this.Pb,s=this.Pd,l=0;l<e;l++){p=v[l];var _=p.C(),w=r.Gb(_.Lc()),I=r.Gb(_.Jc());_=r.w,w.x>=I.x&&(w.x-=_),_*=-((w.x+I.x)/_>>1),w.x+=_,w.add(n),I.x+=_,I.add(n),s||(w.round(),I.round()),(_=g[d=p.xb()])?delete g[d]:_={lC:p},h[d]=_;var G=w.x;w=w.y;var _t=I.x;I=I.y;var _r=_t-G,_o=I-w;o.Ed(p.Ue()),o.Qe(p.Se(),G,w,_r,_o),_.details?_.details.set(G,w,_t,I):_.details=new rh(G,w,_t,I),this.tn.push(_)}}return!y||y.requested&&y.requested===y.total||!y.requested&&v.length===y.total?Mg.DONE:Mg.PENDING},Du.prototype.La=function(e,n,r){for(var o=this.tn,s=o.length,l,h,p;s--;)if(l=o[s],h=l.details,h.Ql(e,n)){if(l=l.lC,p)p.push(l);else if(p=[l],r)break}return p||le},Du.prototype.Fh=function(){return"2d"},Du.prototype.disposeInternal=function(){delete this.tn,Du.g.disposeInternal.call(this)},Du.prototype.disposeInternal=Du.prototype.disposeInternal;function Eu(e,n){this.Wm=[],Eu.g.constructor.apply(this,arguments)}u(Eu,Hj),m=Eu.prototype,m.Xt=function(){return this.yb.pe.apply(this.yb,arguments)},m.L=function(e,n,r,o,s,l,h){return this.Wm=[],Eu.g.L.apply(this,arguments)},m.na=1,m.Dw=function(e,n,r,o,s,l){var h=this.na=o.lb();s*=h,l*=h;var p=r.mc();n=p.w*h,p=p.h*h;var d=r.Db;this.Pd?(s-=d.x*h,l-=d.y*h):(s=Fb(s-d.x*h),l=Fb(l-d.y*h)),o.Qe(r.Se(),s,l,n,p),e.detail?e.detail.set(s,l,s+n,l+p):e.detail=new rh(s,l,s+n,l+p),this.Wm.push(e)},m.La=function(e,n,r){for(var o=this.Wm,s=o.length,l,h,p,d=le,g=this.na;s--&&(l=o[s],h=l.detail,!(h.Ql(e,n)&&(l=l.tv,(!(p=l.kc().Am)||p.Bm((e-h.left)/g,(n-h.top)/g,0))&&0>d.indexOf(l)&&(d===le&&(d=[]),d.push(l),r)))););return d},m.Fh=function(){return"2d"},m.disposeInternal=function(){this.Wm=[],Eu.g.disposeInternal.call(this)},Eu.prototype.disposeInternal=Eu.prototype.disposeInternal;var Fu={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Ii.ZOOM,COORD:Ii.COORD},capture:!0};t("H.map.render.p2d.capabilities",Fu);function Gu(e,n){if(!e)throw new D(Gu,0,e);Gu.g.constructor.call(this,e),this.ew={},this.uj=!(!n||!n.Pd),this.Rj=Hu++}u(Gu,Gj);var Hu=0;Gu.prototype.L=function(e,n,r,o,s,l){var h=Fb(o),p=this.yb,d=h+(r.exp-p.pixelProjection.exp),g=p.min,y=p.max;o=p.tileSize;var v=p.D.Qc,_=this.Pb,w=_.Ue(),I=_.mc().w,G=r.w,_t=r.x,_r=r.y,_o={};if(h<g||h>y)return Mg.DONE;for(s=p.requestTiles(e,d,s,l,this.Rj),e=s.total,s=s.tiles,l=s.length,this.le=r,this.SC=n,this.ws=d,w!==v&&_.Ed(v),r=o=o*G/(Lb(2,d)*o),this.uj||(o%1&&(o=Gb(o),G=r/o,_t/=G,_r/=G,G=Lb(2,d)*o),_t=Gb(_t),_r=Gb(_r)),this.DC=r,d=-o,h=I+o,p=0;p<l;p++){if(I=s[p],(g=I.data)&&g.tagName){for(r=n.x-(_t-I.x*o),v=n.y-(_r-I.y*o),_.Qe(g,r,v,o,o),w=r;(w-=G)>d;)_.Qe(g,w,v,o,o);for(w=r;(w+=G)<h;)_.Qe(g,w,v,o,o)}_o[this.ws+"_"+I.x+"_"+I.y]=I}return this.ew=_o,l===e?Mg.DONE:Mg.PENDING},Gu.prototype.La=function(e,n,r){var o=this.DC,s=o/this.yb.tileSize,l=this.le,h=this.SC,p;if(fb(this.ws)&&l){e=l.x+(e-h.x),n=l.y+(n-h.y);var d=Gb(l.w/o),g=l=Gb(e/o);h=Gb(n/o),Ib(g)>=d&&(g%=d),0>g&&(g=d+g),(d=this.ew[this.ws+"_"+g+"_"+h])&&d.La&&(p=d.La((e-o*l)/s,(n-o*h)/s,r))}return p||le},Gu.prototype.Fh=function(){return"2d"};function Z(e,n,r,o){Z.g.constructor.call(this,e,n,r,o),this.Xb=new L(0,0),(r=o.renderBaseBackground)&&(this.Cw=r.lower,this.Bw=r.higher),this.uj=!!o.enableSubpixelRendering,this.Kg=Iu,this.hv=0,this.xs=this.av=!1,this.ma=new Pk,this.T=o=new oj,this.fg=A(this.fg,this),o.addEventListener(o.j.wo,this.fg),this.Ka=A(this.Ka,this),o=e.element,this.qc=e=o.ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,o.insertBefore(e,o.firstChild),this.cl=new cl(this.qc,this.ja),this.Fe=[],this.gq(),this.vg=A(Z.prototype.vg,this),this.o=Ju,this.Qn(),this.zoom=Ku(this,this.De.Ub()+this.Ab),this.yc(),Lu(this,n.Ib().position,this.zoom),this.rb(),this.mg()}u(Z,Fi),t("H.map.render.p2d.RenderEngine",Z),Z.prototype.type=Oi.P2D;var Ju=2;Z.prototype.getState=function(){return this.o},Z.prototype.getState=Z.prototype.getState,Z.prototype.Fj=function(e,n){return e=n-e,Ib(e)<this.pixelProjection.w/2?e:e-this.pixelProjection.w*n/Ib(n)},Z.prototype.ar=function(e){var n=this,r=e.animate,o=e.newValue,s=e.modifiers;e=o.position;var l=o.bounds,h,p=this.zoom,d=this.xd,g=0;if(s&fh.POSITION&&(h=n.pixelProjection.Gb(e)),s&fh.BOUNDS)o=Mu(this,l.C(),s&fh.ZOOM?o.zoom:B,s&fh.POSITION?e:B),this.De.Zc(o,r);else{s&fh.POSITION||(h=n.pixelProjection.Gb(o.position));var y=h.x,v=h.y;this.Jg(),this.Xb.set(0,0),o=this.Do(o);var _=o.zoom,w=o.position;if(r){var I=_-p,G={x:d.x,y:d.y};r=this.pixelProjection.ci(G).x;var _t=this.pixelProjection.projection.Re(e);(_t.x!==this.xd.x||_t.y!==this.xd.y||_!==this.zoom)&&(y=this.Fj(r,y),this.ad(function(_r){var _o=_r-g;if(_!==p){h=n.pixelProjection.ci(_t);var Ca=n.pixelProjection.ci(G);y=n.Fj(Ca.x,h.x),v=h.y-Ca.y}g=_r,n.Sg(y*_o,v*_o),p+=I*_o,n.sb(p),n.rb(),n.ba()},this.vl,function(){Lu(n,w,_),n.sb(_),n.rb(w),n.ba()},this.wl))}else this.bd(),Lu(this,w,_),this.sb(_),this.rb(w);this.ba()}},Z.prototype.vl=300,Z.prototype.Wn=function(e){var n=ob(e);if(!n||n&&0>e)throw new D(this.Wn,1,"positive number required");this.vl=e},Z.prototype.setAnimationDuration=Z.prototype.Wn,Z.prototype.zp=function(){return this.vl},Z.prototype.getAnimationDuration=Z.prototype.zp,Z.prototype.wl=wj,Z.prototype.Xn=function(e){if(!db(e))throw new D(this.Xn,1,"function required");this.wl=e},Z.prototype.setAnimationEase=Z.prototype.Xn,Z.prototype.Ap=function(){return this.wl},Z.prototype.getAnimationEase=Z.prototype.Ap,Z.prototype.Qn=function(){this.wl=wj,this.vl=300},Z.prototype.resetAnimationDefaults=Z.prototype.Qn,m=Z.prototype,m.Uq=function(e,n,r){var o;this.$j=uj(),(o=this.$h.ka.splice(e,1)[0])&&o.l&&o.l(),(o=this.Lf.ka.splice(e,1)[0])&&o.l&&o.l(),(o=this.si.ka.splice(e,1)[0])&&o.l&&o.l(),(o=this.ri.ka.splice(e,1)[0])&&o.l&&o.l(),this.af=this.ib.Sa(),e===0&&(Ji(this,n,!1),this.yc()),this.Fe=dl(this.cl,this.Sf(),this.Pf()),this.mi(),r||this.ba()},m.gq=function(){var e=this.ib.Sa(),n=0,r=e.length;for([this.$h={},this.Lf={},this.si={},this.ri={}].forEach(function(o){o.Pe=[],o.ka=[]}),this.af=this.ib.Sa();n<r;n++)this.pk(n,e[n]);this.yc()},m.Vq=function(){this.yc(),this.ba()},m.hq=function(e,n,r){var o,s,l,h;if(n){var p={Pd:this.uj,Ab:this.Ab};n.L?C(n,Rj)?s=new Uj(n):C(n,Ej)&&(h=new Uj(n)):(n.requestOverlays&&(o=new Du(n,p)),n.requestTiles&&(s=new Gu(n,p)),n.requestMarkers&&(l=new Eu(n,p)),n.requestDomMarkers&&(h=new Kj(n,p)))}r=r||0,this.$h.ka.splice(e,r,o),this.Lf.ka.splice(e,r,s),this.si.ka.splice(e,r,l),this.ri.ka.splice(e,r,h),this.af=this.ib.Sa(),this.Fe=dl(this.cl,this.Sf(),this.Pf())},m.Pf=function(){var e=[];return e=e.concat(this.Lf.ka),e=e.concat(this.$h.ka),e=e.concat(this.si.ka),e=e.concat(this.ri.ka),e=e.filter(fb)},m.Po=function(){return this.o===Ju},m.Do=function(e){var n=Ki(this,Ki(this,e.zoom)+this.Ab);return e=Li(this,e),e.zoom=n,e};function Lu(e,n,r){var o=e.pixelProjection;o.Va(r),e.xd=o.projection.Re(n),o.x=o.w*e.xd.x,o.y=o.h*e.xd.y}m.Wa=function(e,n){var r=this.ya.center,o=this.ja;return this.pixelProjection.Za((e-r.x)*o,(n-r.y)*o)},Z.prototype.screenToGeo=Z.prototype.Wa,Z.prototype.Un=function(e,n){return e=this.Wa(e,n),n=this.De.Ib(),n.position=e,n},Z.prototype.Ka=function(e){var n=this.ja,r=this.ya.center,o=r.x*n;r=r.y*n,e=this.pixelProjection.Gb(e);var s=this.pixelProjection.w;return new L(Fb((e.x-Fb(e.x/s)*s+o)/n),Fb((e.y+r)/n))},Z.prototype.geoToScreen=Z.prototype.Ka,Z.prototype.C=function(e,n){var r=this.rl[e||4];e=this.pixelProjection;var o=r.left-n,s=e.Za(o,r.top-n),l=r.right+n;return n=e.Za(l,r.bottom+n),l-o>=e.w&&(s.lng=-(n.lng=180)),Ge(s,n)},Z.prototype.La=function(e,n,r,o){var s=[],l=this.ja,h;for(e*=l,n*=l,l=[this.$h,this.Lf,this.si,this.ri],h=l.length;h--&&(!r||!s.length);)s=this.Mp(s,l[h].ka,e,n,r);o(s)},Z.prototype.getObjectsAt=Z.prototype.La,m=Z.prototype,m.Mp=function(e,n,r,o,s){for(var l=n.length,h;l--&&!((h=n[l])&&h.La&&(e=e.concat(h.La(r,o,s)),e.length&&s)););return e},m.xe=z,m.Sf=function(){var e=this.rl[2];return{w:e.right-e.left,h:e.bottom-e.top}},m.mg=function(){var e=this.Fe.length,n;Z.g.mg.call(this);var r=this.Sf();this.Xb.set(0,0);var o=r.w;for(n=r.h;e--;){r=this.Fe[e];var s=r.mc();s.w===o&&s.h===n||r.Uk(o,n)}this.xe=new th(o,n),this.ba()},m.getCapabilities=function(){return Fu},Z.prototype.getCapabilities=Z.prototype.getCapabilities,m=Z.prototype,m.Lk=function(){this.sa&&this.sa.R||uj()-this.$j<this.Kg&&!this.ne?this.rh=sj(this.vg):(this.ne&&(this.mi(),this.qj()),this.o=Ju)},m.mi=function(){this.$h.Pe.length=0,this.Lf.Pe.length=0,this.si.Pe.length=0,this.ri.Pe.length=0},m.vg=function(){var e;this.ef&&this.ef.before();var n=this.Lf.ka,r=this.ya.center.clone().scale(this.ja).round(),o=this.C(1,0),s=this.C(1,Nu),l=this.zoom,h=l-this.Ab,p=this.pixelProjection,d=this.Cw,g=this.Bw,y=n[0];n=this.Xb;var v=this.Fe.length,_=this.af;for(e=_.length;v--;){var w=this.Fe[v];C(w,Tj)&&w.clear()}if(y){if(d)for(;d;)v=l-d,y.L(o,r,p,v,!0,n),--d;if(g&&this.xs)for(w=1;w<=g&&(v=l+w,p.Va(v),d=this.C(2,0),p.Va(l),!y.L(d,r,p,v,!0,n));w++);}for(this.Kg=Iu;e--;)p=_[e],C(p,yi)&&p.D&&p.D.xk(s,h);o=this.Ln(o,r,l,!1,n,Ou,this.Lf,this.$h),r=this.Ln(s,r,h,!1,n,Pu,this.si,this.ri),this.ne=o&&r,this.sa&&this.sa.R&&this.Fo(),this.uf||(this.uf=this.De.Ib()),this.uf.bounds=this.C(4,0),this.De.rb(this.uf),this.uf=null,this.xe&&(this.ya.rb(this.xe),this.xe=z),l<this.hv?this.xs=!0:this.av&&(this.xs=!1),this.hv=l,this.av=o,this.ef&&this.ef.after(),this.Lk()},m.Ln=function(e,n,r,o,s,l,h){var p=Array.prototype.slice.call(arguments,6),d=p.length,g=p[0].ka.length,y=d*g,v=!!y,_;for(_=0;_<y;_++){if(l===Ou)var w=_%d,I=Math.floor(_/d);else w=Math.floor(_/g),I=_%g;var G=p[w].ka[I];w=p[w].Pe,G&&(G=G.L(e,n,this.pixelProjection,r,o,s,this.Ka),G===Mg.ACTIVE&&(this.Kg=1/0),G!==Mg.DONE||w[I]||(this.qj(this.af[I]),w[I]=!0),w[I]||(v=!1))}return v},m.qj=function(e){this.dispatchEvent({type:this.j.Us,target:e||this})},m.disposeInternal=function(){var e=this.ib.Sa()[0],n=this.ya;tj(this.rh),this.bd(!0),e&&Ji(this,e,!1),this.Pf().forEach(function(r){r.l()}),n.element&&n.element.removeChild(this.qc),this.qc=null,this.o=3,Z.g.disposeInternal.call(this)},m.ba=function(){this.$j=uj(),this.Po()&&(this.ne=!1,this.o=1,this.Lk())},m.zc=function(e,n){this.Sg(e*this.ja,n*this.ja),this.Xb.set(0,0),this.rb(),this.ba()},m.Sg=function(e,n){var r=this.pixelProjection,o=this.xd;r.x=dc(r.x+e,r.w),r.y=Eb(0,Db(r.w,r.y+n)),o.x=r.x/r.w,o.y=r.y/r.h},m.Ng=function(e,n,r){e=Ki(this,Ki(this,e)+this.Ab),this.sb(e,n,r)},Z.prototype.zoomAt=Z.prototype.Ng,Z.prototype.sb=function(e,n,r){var o=this.ja,s=this.ya.center;n===+n&&r===+r?(n=(n-s.x)*o,r=(r-s.y)*o,this.Xb.set(n,r),this.Sg(n,r),this.pixelProjection.Va(e),this.Sg(-n,-r)):(this.Xb.set(0,0),this.pixelProjection.Va(e)),this.zoom=e,this.rb(),this.ba()};function Mu(e,n,r,o){var s=e.getCapabilities().lookAt.zoom.max,l=n.wb(),h=o||l;if(n.Im()||r&&o)r=r===B?s:r;else{var p=new zh(e.pixelProjection.projection);p.Va(s);var d=p.Gb(n.Lc()).round(),g=p.Gb(n.Jc()).round();s=p.w,n.pc()&&(d.x-=s),o?(l=p.Gb(h),n=2*Eb(l.x-d.x,g.x-l.x),d=2*Eb(l.y-d.y,g.y-l.y)):(n=g.x-d.x,d=g.y-d.y,h=l),r===B&&(l=e.rl[4],r=l.right-l.left,l=l.bottom-l.top,r=-8+Db(Jb(r/n*s)/Tb,Jb(l/d*s)/Tb)-e.Ab,r=Ki(e,r))}return{zoom:Gb(r),position:h}}Z.prototype.Jg=function(){this.bd(!0),this.T.R&&this.hc(!0),this.ma.R&&this.ic(!0),this.bd(!0)},Z.prototype.Id=function(e,n){this.Jg(),this.Rk(n),this.ma.start(e,!!n)},Z.prototype.startInteraction=Z.prototype.Id,Z.prototype.Rk=function(e){if(e){var n={};n.wk=e.power,n.tj=e.ease,n.duration=e.duration,this.ta=n}};function Ku(e,n){return Ki(e,Ki(e,n-e.Ab)+e.Ab)}Z.prototype.vd=function(e,n,r,o,s){var l=!1;this.ma.R&&(n=this.ma.store(e,n,r,o,s),this.ma.$d(Ii.COORD)&&(e=this.ma.Ah(),0<Ok(e)&&(this.zc(-e.x,-e.y),l=!0)),n&&this.ma.$d(Ii.ZOOM)&&(e=this.ma.im(),n=this.ma.jm(),n=Jb(Lb(2,this.zoom)*n)/Tb,n!==this.zoom&&(n=Ku(this,n),this.sb(n,e.x,e.y),l=!0)),l&&this.ba())},Z.prototype.interaction=Z.prototype.vd,Z.prototype.ic=function(e){var n=this;if(this.ma.R&&!e){if(this.ta){e=this.ma.nc();var r=this.ma.Mf(),o=this.ta.duration,s=(this.ta.wk||1)*e,l=new Qj(-s/(0<o?o:1),s);!E(r.x)&&!E(r.y)&&0<s&&n.ma.$d(Ii.COORD)&&this.ad(function(h){s=l.Ij(h*o),E(s)||n.zc(Fb(-r.x*s),Fb(-r.y*s))},o,void 0,this.ta.tj)}this.ta=null,this.ma.clear()}},Z.prototype.endInteraction=Z.prototype.ic,Z.prototype.Hd=function(e,n,r){this.Jg(),this.T.start(n,r),this.Rk(e)},Z.prototype.startControl=Z.prototype.Hd,Z.prototype.control=function(e,n,r){if(E(+r))throw new D(this.control,2,r);if(E(e))throw new D(this.control,0,e);if(E(n))throw new D(this.control,1,n);this.T.R&&this.T.set(e,n,r,0,0,0)},Z.prototype.control=Z.prototype.control,Z.prototype.hc=function(e,n){var r=this,o;if(this.T.R){this.bd(!0);var s=uj(),l=s-this.kj;if(1<=l){var h=rj(this.T);this.Ri(h,l)}if(!this.ta||e||n)typeof n=="function"&&(e=this.Ib(),e.zoom=this.zoom-this.Ab,n(e),e.zoom+=this.Ab,this.Go(e));else{n=this.T.nc();var p=this.T.Mf(),d=this.ta.duration,g=(this.ta.wk||1)*n,y=new Qj(-g/(0<d?d:1),g);!E(p.Lb)&&!E(p.Mb)&&0<g&&this.ad(function(v,_,w,I){s&&(w=I-s,s=0),g=y.Ij(v*d)*w,E(g)||((o=p.Nb*g)&&r.sb(Ku(r,r.zoom+o),r.T.Ug,r.T.Vg),r.zc(Fb(p.Lb*g),Fb(p.Mb*g)))},d,void 0,this.ta.tj)}this.T.reset()}},Z.prototype.endControl=Z.prototype.hc,m=Z.prototype,m.Go=function(e){var n=this,r=this.xd,o=this.pixelProjection.projection.Re(e.position),s=this.pixelProjection.ci(o),l=s.y;s=s.x;var h=e.zoom;r=this.pixelProjection.ci(r),e=r.y;var p=r.x;r=this.zoom;var d=this.T.nc(),g=this.T.Ug,y=this.T.Vg,v=0;if(s=this.Fj(p,s),s-=p,l-=e,r=h-r,e=Kb(s*s+l*l+r*r),d!==0&&e!==0){var _=s/e,w=l/e,I=r/e,G=d*d/(2*e);this.ad(function(_t,_r){var _o;_t!==1?(_t=d*_r-G*_r*_r/2,_r=_t-v,(_o=I*_r)&&(_o=Ku(n,n.zoom+_o),n.sb(Ku(n,_o),g,y)),n.zc(Fb(_*_r),Fb(w*_r)),v=_t):(n.xd=o,n.sb(Ku(n,h),g,y),n.rb(),n.ba())},2*e/d)}},m.fg=function(e){var n=this,r=e.mt;this.Xb.set(0,0),r.Lb||r.Mb||r.Nb?(this.kj=uj(),this.ad(function(o,s,l,h){n.kj=h,n.Ri(r,l)},Number.POSITIVE_INFINITY),this.ba()):this.bd(!0)},m.Ri=function(e,n){n=n||0,e.Nb&&this.sb(Ku(this,this.zoom+e.Nb*n),this.T.atX,this.T.atY),this.zc(e.Lb*n,e.Mb*n)},m.ad=function(e,n,r,o){this.sa&&this.sa.R&&this.sa.stop(!0),this.sa=new jl(this,e,n,r,o),this.sa.start()},m.bd=function(e){this.sa&&this.sa.R&&this.sa.stop(e)},m.kp=function(){},Z.prototype.enter=Z.prototype.kp,Z.prototype.pp=function(e){Hi(this.qc,e)},Z.prototype.exit=Z.prototype.pp,Z.prototype.capture=function(e,n,r,o){var s=this.qc.ownerDocument.createElement("canvas"),l=s.getContext("2d"),h=this.ja;for(s.width=(r-e)*h,s.height=(o-n)*h,r=0;r<this.Fe.length;r++)o=this.Fe[r],C(o,Tj)&&l.drawImage(o.A(),-e*h,-n*h);return Bd(s)};var Pu=0,Ou=1,Iu=1e3,Nu=256;function Qu(e){var n;if(e)for(Ru={},n=e.length;n--;)Ru[e[n]]=!0;this.hx={}}var Su,Ru={};Qu.prototype.parse=function(e,n,r){var o,s,l,h,p;Su=!1;try{r=JSON.parse(r)}catch{Su=!0}if(r&&(o=r.metadata)){var d={spatials:[]};for(s in o)if((r=!Ru[s]&&(l=Tu[s]))&&((h=o[s])||(Su=!0,h=void 0),r=h),r)for(r=h.length;r--;){var g;(g=h[r])||(Su=!0,g=void 0),(p=g)&&l(n,e,this,s,p,d)}}else Su=!0;return Su?void 0:d},Qu.prototype.parse=Qu.prototype.parse;var Tu={"street labels":function(e,n,r,o,s,l){var h;if((h=s.vertices)||(Su=!0,h=void 0),h){var p,d=h.length,g;if((g=0<d)||(Su=!0,g=void 0),g)for(p=Array(d/2);d;){var y=h[--d];g=h[--d],p[d/2]=new L(g,y)}p=p?{Rc:[p]}:B,d=+s["font size"]/e.lb(),h=r.hx[d],h||(Uu.lineWidth=d,h=r.hx[d]=r.gh.fu(Uu)),Vu(e,n,p,!1,h,s,o,l)}delete s.vertices},"city center labels":function(e,n,r,o,s,l){Vu(e,n,Wu(s,new ig([])),!0,r.gh,s,o,l)},labels:function(e,n,r,o,s,l){var h;if((h=s["bounding boxes"])||(Su=!0,h=void 0),h){for(var p=h.length,d=new ig([]),g;p--;){var y;(y=h[p])||(Su=!0,y=void 0),(g=y)&&Wu(g,d)}Vu(e,n,d,!0,r.gh,s,o,l)}delete s["bounding boxes"]},buildings:function(e,n,r,o,s,l){var h=s.id,p=n.Jn[h],d,g,y,v=[],_=[];if((d=s)||(Su=!0,d=void 0),d&&((g=d.vertices)||(Su=!0,g=void 0),g)){var w;(w=d.polygons)||(Su=!0,w=void 0),(y=w)&&v.push.apply(v,Xu(g,y)),(d=d.outlines)||(Su=!0,d=void 0),(y=d)&&_.push.apply(_,Xu(g,y))}y=v.length,v.push.apply(v,_),_=new ig(v,ac,y),(v=v.length)||(Su=!0,v=void 0),v&&(p?(jp(p,e,[_]),l.spatials.push(p)):(p=Vu(e,n,_,!0,r.gh,s,o,l,h),n.Y(p)))}};Tu["transit stops"]=Tu.POIs=Tu.labels;var Yu=["box 2","box 1","annotation box","icon box"];function Wu(e,n){for(var r=Yu.length,o,s;r--;)if(o=Yu[r],s=e[o]){var l=s[0],h=s[1],p=s[2];s=s[3],n.Rc.push([new L(l,h),new L(l+p,h),new L(l+p,h+s),new L(l,h+s)]),delete e[o]}return n}function Xu(e,n){var r=n.length,o,s,l;if(0<r){for(s=Array(r);r--;)if((o=n[r])||(Su=!0,o=void 0),o){var h=o.length;if(0<h)for(s[r]=l=Array(h);h--;){var p=2*o[h];l[h]=new L(e[p],e[p+1])}}}return s||[]}var Zu={};function Vu(e,n,r,o,s,l,h,p,d){return Zu.style=s,o=new fp(n,o,d,Zu),r&&jp(o,e,[r]),$u(l),l.category=h,o.setData(l),p.spatials.push(o),o.ea(n),o}Qu.prototype.gh=new tg({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Uu={};function $u(e){var n,r=!1;switch(typeof e){case"object":if(e instanceof Array)for(n=e.length;n--;)$u(e[n])?r=!0:delete e[n];else if(e)for(n in e)$u(e[n])?r=!0:delete e[n];break;case"number":r=!0;break;default:r=!!e}return r}function av(e,n,r){r=r||{},n=n||{};var o=r.tileType||"maptile",s=r.scheme||"normal.day";if(R.call(this,{min:0,max:20}),n.pois===!0&&(n.pois="!F"),this.Fa=n,!(e&&e instanceof bv))throw Error("InvalidArgument: service required");this.$=e,this.Be=A(this.Be,this),this.$.addEventListener("versionupdate",this.Be),this.kd=e.i().clone().v(o+"/"+e.fb+"/"+s).B(cv).B(n),this.$c=e.$c||null,this.na=r.pixelRatio||r.pixelratio||Xd(),this.tileSize=r.tileSize||256,this.tileType=o,this.scheme=s,this.vs=0,this.Ad=new np(new Qu(r.categoryFilter)),this.Ad.ea(this),this.ge=A(this.ge,this),this.Ad.addEventListener("update",this.ge),this.Xe=!1,R.call(this,{min:0,max:20}),this.Yn(new Qi(r.tileCacheSize||256,A(this.je,this)))}u(av,R),t("H.service.metaInfo.TileProvider",av),av.prototype.je=function(e,n){e=n.bb();for(var r=e.length,o;r--;)o=e[r],delete o.Fk[n.key],o.release();n.data&&(Eo.push(n.Hn(),this.tileSize),n.In())},av.prototype.ge=function(){this.dispatchEvent("update")},av.prototype.s=function(e,n,r,o,s){var l=this.kd.clone(),h=this.$c,p=this.tileSize,d=this.getTileKey(e,n,r);d=this.Sb().get(d);var g;if(d&&!d.Jh()){o(Eo.pop(this.tileSize),null);var y={cancel:function(){}}}else{h&&l.Ha(h[(r+n+e)%h.length]),l.v(r+"/"+e+"/"+n+"/"+p+"/png8");var v=Co.setTimeout(function(){g=new Xg("text/plain",l.toString()),g.then(function(_){o(null,_)},s)},500)}return this.Xe||(mo(av,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.Xe=!0),y||{cancel:function(){g?g.cancel():Co.clearTimeout(v)}}},av.prototype.requestInternal=av.prototype.s,av.prototype.nd=function(e,n,r,o,s){var l=this.Ad,h=o||Eo.pop(this.tileSize);if(o)e=this.Sb().get(this.getTileKey(e,n,r)),e.L(o);else if(o=e=new kk(this.Ud(e,n,r),e,n,r,this.tileSize,this.na,r+this.vs,l),delete o.Ki,o.ul=s,e.L(h))for(s=e.bb(),h=s.length;h--;)s[h].Sn();else Eo.push(h,this.tileSize);return e},av.prototype.createTileInternal=av.prototype.nd,av.prototype.l=function(){this.Ad.l(),this.$.removeEventListener("versionupdate",this.Be),R.prototype.l.call(this)},av.prototype.dispose=av.prototype.l,av.prototype.Be=function(){var e=this.$;this.kd=e.i().clone().v(this.tileType+"/"+e.fb+"/"+this.scheme).B(cv).B(this.Fa),this.reload(!1)};var cv={metadata:"metaonly",mgen:"2"};function bv(e){bv.g.constructor.call(this,bv,e),e=Io(this,e),this.$c=e.shards,(this.Qa=e.ignoreTypes?null:e.type)&&this.i().Ha(this.Qa),this.fb=e.version,this.pr={},this.ec=new oo,this.fb==="newest"&&this.rp()}u(bv,Ho),t("H.service.metaInfo.Service",bv),bv.prototype.Ca=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},bv.CONFIG_KEY="metaInfo";function dv(e,n){for(var r={},o=e[n+"s"][n],s=o.length;s--;)r[o[s].id]=o[s];e[n+"s"]=r}bv.prototype.uu=function(){return this.Qa},bv.prototype.Wp=function(){return this.fb},bv.prototype.getVersion=bv.prototype.Wp,bv.prototype.cs=function(e){this.fb=e},bv.prototype.U=function(){return this.ec},bv.prototype.getCopyrights=bv.prototype.U,bv.prototype.ss=function(e){e=e.response;var n;if(dv(e,"map"),dv(e,"scheme"),dv(e,"tiletype"),dv(e,"format"),dv(e,"resolution"),dv(e,"language"),this.fb==="newest"&&this.Qa!=="traffic")for(n in e.maps)e.maps[n].hash&&e.maps[n].newest&&(this.cs(e.maps[n].hash),this.dispatchEvent("versionupdate"));this.fq=e,this.dispatchEvent("infoupdate")},bv.prototype.rp=function(){var e=this,n=this.i().clone().v("info").B({output:"json"});this.$c&&n.Ha(this.$c[0]),this.s(n,function(r){e.ss(r)},function(r){throw r})},bv.prototype.Lj=function(){return this.fq},bv.prototype.getInfo=bv.prototype.Lj,bv.prototype.oj=function(e,n,r,o,s,l){return new av(this,o,{tileSize:e,pixelRatio:n,categoryFilter:r,tileType:s,scheme:l})},bv.prototype.createTileProvider=bv.prototype.oj,bv.prototype.Od=function(e,n,r,o,s,l){return new yk(this.oj(e,n,r,o,s,l))},bv.prototype.createTileLayer=bv.prototype.Od,X.prototype.lu=function(e){return this.Ta(bv,e)},X.prototype.getMetaInfoService=X.prototype.lu,function(){var e=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(n,r,o,s,l,h){var p=e.call(this,n,r,o,s,l,h),d={},g=this.lu();typeof n=="object"&&(h=n,n=h.tileSize,r=h.ppi,o=h.lg,s=h.lg2,l=h.style,h=h.pois),n=n||256;var y=r===320?2:1;if(0>[72,250,320,500].indexOf(+r)){if(r!==B)throw new D(this.Xl,1,r)}else d.ppi=+r;return o&&(d.lg=o),s&&(d.lg2=s),l&&(d.style=l),h&&(d.pois=h),p.raster.normal.metaInfo=g.Od(n,y,["buildings"],d),p}}(),H.__bootstrap__=`/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var l;function ba(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ca=ba(this);function da(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
var ea="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function fa(a,b){if(b)a:{var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ea(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.fc=f;ea(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.fc};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ca[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ea(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(da(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ka(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.keys",function(a){return a?a:function(){return ka(this,function(b){return b})}});var la;
if("function"==typeof Object.setPrototypeOf)la=Object.setPrototypeOf;else{var ma;a:{var na={a:!0},oa={};try{oa.__proto__=na;ma=oa.a;break a}catch(a){}ma=!1}la=ma?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var pa=la;fa("Object.setPrototypeOf",function(a){return a||pa});var p=this||self;
function qa(a,b,c,d){a=a.split(".");d=d||p;a[0]in d||"undefined"==typeof d.execScript||d.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)if(a.length||void 0===b)d=d[e]&&d[e]!==Object.prototype[e]?d[e]:d[e]={};else if(!c&&ra(b)&&ra(d[e]))for(var f in b)b.hasOwnProperty(f)&&(d[e][f]=b[f]);else d[e]=b}function sa(){}function ta(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ra(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}
function ua(a){return Object.prototype.hasOwnProperty.call(a,ya)&&a[ya]||(a[ya]=++za)}var ya="closure_uid_"+(1E9*Math.random()>>>0),za=0;function Aa(a,b,c){return a.call.apply(a.bind,arguments)}function Ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}
function Ca(a,b,c){Ca=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Aa:Ba;return Ca.apply(null,arguments)}function Da(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function r(a,b){qa(a,b,!0,void 0)}
function Fa(a,b){function c(){}c.prototype=b.prototype;a.Z=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Cd=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}};function Ga(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ga);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}Fa(Ga,Error);Ga.prototype.name="CustomError";var Ha=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};function Ia(){var a=Ja,b;for(b in a)return!1;return!0}function Ka(a){var b={},c;for(c in a)b[c]=a[c];return b}var La="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ma(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<La.length;f++)c=La[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Na=this;var Oa=Ca,Pa=String,Qa=Na.Object.freeze||function(a){return a},t=[].pop(),Ra=/x/.exec("");function Sa(a){return Pa(a).split(","!==t?",":" ")}var Ta="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ua(a,b,c,d){if(!(b=a instanceof b)&&c)throw new x(c,d,void 0!==t?void 0:a);return b}function Va(a){return"function"==ta(a)}function Wa(a,b,c,d){var e;if(!(e="Array"===Xa(a))&&b)throw new x(b,c,d!==t?d:a);return e}
r("H.lang.isArray",function(a,b,c,d){return Wa(a,b,c,d)});function Ya(a){return"string"===typeof a}r("H.lang.isString",Ya);var $a=isNaN;function ab(a){return a===+a}r("H.lang.isNumber",ab);r("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Xa(a){var b=Object[Ta[0]][Ta[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var bb=[];0>bb.indexOf(bb)&&bb.push(bb);
function cb(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Na.H},c="",d=bb.slice());db(b,!0,function(h,k){try{if(g=h[k],k=eb(h,g),!(ra(g)&&g.window===g&&g.self===g||ra(g)&&0<g.nodeType&&Va(g.cloneNode))&&ra(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=cb(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ta[0]+".","#"):"~"+(Va(a)?fb(a)+"()":Xa(a)));return e}
function eb(a,b){var c=[];db(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(gb)[0]}function gb(a,b){return b.length-a.length}var hb=Object[Ta[0]][Ta[2]];function db(a,b,c){var d;if(a){for(e in a)if((!b||hb.call(a,e))&&c(a,e,!0))return;for(d=Ta.length;d--;){var e=Ta[d];if((!b||hb.call(a,e))&&c(a,e,!1))break}}}function fb(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function ib(a,b,c){c[b]="#"+b}
function x(a,b,c){var d=arguments.length;b=b!==t?+b:b;if(b!==t){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Sa(e[1].replace(/\\s+/g,"")):[];e.forEach(ib);e=e[b]||"#"+b}var f=a?cb(a):"";d=2<d?Pa(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,x.prototype);return d}Fa(x,Error);r("H.lang.InvalidArgumentError",x);x.prototype.name="InvalidArgumentError";
function jb(a,b){var c=[];a&&c.push(cb(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,jb.prototype);return c}Fa(jb,Error);r("H.lang.IllegalOperationError",jb);jb.prototype.name="IllegalOperationError";var kb={};function lb(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function mb(a){delete kb[a];this.postMessage(a)}function nb(a,b,c){if(Va(b))var d=b;else try{d=self.eval("("+b+")"),Va(d)||(d=null)}catch(e){}d?(kb[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function ob(a){this.Wb=a&&a[0];this.Ua=a&&a[1];this.kc=a&&a[2]||[]}ob.prototype.postError=function(a){this.postMessage(a,t,0)};
ob.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.Wb,taskId:this.Ua,type:c===t?1:c,data:a},b||t)};function pb(a,b,c){if(!Ya(a))throw new x(pb,0,"InvalidArgument");if(!Va(b))throw new x(pb,1,"InvalidArgument");var d=qb++;rb[d]={mimeType:c||sb,nc:b};(new ob(["3",d,[]])).postMessage(a,[],2)}var rb={},qb=0;
function tb(a,b){var c=a;if(rb[this.Ua]){var d=rb[this.Ua];var e=d.nc;delete rb[this.Ua];if(b)e(null,b);else{if(d.mimeType===ub){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var sb=0,ub=1;function y(){}r("H.util.ICache",y);y.prototype.add=function(){};y.prototype.add=y.prototype.add;y.prototype.get=function(){};y.prototype.get=y.prototype.get;y.prototype.fb=function(){};y.prototype.drop=y.prototype.fb;y.prototype.forEach=function(){};y.prototype.forEach=y.prototype.forEach;y.prototype.ia=function(){};y.prototype.removeAll=y.prototype.ia;y.prototype.ya=function(){};y.prototype.registerOnDrop=y.prototype.ya;y.prototype.bb=function(){};y.prototype.deRegisterOnDrop=y.prototype.bb;function z(a,b,c){this.ta=[];b&&this.ya(b);if(c&&!Va(c))throw new x(z,2,c);this.J=0;this.filter=c;this.s={};this.qa=this.ea=null;this.zb(a)}r("H.util.Cache",z);z.prototype.add=function(a,b,c){var d,e;c=+c;if(!ab(c)||0>c)throw new x(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.s[a])?(d.data!==b&&vb(this,d),this.J+=c-d.size,d.size=c,d.data=b,wb(this,d)):this.s[a]=xb(this,{id:a,data:b,size:c,v:null,N:null},this.ea),yb(this);return e};z.prototype.add=z.prototype.add;
z.prototype.ya=function(a){if(!Va(a))throw new x(this.ya,0,a);this.ta.push(a)};z.prototype.registerOnDrop=z.prototype.ya;z.prototype.bb=function(a){this.ta=this.ta.filter(function(b){return b!==a})};z.prototype.deRegisterOnDrop=z.prototype.bb;z.prototype.get=function(a,b){return(a=b?this.s[a]:wb(this,this.s[a]))&&a.data};z.prototype.get=z.prototype.get;z.prototype.fb=function(a){var b;(b=this.s[a])&&zb(this,b,!0)};z.prototype.drop=z.prototype.fb;
z.prototype.forEach=function(a,b,c){var d;for(d in this.s){var e=this.s[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};z.prototype.forEach=z.prototype.forEach;z.prototype.ia=function(a){var b;for(b in this.s){var c=this.s[b];(a?a(b,c.data,c.size):1)&&zb(this,this.s[b],!0)}};z.prototype.removeAll=z.prototype.ia;z.prototype.zb=function(a){if(!(0<+a))throw new x(z.prototype.zb,0,a);this.Tb=+a;yb(this);return this};z.prototype.setMaxSize=z.prototype.zb;z.prototype.Jc=function(){return this.Tb};
z.prototype.getMaxSize=z.prototype.Jc;z.prototype.Ec=function(){return this.J};z.prototype.getCurrentSize=z.prototype.Ec;function wb(a,b){b&&(a.ea=xb(a,b,a.ea));return b}function yb(a){for(;a.J>a.Tb&&a.qa;)zb(a,a.qa,!0)}function xb(a,b,c){if(c!==b){(b.v||b.N)&&zb(a,b,!1);if(b.v=c)b.N=c.N,c.N=b;b.N||(a.ea=b);b.v||(a.qa=b);a.J+=b.size}return b}function zb(a,b,c){var d=b.N,e=b.v;if(d||e||b==a.ea&&b==a.qa)d?d.v=e:a.ea=e,e?e.N=d:a.qa=d,a.J-=b.size,c&&(delete a.s[b.id],vb(a,b));b.v=b.N=null}
function vb(a,b){for(var c=a.ta.length;c--;)a.ta[c].call(a,b.id,b.data,b.size)};function Ab(a){p.setTimeout(function(){throw a;},0)};function Cb(a,b){this.$c=100;this.rc=a;this.md=b;this.Qa=0;this.Ma=null}Cb.prototype.get=function(){if(0<this.Qa){this.Qa--;var a=this.Ma;this.Ma=a.next;a.next=null}else a=this.rc();return a};Cb.prototype.put=function(a){this.md(a);this.Qa<this.$c&&(this.Qa++,a.next=this.Ma,this.Ma=a)};function Db(){this.Ya=this.ja=null}Db.prototype.add=function(a,b){var c=Eb.get();c.set(a,b);this.Ya?this.Ya.next=c:this.ja=c;this.Ya=c};Db.prototype.remove=function(){var a=null;this.ja&&(a=this.ja,this.ja=this.ja.next,this.ja||(this.Ya=null),a.next=null);return a};var Eb=new Cb(function(){return new Fb},function(a){return a.reset()});function Fb(){this.next=this.scope=this.hb=null}Fb.prototype.set=function(a,b){this.hb=a;this.scope=b;this.next=null};
Fb.prototype.reset=function(){this.next=this.scope=this.hb=null};function Gb(a,b){return-1!=a.indexOf(b)};var A;a:{var Hb=p.navigator;if(Hb){var Ib=Hb.userAgent;if(Ib){A=Ib;break a}}A=""};function Jb(a){Jb[" "](a);return a}Jb[" "]=sa;var Kb=Gb(A,"Gecko")&&!(Gb(A.toLowerCase(),"webkit")&&!Gb(A,"Edge"))&&!(Gb(A,"Trident")||Gb(A,"MSIE"))&&!Gb(A,"Edge"),Lb=Gb(A.toLowerCase(),"webkit")&&!Gb(A,"Edge");function Mb(){var a=document;var b="IFRAME";"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase());return a.createElement(b)};var Nb;
function Ob(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Gb(A,"Presto")&&(a=function(){var e=Mb();e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=Ca(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},this);f.addEventListener("message",e,
!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!Gb(A,"Trident")&&!Gb(A,"MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Jb;c.Jb=null;e()}};return function(e){d.next={Jb:e};d=d.next;b.port2.postMessage(0)}}return function(e){p.setTimeout(e,0)}};function Pb(a,b){Qb||Rb();Sb||(Qb(),Sb=!0);Tb.add(a,b)}var Qb;function Rb(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Qb=function(){a.then(Ub)}}else Qb=function(){var b=Ub;"function"!==typeof p.setImmediate||p.Window&&p.Window.prototype&&!Gb(A,"Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(Nb||(Nb=Ob()),Nb(b)):p.setImmediate(b)}}var Sb=!1,Tb=new Db;function Ub(){for(var a;a=Tb.remove();){try{a.hb.call(a.scope)}catch(b){Ab(b)}Eb.put(a)}Sb=!1};function Vb(a){this.u=Wb;this.Zb=void 0;this.ba=this.I=this.W=null;this.Ka=this.gb=!1;if(a!=sa)try{var b=this;a.call(void 0,function(c){Xb(b,Yb,c)},function(c){Xb(b,Zb,c)})}catch(c){Xb(this,Zb,c)}}var Wb=0,Yb=2,Zb=3;function $b(){this.next=this.context=this.ha=this.ua=this.R=null;this.Fa=!1}$b.prototype.reset=function(){this.context=this.ha=this.ua=this.R=null;this.Fa=!1};var ac=new Cb(function(){return new $b},function(a){a.reset()});
function bc(a,b,c){var d=ac.get();d.ua=a;d.ha=b;d.context=c;return d}function cc(a,b,c){dc(a,b,c,null)||Pb(Da(b,a))}function ec(a){return new Vb(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],cc(k,Da(f,h),g);else b(e)})}function fc(){var a,b,c=new Vb(function(d,e){a=d;b=e});return new gc(c,a,b)}Vb.prototype.then=function(a,b,c){return hc(this,"function"===typeof a?a:null,"function"===typeof b?b:null,c)};
Vb.prototype.$goog_Thenable=!0;Vb.prototype.cancel=function(a){if(this.u==Wb){var b=new ic(a);Pb(function(){jc(this,b)},this)}};function jc(a,b){if(a.u==Wb)if(a.W){var c=a.W;if(c.I){for(var d=0,e=null,f=null,g=c.I;g&&(g.Fa||(d++,g.R==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.u==Wb&&1==d?jc(c,b):(f?(d=f,d.next==c.ba&&(c.ba=d),d.next=d.next.next):mc(c),nc(c,e,Zb,b)))}a.W=null}else Xb(a,Zb,b)}function oc(a,b){a.I||a.u!=Yb&&a.u!=Zb||pc(a);a.ba?a.ba.next=b:a.I=b;a.ba=b}
function hc(a,b,c,d){var e=bc(null,null,null);e.R=new Vb(function(f,g){e.ua=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.ha=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof ic?g(h):f(k)}catch(m){g(m)}}:g});e.R.W=a;oc(a,e);return e.R}Vb.prototype.td=function(a){this.u=Wb;Xb(this,Yb,a)};Vb.prototype.ud=function(a){this.u=Wb;Xb(this,Zb,a)};
function Xb(a,b,c){a.u==Wb&&(a===c&&(b=Zb,c=new TypeError("Promise cannot resolve to itself")),a.u=1,dc(c,a.td,a.ud,a)||(a.Zb=c,a.u=b,a.W=null,pc(a),b!=Zb||c instanceof ic||qc(a,c)))}function dc(a,b,c,d){if(a instanceof Vb)return oc(a,bc(b||sa,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(ra(a))try{var f=a.then;if("function"===typeof f)return rc(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function rc(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function pc(a){a.gb||(a.gb=!0,Pb(a.uc,a))}function mc(a){var b=null;a.I&&(b=a.I,a.I=b.next,b.next=null);a.I||(a.ba=null);return b}Vb.prototype.uc=function(){for(var a;a=mc(this);)nc(this,a,this.u,this.Zb);this.gb=!1};
function nc(a,b,c,d){if(c==Zb&&b.ha&&!b.Fa)for(;a&&a.Ka;a=a.W)a.Ka=!1;if(b.R)b.R.W=null,sc(b,c,d);else try{b.Fa?b.ua.call(b.context):sc(b,c,d)}catch(e){tc.call(null,e)}ac.put(b)}function sc(a,b,c){b==Yb?a.ua.call(a.context,c):a.ha&&a.ha.call(a.context,c)}function qc(a,b){a.Ka=!0;Pb(function(){a.Ka&&tc.call(null,b)})}var tc=Ab;function ic(a){Ga.call(this,a)}Fa(ic,Ga);ic.prototype.name="cancel";function gc(a,b,c){this.promise=a;this.resolve=b;this.reject=c};function uc(){}r("H.util.ICancelable",uc);uc.prototype.cancel=function(){};uc.prototype.cancel=uc.prototype.cancel;function vc(a,b,c,d){this.key="";this.x=a;this.y=b;this.Sb=c;this.ra=d;this.O=fc()}vc.prototype.then=function(a,b,c){return this.O.promise.then(a,b,c)};vc.prototype.resolve=function(a){this.O.resolve(a)};vc.prototype.reject=function(a){this.O.reject(a)};vc.prototype.cancel=function(){this.O.promise.cancel()};vc.prototype.cancel=vc.prototype.cancel;function B(){}r("H.service.extension.dataView.ITable",B);B.prototype.nb=function(){};B.prototype.getMeta=B.prototype.nb;B.prototype.ob=function(){};B.prototype.getRowCount=B.prototype.ob;B.prototype.Ja=function(){};B.prototype.getRow=B.prototype.Ja;B.prototype.L=function(){};B.prototype.getColumnNames=B.prototype.L;B.prototype.lb=function(){};B.prototype.getColumn=B.prototype.lb;B.prototype.o=function(){};B.prototype.getCell=B.prototype.o;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function wc(){}r("H.service.extension.dataView.IColumn",wc);wc.prototype.o=function(){};wc.prototype.getCell=wc.prototype.o;function xc(a,b){this.Ca=a;this.qc=b}r("H.service.extension.dataView.ObjColumn",xc);xc.prototype.o=function(a){return this.Ca.o(a,this.qc)};xc.prototype.getCell=xc.prototype.o;function C(){0!=yc&&(zc[ua(this)]=this);this.na=this.na;this.G=this.G}var yc=0,zc={};C.prototype.na=!1;C.prototype.C=function(){if(!this.na&&(this.na=!0,this.K(),0!=yc)){var a=ua(this);if(0!=yc&&this.G&&0<this.G.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete zc[a]}};
C.prototype.aa=function(a,b){this.na?void 0!==b?a.call(b):a():(this.G||(this.G=[]),this.G.push(void 0!==b?Ca(a,b):a))};C.prototype.K=function(){if(this.G)for(;this.G.length;)this.G.shift()()};var Ac=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",sa,b),p.removeEventListener("test",sa,b)}catch(c){}return a}();function D(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.xa=!1}D.prototype.stopPropagation=function(){this.xa=!0};D.prototype.preventDefault=function(){this.defaultPrevented=!0};function Bc(a,b){D.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.oa=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=
b;if(b=a.relatedTarget){if(Kb){a:{try{Jb(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.offsetX=Lb||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=Lb||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,
this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:Cc[a.pointerType]||"";this.state=a.state;this.oa=a;a.defaultPrevented&&Bc.Z.preventDefault.call(this)}}
Fa(Bc,D);var Cc={2:"touch",3:"pen",4:"mouse"};Bc.prototype.stopPropagation=function(){Bc.Z.stopPropagation.call(this);this.oa.stopPropagation?this.oa.stopPropagation():this.oa.cancelBubble=!0};Bc.prototype.preventDefault=function(){Bc.Z.preventDefault.call(this);var a=this.oa;a.preventDefault?a.preventDefault():a.returnValue=!1};var Dc="closure_listenable_"+(1E6*Math.random()|0);var Ec=0;function Fc(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.La=e;this.key=++Ec;this.za=this.Ga=!1}function Gc(a){a.za=!0;a.listener=null;a.proxy=null;a.src=null;a.La=null};function Hc(a){this.src=a;this.m={};this.Ea=0}Hc.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.m[f];a||(a=this.m[f]=[],this.Ea++);var g=Ic(a,b,d,e);-1<g?(b=a[g],c||(b.Ga=!1)):(b=new Fc(b,this.src,f,!!d,e),b.Ga=c,a.push(b));return b};Hc.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.m))return!1;var e=this.m[a];b=Ic(e,b,c,d);return-1<b?(Gc(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.m[a],this.Ea--),!0):!1};
function Jc(a,b){var c=b.type;if(c in a.m){var d=a.m[c],e=Ha(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Gc(b),0==a.m[c].length&&(delete a.m[c],a.Ea--))}}Hc.prototype.ia=function(a){a=a&&a.toString();var b=0,c;for(c in this.m)if(!a||c==a){for(var d=this.m[c],e=0;e<d.length;e++)++b,Gc(d[e]);delete this.m[c];this.Ea--}return b};Hc.prototype.mb=function(a,b,c,d){a=this.m[a.toString()];var e=-1;a&&(e=Ic(a,b,c,d));return-1<e?a[e]:null};
function Ic(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.za&&f.listener==b&&f.capture==!!c&&f.La==d)return e}return-1};var Kc="closure_lm_"+(1E6*Math.random()|0),Lc={},Mc=0;function Nc(a,b,c,d,e){if(d&&d.once)Oc(a,b,c,d,e);else if(Array.isArray(b))for(var f=0;f<b.length;f++)Nc(a,b[f],c,d,e);else c=Pc(c),a&&a[Dc]?a.D.add(String(b),c,!1,ra(d)?!!d.capture:!!d,e):Qc(a,b,c,!1,d,e)}
function Qc(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=ra(e)?!!e.capture:!!e,h=Rc(a);h||(a[Kc]=h=new Hc(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=Sc();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)Ac||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Tc(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Mc++}}
function Sc(){function a(c){return b.call(a.src,a.listener,c)}var b=Uc;return a}function Oc(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)Oc(a,b[f],c,d,e);else c=Pc(c),a&&a[Dc]?a.D.add(String(b),c,!0,ra(d)?!!d.capture:!!d,e):Qc(a,b,c,!0,d,e)}function Vc(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)Vc(a,b[f],c,d,e);else d=ra(d)?!!d.capture:!!d,c=Pc(c),a&&a[Dc]?a.D.remove(String(b),c,d,e):a&&(a=Rc(a))&&(b=a.mb(b,c,d,e))&&Wc(b)}
function Wc(a){if("number"!==typeof a&&a&&!a.za){var b=a.src;if(b&&b[Dc])Jc(b.D,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Tc(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Mc--;(c=Rc(b))?(Jc(c,a),0==c.Ea&&(c.src=null,b[Kc]=null)):Gc(a)}}}function Tc(a){return a in Lc?Lc[a]:Lc[a]="on"+a}function Uc(a,b){if(a.za)a=!0;else{b=new Bc(b,this);var c=a.listener,d=a.La||a.src;a.Ga&&Wc(a);a=c.call(d,b)}return a}
function Rc(a){a=a[Kc];return a instanceof Hc?a:null}var Xc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Pc(a){if("function"===typeof a)return a;a[Xc]||(a[Xc]=function(b){return a.handleEvent(b)});return a[Xc]};function E(){C.call(this);this.D=new Hc(this);this.hc=this;this.wb=null}Fa(E,C);E.prototype[Dc]=!0;l=E.prototype;l.M=function(){return this.wb};l.Sa=function(a){this.wb=a};l.addEventListener=function(a,b,c,d){Nc(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Vc(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.M();if(c)for(b=[];c;c=c.M())b.push(c);c=this.hc;var d=a.type||a;if("string"===typeof a)a=new D(a,c);else if(a instanceof D)a.target=a.target||c;else{var e=a;a=new D(d,c);Ma(a,e)}e=!0;if(b)for(var f=b.length-1;!a.xa&&0<=f;f--){var g=a.currentTarget=b[f];e=g.da(d,!0,a)&&e}a.xa||(g=a.currentTarget=c,e=g.da(d,!0,a)&&e,a.xa||(e=g.da(d,!1,a)&&e));if(b)for(f=0;!a.xa&&f<b.length;f++)g=a.currentTarget=b[f],e=g.da(d,!1,a)&&e;return e};
l.K=function(){E.Z.K.call(this);this.D&&this.D.ia(void 0);this.wb=null};l.da=function(a,b,c){a=this.D.m[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.za&&f.capture==b){var g=f.listener,h=f.La||f.src;f.Ga&&Jc(this.D,f);d=!1!==g.call(h,c)&&d}}return d&&!c.defaultPrevented};l.mb=function(a,b,c,d){return this.D.mb(String(a),b,c,d)};r("H.util.EventTarget",E);E.prototype.Sa=E.prototype.Sa;E.prototype.setParentEventTarget=E.prototype.Sa;E.prototype.M=E.prototype.M;E.prototype.getParentEventTarget=E.prototype.M;E.prototype.addEventListener=E.prototype.addEventListener;E.prototype.addEventListener=E.prototype.addEventListener;E.prototype.removeEventListener=E.prototype.removeEventListener;E.prototype.removeEventListener=E.prototype.removeEventListener;E.prototype.dispatchEvent=E.prototype.dispatchEvent;
E.prototype.dispatchEvent=E.prototype.dispatchEvent;E.prototype.C=E.prototype.C;E.prototype.dispose=E.prototype.C;E.prototype.aa=E.prototype.aa;E.prototype.addOnDisposeCallback=E.prototype.aa;E.prototype.yc=E.prototype.da;
E.prototype.da=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=E.prototype.yc.apply(this,arguments),d&&this.M&&null===this.M()&&delete c.eventPhase;return f};E.prototype.qd=function(a){for(var b,c=this;c&&(b=c.M())&&b!==a;)c=b;b||c.Sa(a)};E.prototype.setRootParentEventTarget=E.prototype.qd;r("H.util.Event",D);D.prototype.stopPropagation=D.prototype.stopPropagation;D.prototype.stopPropagation=D.prototype.stopPropagation;D.prototype.CAPTURING_PHASE=1;D.prototype.CAPTURING_PHASE=D.prototype.CAPTURING_PHASE;D.prototype.AT_TARGET=2;D.prototype.AT_TARGET=D.prototype.AT_TARGET;D.prototype.BUBBLING_PHASE=3;D.prototype.BUBBLING_PHASE=D.prototype.BUBBLING_PHASE;D.prototype.eventPhase=0;D.prototype.eventPhase=D.prototype.eventPhase;function F(a){a=a||{};var b=a.callback;this.rb=a.label;Va(b)&&(this.callback=b);this.cb=!!a.disabled;F.Z.constructor.call(this)}Fa(F,E);r("H.util.ContextItem",F);F.prototype.Hc=function(){return this.rb};F.prototype.getLabel=F.prototype.Hc;F.prototype.pd=function(a){this.rb!==a&&(this.rb=a,this.dispatchEvent("update"));return this};F.prototype.setLabel=F.prototype.pd;F.prototype.Xc=function(){return this.cb};F.prototype.isDisabled=F.prototype.Xc;
F.prototype.od=function(a){a!==this.cb&&(this.cb=a,this.dispatchEvent("update"));return this};F.prototype.setDisabled=F.prototype.od;var Yc=new F;F.SEPARATOR=Yc;function Zc(a,b,c){this.type=a;this.data=b;this.O=fc();this.resolve=Oa(this.resolve,this);this.reject=Oa(this.reject,this);this.priority=$c;c!==t&&(this.priority=c);this.Gc().add(this)}var $c=1,ad={zd:0,Ad:$c,yd:2};l=Zc.prototype;l.then=function(a,b,c){return this.O.promise.then(a,b,c)};l.resolve=function(a){this.state=3;this.O.resolve(a)};l.reject=function(a){this.state=5;this.O.reject(a)};l.state=0;l.cancel=function(){3>this.state&&(this.Dd(),this.Gc().remove(this),this.state=4)};
Zc.prototype.cancel=Zc.prototype.cancel;function bd(a){var b;this.Y={};for(b in ad)this.Y[ad[b]]=[];this.Ba=a;this.Ba.addEventListener("allocatable",Oa(this.Lb,this))}r("H.util.JobManager",bd);var cd=Object.keys(ad).map(function(a){return ad[a]}).sort().reverse();bd.prototype.add=function(a){Ua(a,Zc,this.add,0);this.Y[a.priority].push(a);this.Lb()};bd.prototype.contains=function(a){return-1<this.Y[a.priority].indexOf(a)};
bd.prototype.remove=function(a){var b=a.priority,c=this.Y[b].indexOf(a);if(-1<c)return this.Y[b].splice(c,1),!0;a.Fb&&this.Ba.sc(a.Fb);return!1};bd.prototype.Lb=function(){cd.forEach(function(a){this.Y[a]=this.Y[a].filter(function(b){var c;if((c=this.Ba.Bd(b))!==Ra){var d=Oa(this.Ba.sc,this.Ba,c,b);b.Fb=c;b.then(d,d);b.state=b.Ed(c)?1:5}else return!0},this)},this)};var K=Math,dd=K.min,ed=K.max,fd=K.round,gd=K.floor,hd=K.ceil,id=K.abs,jd=K.log,kd=K.sqrt,L=K.pow,ld=K.exp,md=K.sin,nd=K.asin,od=K.cos,pd=K.tan,qd=K.atan,rd=K.atan2,sd=K.LN2,O=K.PI,td=O/2,ud=O/4,vd=2*O,wd=3*O,xd=O/180,yd=180/O,zd=1/0;function Ad(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}r("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-gd(a/b)*b+c});function Bd(a,b,c){return(a-=0)>c?c:a<b?b:a}r("H.math.clamp",Bd);
function Cd(a,b,c){var d=0;(d-=0)||(d=0);return b<c?a>=b-d&&a<=c+d:a>=c-d&&a<=b+d}var Dd={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};r("H.math.CoverType",Dd);
function Ed(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){e-=0;g=c[--e];f=c[--e];k=c[e?e-0-1:(d+(e-0-1))%d];h=c[e?e-0-2:(d+(e-0-2))%d];if(f>=a-0&&f<=a+0&&g>=b-0&&g<=b+0||h>=a-0&&h<=a+0&&k>=b-0&&k<=b+0)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Cd(b,g,k)&&0>=kd(L((a-h)*(g-k)-(b-k)*(f-h),2)/(L(f-h,2)+L(g-k,2)))?2:0;else if(!n&&Cd(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Cd(b,g,k)&&0>=kd(L((a-h)*(g-k)-
(b-k)*(f-h),2)/(L(f-h,2)+L(g-k,2)))?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}function Fd(a,b){return Ed(a.x,a.y,b)!==Dd.NONE}r("H.math.isPointInsidePolygon",Fd);function Gd(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==t;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}r("H.math.flatten",Gd);function Hd(a,b,c){Hd.Z.constructor.call(this,a,c);this.message=b}Fa(Hd,D);r("H.util.ErrorEvent",Hd);function Id(a,b,c){Id.Z.constructor.call(this,a,c);this.data=b}Fa(Id,D);r("H.util.DataEvent",Id);function Jd(a,b,c){var d=[],e=arguments.length;a&&d.push(cb(a));1<e&&(e=2<e&&Wa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Jd.prototype);return d}Fa(Jd,Error);r("H.lang.OutOfRangeError",Jd);Jd.prototype.name="OutOfRangeError";function Kd(a){if(Na.document){var b=document.createElement("canvas");b.width=b.height=1;b.getContext("2d",{Fd:a})}}r("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ra,void 0);r("H.util.eval",function(a){return eval(a)});r("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.Dc?0:b.Dc()))throw Error("goog.provide cannot be used within a module.");qa(a,void 0,void 0)});function Ld(){this.v=0}
Ld.prototype.next=function(a){if(9007199254740992===this.v)throw new Jd(a,this.v,[0,9007199254740991]);return this.v++};var Md=new Ld;Oa(Md.next,Md);var Nd=Qa([]);Qa({});Kd(!0);Kd(!1);function Od(){}r("H.service.extension.dataView.IRow",Od);Od.prototype.L=function(){};Od.prototype.getColumnNames=Od.prototype.L;Od.prototype.o=function(){};Od.prototype.getCell=Od.prototype.o;Od.prototype.pb=function(){};Od.prototype.getTable=Od.prototype.pb;function Pd(a,b){this.Ca=a;this.nd=b}r("H.service.extension.dataView.ObjRow",Pd);Pd.prototype.L=function(){return this.Ca.L()};Pd.prototype.getColumnNames=Pd.prototype.L;Pd.prototype.o=function(a){return this.Ca.o(this.nd,a)};Pd.prototype.getCell=Pd.prototype.o;Pd.prototype.pb=function(){return this.Ca};Pd.prototype.getTable=Pd.prototype.pb;function Q(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):t);this.P=a;if(b)for(this.ca=b,this.ab=a=Object.create(Ra,void 0),d=b.length;d--;)a[b[d]]=!0;c!==t&&(this.ub=c)}r("H.service.extension.dataView.ObjTable",Q);l=Q.prototype;l.ub=t;l.P=t;l.ca=t;l.ab=t;l.nb=function(){return this.ub};Q.prototype.getMeta=Q.prototype.nb;Q.prototype.ob=function(){return this.P?this.P.length:0};Q.prototype.getRowCount=Q.prototype.ob;Q.prototype.Ja=function(a){var b=this.P;return b&&b[a]?new Pd(this,a):t};
Q.prototype.getRow=Q.prototype.Ja;Q.prototype.L=function(){return this.ca||Nd};Q.prototype.getColumnNames=Q.prototype.L;Q.prototype.lb=function(a){return this.ab[a]?new xc(this,a):t};Q.prototype.getColumn=Q.prototype.lb;Q.prototype.o=function(a,b){var c=this.P;return(a=c&&this.ab[b]&&c[a])&&a[b]};Q.prototype.getCell=Q.prototype.o;
Q.prototype.concat=function(){var a=arguments.length,b,c=this.ca,d=""+this.ca,e=(this.P||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Q))throw new x(this.concat,b);if(f.P){if(c&&""+f.ca!==d)throw new x(this.concat,b,"Incompatible columns!");e=e.concat(f.P)}}return new Q(e,this.ca,this.ub)};Q.prototype.concat=Q.prototype.concat;function Qd(a,b,c){var d=Bd(+a,-90,90);if(b&&$a(d))throw new x(b,c,a);return d}function Rd(a,b,c){var d=+a;if(-180>d||180<d)d=Ad(d+180,360)-180;if(b&&$a(d))throw new x(b,c,a);return d}function Sd(a,b,c){var d;if(a!==t&&$a(d=+a)&&b)throw new x(b,c,a);return d}r("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<id(b-a)});function S(){var a=S;if(!0===(Ua(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+cb(a));}r("H.geo.AbstractGeometry",S);S.prototype.getBoundingBox=S.prototype.pa;S.prototype.equals=S.prototype.S;S.prototype.Xa="";S.prototype.kb="";S.prototype.toString=function(){return this.dc([this.Xa.toUpperCase()," "]).join("")};S.prototype.toString=S.prototype.toString;S.prototype.sd=function(){return{type:this.kb,coordinates:this.cc()}};S.prototype.toGeoJSON=S.prototype.sd;
S.prototype.ib=function(){return{type:this.Xa,coordinates:this.jb(),boundingBox:this.pa().ib()}};S.prototype.forWorkerMessage=S.prototype.ib;function T(a,b,c){this.lat=Qd(a,T,0);this.lng=Rd(b,T,1);c!==t&&(this.alt=Sd(c,T,2))}Fa(T,S);r("H.geo.Point",T);T.prototype.S=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};T.prototype.equals=T.prototype.S;T.prototype.eb=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*xd;var c=a.lat*xd;a=1.274200158E7*nd(dd(1,kd(L(md((b-c)/2),2)+od(b)*od(c)*L(md((this.lng*xd-a.lng*xd)/2),2))))}return a};
T.prototype.distance=T.prototype.eb;
T.prototype.vd=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*xd;a=xd*this.lat;var e=md(a);c=md(d);var f=od(d);d=xd*this.lng;var g=od(a);a=nd(g*od(b)*c+e*f);b=rd(md(b)*g*c,f-e*md(a));b=(d+b+O)%(2*O)-O;b*=yd;e=new T(a*yd,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*vd*od(this.lat*xd))*(270===a?-360:360),new T(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=xd,e=this.lat*xd,c=this.lng*xd,d=e+b*od(a),f=d-e,g=jd(pd(d/2+ud)/pd(e/2+ud)),g=$a(f/g)?
od(e):f/g,a=b*md(a)/g,id(d)>td&&(d=0<d?O-d:-(O+d)),d=new T(d*yd,((c+a+wd+(id(e+f)>td?O:0))%vd-O)*yd);return d||this};T.prototype.walk=T.prototype.vd;T.prototype.pa=function(){return new U(this.lat,this.lng,this.lat,this.lng)};T.prototype.getBoundingBox=T.prototype.pa;function Td(a,b,c){var d=ra(a)&&!($a(a.lat=Qd(a.lat))||$a(a.lng=Rd(a.lng))||a.alt!==t&&$a(a.alt=Sd(a.alt)));if(!d&&b)throw new x(b,c,a);return d}T.validate=Td;function Ud(a){if(!a)throw new x(Ud,0,a);return new T(a.lat,a.lng,a.alt)}
T.fromIPoint=Ud;l=T.prototype;l.Xa="Point";l.dc=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.kb="Point";l.cc=function(){return[this.lng,this.lat,this.alt||0]};l.jb=function(){return[this.lat,this.lng,this.alt||0]};function X(a,b){this.x=+a;this.y=+b}r("H.math.Point",X);X.prototype.set=X;X.prototype.set=X.prototype.set;X.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new X(this.x,this.y);return a};X.prototype.clone=X.prototype.clone;X.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};X.prototype.add=X.prototype.add;X.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};X.prototype.sub=X.prototype.sub;X.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};
X.prototype.scale=X.prototype.scale;X.prototype.round=function(){this.x=fd(this.x);this.y=fd(this.y);return this};X.prototype.round=X.prototype.round;X.prototype.floor=function(){this.x=gd(this.x);this.y=gd(this.y);return this};X.prototype.floor=X.prototype.floor;X.prototype.ceil=function(){this.x=hd(this.x);this.y=hd(this.y);return this};X.prototype.ceil=X.prototype.ceil;X.prototype.S=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};X.prototype.equals=X.prototype.S;
X.prototype.Kc=function(a,b){var c=b.x-a.x,d=b.y-a.y;var e=a;if(c||d)e=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d),e=0>=e?a:1<=e?b:new X(a.x+e*c,a.y+e*d);return e};X.prototype.getNearest=X.prototype.Kc;X.prototype.eb=function(a){return kd(L(this.x-a.x,2)+L(this.y-a.y,2))};X.prototype.distance=X.prototype.eb;X.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof X?a:new X(a.x,a.y)};function Vd(){}function Xd(a){return dd(1,ed(0,.5-jd(pd(ud+td*a/180))/O/2))}Vd.prototype.Oa=function(a,b,c){c?(c.x=b/360+.5,c.y=Xd(a)):c=new X(b/360+.5,Xd(a));return c};Vd.prototype.latLngToPoint=Vd.prototype.Oa;Vd.prototype.Ac=function(a,b){return this.Oa(a.lat,a.lng,b)};Vd.prototype.geoToPoint=Vd.prototype.Ac;function Yd(a){return 0>=a?90:1<=a?-90:yd*(2*qd(ld(O*(1-2*a)))-td)}
Vd.prototype.ka=function(a,b,c){c?(c.lat=Yd(b),c.lng=360*(1===a?1:Ad(a,1))-180):c=new T(Yd(b),360*(1===a?1:Ad(a,1))-180);return c};Vd.prototype.xyToGeo=Vd.prototype.ka;Vd.prototype.ed=function(a,b){return this.ka(a.x,a.y,b)};Vd.prototype.pointToGeo=Vd.prototype.ed;var Zd=new Vd;r("H.geo.mercator",Zd);r("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);r("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function Y(a,b){this.projection=a||Zd;this.ec=0;this.Da=this.exp=jd(b||256)/sd;$d(this);this.y=this.x=0}r("H.geo.PixelProjection",Y);var ae=id(24)+id(-8);Y.prototype.hd=Zd;Y.prototype.projection=Y.prototype.hd;Y.prototype.x=0;Y.prototype.x=Y.prototype.x;Y.prototype.y=0;Y.prototype.y=Y.prototype.y;Y.prototype.w=L(2,ae);Y.prototype.w=Y.prototype.w;Y.prototype.Rc=L(2,ae);Y.prototype.h=Y.prototype.Rc;
Y.prototype.Aa=function(a){if($a(a))throw new x(this.Aa,0,a);var b=this.x/this.w;var c=this.y/this.h;this.ec=a;this.Da=this.exp+a;$d(this);this.x=b*this.w;this.y=c*this.h};Y.prototype.rescale=Y.prototype.Aa;function $d(a){a.Da>ae&&(a.Da=ae);a.w=L(2,a.Da);a.h=L(2,a.Da)}Y.prototype.Ob=function(){return this.ec||0};Y.prototype.getZoomScale=Y.prototype.Ob;Y.prototype.zc=function(a,b){a=this.projection.Oa(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};Y.prototype.geoToPixel=Y.prototype.zc;
Y.prototype.xb=function(a,b){return this.projection.ka((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};Y.prototype.pixelToGeo=Y.prototype.xb;Y.prototype.ka=function(a,b,c){return this.projection.ka((a+this.x)/this.w,(b+this.y)/this.h,c)};Y.prototype.xyToGeo=Y.prototype.ka;Y.prototype.sb=function(a,b,c){a=this.projection.Oa(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};Y.prototype.latLngToPixel=Y.prototype.sb;Y.prototype.fd=function(a){return new X(a.x*this.w-this.x,a.y*this.h-this.y)};
Y.prototype.pointToPixel=Y.prototype.fd;function be(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Na.Float32Array;var M,w=[];if(b){b=Sa(b);a=Sa(a);e&&(f=Sa(c));c=b.length;d=d?1E-7:1E-5;for(M=new I(3*c);g<c;){I=b[g];var G=+I;var W=+a[g];e&&(q=+f[g]);ce.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=M[h++]=m+W*d;k=M[h++]=k+G*d;e&&(n=M[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else M=new I(0);return{path:M,outlineIndices:w}}var ce=/^-?0\\d/;
function de(a,b){for(var c=0,d=a.length/3,e=new Na.Array(d),f=0;c<d;)e[c++]=b.sb(a[f],a[++f]),f+=2;return e};r("H.util.Disposable",C);C.prototype.aa=C.prototype.aa;C.prototype.addOnDisposeCallback=C.prototype.aa;r("H.util.dispose",function(a){a&&"function"==typeof a.C&&a.C()});C.prototype.C=C.prototype.C;C.prototype.dispose=C.prototype.C;C.prototype.K=C.prototype.K;C.prototype.disposeInternal=C.prototype.K;function ee(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=fe(q[m-1],q[m],c,b,d,e)){var M=n[0];var w=n[1];I&&I.S(M)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}r("H.math.clipping.clipStrips",ee);
function fe(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new X(h,-b),new X(g,-a)]:[new X(g,-a),new X(h,-b)]}
function ge(a,b,c){a=he(a,!0);b=he(b,!1);var d,e;var f={};var g=d=1;switch(~~(1*(c||0))){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.ma=new ie(b.x,b.y,null,je(b));a.ma=new ie(a.x,a.y,null,je(a));for(g=b;g.next;g=g.next)if(!g.F)for(d=a;d.next;d=d.next)if(!d.F){var k=ke(g.next);var m=ke(d.next);if(e=le(g,k,d,m,f)){e=f.ic;var n=f.jc;var q=f.wd;var u=f.xd;e=new ie(q,u,null,null,null,null,!0,0,0,e);me(e,g,k);k=new ie(q,u,null,null,null,null,!0,0,0,n);me(k,d,m);e.vb=k;
k.vb=e}}f=Fd(b,ne(a));c&&(f=!f);for(g=b;g;g=g.next)g.F&&(g.qb=f,f=!f);f=Fd(a,ne(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.F&&(d.qb=f,f=!f);oe(b);for(oe(a);(a=pe(b))!=b;){for(c=null;!a.Wa;a=a.vb){for(f=a.qb;;){c=new ie(a.x,a.y,c);c.artificial=a.F||a.Rb;a.Wa=1;a=f?a.next:a.B;if(!a)break;if(a.F){a.Wa=1;break}}if(!a)break}c.Vb=I||null;var I=c}return I}}r("H.math.clipping.clipPolygon",ge);
function ie(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.B=d||null;this.Vb=e||null;this.vb=f||null;this.F=!!g;this.qb=!!h;this.Wa=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.B=this);this.Rb=!1;this.ma=null}function ke(a){for(;a&&a.F;)a=a.next;return a}function je(a){if(a)for(;a.next;)a=a.next;return a}function pe(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.F||b.F&&b.Wa))}return b}function oe(a){var b=je(a);b.B.next=a;a.B=b.B}
function le(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.ma&&(f.ma.x=f.x,f.ma.y=f.y),le(a,b,c,d,e);e.wd=a.x+k*g;e.xd=a.y+k*h;e.ic=k;e.jc=n;return 1}function ne(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}
function me(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.B=b.B;a.next.B=a;a.B.next=a}function he(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new ie(a[e].x,a[e].y,d);c.Rb=b;if(c.next=d)d.B=c;d=c}return d};function U(a,b,c,d){qe(this,Qd(a,U,0),Rd(b,U,1),Qd(c,U,2),Rd(d,U,3))}Fa(U,S);r("H.geo.Rect",U);U.prototype.Xa="Polygon";U.prototype.dc=function(a){var b=this.l,c=this.g,d=this.j,e=this.i;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};U.prototype.S=function(a){var b=this===a;!b&&Ua(a,U)&&(b=this.l===a.l&&this.g===a.g&&this.j===a.j&&this.i===a.i);return b};U.prototype.equals=U.prototype.S;
U.prototype.clone=function(){return new U(this.l,this.g,this.j,this.i)};U.prototype.clone=U.prototype.clone;function qe(a,b,c,d,e){a.g=c;a.i=e;b<d&&(c=b,b=d,d=c);a.l=b;a.j=d;a.Db=a.Za=a.$a=null;return a}U.prototype.Nb=function(){this.Db||(this.Db=new T(this.l,this.g));return this.Db};U.prototype.getTopLeft=U.prototype.Nb;U.prototype.Mb=function(){this.Za||(this.Za=new T(this.j,this.i));return this.Za};U.prototype.getBottomRight=U.prototype.Mb;U.prototype.Pc=function(){return this.l};
U.prototype.getTop=U.prototype.Pc;U.prototype.Cc=function(){return this.j};U.prototype.getBottom=U.prototype.Cc;U.prototype.Ic=function(){return this.g};U.prototype.getLeft=U.prototype.Ic;U.prototype.Nc=function(){return this.i};U.prototype.getRight=U.prototype.Nc;U.prototype.T=function(){this.$a||(this.$a=new T(this.j+(this.l-this.j)/2,re(this.g,this.U())));return this.$a};U.prototype.getCenter=U.prototype.T;U.prototype.U=function(){return se(this.g,this.i)};U.prototype.getWidth=U.prototype.U;
U.prototype.fa=function(){return this.l-this.j};U.prototype.getHeight=U.prototype.fa;U.prototype.Wc=function(){return this.g>this.i};U.prototype.isCDB=U.prototype.Wc;U.prototype.Yc=function(){return!this.U()&&!this.fa()};U.prototype.isEmpty=U.prototype.Yc;U.prototype.pa=function(){return new U(this.l,this.g,this.j,this.i)};U.prototype.getBoundingBox=U.prototype.pa;
U.prototype.Ha=function(a,b,c){var d=this.T();c||(a=Qd(a,this.Ha,0),b=Rd(b,this.Ha,1));b=this.V(a,b,c);a=b.T();return a.lat===d.lat&&a.lng===d.lng&&this.fa()===b.fa()&&this.U()===b.U()};U.prototype.containsLatLng=U.prototype.Ha;U.prototype.Ia=function(a,b){b||Td(a,this.Ia,0);return this.Ha(a.lat,a.lng,b)};U.prototype.containsPoint=U.prototype.Ia;
U.prototype.Kb=function(a,b){var c=this.T();if(!b&&!Ua(a,U))throw new x(this.Kb,0,a);b=this.Pa(a,b);a=b.T();return a.lat===c.lat&&a.lng===c.lng&&this.fa()===b.fa()&&this.U()===b.U()};U.prototype.containsRect=U.prototype.Kb;U.prototype.V=function(a,b,c,d){if(!c){if($a(a=Qd(a)))throw new x(this.V,0,a);if($a(b=Rd(b)))throw new x(this.V,1,b);}return te(this.l,this.g,this.j,this.i,a,b,a,b,d)};U.prototype.mergeLatLng=U.prototype.V;
U.prototype.Ub=function(a,b,c){b||Td(a,this.Ub,0);return this.V(a.lat,a.lng,b,c)};U.prototype.mergePoint=U.prototype.Ub;U.prototype.Pa=function(a,b,c){if(!b&&!Ua(a,U))throw new x(this.Pa,0,a);return te(this.l,this.g,this.j,this.i,a.l,a.g,a.j,a.i,c)};U.prototype.mergeRect=U.prototype.Pa;U.prototype.sa=function(a,b,c,d,e,f){e||(a=Qd(a,this.sa,0),b=Rd(b,this.sa,1),c=Qd(c,this.sa,2),d=Rd(d,this.sa,3));return te(this.l,this.g,this.j,this.i,a,b,c,d,f)};U.prototype.mergeTopLeftBottomRight=U.prototype.sa;
U.prototype.Qb=function(a,b){var c=this.g<=this.i,d=a.g<=a.i,e=this.g<a.i,f=a.g<this.i;if(!b&&!Ua(a,U))throw new x(this.Qb,0,a);return this.j<=a.l&&a.j<=this.l&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};U.prototype.intersects=U.prototype.Qb;function se(a,b){a=b-a;return a+(0>a?360:0)}function re(a,b){a+=b/2;return a-(180<a?360:0)}
function te(a,b,c,d,e,f,g,h,k){c=dd(c,g);a=ed(a,e);e=se(b,d);var m=re(b,e);g=se(f,h);var n=re(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?qe(k,a,m,c,q):new U(a,m,c,q)}U.merge=te;function ue(a,b,c){c||(Td(a,ue,0),Td(b,ue,1));return new U(a.lat,a.lng,b.lat,b.lng)}U.fromPoints=ue;
function ve(a,b){var c=1,d=a.length,e=null;var f=ta(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new x(ve,0,a);if(0<d)for(f=a[0],e=ue(f,f,b);c<d;c++)f=a[c],e.V(f.lat,f.lng,b,e);return e}U.coverPoints=ve;function we(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new x(we,0,a);if(0<d)for(e=new U(a[0],a[1],a[0],a[1]);c<d;c+=3)e.V(a[c],a[c+1],b,e);return e}U.coverLatLngAlts=we;
function xe(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new x(xe,0,a);if(0<d)for(e=new U(a[0].l,a[0].g,a[0].j,a[0].i);c<d;c++)e.Pa(a[c],b,e);return e}U.coverRects=xe;
U.prototype.Yb=function(a,b){var c=this.g,d=this.l,e=this.i,f=this.j,g=this.T().lng;Td(a,this.Yb,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?qe(b,d,a,f,e):new U(d,a,f,e)};U.prototype.resizeToCenter=U.prototype.Yb;U.prototype.kb="Polygon";
U.prototype.cc=function(){return[[this.g,this.l,0],[this.i,this.l,0],[this.i,this.j,0],[this.g,this.j,0],[this.g,this.l,0]]};U.prototype.ib=function(){return this.jb()};U.prototype.jb=function(){return[this.l,this.g,this.j,this.i]};function ye(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,0+Math.floor(a/b)]}var ze=1/Math.pow(10,10);function Ae(a,b){var c=[],d=a.Nb();a=a.Mb();var e;180==a.lng&&(a.lng-=ze);d=ye(d,b);a=ye(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Be(a,b,c,d){if(!a||!b||!c)throw new x(Be,t,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ma(this,d)}r("H.util.BuildInfo",Be);Be.prototype.toString=function(){var a,b=[];for(a in this)Ya(this[a])&&b.push(this[a]);return b.join(";")};var Ce={};function De(a,b,c,d){if(!a)throw new x(De,1,"Must specify a name parameter");return Ce[a]||(Ce[a]=new Be(a,b,c,d))}Be.get=De;function Z(a,b,c,d,e,f){if(a&&b)this.Cb(a),this.Ra(b),this.Ab(c),this.Bb(e),this.ac(f),this.Ta(d);else throw new x(Z,t,'Parameters "scheme" and "host" must be specified');}r("H.service.Url",Z);
function Ee(a,b){var c=Na.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Z;h=h&&0<h.length?h.substr(1):
"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Z.parse=Ee;Z.prototype.clone=function(){var a={},b;for(b in this.A)a[b]=this.A[b];return new Z(this.yb,this.Na,this.X,a,this.wa,this.la)};Z.prototype.clone=Z.prototype.clone;
Z.prototype.Cb=function(a){if(!a||"string"!==typeof a)throw new x(this.Cb,0,'The "scheme" parameter must be a non-empty string.');this.yb=a;return this};Z.prototype.setScheme=Z.prototype.Cb;Z.prototype.Oc=function(){return this.yb};Z.prototype.getScheme=Z.prototype.Oc;Z.prototype.Ra=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new x(this.Ra,0,'The "host" parameter is not a valid host name.');this.Na=a;return this};
Z.prototype.setHost=Z.prototype.Ra;Z.prototype.Fc=function(){return this.Na};Z.prototype.getHost=Z.prototype.Fc;Z.prototype.Ab=function(a){this.X=a||void 0;return this};Z.prototype.setPath=Z.prototype.Ab;Z.prototype.Lc=function(){return this.X};Z.prototype.getPath=Z.prototype.Lc;Z.prototype.Ta=function(a){if(a)if("object"==typeof a)this.A=a;else throw new x(this.Ta,0,'Parameter "params" must be an object.');else this.A={};return this};Z.prototype.setQuery=Z.prototype.Ta;Z.prototype.Sc=function(){return!Fe(this)};
Z.prototype.hasQuery=Z.prototype.Sc;Z.prototype.getQuery=function(){return this.A};Z.prototype.getQuery=Z.prototype.getQuery;Z.prototype.Bb=function(a){if(void 0===a)this.wa=a;else{var b=Bd(+a<<0,0,65535);if(b!=a)throw new x(this.Bb,0,'Parameter "port" must be an integer in range [0...65535]');this.wa=b}return this};Z.prototype.setPort=Z.prototype.Bb;Z.prototype.Mc=function(){return this.wa};Z.prototype.getPort=Z.prototype.Mc;Z.prototype.ac=function(a){this.la=a||void 0;return this};
Z.prototype.setAnchor=Z.prototype.ac;Z.prototype.Bc=function(){return this.la};Z.prototype.getAnchor=Z.prototype.Bc;Z.prototype.ga=function(a){if("object"!==typeof a)throw new x(this.ga,0,'Parameter "other" must be an object.');var b=this.A,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Z.prototype.mergeQuery=Z.prototype.ga;
Z.prototype.Gb=function(a){if(!a||"string"!==typeof a)throw new x(this.Gb,0,'Parameter "subDomain" must be a non-empty string');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Ra(a+"."+this.Na)};Z.prototype.addSubDomain=Z.prototype.Gb;Z.prototype.Hb=function(a){if(!a||"string"!==typeof a)throw new x(this.Hb,0,'Parameter "subPath" must be a non-empty string');return this.Ab((this.X?this.X+"/":"")+a)};Z.prototype.addSubPath=Z.prototype.Hb;
Z.prototype.toString=function(){return[this.yb+"://",this.Na,this.wa?":"+this.wa:"",this.X||!Fe(this)||this.la?"/":"",this.X?encodeURI(this.X):"",Ge(this),this.la?"#"+encodeURIComponent(this.la):""].join("")};Z.prototype.toString=Z.prototype.toString;function He(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}
function Ge(a){var b=[],c=a.A,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.A[e];d.$=He(e);Ua(f,Ie)?f.Va.forEach(function(g){return function(h){b.push(g.$+"="+He(h))}}(d)):Ua(f,Je)?b.push(d.$+"="+f.Va.map(function(g){return He(g)}).join(f.tc)):b.push(void 0===f?d.$:d.$+"="+He(f))}d={$:d.$}}return 0<b.length?"?"+b.join("&"):""}function Fe(a){var b,c=0;for(b in a.A)if(a.A.hasOwnProperty(b)&&"function"!==typeof a.A[b]&&(c++,0<c))break;return!c}
function Ke(a,b){if(Wa(a,void 0,void 0,void 0))for(var c=0;c<a.length;c++){var d=a[c];if(!Ya(d)&&!ab(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new x(b,0,a);return a}function Ie(a){this.Va=Ke(a,Ie)}Z.MultiValueQueryParameter=Ie;Ie.prototype.Qc=function(){return this.Va};Ie.prototype.getValues=Ie.prototype.Qc;function Je(a,b){this.Va=Ke(a,Je);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new x(Je,1,'Invalid delimiter "'+b+'"');this.tc=b}
Z.DelimitedQuerySubValues=Je;function Le(a,b){var c=a.tileSize||256;this.va={};this.$b=Ee(a.serverUrl);this.Ib=b;this.Zc=a.layerConfigs||[];this.Xb=a.projected;this.bc=c;this.lc=!1!==a.batchTiles;this.Tc=a.horizontalMargin||0;this.ad=a.onlyOutline;this.jd=new Y(t,c);this.tb=new Y(t,c);this.tb.Aa(22-Math.log(c)/Math.LN2+8)}Fa(Le,C);
Le.prototype.ld=function(a,b,c){var d=this.bc,e=this.Tc,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.jd;e.Aa(c);f=e.xb(f);d=e.xb(d);return Me(this,new U(f.lat,f.lng,d.lat,d.lng),this.Zc,{x:a,y:b,z:c})};Le.prototype.kd=function(a,b,c,d,e){return Me(this,new U(a,b,c,d),e)};
function Me(a,b,c,d){var e=Ne(c),f=e.length,g={},h,k=a.va,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Ae(b,I);var M=q.length-1;for(h=0;h<M;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.Ib.get(w);G||(G=new vc(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.lc?Oe(a,n):Pe(a,n));return ec(m.map(function(W){var ia=Oa(this.xc,this,g[W.ra]),N=Oa(this.gd,this,W,d||Qe),Ea=W.then,va=this.wc,wa=W.ra,xa={},v,R=e.length;for(v=0;v<R;v++){var J=
e[v];if(J.rowFilter){var V=J.layerId;V=V!==t?V:J.layer;xa[V]=Oa(J.rowFilter,J.rowFilterContext)}}return Ea.call(W,Oa(va,this,wa,xa)).then(N).then(ia)},a))}var Qe={x:0,y:0,z:0};Le.prototype.wc=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new Q(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.Ja(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};
function Pe(a,b){function c(k,m,n){n?(delete a.va[k.key],k.reject(n)):Re(a,k,m)}var d,e=b.length,f=a.$b;for(d=0;d<e;d++){var g=b[d];var h=f.clone().ga({tilex:g.x}).ga({tiley:g.y}).ga({level:g.Sb}).ga({layer:g.ra});new pb(h.toString(),Oa(c,null,g),ub)}}function Oe(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Se(a,e)}}
function Se(a,b){var c=a.$b.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.Sb);f.push(h.ra)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.Ta(g),new pb(c.toString(),function(h,k){k?b.forEach(function(m){delete a.va[m.key];m.reject("error")}):Re(a,b,h)},ub))}
function Re(a,b,c){var d=b.length,e;if(Wa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Te(a,b[e],h)}}else Te(a,b,c)}function Te(a,b,c){try{var d=c.length;var e=b.key;delete a.va[e];a.Ib.add(e,b,2*d);b.resolve(JSON.parse(c))}catch(f){b.reject(f.message)}}function Ue(a,b,c,d,e){return e?[new X(a,b),new X(c,b),new X(c,d),new X(a,d),new X(a,b)]:[a,b,c,b,c,d,a,d]}
Le.prototype.gd=function(a,b,c){var d=this.tb.Ob()-b.z,e=this.bc<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,M=I.length,w,G=/^ADAS/.test(a.ra),W=this.tb,ia=this.ad,N,Ea=[],va=[],wa=[],xa=[];for(a=0;a<M;a++){var v=w=I[a];var R=(N=G)?"HPY":"LAT";var J=N?"HPX":"LON";var V=N?"HPZ":"ZLEVEL";if(v[R]){var P=be(v[R],v[J],v[V],N);v.geometry=P;delete v[R];delete v[J];delete v[V];if(v.INNER_LAT)for(R=v.INNER_LAT.split(";"),P=v.INNER_LON.split(";"),delete v.INNER_LAT,
delete v.INNER_LON,v.interiors=V=[],J=R.length,v=0;v<J;v++)V.push(be(R[v],P[v],"",N))}if(this.Xb){J=w;v=W;P=J.$$projected$$;R=0;if(!P){var aa=J.geometry;N=de(aa.path,v);w=[N];J.$$projected$$=P={dd:w};J=(V=J.interiors)?V.length:0;w.length+=J;R|=+Ve(w,N,aa.outlineIndices);if(J)for(P.Uc=1,q=0;q<J;q++)aa=V[q],N=de(aa.path,v),w[1+q]=N,R|=+Ve(w,N,aa.outlineIndices);R&&(P.bd=1+J)}v=P;N=v.dd;w=v.Uc;var kc=v.bd;P=[];R=J=zd;var Za=V=t;v=N[0];if(1===v.length){var lc=lc||(lc=Ue(g,b,h,e,!1));w=v[0];Ed(w.x,w.y,
lc)&&P.push(We(v,g,b,d))}else{var Wd=N.length;for(aa=ia?kc:0;aa<Wd&&(ia||!aa||P.length);aa++)if(v=N[aa],aa>=kc){aa===kc&&(R=P.length);var ja=ee([v],k,m,n,f,!1);Xe(ja,g,b,d,P)}else{var Bb=Bb||(Bb=Ue(k,m,n,f,!0));if(aa>=w)if(aa===w&&(J=P.length),Za)for(q=Za.length;q--;){if(ja=Ye(Za[q],v),u=ja.length){for(V=V||[];u--;)V.push(q);Xe(ja,g,b,d,P)}}else ja=Ye(Bb,v),Xe(ja,g,b,d,P);else if(ja=Ye(Bb,v),Xe(ja,g,b,d,P),1<ja.length&&w<Wd)for(Za=[],q=ja.length;q--;)Za[q]=ja[q]}}P.length&&(Ea[a]=P,va[a]=J,wa[a]=
V,xa[a]=R)}}return{rd:c,pc:Ea,Vc:va,vc:wa,cd:xa}};function Ve(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Ye(a,b){var c,d=[];if(c=ge(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Vb)}else Fd(b[0],Gd(a))?d.push(b):Fd(a[0],Gd(b))&&d.push(a);return d}function Xe(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(We(a[f],b,c,d))}
function We(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}
Le.prototype.xc=function(a,b){var c=b.rd,d=b.pc,e=b.Vc,f=b.cd;b=b.vc;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,M=I.length,w;q<M;q+=1)if(d[q]||!this.Xb){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,W=h,ia=d[q],N=e[q],Ea=b[q],va=f[q],wa=g;if(ia){var xa=ia.length;if(Ea)for(G=N;G--;){if(G){var v={};for(m in W)v[m]=W[m]}else v=W;u=[ia[G]];var R=dd(xa,va)-N;for(h=
0;h<R;h++)Ea[h]===G&&u.push(ia[N+h]);R=u.length;if(!G)for(h=va;h<xa;h++)u.push(ia[h]);v.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:R};wa.push(v)}else W.$HProjGeometry={paths:ia,interiorsIndex:N,outlinesIndex:va},wa.push(W)}else wa.push(W)}c.Meta&&(k.Meta=c.Meta);return k};Le.prototype.K=function(){var a,b=this.va;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Le.prototype.disposeInternal=Le.prototype.K;
function Ne(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=Ka(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!Va(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};r("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=Ja[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(Ja[a]=new Le(c,Ze)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.ld.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.kd.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.C();delete Ja[a];Ia()&&Ze.ia();break;default:e.postError("Unsupported command")}});
var Ze=new z(26214400),Ja=Object.create(Ra,void 0);function $e(a,b,c){var d=a[b];a=a[b+1];this.Pb=[];this.Eb=0;this.oc=b;this.mc=[a-c,d-c,a+c,d+c]}$e.prototype.Ia=function(a,b){var c=a[b];a=a[b+1];b=this.mc;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};$e.prototype.T=function(){return this.oc};var af=new X(0,0);function bf(a,b,c,d,e){d[e]=b;d[e+1]=a}var cf=new Y;function df(a,b,c,d,e){cf.sb(a,b,af);d[e]=af.x;d[e+1]=af.y}
r("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?bf:df,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(cf.Aa(d);g<h.length;){var I=h[g++];var M=h[g++];var w=h[g++];f(w,M,d,q,u);for(w=a.length;w--;)if(M=a[w],M.Ia(q,u)){var G=M;break}G||(G=new $e(q,u,b),a.push(G));w=u/2;G.Eb+=I||1;G.Pb.push(w);G=null;u+=2}for(w=a.length;w--;)M=a[w],b=M.Eb>=c,f=M.Pb,d=f.length,b?(m.push(d),m=m.concat(f)):
(k+=d,n=n.concat(f));c=[k].concat(n).concat(m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new ob(a.data);var b=kb[a.Wb];if(b)try{b.apply(a,a.kc)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new ob;var b=function(c,d){nb.apply(a,[c,d,!0])};b("0",lb);b("1",nb);b("2",mb);b("3",tb)})();
`,function(){var f=function(){var target=(typeof self>"u"||!(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope))&&(typeof module<"u"&&module.exports||typeof window<"u");if(target)var __worker_src__=f.toString(),__worker_src_map__="",__worker_src_origin__=typeof document<"u"&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:"";(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function o(){return this instanceof o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var toString$2={}.toString,classofRaw$1=function(e){return toString$2.call(e).slice(8,-1)},shared$1={exports:{}},O="object",check=function(e){return e&&e.Math==Math&&e},global$c=check(typeof globalThis==O&&globalThis)||check(typeof window==O&&window)||check(typeof self==O&&self)||check(typeof commonjsGlobal==O&&commonjsGlobal)||Function("return this")(),objectDefineProperty={},fails$3=function(e){try{return!!e()}catch{return!0}},descriptors=!fails$3(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),isObject$9=function(e){return typeof e=="object"?e!==null:typeof e=="function"},isObject$8=isObject$9,document$3=global$c.document,exist=isObject$8(document$3)&&isObject$8(document$3.createElement),documentCreateElement$1=function(e){return exist?document$3.createElement(e):{}},ie8DomDefine=!descriptors&&!fails$3(function(){return Object.defineProperty(documentCreateElement$1("div"),"a",{get:function(){return 7}}).a!=7}),isObject$7=isObject$9,anObject$9=function(e){if(!isObject$7(e))throw TypeError(String(e)+" is not an object");return e},isObject$6=isObject$9,toPrimitive$2=function(e,n){if(!isObject$6(e))return e;var r,o;if(n&&typeof(r=e.toString)=="function"&&!isObject$6(o=r.call(e))||typeof(r=e.valueOf)=="function"&&!isObject$6(o=r.call(e))||!n&&typeof(r=e.toString)=="function"&&!isObject$6(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")},DESCRIPTORS$2=descriptors,IE8_DOM_DEFINE$1=ie8DomDefine,anObject$8=anObject$9,toPrimitive$1=toPrimitive$2,nativeDefineProperty=Object.defineProperty;objectDefineProperty.f=DESCRIPTORS$2?nativeDefineProperty:function(e,n,r){if(anObject$8(e),n=toPrimitive$1(n,!0),anObject$8(r),IE8_DOM_DEFINE$1)try{return nativeDefineProperty(e,n,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[n]=r.value),e};var createPropertyDescriptor$3=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},definePropertyModule$2=objectDefineProperty,createPropertyDescriptor$2=createPropertyDescriptor$3,hide$7=descriptors?function(e,n,r){return definePropertyModule$2.f(e,n,createPropertyDescriptor$2(1,r))}:function(e,n,r){return e[n]=r,e},global$b=global$c,hide$6=hide$7,setGlobal$2=function(e,n){try{hide$6(global$b,e,n)}catch{global$b[e]=n}return n},isPure=!1,global$a=global$c,setGlobal$1=setGlobal$2,SHARED="__core-js_shared__",store$2=global$a[SHARED]||setGlobal$1(SHARED,{});(shared$1.exports=function(e,n){return store$2[e]||(store$2[e]=n!==void 0?n:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"});var sharedExports=shared$1.exports,id$2=0,postfix=Math.random(),uid$2=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++id$2+postfix).toString(36))},nativeSymbol=!fails$3(function(){return!String(Symbol())}),store$1=sharedExports("wks"),uid$1=uid$2,Symbol$1=global$c.Symbol,NATIVE_SYMBOL=nativeSymbol,wellKnownSymbol$1=function(e){return store$1[e]||(store$1[e]=NATIVE_SYMBOL&&Symbol$1[e]||(NATIVE_SYMBOL?Symbol$1:uid$1)("Symbol."+e))},classofRaw=classofRaw$1,TO_STRING_TAG$2=wellKnownSymbol$1("toStringTag"),CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=="Arguments",tryGet=function(e,n){try{return e[n]}catch{}},classof$6=function(e){var n,r,o;return e===void 0?"Undefined":e===null?"Null":typeof(r=tryGet(n=Object(e),TO_STRING_TAG$2))=="string"?r:CORRECT_ARGUMENTS?classofRaw(n):(o=classofRaw(n))=="Object"&&typeof n.callee=="function"?"Arguments":o},classof$5=classof$6,TO_STRING_TAG$1=wellKnownSymbol$1("toStringTag"),test={};test[TO_STRING_TAG$1]="z";var objectToString$1=String(test)!=="[object z]"?function(){return"[object "+classof$5(this)+"]"}:test.toString,redefine$2={exports:{}},hasOwnProperty$1={}.hasOwnProperty,has$6=function(e,n){return hasOwnProperty$1.call(e,n)},functionToString,hasRequiredFunctionToString;function requireFunctionToString(){return hasRequiredFunctionToString?functionToString:(hasRequiredFunctionToString=1,functionToString=sharedExports("native-function-to-string",Function.toString))}var nativeFunctionToString=requireFunctionToString(),WeakMap$1=global$c.WeakMap,nativeWeakMap=typeof WeakMap$1=="function"&&/native code/.test(nativeFunctionToString.call(WeakMap$1)),shared=sharedExports("keys"),uid=uid$2,sharedKey$1=function(e){return shared[e]||(shared[e]=uid(e))},hiddenKeys$3={},NATIVE_WEAK_MAP=nativeWeakMap,isObject$5=isObject$9,hide$5=hide$7,objectHas=has$6,sharedKey=sharedKey$1,hiddenKeys$2=hiddenKeys$3,WeakMap=global$c.WeakMap,set$2,get,has$5,enforce=function(e){return has$5(e)?get(e):set$2(e,{})},getterFor=function(e){return function(n){var r;if(!isObject$5(n)||(r=get(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(NATIVE_WEAK_MAP){var store=new WeakMap,wmget=store.get,wmhas=store.has,wmset=store.set;set$2=function(e,n){return wmset.call(store,e,n),n},get=function(e){return wmget.call(store,e)||{}},has$5=function(e){return wmhas.call(store,e)}}else{var STATE=sharedKey("state");hiddenKeys$2[STATE]=!0,set$2=function(e,n){return hide$5(e,STATE,n),n},get=function(e){return objectHas(e,STATE)?e[STATE]:{}},has$5=function(e){return objectHas(e,STATE)}}var internalState={set:set$2,get,has:has$5,enforce,getterFor},hasRequiredRedefine;function requireRedefine(){if(hasRequiredRedefine)return redefine$2.exports;hasRequiredRedefine=1;var e=global$c,n=hide$7,r=has$6,o=setGlobal$2,s=requireFunctionToString(),l=internalState,h=l.get,p=l.enforce,d=String(s).split("toString");return sharedExports("inspectSource",function(g){return s.call(g)}),(redefine$2.exports=function(g,y,v,_){var w=!!_&&!!_.unsafe,I=!!_&&!!_.enumerable,G=!!_&&!!_.noTargetGet;typeof v=="function"&&(typeof y!="string"||r(v,"name")||n(v,"name",y),p(v).source=d.join(typeof y=="string"?y:"")),g!==e?(w?!G&&g[y]&&(I=!0):delete g[y],I?g[y]=v:n(g,y,v)):I?g[y]=v:o(y,v)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||s.call(this)}),redefine$2.exports}var toString$1=objectToString$1,ObjectPrototype$1=Object.prototype;toString$1!==ObjectPrototype$1.toString&&requireRedefine()(ObjectPrototype$1,"toString",toString$1,{unsafe:!0});var ceil=Math.ceil,floor=Math.floor,toInteger$3=function(e){return isNaN(e=+e)?0:(e>0?floor:ceil)(e)},requireObjectCoercible$3=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},toInteger$2=toInteger$3,requireObjectCoercible$2=requireObjectCoercible$3,stringAt=function(e,n,r){var o,s,l=String(requireObjectCoercible$2(e)),h=toInteger$2(n),p=l.length;return h<0||h>=p?r?"":void 0:(o=l.charCodeAt(h))<55296||o>56319||h+1===p||(s=l.charCodeAt(h+1))<56320||s>57343?r?l.charAt(h):o:r?l.slice(h,h+2):s-56320+(o-55296<<10)+65536},objectGetOwnPropertyDescriptor={},objectPropertyIsEnumerable={},nativePropertyIsEnumerable={}.propertyIsEnumerable,nativeGetOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,NASHORN_BUG=nativeGetOwnPropertyDescriptor$1&&!nativePropertyIsEnumerable.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){var n=nativeGetOwnPropertyDescriptor$1(this,e);return!!n&&n.enumerable}:nativePropertyIsEnumerable;var fails$2=fails$3,classof$4=classofRaw$1,split="".split,indexedObject=fails$2(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return classof$4(e)=="String"?split.call(e,""):Object(e)}:Object,IndexedObject=indexedObject,requireObjectCoercible$1=requireObjectCoercible$3,toIndexedObject$4=function(e){return IndexedObject(requireObjectCoercible$1(e))},DESCRIPTORS$1=descriptors,propertyIsEnumerableModule=objectPropertyIsEnumerable,createPropertyDescriptor$1=createPropertyDescriptor$3,toIndexedObject$3=toIndexedObject$4,toPrimitive=toPrimitive$2,has$4=has$6,IE8_DOM_DEFINE=ie8DomDefine,nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$1?nativeGetOwnPropertyDescriptor:function(e,n){if(e=toIndexedObject$3(e),n=toPrimitive(n,!0),IE8_DOM_DEFINE)try{return nativeGetOwnPropertyDescriptor(e,n)}catch{}if(has$4(e,n))return createPropertyDescriptor$1(!propertyIsEnumerableModule.f.call(e,n),e[n])};var objectGetOwnPropertyNames={},toInteger$1=toInteger$3,min$1=Math.min,toLength$2=function(e){return e>0?min$1(toInteger$1(e),9007199254740991):0},toInteger=toInteger$3,max=Math.max,min=Math.min,toAbsoluteIndex$1=function(e,n){var r=toInteger(e);return r<0?max(r+n,0):min(r,n)},toIndexedObject$2=toIndexedObject$4,toLength$1=toLength$2,toAbsoluteIndex=toAbsoluteIndex$1,arrayIncludes=function(e){return function(n,r,o){var s,l=toIndexedObject$2(n),h=toLength$1(l.length),p=toAbsoluteIndex(o,h);if(e&&r!=r){for(;h>p;)if((s=l[p++])!=s)return!0}else for(;h>p;p++)if((e||p in l)&&l[p]===r)return e||p||0;return!e&&-1}},has$3=has$6,toIndexedObject$1=toIndexedObject$4,arrayIndexOf$1=arrayIncludes(!1),hiddenKeys$1=hiddenKeys$3,objectKeysInternal=function(e,n){var r,o=toIndexedObject$1(e),s=0,l=[];for(r in o)!has$3(hiddenKeys$1,r)&&has$3(o,r)&&l.push(r);for(;n.length>s;)has$3(o,r=n[s++])&&(~arrayIndexOf$1(l,r)||l.push(r));return l},enumBugKeys$2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,hiddenKeys=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,anObject$7=anObject$9,Reflect$1=global$c.Reflect,ownKeys$1=Reflect$1&&Reflect$1.ownKeys||function(e){var n=getOwnPropertyNamesModule.f(anObject$7(e)),r=getOwnPropertySymbolsModule.f;return r?n.concat(r(e)):n},has$2=has$6,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$1=objectDefineProperty,copyConstructorProperties$1=function(e,n){for(var r=ownKeys(n),o=definePropertyModule$1.f,s=getOwnPropertyDescriptorModule.f,l=0;l<r.length;l++){var h=r[l];has$2(e,h)||o(e,h,s(n,h))}},fails$1=fails$3,replacement=/#|\.prototype\./,isForced$2=function(e,n){var r=data[normalize$1(e)];return r==POLYFILL||r!=NATIVE&&(typeof n=="function"?fails$1(n):!!n)},normalize$1=isForced$2.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$2.data={},NATIVE=isForced$2.NATIVE="N",POLYFILL=isForced$2.POLYFILL="P",isForced_1=isForced$2,global$9=global$c,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,hide$4=hide$7,redefine$1=requireRedefine(),setGlobal=setGlobal$2,copyConstructorProperties=copyConstructorProperties$1,isForced$1=isForced_1,_export=function(e,n){var r,o,s,l,h,p=e.target,d=e.global,g=e.stat;if(r=d?global$9:g?global$9[p]||setGlobal(p,{}):(global$9[p]||{}).prototype)for(o in n){if(l=n[o],s=e.noTargetGet?(h=getOwnPropertyDescriptor$1(r,o))&&h.value:r[o],!isForced$1(d?o:p+(g?".":"#")+o,e.forced)&&s!==void 0){if(typeof l==typeof s)continue;copyConstructorProperties(l,s)}(e.sham||s&&s.sham)&&hide$4(l,"sham",!0),redefine$1(r,o,l,e)}},requireObjectCoercible=requireObjectCoercible$3,toObject$1=function(e){return Object(requireObjectCoercible(e))},correctPrototypeGetter=!fails$3(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),has$1=has$6,toObject=toObject$1,IE_PROTO$1=sharedKey$1("IE_PROTO"),CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,ObjectPrototype=Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(e){return e=toObject(e),has$1(e,IE_PROTO$1)?e[IE_PROTO$1]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype:null},getPrototypeOf$1=objectGetPrototypeOf,hide$3=hide$7,has=has$6,ITERATOR$5=wellKnownSymbol$1("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,returnThis$2=function(){return this},IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$1(getPrototypeOf$1(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0),IteratorPrototype$2==null&&(IteratorPrototype$2={}),has(IteratorPrototype$2,ITERATOR$5)||hide$3(IteratorPrototype$2,ITERATOR$5,returnThis$2);var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$2,objectKeys$2=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys$1)},DESCRIPTORS=descriptors,definePropertyModule=objectDefineProperty,anObject$6=anObject$9,objectKeys$1=objectKeys$2,objectDefineProperties=DESCRIPTORS?Object.defineProperties:function(e,n){anObject$6(e);for(var r,o=objectKeys$1(n),s=o.length,l=0;s>l;)definePropertyModule.f(e,r=o[l++],n[r]);return e},document$2=global$c.document,html$2=document$2&&document$2.documentElement,anObject$5=anObject$9,defineProperties=objectDefineProperties,enumBugKeys=enumBugKeys$2,html$1=html$2,documentCreateElement=documentCreateElement$1,IE_PROTO=sharedKey$1("IE_PROTO"),PROTOTYPE="prototype",Empty=function(){},createDict=function(){var e,n=documentCreateElement("iframe"),r=enumBugKeys.length,o="script",s="java"+o+":";for(n.style.display="none",html$1.appendChild(n),n.src=String(s),(e=n.contentWindow.document).open(),e.write("<"+o+">document.F=Object</"+o+">"),e.close(),createDict=e.F;r--;)delete createDict[PROTOTYPE][enumBugKeys[r]];return createDict()},objectCreate=Object.create||function(e,n){var r;return e!==null?(Empty[PROTOTYPE]=anObject$5(e),r=new Empty,Empty[PROTOTYPE]=null,r[IE_PROTO]=e):r=createDict(),n===void 0?r:defineProperties(r,n)},setToStringTag$2,hasRequiredSetToStringTag;function requireSetToStringTag(){if(hasRequiredSetToStringTag)return setToStringTag$2;hasRequiredSetToStringTag=1;var e=objectDefineProperty.f,n=has$6,r=wellKnownSymbol$1("toStringTag");return setToStringTag$2=function(o,s,l){o&&!n(o=l?o:o.prototype,r)&&e(o,r,{configurable:!0,value:s})}}hiddenKeys$3[IE_PROTO]=!0;var iterators={},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$3=objectCreate,createPropertyDescriptor=createPropertyDescriptor$3,setToStringTag$1=requireSetToStringTag(),Iterators$4=iterators,returnThis$1=function(){return this},createIteratorConstructor$1=function(e,n,r){var o=n+" Iterator";return e.prototype=create$3(IteratorPrototype$1,{next:createPropertyDescriptor(1,r)}),setToStringTag$1(e,o,!1,!0),Iterators$4[o]=returnThis$1,e},isObject$4=isObject$9,anObject$4=anObject$9,validateSetPrototypeOfArguments$1=function(e,n){if(anObject$4(e),!isObject$4(n)&&n!==null)throw TypeError("Can't set "+String(n)+" as a prototype")},validateSetPrototypeOfArguments=validateSetPrototypeOfArguments$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),n=r instanceof Array}catch{}return function(o,s){return validateSetPrototypeOfArguments(o,s),n?e.call(o,s):o.__proto__=s,o}}():void 0),$export$1=_export,createIteratorConstructor=createIteratorConstructor$1,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf=objectSetPrototypeOf,setToStringTag=requireSetToStringTag(),hide$2=hide$7,redefine=requireRedefine(),ITERATOR$4=wellKnownSymbol$1("iterator"),Iterators$3=iterators,IteratorsCore=iteratorsCore,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator$2=function(e,n,r,o,s,l,h){createIteratorConstructor(r,n,o);var p,d,g,y=function(_r){if(_r===s&&G)return G;if(!BUGGY_SAFARI_ITERATORS&&_r in w)return w[_r];switch(_r){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,_r)}}return function(){return new r(this)}},v=n+" Iterator",_=!1,w=e.prototype,I=w[ITERATOR$4]||w["@@iterator"]||s&&w[s],G=!BUGGY_SAFARI_ITERATORS&&I||y(s),_t=n=="Array"&&w.entries||I;if(_t&&(p=getPrototypeOf(_t.call(new e)),IteratorPrototype!==Object.prototype&&p.next&&(getPrototypeOf(p)!==IteratorPrototype&&(setPrototypeOf?setPrototypeOf(p,IteratorPrototype):typeof p[ITERATOR$4]!="function"&&hide$2(p,ITERATOR$4,returnThis)),setToStringTag(p,v,!0,!0))),s==VALUES&&I&&I.name!==VALUES&&(_=!0,G=function(){return I.call(this)}),w[ITERATOR$4]!==G&&hide$2(w,ITERATOR$4,G),Iterators$3[n]=G,s)if(d={values:y(VALUES),keys:l?G:y(KEYS),entries:y(ENTRIES)},h)for(g in d)(BUGGY_SAFARI_ITERATORS||_||!(g in w))&&redefine(w,g,d[g]);else $export$1({target:n,proto:!0,forced:BUGGY_SAFARI_ITERATORS||_},d);return d},codePointAt$1=stringAt,InternalStateModule$2=internalState,defineIterator$1=defineIterator$2,STRING_ITERATOR="String Iterator",setInternalState$2=InternalStateModule$2.set,getInternalState$2=InternalStateModule$2.getterFor(STRING_ITERATOR);defineIterator$1(String,"String",function(e){setInternalState$2(this,{type:STRING_ITERATOR,string:String(e),index:0})},function(){var e,n=getInternalState$2(this),r=n.string,o=n.index;return o>=r.length?{value:void 0,done:!0}:(e=codePointAt$1(r,o,!0),n.index+=e.length,{value:e,done:!1})});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},UNSCOPABLES=wellKnownSymbol$1("unscopables"),create$2=objectCreate,hide$1=hide$7,ArrayPrototype$1=Array.prototype;ArrayPrototype$1[UNSCOPABLES]==null&&hide$1(ArrayPrototype$1,UNSCOPABLES,create$2(null));var addToUnscopables$1=function(e){ArrayPrototype$1[UNSCOPABLES][e]=!0},toIndexedObject=toIndexedObject$4,addToUnscopables=addToUnscopables$1,Iterators$2=iterators,InternalStateModule$1=internalState,defineIterator=defineIterator$2,ARRAY_ITERATOR="Array Iterator",setInternalState$1=InternalStateModule$1.set,getInternalState$1=InternalStateModule$1.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",function(e,n){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:n})},function(){var e=getInternalState$1(this),n=e.target,r=e.kind,o=e.index++;return!n||o>=n.length?(e.target=void 0,{value:void 0,done:!0}):r=="keys"?{value:o,done:!1}:r=="values"?{value:n[o],done:!1}:{value:[o,n[o]],done:!1}},"values");Iterators$2.Arguments=Iterators$2.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var DOMIterables=domIterables,ArrayIteratorMethods=es_array_iterator,global$8=global$c,hide=hide$7,wellKnownSymbol=wellKnownSymbol$1,ITERATOR$3=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global$8[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$3]!==ArrayValues)try{hide(CollectionPrototype,ITERATOR$3,ArrayValues)}catch{CollectionPrototype[ITERATOR$3]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||hide(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME),DOMIterables[COLLECTION_NAME]){for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{hide(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch{CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}}var aFunction$5=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},anInstance$1=function(e,n,r){if(!(e instanceof n))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},iterate$1={exports:{}},Iterators$1=iterators,ITERATOR$2=wellKnownSymbol$1("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$1=function(e){return e!==void 0&&(Iterators$1.Array===e||ArrayPrototype[ITERATOR$2]===e)},aFunction$4=aFunction$5,bindContext=function(e,n,r){if(aFunction$4(e),n===void 0)return e;switch(r){case 0:return function(){return e.call(n)};case 1:return function(o){return e.call(n,o)};case 2:return function(o,s){return e.call(n,o,s)};case 3:return function(o,s,l){return e.call(n,o,s,l)}}return function(){return e.apply(n,arguments)}},classof$3=classof$6,ITERATOR$1=wellKnownSymbol$1("iterator"),Iterators=iterators,getIteratorMethod$1=function(e){if(e!=null)return e[ITERATOR$1]||e["@@iterator"]||Iterators[classof$3(e)]},anObject$3=anObject$9,callWithSafeIterationClosing$1=function(e,n,r,o){try{return o?n(anObject$3(r)[0],r[1]):n(r)}catch(l){var s=e.return;throw s!==void 0&&anObject$3(s.call(e)),l}},anObject$2=anObject$9,isArrayIteratorMethod=isArrayIteratorMethod$1,toLength=toLength$2,bind$2=bindContext,getIteratorMethod=getIteratorMethod$1,callWithSafeIterationClosing=callWithSafeIterationClosing$1,BREAK={},exports$1=iterate$1.exports=function(e,n,r,o,s){var l,h,p,d,g,y=bind$2(n,r,o?2:1);if(s)l=e;else{if(typeof(h=getIteratorMethod(e))!="function")throw TypeError("Target is not iterable");if(isArrayIteratorMethod(h)){for(p=0,d=toLength(e.length);d>p;p++)if((o?y(anObject$2(g=e[p])[0],g[1]):y(e[p]))===BREAK)return BREAK;return}l=h.call(e)}for(;!(g=l.next()).done;)if(callWithSafeIterationClosing(l,y,g.value,o)===BREAK)return BREAK};exports$1.BREAK=BREAK;var iterateExports=iterate$1.exports,ITERATOR=wellKnownSymbol$1("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(e){}var checkCorrectnessOfIteration$1=function(e,n){if(!n&&!SAFE_CLOSING)return!1;var r=!1;try{var o={};o[ITERATOR]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch{}return r},anObject$1=anObject$9,aFunction$3=aFunction$5,SPECIES$1=wellKnownSymbol$1("species"),speciesConstructor$2=function(e,n){var r,o=anObject$1(e).constructor;return o===void 0||(r=anObject$1(o)[SPECIES$1])==null?n:aFunction$3(r)},global$7=global$c,fails=fails$3,classof$2=classofRaw$1,bind$1=bindContext,html=html$2,createElement=documentCreateElement$1,location=global$7.location,set$1=global$7.setImmediate,clear=global$7.clearImmediate,process$2=global$7.process,MessageChannel=global$7.MessageChannel,Dispatch=global$7.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){if(queue.hasOwnProperty(e)){var n=queue[e];delete queue[e],n()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global$7.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return queue[++counter]=function(){(typeof e=="function"?e:Function(e)).apply(void 0,n)},defer(counter),counter},clear=function(e){delete queue[e]},classof$2(process$2)=="process"?defer=function(e){process$2.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bind$1(port.postMessage,port,1)):!global$7.addEventListener||typeof postMessage!="function"||global$7.importScripts||fails(post)?defer=ONREADYSTATECHANGE in createElement("script")?function(e){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global$7.addEventListener("message",listener,!1)));var task$1={set:set$1,clear},global$6=global$c,navigator$1=global$6.navigator,userAgent$2=navigator$1&&navigator$1.userAgent||"",global$5=global$c,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,classof$1=classofRaw$1,macrotask=task$1.set,userAgent$1=userAgent$2,MutationObserver=global$5.MutationObserver||global$5.WebKitMutationObserver,process$1=global$5.process,Promise$1=global$5.Promise,IS_NODE$1=classof$1(process$1)=="process",queueMicrotaskDescriptor=getOwnPropertyDescriptor(global$5,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify$1,toggle,node,promise;queueMicrotask||(flush=function(){var e,n;for(IS_NODE$1&&(e=process$1.domain)&&e.exit();head;){n=head.fn,head=head.next;try{n()}catch(r){throw head?notify$1():last=void 0,r}}last=void 0,e&&e.enter()},IS_NODE$1?notify$1=function(){process$1.nextTick(flush)}:MutationObserver&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent$1)?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}):Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),notify$1=function(){promise.then(flush)}):notify$1=function(){macrotask.call(global$5,flush)});var microtask$1=queueMicrotask||function(e){var n={fn:e,next:void 0};last&&(last.next=n),head||(head=n,notify$1()),last=n},newPromiseCapability$2={},aFunction$2=aFunction$5,PromiseCapability=function(e){var n,r;this.promise=new e(function(o,s){if(n!==void 0||r!==void 0)throw TypeError("Bad Promise constructor");n=o,r=s}),this.resolve=aFunction$2(n),this.reject=aFunction$2(r)};newPromiseCapability$2.f=function(e){return new PromiseCapability(e)};var anObject=anObject$9,isObject$3=isObject$9,newPromiseCapability$1=newPromiseCapability$2,promiseResolve$2=function(e,n){if(anObject(e),isObject$3(n)&&n.constructor===e)return n;var r=newPromiseCapability$1.f(e);return(0,r.resolve)(n),r.promise},global$4=global$c,hostReportErrors$1=function(e,n){var r=global$4.console;r&&r.error&&(arguments.length===1?r.error(e):r.error(e,n))},perform$1=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}},redefineAll,hasRequiredRedefineAll;function requireRedefineAll(){if(hasRequiredRedefineAll)return redefineAll;hasRequiredRedefineAll=1;var e=requireRedefine();return redefineAll=function(n,r,o){for(var s in r)e(n,s,r[s],o);return n},redefineAll}var path$1=global$c,path=path$1,global$3=global$c,aFunction$1=function(e){return typeof e=="function"?e:void 0},getBuiltIn$1=function(e,n){return arguments.length<2?aFunction$1(path[e])||aFunction$1(global$3[e]):path[e]&&path[e][n]||global$3[e]&&global$3[e][n]},setSpecies,hasRequiredSetSpecies;function requireSetSpecies(){if(hasRequiredSetSpecies)return setSpecies;hasRequiredSetSpecies=1;var e=getBuiltIn$1,n=objectDefineProperty,r=descriptors,o=wellKnownSymbol$1("species");return setSpecies=function(s){var l=e(s),h=n.f;r&&l&&!l[o]&&h(l,o,{configurable:!0,get:function(){return this}})}}var PROMISE="Promise",IS_PURE=isPure,global$2=global$c,$export=_export,isObject$2=isObject$9,aFunction=aFunction$5,anInstance=anInstance$1,classof=classofRaw$1,iterate=iterateExports,checkCorrectnessOfIteration=checkCorrectnessOfIteration$1,speciesConstructor$1=speciesConstructor$2,task=task$1.set,microtask=microtask$1,promiseResolve$1=promiseResolve$2,hostReportErrors=hostReportErrors$1,newPromiseCapabilityModule=newPromiseCapability$2,perform=perform$1,userAgent=userAgent$2,SPECIES=wellKnownSymbol$1("species"),InternalStateModule=internalState,isForced=isForced_1,getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),PromiseConstructor=global$2[PROMISE],TypeError$1=global$2.TypeError,document$1=global$2.document,process=global$2.process,$fetch=global$2.fetch,versions=process&&process.versions,v8=versions&&versions.v8||"",newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,IS_NODE=classof(process)=="process",DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$2.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,FORCED=isForced(PROMISE,function(){var e=PromiseConstructor.resolve(1),n=function(){},r=(e.constructor={})[SPECIES]=function(o){o(n,n)};return!((IS_NODE||typeof PromiseRejectionEvent=="function")&&!IS_PURE&&e.then(n)instanceof r&&v8.indexOf("6.6")!==0&&userAgent.indexOf("Chrome/66")===-1)}),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration(function(e){PromiseConstructor.all(e).catch(function(){})}),isThenable=function(e){var n;return!(!isObject$2(e)||typeof(n=e.then)!="function")&&n},notify=function(e,n,r){if(!n.notified){n.notified=!0;var o=n.reactions;microtask(function(){for(var s=n.value,l=n.state==FULFILLED,h=0,p=function(d){var g,y,v,_=l?d.ok:d.fail,w=d.resolve,I=d.reject,G=d.domain;try{_?(l||(n.rejection===UNHANDLED&&onHandleUnhandled(e,n),n.rejection=HANDLED),_===!0?g=s:(G&&G.enter(),g=_(s),G&&(G.exit(),v=!0)),g===d.promise?I(TypeError$1("Promise-chain cycle")):(y=isThenable(g))?y.call(g,w,I):w(g)):I(s)}catch(_t){G&&!v&&G.exit(),I(_t)}};o.length>h;)p(o[h++]);n.reactions=[],n.notified=!1,r&&!n.rejection&&onUnhandled(e,n)})}},dispatchEvent=function(e,n,r){var o,s;DISPATCH_EVENT?((o=document$1.createEvent("Event")).promise=n,o.reason=r,o.initEvent(e,!1,!0),global$2.dispatchEvent(o)):o={promise:n,reason:r},(s=global$2["on"+e])?s(o):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(e,n){task.call(global$2,function(){var r,o=n.value;if(isUnhandled(n)&&(r=perform(function(){IS_NODE?process.emit("unhandledRejection",o,e):dispatchEvent(UNHANDLED_REJECTION,e,o)}),n.rejection=IS_NODE||isUnhandled(n)?UNHANDLED:HANDLED,r.error))throw r.value})},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e,n){task.call(global$2,function(){IS_NODE?process.emit("rejectionHandled",e):dispatchEvent(REJECTION_HANDLED,e,n.value)})},bind=function(e,n,r,o){return function(s){e(n,r,s,o)}},internalReject=function(e,n,r,o){n.done||(n.done=!0,o&&(n=o),n.value=r,n.state=REJECTED,notify(e,n,!0))},internalResolve=function(e,n,r,o){if(!n.done){n.done=!0,o&&(n=o);try{if(e===r)throw TypeError$1("Promise can't be resolved itself");var s=isThenable(r);s?microtask(function(){var l={done:!1};try{s.call(r,bind(internalResolve,e,l,n),bind(internalReject,e,l,n))}catch(h){internalReject(e,l,h,n)}}):(n.value=r,n.state=FULFILLED,notify(e,n,!1))}catch(l){internalReject(e,{done:!1},l,n)}}};FORCED&&(PromiseConstructor=function(e){anInstance(this,PromiseConstructor,PROMISE),aFunction(e),Internal.call(this);var n=getInternalState(this);try{e(bind(internalResolve,this,n),bind(internalReject,this,n))}catch(r){internalReject(this,n,r)}},Internal=function(e){setInternalState(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=requireRedefineAll()(PromiseConstructor.prototype,{then:function(e,n){var r=getInternalPromiseState(this),o=newPromiseCapability(speciesConstructor$1(this,PromiseConstructor));return o.ok=typeof e!="function"||e,o.fail=typeof n=="function"&&n,o.domain=IS_NODE?process.domain:void 0,r.parent=!0,r.reactions.push(o),r.state!=PENDING&&notify(this,r,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,n=getInternalState(e);this.promise=e,this.resolve=bind(internalResolve,e,n),this.reject=bind(internalReject,e,n)},newPromiseCapabilityModule.f=newPromiseCapability=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},typeof $fetch=="function"&&$export({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return promiseResolve$1(PromiseConstructor,$fetch.apply(global$2,arguments))}})),$export({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),requireSetToStringTag()(PromiseConstructor,PROMISE,!1,!0),requireSetSpecies()(PROMISE),PromiseWrapper=path$1[PROMISE],$export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(e){var n=newPromiseCapability(this);return n.reject.call(void 0,e),n.promise}}),$export({target:PROMISE,stat:!0,forced:FORCED},{resolve:function(e){return promiseResolve$1(this,e)}}),$export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var n=this,r=newPromiseCapability(n),o=r.resolve,s=r.reject,l=perform(function(){var h=aFunction(n.resolve),p=[],d=0,g=1;iterate(e,function(y){var v=d++,_=!1;p.push(void 0),g++,h.call(n,y).then(function(w){_||(_=!0,p[v]=w,--g||o(p))},s)}),--g||o(p)});return l.error&&s(l.value),r.promise},race:function(e){var n=this,r=newPromiseCapability(n),o=r.reject,s=perform(function(){var l=aFunction(n.resolve);iterate(e,function(h){l.call(n,h).then(r.resolve,o)})});return s.error&&o(s.value),r.promise}});var getBuiltIn=getBuiltIn$1,speciesConstructor=speciesConstructor$2,promiseResolve=promiseResolve$2,perf;if(_export({target:"Promise",proto:!0,real:!0},{finally:function(e){var n=speciesConstructor(this,getBuiltIn("Promise")),r=typeof e=="function";return this.then(r?function(o){return promiseResolve(n,e()).then(function(){return o})}:e,r?function(o){return promiseResolve(n,e()).then(function(){throw o})}:e)}}),path$1.Promise,typeof Object.assign!="function"&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(o!=null)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n}),typeof Object.values!="function"&&(Object.values=function(e){return Object.keys(e).map(function(n){return e[n]})}),Math.hypot=Math.hypot||function(){for(var e=0,n=arguments.length,r=0;r<n;r++){if(arguments[r]===1/0||arguments[r]===-1/0)return 1/0;e+=arguments[r]*arguments[r]}return Math.sqrt(e)},Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},typeof window<"u"?(!("performance"in window)&&(window.performance={}),perf=window.performance):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(!("performance"in self)&&(self.performance={}),perf=self.performance),perf&&typeof perf.now!="function"){var start=+new Date;perf.now=function(){return+new Date-start}}function _callSuper(e,n,r){return n=_getPrototypeOf(n),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(n,r||[],_getPrototypeOf(e).constructor):n.apply(e,r))}function _construct(e,n,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var s=new(e.bind.apply(e,o));return r&&_setPrototypeOf(s,r.prototype),s}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!e})()}function _iterableToArrayLimit(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,s,l,h,p=[],d=!0,g=!1;try{if(l=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(o=l.call(r)).done)&&(p.push(o.value),p.length!==n);d=!0);}catch(y){g=!0,s=y}finally{try{if(!d&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(g)throw s}}return p}}function _toPrimitive(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _toPropertyKey(e){var n=_toPrimitive(e,"string");return typeof n=="symbol"?n:n+""}function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,n,r){return(n=_toPropertyKey(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _inherits(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_setPrototypeOf(e,n)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(e)}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_setPrototypeOf(e,n)}function _isNativeFunction(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function _wrapNativeSuper(e){var n=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(r){if(r===null||!_isNativeFunction(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(r))return n.get(r);n.set(r,o)}function o(){return _construct(r,arguments,_getPrototypeOf(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(o,r)},_wrapNativeSuper(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=_getPrototypeOf(e))!==null;);return e}function _get(){return _get=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,n,r){var o=_superPropBase(e,n);if(o){var s=Object.getOwnPropertyDescriptor(o,n);return s.get?s.get.call(arguments.length<3?e:r):s.value}},_get.apply(this,arguments)}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray(e,n){if(e){if(typeof e=="string")return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _createForOfIteratorHelper(e,n){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(d){throw d},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,h=!0,p=!1;return{s:function(){r=r.call(e)},n:function(){var d=r.next();return h=d.done,d},e:function(d){p=!0,l=d},f:function(){try{h||r.return==null||r.return()}finally{if(p)throw l}}}}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},ns={},MathUtils;(function(){var e,n=typeof Object.defineProperties=="function"?Object.defineProperty:function(q,_e,_s){q!=Array.prototype&&q!=Object.prototype&&(q[_e]=_s.value)},r=typeof window<"u"&&window===this?this:global$1!==void 0&&global$1!=null?global$1:this;if(typeof Object.setPrototypeOf=="function")e=Object.setPrototypeOf;else{var o;t:{var s={};try{s.__proto__={ea:!0},o=s.ea;break t}catch{}o=!1}e=o?function(q,_e){if(q.__proto__=_e,q.__proto__!==_e)throw new TypeError(q+" is not extensible");return q}:null}var l=e;(function(q,_e){if(_e){var _s=r;q=q.split(".");for(var La=0;La<q.length-1;La++){var _u=q[La];_u in _s||(_s[_u]={}),_s=_s[_u]}(_e=_e(La=_s[q=q[q.length-1]]))!=La&&_e!=null&&n(_s,q,{configurable:!0,writable:!0,value:_e})}})("Object.setPrototypeOf",function(q){return q||l});var h=this||self;function p(q){var _e=_typeof(q);if(_e=="object"){if(!q)return"null";if(q instanceof Array)return"array";if(q instanceof Object)return _e;var _s=Object.prototype.toString.call(q);if(_s=="[object Window]")return"object";if(_s=="[object Array]"||typeof q.length=="number"&&q.splice!==void 0&&q.propertyIsEnumerable!==void 0&&!q.propertyIsEnumerable("splice"))return"array";if(_s=="[object Function]"||q.call!==void 0&&q.propertyIsEnumerable!==void 0&&!q.propertyIsEnumerable("call"))return"function"}else if(_e=="function"&&q.call===void 0)return"object";return _e}function d(q){return p(q)=="function"}function g(q){var _e=_typeof(q);return _e=="object"&&q!=null||_e=="function"}function y(q,_e){q=q.split(".");var _s,La=h;for((q[0]in La)||La.execScript===void 0||La.execScript("var "+q[0]);q.length&&(_s=q.shift());)q.length||_e===void 0?La=La[_s]&&La[_s]!==Object.prototype[_s]?La[_s]:La[_s]={}:La[_s]=_e}function v(q,_e){function _s(){}_s.prototype=_e.prototype,q.ua=_e.prototype,q.prototype=new _s,q.prototype.constructor=q}var _=Math,w=_.min,I=_.max,G=_.round,_t=_.floor,_r=_.ceil,_o=_.abs,Ca=_.log,_a=_.sqrt,_l=_.pow,Qa=_.sin,Kc=_.asin,jc=_.cos,_h=_.tan,_m=_.atan2,ry=_.PI,uy=ry/2,ay=ry/4,ey=2*ry,_y=3*ry,Ey=ry/180,My=180/ry;function Ny(q,_e,_s){return q>_s?_s:q<_e?_e:q}function Py(q,_e,_s){return _e<_s?q>=_e&&q<=_s:q>=_s&&q<=_e}function gv(q,_e,_s,La,_u,ic){return _a(_l((q-_u)*(La-ic)-(_e-ic)*(_s-_u),2)/(_l(_s-_u,2)+_l(La-ic,2)))}y("H.math.normalize",function(q,_e,_s){return _e-=_s=_s||0,(q-=_s)-_t(q/_e)*_e+_s}),y("H.math.clamp",Ny);var sv={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function Kv(q,_e){var _s=q.x;q=q.y;for(var La,_u,ic,_p,ty=_e.length,iy=ty,cy=_e[0],vy=0,zy=0,Tv=0;vy!=1&&1<iy;)_u=_e[--iy],La=_e[--iy],_p=_e[iy?iy-1:(ty+(iy-1))%ty],ic=_e[iy?iy-2:(ty+(iy-2))%ty],La>=_s&&La<=_s&&_u>=q&&_u<=q||ic>=_s&&ic<=_s&&_p>=q&&_p<=q?vy=1:vy||La!==_s?!vy&&Py(_s,La,ic)&&((La<_s&&ic>_s||La>_s&&ic<_s)&&(zy+=(cy=_u+(_s-La)/(ic-La)*(_p-_u))>q,Tv+=cy<q),vy=Py(q,_u,_p)&&0>=gv(_s,q,La,_u,ic,_p)?2:0):(ic===_s&&(_u<q&&_p>q||_u>q&&_p<q)||(cy<=_s&&ic>_s||cy>=_s&&ic<_s)&&(_u>=q?++zy:++Tv),vy=Py(q,_u,_p)&&0>=gv(_s,q,La,_u,ic,_p)?2:0),cy=La;return!vy&&Tv!==0&&zy%2!=0&&(vy=3),vy!==sv.NONE}function Ty(q,_e){this.x=+q,this.y=+_e}function Gv(q,_e,_s,La,_u,ic){var _p=q.x;q=-q.y;var ty=_e.x;if(_e=-_e.y,_s=-_s,ic=-ic,_p>ty){if(ty>_u||_p<La)return;var iy=_p,cy=q;_p=ty,q=_e,ty=iy,_e=cy,iy=1}else if(_p>_u||ty<La)return;if(q>_e){if(_e>_s||q<ic)return;var vy=1;q=-q,_e=-_e,cy=ic,ic=-_s,_s=-cy}else if(q>_s||_e<ic)return;if(_p<La){if((q+=(La-_p)*(_e-q)/(ty-_p))>_s)return;_p=La}if(q<ic){if((_p+=(ic-q)*(ty-_p)/(_e-q))>_u)return;q=ic}return ty>_u&&(_e=q+(_u-_p)*(_e-q)/(ty-_p),ty=_u),_e>_s&&(ty=_p+(_s-q)*(ty-_p)/(_e-q),_e=_s),vy&&(q=-q,_e=-_e),iy?[new Ty(ty,-_e),new Ty(_p,-q)]:[new Ty(_p,-q),new Ty(ty,-_e)]}function _v(q,_e,_s,La,_u,ic,_p,ty,iy,cy){return q={x:q,y:_e,next:_s||null,s:La||null,ta:_u||null,X:ic||null,o:!!_p,T:ty||0,O:iy||0,alpha:cy||0},La&&(q.s.next=q),_s&&(q.next.s=q),q}function i0(q){for(;q&&q.o;)q=q.next;return q}function T0(q){if(q)for(;q.next;)q=q.next;return q}function Ov(q){var _e=q;if(_e)do _e=_e.next;while(_e!=q&&(!_e.o||_e.o&&_e.O));return _e}function Yy(q){var _e=T0(q);_e.s.next=q,q.s=_e.s}function Jv(q,_e,_s,La,_u){var ic,_p=_e.x-q.x,ty=_e.y-q.y,iy=La.x-_s.x,cy=La.y-_s.y,vy=_p*cy-ty*iy;return vy?(iy=((_s.x-q.x)*cy-(_s.y-q.y)*iy)/vy,vy=(ty*(_s.x-q.x)-_p*(_s.y-q.y))/vy,0>iy||1<iy||0>vy||1<vy?0:(iy===0?ic=q:iy===1?ic=_e:vy===0?ic=_s:vy===1&&(ic=La),ic?(ic.x+=2480549651603763e-20,ic.y+=7321997314118067e-20,ic.M&&(ic.M.x=ic.x,ic.M.y=ic.y),Jv(q,_e,_s,La,_u)):(_u.xa=q.x+iy*_p,_u.ya=q.y+iy*ty,_u.fa=iy,_u.ga=vy,1))):0}function Y0(q){for(var _e=[];q;)_e.push(q.x,q.y),q=q.next;return _e}function T_(q,_e,_s){for(_e=_e.next;_e!==_s&&_e.alpha<=q.alpha;)_e=_e.next;q.next=_e,q.s=_e.s,q.next.s=q,q.s.next=q}function A_(q,_e){for(var _s,La=null,_u=0,ic=q.length;_u<ic;_u++)(_s=_v(q[_u].x,q[_u].y,La)).qa=_e,(_s.next=La)&&(La.s=_s),La=_s;return La}function L0(q,_e,_s,La){return(q-=_s)*q+(_e-=La)*_e}function s_(q,_e,_s,La,_u){var ic=0,_p=La,ty=q[La].x,iy=q[La].y,cy=q[_u].x,vy=q[_u].y,zy=La+1,Tv=L0(ty,iy,cy,vy);if(Tv)for(;zy<_u;){var lv=q[zy++],Uv=lv.x,y0=((Uv-ty)*(cy-ty)+((lv=lv.y)-iy)*(vy-iy))/Tv;(Uv=0>y0?L0(Uv,lv,ty,iy):1<y0?L0(Uv,lv,cy,vy):L0(Uv,lv,ty+y0*(cy-ty),iy+y0*(vy-iy)))>ic&&(ic=Uv,_p=zy-1)}else for(;zy<_u;)(Uv=L0(Uv=(lv=q[zy++]).x,lv=lv.y,ty,iy))>ic&&(ic=Uv,_p=zy-1);return ic>=_e||0<_s&&_p-La?(--_s,1<_p-La?(La=s_(q,_e,_s,La,_p)).splice(La.length-1,1):La=[q[La]],La=1<_u-_p?La.concat(s_(q,_e,_s,_p,_u)):La.concat(q.slice(_p,_u+1))):La=[q[La],q[_u]],La}y("H.math.CoverType",sv),y("H.math.isPointInsidePolygon",Kv),y("H.math.flatten",function(q){for(var _e=q.length,_s=new Float64Array(2*_e),La=_e&&q[0].x!==Qv;_e--;){var _u=q[_e],ic=_e<<1;_s[ic]=La?_u.x:_u[0],_s[ic+1]=La?_u.y:_u[1]}return _s}),y("H.math.Point",Ty),Ty.prototype.set=Ty,Ty.prototype.set=Ty.prototype.set,Ty.prototype.clone=function(q){return q?(q.x=this.x,q.y=this.y):q=new Ty(this.x,this.y),q},Ty.prototype.clone=Ty.prototype.clone,Ty.prototype.add=function(q){return this.x+=q.x,this.y+=q.y,this},Ty.prototype.add=Ty.prototype.add,Ty.prototype.sub=function(q){return this.x-=q.x,this.y-=q.y,this},Ty.prototype.sub=Ty.prototype.sub,Ty.prototype.scale=function(q,_e){return this.x*=q,this.y*=_e===void 0?q:_e,this},Ty.prototype.scale=Ty.prototype.scale,Ty.prototype.round=function(){return this.x=G(this.x),this.y=G(this.y),this},Ty.prototype.round=Ty.prototype.round,Ty.prototype.floor=function(){return this.x=_t(this.x),this.y=_t(this.y),this},Ty.prototype.floor=Ty.prototype.floor,Ty.prototype.ceil=function(){return this.x=_r(this.x),this.y=_r(this.y),this},Ty.prototype.ceil=Ty.prototype.ceil,Ty.prototype.w=function(q){return!(!q||this.x!==q.x||this.y!==q.y)},Ty.prototype.equals=Ty.prototype.w,Ty.prototype.la=function(q,_e){var _s=_e.x-q.x,La=_e.y-q.y,_u=q;if(_s||La){var ic=((this.x-q.x)*_s+(this.y-q.y)*La)/(_s*_s+La*La);_u=0>=ic?q:1<=ic?_e:new Ty(q.x+ic*_s,q.y+ic*La)}return _u},Ty.prototype.getNearest=Ty.prototype.la,Ty.prototype.R=function(q){return _a(_l(this.x-q.x,2)+_l(this.y-q.y,2))},Ty.prototype.distance=Ty.prototype.R,Ty.fromIPoint=function(q){if(!q)throw Error("invalid argument");return q instanceof Ty?q:new Ty(q.x,q.y)},y("H.math.clipping.clipStrips",function(q,_e,_s,La,_u,ic){var _p,ty,iy,cy,vy=q.length;if(vy)for(_p=[];vy--;){var zy=q[vy],Tv=zy.length,lv=0;for(iy=1;iy<Tv;iy++)if(cy=Gv(zy[iy-1],zy[iy],_s,_e,La,_u)){var Uv=cy[0],y0=cy[1];lv&&lv.w(Uv)?ty.push(y0):_p.push(ty=cy),lv=y0,ic&&(iy=Tv,vy=0)}}else _p=q;return _p}),y("H.math.clipping.clipPolygon",function(q,_e,_s){var La,_u;q=A_(q,!0),_e=A_(_e,!1);var ic={},_p=La=1;switch(~~(_s||0)){case 1:_p=La=0;break;case 2:La=0,_p=1;break;case 3:La=1,_p=0}_s=La;var ty=_p;if(_e&&q){for(_e.M=_v(_e.x,_e.y,null,T0(_e)),q.M=_v(q.x,q.y,null,T0(q)),_p=_e;_p.next;_p=_p.next)if(!_p.o){for(La=q;La.next;La=La.next)if(!La.o){var iy=i0(_p.next),cy=i0(La.next);if(_u=Jv(_p,iy,La,cy,ic)){_u=ic.fa;var vy=ic.ga,zy=ic.xa,Tv=ic.ya;T_(_u=_v(zy,Tv,null,null,null,null,!0,0,0,_u),_p,iy),T_(iy=_v(zy,Tv,null,null,null,null,!0,0,0,vy),La,cy),_u.X=iy,iy.X=_u}}}for(ic=Kv(_e,Y0(q)),_s&&(ic=!ic),_p=_e;_p;_p=_p.next)_p.o&&(_p.T=ic,ic=!ic);for(ic=Kv(q,Y0(_e)),ty&&(ic=!ic),La=q;La.next;La=La.next)La.o&&(La.T=ic,ic=!ic);for(Yy(_e),Yy(q);(q=Ov(_e))!=_e;){for(_s=null;!q.O;q=q.X){for(ic=q.T;(_s=_v(q.x,q.y,_s)).artificial=q.o||q.qa,q.O=1,q=ic?q.next:q.s;)if(q.o){q.O=1;break}if(!q)break}_s.ta=lv;var lv=_s}return lv}}),y("H.math.simplifyDP",function(q,_e,_s){return s_(q,_e*_e,_s||0,0,q.length-1)});var j0=this,m0=String,Qv=[].pop(),V_=/x/.exec(""),qv="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function h0(q,_e){if(q instanceof _e&&q.constructor===_e)throw new TypeError("Illegal constructor "+z_(_e))}y("H.lang.isArray",function(q,_e,_s,La){var _u;if(!(_u=U_(q)==="Array")&&_e)throw new Sv(_e,_s,La!==Qv?La:q);return _u}),y("H.lang.isString",function(q){return typeof q=="string"});var Nv=isNaN;function ub(q){return q===+q}function U_(q){var _e=Object[qv[0]][qv[6]].call(q).match(/^\[object (\w+)\]$/);return _e?_e[1]:_typeof(q)}y("H.lang.isNumber",ub),y("H.lang.isInteger",Number.isInteger?Number.isInteger:function(q){return typeof q=="number"&&q%1==0});var S_=[];function z_(q,_e,_s,La){var _u,ic="",_p=2>arguments.length;return _p&&(_e={H:j0.H},_s="",La=S_.slice()),Av(_e,!0,function(ty,iy){try{if(iy=function(cy,vy){var zy=[];return Av(cy,!1,function(Tv,lv){Tv[lv]===vy&&zy.push(lv)}),zy.sort(tE)[0]}(ty,_u=ty[iy]),!(g(_u)&&_u.window===_u&&_u.self===_u||g(_u)&&0<_u.nodeType&&d(_u.cloneNode))&&g(_u)){if(_u===q)return ic=_s+"."+iy,!0;if(0>La.indexOf(_u)&&(La.push(_u),ic=z_(q,_u,_s+"."+iy,La)))return!0}}catch{}}),_p&&(ic=ic?ic.substr(1).replace("."+qv[0]+".","#"):"~"+(d(q)?function(ty){return(ty=/^\s*function ([^\( ]+)/.exec(ty))?ty[1]:"anonymous"}(q)+"()":U_(q))),ic}function tE(q,_e){return _e.length-q.length}0>S_.indexOf(S_)&&S_.push(S_);var _b=Object[qv[0]][qv[2]];function Av(q,_e,_s){var La;if(q){for(_u in q)if((!_e||_b.call(q,_u))&&_s(q,_u,!0))return;for(La=qv.length;La--;){var _u=qv[La];if((!_e||_b.call(q,_u))&&_s(q,_u,!1))break}}}function gI(q,_e,_s){_s[_e]="#"+_e}function Sv(q,_e,_s){var La=arguments.length;if((_e=_e!==Qv?+_e:_e)!==Qv){var _u,ic=/^.*?\(([^\)]+)/.exec((""+q).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,""));_u=ic?m0(ic[1].replace(/\s+/g,"")).split(Qv!==","?",":" "):[],(ic=_u).forEach(gI),ic=ic[_e]||"#"+_e}return _u=q?z_(q):"",La=2<La?m0(_s):"",(ic||La)&&(_u+=" (Argument "+(ic||"")+(La?" "+La:"")+")"),La=Error(_u),Object.setPrototypeOf(La,Sv.prototype),La}function C_(q,_e,_s){var La=Ny(+q,-90,90);if(_e&&Nv(La))throw new Sv(_e,_s,q);return La}function a_(q,_e,_s){var La,_u=+q;if((-180>_u||180<_u)&&(_u=(0>(La=(_u+180)%360)?La+360:La)-180),_e&&Nv(_u))throw new Sv(_e,_s,q);return _u}function hA(q,_e,_s){var La;if(q!==Qv&&Nv(La=+q)&&_e)throw new Sv(_e,_s,q);return La}function Vv(){h0(this,Vv)}function rv(q,_e,_s){this.lat=C_(q,rv,0),this.lng=a_(_e,rv,1),_s!==Qv&&(this.alt=hA(_s,rv,2))}function p1(q,_e,_s){var La=g(q)&&!(Nv(q.lat=C_(q.lat))||Nv(q.lng=a_(q.lng))||q.alt!==Qv&&Nv(q.alt=hA(q.alt)));if(!La&&_e)throw new Sv(_e,_s,q);return La}function ly(q,_e,_s,La){eE(this,C_(q,ly,0),a_(_e,ly,1),C_(_s,ly,2),a_(La,ly,3))}function eE(q,_e,_s,La,_u){return q.f=_s,q.g=_u,_e<La&&(_s=_e,_e=La,La=_s),q.i=_e,q.h=La,q.m=q.b=q.c=null,q}function tw(q,_e){return(q=_e-q)+(0>q?360:0)}function H_(q,_e){return(q+=_e/2)-(180<q?360:0)}function ew(q,_e,_s,La,_u,ic,_p,ty,iy){_s=w(_s,_p),q=I(q,_u);var cy=H_(_e,_u=tw(_e,La)),vy=H_(ic,_p=tw(ic,ty))-cy;if(180>(vy+=0>vy-1e-6?360:0)-1e-6){cy=_e;var zy=ty}else vy=360-vy,cy=ic,zy=La;return 360<=(vy=vy+_u/2+_p/2)+5e-7?(cy=-180,zy=180):vy-5e-7<_u?(cy=_e,zy=La):vy-5e-7<_p&&(cy=ic,zy=ty),iy?eE(iy,q,cy,_s,zy):new ly(q,cy,_s,zy)}function nE(q,_e,_s){return _s||(p1(q,nE,0),p1(_e,nE,1)),new ly(q.lat,q.lng,_e.lat,_e.lng)}function d1(q,_e,_s,La,_u,ic){h0(this,d1),this.sa=q||10,this.c=this.b=null,this.j=La||0,this.l=_u||0,this.m=_e||1,this.u=_s||1,this.I=!!ic,this.flush()}function Cx(q,_e){var _s,La,_u,ic,_p=0;for(_s=3;0<=_s;_s--){var ty=_s+4,iy=0<_s%3,cy=[],vy=_e[_s],zy=q[_s];for(La=zy.length;La--;){var Tv=zy[La];if(_u=Tv.entries)for(ic=_u.length;ic--;){var lv=_u[ic][_s];(iy?lv>vy:lv<vy)&&(vy=lv)}for(ic=4;ic--;)(_u=Tv[ic])&&(iy?_u[ty]>vy:_u[ty]<vy)&&cy.push(_u)}_p+=cy.length,_e[_s]=vy,q[_s]=cy}return _p&&(_e=Cx(q,_e)),_e}function fA(q,_e,_s){var La,_u;if(q.I&&(La=q.c))for(_u=3;0<=_u;_u--){var ic=_e[_u];if(_u%3?ic>=La[_u]:ic<=La[_u]){if(!_s){q.c=null;break}La[_u]=ic}}}function pA(q,_e){var _s,La=q.a;if(_e){var _u=_e;if(_u!==La)for(La=_u;_u=_u.c;)(_u.entries||1<_u.a)&&(La=_u)}else for(;!La.entries&&2>(_s=La.a)&&_s;)La=_u;q.a=La}function F0(q,_e,_s,La,_u,ic,_p,ty,iy){var cy,vy=_e.entries,zy=_e[7],Tv=_e[4],lv=_e[5],Uv=_e[6],y0=_e[8],Z0=_e[9];if(vy){var iw=vy.length;if(_u>Tv||La>zy||_p<Uv||ic<lv)for(;iw--;)Tv=(zy=vy[iw])[3],lv=zy[0],Uv=zy[1],zy[2]>=_u&&Uv>=La&&(lv<_p||ty&&lv==_p)&&(Tv<ic||iy&&Tv==ic)&&_s.push(zy);else for(;iw--;)_s.push(vy[iw])}(ic>y0||iy&&ic==y0)&&(_u<Z0&&(cy=_e[1])&&F0(q,cy,_s,La,_u,ic,_p,ty,iy),(_p>Z0||ty&&_p==Z0)&&(cy=_e[3])&&F0(q,cy,_s,La,_u,ic,_p,ty,iy)),La<y0&&(_u<Z0&&(cy=_e[0])&&F0(q,cy,_s,La,_u,ic,_p,ty,iy),(_p>Z0||ty&&_p==Z0)&&(cy=_e[2])&&F0(q,cy,_s,La,_u,ic,_p,ty,iy))}v(Sv,Error),y("H.lang.InvalidArgumentError",Sv),Sv.prototype.name="InvalidArgumentError",y("H.geo.isDBC",function(q,_e){return!!(0>q^0>_e)&&180<_o(_e-q)}),y("H.geo.AbstractGeometry",Vv),Vv.prototype.getBoundingBox=Vv.prototype.D,Vv.prototype.equals=Vv.prototype.w,Vv.prototype.a="",Vv.prototype.l="",Vv.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},Vv.prototype.toString=Vv.prototype.toString,Vv.prototype.va=function(){return{type:this.l,coordinates:this.u()}},Vv.prototype.toGeoJSON=Vv.prototype.va,Vv.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},Vv.prototype.forWorkerMessage=Vv.prototype.U,v(rv,Vv),y("H.geo.Point",rv),rv.prototype.w=function(q){return this===q||!!q&&this.lat===q.lat&&this.lng===q.lng&&(this.alt||0)===(q.alt||0)},rv.prototype.equals=rv.prototype.w,rv.prototype.R=function(q){if(this===q||this.lat===q.lat&&this.lng===q.lng)q=0;else{var _e=this.lat*Ey,_s=q.lat*Ey;q=1274200158e-2*Kc(w(1,_a(_l(Qa((_e-_s)/2),2)+jc(_e)*jc(_s)*_l(Qa((this.lng*Ey-q.lng*Ey)/2),2))))}return q},rv.prototype.distance=rv.prototype.R,rv.prototype.wa=function(q,_e,_s){if(_s){if(_e/=637100079e-2){q*=Ey;var La=Ey*this.lat,_u=Qa(La),ic=Qa(_e),_p=jc(_e),ty=Ey*this.lng,iy=jc(La);La=Kc(iy*jc(q)*ic+_u*_p),iy=(q=(ty+(q=_m(Qa(q)*iy*ic,_p-_u*Qa(La)))+ry)%(2*ry)-ry)*My}return _e?new rv(La*My,(iy+540)%360-180):this}if(((q=(q%360+360)%360)+90)%180==0)return La=this.lng+_e/(637100079e-2*ey*jc(this.lat*Ey))*(q===270?-360:360),new rv(this.lat,(La+540)%360-180);if(_e/=637100079e-2){q*=Ey,ty=this.lat*Ey,_u=this.lng*Ey,_p=(ic=ty+_e*jc(q))-ty,La=Ca(_h(ic/2+ay)/_h(ty/2+ay)),La=Nv(_p/La)?jc(ty):_p/La;var cy=_e*Qa(q)/La;_o(ic)>uy&&(ic=0<ic?ry-ic:-(ry+ic))}return _e?new rv(ic*My,((_u+cy+_y+(_o(ty+_p)>uy?ry:0))%ey-ry)*My):this},rv.prototype.walk=rv.prototype.wa,rv.prototype.D=function(){return new ly(this.lat,this.lng,this.lat,this.lng)},rv.prototype.getBoundingBox=rv.prototype.D,rv.validate=p1,rv.fromIPoint=function q(_e){if(!_e)throw new Sv(q,0,_e);return new rv(_e.lat,_e.lng,_e.alt)},rv.prototype.a="Point",rv.prototype.I=function(q){return q.push("(",this.lng," ",this.lat,")"),q},rv.prototype.l="Point",rv.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},rv.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},v(ly,Vv),y("H.geo.Rect",ly),ly.prototype.a="Polygon",ly.prototype.I=function(q){var _e=this.i,_s=this.f,La=this.h,_u=this.g;return q.push("(","(",_s," ",_e,",",_u," ",_e,",",_u," ",La,",",_s," ",La,",",_s," ",_e,")",")"),q},ly.prototype.w=function(q){return this===q||!!q&&this.i===q.i&&this.f===q.f&&this.h===q.h&&this.g===q.g},ly.prototype.equals=ly.prototype.w,ly.prototype.clone=function(){return new ly(this.i,this.f,this.h,this.g)},ly.prototype.clone=ly.prototype.clone,ly.prototype.W=function(){return this.m||(this.m=new rv(this.i,this.f)),this.m},ly.prototype.getTopLeft=ly.prototype.W,ly.prototype.V=function(){return this.b||(this.b=new rv(this.h,this.g)),this.b},ly.prototype.getBottomRight=ly.prototype.V,ly.prototype.na=function(){return this.i},ly.prototype.getTop=ly.prototype.na,ly.prototype.ha=function(){return this.h},ly.prototype.getBottom=ly.prototype.ha,ly.prototype.ja=function(){return this.f},ly.prototype.getLeft=ly.prototype.ja,ly.prototype.ma=function(){return this.g},ly.prototype.getRight=ly.prototype.ma,ly.prototype.F=function(){return this.c||(this.c=new rv(this.h+(this.i-this.h)/2,H_(this.f,this.A()))),this.c},ly.prototype.getCenter=ly.prototype.F,ly.prototype.A=function(){return tw(this.f,this.g)},ly.prototype.getWidth=ly.prototype.A,ly.prototype.G=function(){return this.i-this.h},ly.prototype.getHeight=ly.prototype.G,ly.prototype.N=function(){return this.f>this.g},ly.prototype.isCDB=ly.prototype.N,ly.prototype.ra=function(){return!this.A()&&!this.G()},ly.prototype.isEmpty=ly.prototype.ra,ly.prototype.D=function(){return new ly(this.i,this.f,this.h,this.g)},ly.prototype.getBoundingBox=ly.prototype.D,ly.prototype.L=function(q,_e,_s){var La=this.F();return _s||(q=C_(q,this.L,0),_e=a_(_e,this.L,1)),(q=(_e=this.B(q,_e,_s)).F()).lat===La.lat&&q.lng===La.lng&&this.G()===_e.G()&&this.A()===_e.A()},ly.prototype.containsLatLng=ly.prototype.L,ly.prototype.$=function(q,_e){return _e||p1(q,this.$,0),this.L(q.lat,q.lng,_e)},ly.prototype.containsPoint=ly.prototype.$,ly.prototype.aa=function(q,_e){var _s=this.F();if(!(_e||q instanceof ly))throw new Sv(this.aa,0,q);return(q=(_e=this.J(q,_e)).F()).lat===_s.lat&&q.lng===_s.lng&&this.G()===_e.G()&&this.A()===_e.A()},ly.prototype.containsRect=ly.prototype.aa,ly.prototype.B=function(q,_e,_s,La){if(!_s){if(Nv(q=C_(q)))throw new Sv(this.B,0,q);if(Nv(_e=a_(_e)))throw new Sv(this.B,1,_e)}return ew(this.i,this.f,this.h,this.g,q,_e,q,_e,La)},ly.prototype.mergeLatLng=ly.prototype.B,ly.prototype.ca=function(q,_e,_s){return _e||p1(q,this.ca,0),this.B(q.lat,q.lng,_e,_s)},ly.prototype.mergePoint=ly.prototype.ca,ly.prototype.J=function(q,_e,_s){if(!(_e||q instanceof ly))throw new Sv(this.J,0,q);return ew(this.i,this.f,this.h,this.g,q.i,q.f,q.h,q.g,_s)},ly.prototype.mergeRect=ly.prototype.J,ly.prototype.C=function(q,_e,_s,La,_u,ic){return _u||(q=C_(q,this.C,0),_e=a_(_e,this.C,1),_s=C_(_s,this.C,2),La=a_(La,this.C,3)),ew(this.i,this.f,this.h,this.g,q,_e,_s,La,ic)},ly.prototype.mergeTopLeftBottomRight=ly.prototype.C,ly.prototype.ba=function(q,_e){var _s=this.f<=this.g,La=q.f<=q.g,_u=this.f<q.g,ic=q.f<this.g;if(!(_e||q instanceof ly))throw new Sv(this.ba,0,q);return this.h<=q.i&&q.h<=this.i&&(!_s&&(!La||_u||ic)||!La&&(_u||ic)||_u&&ic)},ly.prototype.intersects=ly.prototype.ba,ly.merge=ew,ly.fromPoints=nE,ly.coverPoints=function q(_e,_s){var La=1,_u=_e.length,ic=null,_p=p(_e);if(_p!="array"&&(_p!="object"||typeof _e.length!="number"))throw new Sv(q,0,_e);if(0<_u)for(ic=nE(_p=_e[0],_p,_s);La<_u;La++)_p=_e[La],ic.B(_p.lat,_p.lng,_s,ic);return ic},ly.coverLatLngAlts=function q(_e,_s){var La,_u=3,ic=_e.length;if(!(_s||_e&&_e.length!=null))throw new Sv(q,0,_e);if(0<ic)for(La=new ly(_e[0],_e[1],_e[0],_e[1]);_u<ic;_u+=3)La.B(_e[_u],_e[_u+1],_s,La);return La},ly.coverRects=function q(_e,_s){var La,_u=1,ic=_e.length;if(_s&&(!_e||_e.length==null))throw new Sv(q,0,_e);if(0<ic)for(La=new ly(_e[0].i,_e[0].f,_e[0].h,_e[0].g);_u<ic;_u++)La.J(_e[_u],_s,La);return La},ly.prototype.da=function(q,_e){var _s=this.f,La=this.i,_u=this.g,ic=this.h,_p=this.F().lng;p1(q,this.da,0);var ty=q.lat-ic-(La-ic)/2,iy=q.lng-_p;return q=-180>(q=_s+(0>(iy=180<iy||-180>iy?-(_p+q.lng):iy)?2*iy:0))?360+q:q,_u=180<(_u+=0<iy?2*iy:0)?_u-360:_u,90<=(La=0<ty?La+2*ty:La)&&(La=90),-90>=(ic=0>ty?ic+2*ty:ic)&&(ic=-90),_e?eE(_e,La,q,ic,_u):new ly(La,q,ic,_u)},ly.prototype.resizeToCenter=ly.prototype.da,ly.prototype.l="Polygon",ly.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},ly.prototype.U=function(){return this.j()},ly.prototype.j=function(){return[this.i,this.f,this.h,this.g]},d1.prototype.remove=function(q){var _e,_s,La,_u=!1;if(q&&(_e=q.a)&&_e.b===this&&(_s=_e.entries)&&0<=(La=_s.indexOf(q))){var ic,_p;for(_s.splice(La,1),_s=this.a;_e;)if((ic=_e.entries)&&ic.length||(ic&&delete _e.entries,_e.a||!(_p=_e.c)))_e=V_;else{La=_p;var ty=(_u=_e).j;La[ty]===_u&&(delete La[ty],delete _u.c,--La.a),_s===_e&&(_s=_p),_e=_p}this.a!==_s&&(this.a=_s,pA(this)),fA(this,q,!1),_u=!0}return _u},d1.prototype.flush=function(){var q=new Ix(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);q.b=this,this.a=this.b=q,this.c=null},d1.prototype.o=function(q,_e,_s,La,_u,ic){var _p=[],ty=this.a,iy=this.b;return q<=ty[5]&&_e<=ty[6]&&(_u?_s>=ty[7]:_s>ty[7])&&(ic?La>=ty[4]:La>ty[4])&&F0(this,ty,_p,q,_e,_s,La,ic||La>=iy[6],_u||_s>=iy[5]),_p};var Wv=0;function Ix(q,_e,_s,La,_u,ic){this.j=_e,q&&(this.c=q,this.b=q.b,1&_e?(_s=q[8],_u=q[5]):(_s=q[7],_u=q[8]),2&_e?(La=q[9],ic=q[6]):(La=q[4],ic=q[9])),this[7]=_s,this[5]=_u,this[8]=(_s+_u)/2,this[4]=La,this[6]=ic,this[9]=(La+ic)/2}function Dx(q,_e,_s,La,_u,ic){Dx.ua.constructor.apply(this,arguments)}function dA(q,_e,_s,La,_u,ic,_p){var ty,iy,cy=_e[8],vy=_e[9];return _p&&(_u<cy||(ty=_s>=cy))&&(ic<vy||(iy=La>=vy))?_s=(cy=dA)(q,_e=_e[ty|=iy<<1]||(++_e.a,_e[ty]=new Ix(_e,ty)),_s,La,_u,ic,_p-1):(La=_s=new gA(_s,La,_u,ic),(_e.entries||(_e.entries=[])).push(La),La.a=_e,fA(q,_s,!0),pA(q,_e)),_s}function gA(q,_e,_s,La){this.id=Wv++,this[0]=_e,this[1]=_s,this[2]=La,this[3]=q}function I0(q){this.l=new Dx(+q||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function rE(q,_e,_s,La,_u,ic){if(ic)ic=new gA(_u,-_e,_s+360,-La),q.j.push(ic),q.m=!0,q.a&&q.a.C(_e,_s,La,_u,!0,q.a);else{var _p=-_e,ty=-La,iy=(ic=q.l).b,cy=iy[5],vy=iy[6];if(!(iy[7]<=_s&&iy[4]<=_p&&(cy>_u||cy===_u&&cy===iy.b.b[5])&&(vy>ty||vy===ty&&vy===iy.b.b[6])))throw Error("Coordinates out of bounds");ic=dA(ic,ic.b,_s,_p,_u,ty,ic.sa),q.b&&q.b.C(_e,_s,La,_u,!0,q.b)}return q.c=null,ic}function kx(q,_e,_s,La,_u,ic,_p){var ty,iy=(q=q.j).length,cy=[];if(iy){var vy=_s+360;for(ty=_u+360;iy--;){var zy=q[iy];(iE(zy,_e,_s,La,_u,ic,_p)||iE(zy,_e,vy,La,ty,ic,_p))&&cy.push(zy)}}return cy}function iE(q,_e,_s,La,_u,ic,_p){var ty=q[3],iy=q[0],cy=q[1];return q=q[2],(ic?iy<=La:iy<La)&&(_p?ty<=_u:ty<_u)&&q>=_e&&cy>=_s}function nw(q,_e){var _s,La,_u;if(_s=_e.length){var ic=q.length;for(La={};ic--;)La[q[ic].id]=1;for(;_s--;)(_u=_e[_s]).id in La||q.push(_u)}}function wv(){}function Ky(q,_e,_s){if(this.l=[],_e&&this.K(_e),_s&&!d(_s))throw new Sv(Ky,2,_s);this.b=0,this.m=_s,this.a={},this.j=this.c=null,this.Z(q)}function oE(q,_e){return _e&&(q.c=g1(q,_e,q.c)),_e}function sE(q){for(;q.b>q.u&&q.j;)rw(q,q.j,!0)}function g1(q,_e,_s){return _s!==_e&&((_e.H||_e.v)&&rw(q,_e,!1),(_e.H=_s)&&(_e.v=_s.v,_s.v=_e),_e.v||(q.c=_e),_e.H||(q.j=_e),q.b+=_e.size),_e}function rw(q,_e,_s){var La=_e.v,_u=_e.H;(La||_u||_e==q.c&&_e==q.j)&&(La?La.H=_u:q.c=_u,_u?_u.v=La:q.j=La,q.b-=_e.size,_s&&(delete q.a[_e.id],mA(q,_e))),_e.H=_e.v=null}function mA(q,_e){for(var _s=q.l.length;_s--;)q.l[_s].call(q,_e.id,_e.data,_e.size)}Ix.prototype.a=0,v(Dx,d1),y("H.geo.QuadTree",I0),I0.prototype.N=function(){return this.m},I0.prototype.D=function(){var q;if(!this.c){var _e,_s,La,_u,ic=[];if(_e=!this.b){var _p=this.l,ty=_p.c;_p.I&&!ty&&((_e=_p.a).entries||_e[0]||_e[1]||_e[2]||_e[3])&&(ty=Cx([ty=[_e],ty,ty,ty],[_e[6],_e[7],_e[4],_e[5]]),_p.c=ty),_e=_p=ty}if(_e&&(this.b=new ly(-_p[0],_p[3],-_p[2],_p[1])),(q=this.b)&&ic.push(q),!this.a&&(_u=(La=this.j).length)){for(_p=90,_e=360,ty=-90,_s=0;_u--;){var iy=La[_u];_p=w(_p,iy[0]),_e=w(_e,iy[3]),ty=I(ty,iy[2]),_s=I(_s,iy[1])}this.a=new ly(-_p,_e,-ty,_s-360)}(q=this.a)&&ic.push(q),(q=ic[0])&&(ic[1]&&(q=q.J(ic[1],!0)),this.c=q)}return this.c},I0.prototype.oa=function(q){var _e=q.W(),_s=q.V();return(q=q.N())?rE(this,_e.lat,_s.lng,_s.lat,_e.lng,q):rE(this,_e.lat,_e.lng,_s.lat,_s.lng,q)},I0.prototype.insertBoundingBox=I0.prototype.oa,I0.prototype.remove=function(q){var _e;if(q.a){var _s=this.l.remove(q);this.b=null}else(_s=0<=(q=(_e=this.j).indexOf(q)))&&(_e.splice(q,1),this.m=0<_e.length,this.a=null);return _s&&(this.c=null),_s},I0.prototype.remove=I0.prototype.remove,I0.prototype.pa=function(q,_e,_s){var La=this.l,_u=q.W(),ic=q.V(),_p=-_u.lat;_u=_u.lng;var ty=-ic.lat;return ic=ic.lng,!_e&&_p===ty||!_s&&_u===ic?q=[]:q.N()?(nw(q=La.o(-180,_p,ic,ty,_s,_e),La.o(_u,_p,180,ty,!1,_e)),nw(q,kx(this,_p,ic,ty,_u+360,_e,_s))):nw(q=La.o(_u,_p,ic,ty,_s,_e),kx(this,_p,_u,ty,ic,_e,_s)),q},I0.prototype.intersectBoundingBox=I0.prototype.pa,y("H.util.ICache",wv),wv.prototype.add=function(){},wv.prototype.add=wv.prototype.add,wv.prototype.get=function(){},wv.prototype.get=wv.prototype.get,wv.prototype.S=function(){},wv.prototype.drop=wv.prototype.S,wv.prototype.forEach=function(){},wv.prototype.forEach=wv.prototype.forEach,wv.prototype.Y=function(){},wv.prototype.removeAll=wv.prototype.Y,wv.prototype.K=function(){},wv.prototype.registerOnDrop=wv.prototype.K,wv.prototype.P=function(){},wv.prototype.deRegisterOnDrop=wv.prototype.P,y("H.util.Cache",Ky),Ky.prototype.add=function(q,_e,_s){var La,_u;if(!ub(_s=+_s)||0>_s)throw new Sv(this.add,2,_s);return q=String(q),(_u=!this.m||this.m(q,_e,_s))&&((La=this.a[q])?(La.data!==_e&&mA(this,La),this.b+=_s-La.size,La.size=_s,La.data=_e,oE(this,La)):this.a[q]=g1(this,{id:q,data:_e,size:_s,H:null,v:null},this.c),sE(this)),_u},Ky.prototype.add=Ky.prototype.add,Ky.prototype.K=function(q){if(!d(q))throw new Sv(this.K,0,q);this.l.push(q)},Ky.prototype.registerOnDrop=Ky.prototype.K,Ky.prototype.P=function(q){this.l=this.l.filter(function(_e){return _e!==q})},Ky.prototype.deRegisterOnDrop=Ky.prototype.P,Ky.prototype.get=function(q,_e){return(q=_e?this.a[q]:oE(this,this.a[q]))&&q.data},Ky.prototype.get=Ky.prototype.get,Ky.prototype.S=function(q){var _e;(_e=this.a[q])&&rw(this,_e,!0)},Ky.prototype.drop=Ky.prototype.S,Ky.prototype.forEach=function(q,_e,_s){var La;for(La in this.a){var _u=this.a[La];(!_s||_s(La,_u.data,_u.size))&&q.call(_e,La,_u.data,_u.size)}},Ky.prototype.forEach=Ky.prototype.forEach,Ky.prototype.Y=function(q){var _e;for(_e in this.a){var _s=this.a[_e];(!q||q(_e,_s.data,_s.size))&&rw(this,this.a[_e],!0)}},Ky.prototype.removeAll=Ky.prototype.Y,Ky.prototype.Z=function(q){if(!(0<+q))throw new Sv(Ky.prototype.Z,0,q);return this.u=+q,sE(this),this},Ky.prototype.setMaxSize=Ky.prototype.Z,Ky.prototype.ka=function(){return this.u},Ky.prototype.getMaxSize=Ky.prototype.ka,Ky.prototype.ia=function(){return this.b},Ky.prototype.getCurrentSize=Ky.prototype.ia}).call(ns);var MathUtils$1=MathUtils={},Geo;function _xyToArr(e){return[e.x,e.y]}function _arrToXy(e){return _construct(ns.H.math.Point,_toConsumableArray(e))}MathUtils.clipPolygon=function(e,n){var r,o,s,l=[];if(r=ns.H.math.clipping.clipPolygon(e.map(_arrToXy),n.map(_arrToXy)))do{o=[],s=r;do o.push(_xyToArr(s));while(s=s.next);l.push(o)}while(r=r.nextPoly);else MathUtils.isPointInsidePolygon(n[0],e)?l.push(n):MathUtils.isPointInsidePolygon(e[0],n)&&l.push(e);return l},MathUtils.isPointInsidePolygon=function(e,n){return ns.H.math.isPointInsidePolygon({x:e[0],y:e[1]},ns.H.math.flatten(n))},MathUtils.clamp=function(e,n,r){return(e-=0)>r?r:e<n?n:e},MathUtils.splitLegs=function(e,n){var r=[];e.push(e[0]);for(var o=0;o<e.length-1;o++){var s=e[o],l=e[o+1];if(r.push(s),Math.abs(l[0]-s[0])>=n){var h=[(s[0]+l[0])/2,(s[1]+l[1])/2];r.push(h)}}return r.length!==e.length-1?MathUtils.splitLegs(r,n):r},MathUtils.getBBox=function(e){var n=1/0,r=1/0,o=-1/0,s=-1/0;return e.forEach(function(l){l[0]<n&&(n=l[0]),l[1]<r&&(r=l[1]),l[0]>o&&(o=l[0]),l[1]>s&&(s=l[1])}),[n,r,o,s]},MathUtils.getBBoxCenter=function(e){var n=_slicedToArray(e,4),r=n[0],o=n[1];return[r+(n[2]-r)/2,o+(n[3]-o)/2]},MathUtils.getLineLength=function(e,n,r,o){return Math.sqrt(Math.pow(e-r,2)+Math.pow(n-o,2))},MathUtils.modulo=function(e,n){var r;return(r=e%n)<0==n<0?r:r+n};var Geo$1=Geo={};Geo.default_source_max_zoom=18,Geo.default_view_max_zoom=20,Geo.tile_size=256,Geo.half_circumference_meters=20037508342789244e-9,Geo.circumference_meters=2*Geo.half_circumference_meters,Geo.min_zoom_meters_per_pixel=Geo.circumference_meters/Geo.tile_size;var meters_per_pixel=[];Geo.metersPerPixel=function(e){return meters_per_pixel[e]=meters_per_pixel[e]||Geo.min_zoom_meters_per_pixel/Math.pow(2,e),meters_per_pixel[e]};var meters_per_tile=[];Geo.metersPerTile=function(e){return meters_per_tile[e]=meters_per_tile[e]||Geo.circumference_meters/Math.pow(2,e),meters_per_tile[e]},Geo.tile_scale=4096,Geo.units_per_pixel=Geo.tile_scale/Geo.tile_size,Geo.height_scale=16;var units_per_meter=[];Geo.unitsPerMeter=function(e){return units_per_meter[e]=units_per_meter[e]||Geo.tile_scale/(Geo.tile_size*Geo.metersPerPixel(e)),units_per_meter[e]},Geo.metersForTile=function(e){return{x:e.x*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters,y:-(e.y*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters)}},Geo.tileForMeters=function(e,n){var r=_slicedToArray(e,2),o=r[0],s=r[1];return{x:Math.floor((o+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,n))),y:Math.floor((-s+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,n))),z:n}},Geo.metersToExactTileCoords=function(e,n){var r=_slicedToArray(e,2),o=r[0],s=r[1];return{x:Math.pow(2,n-1)*(1+o/Geo.half_circumference_meters),y:Math.pow(2,n-1)*(1-s/Geo.half_circumference_meters),z:n}},Geo.wrapTile=function(e){var n=e.x,r=e.y,o=e.z,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:!0,y:!1},l=(1<<o)-1;return s.x&&(n&=l),s.y&&(r&=l),{x:n,y:r,z:o}},Geo.wrapMeters=function(e){var n=e.x,r=e.y;return{x:MathUtils$1.modulo(n+Geo.half_circumference_meters,Geo.circumference_meters)-Geo.half_circumference_meters,y:r}},Geo.metersToLatLng=function(e){var n=_slicedToArray(e,2),r=n[0],o=n[1];return r/=Geo.half_circumference_meters,o/=Geo.half_circumference_meters,o=(2*Math.atan(Math.exp(o*Math.PI))-Math.PI/2)/Math.PI,[r*=180,o*=180]},Geo.latLngToMeters=function(e){var n=_slicedToArray(e,2),r=n[0],o=n[1];return o=Math.log(Math.tan(o*Math.PI/360+Math.PI/4))/Math.PI,o*=Geo.half_circumference_meters,o=Math.min(Math.max(o,-Geo.half_circumference_meters),Geo.half_circumference_meters),[r*=Geo.half_circumference_meters/180,o]},Geo.tileSpaceToMeters=function(e,n,r){var o=_slicedToArray(e,2),s=o[0],l=o[1],h=Geo.unitsPerMeter(n);return[s/h+r.x,l/h+r.y]},Geo.tileSpaceToLatlng=function(e,n,r){var o=Geo.unitsPerMeter(n);return Geo.transformGeometry(e,function(s){s[0]=s[0]/o+r.x,s[1]=s[1]/o+r.y;var l=_slicedToArray(Geo.metersToLatLng(s),2),h=l[0],p=l[1];s[0]=h,s[1]=p}),e},Geo.copyGeometry=function(e){if(e!=null){var n={type:e.type};return e.type==="Point"?n.coordinates=[e.coordinates[0],e.coordinates[1]]:e.type==="LineString"||e.type==="MultiPoint"?n.coordinates=e.coordinates.map(function(r){return[r[0],r[1]]}):e.type==="Polygon"||e.type==="MultiLineString"?n.coordinates=e.coordinates.map(function(r){return r.map(function(o){return[o[0],o[1]]})}):e.type==="MultiPolygon"&&(n.coordinates=e.coordinates.map(function(r){return r.map(function(o){return o.map(function(s){return[s[0],s[1]]})})})),n}},Geo.transformGeometry=function(e,n){e!=null&&(e.type==="Point"?n(e.coordinates):e.type==="LineString"||e.type==="MultiPoint"?e.coordinates.forEach(n):e.type==="Polygon"||e.type==="MultiLineString"?e.coordinates.forEach(function(r){return r.forEach(n)}):e.type==="MultiPolygon"&&e.coordinates.forEach(function(r){r.forEach(function(o){return o.forEach(n)})}))},Geo.boxIntersect=function(e,n){return!(n.sw.x>e.ne.x||n.ne.x<e.sw.x||n.sw.y>e.ne.y||n.ne.y<e.sw.y)},Geo.findBoundingBox=function(e){for(var n=1/0,r=-1/0,o=1/0,s=-1/0,l=e[0].length,h=0;h<l;h++){var p=e[0][h];p[0]<n&&(n=p[0]),p[1]<o&&(o=p[1]),p[0]>r&&(r=p[0]),p[1]>s&&(s=p[1])}return[n,o,r,s]},Geo.geometryType=function(e){return e==="Polygon"||e==="MultiPolygon"?"polygon":e==="LineString"||e==="MultiLineString"?"line":e==="Point"||e==="MultiPoint"?"point":void 0},Geo.centroid=function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(e&&e.length!==0){var r,o=0,s=0,l=0,h=e[0],p=h.length;n&&(r=h[0],h=h.map(function(I){return[I[0]-r[0],I[1]-r[1]]}));for(var d=0,g=p-1;d<p;g=d,d++){var y=h[d],v=h[g],_=y[1]*v[0]-v[1]*y[0];o+=(y[0]+v[0])*_,s+=(y[1]+v[1])*_,l+=3*_}var w=[o/l,s/l];return n&&(w[0]+=r[0],w[1]+=r[1]),w}},Geo.multiCentroid=function(e){for(var n=e.length,r=[0,0],o=0;o<e.length;o++){var s=Geo.centroid(e[o]);r[0]+=s[0],r[1]+=s[1]}return r[0]/=n,r[1]/=n,r},Geo.signedPolygonRingAreaSum=function(e){for(var n=0,r=e.length,o=0;o<r-1;o++){var s=e[o],l=e[o+1];n+=s[0]*l[1]-l[0]*s[1]}return n+=e[r-1][0]*e[0][1]-e[0][0]*e[r-1][1]},Geo.polygonRingArea=function(e){return Math.abs(Geo.signedPolygonRingAreaSum(e))/2},Geo.polygonArea=function(e){if(e)return Geo.polygonRingArea(e[0])},Geo.multiPolygonArea=function(e){for(var n=0,r=0;r<e.length;r++)n+=Geo.polygonArea(e[r]);return n},Geo.ringWinding=function(e){var n=Geo.signedPolygonRingAreaSum(e);return n>0?"CW":n<0?"CCW":void 0},Geo.getTileBoundingBox=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=Geo.wrapTile(e,{x:!0}),s=Geo.metersForTile(o),l=Geo.metersPerPixel(o.z),h=Geo.metersToLatLng([s.x-r*l,s.y+r*l]),p=Geo.metersToLatLng([s.x+(n+r)*l,s.y-(n+r)*l]),d=Geo.isLastTile(o);return new ns.H.geo.Rect(e.y===0?90:MathUtils$1.clamp(h[1],-90,90),MathUtils$1.clamp(h[0],-180,180),d.row?-90:MathUtils$1.clamp(p[1],-90,90),d.column?180:MathUtils$1.clamp(p[0],-180,180))},Geo.isLastTile=function(e){var n=e.x,r=e.y,o=e.z;return{row:r===Math.pow(2,o)-1,column:n===Math.pow(2,o)-1}};var MethodNotImplemented=function(e){function n(r){var o;return _classCallCheck(this,n),(o=_callSuper(this,n)).name="MethodNotImplemented",o.message="Method "+r+" must be implemented in subclass",o}return _inherits(n,e),_createClass(n)}(_wrapNativeSuper(Error)),is_worker=!1,is_main=!1,force_main,force_worker;try{window.document!==HTMLDocument&&(is_main=!0)}catch(e){self!==void 0&&(is_worker=!0,self.window={document:{}},self.document=self.window.document)}var Thread={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return force_worker!==void 0?force_worker:is_worker||self.is_fake_worker},set is_worker(e){force_worker=e},get is_main(){return force_main!==void 0?force_main:is_main&&!self.is_fake_worker},set is_main(e){force_main=e},is_native_worker:is_worker},WorkerBroker={},message_id=0,messages={},targets={},main_worker_targets={};function findTarget(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:targets,o=[];if(typeof e=="string"&&(o=e.split("."),e=o.pop()),Thread.is_main&&n&&o.length===1&&o[0]==="self")r=n;else for(var s=0;s<o.length;s++){if(!r[o[s]])return[];r=r[o[s]]}return[e,r]}WorkerBroker.addTarget=function(e,n){Thread.is_fake_worker?main_worker_targets[e]=n:targets[e]=n},WorkerBroker.removeTarget=function(e){delete targets[e],delete main_worker_targets[e]};var ERROR_NO_TARGET=" No object with that name is registered on main thread.",ERROR_NO_METHOD=" Object has no method with that name.",ERROR_NOT_SET="_worker_broker_error_not_set_";function setupMainThread(){WorkerBroker.postMessage=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];if(Array.isArray(e))return Promise.all(e.map(function(v){return WorkerBroker.postMessage.apply(WorkerBroker,[v,n].concat(_toConsumableArray(o)))}));var l,h={};_typeof(n)==="object"&&(h=n,n=n.method);var p="main_send";typeof e=="string"?(n=e,o=Array.prototype.slice.call(arguments,1),l=!0,p="worker_send"):e.init&&(l=!0);var d,g=[];if(o&&o.length===1&&o[0]instanceof WorkerBroker.withTransferables&&(g=o[0].transferables,o=o[0].value),d={type:p,message_id:++message_id,method:n,message:o},l)return function(v,_){var w=v.type,I=_slicedToArray(findTarget(v.method,_,w==="main_send"?main_worker_targets:targets),2),G=I[0],_t=I[1],_r="Worker broker could not dispatch message type ".concat(v.method," on target ").concat(v.target,".");if(!_t)throw Error(_r+ERROR_NO_TARGET);var _o=typeof _t[G]=="function"&&_t[G];if(!_o)throw Error(_r+ERROR_NO_METHOD);return new Promise(function(Ca,_a){var _l;try{_l=_o.apply(_t,v.message)}catch(Qa){return void _a(Qa)}_l instanceof Promise?_l.then(function(Qa){Qa instanceof WorkerBroker.withTransferables&&(Qa=Qa.value[0]),Ca(Qa)},function(Qa){_a(Qa instanceof Error?"".concat(Qa.message,": ").concat(Qa.stack):Qa)}):(_l instanceof WorkerBroker.withTransferables&&(_l=_l.value[0]),Ca(_l))})}(d,e&&e.init?e:void 0);var y=new Promise(function(v,_){messages[message_id]={method:n,message:o,resolve:v,reject:_}});return h.stringify&&(d=JSON.stringify(d)),e.postMessage(d,g.map(function(v){return v.object})),freeTransferables(g),y},WorkerBroker.addWorker=function(e){if(!(e instanceof Worker))throw Error("Worker broker could not add non-Worker object",e);e.addEventListener("message",function(n){var r=typeof n.data=="string"?JSON.parse(n.data):n.data,o=r.message_id;if(r.type==="worker_reply")messages[o]&&(r.error?messages[o].reject(r.error):messages[o].resolve(r.message),delete messages[o]);else if(r.type==="worker_send"&&o!=null){var s=_slicedToArray(findTarget(r.method),2),l=s[0],h=s[1],p="Worker broker could not dispatch message type ".concat(r.method," on target ").concat(r.target,".");if(!h)throw Error(p+ERROR_NO_TARGET);var d=typeof h[l]=="function"&&h[l];if(!d)throw Error(p+ERROR_NO_METHOD);var g,y=ERROR_NOT_SET;try{g=d.apply(h,r.message)}catch(w){y=w}var v,_=[];g&&typeof g.then=="function"?g.then(function(w){w instanceof WorkerBroker.withTransferables&&(_=w.transferables,w=w.value[0]),v={type:"main_reply",message_id:o,message:w},e.postMessage(v,_.map(function(I){return I.object})),freeTransferables(_)},function(w){e.postMessage({type:"main_reply",message_id:o,error:w instanceof Error?"".concat(w.message,": ").concat(w.stack):w})}):(g instanceof WorkerBroker.withTransferables&&(_=g.transferables,g=g.value[0]),v={type:"main_reply",message_id:o,message:g,error:y instanceof Error?"".concat(y.message,": ").concat(y.stack):y},e.postMessage(v,_.map(function(w){return w.object})),freeTransferables(_))}})},WorkerBroker.getMessages=function(){return messages},WorkerBroker.getMessageId=function(){return message_id}}function setupWorkerThread(){WorkerBroker.postMessage=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var s={};_typeof(e)==="object"&&(s=e,e=e.method);var l,h=new Promise(function(d,g){messages[message_id]={method:e,message:r,resolve:d,reject:g}}),p=[];return r&&r.length===1&&r[0]instanceof WorkerBroker.withTransferables&&(p=r[0].transferables,r=r[0].value),l={type:"worker_send",message_id,method:e,message:r},s.stringify&&(l=JSON.stringify(l)),self.postMessage(l,p.map(function(d){return d.object})),freeTransferables(p),message_id++,h},self.addEventListener("message",function(e){var n=typeof e.data=="string"?JSON.parse(e.data):e.data,r=n.message_id;if(n.type==="main_reply")messages[r]&&(n.hasOwnProperty("error")&&n.error!==ERROR_NOT_SET?messages[r].reject(n.error):messages[r].resolve(n.message),delete messages[r]);else if(n.type==="main_send"&&r!=null){var o=_slicedToArray(findTarget(n.method),2),s=o[0],l=o[1],h="Worker broker could not dispatch message type ".concat(n.method," on target ").concat(n.target,".");if(!l)throw Error(h+ERROR_NO_TARGET);var p,d,g=typeof l[s]=="function"&&l[s];if(!g)throw Error(h+ERROR_NO_METHOD);try{p=g.apply(l,n.message)}catch(_){d=_}var y,v=[];p instanceof Promise?p.then(function(_){_ instanceof WorkerBroker.withTransferables&&(v=_.transferables,_=_.value[0]),y={type:"worker_reply",message_id:r,message:_},self.postMessage(y,v.map(function(w){return w.object})),freeTransferables(v)},function(_){self.postMessage({type:"worker_reply",message_id:r,error:_ instanceof Error?"".concat(_.message,": ").concat(_.stack):_})}):(p instanceof WorkerBroker.withTransferables&&(v=p.transferables,p=p.value[0]),y={type:"worker_reply",message_id:r,message:p,error:d instanceof Error?"".concat(d.message,": ").concat(d.stack):d},self.postMessage(y,v.map(function(_){return _.object})),freeTransferables(v))}})}function findTransferables(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(!e)return o;if(Array.isArray(e))e.forEach(function(l,h){return findTransferables(l,e,h,o)});else if(_typeof(e)==="object")if(e instanceof ArrayBuffer)o.push({object:e,parent:n,property:r});else if(e.buffer instanceof ArrayBuffer)o.push({object:e.buffer,parent:n,property:r});else for(var s in e)findTransferables(e[s],e,s,o);return o}function freeTransferables(e){Array.isArray(e)&&e.filter(function(n){return n.parent&&n.property}).forEach(function(n){return delete n.parent[n.property]})}WorkerBroker.withTransferables=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!(this instanceof WorkerBroker.withTransferables))return _construct(WorkerBroker.withTransferables,n);this.value=n,this.transferables=findTransferables(this.value)},Thread.is_main&&setupMainThread(),Thread.is_worker&&setupWorkerThread();var LEVELS={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},methods={},logged_once={},Utils;function methodForLevel(e){return methods[e]=methods[e]||(console[e]?console[e]:console.log).bind(console),methods[e]}function log(e){var n=_typeof(e)==="object"?e.level:e;if(LEVELS[n]<=LEVELS[log.level]){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(Thread.is_native_worker)WorkerBroker.postMessage.apply(WorkerBroker,[{method:"_logProxy",stringify:!0},e].concat(o));else{if(_typeof(e)==="object"&&e.once===!0){if(logged_once[JSON.stringify(o)])return;logged_once[JSON.stringify(o)]=!0}var l=methodForLevel(n);o.length>1?l.apply(void 0,["Tangram [".concat(n,"]: ").concat(o[0])].concat(_toConsumableArray(o.slice(1)))):l("Tangram [".concat(n,"]: ").concat(o[0]))}}}function debounce(e,n,r){var o,s;return r=r||0,function(){var l=this,h=arguments;function p(){s=0,e.apply(l,h)}clearTimeout(o),s&&r&&Date.now()-s>=r?p():(s||(s=Date.now()),o=setTimeout(function(){p()},n))}}log.level="info",log.workers=null,log.setLevel=function(e){log.level=e,Thread.is_main&&Array.isArray(log.workers)&&WorkerBroker.postMessage(log.workers,"_logSetLevelProxy",e)},Thread.is_main&&(log.setWorkers=function(e){log.workers=e},log.reset=function(){logged_once={}}),WorkerBroker.addTarget("_logProxy",log),WorkerBroker.addTarget("_logSetLevelProxy",log.setLevel);var Utils$1=Utils={};WorkerBroker.addTarget("Utils",Utils),Utils.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},Utils.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},Utils._requests={},Utils._proxy_requests={},Utils.io=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6e4,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"text",o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"GET",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,h=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(Thread.is_worker&&Utils.isMicrosoft())return log("debug","Proxying request for URL to worker",e),l&&(Utils._proxy_requests[l]=!0),WorkerBroker.postMessage("Utils.io",e,n,r,o,s,l,!0);var p=new XMLHttpRequest,d=new Promise(function(g,y){p.open(o,e,!0),p.timeout=n,p.responseType=r,p.onload=function(){p.status===200?["text","json"].indexOf(p.responseType)>-1?g(p.responseText):g(p.response):y(Error("Request error with a status of "+p.statusText))},p.onerror=function(v){y(Error("There was a network error"+v.toString()))},p.ontimeout=function(v){y(Error("timeout "+v.toString()))},p.send()});return d=d.then(function(g){return l&&delete Utils._requests[l],h?WorkerBroker.withTransferables(g):g}),l&&(Utils._requests[l]=p),d},Utils.cancelRequest=function(e){if(Thread.is_worker&&Utils._proxy_requests[e])return WorkerBroker.postMessage("Utils.cancelRequest",e);Utils._requests[e]?(log("trace","Cancelling network request key '".concat(e,"'")),Utils._requests[e].abort(),delete Utils._requests[e]):log("trace","Could not find network request key '".concat(e,"'"))},Utils.requestAnimationFramePolyfill=function(){typeof window.requestAnimationFrame!="function"&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16.666666666666668)})},Utils.serializeWithFunctions=function(e){return typeof e=="function"?e.toString():JSON.stringify(e,function(n,r){return typeof r=="function"?r.toString():r})},Utils.stringsToFunctions=function(e,n){if(typeof e=="string")e=Utils.stringToFunction(e,n);else if(e!=null&&_typeof(e)==="object")for(var r in e)e[r]=Utils.stringsToFunctions(e[r],n);return e},Utils._use_count=0,Utils._function_cache={};var _clear_function_cache=debounce(function(){log("trace","Cleared cached ".concat(Object.keys(Utils._function_cache).length," functions (reused ").concat(Utils._use_count," times)")),Utils._use_count=0,Utils._function_cache={}},1e4),FUNCTION_MATCH_RGX=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m,_createObjectURL,_revokeObjectURL;function addBaseURL(e,n){if(!e||!isRelativeURL(e))return e;var r,o=e[0]!=="/";if(n?(r=document.createElement("a")).href=n:r=window.location,o)e=pathForURL(r.href)+e;else{var s=r.origin;s||(s=r.protocol+"//"+r.host),e=s+e}return e}function pathForURL(e){if(typeof e=="string"&&e.search(/^(data|blob):/)===-1){var n=e.indexOf("?");n>-1&&(e=e.substr(0,n));var r=e.indexOf("#");return r>-1&&(e=e.substr(0,r)),e.substr(0,e.lastIndexOf("/")+1)||""}return""}function extensionForURL(e){var n=(e=e.split("/").pop()).lastIndexOf(".");if(n>-1)return e.substring(n+1)}function isRelativeURL(e){if(typeof e=="string")return!(e.search(/^(http|https|data|blob):/)>-1||e.substr(0,2)==="//")}function addParamsToURL(e,n){if(!n||Object.keys(n).length===0)return[e,[]];var r=e.indexOf("?"),o=e.indexOf("#"),s="";o>-1&&(s=e.slice(o),e=e.slice(0,o)),r===-1&&(r=e.length,e+="?"),r++;var l="",h=[];for(var p in n)getURLParameter(p,e)===""?l+="".concat(p,"=").concat(n[p],"&"):h.push([p,n[p]]);return[e=e.slice(0,r)+l+e.slice(r)+s,h]}function createObjectURL(e){return _createObjectURL===void 0&&typeof(_createObjectURL=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)!="function"&&(_createObjectURL=null,log("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_createObjectURL?_createObjectURL(e):e}function revokeObjectURL(e){return _revokeObjectURL===void 0&&typeof(_revokeObjectURL=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)!="function"&&(_revokeObjectURL=null,log("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_revokeObjectURL?_revokeObjectURL(e):e}function getURLParameter(e,n){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return r===null?"":decodeURIComponent(r[1].replace(/\+/g," "))}Utils.stringToFunction=function(e,n){var r=e;n&&(r+=n.toString());var o=Utils._function_cache[r];if(_clear_function_cache(),o)return Utils._use_count++,o;var s=typeof e=="string"&&e.match(FUNCTION_MATCH_RGX);if(s&&s.length>2)try{var l=s[2],h=s[1].length>0&&s[1].split(",").map(function(d){return d.trim()}).filter(function(d){return d});h=h.length>0?h:["context"];var p=new Function(h.toString(),typeof n=="function"?n(l):l);return Utils._function_cache[r]=p,p}catch{return e}return e},Utils.device_pixel_ratio=1,Utils.isPowerOf2=function(e){return!(e&e-1)},Utils.interpolate=function(e,n,r){if(!Array.isArray(n)||!Array.isArray(n[0])||n.length<1)return n;var o,s,l,h,p;if(e<=n[0][0])h=n[0][1],typeof r=="function"&&(h=r(h));else if(e>=n[n.length-1][0])h=n[n.length-1][1],typeof r=="function"&&(h=r(h));else for(var d=0;d<n.length-1;d++)if(e>=n[d][0]&&e<n[d+1][0]){if(o=n[d][0],s=n[d+1][0],Array.isArray(n[d][1])){h=[];for(var g=0;g<n[d][1].length;g++)typeof r=="function"?(p=r(n[d][1][g]),l=r(n[d+1][1][g])-p,h[g]=l*(e-o)/(s-o)+p):(l=n[d+1][1][g]-n[d][1][g],h[g]=l*(e-o)/(s-o)+n[d][1][g])}else typeof r=="function"?(p=r(n[d][1]),h=(l=r(n[d+1][1])-p)*(e-o)/(s-o)+p):h=(l=n[d+1][1]-n[d][1])*(e-o)/(s-o)+n[d][1];break}return h},Utils.toCSSColor=function(e){return e[3]===1?"rgb(".concat(e.slice(0,3).map(function(n){return Math.round(255*n)}).join(", "),")"):"rgba(".concat(e.map(function(n,r){return r<3&&Math.round(255*n)||n}).join(", "),")")},Utils.pointInTile=function(e){return e[0]>=0&&e[1]>-Geo$1.tile_scale&&e[0]<Geo$1.tile_scale&&e[1]<=0},Utils.zoomToTileLevel=function(e){return Math.floor(e)};var DataSource=function(){function e(n,r){var o=this;if(_classCallCheck(this,e),this.config=n,this.sources=r,this.id=n.id,this.name=n.name,this.pad_scale=n.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(n.rasters)&&n.rasters.forEach(function(l){o.rasters.indexOf(l)===-1&&o.rasters.push(l)}),this.preprocess=n.preprocess,typeof this.preprocess=="function"&&this.preprocess.bind(this),this.transform=n.transform,typeof this.transform=="function")this.transform=this.transform.bind(this);else if(_typeof(this.transform)==="object")for(var s in this.transform)typeof this.transform[s]=="function"&&(this.transform[s]=this.transform[s].bind(this));this.extra_data=n.extra_data,this.scripts=n.scripts,this.max_zoom=n.max_zoom!=null?n.max_zoom:Geo$1.default_source_max_zoom,this.setTileSize(n.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=n.min_display_zoom!=null?n.min_display_zoom:0,this.max_display_zoom=n.max_display_zoom!=null?n.max_display_zoom:null,this._has_volatile_data=!!n.has_volatile_data}return _createClass(e,[{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._has_volatile_data=n}},{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(n){if(n.source_data.layers){var r={coords:n.coords},o=[];if(typeof this.transform=="function")o.push(this.transform);else if(_typeof(this.transform)==="object")for(var s=Object.keys(this.transform).sort(),l=0;l<s.length;l++)o.push(this.transform[s[l]]);for(var h=Object.keys(n.source_data.layers).length===1&&n.source_data.layers._default,p=0;p<o.length;p++)h?n.source_data.layers._default=o[p](n.source_data.layers._default,this.extra_data,r):n.source_data.layers=o[p](n.source_data.layers,this.extra_data,r)}}},{key:"_postProcessTile",value:function(n){var r=this;for(var o in this._transformTile(n),n.source_data.layers){var s=n.source_data.layers[o];s&&s.features&&s.features.forEach(function(l){Geo$1.transformGeometry(l.geometry,function(h){h[1]=-h[1],r.pad_scale&&(h[0]=Math.round(h[0]*(1+r.pad_scale)-Geo$1.tile_scale*r.pad_scale/2),h[1]=Math.round(h[1]*(1+r.pad_scale)-Geo$1.tile_scale*r.pad_scale/2))}),r.updateDefaultWinding(l.geometry)})}n.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(n){return n.source_data={},n.source_data.layers={},n.pad_scale=this.pad_scale,n.rasters=_toConsumableArray(this.rasters),this._load(n)}},{key:"_load",value:function(n){throw new MethodNotImplemented("_load")}},{key:"setTileSize",value:function(n){this.tile_size=n||256,(typeof this.tile_size!="number"||this.tile_size<256||!Utils$1.isPowerOf2(this.tile_size))&&(log({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(n,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(n){return this.default_winding==null&&(n.type==="Polygon"?this.default_winding=Geo$1.ringWinding(n.coordinates[0]):n.type==="MultiPolygon"&&(this.default_winding=Geo$1.ringWinding(n.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(n,r){if(n.z<this.min_display_zoom||this.max_display_zoom!=null&&r>this.max_display_zoom)return!1;for(var o=0;o<this.rasters.length;o++){var s=this.rasters[o];if(this.sources[s]&&this.sources[s]!==this&&!this.sources[s].includesTile(n,n.z))return!1}return!0}}],[{key:"create",value:function(n,r){for(var o in r)if(r[o].config.name===n.name&&e.sameConfig(r[o],{config:n}))return r[o];if(e.types[n.type])return new e.types[n.type](n,r)}},{key:"sameConfig",value:function(n,r){if(!n||!r)return!1;var o=Object.assign({},n.config,{id:null,tiled:null,url:null}),s=Object.assign({},r.config,{id:null,tiled:null,url:null});return JSON.stringify(o)===JSON.stringify(s)}},{key:"coordsToMeters",value:function(n){var r=_slicedToArray(Geo$1.latLngToMeters(n),2),o=r[0],s=r[1];n[0]=o,n[1]=s}},{key:"projectData",value:function(n){for(var r in n.layers)for(var o=n.layers[r].features.length,s=0;s<o;s++){var l=n.layers[r].features[s];Geo$1.transformGeometry(l.geometry,e.coordsToMeters)}}},{key:"metersToTileUnits",value:function(n,r,o){o[0]=Math.round((o[0]-r.x)*n),o[1]=-1*Math.round((o[1]-r.y)*n)}},{key:"scaleData",value:function(n,r){var o=r.coords.z,s=r.min;r.max;var l=e.metersToTileUnits.bind(this,Geo$1.unitsPerMeter(o),s);for(var h in n.layers)for(var p=n.layers[h].features.length,d=0;d<p;d++){var g=n.layers[h].features[d];Geo$1.transformGeometry(g.geometry,l)}}},{key:"register",value:function(n,r){n&&r&&(e.types[r]=n)}}])}();DataSource.types={};var network_request_id=0,NetworkSource=function(e){function n(r,o){var s;_classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).response_type="";var l=_slicedToArray(addParamsToURL(r.url,r.url_params),2),h=l[0],p=l[1];if(s.url=h,p.forEach(function(d){var g=_slicedToArray(d,2),y=g[0],v=g[1];log({level:"warn",once:!0},"Data source '".concat(s.name,"': parameter '").concat(y,"' already present in URL '").concat(r.url,"', ")+"skipping value '".concat(y,"=").concat(v,"' specified in 'url_params'"))}),typeof s.url!="string")throw Error("Network data source must provide a string `url` property");return s}return _inherits(n,e),_createClass(n,[{key:"_load",value:function(r){var o=this,s=this.formatUrl(this.url,r),l=r.source_data;return l.url=s,new Promise(function(h,p){l.error=null;var d=network_request_id+++"-"+s,g=Utils$1.io(s,6e4,o.response_type,"GET",{},d);l.request_id=d,g.then(function(y){typeof o.preprocess=="function"&&(y=o.preprocess(y)),(y=y instanceof Promise?y:Promise.resolve(y)).then(function(v){o.parseSourceData(r,l,v),o._postProcessTile(r),h(r)})},function(y){l.error=y.stack,o._postProcessTile(r),h(r)})})}},{key:"formatUrl",value:function(r,o){throw new MethodNotImplemented("formatUrl")}},{key:"parseSourceData",value:function(r,o,s){throw new MethodNotImplemented("parseSourceData")}}])}(DataSource),NetworkTileSource=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).tiled=!0,s.parseBounds(r),s.builds_geometry_tiles=!1,s.tms=r.tms===!0,s.url.search("{s}")>-1&&(Array.isArray(r.url_subdomains)&&r.url_subdomains.length>0?(s.url_subdomains=r.url_subdomains,s.next_url_subdomain=0):log({level:"warn",once:!0},"Data source '".concat(s.name,"': source URL includes '{s}' subdomain marker ('").concat(s.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),s}return _inherits(n,e),_createClass(n,[{key:"parseBounds",value:function(r){if(Array.isArray(r.bounds)&&r.bounds.length===4){this.bounds=r.bounds;var o=_slicedToArray(this.bounds,4),s=o[0],l=o[1],h=o[2],p=o[3];this.bounds_meters={min:Geo$1.latLngToMeters([s,p]),max:Geo$1.latLngToMeters([h,l])},this.bounds_tiles={min:{},max:{}}}}},{key:"checkBounds",value:function(r){if(this.bounds){r=Geo$1.wrapTile(r,{x:!0});var o=this.bounds_tiles.min[r.z];o||(o=this.bounds_tiles.min[r.z]=Geo$1.tileForMeters(this.bounds_meters.min,r.z));var s=this.bounds_tiles.max[r.z];if(s||(s=this.bounds_tiles.max[r.z]=Geo$1.tileForMeters(this.bounds_meters.max,r.z)),r.x<o.x||r.x>s.x||r.y<o.y||r.y>s.y)return!1}return!0}},{key:"includesTile",value:function(r,o){return!!_get(_getPrototypeOf(n.prototype),"includesTile",this).call(this,r,o)&&!!this.checkBounds(r)}},{key:"formatUrl",value:function(r,o){var s=Geo$1.wrapTile(o.coords,{x:!0});this.tms&&(s.y=Math.pow(2,s.z)-1-s.y);var l=r.replace("{x}",s.x).replace("{y}",s.y).replace("{z}",s.z);return this.url_subdomains!=null&&(l=l.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),l}},{key:"urlHasTilePattern",value:function(r){return r&&r.search("{x}")>-1&&r.search("{y}")>-1&&r.search("{z}")>-1}}])}(NetworkSource),MapsJsSource=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).target_name="MapsJsSource"+r.uid,s.tiled=!!r.tiled,WorkerBroker.addTarget(s.target_name,s),Thread.is_worker&&WorkerBroker.postMessage(s.target_name+".onWorkerInitialized"),Thread.is_main&&(s._workers_left=0),s}return _inherits(n,e),_createClass(n,[{key:"initialize",value:function(r,o,s,l){this._main_initialized||(this.provider=r,this.worker=l,this._workers_left+=s,this._on_update=o,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),r.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(r){this._isReady()&&this.onProviderUpdate(r)}},{key:"onProviderUpdate",value:function(r){this.dispatchUpdate(void 0,r.data)}},{key:"dispatchUpdate",value:function(r,o){this._on_update(this.name,r,o)}},{key:"dispose",value:function(){WorkerBroker.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}])}(DataSource),ieee754$1={read:function(e,n,r,o,s){var l,h,p=8*s-o-1,d=(1<<p)-1,g=d>>1,y=-7,v=r?s-1:0,_=r?-1:1,w=e[n+v];for(v+=_,l=w&(1<<-y)-1,w>>=-y,y+=p;y>0;l=256*l+e[n+v],v+=_,y-=8);for(h=l&(1<<-y)-1,l>>=-y,y+=o;y>0;h=256*h+e[n+v],v+=_,y-=8);if(l===0)l=1-g;else{if(l===d)return h?NaN:1/0*(w?-1:1);h+=Math.pow(2,o),l-=g}return(w?-1:1)*h*Math.pow(2,l-o)},write:function(e,n,r,o,s,l){var h,p,d,g=8*l-s-1,y=(1<<g)-1,v=y>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=o?0:l-1,I=o?1:-1,G=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(p=isNaN(n)?1:0,h=y):(h=Math.floor(Math.log(n)/Math.LN2),n*(d=Math.pow(2,-h))<1&&(h--,d*=2),(n+=h+v>=1?_/d:_*Math.pow(2,1-v))*d>=2&&(h++,d/=2),h+v>=y?(p=0,h=y):h+v>=1?(p=(n*d-1)*Math.pow(2,s),h+=v):(p=n*Math.pow(2,v-1)*Math.pow(2,s),h=0));s>=8;e[r+w]=255&p,w+=I,p/=256,s-=8);for(h=h<<s|p,g+=s;g>0;e[r+w]=255&h,w+=I,h/=256,g-=8);e[r+w-I]|=128*G}},pbf=Pbf,ieee754=ieee754$1;function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32;function readVarintRemainder(e,n,r){var o,s,l=r.buf;if(o=(112&(s=l[r.pos++]))>>4,s<128||(o|=(127&(s=l[r.pos++]))<<3,s<128)||(o|=(127&(s=l[r.pos++]))<<10,s<128)||(o|=(127&(s=l[r.pos++]))<<17,s<128)||(o|=(127&(s=l[r.pos++]))<<24,s<128)||(o|=(1&(s=l[r.pos++]))<<31,s<128))return toNum(e,o,n);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,n,r){return r?4294967296*n+(e>>>0):4294967296*(n>>>0)+(e>>>0)}function writeBigVarint(e,n){var r,o;if(e>=0?(r=e%4294967296|0,o=e/4294967296|0):(o=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,o=o+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),writeBigVarintLow(r,o,n),writeBigVarintHigh(o,n)}function writeBigVarintLow(e,n,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}function writeBigVarintHigh(e,n){var r=(7&e)<<4;n.buf[n.pos++]|=r|((e>>>=3)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e)))))}function makeRoomForExtraLength(e,n,r){var o=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.ceil(Math.log(n)/(7*Math.LN2));r.realloc(o);for(var s=r.pos-1;s>=e;s--)r.buf[s+o]=r.buf[s]}function writePackedVarint(e,n){for(var r=0;r<e.length;r++)n.writeVarint(e[r])}function writePackedSVarint(e,n){for(var r=0;r<e.length;r++)n.writeSVarint(e[r])}function writePackedFloat(e,n){for(var r=0;r<e.length;r++)n.writeFloat(e[r])}function writePackedDouble(e,n){for(var r=0;r<e.length;r++)n.writeDouble(e[r])}function writePackedBoolean(e,n){for(var r=0;r<e.length;r++)n.writeBoolean(e[r])}function writePackedFixed32(e,n){for(var r=0;r<e.length;r++)n.writeFixed32(e[r])}function writePackedSFixed32(e,n){for(var r=0;r<e.length;r++)n.writeSFixed32(e[r])}function writePackedFixed64(e,n){for(var r=0;r<e.length;r++)n.writeFixed64(e[r])}function writePackedSFixed64(e,n){for(var r=0;r<e.length;r++)n.writeSFixed64(e[r])}function readUInt32(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+16777216*e[n+3]}function writeInt32(e,n,r){e[r]=n,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24}function readInt32(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+(e[n+3]<<24)}function readUtf8(e,n,r){for(var o="",s=n;s<r;){var l,h,p,d=e[s],g=null,y=d>239?4:d>223?3:d>191?2:1;if(s+y>r)break;y===1?d<128&&(g=d):y===2?(192&(l=e[s+1]))==128&&(g=(31&d)<<6|63&l)<=127&&(g=null):y===3?(l=e[s+1],h=e[s+2],(192&l)==128&&(192&h)==128&&((g=(15&d)<<12|(63&l)<<6|63&h)<=2047||g>=55296&&g<=57343)&&(g=null)):y===4&&(l=e[s+1],h=e[s+2],p=e[s+3],(192&l)==128&&(192&h)==128&&(192&p)==128&&((g=(15&d)<<18|(63&l)<<12|(63&h)<<6|63&p)<=65535||g>=1114112)&&(g=null)),g===null?(g=65533,y=1):g>65535&&(g-=65536,o+=String.fromCharCode(g>>>10&1023|55296),g=56320|1023&g),o+=String.fromCharCode(g),s+=y}return o}function writeUtf8(e,n,r){for(var o,s,l=0;l<n.length;l++){if((o=n.charCodeAt(l))>55295&&o<57344){if(!s){o>56319||l+1===n.length?(e[r++]=239,e[r++]=191,e[r++]=189):s=o;continue}if(o<56320){e[r++]=239,e[r++]=191,e[r++]=189,s=o;continue}o=s-55296<<10|o-56320|65536,s=null}else s&&(e[r++]=239,e[r++]=191,e[r++]=189,s=null);o<128?e[r++]=o:(o<2048?e[r++]=o>>6|192:(o<65536?e[r++]=o>>12|224:(e[r++]=o>>18|240,e[r++]=o>>12&63|128),e[r++]=o>>6&63|128),e[r++]=63&o|128)}return r}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,n,r){for(r=r||this.length;this.pos<r;){var o=this.readVarint(),s=o>>3,l=this.pos;this.type=7&o,e(s,n,this),this.pos===l&&this.skip(o)}return n},readMessage:function(e,n){return this.readFields(e,n,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readFloat:function(){var e=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var n,r,o=this.buf;return n=127&(r=o[this.pos++]),r<128?n:(n|=(127&(r=o[this.pos++]))<<7,r<128?n:(n|=(127&(r=o[this.pos++]))<<14,r<128?n:(n|=(127&(r=o[this.pos++]))<<21,r<128?n:readVarintRemainder(n|=(15&(r=o[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,n=readUtf8(this.buf,this.pos,e);return this.pos=e,n},readBytes:function(){var e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n},readPackedVarint:function(e,n){var r=readPackedEnd(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(n));return e},readPackedSVarint:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readFloat());return e},readPackedDouble:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed64());return e},skip:function(e){var n=7&e;if(n===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(n===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Pbf.Fixed32)this.pos+=4;else{if(n!==Pbf.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(e,n){this.writeVarint(e<<3|n)},realloc:function(e){for(var n=this.length||16;n<this.pos+e;)n*=2;if(n!==this.length){var r=new Uint8Array(n);r.set(this.buf),this.buf=r,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?writeBigVarint(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var n=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);var r=this.pos-n;r>=128&&makeRoomForExtraLength(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var n=e.length;this.writeVarint(n),this.realloc(n);for(var r=0;r<n;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,n){this.pos++;var r=this.pos;e(n,this);var o=this.pos-r;o>=128&&makeRoomForExtraLength(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,n,r){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(n,r)},writePackedVarint:function(e,n){this.writeMessage(e,writePackedVarint,n)},writePackedSVarint:function(e,n){this.writeMessage(e,writePackedSVarint,n)},writePackedBoolean:function(e,n){this.writeMessage(e,writePackedBoolean,n)},writePackedFloat:function(e,n){this.writeMessage(e,writePackedFloat,n)},writePackedDouble:function(e,n){this.writeMessage(e,writePackedDouble,n)},writePackedFixed32:function(e,n){this.writeMessage(e,writePackedFixed32,n)},writePackedSFixed32:function(e,n){this.writeMessage(e,writePackedSFixed32,n)},writePackedFixed64:function(e,n){this.writeMessage(e,writePackedFixed64,n)},writePackedSFixed64:function(e,n){this.writeMessage(e,writePackedSFixed64,n)},writeBytesField:function(e,n){this.writeTag(e,Pbf.Bytes),this.writeBytes(n)},writeFixed32Field:function(e,n){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(e,n){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(e,n){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(e,n){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(n)},writeVarintField:function(e,n){this.writeTag(e,Pbf.Varint),this.writeVarint(n)},writeSVarintField:function(e,n){this.writeTag(e,Pbf.Varint),this.writeSVarint(n)},writeStringField:function(e,n){this.writeTag(e,Pbf.Bytes),this.writeString(n)},writeFloatField:function(e,n){this.writeTag(e,Pbf.Fixed32),this.writeFloat(n)},writeDoubleField:function(e,n){this.writeTag(e,Pbf.Fixed64),this.writeDouble(n)},writeBooleanField:function(e,n){this.writeVarintField(e,!!n)}};var Pbf$1=getDefaultExportFromCjs(pbf),pointGeometry=Point$1;function Point$1(e,n){this.x=e,this.y=n}Point$1.prototype={clone:function(){return new Point$1(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,n){return this.clone()._rotateAround(e,n)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var n=e.x-this.x,r=e.y-this.y;return n*n+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,n){return Math.atan2(this.x*n-this.y*e,this.x*e+this.y*n)},_matMult:function(e){var n=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=n,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var n=Math.cos(e),r=Math.sin(e),o=n*this.x-r*this.y,s=r*this.x+n*this.y;return this.x=o,this.y=s,this},_rotateAround:function(e,n){var r=Math.cos(e),o=Math.sin(e),s=n.x+r*(this.x-n.x)-o*(this.y-n.y),l=n.y+o*(this.x-n.x)+r*(this.y-n.y);return this.x=s,this.y=l,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point$1.convert=function(e){return e instanceof Point$1?e:Array.isArray(e)?new Point$1(e[0],e[1]):e};var Point=pointGeometry,vectortilefeature=VectorTileFeature$2;function VectorTileFeature$2(e,n,r,o,s){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=s,e.readFields(readFeature,this,n)}function readFeature(e,n,r){e==1?n.id=r.readVarint():e==2?readTag(r,n):e==3?n.type=r.readVarint():e==4&&(n._geometry=r.pos)}function readTag(e,n){for(var r=e.readVarint()+e.pos;e.pos<r;){var o=n._keys[e.readVarint()],s=n._values[e.readVarint()];n.properties[o]=s}}function classifyRings(e){var n=e.length;if(n<=1)return[e];for(var r,o,s=[],l=0;l<n;l++){var h=signedArea$1(e[l]);h!==0&&(o===void 0&&(o=h<0),o===h<0?(r&&s.push(r),r=[e[l]]):r.push(e[l]))}return r&&s.push(r),s}function signedArea$1(e){for(var n,r,o=0,s=0,l=e.length,h=l-1;s<l;h=s++)n=e[s],o+=((r=e[h]).x-n.x)*(n.y+r.y);return o}VectorTileFeature$2.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature$2.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var n,r=e.readVarint()+e.pos,o=1,s=0,l=0,h=0,p=[];e.pos<r;){if(!s){var d=e.readVarint();o=7&d,s=d>>3}if(s--,o===1||o===2)l+=e.readSVarint(),h+=e.readSVarint(),o===1&&(n&&p.push(n),n=[]),n.push(new Point(l,h));else{if(o!==7)throw new Error("unknown command "+o);n&&n.push(n[0].clone())}}return n&&p.push(n),p},VectorTileFeature$2.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,r=1,o=0,s=0,l=0,h=1/0,p=-1/0,d=1/0,g=-1/0;e.pos<n;){if(!o){var y=e.readVarint();r=7&y,o=y>>3}if(o--,r===1||r===2)(s+=e.readSVarint())<h&&(h=s),s>p&&(p=s),(l+=e.readSVarint())<d&&(d=l),l>g&&(g=l);else if(r!==7)throw new Error("unknown command "+r)}return[h,d,p,g]},VectorTileFeature$2.prototype.toGeoJSON=function(e,n,r){var o,s,l=this.extent*Math.pow(2,r),h=this.extent*e,p=this.extent*n,d=this.loadGeometry(),g=VectorTileFeature$2.types[this.type];function y(w){for(var I=0;I<w.length;I++){var G=w[I],_t=180-360*(G.y+p)/l;w[I]=[360*(G.x+h)/l-180,360/Math.PI*Math.atan(Math.exp(_t*Math.PI/180))-90]}}switch(this.type){case 1:var v=[];for(o=0;o<d.length;o++)v[o]=d[o][0];y(d=v);break;case 2:for(o=0;o<d.length;o++)y(d[o]);break;case 3:for(d=classifyRings(d),o=0;o<d.length;o++)for(s=0;s<d[o].length;s++)y(d[o][s])}d.length===1?d=d[0]:g="Multi"+g;var _={type:"Feature",geometry:{type:g,coordinates:d},properties:this.properties};return"id"in this&&(_.id=this.id),_};var VectorTileFeature$1=vectortilefeature;function VectorTileLayer$1(e,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(readLayer$1,this,n),this.length=this._features.length}function readLayer$1(e,n,r){e===15?n.version=r.readVarint():e===1?n.name=r.readString():e===5?n.extent=r.readVarint():e===2?n._features.push(r.pos):e===3?n._keys.push(r.readString()):e===4&&n._values.push(readValueMessage$1(r))}function readValueMessage$1(e){for(var n=null,r=e.readVarint()+e.pos;e.pos<r;){var o=e.readVarint()>>3;n=o===1?e.readString():o===2?e.readFloat():o===3?e.readDouble():o===4?e.readVarint64():o===5?e.readVarint():o===6?e.readSVarint():o===7?e.readBoolean():null}return n}VectorTileLayer$1.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var n=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature$1(this._pbf,n,this.extent,this._keys,this._values)};var VectorTileFeature=vectortilefeature,long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,n,r){this.low=0|e,this.high=0|n,this.unsigned=!!r}function isLong(e){return(e&&e.__isLong__)===!0}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,n){var r,o,s;return n?(s=0<=(e>>>=0)&&e<256)&&(o=UINT_CACHE[e])?o:(r=fromBits(e,(0|e)<0?-1:0,!0),s&&(UINT_CACHE[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(o=INT_CACHE[e])?o:(r=fromBits(e,e<0?-1:0,!1),s&&(INT_CACHE[e]=r),r)}function fromNumber(e,n){if(isNaN(e))return n?UZERO:ZERO;if(n){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE$1}return e<0?fromNumber(-e,n).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,n)}function fromBits(e,n,r){return new Long(e,n,r)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString$1(e,n,r){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ZERO;if(typeof n=="number"?(r=n,n=!1):n=!!n,(r=r||10)<2||36<r)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return fromString$1(e.substring(1),n,r).neg();for(var s=fromNumber(pow_dbl(r,8)),l=ZERO,h=0;h<e.length;h+=8){var p=Math.min(8,e.length-h),d=parseInt(e.substring(h,h+p),r);if(p<8){var g=fromNumber(pow_dbl(r,p));l=l.mul(g).add(fromNumber(d))}else l=(l=l.mul(s)).add(fromNumber(d))}return l.unsigned=n,l}function fromValue(e,n){return typeof e=="number"?fromNumber(e,n):typeof e=="string"?fromString$1(e,n):fromBits(e.low,e.high,typeof n=="boolean"?n:e.unsigned)}Long.fromString=fromString$1,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE$1=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE$1;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var n=fromNumber(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=fromNumber(pow_dbl(e,6),this.unsigned),l=this,h="";;){var p=l.div(s),d=(l.sub(p.mul(s)).toInt()>>>0).toString(e);if((l=p).isZero())return d+h;for(;d.length<6;)d="0"+d;h=""+d+h}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1},LongPrototype.isZero=function(){return this.high===0&&this.low===0},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return!(1&~this.low)},LongPrototype.isEven=function(){return!(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,h=65535&e.high,p=e.low>>>16,d=0,g=0,y=0,v=0;return y+=(v+=s+(65535&e.low))>>>16,g+=(y+=o+p)>>>16,d+=(g+=r+h)>>>16,d+=n+l,fromBits((y&=65535)<<16|(v&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,h=65535&e.high,p=e.low>>>16,d=65535&e.low,g=0,y=0,v=0,_=0;return v+=(_+=s*d)>>>16,y+=(v+=o*d)>>>16,v&=65535,y+=(v+=s*p)>>>16,g+=(y+=r*d)>>>16,y&=65535,g+=(y+=o*p)>>>16,y&=65535,g+=(y+=s*h)>>>16,g+=n*d+r*p+o*h+s*l,fromBits((v&=65535)<<16|(_&=65535),(g&=65535)<<16|(y&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var n,r,o;if(wasm)return this.unsigned||this.high!==-2147483648||e.low!==-1||e.high!==-1?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;o=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(n=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(r=this.sub(e.mul(n)),o=n.add(r.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=ZERO}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),l=s<=48?1:pow_dbl(2,s-48),h=fromNumber(n),p=h.mul(e);p.isNegative()||p.gt(r);)p=(h=fromNumber(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=ONE),o=o.add(h),r=r.sub(p)}return o},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),(e&=63)===0)return this;var n=this.high;return e<32?fromBits(this.low>>>e|n<<32-e,n>>>e,this.unsigned):fromBits(e===32?n:n>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,n=this.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,n>>>24,n>>>16&255,n>>>8&255,255&n]},Long.fromBytes=function(e,n,r){return r?Long.fromBytesLE(e,n):Long.fromBytesBE(e,n)},Long.fromBytesLE=function(e,n){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},Long.fromBytesBE=function(e,n){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};var Long$1=getDefaultExportFromCjs(long),indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){return hasRequiredAspromise||(hasRequiredAspromise=1,aspromise=function(e,n){for(var r=new Array(arguments.length-1),o=0,s=2,l=!0;s<arguments.length;)r[o++]=arguments[s++];return new Promise(function(h,p){r[o]=function(d){if(l)if(l=!1,d)p(d);else{for(var g=new Array(arguments.length-1),y=0;y<g.length;)g[y++]=arguments[y];h.apply(null,g)}};try{e.apply(n||null,r)}catch(d){l&&(l=!1,p(d))}})}),aspromise}var base64$1={},hasRequiredBase64,eventemitter,hasRequiredEventemitter,float$1,hasRequiredFloat,inquire_1,hasRequiredInquire;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var n=e;n.length=function(h){var p=h.length;if(!p)return 0;for(var d=0;--p%4>1&&h.charAt(p)==="=";)++d;return Math.ceil(3*h.length)/4-d};for(var r=new Array(64),o=new Array(123),s=0;s<64;)o[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(h,p,d){for(var g,y=null,v=[],_=0,w=0;p<d;){var I=h[p++];switch(w){case 0:v[_++]=r[I>>2],g=(3&I)<<4,w=1;break;case 1:v[_++]=r[g|I>>4],g=(15&I)<<2,w=2;break;case 2:v[_++]=r[g|I>>6],v[_++]=r[63&I],w=0}_>8191&&((y||(y=[])).push(String.fromCharCode.apply(String,v)),_=0)}return w&&(v[_++]=r[g],v[_++]=61,w===1&&(v[_++]=61)),y?(_&&y.push(String.fromCharCode.apply(String,v.slice(0,_))),y.join("")):String.fromCharCode.apply(String,v.slice(0,_))};var l="invalid encoding";n.decode=function(h,p,d){for(var g,y=d,v=0,_=0;_<h.length;){var w=h.charCodeAt(_++);if(w===61&&v>1)break;if((w=o[w])===void 0)throw Error(l);switch(v){case 0:g=w,v=1;break;case 1:p[d++]=g<<2|(48&w)>>4,g=w,v=2;break;case 2:p[d++]=(15&g)<<4|(60&w)>>2,g=w,v=3;break;case 3:p[d++]=(3&g)<<6|w,v=0}}if(v===1)throw Error(l);return d-y},n.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}}(base64$1)),base64$1}function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;function e(){this._listeners={}}return hasRequiredEventemitter=1,eventemitter=e,e.prototype.on=function(n,r,o){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:r,ctx:o||this}),this},e.prototype.off=function(n,r){if(n===void 0)this._listeners={};else if(r===void 0)this._listeners[n]=[];else for(var o=this._listeners[n],s=0;s<o.length;)o[s].fn===r?o.splice(s,1):++s;return this},e.prototype.emit=function(n){var r=this._listeners[n];if(r){for(var o=[],s=1;s<arguments.length;)o.push(arguments[s++]);for(s=0;s<r.length;)r[s].fn.apply(r[s++].ctx,o)}return this},eventemitter}function requireFloat(){if(hasRequiredFloat)return float$1;function e(l){return typeof Float32Array<"u"?function(){var h=new Float32Array([-0]),p=new Uint8Array(h.buffer),d=p[3]===128;function g(w,I,G){h[0]=w,I[G]=p[0],I[G+1]=p[1],I[G+2]=p[2],I[G+3]=p[3]}function y(w,I,G){h[0]=w,I[G]=p[3],I[G+1]=p[2],I[G+2]=p[1],I[G+3]=p[0]}function v(w,I){return p[0]=w[I],p[1]=w[I+1],p[2]=w[I+2],p[3]=w[I+3],h[0]}function _(w,I){return p[3]=w[I],p[2]=w[I+1],p[1]=w[I+2],p[0]=w[I+3],h[0]}l.writeFloatLE=d?g:y,l.writeFloatBE=d?y:g,l.readFloatLE=d?v:_,l.readFloatBE=d?_:v}():function(){function h(d,g,y,v){var _=g<0?1:0;if(_&&(g=-g),g===0)d(1/g>0?0:2147483648,y,v);else if(isNaN(g))d(2143289344,y,v);else if(g>34028234663852886e22)d((_<<31|2139095040)>>>0,y,v);else if(g<11754943508222875e-54)d((_<<31|Math.round(g/1401298464324817e-60))>>>0,y,v);else{var w=Math.floor(Math.log(g)/Math.LN2);d((_<<31|w+127<<23|8388607&Math.round(g*Math.pow(2,-w)*8388608))>>>0,y,v)}}function p(d,g,y){var v=d(g,y),_=2*(v>>31)+1,w=v>>>23&255,I=8388607&v;return w===255?I?NaN:_*(1/0):w===0?1401298464324817e-60*_*I:_*Math.pow(2,w-150)*(I+8388608)}l.writeFloatLE=h.bind(null,n),l.writeFloatBE=h.bind(null,r),l.readFloatLE=p.bind(null,o),l.readFloatBE=p.bind(null,s)}(),typeof Float64Array<"u"?function(){var h=new Float64Array([-0]),p=new Uint8Array(h.buffer),d=p[7]===128;function g(w,I,G){h[0]=w,I[G]=p[0],I[G+1]=p[1],I[G+2]=p[2],I[G+3]=p[3],I[G+4]=p[4],I[G+5]=p[5],I[G+6]=p[6],I[G+7]=p[7]}function y(w,I,G){h[0]=w,I[G]=p[7],I[G+1]=p[6],I[G+2]=p[5],I[G+3]=p[4],I[G+4]=p[3],I[G+5]=p[2],I[G+6]=p[1],I[G+7]=p[0]}function v(w,I){return p[0]=w[I],p[1]=w[I+1],p[2]=w[I+2],p[3]=w[I+3],p[4]=w[I+4],p[5]=w[I+5],p[6]=w[I+6],p[7]=w[I+7],h[0]}function _(w,I){return p[7]=w[I],p[6]=w[I+1],p[5]=w[I+2],p[4]=w[I+3],p[3]=w[I+4],p[2]=w[I+5],p[1]=w[I+6],p[0]=w[I+7],h[0]}l.writeDoubleLE=d?g:y,l.writeDoubleBE=d?y:g,l.readDoubleLE=d?v:_,l.readDoubleBE=d?_:v}():function(){function h(d,g,y,v,_,w){var I=v<0?1:0;if(I&&(v=-v),v===0)d(0,_,w+g),d(1/v>0?0:2147483648,_,w+y);else if(isNaN(v))d(0,_,w+g),d(2146959360,_,w+y);else if(v>17976931348623157e292)d(0,_,w+g),d((I<<31|2146435072)>>>0,_,w+y);else{var G;if(v<22250738585072014e-324)d((G=v/5e-324)>>>0,_,w+g),d((I<<31|G/4294967296)>>>0,_,w+y);else{var _t=Math.floor(Math.log(v)/Math.LN2);_t===1024&&(_t=1023),d(4503599627370496*(G=v*Math.pow(2,-_t))>>>0,_,w+g),d((I<<31|_t+1023<<20|1048576*G&1048575)>>>0,_,w+y)}}}function p(d,g,y,v,_){var w=d(v,_+g),I=d(v,_+y),G=2*(I>>31)+1,_t=I>>>20&2047,_r=4294967296*(1048575&I)+w;return _t===2047?_r?NaN:G*(1/0):_t===0?5e-324*G*_r:G*Math.pow(2,_t-1075)*(_r+4503599627370496)}l.writeDoubleLE=h.bind(null,n,0,4),l.writeDoubleBE=h.bind(null,r,4,0),l.readDoubleLE=p.bind(null,o,0,4),l.readDoubleBE=p.bind(null,s,4,0)}(),l}function n(l,h,p){h[p]=255&l,h[p+1]=l>>>8&255,h[p+2]=l>>>16&255,h[p+3]=l>>>24}function r(l,h,p){h[p]=l>>>24,h[p+1]=l>>>16&255,h[p+2]=l>>>8&255,h[p+3]=255&l}function o(l,h){return(l[h]|l[h+1]<<8|l[h+2]<<16|l[h+3]<<24)>>>0}function s(l,h){return(l[h]<<24|l[h+1]<<16|l[h+2]<<8|l[h+3])>>>0}return hasRequiredFloat=1,float$1=e(e)}function requireInquire(){if(hasRequiredInquire)return inquire_1;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}return hasRequiredInquire=1,inquire_1=inquire,inquire_1}var utf8$2={},hasRequiredUtf8,pool_1,hasRequiredPool,longbits,hasRequiredLongbits,hasRequiredMinimal;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var n=e;n.length=function(r){for(var o=0,s=0,l=0;l<r.length;++l)(s=r.charCodeAt(l))<128?o+=1:s<2048?o+=2:(64512&s)==55296&&(64512&r.charCodeAt(l+1))==56320?(++l,o+=4):o+=3;return o},n.read=function(r,o,s){if(s-o<1)return"";for(var l,h=null,p=[],d=0;o<s;)(l=r[o++])<128?p[d++]=l:l>191&&l<224?p[d++]=(31&l)<<6|63&r[o++]:l>239&&l<365?(l=((7&l)<<18|(63&r[o++])<<12|(63&r[o++])<<6|63&r[o++])-65536,p[d++]=55296+(l>>10),p[d++]=56320+(1023&l)):p[d++]=(15&l)<<12|(63&r[o++])<<6|63&r[o++],d>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,p)),d=0);return h?(d&&h.push(String.fromCharCode.apply(String,p.slice(0,d))),h.join("")):String.fromCharCode.apply(String,p.slice(0,d))},n.write=function(r,o,s){for(var l,h,p=s,d=0;d<r.length;++d)(l=r.charCodeAt(d))<128?o[s++]=l:l<2048?(o[s++]=l>>6|192,o[s++]=63&l|128):(64512&l)==55296&&(64512&(h=r.charCodeAt(d+1)))==56320?(l=65536+((1023&l)<<10)+(1023&h),++d,o[s++]=l>>18|240,o[s++]=l>>12&63|128,o[s++]=l>>6&63|128,o[s++]=63&l|128):(o[s++]=l>>12|224,o[s++]=l>>6&63|128,o[s++]=63&l|128);return s-p}}(utf8$2)),utf8$2}function requirePool(){return hasRequiredPool||(hasRequiredPool=1,pool_1=function(e,n,r){var o=r||8192,s=o>>>1,l=null,h=o;return function(p){if(p<1||p>s)return e(p);h+p>o&&(l=e(o),h=0);var d=n.call(l,h,h+=p);return 7&h&&(h=1+(7|h)),d}}),pool_1}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=n;var e=requireMinimal();function n(l,h){this.lo=l>>>0,this.hi=h>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(l){if(l===0)return r;var h=l<0;h&&(l=-l);var p=l>>>0,d=(l-p)/4294967296>>>0;return h&&(d=~d>>>0,p=~p>>>0,++p>4294967295&&(p=0,++d>4294967295&&(d=0))),new n(p,d)},n.from=function(l){if(typeof l=="number")return n.fromNumber(l);if(e.isString(l)){if(!e.Long)return n.fromNumber(parseInt(l,10));l=e.Long.fromString(l)}return l.low||l.high?new n(l.low>>>0,l.high>>>0):r},n.prototype.toNumber=function(l){if(!l&&this.hi>>>31){var h=1+~this.lo>>>0,p=~this.hi>>>0;return h||(p=p+1>>>0),-(h+4294967296*p)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(l){return e.Long?new e.Long(0|this.lo,0|this.hi,!!l):{low:0|this.lo,high:0|this.hi,unsigned:!!l}};var s=String.prototype.charCodeAt;return n.fromHash=function(l){return l===o?r:new n((s.call(l,0)|s.call(l,1)<<8|s.call(l,2)<<16|s.call(l,3)<<24)>>>0,(s.call(l,4)|s.call(l,5)<<8|s.call(l,6)<<16|s.call(l,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var l=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^l)>>>0,this.lo=(this.lo<<1^l)>>>0,this},n.prototype.zzDecode=function(){var l=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^l)>>>0,this.hi=(this.hi>>>1^l)>>>0,this},n.prototype.length=function(){var l=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return p===0?h===0?l<16384?l<128?1:2:l<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:p<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var n=e;function r(s,l,h){for(var p=Object.keys(l),d=0;d<p.length;++d)s[p[d]]!==void 0&&h||(s[p[d]]=l[p[d]]);return s}function o(s){function l(h,p){if(!(this instanceof l))return new l(h,p);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:new Error().stack||""}),p&&r(this,p)}return(l.prototype=Object.create(Error.prototype)).constructor=l,Object.defineProperty(l.prototype,"name",{get:function(){return s}}),l.prototype.toString=function(){return this.name+": "+this.message},l}n.asPromise=requireAspromise(),n.base64=requireBase64(),n.EventEmitter=requireEventemitter(),n.float=requireFloat(),n.inquire=requireInquire(),n.utf8=requireUtf8(),n.pool=requirePool(),n.LongBits=requireLongbits(),n.isNode=!!(commonjsGlobal!==void 0&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.global=n.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},n.isString=function(s){return typeof s=="string"||s instanceof String},n.isObject=function(s){return s&&typeof s=="object"},n.isset=n.isSet=function(s,l){var h=s[l];return!(h==null||!s.hasOwnProperty(l))&&(typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0)},n.Buffer=function(){try{var s=n.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch{return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(s){return typeof s=="number"?n.Buffer?n._Buffer_allocUnsafe(s):new n.Array(s):n.Buffer?n._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},n.Array=typeof Uint8Array<"u"?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(s){return s?n.LongBits.from(s).toHash():n.LongBits.zeroHash},n.longFromHash=function(s,l){var h=n.LongBits.fromHash(s);return n.Long?n.Long.fromBits(h.lo,h.hi,l):h.toNumber(!!l)},n.merge=r,n.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(s){for(var l={},h=0;h<s.length;++h)l[s[h]]=1;return function(){for(var p=Object.keys(this),d=p.length-1;d>-1;--d)if(l[p[d]]===1&&this[p[d]]!==void 0&&this[p[d]]!==null)return p[d]}},n.oneOfSetter=function(s){return function(l){for(var h=0;h<s.length;++h)s[h]!==l&&delete this[s[h]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var s=n.Buffer;s?(n._Buffer_from=s.from!==Uint8Array.from&&s.from||function(l,h){return new s(l,h)},n._Buffer_allocUnsafe=s.allocUnsafe||function(l){return new s(l)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,n,r){this.fn=e,this.len=n,this.next=void 0,this.val=r}function noop(){}function State$2(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,n,r){n[r]=255&e}function writeVarint32(e,n,r){for(;e>127;)n[r++]=127&e|128,e>>>=7;n[r]=e}function VarintOp(e,n){this.len=e,this.next=void 0,this.val=n}function writeVarint64(e,n,r){for(;e.hi;)n[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)n[r++]=127&e.lo|128,e.lo=e.lo>>>7;n[r++]=e.lo}function writeFixed32(e,n,r){n[r]=255&e,n[r+1]=e>>>8&255,n[r+2]=e>>>16&255,n[r+3]=e>>>24}Writer$1.create=create$1(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,n,r){return this.tail=this.tail.next=new Op(e,n,r),this.len+=n,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var n=LongBits$1.from(e);return this._push(writeVarint64,n.length(),n)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var n=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,n.length(),n)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var n=LongBits$1.from(e);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,n,r){n.set(e,r)}:function(e,n,r){for(var o=0;o<e.length;++o)n[r+o]=e[o]};Writer$1.prototype.bytes=function(e){var n=e.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(n=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(n)._push(writeBytes,n,e)},Writer$1.prototype.string=function(e){var n=utf8$1.length(e);return n?this.uint32(n)._push(utf8$1.write,n,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State$2(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,n=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=n,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,n=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,n,r),r+=e.len,e=e.next;return n},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,n,r){e.length<40?util$3.utf8.write(e,n,r):n.utf8Write?n.utf8Write(e,r):n.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,n,r){n.set(e,r)}:function(e,n,r){if(e.copy)e.copy(n,r,0,e.length);else for(var o=0;o<e.length;)n[r++]=e[o++]}},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,e),this},BufferWriter.prototype.string=function(e){var n=util$3.Buffer.byteLength(e);return this.uint32(n),n&&this._push(writeStringBuffer,n,e),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,n){return RangeError("index out of range: "+e.pos+" + "+(n||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits(0,0),n=0;if(!(this.len-this.pos>4)){for(;n<3;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*n)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*n)>>>0,e}for(;n<4;++n)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*n)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(n=0,this.len-this.pos>4){for(;n<5;++n)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,this.buf[this.pos++]<128)return e}else for(;n<5;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,n){return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},Reader$1.prototype.bool=function(){return this.uint32()!==0},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),n=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(n,r):n===r?new this.buf.constructor(0):this._slice.call(this.buf,n,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=7&this.uint32())!=4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var n=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[n](!1)},uint64:function(){return readLongVarint.call(this)[n](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[n](!1)},fixed64:function(){return readFixed64.call(this)[n](!0)},sfixed64:function(){return readFixed64.call(this)[n](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=requireMinimal(),exports;function Service(e,n,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!n,this.responseDelimited=!!r}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(n,r,o,s,l){if(!s)throw TypeError("request must be specified");var h=this;if(!l)return util.asPromise(e,h,n,r,o,s);if(h.rpcImpl)try{return h.rpcImpl(n,r[h.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(p,d){if(p)return h.emit("error",p,n),l(p);if(d!==null){if(!(d instanceof o))try{d=o[h.responseDelimited?"decodeDelimited":"decode"](d)}catch(g){return h.emit("error",g,n),l(g)}return h.emit("data",d,n),l(null,d)}h.end(!0)})}catch(p){return h.emit("error",p,n),void setTimeout(function(){l(p)},0)}else setTimeout(function(){l(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},exports=rpc,exports.Service=service;var roots={};(function(e){var n=e;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=requireMinimal(),n.rpc=rpc,n.roots=roots,n.configure=r,r()})(indexMinimal);var minimal=indexMinimal,protobuf=getDefaultExportFromCjs(minimal);protobuf.util.Long=Long$1,protobuf.configure(),VectorTileFeature.prototype.loadGeometry=function(e){var n=this._pbf;n.pos=this._geometry;for(var r,o=n.readVarint()+n.pos,s=1,l=0,h=0,p=0,d=[];n.pos<o;){if(l<=0){var g=n.readVarint();s=7&g,l=g>>3}if(l--,s===1||s===2)h+=n.readSVarint(),p+=n.readSVarint(),s===1&&(r&&d.push(r),r=[]),r.push([h*e,p*e]);else{if(s!==7)throw new Error("unknown command "+s);r&&r.push(r[0].slice())}}return r&&d.push(r),d};var MAX_SAFE_INTEGER=Long$1.fromNumber(Number.MAX_SAFE_INTEGER,!0),MIN_SAFE_INTEGER=Long$1.fromNumber(Number.MIN_SAFE_INTEGER,!1);function readLong(e,n,r){n.pos=e.pos;var o=r.call(n);return e.pos=n.pos,Long$1.isLong(o)?o.comp(MAX_SAFE_INTEGER)>0||o.comp(MIN_SAFE_INTEGER)<0?o.toString():o.toNumber():o}var VectorTileLayer=function(){return _createClass(function e(n,r){_classCallCheck(this,e),this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],this._protobufjsReader=protobuf.Reader.create(n.buf),n.readFields(readLayer,this,r),this.length=this._features.length},[{key:"feature",value:function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var n=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature(this._pbf,n,this.extent,this._keys,this._values)}}])}();function readLayer(e,n,r){e===15?n.version=r.readVarint():e===1?n.name=r.readString():e===5?n.extent=r.readVarint():e===2?n._features.push(r.pos):e===3?n._keys.push(r.readString()):e===4&&n._values.push(readValueMessage(r,n._protobufjsReader))}function readValueMessage(e,n){for(var r=null,o=e.readVarint()+e.pos;e.pos<o;){var s=e.readVarint()>>3;r=s===1?e.readString():s===2?e.readFloat():s===3?e.readDouble():s===4?readLong(e,n,n.int64):s===5?readLong(e,n,n.uint64):s===6?readLong(e,n,n.sint64):s===7?e.readBoolean():null}return r}var VectorTile=_createClass(function e(n,r){_classCallCheck(this,e),this.layers=n.readFields(readTile,{},r)});function readTile(e,n,r){if(e===3){var o=new VectorTileLayer(r,r.readVarint()+r.pos);o.length&&(n[o.name]=o)}}function getLayersFromMVT(e){var n={};for(var r in e.layers){for(var o=e.layers[r],s=[],l=Geo$1.tile_scale/o.extent,h=0,p=o.length;h<p;h++){var d,g=o.feature(h),y=VectorTileFeature.types[g.type];d=g.loadGeometry(l);var v=null;switch(y){case"Point":v=decodePoint({coordinates:d});break;case"LineString":v=d.length===1?{type:y,coordinates:d[0]}:{type:"MultiLineString",coordinates:d};break;case"Polygon":v=decodeMultiPolygon({coordinates:d})}v&&v.coordinates&&s.push({type:"Feature",geometry:v,properties:g.properties})}n[r]={type:"FeatureCollection",features:s}}return n}var GeomType={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function parseGeoJSONVectorTile(e){var n=[],r=e&&e.features;if(r)for(var o=0,s=r.length;o<s;o++){var l=r[o],h=l.type,p=void 0;switch(h){case GeomType.POINT:p={type:"MultiPoint",coordinates:l.geometry.map(function(d){return d.slice()})};break;case GeomType.LINESTRING:case GeomType.POLYGON:if(p={type:"MultiLineString",coordinates:l.geometry.map(function(d){return d.map(function(g){return g.slice()})})},h===GeomType.POLYGON&&(p=decodeMultiPolygon(p))==null)continue;break;default:continue}n.push({id:l.id,type:"Feature",geometry:p,properties:l.tags})}return{type:"FeatureCollection",features:n}}function decodeMultiPolygon(e){for(var n,r=[],o=[],s=0,l=e.coordinates.length;s<l;s++){var h=e.coordinates[s],p=Geo$1.ringWinding(h);p!=null&&(p===(n=n||p)&&o.length&&(r.push(o),o=[]),o.push(h))}return o.length>0&&r.push(o),r.length===1?(e.type="Polygon",e.coordinates=r[0]):r.length>1?(e.type="MultiPolygon",e.coordinates=r):e=null,e}function decodePoint(e){var n=e.coordinates.length;if(n>1){e.type="MultiPoint";for(var r=[],o=0;o<n;o++)r.push(e.coordinates[o][0]);e.coordinates=r}else e.type="Point",e.coordinates=e.coordinates[0][0];return e}var EMPTY_FEATURE_COLLECTION$1={type:"FeatureCollection",features:[]},MVTSource=function(e){function n(r,o){return _classCallCheck(this,n),r.tiled=!0,_callSuper(this,n,[r,o])}return _inherits(n,e),_createClass(n,[{key:"fetchTile",value:function(r,o,s){return this.provider?this.provider.requestTileAsPromise(r,o,s).then(function(l){return l.data}):Promise.resolve()}},{key:"_load",value:function(r){var o=this,s=Geo$1.wrapTile(r.coords,{x:!0,y:!0}),l=s.x,h=s.y,p=s.z;return WorkerBroker.postMessage(this.target_name+".fetchTile",l,h,p).then(function(d){if(d instanceof ArrayBuffer){var g=new Pbf$1(new Uint8Array(d));r.source_data.layers=getLayersFromMVT(new VectorTile(g))}else d?r.source_data.error=d:r.source_data.layers={_default:EMPTY_FEATURE_COLLECTION$1};return o._postProcessTile(r),r})}},{key:"onReady",value:function(){this.dispatchUpdate()}}])}(MapsJsSource);DataSource.register(MVTSource,"MVT"),DataSource.register(MVTSource,"OMV");var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(e){return(e=Math.round(e))<0?0:e>255?255:e}function clamp_css_float(e){return e<0?0:e>1?1:e}function parse_css_int(e){return e[e.length-1]==="%"?clamp_css_byte(parseFloat(e)/100*255):clamp_css_byte(parseInt(e))}function parse_css_float(e){return e[e.length-1]==="%"?clamp_css_float(parseFloat(e)/100):clamp_css_float(parseFloat(e))}function css_hue_to_rgb(e,n,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(n-e)*r*6:2*r<1?n:3*r<2?e+(n-e)*(.6666666666666666-r)*6:e}function parseCSSColor(e){var n,r=e.replace(/ /g,"").toLowerCase();if(r in kCSSColorTable)return kCSSColorTable[r].slice();if(r[0]==="#")return r.length===4?(n=parseInt(r.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:r.length===7&&(n=parseInt(r.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===r.length){var l=r.substr(0,o),h=r.substr(o+1,s-(o+1)).split(","),p=1;switch(l){case"rgba":if(h.length!==4)return null;p=parse_css_float(h.pop());case"rgb":return h.length!==3?null:[parse_css_int(h[0]),parse_css_int(h[1]),parse_css_int(h[2]),p];case"hsla":if(h.length!==4)return null;p=parse_css_float(h.pop());case"hsl":if(h.length!==3)return null;var d=(parseFloat(h[0])%360+360)%360/360,g=parse_css_float(h[1]),y=parse_css_float(h[2]),v=y<=.5?y*(g+1):y+g-y*g,_=2*y-v;return[clamp_css_byte(255*css_hue_to_rgb(_,v,d+.3333333333333333)),clamp_css_byte(255*css_hue_to_rgb(_,v,d)),clamp_css_byte(255*css_hue_to_rgb(_,v,d-.3333333333333333)),p];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch(e){}var StyleParser={},clampPositive=function(e){return Math.max(e,0)},noNaN=function(e){return isNaN(e)?0:e},parseNumber=function(e){return Array.isArray(e)?e.map(parseFloat).map(noNaN):noNaN(parseFloat(e))},parsePositiveNumber=function(e){return Array.isArray(e)?e.map(parseNumber).map(clampPositive):clampPositive(parseNumber(e))};Object.assign(StyleParser,{clampPositive,noNaN,parseNumber,parsePositiveNumber}),StyleParser.wrapFunction=function(e){return`
        var feature = context.feature.properties;
        var global = context.global;
        var $zoom = context.zoom;
        var $layer = context.layer;
        var $source = context.source;
        var sources = context.sources;
        var $geometry = context.geometry;
        var $meters_per_pixel = context.meters_per_pixel;

        var val = (function(){ `.concat(e,` }());

        if (typeof val === 'number' && isNaN(val)) {
            val = null; // convert NaNs to nulls
        }

        return val;
    `)},StyleParser.zeroPair=Object.freeze([0,0]),StyleParser.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},StyleParser.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},StyleParser.getFeatureParseContext=function(e,n,r,o){return{feature:e,tile:n,global:r,sources:o,zoom:n.style_zoom,geometry:Geo$1.geometryType(e.geometry.type),meters_per_pixel:n.meters_per_pixel,meters_per_pixel_sq:n.meters_per_pixel_sq,units_per_meter_overzoom:n.units_per_meter_overzoom}};var CACHE_TYPE={STATIC:0,DYNAMIC:1,ZOOM:2};StyleParser.CACHE_TYPE=CACHE_TYPE,StyleParser.createPropertyCache=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e!=null){if(e.value)return{value:e.value,zoom:e.zoom?{}:null,type:e.type};var r={value:e,type:CACHE_TYPE.STATIC};return Array.isArray(r.value)&&Array.isArray(r.value[0])?(r.zoom={},r.type=CACHE_TYPE.ZOOM):typeof r.value=="function"&&(r.type=CACHE_TYPE.DYNAMIC),typeof n=="function"&&(r.zoom?r.value=r.value.map(function(o,s){return[o[0],n(o[1],s)]}):typeof r.value!="function"&&(r.value=n(r.value,0))),r}},StyleParser.createColorPropertyCache=function(e){return StyleParser.createPropertyCache(e,function(n){return n==="Style.color.pseudoRandomColor"?Utils$1.stringToFunction(StyleParser.wrapFunction(StyleParser.macros["Style.color.pseudoRandomColor"])):n==="Style.color.randomColor"?StyleParser.macros["Style.color.randomColor"]:n})};var isPercent=function(e){return typeof e=="string"&&e[e.length-1]==="%"},isRatio=function(e){return e==="auto"},isComputed=function(e){return isPercent(e)||isRatio(e)},dualRatioError="'size' can specify either width or height as derived from aspect ratio, but not both";StyleParser.createPointSizePropertyCache=function(e){var n=null,r=null;if(isPercent(e))n=[!0];else if(Array.isArray(e)){if(Array.isArray(e[0])){if(e.some(function(o){return Array.isArray(o[1])?o[1].some(function(s){return isComputed(s)}):isPercent(o[1])})&&(n=e.map(function(o){return Array.isArray(o[1])?o[1].map(function(s){return isPercent(s)}):isPercent(o[1])}),(r=e.map(function(o){return Array.isArray(o[1])&&o[1].map(function(s){return isRatio(s)})})).some(function(o){return Array.isArray(o)&&o.every(function(s){return s})})))throw dualRatioError}else if(e.some(isComputed)&&(n=[e.map(isPercent)],(r=[e.map(isRatio)])[0].every(function(o){return o})))throw dualRatioError}return n?((e={value:e}).has_pct=n,e.has_ratio=r,e.sprites={}):e=StyleParser.createPropertyCache(e,parsePositiveNumber),e},StyleParser.evalCachedPointSizeProperty=function(e,n,r){return e.has_pct||e.has_ratio?n?(e.sprites[n.sprite]||(e.sprites[n.sprite]=StyleParser.createPropertyCache(e.value,function(o,s){return Array.isArray(o)?(o=o.map(function(l,h){return e.has_ratio[s][h]?l:parsePositiveNumber(l)}).map(function(l,h){return e.has_pct[s][h]?n.css_size[h]*l/100:l}),e.has_ratio[s][0]?o[0]=o[1]*n.aspect:e.has_ratio[s][1]&&(o[1]=o[0]/n.aspect)):(o=parsePositiveNumber(o),o=e.has_pct[s]?n.css_size.map(function(l){return l*o/100}):[o,o]),o})),StyleParser.evalCachedProperty(e.sprites[n.sprite],r)):void 0:StyleParser.evalCachedProperty(e,r)},StyleParser.evalCachedProperty=function(e,n){if(e!=null)return e.dynamic?e.dynamic(n):e.static?e.static:e.zoom&&e.zoom[n.zoom]?e.zoom[n.zoom]:typeof e.value=="function"?(e.dynamic=e.value,e.dynamic(n)):Array.isArray(e.value)&&Array.isArray(e.value[0])?(e.zoom=e.zoom||{},e.zoom[n.zoom]=Utils$1.interpolate(n.zoom,e.value),e.zoom[n.zoom]):(e.static=e.value,e.static)},StyleParser.convertUnits=function(e,n){if(e.val!=null)return e.units==="px"?e.val*Geo$1.metersPerPixel(n.zoom):e.val;if(typeof e=="string")e.trim().slice(-2)==="px"?(e=parseNumber(e),e*=Geo$1.metersPerPixel(n.zoom)):e=parseNumber(e);else if(Array.isArray(e))return Array.isArray(e[0])?e.map(function(r){return[r[0],StyleParser.convertUnits(r[1],n)]}):e.map(function(r){return StyleParser.convertUnits(r,n)});return e},StyleParser.parseUnits=function(e){var n={val:parseNumber(e)};return n.val!==0&&typeof e=="string"&&e.trim().slice(-2)==="px"&&(n.units="px"),n},StyleParser.evalCachedDistanceProperty=function(e,n){return e.dynamic?e.dynamic(n):e.zoom&&e.zoom[n.zoom]?e.zoom[n.zoom]:typeof e.value=="function"?(e.dynamic=e.value,e.dynamic(n)):e.zoom?(e.zoom[n.zoom]=Utils$1.interpolate(n.zoom,e.value,function(r){return StyleParser.convertUnits(r,n)}),e.zoom[n.zoom]):StyleParser.convertUnits(e.value,n)},StyleParser.string_colors={},StyleParser.colorForString=function(e){if(StyleParser.string_colors[e])return StyleParser.string_colors[e];var n=null;return e!=="none"&&((n=csscolorparser.parseCSSColor(e))&&n.length===4?(n[0]/=255,n[1]/=255,n[2]/=255):n=StyleParser.defaults.color),StyleParser.string_colors[e]=n,n},StyleParser.evalCachedColorProperty=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.dynamic){var r=e.dynamic(n);return typeof r=="string"&&(r=StyleParser.colorForString(r)),r&&r[3]==null&&(r[3]=1),r}if(e.static)return e.static;if(e.zoom&&e.zoom[n.zoom])return e.zoom[n.zoom];if(typeof e.value=="function"){e.dynamic=e.value;var o=e.dynamic(n);return typeof o=="string"&&(o=StyleParser.colorForString(o)),o&&o[3]==null&&(o[3]=1),o}if(typeof e.value=="string")return e.static=StyleParser.colorForString(e.value),e.static;if(e.zoom){if(!e.zoom_preprocessed){for(var s=0;s<e.value.length;s++){var l=e.value[s];l&&typeof l[1]=="string"&&(l[1]=StyleParser.colorForString(l[1]))}e.zoom_preprocessed=!0}return e.zoom[n.zoom]=Utils$1.interpolate(n.zoom,e.value),e.zoom[n.zoom][3]=e.zoom[n.zoom][3]||1,e.zoom[n.zoom]}return e.static=e.value.map(function(h){return h}),e.static&&e.static[3]==null&&(e.static[3]=1),e.static},StyleParser.parseColor=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="function"&&(e=e(n)),typeof e=="string")e=StyleParser.colorForString(e);else if(Array.isArray(e)&&Array.isArray(e[0])){for(var r=0;r<e.length;r++){var o=e[r];typeof o[1]=="string"&&(o[1]=StyleParser.colorForString(o[1]))}n.zoom&&(e=Utils$1.interpolate(n.zoom,e))}return Array.isArray(e)?(e=e.map(function(s){return s}))[3]==null&&(e[3]=1):e=[0,0,0,1],e},StyleParser.calculateOrder=function(e,n){return typeof e=="function"?e=e(n):typeof e=="string"&&(e=n.feature.properties[e]?n.feature.properties[e]:parsePositiveNumber(e)),e},StyleParser.evalProperty=function(e,n){return typeof e=="function"?e(n):e};var RepeatGroup=function(){function e(n,r){_classCallCheck(this,e),this.key=n,this.repeat_dist=r,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _createClass(e,[{key:"check",value:function(n){for(var r=n.position,o=0;o<this.positions.length;o++){var s=this.positions[o],l=r[0]-s[0],h=r[1]-s[1],p=l*l+h*h;if(p<this.repeat_dist_sq)return{dist_sq:p,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(n){n&&n.position&&this.positions.push(n.position)}}],[{key:"clear",value:function(n){this.groups[n]={}}},{key:"check",value:function(n,r,o){if(r.repeat_distance&&r.repeat_group&&this.groups[o][r.repeat_group])return this.groups[o][r.repeat_group].check(n)}},{key:"add",value:function(n,r,o){r.repeat_distance&&r.repeat_group&&(this.groups[o][r.repeat_group]==null&&(this.groups[o][r.repeat_group]=new e(r.repeat_group,r.repeat_distance*r.repeat_scale)),this.groups[o][r.repeat_group].add(n))}}])}();RepeatGroup.groups={};var GridIndex=function(){return _createClass(function e(n,r,o){_classCallCheck(this,e);var s=this.boxCells=[],l=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(r/o);for(var h=0;h<this.xCellCount*this.yCellCount;h++)s.push([]),l.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=r,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0},[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,n,r,o,s){this._forEachCell(n,r,o,s,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(s)}},{key:"insertCircle",value:function(e,n,r,o){this._forEachCell(n-o,r-o,n+o,r+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(n),this.circles.push(r),this.circles.push(o)}},{key:"insertCircleList",value:function(e,n){for(var r=0;r<n.length-2;r+=3)this.insertCircle("".concat(e,"/").concat(r),n[r],n[r+1],n[r+2])}},{key:"_insertBoxCell",value:function(e,n,r,o,s,l){this.boxCells[s].push(l)}},{key:"_insertCircleCell",value:function(e,n,r,o,s,l){this.circleCells[s].push(l)}},{key:"_query",value:function(e,n,r,o,s,l){if(r<0||e>this.width||o<0||n>this.height)return!s&&[];var h=[];if(e<=0&&n<=0&&this.width<=r&&this.height<=o){if(s)return!0;for(var p=0;p<this.boxKeys.length;p++)h.push({key:this.boxKeys[p],x1:this.bboxes[4*p],y1:this.bboxes[4*p+1],x2:this.bboxes[4*p+2],y2:this.bboxes[4*p+3]});for(var d=0;d<this.circleKeys.length;d++){var g=this.circles[3*d],y=this.circles[3*d+1],v=this.circles[3*d+2];h.push({key:this.circleKeys[d],x1:g-v,y1:y-v,x2:g+v,y2:y+v})}return l?h.filter(l):h}var _={hitTest:s,seenUids:{box:{},circle:{}}};return this._forEachCell(e,n,r,o,this._queryCell,h,_,l),s?h.length>0:h}},{key:"_queryCircle",value:function(e,n,r,o,s){var l=e-r,h=e+r,p=n-r,d=n+r;if(h<0||l>this.width||d<0||p>this.height)return!o&&[];var g=[],y={hitTest:o,circle:{x:e,y:n,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(l,p,h,d,this._queryCellCircle,g,y,s),o?g.length>0:g}},{key:"query",value:function(e,n,r,o,s){return this._query(e,n,r,o,!1,s)}},{key:"hitTest",value:function(e,n,r,o,s){return this._query(e,n,r,o,!0,s)}},{key:"hitTestCircle",value:function(e,n,r,o){return this._queryCircle(e,n,r,!0,o)}},{key:"hitTestCircleList",value:function(e,n){for(var r=0;r<e.length-2;r+=3)if(this.hitTestCircle(e[r],e[r+1],e[r+2],n))return!0;return!1}},{key:"_queryCell",value:function(e,n,r,o,s,l,h,p){var d=h.seenUids,g=this.boxCells[s];if(g!==null){var y,v=this.bboxes,_=_createForOfIteratorHelper(g);try{for(_.s();!(y=_.n()).done;){var w=y.value;if(!d.box[w]){d.box[w]=!0;var I=4*w;if(e<=v[I+2]&&n<=v[I+3]&&r>=v[I+0]&&o>=v[I+1]&&(!p||p(this.boxKeys[w]))){if(h.hitTest)return l.push(!0),!0;l.push({key:this.boxKeys[w],x1:v[I],y1:v[I+1],x2:v[I+2],y2:v[I+3]})}}}}catch(jc){_.e(jc)}finally{_.f()}}var G=this.circleCells[s];if(G!==null){var _t,_r=this.circles,_o=_createForOfIteratorHelper(G);try{for(_o.s();!(_t=_o.n()).done;){var Ca=_t.value;if(!d.circle[Ca]){d.circle[Ca]=!0;var _a=3*Ca;if(this._circleAndRectCollide(_r[_a],_r[_a+1],_r[_a+2],e,n,r,o)&&(!p||p(this.circleKeys[Ca]))){if(h.hitTest)return l.push(!0),!0;var _l=_r[_a],Qa=_r[_a+1],Kc=_r[_a+2];l.push({key:this.circleKeys[Ca],x1:_l-Kc,y1:Qa-Kc,x2:_l+Kc,y2:Qa+Kc})}}}}catch(jc){_o.e(jc)}finally{_o.f()}}}},{key:"_queryCellCircle",value:function(e,n,r,o,s,l,h,p){var d=h.circle,g=h.seenUids,y=this.boxCells[s];if(y!==null){var v,_=this.bboxes,w=_createForOfIteratorHelper(y);try{for(w.s();!(v=w.n()).done;){var I=v.value;if(!g.box[I]){g.box[I]=!0;var G=4*I;if(this._circleAndRectCollide(d.x,d.y,d.radius,_[G+0],_[G+1],_[G+2],_[G+3])&&(!p||p(this.boxKeys[I])))return l.push(!0),!0}}}catch(Qa){w.e(Qa)}finally{w.f()}}var _t=this.circleCells[s];if(_t!==null){var _r,_o=this.circles,Ca=_createForOfIteratorHelper(_t);try{for(Ca.s();!(_r=Ca.n()).done;){var _a=_r.value;if(!g.circle[_a]){g.circle[_a]=!0;var _l=3*_a;if(this._circlesCollide(_o[_l],_o[_l+1],_o[_l+2],d.x,d.y,d.radius)&&(!p||p(this.circleKeys[_a])))return l.push(!0),!0}}}catch(Qa){Ca.e(Qa)}finally{Ca.f()}}}},{key:"_forEachCell",value:function(e,n,r,o,s,l,h,p){for(var d=this._convertToXCellCoord(e),g=this._convertToYCellCoord(n),y=this._convertToXCellCoord(r),v=this._convertToYCellCoord(o),_=d;_<=y;_++)for(var w=g;w<=v;w++){var I=this.xCellCount*w+_;if(s.call(this,e,n,r,o,I,l,h,p))return}}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,n,r,o,s,l){var h=o-e,p=s-n,d=r+l;return d*d>h*h+p*p}},{key:"_circleAndRectCollide",value:function(e,n,r,o,s,l,h){var p=(l-o)/2,d=Math.abs(e-(o+p));if(d>p+r)return!1;var g=(h-s)/2,y=Math.abs(n-(s+g));if(y>g+r)return!1;if(d<=p||y<=g)return!0;var v=d-p,_=y-g;return v*v+_*_<=r*r}}])}(),CollisionUtils={toDiscardLabel:function(e,n,r,o){var s;if(o&&(s=function(Kc){return Kc!==o.id}),!n){if(e.type==="point"&&!e.angle){var l=e.getAABB(),h=l.left,p=l.top,d=l.right,g=l.bottom;if(r.hitTest(h,-p,d,-g,s)){if(Array.isArray(e.layout.anchor))for(var y=1;y<e.layout.anchor.length;y++){e.setAnchor(e.layout.anchor[y]);var v=e.getAABB(),_=v.left,w=v.top,I=v.right,G=v.bottom;if(!r.hitTest(_,-w,I,-G,s))return!1}return!0}return!1}var _t=e.getBoundingCircles();return r.hitTestCircleList(_t,s)}if(n){if(e.type==="point"&&!e.isFlat()){var _r=e.getScreenSpaceBoundingBox(),_o=_r.left,Ca=_r.top,_a=_r.right,_l=_r.bottom;return r.hitTest(_o,Ca,_a,_l,s)}var Qa=e.getBoundingCircles();return r.hitTestCircleList(Qa,s)}return!1},addLabel:function(e,n,r){var o=e.id;if(e.placed=!0,!n)if(e.type!=="point"||e.angle){var s=e.getBoundingCircles();r.insertCircleList(o,s)}else{var l=e.getAABB(),h=l.left,p=l.top,d=l.right,g=l.bottom;r.insert(o,h,-p,d,-g)}if(n)if(e.type!=="point"||e.isFlat()){var y=e.getBoundingCircles();r.insertCircleList(o,y)}else{var v=e.getScreenSpaceBoundingBox(),_=v.left,w=v.top,I=v.right,G=v.bottom;r.insert(o,_,w,I,G)}}},Collision={tiles:{},startTile:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.apply_repeat_groups,o=r===void 0||r,s=n.return_hidden,l=s!==void 0&&s,h=n.grid_index,p=h===void 0?null:h,d=this.tiles[e]={grid_index:p||new GridIndex(Geo$1.tile_scale,Geo$1.tile_scale,240),objects:{},labels:{},styles:{},repeat:o,return_hidden:l};d.complete==null&&(d.complete=new Promise(function(g,y){d.resolve=g,d.reject=y}))},resetTile:function(e){delete this.tiles[e]},abortTile:function(e){this.tiles[e]&&this.tiles[e].resolve&&this.tiles[e].resolve([]),this.resetTile(e)},addStyle:function(e,n){this.tiles[n].styles[e]=!0},collide:function(e,n,r){var o=this.tiles[r];if(!o)return Promise.resolve([]);for(var s=o.objects,l=0;l<e.length;l++){var h=e[l],p=h.label.layout.priority;s[p]=s[p]||{},s[p][n]=s[p][n]||[],s[p][n].push(h)}return delete o.styles[n],Object.keys(o.styles).length===0&&this.endTile(r),o.complete.then(function(){return o.resolve=null,o.labels[n]||[]})},endTile:function(e){var n=this.tiles[e],r=n.labels;n.repeat&&RepeatGroup.clear(e);for(var o=Object.keys(n.objects).sort(function(y,v){return y-v}),s=0;s<o.length;s++){var l=n.objects[o[s]];if(l)for(var h in l){var p=l[h];r[h]=r[h]||[];for(var d=0;d<p.length;d++){var g=p[d];this.canBePlaced(g,e,g.linked,n)?g.linked?this.canBePlaced(g.linked,e,g,n)?(g.show=!0,(g.label.breach||g.linked.label.breach)&&(g.label.breach=!0,g.linked.label.breach=!0),r[h].push(g),this.place(g,e,n),this.place(g.linked,e,n)):n.return_hidden&&(g.show=!1,r[h].push(g)):(g.show=!0,r[h].push(g),this.place(g,e,n)):n.return_hidden&&(g.show=!1,r[h].push(g))}}}delete this.tiles[e],n.resolve()},canBePlaced:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).repeat,s=o===void 0||o,l=e.label,h=e.label.layout;if(l.placed!==null)return l.placed;var p=this.tiles[n].grid_index;if(h.collide&&CollisionUtils.toDiscardLabel(l,n==="main",p,r&&r.label))h.collide&&(l.placed=!1);else{if(!(s&&RepeatGroup.check(l,h,n)))return!0;l.placed=!1}return l.placed},place:function(e,n,r){var o=e.label,s=r.repeat,l=s===void 0||s;o.placed===null&&(l&&RepeatGroup.add(o,o.layout,n),CollisionUtils.addLabel(o,n==="main",this.tiles[n].grid_index))}},Task={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:debounce(function(){Task.ignore_user_moving_view=!0},0,500),add:function(e){e.id=Task.id++,e.max_time=e.max_time||Task.max_time,e.pause_factor=e.pause_factor||1;var n=new Promise(function(r,o){e.resolve=r,e.reject=o});return e.promise=n,e.total_elapsed=0,e.stats={calls:0},this.queue.push(e),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Task.max_time&&this.process(e),e.promise},remove:function(e){var n=this.queue.indexOf(e);n>-1&&this.queue.splice(n,1)},process:function(e){if(!this.state.user_moving_view||e.user_moving_view!==!1||this.ignore_user_moving_view)return e.pause?(e.pause--,!0):(e.stats.calls++,e.start_time=performance.now(),e.run(e));Task._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var e=0;e<this.queue.length;e++){var n=this.queue[e];if(this.process(n)!==!0&&(n.pause||(n.pause=n.elapsed>n.max_time?n.pause_factor:0),n.total_elapsed+=n.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Task.max_time){this.start_time=null;break}}},finish:function(e,n){return e.elapsed=performance.now()-e.start_time,e.total_elapsed+=e.elapsed,this.remove(e),e.resolve(n),e.promise},cancel:function(e){var n;e.cancel instanceof Function&&(n=e.cancel(e)),e.resolve(n||{})},shouldContinue:function(e){return e.elapsed=performance.now()-e.start_time,this.elapsed=performance.now()-this.start_time,e.elapsed<e.max_time&&this.elapsed<Task.max_time},removeForTile:function(e){for(var n=this.queue.length-1;n>=0;n--)this.queue[n].tile_id===e&&(this.cancel(this.queue[n]),this.queue.splice(n,1))},setState:function(e){this.state=e},hasPendingTasks:function(){return!!this.queue.length}};function sliceOptions(e){return{coords:e.coords,uid:e.uid,filtering:e.filtering,sprites:e.sprites,url:e.url,element:e.element,data:e.data,width:e.width,height:e.height,density:e.density,repeat:e.repeat,TEXTURE_WRAP_S:e.TEXTURE_WRAP_S,TEXTURE_WRAP_T:e.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:e.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:e.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Texture=function(){return _createClass(function e(n,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};_classCallCheck(this,e),s=sliceOptions(s),this.gl=n,this.texture=n.createTexture(),this.texture&&(this.valid=!0),this.manager=o,this.bind(),this.name=r,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=s.filtering,this.density=s.density||1,this.sprites=s.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),this.manager.textures[this.name]=this,this.manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:r},s)),this.load(s),log("trace","creating Texture ".concat(this.name))},[{key:"destroy",value:function(){var e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).force;this.retain_count>0&&!e?log("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,log("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&log("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.valid&&(this.manager.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.manager.activeUnit=e,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(e){var n=this;return e?(this.loading=null,typeof e.url=="string"?(this.config_type="url",this.setUrl(e.url,e)):e.element?(this.config_type="element",this.setElement(e.element,e)):e.data&&e.width&&e.height&&(this.config_type="data",this.setData(e.width,e.height,e.data,e)),this.loading=this.loading&&this.loading.then(function(){return n.calculateSprites(),n})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.valid)return this.url=e,this.loading=new Promise(function(o,s){var l=new Image;l.onload=function(){try{n.setElement(l,r)}catch(h){n.loaded=!1,log("warn","Texture '".concat(n.name,"': failed to load url: '").concat(n.url,"'"),h,r),n.manager.trigger("warning",{message:"Failed to load texture from ".concat(n.url),error:h,texture:r})}n.loaded=!0,o(n)},l.onerror=function(h){n.loaded=!1,log("warn","Texture '".concat(n.name,"': failed to load url: '").concat(n.url,"'"),h,r),n.manager.trigger("warning",{message:"Failed to load texture from ".concat(n.url),error:h,texture:r}),o(n)},Utils$1.isSafari()&&n.url.slice(0,5)==="data:"||(l.crossOrigin="anonymous"),l.src=n.url}),this.loading}},{key:"setData",value:function(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.width=e,this.height=n,Array.isArray(r)&&(r=new Uint8Array(r)),this.update(r,o),this.setFiltering(o),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(e,n){var r=e;if(typeof e=="string"&&(e=document.querySelector(e)),e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement)this.update(e,n),this.setFiltering(n);else{this.loaded=!1;var o="the 'element' parameter (`element: ".concat(JSON.stringify(r),"`) must be a CSS ");o+="selector string, or a <canvas>, <image> or <video> object",log("warn","Texture '".concat(this.name,"': ").concat(o),n),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(o),texture:n})}return this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.valid&&(this.bind(),e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof HTMLImageElement&&e.complete?(this.width=e.width,this.height=e.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,n.UNPACK_FLIP_Y_WEBGL!==!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)):(this._byte_length=e?e.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.valid){e.filtering=e.filtering||"linear";var n=this.gl;this.bind(),Utils$1.isPowerOf2(this.width)&&Utils$1.isPowerOf2(this.height)?(this.power_of_2=!0,n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e.TEXTURE_WRAP_S||e.repeat&&n.REPEAT||n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e.TEXTURE_WRAP_T||e.repeat&&n.REPEAT||n.CLAMP_TO_EDGE),e.filtering==="mipmap"?(this.filtering="mipmap",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D)):e.filtering==="linear"?(this.filtering="linear",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):e.filtering==="nearest"&&(this.filtering="nearest",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST))):(this.power_of_2=!1,n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),e.filtering==="nearest"?(this.filtering="nearest",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)):(this.filtering="linear",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR))),this.manager.trigger("update",this)}}},{key:"calculateSprites",value:function(){if(this.sprites)for(var e in this.sprites){var n=this.sprites[e];this.texcoords[e]=this.manager.getTexcoordsForSprite([n[0],n[1]],[n[2],n[3]],[this.width,this.height]),this.sizes[e]=[n[2],n[3]],this.css_sizes[e]=[n[2]/this.density,n[3]/this.density],this.aspects[e]=n[2]/n[3]}}}])}();function subscribeMixin(e){var n=[];return Object.assign(e,{subscribe:function(r){n.indexOf(r)===-1&&n.push(r)},unsubscribe:function(r){var o=n.indexOf(r);o>-1&&n.splice(o,1)},unsubscribeAll:function(){n=[]},trigger:function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];n.forEach(function(h){if(typeof h[r]=="function")try{h[r].apply(h,s)}catch(p){log("warn","Caught exception in listener for event '".concat(r,"':"),p)}})},hasSubscribersFor:function(r){var o=!1;return n.forEach(function(s){typeof s[r]=="function"&&(o=!0)}),o}})}var TextureManager=function(){function e(n){_classCallCheck(this,e),this.default=e.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=n,WorkerBroker.addTarget("Texture"+this.scene_id,this),subscribeMixin(this)}return _createClass(e,[{key:"create",value:function(n,r,o){for(var s=e.matchers_,l=0;l<s.length;l++){var h=s[l][0],p=s[l][1];if(p&&p(o))return new h(n,r,this,o)}return new Texture(n,r,this,o)}},{key:"retain",value:function(n){this.textures[n]&&this.textures[n].retain()}},{key:"release",value:function(n){this.textures[n]&&this.textures[n].release()}},{key:"getRetainCount",value:function(n){if(this.textures[n])return this.textures[n].retain_count}},{key:"getByteLength",value:function(n){if(this.textures[n])return this.textures[n].getByteLength()}},{key:"destroy",value:function(n){var r=this;Object.keys(this.textures).forEach(function(o){var s=r.textures[o];o!==r.default&&s.gl===n&&s.destroy({force:!0})})}},{key:"getSpriteInfo",value:function(n,r){var o=this.textures[n];return o&&{size:o.sizes[r],css_size:o.css_sizes[r],aspect:o.aspects[r],texcoords:o.texcoords[r]}}},{key:"getTexcoordsForSprite",value:function(n,r,o){var s=o[1]-n[1]-r[1];return[n[0]/o[0],s/o[1],(r[0]+n[0])/o[0],(r[1]+s)/o[1]]}},{key:"createFromObject",value:function(n,r){var o=[];if(r)for(var s in r){var l=r[s];if(this.changed(s,l)){var h=this.create(n,s,l);o.push(h.loading)}}return Promise.all(o)}},{key:"createDefault",value:function(n){return this.create(n,this.default)}},{key:"changed",value:function(n,r){var o=this.textures[n];if(o){if(o.config_type==="element"||r.element!=null)return!0;if(r=sliceOptions(r),this.texture_configs[n]===JSON.stringify(Object.assign({name:n},r)))return!1}return!0}},{key:"getInfo",value:function(n){var r=this;if(n||(n=Object.keys(this.textures)),Array.isArray(n))return Promise.all(n.map(function(s){return r.getInfo(s)}));var o=this.textures[n];return o?(o.loading||Promise.resolve(o)).then(function(){return{name:o.name,width:o.width,height:o.height,density:o.density,sprites:o.sprites,texcoords:o.texcoords,sizes:o.sizes,css_sizes:o.css_sizes,aspects:o.aspects,filtering:o.filtering,power_of_2:o.power_of_2,valid:o.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(n){var r=this;return Thread.is_main?Promise.all(n.map(function(o){var s=r.textures[o];return s&&s.loading||Promise.resolve()})).then(function(){return r.textures}):WorkerBroker.postMessage("Texture"+this.scene_id+".getInfo",n).then(function(o){return o.forEach(function(s){r.textures[s.name]=s}),r.textures})}},{key:"getMaxTextureSize",value:function(n){return n.getParameter(n.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(n,r){var o=e.matchers_;if(!(n instanceof Function&&r instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(n),o.push([n,r])}},{key:"deRegister",value:function(n){for(var r=e.matchers_,o=0;o<r.length;o++)r[o][0]===n&&r.splice(o,1)}}])}();TextureManager.DEFAULT_TEXTURE_NAME="__default",TextureManager.matchers_=[];var Registry={};function getTextureManager(e){return Registry[e]||(Registry[e]=new TextureManager(e)),Registry[e]}var transformMat4_1$1=transformMat4$1;function transformMat4$1(e,n,r){var o=n[0],s=n[1],l=n[2],h=r[3]*o+r[7]*s+r[11]*l+r[15];return h=h||1,e[0]=(r[0]*o+r[4]*s+r[8]*l+r[12])/h,e[1]=(r[1]*o+r[5]*s+r[9]*l+r[13])/h,e[2]=(r[2]*o+r[6]*s+r[10]*l+r[14])/h,e}var vec3_transformMat4=getDefaultExportFromCjs(transformMat4_1$1),normalFromMat4_1=normalFromMat4;function normalFromMat4(e,n){var r=n[0],o=n[1],s=n[2],l=n[3],h=n[4],p=n[5],d=n[6],g=n[7],y=n[8],v=n[9],_=n[10],w=n[11],I=n[12],G=n[13],_t=n[14],_r=n[15],_o=r*p-o*h,Ca=r*d-s*h,_a=r*g-l*h,_l=o*d-s*p,Qa=o*g-l*p,Kc=s*g-l*d,jc=y*G-v*I,_h=y*_t-_*I,_m=y*_r-w*I,ry=v*_t-_*G,uy=v*_r-w*G,ay=_*_r-w*_t,ey=_o*ay-Ca*uy+_a*ry+_l*_m-Qa*_h+Kc*jc;return ey?(ey=1/ey,e[0]=(p*ay-d*uy+g*ry)*ey,e[1]=(d*_m-h*ay-g*_h)*ey,e[2]=(h*uy-p*_m+g*jc)*ey,e[3]=(s*uy-o*ay-l*ry)*ey,e[4]=(r*ay-s*_m+l*_h)*ey,e[5]=(o*_m-r*uy-l*jc)*ey,e[6]=(G*Kc-_t*Qa+_r*_l)*ey,e[7]=(_t*_a-I*Kc-_r*Ca)*ey,e[8]=(I*Qa-G*_a+_r*_o)*ey,e):null}var mat3_normalFromMat4=getDefaultExportFromCjs(normalFromMat4_1),invert_1$1=invert$1;function invert$1(e,n){var r=n[0],o=n[1],s=n[2],l=n[3],h=n[4],p=n[5],d=n[6],g=n[7],y=n[8],v=y*h-p*g,_=-y*l+p*d,w=g*l-h*d,I=r*v+o*_+s*w;return I?(I=1/I,e[0]=v*I,e[1]=(-y*o+s*g)*I,e[2]=(p*o-s*h)*I,e[3]=_*I,e[4]=(y*r-s*d)*I,e[5]=(-p*r+s*l)*I,e[6]=w*I,e[7]=(-g*r+o*d)*I,e[8]=(h*r-o*l)*I,e):null}var mat3_invert=getDefaultExportFromCjs(invert_1$1),identity_1$1=identity$2;function identity$2(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}var mat3_identity=getDefaultExportFromCjs(identity_1$1),multiply_1=multiply;function multiply(e,n,r){var o=n[0],s=n[1],l=n[2],h=n[3],p=n[4],d=n[5],g=n[6],y=n[7],v=n[8],_=n[9],w=n[10],I=n[11],G=n[12],_t=n[13],_r=n[14],_o=n[15],Ca=r[0],_a=r[1],_l=r[2],Qa=r[3];return e[0]=Ca*o+_a*p+_l*v+Qa*G,e[1]=Ca*s+_a*d+_l*_+Qa*_t,e[2]=Ca*l+_a*g+_l*w+Qa*_r,e[3]=Ca*h+_a*y+_l*I+Qa*_o,Ca=r[4],_a=r[5],_l=r[6],Qa=r[7],e[4]=Ca*o+_a*p+_l*v+Qa*G,e[5]=Ca*s+_a*d+_l*_+Qa*_t,e[6]=Ca*l+_a*g+_l*w+Qa*_r,e[7]=Ca*h+_a*y+_l*I+Qa*_o,Ca=r[8],_a=r[9],_l=r[10],Qa=r[11],e[8]=Ca*o+_a*p+_l*v+Qa*G,e[9]=Ca*s+_a*d+_l*_+Qa*_t,e[10]=Ca*l+_a*g+_l*w+Qa*_r,e[11]=Ca*h+_a*y+_l*I+Qa*_o,Ca=r[12],_a=r[13],_l=r[14],Qa=r[15],e[12]=Ca*o+_a*p+_l*v+Qa*G,e[13]=Ca*s+_a*d+_l*_+Qa*_t,e[14]=Ca*l+_a*g+_l*w+Qa*_r,e[15]=Ca*h+_a*y+_l*I+Qa*_o,e}var mat4_multiply=getDefaultExportFromCjs(multiply_1),translate_1=translate;function translate(e,n,r){var o,s,l,h,p,d,g,y,v,_,w,I,G=r[0],_t=r[1],_r=r[2];return n===e?(e[12]=n[0]*G+n[4]*_t+n[8]*_r+n[12],e[13]=n[1]*G+n[5]*_t+n[9]*_r+n[13],e[14]=n[2]*G+n[6]*_t+n[10]*_r+n[14],e[15]=n[3]*G+n[7]*_t+n[11]*_r+n[15]):(o=n[0],s=n[1],l=n[2],h=n[3],p=n[4],d=n[5],g=n[6],y=n[7],v=n[8],_=n[9],w=n[10],I=n[11],e[0]=o,e[1]=s,e[2]=l,e[3]=h,e[4]=p,e[5]=d,e[6]=g,e[7]=y,e[8]=v,e[9]=_,e[10]=w,e[11]=I,e[12]=o*G+p*_t+v*_r+n[12],e[13]=s*G+d*_t+_*_r+n[13],e[14]=l*G+g*_t+w*_r+n[14],e[15]=h*G+y*_t+I*_r+n[15]),e}var mat4_translate=getDefaultExportFromCjs(translate_1),scale_1$1=scale$1;function scale$1(e,n,r){var o=r[0],s=r[1],l=r[2];return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=n[3]*o,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=n[7]*s,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=n[11]*l,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}var mat4_scale=getDefaultExportFromCjs(scale_1$1),perspective_1=perspective;function perspective(e,n,r,o,s){var l=1/Math.tan(n/2),h=1/(o-s);return e[0]=l/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+o)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*o*h,e[15]=0,e}var mat4_perspective=getDefaultExportFromCjs(perspective_1),identity_1=identity$1;function identity$1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var mat4_identity=getDefaultExportFromCjs(identity_1),identity=identity_1,lookAt_1=lookAt;function lookAt(e,n,r,o){var s,l,h,p,d,g,y,v,_,w,I=n[0],G=n[1],_t=n[2],_r=o[0],_o=o[1],Ca=o[2],_a=r[0],_l=r[1],Qa=r[2];return Math.abs(I-_a)<1e-6&&Math.abs(G-_l)<1e-6&&Math.abs(_t-Qa)<1e-6?identity(e):(y=I-_a,v=G-_l,_=_t-Qa,s=_o*(_*=w=1/Math.sqrt(y*y+v*v+_*_))-Ca*(v*=w),l=Ca*(y*=w)-_r*_,h=_r*v-_o*y,(w=Math.sqrt(s*s+l*l+h*h))?(s*=w=1/w,l*=w,h*=w):(s=0,l=0,h=0),p=v*h-_*l,d=_*s-y*h,g=y*l-v*s,(w=Math.sqrt(p*p+d*d+g*g))?(p*=w=1/w,d*=w,g*=w):(p=0,d=0,g=0),e[0]=s,e[1]=p,e[2]=y,e[3]=0,e[4]=l,e[5]=d,e[6]=v,e[7]=0,e[8]=h,e[9]=g,e[10]=_,e[11]=0,e[12]=-(s*I+l*G+h*_t),e[13]=-(p*I+d*G+g*_t),e[14]=-(y*I+v*G+_*_t),e[15]=1,e)}var mat4_lookAt=getDefaultExportFromCjs(lookAt_1),copy_1=copy;function copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}var mat4_copy=getDefaultExportFromCjs(copy_1),invert_1=invert;function invert(e,n){var r=n[0],o=n[1],s=n[2],l=n[3],h=n[4],p=n[5],d=n[6],g=n[7],y=n[8],v=n[9],_=n[10],w=n[11],I=n[12],G=n[13],_t=n[14],_r=n[15],_o=r*p-o*h,Ca=r*d-s*h,_a=r*g-l*h,_l=o*d-s*p,Qa=o*g-l*p,Kc=s*g-l*d,jc=y*G-v*I,_h=y*_t-_*I,_m=y*_r-w*I,ry=v*_t-_*G,uy=v*_r-w*G,ay=_*_r-w*_t,ey=_o*ay-Ca*uy+_a*ry+_l*_m-Qa*_h+Kc*jc;return ey?(ey=1/ey,e[0]=(p*ay-d*uy+g*ry)*ey,e[1]=(s*uy-o*ay-l*ry)*ey,e[2]=(G*Kc-_t*Qa+_r*_l)*ey,e[3]=(_*Qa-v*Kc-w*_l)*ey,e[4]=(d*_m-h*ay-g*_h)*ey,e[5]=(r*ay-s*_m+l*_h)*ey,e[6]=(_t*_a-I*Kc-_r*Ca)*ey,e[7]=(y*Kc-_*_a+w*Ca)*ey,e[8]=(h*uy-p*_m+g*jc)*ey,e[9]=(o*_m-r*uy-l*jc)*ey,e[10]=(I*Qa-G*_a+_r*_o)*ey,e[11]=(v*_a-y*Qa-w*_o)*ey,e[12]=(p*_h-h*ry-d*jc)*ey,e[13]=(r*ry-o*_h+s*jc)*ey,e[14]=(G*Ca-I*_l-_t*_o)*ey,e[15]=(y*_l-v*Ca+_*_o)*ey,e):null}var mat4_invert=getDefaultExportFromCjs(invert_1),transformMat4_1=transformMat4;function transformMat4(e,n,r){var o=n[0],s=n[1],l=n[2],h=n[3];return e[0]=r[0]*o+r[4]*s+r[8]*l+r[12]*h,e[1]=r[1]*o+r[5]*s+r[9]*l+r[13]*h,e[2]=r[2]*o+r[6]*s+r[10]*l+r[14]*h,e[3]=r[3]*o+r[7]*s+r[11]*l+r[15]*h,e}var vec4_transformMat4=getDefaultExportFromCjs(transformMat4_1),normalize_1=normalize;function normalize(e,n){var r=n[0],o=n[1],s=n[2],l=n[3],h=r*r+o*o+s*s+l*l;return h>0&&(h=1/Math.sqrt(h),e[0]=r*h,e[1]=o*h,e[2]=s*h,e[3]=l*h),e}var vec4_normalize=getDefaultExportFromCjs(normalize_1),scale_1=scale;function scale(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e}var vec4_scale=getDefaultExportFromCjs(scale_1),vec3={fromValues:function(e,n,r){var o=new Float64Array(3);return o[0]=e,o[1]=n,o[2]=r,o},transformMat4:vec3_transformMat4},mat3={normalFromMat4:mat3_normalFromMat4,invert:mat3_invert,identity:mat3_identity},mat4={multiply:mat4_multiply,translate:mat4_translate,scale:mat4_scale,perspective:mat4_perspective,lookAt:mat4_lookAt,identity:mat4_identity,copy:mat4_copy,invert:mat4_invert},vec4={transformMat4:vec4_transformMat4,normalize:vec4_normalize,scale:vec4_scale},FeatureSelection=function(){function e(n,r){_classCallCheck(this,e),this._gl=n,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var o=getTextureManager(r).create(this._gl,"selection_fbo",{filtering:"nearest"});o.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,o.texture,0);var s=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,s),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,s),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _createClass(e,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var n;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(n=this._gl).clearColor.apply(n,_toConsumableArray(e.defaultColor))}},{key:"getFeatureAt",value:function(n,r,o){var s=r.radius,l=r.top_most_only,h=l===void 0||l;!n||n.x<0||n.y<0||n.x>1||n.y>1?o({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:n,radius:s,top_most_only:h,ttl:h?1:e.MAX_PICKING_TRIES,callback:o})}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(n){this._has_dirty_buffer=!!this._pending_deep_request}},{key:"hasPendingRequests",value:function(){return Object.keys(this._requests).length>0}},{key:"clearPendingRequests",value:function(){for(var n in this._requests)this._requests[n].callback(new Error("cleared")),delete this._requests[n];this._pending_deep_request=null}},{key:"read",value:function(n){if(this.hasPendingRequests()){var r=this._gl;for(var o in r.bindFramebuffer(r.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,n),this._requests)if(this.processRequest(this._requests[o],n))break;r.bindFramebuffer(r.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(n,r){var o,s,l=this._gl,h=255,p=n.point,d=n.radius;if(d){var g=Math.min(this._fbo_size.width,this._fbo_size.height);s={x:Math.min(Math.ceil(2*d.x*this._fbo_size.width),g),y:Math.min(Math.ceil(2*d.y*this._fbo_size.height),g)}}else d={x:0,y:0},s={x:1,y:1};var y=s.x*s.y*4;if(this._pixels==null||this._pixels.byteLength<y)this._pixels=new Uint8Array(y);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,y);else for(var v=0;v<y;v++)this._pixels[v]=0;l.readPixels(Math.round((p.x-d.x)*this._fbo_size.width),Math.round((1-p.y-d.y)*this._fbo_size.height),s.x,s.y,l.RGBA,l.UNSIGNED_BYTE,this._pixels),n.ttl--;var _=Math.floor(s.x/2),w=Math.floor(s.y/2),I=4*(w*s.x+_),G=this._pixels.slice(I,I+4),_t=G[0]+(G[1]<<8)+(G[2]<<16);if(_t>0)o=_t+(G[3]<<24)>>>0,h=G[3];else if(y>4){var _r=1/0;I=0;for(var _o=0;_o<s.y;_o++)for(var Ca=0;Ca<s.x;Ca++,I+=4)if((_t=(G=this._pixels.slice(I,I+4))[0]+(G[1]<<8)+(G[2]<<16))>0){var _a=Math.pow(Ca-_,2)+Math.pow(_o-w,2);_a<_r&&(o=_t+(G[3]<<24)>>>0,h=G[3],_r=_a)}}if(h!==255){var _l=this._getFeatureByKey(o,r);if(n.features||(n.features=[]),!_l)return void this._finishRead(n);if(n.features.every(function(Qa){return Qa.id!==_l.id})&&n.features.push(_l),n.ttl)return this._pending_deep_request=n,e._discardColor(G),this._has_dirty_buffer=!0,!0;this._finishRead(n)}else this._finishRead(n)}},{key:"_finishRead",value:function(n){var r=n.features||e.EMPTY_ARRAY;n.top_most_only||(this._pending_deep_request=null,e._resetDiscardedColors()),delete this._requests[n.id],n.callback({features:r})}},{key:"_getFeatureByKey",value:function(n,r){for(var o=null,s=0;s<r.length;s++){var l=r[s];if(l.selection_data&&(o=l.selection_data[n])){o.tile={coords:l.coords};break}}return o}},{key:"setupDiscards",value:function(n){for(var r=e.MAX_PICKING_TRIES;r--;)n.uniform("4fv","u_selection_discard".concat(r),e._discarded_colors[r]||e.defaultColor)}}],[{key:"makeEntry",value:function(){this.map_entry++;var n=255&this.map_entry,r=this.map_entry>>8&255,o=this.map_entry>>16&255,s=this.map_prefix;return{key:n+(r<<8)+(o<<16)+(s<<24)>>>0,color:[n/255,r/255,o/255,s/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(n){this.map_prefix=n}},{key:"_discardColor",value:function(n){this._discarded_colors.push([n[0]/255,n[1]/255,n[2]/255,n[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}])}();FeatureSelection._discarded_colors=[],FeatureSelection.map_entry=0,FeatureSelection.map_prefix=0,FeatureSelection.defaultColor=[0,0,0,1],FeatureSelection.MAX_PICKING_TRIES=10,FeatureSelection.EMPTY_ARRAY=Object.freeze([]);var GLSL={parseUniforms:function(e){var n=[];for(var r in e){var o,s=r,l=e[r];if(typeof l=="number")n.push({type:"float",method:"1f",name:r,value:l,key:s,uniforms:e});else if(Array.isArray(l)){if(typeof l[0]=="number")l.length>=2&&l.length<=4?n.push({type:"vec"+l.length,method:l.length+"fv",name:r,value:l,key:s,uniforms:e}):l.length>4&&n.push({type:"float[]",method:"1fv",name:r+"[0]",value:l,key:s,uniforms:e});else if(typeof l[0]=="string")for(o=0;o<l.length;o++)n.push({type:"sampler2D",method:"1i",name:r+"["+o+"]",value:l[o],key:o,uniforms:l});else if(Array.isArray(l[0])&&typeof l[0][0]=="number"&&l[0].length>=2&&l[0].length<=4)for(o=0;o<l.length;o++)n.push({type:"vec"+l[0].length,method:l[o].length+"fv",name:r+"["+o+"]",value:l[o],key:o,uniforms:l})}else typeof l=="boolean"?n.push({type:"bool",method:"1i",name:r,value:l,key:s,uniforms:e}):typeof l=="string"&&n.push({type:"sampler2D",method:"1i",name:r,value:l,key:s,uniforms:e})}return n},defineVariable:function(e,n){var r,o;if(typeof n=="number")r="float";else if(Array.isArray(n))typeof n[0]=="number"?n.length>=2&&n.length<=4?r="vec"+n.length:(r="float",o=n.length):typeof n[0]=="string"&&(r="sampler2D",o=n.length);else if(typeof n=="boolean")r="bool";else{if(typeof n!="string")return;r="sampler2D"}var s="";return s+="".concat(r," ").concat(e),o&&(s+="[".concat(o,"]")),s+=`;
`},defineUniform:function(e,n){var r=GLSL.defineVariable(e,n);if(r)return"uniform "+r},isUniformDefined:function(e,n){var r=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+e+"\\b","g");return!!n.match(r)},isSymbolReferenced:function(e,n){var r=new RegExp("\\b"+e+"\\b","g");return n.search(r)>=0},expandVec3:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(Array.isArray(e)){if(e.length!==2)return e;n=[].concat(_toConsumableArray(e),[r]).map(parseFloat)}else n=[e,e,e].map(parseFloat);if(n&&n.every(function(o){return typeof o=="number"&&!isNaN(o)}))return n},expandVec4:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(Array.isArray(e)){if(e.length!==3)return e;n=[].concat(_toConsumableArray(e),[r]).map(parseFloat)}else n=[e,e,e,r].map(parseFloat);if(n&&n.every(function(o){return typeof o=="number"&&!isNaN(o)}))return n}},extensions=[];function getExtension(e,n){var r=extensions.filter(function(o){return o[0]===e})[0];return(r=r&&r[1])||(extensions.push([e,{}]),r=extensions[extensions.length-1][1]),r[n]||(r[n]=e.getExtension(n)),r[n]}function hashString(e){var n,r,o=0;if(e.length===0)return o;for(n=0,r=e.length;n<r;n++)o=(o<<5)-o+e.charCodeAt(n),o|=0;return o}var stripComments={exports:{}},reBlock="\\/\\*",reBlockIgnore="\\/\\*(?!\\*?\\!)",reBlockEnd="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",reLine=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,reLineIgnore=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,strip=stripComments.exports=function(e,n){return e?strip.block(strip.line(e,n),n):""};strip.block=function(e,n){n=n||{};var r=new RegExp(reBlock+reBlockEnd,"gm");return n.safe&&(r=new RegExp(reBlockIgnore+reBlockEnd,"gm")),e?e.replace(r,""):""},strip.line=function(e,n){var r=reLine;return(n=n||{}).safe&&(r=reLineIgnore),e?e.replace(r,""):""};var stripCommentsExports=stripComments.exports,strip$1=getDefaultExportFromCjs(stripCommentsExports),glShaderErrors=parseErrors;function parseErrors(e){e=String(e);for(var n,r=[];n=e.match(/ERROR\:([^\n]+)/);){e=e.slice(n.index+1);var o=(h=n[1].trim()).split(":"),s=o.slice(2).join(":").trim(),l=parseInt(o[0],10),h=parseInt(o[1],10);r.push({message:s,file:l,line:h})}return r}var parseShaderErrors=getDefaultExportFromCjs(glShaderErrors),re_pragma=/^\s*#pragma.*$/gm,re_continue_line=/\\\s*\n/gm,ShaderProgram=function(){function e(n,r,o,s,l){if(_classCallCheck(this,e),l=l||{},this.textureManager=getTextureManager(s),this.gl=n,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!e.polyfills[s]){e.polyfills[s]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch{e.polyfills[s].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(p,d,g){e.polyfills[s].uniformMatrix3fv.call(this,p,d,new Float32Array(g))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch{e.polyfills[s].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(p,d,g){e.polyfills[s].uniformMatrix4fv.call(this,p,d,new Float32Array(g))}}}this.defines=Object.assign({},l.defines||{}),this.blocks=Object.assign({},l.blocks||{}),this.block_scopes=Object.assign({},l.block_scopes||{}),this.extensions=l.extensions||[],this.dependent_uniforms=l.uniforms,this.uniforms={},this.attribs={},this.vertex_source=r,this.fragment_source=o,this.id=e.id++,this.name=l.name}return _createClass(e,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(e.current!==this&&this.gl.useProgram(this.program),e.current=this)}},{key:"compile",value:function(){var n=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var r,o=this.checkExtensions(),s=this.buildDefineList(),l=this.buildShaderBlockList();for(var h in l){var p=l[h];if(p&&(!Array.isArray(p)||p.length!==0)){r=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+h+"\\s*$","m");var d=this.computed_vertex_source.match(r),g=this.computed_fragment_source.match(r);if(d!=null||g!=null){var y="";p.forEach(function(w){var I="".concat(w.scope,", ").concat(w.key,", ").concat(w.num);y+=`
// tangram-block-start: `.concat(I,`
`),y+=w.source,y+=`
// tangram-block-end: `.concat(I,`
`)}),d!=null&&(this.computed_vertex_source=this.computed_vertex_source.replace(r,y)),g!=null&&(this.computed_fragment_source=this.computed_fragment_source.replace(r,y)),s["TANGRAM_BLOCK_"+h.replace(/[\s-]+/g,"_").toUpperCase()]=!0}}}this.computed_vertex_source=this.computed_vertex_source.replace(re_pragma,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_pragma,""),this.ensureUniforms(this.dependent_uniforms);var v="",_=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT);v=_&&_.precision>0?`precision highp float;
`:`precision mediump float;
`,s.TANGRAM_VERTEX_SHADER=!0,s.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=v+e.buildDefineString(s)+this.computed_vertex_source,s.TANGRAM_VERTEX_SHADER=!1,s.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=e.buildExtensionString(o)+v+e.buildDefineString(s)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(re_continue_line,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_continue_line,"");try{this.program=e.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(w){throw this.program=null,this.compiled=!1,this.compiling=!1,this.error=w,w.type!=="vertex"&&w.type!=="fragment"||(this.shader_errors=w.errors,this.shader_errors.forEach(function(I){I.type=w.type,I.block=n.block(w.type,I.line)})),w}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var n,r={};for(n in e.defines)r[n]=e.defines[n];for(n in this.defines)r[n]=this.defines[n];return r}},{key:"buildShaderBlockList",value:function(){var n,r={};for(n in e.blocks){var o;r[n]=[],Array.isArray(e.blocks[n])?(o=r[n]).push.apply(o,_toConsumableArray(e.blocks[n].map(function(d,g){return{key:n,source:d,num:g,scope:"ShaderProgram"}}))):r[n]=[{key:n,source:e.blocks[n],num:0,scope:"ShaderProgram"}]}for(n in this.blocks)if(r[n]=r[n]||[],Array.isArray(this.blocks[n]))for(var s=this.block_scopes&&this.block_scopes[n]||[],l=null,h=0,p=0;p<this.blocks[n].length;p++)s[p]!==l&&(l=s[p],h=0),r[n].push({key:n,source:this.blocks[n][p],num:h,scope:l||this.name}),h++;else r[n].push({key:n,source:this.blocks[n],num:0,scope:this.name});return r}},{key:"ensureUniforms",value:function(n){if(n){var r,o=strip$1(this.computed_vertex_source),s=strip$1(this.computed_fragment_source),l=[],h=[];for(var p in n){var d=GLSL.isUniformDefined(p,o),g=GLSL.isUniformDefined(p,s);if(!d||!g){if(!(r=GLSL.defineUniform(p,n[p])))continue;d||(log("trace","Program ".concat(this.name,": ").concat(p," not defined in vertex shader, injecting: '").concat(r,"'")),l.push(r)),g||(log("trace","Program ".concat(this.name,": ").concat(p," not defined in fragment shader, injecting: '").concat(r,"'")),h.push(r))}}l.length>0&&(this.computed_vertex_source=l.join(`
`)+this.computed_vertex_source),h.length>0&&(this.computed_fragment_source=h.join(`
`)+this.computed_fragment_source)}}},{key:"setUniforms",value:function(n){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.compiled){r&&(this.texture_unit=0);for(var o=GLSL.parseUniforms(n),s=0;s<o.length;s++){var l=o[s];l.type==="sampler2D"?this.setTextureUniform(l.name,l.value):this.uniform(l.method,l.name,l.value)}}}},{key:"saveUniforms",value:function(n){var r=n||this.uniforms;for(var o in r){var s=this.uniforms[o];s&&(s.saved_value=s.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(n){var r=n||this.uniforms;for(var o in r){var s=this.uniforms[o];s&&s.saved_value&&(s.value=s.saved_value,this.updateUniform(s))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(n,r){var o=this.textureManager.textures[r];o!=null?(o.bind(this.texture_unit),this.uniform("1i",n,this.texture_unit),this.texture_unit++):log("warn","Cannot find texture '".concat(r,"'"))}},{key:"uniform",value:function(n,r,o){if(this.compiled){this.uniforms[r]=this.uniforms[r]||{};var s=this.uniforms[r];s.name=r,s.location===void 0&&(s.location=this.gl.getUniformLocation(this.program,r)),s.method=n,s.value=o,this.updateUniform(s)}}},{key:"updateUniform",value:function(n){this.compiled&&n&&n.location!=null&&(this.use(),this.commitUniform(n))}},{key:"commitUniform",value:function(n){var r=n.location,o=n.value;switch(n.method){case"1i":this.gl.uniform1i(r,o);break;case"1f":this.gl.uniform1f(r,o);break;case"2f":this.gl.uniform2f(r,o[0],o[1]);break;case"3f":this.gl.uniform3f(r,o[0],o[1],o[2]);break;case"4f":this.gl.uniform4f(r,o[0],o[1],o[2],o[3]);break;case"1iv":this.gl.uniform1iv(r,o);break;case"3iv":this.gl.uniform3iv(r,o);break;case"1fv":this.gl.uniform1fv(r,o);break;case"2fv":this.gl.uniform2fv(r,o);break;case"3fv":this.gl.uniform3fv(r,o);break;case"4fv":this.gl.uniform4fv(r,o);break;case"Matrix3fv":this.gl.uniformMatrix3fv(r,!1,o);break;case"Matrix4fv":this.gl.uniformMatrix4fv(r,!1,o)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var n in this.uniforms){var r=this.uniforms[n];r.location=this.gl.getUniformLocation(this.program,n),this.updateUniform(r)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(n){if(this.compiled){var r=this.attribs[n]=this.attribs[n]||{};return r.location!=null||(r.name=n,r.location=this.gl.getAttribLocation(this.program,n)),r}}},{key:"source",value:function(n){return n==="vertex"?this.computed_vertex_source:n==="fragment"?this.computed_fragment_source:void 0}},{key:"lines",value:function(n){var r=this.source(n);return r?r.split(`
`):[]}},{key:"line",value:function(n,r){var o=this.lines(n);if(o)return o[r]}},{key:"block",value:function(n,r){for(var o,s=this.lines(n),l=0;l<r&&l<s.length;l++){var h=s[l],p=h.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);p&&p.length>1?o={scope:p[1],name:p[2],num:p[3]}:(p=h.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&p.length>1&&(o=null),o&&(o.line=o.line==null?-1:o.line+1,o.source=h)}return o}},{key:"checkExtensions",value:function(){var n=this,r=[];return this.extensions.forEach(function(o){var s=getExtension(n.gl,o),l="TANGRAM_EXTENSION_".concat(o);n.defines[l]=s!=null,s?r.push(o):log("debug","Could not enable extension '".concat(o,"'"))}),r}}])}();ShaderProgram.polyfills={},ShaderProgram.id=0,ShaderProgram.current=null,ShaderProgram.defines={},ShaderProgram.blocks={},ShaderProgram.reset=function(){ShaderProgram.programs_by_source={},ShaderProgram.shaders_by_source={}},ShaderProgram.reset(),ShaderProgram.buildDefineString=function(e){var n="";for(var r in e)e[r]!=null&&e[r]!==!1&&(typeof e[r]=="boolean"&&e[r]===!0?n+="#define "+r+`
`:typeof e[r]=="number"&&Math.floor(e[r])===e[r]?n+="#define "+r+" "+e[r].toFixed(1)+`
`:n+="#define "+r+" "+e[r]+`
`);return n},ShaderProgram.buildExtensionString=function(e){var n="";return(e=e||[]).forEach(function(r){n+="#ifdef GL_".concat(r,`
#extension GL_`).concat(r,` : enable
#endif
`)}),n},ShaderProgram.addBlock=function(e){var n;ShaderProgram.blocks[e]=ShaderProgram.blocks[e]||[];for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];(n=ShaderProgram.blocks[e]).push.apply(n,o)},ShaderProgram.removeBlock=function(e){ShaderProgram.blocks[e]=[]},ShaderProgram.replaceBlock=function(e){ShaderProgram.removeBlock(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];ShaderProgram.addBlock.apply(ShaderProgram,[e].concat(r))},ShaderProgram.updateProgram=function(e,n,r,o){var s=hashString(e._tangram_id+"::"+r+"::"+o);if(ShaderProgram.programs_by_source[s])return log("trace","Reusing identical source GL program object"),ShaderProgram.programs_by_source[s];var l=ShaderProgram.createShader(e,r,e.VERTEX_SHADER),h=ShaderProgram.createShader(e,o,e.FRAGMENT_SHADER);if(e.useProgram(null),n!=null)for(var p=e.getAttachedShaders(n),d=0;d<p.length;d++)e.detachShader(n,p[d]);else n=e.createProgram();if(l==null||h==null)return n;if(e.attachShader(n,l),e.attachShader(n,h),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var g=new Error(`WebGL program error:
            VALIDATE_STATUS: `.concat(e.getProgramParameter(n,e.VALIDATE_STATUS),`
            ERROR: `).concat(e.getError(),`
            --- Vertex Shader ---
            `).concat(r,`
            --- Fragment Shader ---
            `).concat(o));throw Object.assign(new Error(g),{type:"program"})}return ShaderProgram.programs_by_source[s]=n,n},ShaderProgram.createShader=function(e,n,r){var o=hashString(e._tangram_id+"::"+n);if(ShaderProgram.shaders_by_source[o])return log("trace","Reusing identical source GL shader object"),ShaderProgram.shaders_by_source[o];var s=e.createShader(r);if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS)){var l=r===e.VERTEX_SHADER?"vertex":"fragment",h=e.getShaderInfoLog(s),p=parseShaderErrors(h);throw Object.assign(new Error(h),{type:l,errors:p})}return ShaderProgram.shaders_by_source[o]=s,s};var VertexArrayObject={disabled:!1,bound_vao:[],init:function(e){var n;this.disabled!==!0&&(n=getExtension(e,"OES_vertex_array_object")),n!=null?log("info","Vertex Array Object extension available"):this.disabled!==!0?log("warn","Vertex Array Object extension NOT available"):log("warn","Vertex Array Object extension force disabled")},create:function(e,n,r){var o={};o.setup=n,o.teardown=r;var s=getExtension(e,"OES_vertex_array_object");return s!=null&&(o._vao=s.createVertexArrayOES(),s.bindVertexArrayOES(o._vao)),o.setup(!0),o},getCurrentBinding:function(e){var n=this.bound_vao.filter(function(r){return r[0]===e})[0];return n&&n[1]},setCurrentBinding:function(e,n){var r=this.bound_vao,o=r.filter(function(s){return s[0]===e})[0];o==null?r.push([e,n]):o[1]=n},bind:function(e,n){var r=getExtension(e,"OES_vertex_array_object");if(n!=null)r!=null&&n._vao!=null?(r.bindVertexArrayOES(n._vao),this.setCurrentBinding(e,n)):n.setup(!1);else{var o=this.getCurrentBinding(e);r!=null?r.bindVertexArrayOES(null):o!=null&&typeof o.teardown=="function"&&o.teardown(),this.setCurrentBinding(e,null)}},destroy:function(e,n){var r=getExtension(e,"OES_vertex_array_object");r!=null&&n!=null&&n._vao!=null&&(r.deleteVertexArrayOES(n._vao),n._vao=null)}},VBOMesh=function(){return _createClass(function e(n,r,o,s,l,h){_classCallCheck(this,e),h=h||{},this.textureManager=getTextureManager(l),this.gl=n,this.vertex_data=r,this.element_data=o,this.vertex_layout=s,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=h.draw_mode||this.gl.TRIANGLES,this.data_usage=h.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=h.uniforms,this.textures=h.textures,this.retain=h.retain||!1,this.created_at=+new Date,this.fade_in_time=h.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0},[{key:"render",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.valid)return!1;var n=e.program||ShaderProgram.current;n.use(),this.uniforms&&(n.saveUniforms(this.uniforms),n.setUniforms(this.uniforms,!1));var r=(+new Date-this.created_at)/1e3;return n.uniform("1f","u_visible_time",r),this.bind(n),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),VertexArrayObject.bind(this.gl,null),this.uniforms&&n.restoreUniforms(this.uniforms),r<this.fade_in_time}},{key:"bind",value:function(e){var n=this,r=this.vaos[e.id];r?VertexArrayObject.bind(this.gl,r):this.vaos[e.id]=VertexArrayObject.create(this.gl,function(o){n.gl.bindBuffer(n.gl.ARRAY_BUFFER,n.vertex_buffer),n.toggle_element_array&&n.gl.bindBuffer(n.gl.ELEMENT_ARRAY_BUFFER,n.element_buffer),n.vertex_layout.enable(n.gl,e,o)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var e=this;if(!this.valid)return!1;for(var n in this.valid=!1,this.vaos)VertexArrayObject.destroy(this.gl,this.vaos[n]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(r){return e.textureManager.release(r)}),!0}}])}(),shaderSrc_material=`/*Defines globals:materiallight_accumulator_**/struct Material{
#ifdef TANGRAM_MATERIAL_EMISSION
vec4 emission;
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
vec3 emissionScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT
vec4 ambient;
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
vec3 ambientScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE
vec4 diffuse;
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
vec3 diffuseScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
vec4 specular;float shininess;
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
vec3 specularScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
vec3 normalScale;float normalAmount;
#endif
};uniform Material u_material;Material material;
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
uniform sampler2D u_material_emission_texture;
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
uniform sampler2D u_material_ambient_texture;
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
uniform sampler2D u_material_diffuse_texture;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
uniform sampler2D u_material_specular_texture;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
uniform sampler2D u_material_normal_texture;
#endif
vec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);
#ifdef TANGRAM_MATERIAL_SPECULAR
vec4 light_accumulator_specular=vec4(vec3(0.0),1.);
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP
vec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR
vec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR
vec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
void calculateNormal(inout vec3 _normal){
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV
_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR
vec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR
vec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;
#endif
_normal=normalize(_normal);}
#endif
void calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV
material.emission*=texture2D(u_material_emission_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR
material.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR
material.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP
material.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV
material.ambient*=texture2D(u_material_ambient_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR
material.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR
material.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP
material.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV
material.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR
material.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR
material.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP
material.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV
material.specular*=texture2D(u_material_specular_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR
material.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR
material.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP
material.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
}`,material_props=["emission","ambient","diffuse","specular"],Material=function(){function e(n){var r=this;_classCallCheck(this,e),n=n||{},material_props.forEach(function(o){var s=n[o];s!=null&&(s.texture?r[o]={texture:s.texture,mapping:s.mapping||"spheremap",scale:GLSL.expandVec3(s.scale!=null?s.scale:1),amount:GLSL.expandVec4(s.amount!=null?s.amount:1)}:typeof s=="number"||Array.isArray(s)?r[o]={amount:GLSL.expandVec4(s)}:r[o]=typeof s=="string"?{amount:StyleParser.parseColor(s)}:s)}),this.specular&&(this.specular.shininess=n.shininess?parseFloat(n.shininess):.2),n.normal!=null&&(this.normal={texture:n.normal.texture,mapping:n.normal.mapping||"triplanar",scale:GLSL.expandVec3(n.normal.scale!=null?n.normal.scale:1),amount:n.normal.amount!=null?n.normal.amount:1})}return _createClass(e,[{key:"inject",value:function(n){var r=this;material_props.forEach(function(o){var s="TANGRAM_MATERIAL_".concat(o.toUpperCase()),l=s+"_TEXTURE";n.defines[s]=r[o]!=null,r[o]&&r[o].texture&&(n.defines[l]=!0,n.defines[l+"_"+r[o].mapping.toUpperCase()]=!0,n.defines["TANGRAM_MATERIAL_TEXTURE_".concat(r[o].mapping.toUpperCase())]=!0,n.texcoords=n.texcoords||r[o].mapping==="uv")}),this.normal&&this.normal.texture&&(n.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,n.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,n.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,n.texcoords=n.texcoords||this.normal.mapping==="uv"),n.replaceShaderBlock(e.block,shaderSrc_material,"Material"),n.addShaderBlock("setup",`
material = u_material;
`,"Material")}},{key:"setupProgram",value:function(n){var r=this;material_props.forEach(function(o){r[o]&&(r[o].texture?(n.setTextureUniform("u_material_".concat(o,"_texture"),r[o].texture),n.uniform("3fv","u_material.".concat(o,"Scale"),r[o].scale),n.uniform("4fv","u_material.".concat(o),r[o].amount)):r[o].amount&&n.uniform("4fv","u_material.".concat(o),r[o].amount))}),this.specular&&n.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(n.setTextureUniform("u_material_normal_texture",this.normal.texture),n.uniform("3fv","u_material.normalScale",this.normal.scale),n.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(n){return n!=null&&(n.emission!=null||n.ambient!=null||n.diffuse!=null||n.specular!=null)}}])}(),Vector;Material.block="material";var Vector$1=Vector={};Vector.copy=function(e){for(var n=[],r=e.length,o=0;o<r;o++)n[o]=e[o];return n},Vector.neg=function(e){for(var n=[],r=e.length,o=0;o<r;o++)n[o]=-e[o];return n},Vector.add=function(e,n){for(var r=[],o=Math.min(e.length,n.length),s=0;s<o;s++)r[s]=e[s]+n[s];return r},Vector.sub=function(e,n){for(var r=[],o=Math.min(e.length,n.length),s=0;s<o;s++)r[s]=e[s]-n[s];return r},Vector.signed_area=function(e,n,r){return(n[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(n[1]-e[1])},Vector.mult=function(e,n){var r,o=[],s=e.length;if(typeof n=="number")for(r=0;r<s;r++)o[r]=e[r]*n;else for(s=Math.min(e.length,n.length),r=0;r<s;r++)o[r]=e[r]*n[r];return o},Vector.multMatrix=function(e,n){return[e[0][0]*n[0]+e[0][1]*n[1],e[1][0]*n[0]+e[1][1]*n[1]]},Vector.div=function(e,n){var r,o=[];if(typeof n=="number")for(r=0;r<e.length;r++)o[r]=e[r]/n;else{var s=Math.min(e.length,n.length);for(r=0;r<s;r++)o[r]=e[r]/n[r]}return o},Vector.perp=function(e,n){return[n[1]-e[1],e[0]-n[0]]},Vector.rot=function(e,n){var r=Math.cos(n),o=Math.sin(n);return[e[0]*r-e[1]*o,e[0]*o+e[1]*r]},Vector.angle=function(e){var n=_slicedToArray(e,2),r=n[0],o=n[1];return Math.atan2(o,r)},Vector.angleBetween=function(e,n){var r=Vector.dot(Vector.normalize(Vector.copy(e)),Vector.normalize(Vector.copy(n)));return r>1&&(r=1),Math.acos(r)},Vector.signedAngleBetween=function(e,n){return Math.atan2(e[0]*n[1]-e[1]*n[0],e[0]*n[0]+e[1]*n[1])},Vector.isEqual=function(e,n){for(var r=e.length,o=0;o<r;o++)if(e[o]!==n[o])return!1;return!0},Vector.lengthSq=function(e){return e.length===2?e[0]*e[0]+e[1]*e[1]:e.length>=3?e[0]*e[0]+e[1]*e[1]+e[2]*e[2]:0},Vector.length=function(e){return Math.sqrt(Vector.lengthSq(e))},Vector.normalize=function(e){var n;if(e.length===2){if((n=e[0]*e[0]+e[1]*e[1])===1)return e;(n=Math.sqrt(n))!==0?(e[0]/=n,e[1]/=n):(e[0]=0,e[1]=0)}else if(e.length>=3){if((n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2])===1)return e;(n=Math.sqrt(n))!==0?(e[0]/=n,e[1]/=n,e[2]/=n):(e[0]=0,e[1]=0,e[2]=0)}return e},Vector.cross=function(e,n){return e.length===2?e[0]*n[1]-e[1]*n[0]:e.length===3?[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]:void 0},Vector.dot=function(e,n){for(var r=0,o=Math.min(e.length,n.length),s=0;s<o;s++)r+=e[s]*n[s];return r};var shaderSrc_ambientLight="/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}",shaderSrc_directionalLight=`/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;
#endif
}`,shaderSrc_pointLight=`/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float attenuationExponent;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
float innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float outerRadius;
#endif
};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float Rin=1.0;float e=_light.attenuationExponent;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);
#endif
#else
float Rin=0.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);
#endif
#else
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;
#else
attenuation=1.0;
#endif
#endif
#endif
light_accumulator_ambient.rgb+=_light.ambient*attenuation;
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;
#endif
}`,shaderSrc_spotLight=`/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float attenuationExponent;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
float innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float outerRadius;
#endif
vec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float Rin=1.0;float e=_light.attenuationExponent;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);
#endif
#else
float Rin=0.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);
#endif
#else
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;
#else
attenuation=1.0;
#endif
#endif
#endif
float spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;
#endif
}`,Light=function(){function e(n,r){_classCallCheck(this,e),this.name=r.name,this.view=n,r.ambient==null||typeof r.ambient=="number"?this.ambient=GLSL.expandVec3(r.ambient||0):this.ambient=StyleParser.parseColor(r.ambient).slice(0,3),r.diffuse==null||typeof r.diffuse=="number"?this.diffuse=GLSL.expandVec3(r.diffuse!=null?r.diffuse:1):this.diffuse=StyleParser.parseColor(r.diffuse).slice(0,3),r.specular==null||typeof r.specular=="number"?this.specular=GLSL.expandVec3(r.specular||0):this.specular=StyleParser.parseColor(r.specular).slice(0,3)}return _createClass(e,[{key:"inject",value:function(){var n=`
            uniform `.concat(this.struct_name," u_").concat(this.name,`;
            `).concat(this.struct_name," ").concat(this.name,`;
            `),r=`
            `.concat(this.name," = u_").concat(this.name,`;

        `);ShaderProgram.addBlock(e.block,n),ShaderProgram.addBlock("setup",r)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(n){n.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),n.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),n.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(n,r){if(e.types[r.type])return new e.types[r.type](n,r)}},{key:"setMode",value:function(n,r){n===!0&&(n="fragment"),n=e.enabled&&(n??"fragment"),r.defines.TANGRAM_LIGHTING_FRAGMENT=n==="fragment",r.defines.TANGRAM_LIGHTING_VERTEX=n==="vertex"}},{key:"inject",value:function(n){if(ShaderProgram.removeBlock(e.block),e.enabled){var r="";if(n&&Object.keys(n).length>0){var o={};for(var s in n)o[n[s].type]=!0;for(var l in o)e.types[l].inject();for(var h in n)n[h].inject(),r+="calculateLight(".concat(h,`, _eyeToPoint, _normal);
`)}var p=`
            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {

                // Do initial material calculations over normal, emission, ambient, diffuse and specular values
                calculateMaterial(_eyeToPoint,_normal);

                // Un roll the loop of individual ligths to calculate
                `.concat(r,`

                //  Final light intensity calculation
                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha

                #ifdef TANGRAM_MATERIAL_EMISSION
                    color.rgb = material.emission.rgb;
                    color.a *= material.emission.a;
                #endif

                #ifdef TANGRAM_MATERIAL_AMBIENT
                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;
                    color.a *= material.ambient.a;
                #else
                    #ifdef TANGRAM_MATERIAL_DIFFUSE
                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;
                    #endif
                #endif

                #ifdef TANGRAM_MATERIAL_DIFFUSE
                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;
                    color.a *= material.diffuse.a;
                #endif

                #ifdef TANGRAM_MATERIAL_SPECULAR
                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;
                    color.a *= material.specular.a;
                #endif

                // Clamp final color
                color = clamp(color, 0.0, 1.0);

                return color;
            }`);ShaderProgram.addBlock(e.block,p)}}}])}();Light.types={},Light.block="lighting",Light.enabled=!0;var AmbientLight=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).type="ambient",s.struct_name="AmbientLight",s}return _inherits(n,e),_createClass(n,[{key:"setupProgram",value:function(r){r.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_ambientLight)}}])}(Light);Light.types.ambient=AmbientLight;var DirectionalLight=function(e){function n(r,o){var s;if(_classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).type="directional",s.struct_name="DirectionalLight",o.direction)s._direction=o.direction;else{var l=Math.sin(60*Math.PI/180);s._direction=[Math.cos(135*Math.PI/180)*l,Math.sin(135*Math.PI/180)*l,-.5]}return o.ambient==null&&(s.ambient=GLSL.expandVec3(.5)),s.direction=s._direction.map(parseFloat),s._initial_direction=[s.direction[0],s.direction[1],s.direction[2]],s}return _inherits(n,e),_createClass(n,[{key:"direction",get:function(){return this._direction},set:function(r){this._direction=Vector$1.normalize(Vector$1.copy(r))}},{key:"update",value:function(){vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(r){_get(_getPrototypeOf(n.prototype),"setupProgram",this).call(this,r),r.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_directionalLight)}}])}(Light);Light.types.directional=DirectionalLight;var PointLight=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).type="point",s.struct_name="PointLight",s.position=o.position||[0,0,"100px"],s.position_eye=[],s.origin=o.origin||"ground",s.attenuation=isNaN(parseFloat(o.attenuation))?0:parseFloat(o.attenuation),o.radius?Array.isArray(o.radius)&&o.radius.length===2?s.radius=o.radius:s.radius=[null,o.radius]:s.radius=null,s}return _inherits(n,e),_createClass(n,[{key:"inject",value:function(){_get(_getPrototypeOf(n.prototype),"inject",this).call(this),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=this.attenuation!==0,ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=this.radius!=null&&this.radius[0]!=null,ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=this.radius!=null}},{key:"update",value:function(){var r=this.view.lookAtManipulator.getLookAtData().zoom;if(this.origin==="world"){var o=_slicedToArray(Geo$1.latLngToMeters(this.position),2),s=o[0],l=o[1];this.position_eye[0]=s-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=l-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=StyleParser.convertUnits(this.position[2],{zoom:r,meters_per_pixel:Geo$1.metersPerPixel(r)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance}else this.origin!=="ground"&&this.origin!=="camera"||(this.position_eye=StyleParser.convertUnits(this.position,{zoom:r,meters_per_pixel:Geo$1.metersPerPixel(r)}),this.origin==="ground"&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance));this.position_eye[3]=1}},{key:"setupProgram",value:function(r){_get(_getPrototypeOf(n.prototype),"setupProgram",this).call(this,r),r.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&r.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var o=this.view.lookAtManipulator.getLookAtData().zoom;ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&r.uniform("1f","u_".concat(this.name,".innerRadius"),StyleParser.convertUnits(this.radius[0],{zoom:o,meters_per_pixel:Geo$1.metersPerPixel(o)})),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&r.uniform("1f","u_".concat(this.name,".outerRadius"),StyleParser.convertUnits(this.radius[1],{zoom:o,meters_per_pixel:Geo$1.metersPerPixel(o)}))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_pointLight)}}])}(Light);Light.types.point=PointLight;var SpotLight=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).type="spotlight",s.struct_name="SpotLight",s.direction=s._direction=(o.direction||[0,0,-1]).map(parseFloat),s._initial_direction=[s.direction[0],s.direction[1],s.direction[2]],s.exponent=o.exponent?parseFloat(o.exponent):.2,s.angle=o.angle?parseFloat(o.angle):20,s}return _inherits(n,e),_createClass(n,[{key:"direction",get:function(){return this._direction},set:function(r){this._direction=Vector$1.normalize(Vector$1.copy(r))}},{key:"setupProgram",value:function(r){_get(_getPrototypeOf(n.prototype),"setupProgram",this).call(this,r),r.uniform("3fv","u_".concat(this.name,".direction"),this.direction),r.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),r.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){_get(_getPrototypeOf(n.prototype),"update",this).call(this),vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_spotLight)}}])}(PointLight);function mergeObjects(e){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var r=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(r)for(var o in r){var s=r[o];s===null||_typeof(s)!=="object"||Array.isArray(s)?s!==void 0&&(e[o]=s):e[o]===null||_typeof(e[o])!=="object"||Array.isArray(e[o])?e[o]=mergeObjects({},s):e[o]=mergeObjects(e[o],s)}}return e}Light.types.spotlight=SpotLight;var shaderSrc_selectionFragment=`
#ifdef TANGRAM_FEATURE_SELECTION
varying vec4 v_selection_color;
#endif
void main(void){
#ifdef TANGRAM_FEATURE_SELECTION
gl_FragColor=v_selection_color;
#else
gl_FragColor=vec4(0.,0.,0.,1.);
#endif
}`,shaderSrc_selectionCropFragment=`
#pragma tangram: utils
#ifdef TANGRAM_FEATURE_SELECTION
uniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;
#endif
void main(void){
#ifdef TANGRAM_FEATURE_SELECTION
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}
#else
gl_FragColor=vec4(0.,0.,0.,1.);
#endif
}`,shaderSrc_rasters=`#ifdef TANGRAM_FRAGMENT_SHADER
uniform sampler2D u_raster;uniform vec3 u_raster_offset;
#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))
#endif
`,Style={init:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.generation,r=e.styles,o=e.sources,s=o===void 0?{}:o,l=e.introspection,h=e.id,p=h!==void 0?h+"/":"";this.scene_id=h,this.textureManager=getTextureManager(h),this.main_thread_target="".concat(p,"Style/").concat(this.name),this.setGeneration(n),this.styles=r,this.sources=s,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=l||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,this.blend_order==null&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof Material||(Material.isValid(this.material)||(this.material=StyleParser.defaults.material),this.material=new Material(this.material)),this.material.inject(this),Light.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),WorkerBroker.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(e){this.generation=e,Thread.is_main&&WorkerBroker.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(e,n,r,o){var s=o.size,l=o.offset;l=l===void 0?0:l;var h=e.index[n];if(h!==void 0)for(var p=0;p<s;++p){var d=r.length>p?r[p]:r;this.vertex_template[h+p+l]=d}else log("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(n,"'"))},startData:function(e){this.tile_data[e.id]=this.tile_data[e.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(e){var n=this.tile_data[e.id];if(this.tile_data[e.id]=null,n&&Object.keys(n.meshes).length>0){for(var r in n.meshes){var o=n.meshes[r];o.vertex_data.vertex_count!==0?(o.vertex_data.end(),o.vertex_elements=o.vertex_data.element_buffer,o.vertex_data=o.vertex_data.vertex_buffer):delete n.meshes[r]}return e.mesh_data[this.name]=n,this.buildRasterTextures(e,n).then(function(s){return s})}return Promise.resolve(null)},hasDataForTile:function(e){return this.tile_data[e.id]!=null},getTileMesh:function(e,n){var r=this.tile_data[e.id].meshes;return r[n.key]==null&&(r[n.key]={variant:n,vertex_data:this.vertexLayoutForMeshVariant(n).createVertexData()}),r[n.key]},vertexLayoutForMeshVariant:function(e){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(e,n){this.style_mesh_variants[e]||(this.style_mesh_variants[e]={variants:{}});var r=this.computeVariantForDraw(n);return this.style_mesh_variants[e].variants[r.key]={variant:r,times_unref:0},this.style_mesh_variants[e].variants[r.key].variant},getMeshVariantTypeForDraw:function(e){return this.getMeshVariantType(this.base,e)},getMeshVariantType:function(e,n){e===void 0&&(e="default");var r=this.style_mesh_variants[e];if(n.variantKey===void 0||!r||!r.variants[n.variantKey])return this.addMeshVariantForDraw(e,n);var o=n.variantKey,s=r.variants[o];return s.times_unref=0,s.variant},updateMeshVariantTypeCache:function(e){for(var n in this.style_mesh_variants){var r=this.style_mesh_variants[n].variants;for(var o in r){var s=r[o];s.times_unref++,s.times_unref>e&&(n!=="default"||+o!=0)&&(delete r[o],Object.keys(r).length===0&&delete this.style_mesh_variants[n])}}},computeVariantForDraw:function(e){return this.default_mesh_variant},addFeature:function(e,n,r){var o=r.tile;this.tile_data[o.id]||this.startData(o);var s=this.parseFeature(e,n,r);if(s){var l=this.base==="lines"?this.getMeshVariantTypeForDraw(n):this.getMeshVariantTypeForDraw(s),h=this.getTileMesh(o,l),p=h.vertex_data.offset,d=h.vertex_data.vertex_count;this.buildGeometry(e.geometry,s,h,r)>0?e.generation=this.generation:h.vertex_data.vertex_count>d&&(h.vertex_data.vertex_buffer.fill(0,p,h.vertex_data.offset),h.vertex_data.vertex_count=d,h.vertex_data.offset=p)}},buildGeometry:function(e,n,r,o){var s;return e.type==="Polygon"?s=this.buildPolygons([e.coordinates],n,r,o):e.type==="MultiPolygon"?s=this.buildPolygons(e.coordinates,n,r,o):e.type==="LineString"?s=this.buildLines([e.coordinates],n,r,o):e.type==="MultiLineString"?s=this.buildLines(e.coordinates,n,r,o):e.type==="Point"?s=this.buildPoints([e.coordinates],n,r,o):e.type==="MultiPoint"&&(s=this.buildPoints(e.coordinates,n,r,o)),s},parseFeature:function(e,n,r){try{var o=this.feature_style;if(o.order=this.parseOrder(n.order,r),o.order==null&&this.blend!=="overlay"){var s="Layer '".concat(n.layers.join(", "),"', draw group '").concat(n.group,"': ");return s+="'order' parameter is required unless blend mode is 'overlay'",n.order!=null&&(s+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",s+="or JS function), but evaluated to null for one or more features"),void log({level:"warn",once:!0},s)}if(!(o=this._parseFeature(e,n,r)))return;if(this.selection?o.interactive=StyleParser.evalProperty(this.introspection||n.interactive,r):o.interactive=!1,o.interactive===!0){var l=FeatureSelection.makeEntry(),h=l.color,p=l.key;o.selection_color=h,r.tile.selection_data||(r.tile.selection_data={}),r.tile.selection_data[p]={id:e.id||p,properties:e.properties,source_name:r.source,source_layer:r.layer,layers:r.layers}}else o.selection_color=FeatureSelection.defaultColor;return o}catch(d){log("error","Style.parseFeature: style parsing error",e,o,d.stack)}},_parseFeature:function(e,n,r){return this.feature_style},preprocess:function(e,n){if(!e.preprocessed){if(this.draw)for(var r in this.draw){var o=this.draw[r];_typeof(o)!=="object"||Array.isArray(o)?e[r]==null&&(e[r]=o):e[r]=mergeObjects({},o,e[r])}var s=n||"";if(!(e=this._preprocess(e,s)))return;e.preprocessed=!0}return e},_preprocess:function(e,n){return e},parseOrder:function(e,n){return typeof e!="number"?StyleParser.calculateOrder(e,n):e},scaleOrder:function(e){return 2*e},parseColor:function(e,n){return e?StyleParser.evalCachedColorProperty(e,n):this.shaders.blocks.color||this.shaders.blocks.filter?StyleParser.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(e){this.gl=e,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.vertexLayoutForMeshVariant(r.variant);return new VBOMesh(this.gl,e,n,o,this.scene_id,r)},render:function(e){return e.render()},getProgram:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"program";this.compileSetup();var n=this[e];if(n&&!n.error){if(!n.compiled)try{n.compile()}catch(r){log("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(e,"')"),this,r.stack)}return n}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var e=this.buildDefineList();if(this.selection){var n=Object.assign({},e);n.TANGRAM_FEATURE_SELECTION=!0}var r=this.shaders&&this.shaders.blocks,o=this.shaders&&this.shaders.block_scopes,s=Object.assign({},this.shaders&&this.shaders.uniforms);for(var l in s)s[l]==null&&log({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(l,"': uniform values must be non-null"));var h=this.shaders&&this.shaders.extensions;typeof h=="string"&&(h=[h]),this.program=new ShaderProgram(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:e,uniforms:s,blocks:r,block_scopes:o,extensions:h}),this.selection?this.selection_program=new ShaderProgram(this.gl,this.vertex_shader_src,this.crop_by_tile?shaderSrc_selectionCropFragment:shaderSrc_selectionFragment,this.scene_id,{name:this.name+" (selection)",defines:n,uniforms:s,blocks:r,block_scopes:o,extensions:h}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[e]=this.shaders.blocks[e]||[],this.shaders.blocks[e].push(n),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[e]=this.shaders.block_scopes[e]||[],this.shaders.block_scopes[e].push(r)},removeShaderBlock:function(e){this.shaders.blocks&&(this.shaders.blocks[e]=null)},replaceShaderBlock:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.removeShaderBlock(e),this.addShaderBlock(e,n,r)},buildDefineList:function(){var e={};if(this.defines!=null)for(var n in this.defines)e[n]=this.defines[n];if(this.shaders!=null&&this.shaders.defines!=null)for(n in this.shaders.defines)e[n]=this.shaders.defines[n];return e},hasRasters:function(){return["color","normal","custom"].indexOf(this.raster)>-1},setupRasters:function(){if(!Thread.is_main||!this.hasRasters())return!1;this.raster==="color"?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:this.raster==="normal"&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var e=!1;for(var n in this.sources)if(this.sources[n]instanceof RasterTileSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},buildRasterTextures:function(e,n){var r=this;if(!this.hasRasters())return Promise.resolve(n);var o={};return e.rasters.map(function(s){return r.sources[s]}).filter(function(s){return s}).forEach(function(s,l){if(s instanceof RasterTileSource){var h=s.tileTexture(e);o[h.url]=h}}),Object.keys(o).length===0?Promise.resolve(n):WorkerBroker.postMessage(this.main_thread_target+".loadTextures",o).then(function(s){if(!s||s.length<1)return log("trace","Missing texture info for tile ".concat(e.key)),null;if(s.some(function(g){return!g.loaded}))return null;n.uniforms=n.uniforms||{},n.textures=n.textures||[];var l=s[0].name,h=o[l].coords;if(n.uniforms.u_raster=l,n.textures.push(l),e.coords.z>h.z){var p=e.coords.z-h.z,d=Math.pow(2,p);n.uniforms.u_raster_offset=[(e.coords.x%d+d)%d/d,(d-1-e.coords.y%d)/d,1/d]}else n.uniforms.u_raster_offset=[0,0,1];return n})},loadTextures:function(e){var n=this;return this.textureManager.createFromObject(this.gl,e).then(function(){return Promise.all(Object.keys(e).map(function(r){return n.textureManager.textures[r]&&n.textureManager.textures[r].load()}).filter(function(r){return r}))}).then(function(r){return r.forEach(function(o){return o.retain()}),r.map(function(o){return{name:o.name,width:o.width,height:o.height,loaded:o.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(ShaderProgram.current)},setUniforms:function(){var e=ShaderProgram.current;e&&e.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(e){var n=[],r={};for(var o in e.forEach(function(s){var l=parseInt(s.name,10)||0;r[l]||(r[l]=[]),r[l].push(s)}),r)n.push.apply(n,_toConsumableArray(r[o].sort(Style.blendOrderSort)));return n},blendOrderSort:function(e,n){return e.blend==="opaque"||n.blend==="opaque"?e.blend==="opaque"&&n.blend==="opaque"?e.name<n.name?-1:1:e.blend==="opaque"?-1:1:e.blend_order<n.blend_order?-1:e.blend_order>n.blend_order?1:Style.default_blend_orders[e.blend]<Style.default_blend_orders[n.blend]?-1:Style.default_blend_orders[e.blend]>Style.default_blend_orders[n.blend]?1:e.name<n.name?-1:1}},id$1=0,build_id=0,Tile=function(){function e(n){var r=n.coords,o=n.style_zoom,s=n.source,l=n.worker,h=n.view,p=n.sceneId;_classCallCheck(this,e),this.textureManager=getTextureManager(p),this.id=id$1++,this.worker=l,this.view=h,this.source=s,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=o,this.coords=e.normalizedCoordinate(r,this.source,this.style_zoom),this.key=e.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Geo$1.metersForTile(this.coords),this.max=Geo$1.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Geo$1.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Geo$1.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Geo$1.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _createClass(e,[{key:"freeResources",value:function(){for(var n in this.meshes)this.meshes[n].forEach(function(r){return r.destroy()});this.meshes={}}},{key:"destroy",value:function(){Task.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return WorkerBroker.postMessage.apply(WorkerBroker,[this.worker].concat(r))}},{key:"build",value:function(n){var r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).fade_in,o=r===void 0||r;return this.generation=n,this.fade_in=o,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(n,r){if(!this.error){this.build_id=build_id++;var o={},s=this.mesh_data;if(s)for(var l in s){for(var h in s[l].meshes){var p=s[l].meshes[h];if(p.vertex_data){if(!n[l]){log("warn","Could not create mesh because style '".concat(l,"' not found, for tile ").concat(this.key,", aborting tile"));break}var d=Object.assign({},s[l]);d.uniforms=Object.assign({},d.uniforms,p.uniforms),d.variant=p.variant,p.textures&&(d.textures=p.textures),p.labels&&(d.retain=!0);var g=n[l].makeMesh(p.vertex_data,p.vertex_elements,d);g.variant=d.variant,g.labels=p.labels,o[l]=o[l]||[],o[l].push(g),g.variant.order==null&&(g.variant.order=o[l].length-1)}}o[l]&&o[l].sort(function(_,w){var I=_.variant.order,G=w.variant.order;return I==null?1:G==null||I<G?-1:1})}for(var y in delete this.mesh_data,o)this.meshes[y]&&this.meshes[y].forEach(function(_){return _.destroy()}),this.meshes[y]=o[y],this.new_mesh_styles.push(y);if(r.done){for(var v in this.meshes)this.new_mesh_styles.indexOf(v)===-1&&(this.meshes[v].forEach(function(_){return _.destroy()}),delete this.meshes[v]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(n){n?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(n),this.proxy_depth=1,n.proxied_as=n.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return this.proxy_for!=null}},{key:"shouldProxyForStyle",value:function(n){return!this.proxy_for||this.proxy_for.some(function(r){return r.meshes[n]==null})}},{key:"setupProgram",value:function(n,r){var o=n.model,s=n.model32;r.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),r.uniform("1f","u_tile_proxy_depth",this.proxy_depth),mat4.identity(o),mat4.translate(o,o,vec3.fromValues(this.min.x,this.min.y,0)),mat4.scale(o,o,vec3.fromValues(this.span.x/Geo$1.tile_scale,-1*this.span.y/Geo$1.tile_scale,1)),mat4.copy(s,o),r.uniform("Matrix4fv","u_model",s),r.uniform("1i","u_tile_fade_in",this.fade_in&&this.proxied_as!=="child")}},{key:"merge",value:function(n){return this.loading=n.loading,this.loaded=n.loaded,this.generation=n.generation,this.error=n.error,this.mesh_data=n.mesh_data,this.selection_data?Object.assign(this.selection_data,n.selection_data):this.selection_data=n.selection_data,this}}],[{key:"coord",value:function(n){return{x:n.x,y:n.y,z:n.z,key:e.coordKey(n)}}},{key:"coordKey",value:function(n){return n.x+"/"+n.y+"/"+n.z}},{key:"key",value:function(n,r,o){if(!(n.y<0||n.y>=1<<n.z||n.z<0))return[r.name,o,n.x,n.y,n.z].join("/")}},{key:"normalizedKey",value:function(n,r,o){return e.key(e.normalizedCoordinate(n,r,o),r,o)}},{key:"normalizedCoordinate",value:function(n,r,o){return r.zoom_bias&&(n=e.coordinateAtZoom(n,Math.max(0,n.z-r.zoom_bias))),e.coordinateWithMaxZoom(n,r.max_zoom)}},{key:"coordinateAtZoom",value:function(n,r){var o=n.x,s=n.y,l=n.z;if(l!==r){var h=Math.pow(2,l-r);o=Math.floor(o/h),s=Math.floor(s/h),l=r}return e.coord({x:o,y:s,z:l})}},{key:"coordinateWithMaxZoom",value:function(n,r){var o=n.x,s=n.y,l=n.z;return r!==void 0&&l>r?e.coordinateAtZoom({x:o,y:s,z:l},r):e.coord({x:o,y:s,z:l})}},{key:"childrenForCoordinate",value:function(n){var r=n.x,o=n.y,s=n.z,l=n.key;return e.coord_children[l]||(s++,r*=2,o*=2,e.coord_children[l]=[e.coord({x:r,y:o,z:s}),e.coord({x:r+1,y:o,z:s}),e.coord({x:r,y:o+1,z:s}),e.coord({x:r+1,y:o+1,z:s})]),e.coord_children[l]}},{key:"isDescendant",value:function(n,r){if(r.z>n.z){var o=e.coordinateAtZoom(r,n.z),s=o.x,l=o.y;return n.x===s&&n.y===l}return!1}},{key:"cancel",value:function(n){n&&(n.canceled=!0,n.source_data&&n.source_data.request_id&&(Utils$1.cancelRequest(n.source_data.request_id),n.source_data.request_id=null),e.abortBuild(n))}},{key:"buildGeometry",value:function(n,r){var o=r.scene_id,s=r.layers,l=r.styles,h=r.global,p=r.sources,d=r.meshVariantMaxLife,g=n.source_data;for(var y in Collision.startTile(n.id,{apply_repeat_groups:!0}),s){var v=s[y];if(v&&v.config_data){if(v.config_data.source===n.source)for(var _=e._getDataForSource(g,v.config_data,y),w=0;w<_.length;w++){var I=_[w],G=I.geom;if(G)for(var _t=0;_t<G.features.length;_t++){var _r=G.features[_t];if(_r.geometry!=null){var _o=StyleParser.getFeatureParseContext(_r,n,h,p);_o.winding=n.default_winding,_o.source=n.source,_o.layer=I.layer;var Ca=v.buildDrawGroups(_o,!0);if(Ca)for(var _a in Ca){var _l=Ca[_a],Qa=_l.style||_a,Kc=l[Qa];Kc?(_l=Kc.preprocess(_l,n.source))!=null&&_l.visible!==!1&&(_o.layers=_l.layers,Kc.addFeature(_r,_l,_o)):log("warn","Style '".concat(Qa,"' not found, skipping layer '").concat(y,"':"),_l,_r)}}}}}else log("warn","Layer ".concat(y," was defined without a geometry data source and will not be rendered."))}var jc=e._stylesForTile(n,l);e._sendStyleGroups(n,jc,{scene_id:o,meshVariantMaxLife:d},function(_h){return _h.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function(n,r){var o=[];for(var s in r)r[s].hasDataForTile(n)&&o.push(r[s]);return o}},{key:"_sendStyleGroups",value:function(n,r,o,s){var l=o.scene_id,h=o.meshVariantMaxLife,p={};if(r.forEach(function(v){var _=s(v);p[_]=p[_]||[],p[_].push(v)}),Object.keys(p).length>0){var d={start:!0};n.mesh_data={};var g=function(v){var _=p[v];Promise.all(_.map(function(w){return w.endData(n)})).then(function(){log("trace","Finished style group '".concat(v,"' for tile ").concat(n.key)),p[v]=[],Object.keys(p).every(function(w){return p[w].length===0})&&(d.done=!0),WorkerBroker.postMessage("TileManager_".concat(l,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(n,["mesh_data","selection_data"]),progress:d})),d.start=null,n.mesh_data={},n.selection_data={},d.done&&Collision.resetTile(n.id)},function(w){log("error","Error for style group '".concat(v,"' for tile ").concat(n.key),w)})};for(var y in p)g(y);Style.updateMeshVariantTypeCache(h)}else WorkerBroker.postMessage("TileManager_".concat(l,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(n),progress:{start:!0,done:!0}})),Collision.resetTile(n.id)}},{key:"_getDataForSource",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=[];return r!=null&&n!=null&&n.layers!=null&&(!r.layer&&n.layers._default||typeof r.layer=="string"&&!n.layers[r.layer]&&new RegExp("^\\d+_"+r.layer+"$").test(o)&&n.layers._default?s.push({geom:n.layers._default}):!r.layer&&o?s.push({layer:o,geom:n.layers[o]}):typeof r.layer=="string"?s.push({layer:r.layer,geom:n.layers[r.layer]}):Array.isArray(r.layer)&&r.layer.forEach(function(l){n.layers[l]&&n.layers[l].features&&s.push({layer:l,geom:n.layers[l]})})),s}},{key:"abortBuild",value:function(n,r){if(Task.removeForTile(n.id),Collision.abortTile(n.id),n.mesh_data)for(var o in n.mesh_data){var s=n.mesh_data[o].textures;s&&s.forEach(function(l){var h=getTextureManager(r).textures[l];h&&(log("trace","releasing texture ".concat(l," for tile ").concat(n.key)),h.release())})}}},{key:"slice",value:function(n,r){var o=["id","key","loading","loaded","generation","error","debug"];Array.isArray(r)&&o.push.apply(o,_toConsumableArray(r));for(var s={},l=0;l<o.length;l++){var h=o[l];s[h]=n[h]}return s}}])}();Tile.coord_children={};var RasterTileSource=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).rasters.indexOf(s.name)===-1&&s.rasters.unshift(s.name),s.filtering=r.filtering,s.textures={},s}return _inherits(n,e),_createClass(n,[{key:"load",value:function(r){r.source_data={},r.source_data.layers={},r.pad_scale=this.pad_scale,r.rasters=_toConsumableArray(this.rasters);var o=Geo$1.tile_scale;return r.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[o,0],[o,-o],[0,-o],[0,0]]]},properties:{}}]}},r.default_winding="CW",Promise.resolve(r)}},{key:"tileTexture",value:function(r){var o=r.coords.key;if(!this.textures[o]){var s=Tile.coordinateWithMaxZoom(r.coords,this.max_zoom),l=this.formatUrl(this.url,{coords:s});this.textures[o]={url:l,filtering:this.filtering,coords:s}}return this.textures[o]}}])}(NetworkTileSource),ArrayUtils;DataSource.register(RasterTileSource,"Raster");var ArrayUtils$1=ArrayUtils={};function simplify(e,n,r,o){for(var s,l=o,h=r-n>>1,p=r-n,d=e[n],g=e[n+1],y=e[r],v=e[r+1],_=n+3;_<r;_+=3){var w=getSqSegDist(e[_],e[_+1],d,g,y,v);if(w>l)s=_,l=w;else if(w===l){var I=Math.abs(_-h);I<p&&(s=_,p=I)}}l>o&&(s-n>3&&simplify(e,n,s,o),e[s+2]=l,r-s>3&&simplify(e,s,r,o))}function getSqSegDist(e,n,r,o,s,l){var h=s-r,p=l-o;if(h!==0||p!==0){var d=((e-r)*h+(n-o)*p)/(h*h+p*p);d>1?(r=s,o=l):d>0&&(r+=h*d,o+=p*d)}return(h=e-r)*h+(p=n-o)*p}function createFeature(e,n,r,o){var s={id:e===void 0?null:e,type:n,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return calcBBox(s),s}function calcBBox(e){var n=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")calcLineBBox(e,n);else if(r==="Polygon"||r==="MultiLineString")for(var o=0;o<n.length;o++)calcLineBBox(e,n[o]);else if(r==="MultiPolygon")for(o=0;o<n.length;o++)for(var s=0;s<n[o].length;s++)calcLineBBox(e,n[o][s])}function calcLineBBox(e,n){for(var r=0;r<n.length;r+=3)e.minX=Math.min(e.minX,n[r]),e.minY=Math.min(e.minY,n[r+1]),e.maxX=Math.max(e.maxX,n[r]),e.maxY=Math.max(e.maxY,n[r+1])}function convert(e,n){var r=[];if(e.type==="FeatureCollection")for(var o=0;o<e.features.length;o++)convertFeature(r,e.features[o],n,o);else e.type==="Feature"?convertFeature(r,e,n):convertFeature(r,{geometry:e},n);return r}function convertFeature(e,n,r,o){if(n.geometry){var s=n.geometry.coordinates,l=n.geometry.type,h=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),p=[],d=n.id;if(r.promoteId?d=n.properties[r.promoteId]:r.generateId&&(d=o||0),l==="Point")convertPoint(s,p);else if(l==="MultiPoint")for(var g=0;g<s.length;g++)convertPoint(s[g],p);else if(l==="LineString")convertLine(s,p,h,!1);else if(l==="MultiLineString"){if(r.lineMetrics){for(g=0;g<s.length;g++)p=[],convertLine(s[g],p,h,!1),e.push(createFeature(d,"LineString",p,n.properties));return}convertLines(s,p,h,!1)}else if(l==="Polygon")convertLines(s,p,h,!0);else{if(l!=="MultiPolygon"){if(l==="GeometryCollection"){for(g=0;g<n.geometry.geometries.length;g++)convertFeature(e,{id:d,geometry:n.geometry.geometries[g],properties:n.properties},r,o);return}throw new Error("Input data is not a valid GeoJSON object.")}for(g=0;g<s.length;g++){var y=[];convertLines(s[g],y,h,!0),p.push(y)}}e.push(createFeature(d,l,p,n.properties))}}function convertPoint(e,n){n.push(projectX(e[0])),n.push(projectY(e[1])),n.push(0)}function convertLine(e,n,r,o){for(var s,l,h=0,p=0;p<e.length;p++){var d=projectX(e[p][0]),g=projectY(e[p][1]);n.push(d),n.push(g),n.push(0),p>0&&(h+=o?(s*g-d*l)/2:Math.sqrt(Math.pow(d-s,2)+Math.pow(g-l,2))),s=d,l=g}var y=n.length-3;n[2]=1,simplify(n,0,y,r),n[y+2]=1,n.size=Math.abs(h),n.start=0,n.end=n.size}function convertLines(e,n,r,o){for(var s=0;s<e.length;s++){var l=[];convertLine(e[s],l,r,o),n.push(l)}}function projectX(e){return e/360+.5}function projectY(e){var n=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return r<0?0:r>1?1:r}function clip(e,n,r,o,s,l,h,p){if(o/=n,l>=(r/=n)&&h<o)return e;if(h<r||l>=o)return null;for(var d=[],g=0;g<e.length;g++){var y=e[g],v=y.geometry,_=y.type,w=s===0?y.minX:y.minY,I=s===0?y.maxX:y.maxY;if(w>=r&&I<o)d.push(y);else if(!(I<r||w>=o)){var G=[];if(_==="Point"||_==="MultiPoint")clipPoints(v,G,r,o,s);else if(_==="LineString")clipLine(v,G,r,o,s,!1,p.lineMetrics);else if(_==="MultiLineString")clipLines(v,G,r,o,s,!1);else if(_==="Polygon")clipLines(v,G,r,o,s,!0);else if(_==="MultiPolygon")for(var _t=0;_t<v.length;_t++){var _r=[];clipLines(v[_t],_r,r,o,s,!0),_r.length&&G.push(_r)}if(G.length){if(p.lineMetrics&&_==="LineString"){for(_t=0;_t<G.length;_t++)d.push(createFeature(y.id,_,G[_t],y.tags));continue}_!=="LineString"&&_!=="MultiLineString"||(G.length===1?(_="LineString",G=G[0]):_="MultiLineString"),_!=="Point"&&_!=="MultiPoint"||(_=G.length===3?"Point":"MultiPoint"),d.push(createFeature(y.id,_,G,y.tags))}}}return d.length?d:null}function clipPoints(e,n,r,o,s){for(var l=0;l<e.length;l+=3){var h=e[l+s];h>=r&&h<=o&&(n.push(e[l]),n.push(e[l+1]),n.push(e[l+2]))}}function clipLine(e,n,r,o,s,l,h){for(var p,d,g=newSlice(e),y=s===0?intersectX:intersectY,v=e.start,_=0;_<e.length-3;_+=3){var w=e[_],I=e[_+1],G=e[_+2],_t=e[_+3],_r=e[_+4],_o=s===0?w:I,Ca=s===0?_t:_r,_a=!1;h&&(p=Math.sqrt(Math.pow(w-_t,2)+Math.pow(I-_r,2))),_o<r?Ca>r&&(d=y(g,w,I,_t,_r,r),h&&(g.start=v+p*d)):_o>o?Ca<o&&(d=y(g,w,I,_t,_r,o),h&&(g.start=v+p*d)):addPoint(g,w,I,G),Ca<r&&_o>=r&&(d=y(g,w,I,_t,_r,r),_a=!0),Ca>o&&_o<=o&&(d=y(g,w,I,_t,_r,o),_a=!0),!l&&_a&&(h&&(g.end=v+p*d),n.push(g),g=newSlice(e)),h&&(v+=p)}var _l=e.length-3;w=e[_l],I=e[_l+1],G=e[_l+2],(_o=s===0?w:I)>=r&&_o<=o&&addPoint(g,w,I,G),_l=g.length-3,l&&_l>=3&&(g[_l]!==g[0]||g[_l+1]!==g[1])&&addPoint(g,g[0],g[1],g[2]),g.length&&n.push(g)}function newSlice(e){var n=[];return n.size=e.size,n.start=e.start,n.end=e.end,n}function clipLines(e,n,r,o,s,l){for(var h=0;h<e.length;h++)clipLine(e[h],n,r,o,s,l,!1)}function addPoint(e,n,r,o){e.push(n),e.push(r),e.push(o)}function intersectX(e,n,r,o,s,l){var h=(l-n)/(o-n);return e.push(l),e.push(r+(s-r)*h),e.push(1),h}function intersectY(e,n,r,o,s,l){var h=(l-r)/(s-r);return e.push(n+(o-n)*h),e.push(l),e.push(1),h}function wrap$1(e,n){var r=n.buffer/n.extent,o=e,s=clip(e,1,-1-r,r,0,-1,2,n),l=clip(e,1,1-r,2+r,0,-1,2,n);return(s||l)&&(o=clip(e,1,-r,1+r,0,-1,2,n)||[],s&&(o=shiftFeatureCoords(s,1).concat(o)),l&&(o=o.concat(shiftFeatureCoords(l,-1)))),o}function shiftFeatureCoords(e,n){for(var r=[],o=0;o<e.length;o++){var s,l=e[o],h=l.type;if(h==="Point"||h==="MultiPoint"||h==="LineString")s=shiftCoords(l.geometry,n);else if(h==="MultiLineString"||h==="Polygon"){s=[];for(var p=0;p<l.geometry.length;p++)s.push(shiftCoords(l.geometry[p],n))}else if(h==="MultiPolygon")for(s=[],p=0;p<l.geometry.length;p++){for(var d=[],g=0;g<l.geometry[p].length;g++)d.push(shiftCoords(l.geometry[p][g],n));s.push(d)}r.push(createFeature(l.id,h,s,l.tags))}return r}function shiftCoords(e,n){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+n,e[o+1],e[o+2]);return r}function transformTile(e,n){if(e.transformed)return e;var r,o,s,l=1<<e.z,h=e.x,p=e.y;for(r=0;r<e.features.length;r++){var d=e.features[r],g=d.geometry,y=d.type;if(d.geometry=[],y===1)for(o=0;o<g.length;o+=2)d.geometry.push(transformPoint(g[o],g[o+1],n,l,h,p));else for(o=0;o<g.length;o++){var v=[];for(s=0;s<g[o].length;s+=2)v.push(transformPoint(g[o][s],g[o][s+1],n,l,h,p));d.geometry.push(v)}}return e.transformed=!0,e}function transformPoint(e,n,r,o,s,l){return[Math.round(r*(e*o-s)),Math.round(r*(n*o-l))]}function createTile(e,n,r,o,s){for(var l=n===s.maxZoom?0:s.tolerance/((1<<n)*s.extent),h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},p=0;p<e.length;p++){h.numFeatures++,addFeature(h,e[p],l,s);var d=e[p].minX,g=e[p].minY,y=e[p].maxX,v=e[p].maxY;d<h.minX&&(h.minX=d),g<h.minY&&(h.minY=g),y>h.maxX&&(h.maxX=y),v>h.maxY&&(h.maxY=v)}return h}function addFeature(e,n,r,o){var s=n.geometry,l=n.type,h=[];if(l==="Point"||l==="MultiPoint")for(var p=0;p<s.length;p+=3)h.push(s[p]),h.push(s[p+1]),e.numPoints++,e.numSimplified++;else if(l==="LineString")addLine(h,s,e,r,!1,!1);else if(l==="MultiLineString"||l==="Polygon")for(p=0;p<s.length;p++)addLine(h,s[p],e,r,l==="Polygon",p===0);else if(l==="MultiPolygon")for(var d=0;d<s.length;d++){var g=s[d];for(p=0;p<g.length;p++)addLine(h,g[p],e,r,!0,p===0)}if(h.length){var y=n.tags||null;if(l==="LineString"&&o.lineMetrics){for(var v in y={},n.tags)y[v]=n.tags[v];y.mapbox_clip_start=s.start/s.size,y.mapbox_clip_end=s.end/s.size}var _={geometry:h,type:l==="Polygon"||l==="MultiPolygon"?3:l==="LineString"||l==="MultiLineString"?2:1,tags:y};n.id!==null&&(_.id=n.id),e.features.push(_)}}function addLine(e,n,r,o,s,l){var h=o*o;if(o>0&&n.size<(s?h:o))r.numPoints+=n.length/3;else{for(var p=[],d=0;d<n.length;d+=3)(o===0||n[d+2]>h)&&(r.numSimplified++,p.push(n[d]),p.push(n[d+1])),r.numPoints++;s&&rewind(p,l),e.push(p)}}function rewind(e,n){for(var r=0,o=0,s=e.length,l=s-2;o<s;l=o,o+=2)r+=(e[o]-e[l])*(e[o+1]+e[l+1]);if(r>0===n)for(o=0,s=e.length;o<s/2;o+=2){var h=e[o],p=e[o+1];e[o]=e[s-2-o],e[o+1]=e[s-1-o],e[s-2-o]=h,e[s-1-o]=p}}ArrayUtils.deepClone=function(e){return Array.isArray(e)?e.map(ArrayUtils.deepClone):e};var defaults={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1};function createGeoJsonTile(e,n,r,o,s){var l=Object.assign({},defaults,s),h=convert(e,l),p=getBBox(h=wrap$1(h,l)),d=p.minX,g=p.minY,y=p.maxX,v=p.maxY,_=1<<n,w=l.buffer/l.extent,I=1+w;return h=clip(h,_,r-w,r+I,0,d,y,l)||[],transformTile(createTile(h=clip(h,_,o-w,o+I,1,g,v,l)||[],n,r,o,l),l.extent)}function getBBox(e){var n,r=2,o=-1,s=1,l=0,h=_createForOfIteratorHelper(e);try{for(h.s();!(n=h.n()).done;){var p=n.value;p.minX<r&&(r=p.minX),p.maxX>o&&(o=p.maxX),p.minY<s&&(s=p.minY),p.maxY>l&&(l=p.maxY)}}catch(d){h.e(d)}finally{h.f()}return{minX:r,maxX:o,minY:s,maxY:l}}function PackingSmith$1(e,n){this.items=[],this.algorithm=e;var r=(n=n||{}).sort===void 0||n.sort;this.sort=r}PackingSmith$1.prototype={addItem:function(e){this.items.push(e)},normalizeCoordinates:function(){var e=this.items,n=1/0,r=1/0;e.forEach(function(o){var s=o;n=Math.min(n,s.x),r=Math.min(r,s.y)}),e.forEach(function(o){var s=o;s.x-=n,s.y-=r})},getStats:function(){var e=this.items.map(function(l){return l}),n=e.map(function(l){return l.x}),r=e.map(function(l){return l.y}),o=e.map(function(l){return l.x+l.width}),s=e.map(function(l){return l.y+l.height});return{minX:Math.max.apply(Math,n),minY:Math.max.apply(Math,r),maxX:Math.max.apply(Math,o),maxY:Math.max.apply(Math,s)}},getItems:function(){return this.items},processItems:function(){var e=this.items;return this.sort&&(e=this.algorithm.sort(e)),e=this.algorithm.placeItems(e),this.items=e,e},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var e=this.exportItems(),n=this.getStats();return{height:n.maxY,width:n.maxX,items:e}}};var packing_smith=PackingSmith$1,lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)lookup[n]=e[n],revLookup[e.charCodeAt(n)]=n;revLookup[45]=62,revLookup[95]=63}function toByteArray(e){var n,r,o,s,l,h;inited||init();var p=e.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l=e[p-2]==="="?2:e[p-1]==="="?1:0,h=new Arr(3*p/4-l),o=l>0?p-4:p;var d=0;for(n=0,r=0;n<o;n+=4,r+=3)s=revLookup[e.charCodeAt(n)]<<18|revLookup[e.charCodeAt(n+1)]<<12|revLookup[e.charCodeAt(n+2)]<<6|revLookup[e.charCodeAt(n+3)],h[d++]=s>>16&255,h[d++]=s>>8&255,h[d++]=255&s;return l===2?(s=revLookup[e.charCodeAt(n)]<<2|revLookup[e.charCodeAt(n+1)]>>4,h[d++]=255&s):l===1&&(s=revLookup[e.charCodeAt(n)]<<10|revLookup[e.charCodeAt(n+1)]<<4|revLookup[e.charCodeAt(n+2)]>>2,h[d++]=s>>8&255,h[d++]=255&s),h}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,n,r){for(var o,s=[],l=n;l<r;l+=3)o=(e[l]<<16)+(e[l+1]<<8)+e[l+2],s.push(tripletToBase64(o));return s.join("")}function fromByteArray(e){var n;inited||init();for(var r=e.length,o=r%3,s="",l=[],h=16383,p=0,d=r-o;p<d;p+=h)l.push(encodeChunk(e,p,p+h>d?d:p+h));return o===1?(n=e[r-1],s+=lookup[n>>2],s+=lookup[n<<4&63],s+="=="):o===2&&(n=(e[r-2]<<8)+e[r-1],s+=lookup[n>>10],s+=lookup[n>>4&63],s+=lookup[n<<2&63],s+="="),l.push(s),l.join("")}function read(e,n,r,o,s){var l,h,p=8*s-o-1,d=(1<<p)-1,g=d>>1,y=-7,v=r?s-1:0,_=r?-1:1,w=e[n+v];for(v+=_,l=w&(1<<-y)-1,w>>=-y,y+=p;y>0;l=256*l+e[n+v],v+=_,y-=8);for(h=l&(1<<-y)-1,l>>=-y,y+=o;y>0;h=256*h+e[n+v],v+=_,y-=8);if(l===0)l=1-g;else{if(l===d)return h?NaN:1/0*(w?-1:1);h+=Math.pow(2,o),l-=g}return(w?-1:1)*h*Math.pow(2,l-o)}function write(e,n,r,o,s,l){var h,p,d,g=8*l-s-1,y=(1<<g)-1,v=y>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=o?0:l-1,I=o?1:-1,G=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(p=isNaN(n)?1:0,h=y):(h=Math.floor(Math.log(n)/Math.LN2),n*(d=Math.pow(2,-h))<1&&(h--,d*=2),(n+=h+v>=1?_/d:_*Math.pow(2,1-v))*d>=2&&(h++,d/=2),h+v>=y?(p=0,h=y):h+v>=1?(p=(n*d-1)*Math.pow(2,s),h+=v):(p=n*Math.pow(2,v-1)*Math.pow(2,s),h=0));s>=8;e[r+w]=255&p,w+=I,p/=256,s-=8);for(h=h<<s|p,g+=s;g>0;e[r+w]=255&h,w+=I,h/=256,g-=8);e[r+w-I]|=128*G}var toString={}.toString,isArray$1=Array.isArray||function(e){return toString.call(e)=="[object Array]"},INSPECT_MAX_BYTES=50;function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,n){if(kMaxLength()<n)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n)).__proto__=Buffer.prototype:(e===null&&(e=new Buffer(n)),e.length=n),e}function Buffer(e,n,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,n,r);if(typeof e=="number"){if(typeof n=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,n,r)}function from(e,n,r,o){if(typeof n=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer?fromArrayBuffer(e,n,r,o):typeof n=="string"?fromString(e,n,r):fromObject(e,n)}function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,n,r,o){return assertSize(n),n<=0?createBuffer(e,n):r!==void 0?typeof o=="string"?createBuffer(e,n).fill(r,o):createBuffer(e,n).fill(r):createBuffer(e,n)}function allocUnsafe(e,n){if(assertSize(n),e=createBuffer(e,n<0?0:0|checked(n)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)e[r]=0;return e}function fromString(e,n,r){if(typeof r=="string"&&r!==""||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|byteLength(n,r),s=(e=createBuffer(e,o)).write(n,r);return s!==o&&(e=e.slice(0,s)),e}function fromArrayLike(e,n){var r=n.length<0?0:0|checked(n.length);e=createBuffer(e,r);for(var o=0;o<r;o+=1)e[o]=255&n[o];return e}function fromArrayBuffer(e,n,r,o){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return n=r===void 0&&o===void 0?new Uint8Array(n):o===void 0?new Uint8Array(n,r):new Uint8Array(n,r,o),Buffer.TYPED_ARRAY_SUPPORT?(e=n).__proto__=Buffer.prototype:e=fromArrayLike(e,n),e}function fromObject(e,n){if(internalIsBuffer(n)){var r=0|checked(n.length);return(e=createBuffer(e,r)).length===0||n.copy(e,0,0,r),e}if(n){if(typeof ArrayBuffer<"u"&&n.buffer instanceof ArrayBuffer||"length"in n)return typeof n.length!="number"||isnan(n.length)?createBuffer(e,0):fromArrayLike(e,n);if(n.type==="Buffer"&&isArray$1(n.data))return fromArrayLike(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function internalIsBuffer(e){return!(e==null||!e._isBuffer)}function byteLength(e,n){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(o)return utf8ToBytes(e).length;n=(""+n).toLowerCase(),o=!0}}function slowToString(e,n,r){var o=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,n,r);case"utf8":case"utf-8":return utf8Slice(this,n,r);case"ascii":return asciiSlice(this,n,r);case"latin1":case"binary":return latin1Slice(this,n,r);case"base64":return base64Slice(this,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,n,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function swap(e,n,r){var o=e[n];e[n]=e[r],e[r]=o}function bidirectionalIndexOf(e,n,r,o,s){if(e.length===0)return-1;if(typeof r=="string"?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if(typeof n=="string"&&(n=Buffer.from(n,o)),internalIsBuffer(n))return n.length===0?-1:arrayIndexOf(e,n,r,o,s);if(typeof n=="number")return n&=255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):arrayIndexOf(e,[n],r,o,s);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,n,r,o,s){var l,h=1,p=e.length,d=n.length;if(o!==void 0&&((o=String(o).toLowerCase())==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(e.length<2||n.length<2)return-1;h=2,p/=2,d/=2,r/=2}function g(w,I){return h===1?w[I]:w.readUInt16BE(I*h)}if(s){var y=-1;for(l=r;l<p;l++)if(g(e,l)===g(n,y===-1?0:l-y)){if(y===-1&&(y=l),l-y+1===d)return y*h}else y!==-1&&(l-=l-y),y=-1}else for(r+d>p&&(r=p-d),l=r;l>=0;l--){for(var v=!0,_=0;_<d;_++)if(g(e,l+_)!==g(n,_)){v=!1;break}if(v)return l}return-1}function hexWrite(e,n,r,o){r=Number(r)||0;var s=e.length-r;o?(o=Number(o))>s&&(o=s):o=s;var l=n.length;if(l%2!=0)throw new TypeError("Invalid hex string");o>l/2&&(o=l/2);for(var h=0;h<o;++h){var p=parseInt(n.substr(2*h,2),16);if(isNaN(p))return h;e[r+h]=p}return h}function utf8Write(e,n,r,o){return blitBuffer(utf8ToBytes(n,e.length-r),e,r,o)}function asciiWrite(e,n,r,o){return blitBuffer(asciiToBytes(n),e,r,o)}function latin1Write(e,n,r,o){return asciiWrite(e,n,r,o)}function base64Write(e,n,r,o){return blitBuffer(base64ToBytes(n),e,r,o)}function ucs2Write(e,n,r,o){return blitBuffer(utf16leToBytes(n,e.length-r),e,r,o)}function base64Slice(e,n,r){return n===0&&r===e.length?fromByteArray(e):fromByteArray(e.slice(n,r))}function utf8Slice(e,n,r){r=Math.min(e.length,r);for(var o=[],s=n;s<r;){var l,h,p,d,g=e[s],y=null,v=g>239?4:g>223?3:g>191?2:1;if(s+v<=r)switch(v){case 1:g<128&&(y=g);break;case 2:(192&(l=e[s+1]))==128&&(d=(31&g)<<6|63&l)>127&&(y=d);break;case 3:l=e[s+1],h=e[s+2],(192&l)==128&&(192&h)==128&&(d=(15&g)<<12|(63&l)<<6|63&h)>2047&&(d<55296||d>57343)&&(y=d);break;case 4:l=e[s+1],h=e[s+2],p=e[s+3],(192&l)==128&&(192&h)==128&&(192&p)==128&&(d=(15&g)<<18|(63&l)<<12|(63&h)<<6|63&p)>65535&&d<1114112&&(y=d)}y===null?(y=65533,v=1):y>65535&&(y-=65536,o.push(y>>>10&1023|55296),y=56320|1023&y),o.push(y),s+=v}return decodeCodePointsArray(o)}Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT===void 0||global$1.TYPED_ARRAY_SUPPORT,kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,n,r){return from(null,e,n,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]),Buffer.alloc=function(e,n,r){return alloc(null,e,n,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=isBuffer,Buffer.compare=function(e,n){if(!internalIsBuffer(e)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,s=0,l=Math.min(r,o);s<l;++s)if(e[s]!==n[s]){r=e[s],o=n[s];break}return r<o?-1:o<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,n){if(!isArray$1(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);var r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var o=Buffer.allocUnsafe(n),s=0;for(r=0;r<e.length;++r){var l=e[r];if(!internalIsBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(o,s),s+=l.length}return o},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)swap(this,n,n+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return e===0?"":arguments.length===0?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||Buffer.compare(this,e)===0},Buffer.prototype.inspect=function(){var e="",n=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,n,r,o,s){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),r===void 0&&(r=e?e.length:0),o===void 0&&(o=0),s===void 0&&(s=this.length),n<0||r>e.length||o<0||s>this.length)throw new RangeError("out of range index");if(o>=s&&n>=r)return 0;if(o>=s)return-1;if(n>=r)return 1;if(this===e)return 0;for(var l=(s>>>=0)-(o>>>=0),h=(r>>>=0)-(n>>>=0),p=Math.min(l,h),d=this.slice(o,s),g=e.slice(n,r),y=0;y<p;++y)if(d[y]!==g[y]){l=d[y],h=g[y];break}return l<h?-1:h<l?1:0},Buffer.prototype.includes=function(e,n,r){return this.indexOf(e,n,r)!==-1},Buffer.prototype.indexOf=function(e,n,r){return bidirectionalIndexOf(this,e,n,r,!0)},Buffer.prototype.lastIndexOf=function(e,n,r){return bidirectionalIndexOf(this,e,n,r,!1)},Buffer.prototype.write=function(e,n,r,o){if(n===void 0)o="utf8",r=this.length,n=0;else if(r===void 0&&typeof n=="string")o=n,r=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(r)?(r|=0,o===void 0&&(o="utf8")):(o=r,r=void 0)}var s=this.length-n;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var l=!1;;)switch(o){case"hex":return hexWrite(this,e,n,r);case"utf8":case"utf-8":return utf8Write(this,e,n,r);case"ascii":return asciiWrite(this,e,n,r);case"latin1":case"binary":return latin1Write(this,e,n,r);case"base64":return base64Write(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,n,r);default:if(l)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),l=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var n=e.length;if(n<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",o=0;o<n;)r+=String.fromCharCode.apply(String,e.slice(o,o+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,n,r){var o="";r=Math.min(e.length,r);for(var s=n;s<r;++s)o+=String.fromCharCode(127&e[s]);return o}function latin1Slice(e,n,r){var o="";r=Math.min(e.length,r);for(var s=n;s<r;++s)o+=String.fromCharCode(e[s]);return o}function hexSlice(e,n,r){var o=e.length;(!n||n<0)&&(n=0),(!r||r<0||r>o)&&(r=o);for(var s="",l=n;l<r;++l)s+=toHex(e[l]);return s}function utf16leSlice(e,n,r){for(var o=e.slice(n,r),s="",l=0;l<o.length;l+=2)s+=String.fromCharCode(o[l]+256*o[l+1]);return s}function checkOffset(e,n,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+n>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,n,r,o,s,l){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>s||n<l)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,n,r,o){n<0&&(n=65535+n+1);for(var s=0,l=Math.min(e.length-r,2);s<l;++s)e[r+s]=(n&255<<8*(o?s:1-s))>>>8*(o?s:1-s)}function objectWriteUInt32(e,n,r,o){n<0&&(n=4294967295+n+1);for(var s=0,l=Math.min(e.length-r,4);s<l;++s)e[r+s]=n>>>8*(o?s:3-s)&255}function checkIEEE754(e,n,r,o,s,l){if(r+o>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,n,r,o,s){return s||checkIEEE754(e,n,r,4),write(e,n,r,o,23,4),r+4}function writeDouble(e,n,r,o,s){return s||checkIEEE754(e,n,r,8),write(e,n,r,o,52,8),r+8}Buffer.prototype.slice=function(e,n){var r,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(n=n===void 0?o:~~n)<0?(n+=o)<0&&(n=0):n>o&&(n=o),n<e&&(n=e),Buffer.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,n)).__proto__=Buffer.prototype;else{var s=n-e;r=new Buffer(s,void 0);for(var l=0;l<s;++l)r[l]=this[l+e]}return r},Buffer.prototype.readUIntLE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var o=this[e],s=1,l=0;++l<n&&(s*=256);)o+=this[e+l]*s;return o},Buffer.prototype.readUIntBE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var o=this[e+--n],s=1;n>0&&(s*=256);)o+=this[e+--n]*s;return o},Buffer.prototype.readUInt8=function(e,n){return n||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,n){return n||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,n){return n||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,n){return n||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,n){return n||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var o=this[e],s=1,l=0;++l<n&&(s*=256);)o+=this[e+l]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*n)),o},Buffer.prototype.readIntBE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var o=n,s=1,l=this[e+--o];o>0&&(s*=256);)l+=this[e+--o]*s;return l>=(s*=128)&&(l-=Math.pow(2,8*n)),l},Buffer.prototype.readInt8=function(e,n){return n||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,n){n||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,n){n||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,n){return n||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,n){return n||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,n){return n||checkOffset(e,4,this.length),read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,n){return n||checkOffset(e,4,this.length),read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,n){return n||checkOffset(e,8,this.length),read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,n){return n||checkOffset(e,8,this.length),read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,n,r,o){e=+e,n|=0,r|=0,o||checkInt(this,e,n,r,Math.pow(2,8*r)-1,0);var s=1,l=0;for(this[n]=255&e;++l<r&&(s*=256);)this[n+l]=e/s&255;return n+r},Buffer.prototype.writeUIntBE=function(e,n,r,o){e=+e,n|=0,r|=0,o||checkInt(this,e,n,r,Math.pow(2,8*r)-1,0);var s=r-1,l=1;for(this[n+s]=255&e;--s>=0&&(l*=256);)this[n+s]=e/l&255;return n+r},Buffer.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},Buffer.prototype.writeUInt16LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2},Buffer.prototype.writeUInt16BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):objectWriteUInt16(this,e,n,!1),n+2},Buffer.prototype.writeUInt32LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):objectWriteUInt32(this,e,n,!0),n+4},Buffer.prototype.writeUInt32BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):objectWriteUInt32(this,e,n,!1),n+4},Buffer.prototype.writeIntLE=function(e,n,r,o){if(e=+e,n|=0,!o){var s=Math.pow(2,8*r-1);checkInt(this,e,n,r,s-1,-s)}var l=0,h=1,p=0;for(this[n]=255&e;++l<r&&(h*=256);)e<0&&p===0&&this[n+l-1]!==0&&(p=1),this[n+l]=(e/h|0)-p&255;return n+r},Buffer.prototype.writeIntBE=function(e,n,r,o){if(e=+e,n|=0,!o){var s=Math.pow(2,8*r-1);checkInt(this,e,n,r,s-1,-s)}var l=r-1,h=1,p=0;for(this[n+l]=255&e;--l>=0&&(h*=256);)e<0&&p===0&&this[n+l+1]!==0&&(p=1),this[n+l]=(e/h|0)-p&255;return n+r},Buffer.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},Buffer.prototype.writeInt16LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2},Buffer.prototype.writeInt16BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):objectWriteUInt16(this,e,n,!1),n+2},Buffer.prototype.writeInt32LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):objectWriteUInt32(this,e,n,!0),n+4},Buffer.prototype.writeInt32BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):objectWriteUInt32(this,e,n,!1),n+4},Buffer.prototype.writeFloatLE=function(e,n,r){return writeFloat(this,e,n,!0,r)},Buffer.prototype.writeFloatBE=function(e,n,r){return writeFloat(this,e,n,!1,r)},Buffer.prototype.writeDoubleLE=function(e,n,r){return writeDouble(this,e,n,!0,r)},Buffer.prototype.writeDoubleBE=function(e,n,r){return writeDouble(this,e,n,!1,r)},Buffer.prototype.copy=function(e,n,r,o){if(r||(r=0),o||o===0||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<r&&(o=r),o===r||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var s,l=o-r;if(this===e&&r<n&&n<o)for(s=l-1;s>=0;--s)e[s+n]=this[s+r];else if(l<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(s=0;s<l;++s)e[s+n]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+l),n);return l},Buffer.prototype.fill=function(e,n,r,o){if(typeof e=="string"){if(typeof n=="string"?(o=n,n=0,r=this.length):typeof r=="string"&&(o=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof e=="number"&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var l;if(n>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0),typeof e=="number")for(l=n;l<r;++l)this[l]=e;else{var h=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,o).toString()),p=h.length;for(l=0;l<r-n;++l)this[l+n]=h[l%p]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,n){var r;n=n||1/0;for(var o=e.length,s=null,l=[],h=0;h<o;++h){if((r=e.charCodeAt(h))>55295&&r<57344){if(!s){if(r>56319){(n-=3)>-1&&l.push(239,191,189);continue}if(h+1===o){(n-=3)>-1&&l.push(239,191,189);continue}s=r;continue}if(r<56320){(n-=3)>-1&&l.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(n-=3)>-1&&l.push(239,191,189);if(s=null,r<128){if((n-=1)<0)break;l.push(r)}else if(r<2048){if((n-=2)<0)break;l.push(r>>6|192,63&r|128)}else if(r<65536){if((n-=3)<0)break;l.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;l.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return l}function asciiToBytes(e){for(var n=[],r=0;r<e.length;++r)n.push(255&e.charCodeAt(r));return n}function utf16leToBytes(e,n){for(var r,o,s,l=[],h=0;h<e.length&&!((n-=2)<0);++h)o=(r=e.charCodeAt(h))>>8,s=r%256,l.push(s),l.push(o);return l}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,n,r,o){for(var s=0;s<o&&!(s+r>=n.length||s>=e.length);++s)n[s+r]=e[s];return s}function isnan(e){return e!=e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}global$1.setTimeout,global$1.clearTimeout;var performance$1=global$1.performance||{},inherits;performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow,inherits=typeof Object.create=="function"?function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e};var inherits$1=inherits;function inspect$1(e,n){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean$1(n)?r.showHidden=n:n&&_extend(r,n),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,n){var r=inspect$1.styles[n];return r?"\x1B["+inspect$1.colors[r][0]+"m"+e+"\x1B["+inspect$1.colors[r][1]+"m":e}function stylizeNoColor(e,n){return e}function arrayToHash(e){var n={};return e.forEach(function(r,o){n[r]=!0}),n}function formatValue(e,n,r){if(e.customInspect&&n&&isFunction(n.inspect)&&n.inspect!==inspect$1&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return isString(o)||(o=formatValue(e,o,r)),o}var s=formatPrimitive(e,n);if(s)return s;var l=Object.keys(n),h=arrayToHash(l);if(e.showHidden&&(l=Object.getOwnPropertyNames(n)),isError(n)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return formatError$1(n);if(l.length===0){if(isFunction(n)){var p=n.name?": "+n.name:"";return e.stylize("[Function"+p+"]","special")}if(isRegExp(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(isDate(n))return e.stylize(Date.prototype.toString.call(n),"date");if(isError(n))return formatError$1(n)}var d,g="",y=!1,v=["{","}"];return isArray(n)&&(y=!0,v=["[","]"]),isFunction(n)&&(g=" [Function"+(n.name?": "+n.name:"")+"]"),isRegExp(n)&&(g=" "+RegExp.prototype.toString.call(n)),isDate(n)&&(g=" "+Date.prototype.toUTCString.call(n)),isError(n)&&(g=" "+formatError$1(n)),l.length!==0||y&&n.length!=0?r<0?isRegExp(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),d=y?formatArray(e,n,r,h,l):l.map(function(_){return formatProperty(e,n,r,h,_,y)}),e.seen.pop(),reduceToSingleString(d,g,v)):v[0]+g+v[1]}function formatPrimitive(e,n){if(isUndefined(n))return e.stylize("undefined","undefined");if(isString(n)){var r="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber(n)?e.stylize(""+n,"number"):isBoolean$1(n)?e.stylize(""+n,"boolean"):isNull$1(n)?e.stylize("null","null"):void 0}function formatError$1(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,n,r,o,s){for(var l=[],h=0,p=n.length;h<p;++h)hasOwnProperty(n,String(h))?l.push(formatProperty(e,n,r,o,String(h),!0)):l.push("");return s.forEach(function(d){d.match(/^\d+$/)||l.push(formatProperty(e,n,r,o,d,!0))}),l}function formatProperty(e,n,r,o,s,l){var h,p,d;if((d=Object.getOwnPropertyDescriptor(n,s)||{value:n[s]}).get?p=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(p=e.stylize("[Setter]","special")),hasOwnProperty(o,s)||(h="["+s+"]"),p||(e.seen.indexOf(d.value)<0?(p=isNull$1(r)?formatValue(e,d.value,null):formatValue(e,d.value,r-1)).indexOf(`
`)>-1&&(p=l?p.split(`
`).map(function(g){return"  "+g}).join(`
`).substr(2):`
`+p.split(`
`).map(function(g){return"   "+g}).join(`
`)):p=e.stylize("[Circular]","special")),isUndefined(h)){if(l&&s.match(/^\d+$/))return p;(h=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=e.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=e.stylize(h,"string"))}return h+": "+p}function reduceToSingleString(e,n,r){return e.reduce(function(o,s){return s.indexOf(`
`),o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(n===""?"":n+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+n+" "+e.join(", ")+" "+r[1]}function isArray(e){return Array.isArray(e)}function isBoolean$1(e){return typeof e=="boolean"}function isNull$1(e){return e===null}function isNumber(e){return typeof e=="number"}function isString(e){return typeof e=="string"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject$1(e)&&objectToString(e)==="[object RegExp]"}function isObject$1(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject$1(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject$1(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction(e){return typeof e=="function"}function isPrimitive(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||e===void 0}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,n){if(!n||!isObject$1(n))return e;for(var r=Object.keys(n),o=r.length;o--;)e[r[o]]=n[r[o]];return e}function hasOwnProperty(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function compare(e,n){if(e===n)return 0;for(var r=e.length,o=n.length,s=0,l=Math.min(r,o);s<l;++s)if(e[s]!==n[s]){r=e[s],o=n[s];break}return r<o?-1:o<r?1:0}inspect$1.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect$1.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var hasOwn=Object.prototype.hasOwnProperty,objectKeys=Object.keys||function(e){var n=[];for(var r in e)hasOwn.call(e,r)&&n.push(r);return n},pSlice=Array.prototype.slice,_functionsHaveNames;function functionsHaveNames(){return _functionsHaveNames!==void 0?_functionsHaveNames:_functionsHaveNames=(function(){}).name==="foo"}function pToString(e){return Object.prototype.toString.call(e)}function isView(e){return!isBuffer(e)&&typeof global$1.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}function assert$1(e,n){e||fail(e,!0,n,"==",ok)}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(isFunction(e)){if(functionsHaveNames())return e.name;var n=e.toString().match(regex);return n&&n[1]}}function AssertionError(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var n=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var o=r.stack,s=getName(n),l=o.indexOf(`
`+s);if(l>=0){var h=o.indexOf(`
`,l+1);o=o.substring(h+1)}this.stack=o}}}function truncate(e,n){return typeof e=="string"?e.length<n?e:e.slice(0,n):e}function inspect(e){if(functionsHaveNames()||!isFunction(e))return inspect$1(e);var n=getName(e);return"[Function"+(n?": "+n:"")+"]"}function getMessage(e){return truncate(inspect(e.actual),128)+" "+e.operator+" "+truncate(inspect(e.expected),128)}function fail(e,n,r,o,s){throw new AssertionError({message:r,actual:e,expected:n,operator:o,stackStartFunction:s})}function ok(e,n){e||fail(e,!0,n,"==",ok)}function equal(e,n,r){e!=n&&fail(e,n,r,"==",equal)}function notEqual(e,n,r){e==n&&fail(e,n,r,"!=",notEqual)}function deepEqual(e,n,r){_deepEqual(e,n,!1)||fail(e,n,r,"deepEqual",deepEqual)}function deepStrictEqual(e,n,r){_deepEqual(e,n,!0)||fail(e,n,r,"deepStrictEqual",deepStrictEqual)}function _deepEqual(e,n,r,o){if(e===n)return!0;if(isBuffer(e)&&isBuffer(n))return compare(e,n)===0;if(isDate(e)&&isDate(n))return e.getTime()===n.getTime();if(isRegExp(e)&&isRegExp(n))return e.source===n.source&&e.global===n.global&&e.multiline===n.multiline&&e.lastIndex===n.lastIndex&&e.ignoreCase===n.ignoreCase;if(e!==null&&typeof e=="object"||n!==null&&typeof n=="object"){if(isView(e)&&isView(n)&&pToString(e)===pToString(n)&&!(e instanceof Float32Array||e instanceof Float64Array))return compare(new Uint8Array(e.buffer),new Uint8Array(n.buffer))===0;if(isBuffer(e)!==isBuffer(n))return!1;var s=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return s!==-1&&s===o.expected.indexOf(n)||(o.actual.push(e),o.expected.push(n),objEquiv(e,n,r,o))}return r?e===n:e==n}function isArguments(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function objEquiv(e,n,r,o){if(e==null||n==null)return!1;if(isPrimitive(e)||isPrimitive(n))return e===n;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(n))return!1;var s=isArguments(e),l=isArguments(n);if(s&&!l||!s&&l)return!1;if(s)return _deepEqual(e=pSlice.call(e),n=pSlice.call(n),r);var h,p,d=objectKeys(e),g=objectKeys(n);if(d.length!==g.length)return!1;for(d.sort(),g.sort(),p=d.length-1;p>=0;p--)if(d[p]!==g[p])return!1;for(p=d.length-1;p>=0;p--)if(!_deepEqual(e[h=d[p]],n[h],r,o))return!1;return!0}function notDeepEqual(e,n,r){_deepEqual(e,n,!1)&&fail(e,n,r,"notDeepEqual",notDeepEqual)}function notDeepStrictEqual(e,n,r){_deepEqual(e,n,!0)&&fail(e,n,r,"notDeepStrictEqual",notDeepStrictEqual)}function strictEqual(e,n,r){e!==n&&fail(e,n,r,"===",strictEqual)}function notStrictEqual(e,n,r){e===n&&fail(e,n,r,"!==",notStrictEqual)}function expectedException(e,n){if(!e||!n)return!1;if(Object.prototype.toString.call(n)=="[object RegExp]")return n.test(e);try{if(e instanceof n)return!0}catch{}return!Error.isPrototypeOf(n)&&n.call({},e)===!0}function _tryBlock(e){var n;try{e()}catch(r){n=r}return n}function _throws(e,n,r,o){var s;if(typeof n!="function")throw new TypeError('"block" argument must be a function');typeof r=="string"&&(o=r,r=null),s=_tryBlock(n),o=(r&&r.name?" ("+r.name+").":".")+(o?" "+o:"."),e&&!s&&fail(s,r,"Missing expected exception"+o);var l=typeof o=="string",h=!e&&s&&!r;if((!e&&isError(s)&&l&&expectedException(s,r)||h)&&fail(s,r,"Got unwanted exception"+o),e&&s&&r&&!expectedException(s,r)||!e&&s)throw s}function throws(e,n,r){_throws(!0,e,n,r)}function doesNotThrow(e,n,r){_throws(!1,e,n,r)}function ifError(e){if(e)throw e}assert$1.AssertionError=AssertionError,inherits$1(AssertionError,Error),assert$1.fail=fail,assert$1.ok=ok,assert$1.equal=equal,assert$1.notEqual=notEqual,assert$1.deepEqual=deepEqual,assert$1.deepStrictEqual=deepStrictEqual,assert$1.notDeepEqual=notDeepEqual,assert$1.notDeepStrictEqual=notDeepStrictEqual,assert$1.strictEqual=strictEqual,assert$1.notStrictEqual=notStrictEqual,assert$1.throws=throws,assert$1.doesNotThrow=doesNotThrow,assert$1.ifError=ifError;var assert$2=Object.freeze({__proto__:null,default:assert$1,AssertionError,fail,ok,assert:ok,equal,notEqual,deepEqual,deepStrictEqual,notDeepEqual,notDeepStrictEqual,strictEqual,notStrictEqual,throws,doesNotThrow,ifError}),require$$1=getAugmentedNamespace(assert$2),topDown_algorithm={},hasRequiredTopDown_algorithm;function requireTopDown_algorithm(){return hasRequiredTopDown_algorithm||(hasRequiredTopDown_algorithm=1,topDown_algorithm.sort=function(e){return e.sort(function(n,r){return n.height-r.height}),e},topDown_algorithm.placeItems=function(e){var n=0;return e.forEach(function(r){r.x=0,r.y=n,n+=r.height}),e}),topDown_algorithm}var leftRight_algorithm={},hasRequiredLeftRight_algorithm;function requireLeftRight_algorithm(){return hasRequiredLeftRight_algorithm||(hasRequiredLeftRight_algorithm=1,leftRight_algorithm.sort=function(e){return e.sort(function(n,r){return n.width-r.width}),e},leftRight_algorithm.placeItems=function(e){var n=0;return e.forEach(function(r){r.x=n,r.y=0,n+=r.width}),e}),leftRight_algorithm}var diagonal_algorithm={},hasRequiredDiagonal_algorithm;function requireDiagonal_algorithm(){return hasRequiredDiagonal_algorithm||(hasRequiredDiagonal_algorithm=1,diagonal_algorithm.sort=function(e){return e.sort(function(n,r){return Math.sqrt(Math.pow(n.height,2)+Math.pow(n.width,2))-Math.sqrt(Math.pow(r.height,2)+Math.pow(r.width,2))}),e},diagonal_algorithm.placeItems=function(e){var n=0,r=0;return e.forEach(function(o){o.x=n,o.y=r,n+=o.width,r+=o.height}),e}),diagonal_algorithm}var altDiagonal_algorithm={},hasRequiredAltDiagonal_algorithm;function requireAltDiagonal_algorithm(){return hasRequiredAltDiagonal_algorithm||(hasRequiredAltDiagonal_algorithm=1,altDiagonal_algorithm.sort=function(e){return e.sort(function(n,r){return Math.sqrt(Math.pow(n.height,2)+Math.pow(n.width,2))-Math.sqrt(Math.pow(r.height,2)+Math.pow(r.width,2))}),e},altDiagonal_algorithm.placeItems=function(e){var n=0,r=0;return e.forEach(function(o){var s=o.width;o.x=n-s,o.y=r,n-=s,r+=o.height}),e}),altDiagonal_algorithm}var binaryTree_algorithm={},packer_growing,hasRequiredPacker_growing,binPack,hasRequiredBinPack,hasRequiredBinaryTree_algorithm;function requirePacker_growing(){if(hasRequiredPacker_growing)return packer_growing;hasRequiredPacker_growing=1;var e=function(){};return e.prototype={fit:function(n){var r,o,s,l,h=n.length,p=h>0?n[0].width:0,d=h>0?n[0].height:0;for(this.root={x:0,y:0,width:p,height:d},r=0;r<h;r++)s=n[r],(o=this.findNode(this.root,s.width,s.height))?(l=this.splitNode(o,s.width,s.height),s.x=l.x,s.y=l.y):(l=this.growNode(s.width,s.height),s.x=l.x,s.y=l.y)},findNode:function(n,r,o){return n.used?this.findNode(n.right,r,o)||this.findNode(n.down,r,o):r<=n.width&&o<=n.height?n:null},splitNode:function(n,r,o){return n.used=!0,n.down={x:n.x,y:n.y+o,width:n.width,height:n.height-o},n.right={x:n.x+r,y:n.y,width:n.width-r,height:o},n},growNode:function(n,r){var o=n<=this.root.width,s=r<=this.root.height,l=s&&this.root.height>=this.root.width+n,h=o&&this.root.width>=this.root.height+r;return l?this.growRight(n,r):h?this.growDown(n,r):s?this.growRight(n,r):o?this.growDown(n,r):null},growRight:function(n,r){var o;return this.root={used:!0,x:0,y:0,width:this.root.width+n,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:n,height:this.root.height}},(o=this.findNode(this.root,n,r))?this.splitNode(o,n,r):null},growDown:function(n,r){var o;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+r,down:{x:0,y:this.root.height,width:this.root.width,height:r},right:this.root},(o=this.findNode(this.root,n,r))?this.splitNode(o,n,r):null}},packer_growing=e}function requireBinPack(){if(hasRequiredBinPack)return binPack;hasRequiredBinPack=1;var e=requirePacker_growing();return binPack=function(n,r){r=r||{};var o=new e,s=r.inPlace||!1,l=n.map(function(p){return s?p:{width:p.width,height:p.height,item:p}});l=l.sort(function(p,d){return d.width*d.height-p.width*p.height}),o.fit(l);var h={width:l.reduce(function(p,d){return Math.max(p,d.x+d.width)},0),height:l.reduce(function(p,d){return Math.max(p,d.y+d.height)},0)};return s||(h.items=l),h}}function requireBinaryTree_algorithm(){if(hasRequiredBinaryTree_algorithm)return binaryTree_algorithm;hasRequiredBinaryTree_algorithm=1;var e=requireBinPack();return binaryTree_algorithm.sort=function(n){return n},binaryTree_algorithm.placeItems=function(n){return e(n,{inPlace:!0}),n},binaryTree_algorithm}var PackingSmith=packing_smith,assert=require$$1,algorithms={};function Layout(e,n){var r=e||"top-down";return typeof r=="string"&&(r=algorithms[e],assert(r,"Sorry, the '"+e+"' algorithm could not be loaded.")),new PackingSmith(r,n)}function addAlgorithm(e,n){algorithms[e]=n}Layout.PackingSmith=PackingSmith,Layout.addAlgorithm=addAlgorithm,Layout.algorithms=algorithms,addAlgorithm("top-down",requireTopDown_algorithm()),addAlgorithm("left-right",requireLeftRight_algorithm()),addAlgorithm("diagonal",requireDiagonal_algorithm()),addAlgorithm("alt-diagonal",requireAltDiagonal_algorithm()),addAlgorithm("binary-tree",requireBinaryTree_algorithm());var layout=Layout,layout$1=getDefaultExportFromCjs(layout);function isTainting(e){var n;try{e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1)}catch(r){n=r.message}return n}function bitmapToCanvas(e,n,r){if(e instanceof HTMLImageElement){var o=e.ownerDocument.createElement("canvas");o.width=n,o.height=r,o.getContext("2d").drawImage(e,0,0,n,r),e=o}return e}var MAX_LNG_LAT=Geo$1.metersToLatLng([Geo$1.half_circumference_meters,Geo$1.half_circumference_meters]),TILE_EXPONENT=Math.log(Geo$1.tile_size)/Math.LN2,ICON_READY=1,DOM_MARKER_TYPE=8,GROUP_TYPE=16,TILE_MARGIN=100,AFFECTED_BBOX_CALC_THRESHOLD=10,ObjectSource=function(e){function n(r,o){var s;return _classCallCheck(this,n),s=_callSuper(this,n,[r,o]),Thread.is_worker&&(s._quad_tree=new ns.H.geo.QuadTree,s._marker_quad_tree=new ns.H.geo.QuadTree,s._tree_entries_by_object_id={},s._groups_by_id={},s._layersCache=new ns.H.util.Cache(100)),Thread.is_main&&(s._objects_by_id={},s._commands=[],s._sendCommands=debounce(s._sendCommands,100,200),s.dispatchUpdate=s.dispatchUpdate.bind(s)),s}return _inherits(n,e),_createClass(n,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var r,o,s=this.provider.getRootGroup(),l=s.getObjects(!0),h=[];for(l.push(s),r=l.length;r--;)o=l[r],this._isObjectSupported(o)&&this._shouldBeStored(o)&&(this._objects_by_id[o.getId()]=o,h.push(o.forWorkerMessage()));var p=[{method_name:"addObjects",arguments:[h]}];this._sendImmediateCommands(p)}},{key:"onProviderUpdate",value:function(r){var o=r.target,s=r.currentTarget.getInvalidations(o.type);if(this._isObjectSupported(o)){var l=this._synced_at,h=o.getId();if(s.isRemove(l))delete this._objects_by_id[h],this._commands.push({method_name:"removeObjectsByIds",arguments:[[h],!0]});else if(s.isAdd(l))this._shouldBeStored(o)&&(this._objects_by_id[h]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}));else if(s.isSpatial(l)||s.isZOrder(l)){if(this._shouldBeStored(o)){this._objects_by_id[h]=o;var p=[{method_name:"removeObjectsByIds",arguments:[[h],!0]},{method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}];this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(p):this._commands.push(p[0],p[1])}}else if(s.isVisual(l)){if(this._shouldBeStored(o)){this._objects_by_id[h]=o;var d={method_name:"updateObjectProperties",arguments:[o.forWorkerMessage()]};this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([d]):this._commands.push(d)}}else s.isVolatility(l)&&(delete this._objects_by_id[h],this._commands.push({method_name:"removeObjectsByIds",arguments:[[h],!0]}),this._shouldBeStored(o)&&(this._objects_by_id[h]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]})));this._commands.length&&this._sendCommands()}this._synced_at=s.getMark()}},{key:"_shouldBeStored",value:function(r){return r.type===GROUP_TYPE||(!r.getIcon||r.getIcon().getState()===ICON_READY)&&this._hasSameVolatility(r)}},{key:"_hasSameVolatility",value:function(r){return r.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return this._commands.length>0}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(r){r.length&&WorkerBroker.postMessage(this.worker,this.target_name+".executeCommands",r).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(r){return r.forWorkerMessage&&r.type!==DOM_MARKER_TYPE}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(r){return this._objects_by_id[r]}},{key:"getIconBitmapByObjectId",value:function(r,o){var s=this.getMapObjectById(r);if(s){var l=s.getIcon();if(l.uid===o&&l.getState()===ICON_READY){var h=l.getSize();return bitmapToCanvas(l.getBitmap(),h.w,h.h)}}}},{key:"_getRastersForMarkers",value:function(r){for(var o={},s=layout$1("binary-tree"),l=0;l<r.length;l++){var h=r[l],p=h.properties.icon;o[p.id]||(s.addItem({width:p.size.w,height:p.size.h,meta:{objectId:h.id,id:p.id}}),o[p.id]=!0)}return s.export()}},{key:"fetchFeaturesForTile",value:function(r){var o=[],s=[],l=[],h=[],p=[],d=this._marker_quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(r.coords,this.tile_size));r.source_data.error=null;for(var g=0;g<d.length;g++){var y={id:d[g].$feature$.id,properties:Object.assign({},d[g].$feature$.properties),geometry:{type:d[g].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(d[g].$feature$.geometry.coordinates)}};o.push(y)}d=this._quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(r.coords,this.tile_size,TILE_MARGIN));for(var v=0;v<d.length;v++){var _={id:d[v].$feature$.id,properties:Object.assign({},d[v].$feature$.properties),geometry:{type:d[v].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(d[v].$feature$.geometry.coordinates)}};if(_.properties.overlay)s.push(_);else if(_.geometry.type.includes("LineString"))l.push(_);else if(_.geometry.type.includes("Polygon")){h.push(_);var w={id:_.id,properties:_.properties,geometry:{type:_.geometry.type,coordinates:ArrayUtils$1.deepClone(_.geometry.coordinates)}};p.push(w)}}o.sort(n._compareZInfo),h.sort(n._compareZInfo),s.sort(n._compareZInfo);var I=this.has_volatile_data?4096:0;p.sort(n._compareZInfo);for(var G=0;G<p.length;G++)p[G].properties.effectiveZIdx=I++;l.sort(n._compareZInfo);for(var _t=0;_t<l.length;_t++)l[_t].properties.effectiveZIdx=I++;r.source_data.layers.markers={type:"FeatureCollection",features:o},r.source_data.layers.polylines={type:"FeatureCollection",features:l},r.source_data.layers.polygons={type:"FeatureCollection",features:h},r.source_data.layers.outlines={type:"FeatureCollection",features:p},r.source_data.layers.overlays={type:"FeatureCollection",features:s}}},{key:"tileTexture",value:function(r){var o=r.source_data.layers.overlays;if(o){var s=this.name+"_"+r.coords.key,l=Tile.coordinateWithMaxZoom(r.coords,this.max_zoom),h=o.features[0].properties.overlays_config;return{name:s,filtering:this.filtering,coords:l,width:Geo$1.tile_size,height:Geo$1.tile_size,overlays_config:h,source:this.name}}}},{key:"_load",value:function(r){var o=Geo$1.wrapTile(r.coords,{x:!0}),s=o.z,l=o.x,h=o.y,p="".concat(s,"_").concat(l,"_").concat(h),d=this._layersCache.get(p),g=!1;if(d)r.source_data.layers=d;else{this.fetchFeaturesForTile(r);var y={maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale},v=r.source_data.layers.overlays;v.features.length&&delete r.source_data.layers.overlays;var _=r.source_data.layers.markers;for(var w in _.features.length&&delete r.source_data.layers.markers,r.source_data.layers){var I=r.source_data.layers[w];if(I.features.length){y.buffer=w.includes("lines")?TILE_MARGIN*Geo$1.units_per_pixel:0;var G=createGeoJsonTile(I,s,l,h,y);r.source_data.layers[w]=parseGeoJSONVectorTile(G)}}r.source_data.layers.overlays=this._processOverlays(r,v);for(var _t=r.source_data.layers.overlays.features.length;_t--;)if(!r.source_data.layers.overlays.features[_t].id){g=!0,this._layersCache.drop(p);break}r.source_data.layers.markers=this._processMarkers(r,_),this._postProcessTile(r),g||this._layersCache.add(p,r.source_data.layers,1)}return r.rasters=this._getRastersForMarkers(r.source_data.layers.markers.features),Promise.resolve(r)}},{key:"_processMarkers",value:function(r,o){var s=o.features.length;if(s){for(var l=Geo$1.unitsPerMeter(r.coords.z),h=Geo$1.wrapTile(r.coords,{x:!0}),p=Geo$1.metersForTile(h),d=Geo$1.isLastTile(h),g=Geo$1.wrapMeters(r.min),y=Geo$1.wrapMeters(r.max),v=function(_r){DataSource.coordsToMeters(_r);var _o=_slicedToArray(_r,2),Ca=_o[0],_a=_o[1],_l=Ca>=g.x&&(d.column||Ca<y.x)&&_a>=y.y&&(d.row||!r.coords.y||_a<g.y);return DataSource.metersToTileUnits(l,p,_r),_l},_=[],w=0;w<s;w++){var I=o.features[w].geometry,G=!1;if(I.type==="Point"){var _t=I.coordinates;v(_t)?I.coordinates=_t:G=!0}else I.type==="MultiPoint"&&(I.coordinates=I.coordinates.filter(v),I.coordinates.length===0&&(G=!0));G||_.push(o.features[w])}o.features=_}return o}},{key:"_processOverlays",value:function(r,o){var s=this;if(!o.features.length)return o;var l={coords:r.coords,min:Geo$1.metersForTile(Geo$1.wrapTile(r.coords,{x:!0}))},h={coords:r.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:o.features}}}},p=Math.pow(2,r.coords.z+TILE_EXPONENT);MapsJsSource.projectData(h.source_data),MapsJsSource.scaleData(h.source_data,l);var d=o.features.map(function(y){var v=y.geometry.coordinates[0],_=v[0],w=v[v.length===5?2:3],I=Math.floor(_[0]/Geo$1.tile_scale*Geo$1.tile_size),G=Math.floor(_[1]/Geo$1.tile_scale*Geo$1.tile_size),_t=Math.floor(w[0]/Geo$1.tile_scale*Geo$1.tile_size),_r=Math.floor(w[1]/Geo$1.tile_scale*Geo$1.tile_size)-G,_o=I>=_t,Ca=_o?p-(I-_t):_t-I,_a=[];return I<=Geo$1.tile_size&&_a.push([I,G,Ca,_r]),_o&&_t>0&&_a.push([I-p,G,Ca,_r]),{id:y.id,properties:y.properties,texcoords:_a}}).filter(function(y){return s._isVisible(y.properties)&&s.isInMinMaxRange(y.properties,r.style_zoom)}),g=Geo$1.tile_scale;return r.pad_scale=this.pad_scale,r.default_winding="CW",o.features=d.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[g,0],[g,g],[0,g],[0,0]]]},properties:{overlays_config:d}}]:d,o}},{key:"executeCommands",value:function(r){for(var o,s=r.length<AFFECTED_BBOX_CALC_THRESHOLD,l=0;l<r.length;l++){var h=r[l];h.arguments.push(s);var p=this[h.method_name].apply(this,h.arguments);s&&(p&&o?o.mergeRect(p,!0,o):p&&(o=p))}return o?o.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(r){var o=r.geometry.boundingBox;return new ns.H.geo.Rect(MathUtils$1.clamp(o[0],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),o[1],MathUtils$1.clamp(o[2],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),o[3])}},{key:"addObjects",value:function(r){for(var o,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1],l=0;l<r.length;l++){var h=r[l];if(h.type==="Group")h.$children_ids$={},this._groups_by_id[h.id]=h;else{n._preprocessGeometry(h.geometry);var p=this._getClampedGeoRectForFeature(h);s&&(o?o.mergeRect(p,!0,o):o=p);var d=h.geometry.type.indexOf("Point")!==-1?this._marker_quad_tree:this._quad_tree,g=d.insertBoundingBox(p);g.$tree=d,g.$feature$=h,this._tree_entries_by_object_id[h.id]=g}}for(var y=0;y<r.length;y++){var v=r[y];v.properties.parent&&(this._groups_by_id[v.properties.parent].$children_ids$[v.id]=v.id),v.properties.ref={effectiveVisibility:this._isVisible(v.properties),zInfo:this._getZInfo([],v)}}return this._layersCache.removeAll(),o}},{key:"removeObjectsByIds",value:function(r,o){for(var s,l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],h=0;h<r.length;h++){var p=r[h],d=void 0,g=void 0;if(d=this._tree_entries_by_object_id[p]){if(l){var y=this._getClampedGeoRectForFeature(d.$feature$);s?s.mergeRect(y,!0,s):s=y}delete this._groups_by_id[d.$feature$.properties.parent].$children_ids$[p],d.$tree.remove(d),delete this._tree_entries_by_object_id[p]}else(g=this._groups_by_id[p])&&(g.properties.parent&&delete this._groups_by_id[g.properties.parent].$children_ids$[p],o&&this.removeObjectsByIds(Object.keys(g.$children_ids$),!0),delete this._groups_by_id[p])}return this._layersCache.removeAll(),s}},{key:"updateObjectProperties",value:function(r){var o,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return r.type==="Group"?(mergeObjects(this._groups_by_id[r.id].properties,r.properties),this._groups_by_id[r.id].properties.ref.effectiveVisibility=this._isVisible(r.properties)):(this._tree_entries_by_object_id[r.id]||this.addObjects([r]),mergeObjects(this._tree_entries_by_object_id[r.id].$feature$.properties,r.properties),this._tree_entries_by_object_id[r.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(r.properties),s&&(o=this._getClampedGeoRectForFeature(r))),o}},{key:"_getZInfo",value:function(r,o){var s=o.properties.zIdx,l=o.properties.sIdx;return r[0]|=s!==void 0,r.splice(1,0,s||0,l<0?o.id:l),o.properties.parent===0?r:this._getZInfo(r,this._groups_by_id[o.properties.parent])}},{key:"_isVisible",value:function(r){var o=r.visible,s=!r.parent||this._isVisible(this._groups_by_id[r.parent].properties);return o&&s}},{key:"isInMinMaxRange",value:function(r,o){var s=r.min<=o&&r.max>=o,l=!r.parent||this.isInMinMaxRange(this._groups_by_id[r.parent].properties,o);return s&&l}},{key:"dispose",value:function(){this._commands=[],_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(r,o){for(var s,l=r.properties.ref.zInfo,h=o.properties.ref.zInfo,p=l.length,d=h.length,g=Math.min(p,d),y=1;y<g;y++)if(s=l[y]-h[y])return s;return p-d}},{key:"_preprocessGeometry",value:function(r){var o=r.type;r.coordinates=o==="Point"?n._processPointCoordinates(r.coordinates):o==="MultiPoint"?r.coordinates.map(n._processPointCoordinates):o==="LineString"?n._processLineStringCoordinates(r.coordinates):o==="MultiLineString"?r.coordinates.map(n._processLineStringCoordinates):o==="Polygon"?r.coordinates.map(n._processPolygonCoordinates):o==="MultiPolygon"?r.coordinates.map(n._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(r){return[r[1],r[0],r[2]]}},{key:"_processLineStringCoordinates",value:function(r){return n._latLngAltArrayToLineString(r,!1)}},{key:"_processPolygonCoordinates",value:function(r){return n._latLngAltArrayToLineString(r,!0)}},{key:"_processMultiPolygonCoordinates",value:function(r){return r.map(n._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(r,o){for(var s=[],l=r.length,h=0;h<l;h+=3)s.push([r[h+1],r[h]]);return o&&s.push([r[1],r[0]]),s}}])}(MapsJsSource);MapsJsSource.register(ObjectSource,"ObjectSource");var GEOMETRY_TYPE={POLYGON:1,POLYLINE:2,OUTLINE:3},IconMap=function(){return _createClass(function e(){_classCallCheck(this,e),this._map={}},[{key:"set",value:function(e,n,r){if(this._map[e])this._map[e].accumulator.add(r);else{var o=new Set;o.add(r),this._map[e]={value:n,accumulator:o}}}},{key:"get",value:function(e){return this._map[e]&&this._map[e].value}},{key:"delete",value:function(e,n){var r=this._map[e];r&&r.accumulator&&(r.accumulator.delete(n),r.accumulator.size===0&&delete this._map[e])}}])}(),ObjectTileSource=function(e){function n(r,o){var s;return _classCallCheck(this,n),s=_callSuper(this,n,[r,o]),Thread.is_worker||(s._icons=new IconMap),s}return _inherits(n,e),_createClass(n,[{key:"onProviderUpdate",value:function(r){r.target instanceof H.map.provider.Tile?this.dispatchUpdate(r.target,r.data):this.dispatchUpdate(void 0,r.data)}},{key:"onReady",value:function(){var r=this.provider;r.setTileCanvasRendering&&r.setTileCanvasRendering(!1),r.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),r.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this);var r=this.provider;r.providesMarkers()&&r.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(r,o,s){this.provider.cacheFilter(r)&&this._deleteIcons(r,o.data)}},{key:"_deleteIcons",value:function(r,o){for(var s=0,l=o.length;s<l;s++){var h=o[s].getIcon();this._icons.delete(h.uid,r)}}},{key:"getIconBitmapByObjectId",value:function(r,o){var s=this._icons.get(o);return s&&s.getBitmap()}},{key:"requestMarkerTile",value:function(r){var o=this,s=new Promise(function(l,h){o.provider?o.provider.requestTileAsPromise(r.x,r.y,r.z,!1).then(function(p){var d,g,y=[];if(p.data)for(g=(d=p.data).length;g--;){var v=d[g],_=v.getIcon();o._icons.set(_.uid,_,p.key),y.push(v.forWorkerMessage())}l(y)}):l([])});return s}},{key:"requestSpatialTile",value:function(r){var o=this,s=new Promise(function(l,h){o.provider?o.provider.requestTileAsPromise(r.x,r.y,r.z,!1).then(function(p){var d,g=[];if(p.getObjects){d=p.getObjects();for(var y=0;y<d.length;y++){var v=d[y];g.push({id:v.getId(),geometries:v.getGeometriesForTile(p),isClosed:v.isClosed(),style:v.getStyle().forWorkerMessage()})}}l(g)}):l([])});return s}},{key:"_pointToArray",value:function(r){var o=Geo$1.tile_scale/this.tile_size;return[r.x*o,r.y*o]}},{key:"_getGeoJsonMultiPolygon",value:function(r){for(var o=r.geometries,s=o.length,l=[],h={coordinates:l,type:"MultiPolygon"},p=0;p<s;p++){var d=o[p],g=d.paths,y=g.length,v=d.interiorsIndex,_=d.outlinesIndex,w=Math.min(v,_,y),I=void 0,G=void 0;for(G=0;G<w;G++)I=[g[G].map(this._pointToArray,this)],l.push(I);if(w===1)for(w=Math.min(_,y),G=v;G<w;G++)I.push(g[G].map(this._pointToArray,this))}return h}},{key:"_getGeoJsonMultiLineString",value:function(r){for(var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s={coordinates:[],type:"MultiLineString"},l=r.geometries,h=0;h<l.length;h++)for(var p=l[h],d=o?p.outlinesIndex:0,g=o?p.paths.length:Math.min(p.interiorsIndex,p.outlinesIndex,p.paths.length),y=d;y<g;y++){var v=p.paths[y].map(this._pointToArray,this);s.coordinates.push(v)}return s}},{key:"_getGeoJsonGeometry",value:function(r,o){var s;return(s=o===GEOMETRY_TYPE.POLYGON?this._getGeoJsonMultiPolygon(r):this._getGeoJsonMultiLineString(r,o===GEOMETRY_TYPE.OUTLINE)).coordinates.length?s:null}},{key:"_load",value:function(r){var o,s=this;return o=new Promise(function(l,h){var p=WorkerBroker.postMessage(s.target_name+".requestMarkerTile",r.coords).then(s._prepareTileData.bind(s,r)),d=new Promise(function(g,y){WorkerBroker.postMessage(s.target_name+".requestSpatialTile",r.coords).then(function(v){for(var _=[],w=[],I=[],G=0;G<v.length;G++){var _t=v[G],_r=void 0,_o=void 0;_t.isClosed?(_r=w,_o=GEOMETRY_TYPE.POLYGON):(_r=_,_o=GEOMETRY_TYPE.POLYLINE);var Ca=s._getGeoJsonGeometry(_t,_o);if(Ca){var _a={id:_t.id,type:"Feature",properties:{height:0,style:_t.style},geometry:Ca};_o===GEOMETRY_TYPE.POLYLINE&&(_a.properties.effectiveZIdx=_.length),_r.push(_a)}var _l=s._getGeoJsonGeometry(_t,GEOMETRY_TYPE.OUTLINE);_l&&I.push({id:_t.id,type:"Feature",properties:{height:0,style:_t.style,effectiveZIdx:I.length},geometry:_l})}r.source_data.layers.polylines={type:"FeatureCollection",features:_},r.source_data.layers.polygons={type:"FeatureCollection",features:w},r.source_data.layers.outlines={type:"FeatureCollection",features:I},g(r)})});Promise.all([p,d]).then(function(g){s._postProcessTile(r),l(r)})}),o}},{key:"_prepareTileData",value:function(r,o){var s=Geo$1.wrapTile(r.coords,{x:!0,y:!0}),l=Geo$1.metersForTile(s);r.source_data.layers={markers:{features:o,type:"FeatureCollection"}};var h={coords:s,min:l},p=r.source_data,d=layout$1("binary-tree"),g={};for(var y in p.layers)for(var v=p.layers[y].features.length,_=0;_<v;_++){var w=p.layers[y].features[_],I=w.properties.icon;g[I.id]||(d.addItem({width:I.size.w,height:I.size.h,meta:{objectId:w.id,id:I.id}}),g[I.id]=!0),Geo$1.transformGeometry(w.geometry,function(G){var _t=G[0];G[0]=G[1],G[1]=_t})}return r.rasters=d.export(),MapsJsSource.projectData(r.source_data),MapsJsSource.scaleData(r.source_data,h),r}}])}(MapsJsSource);MapsJsSource.register(ObjectTileSource,"ObjectTileSource");var RemoteRasterTileSource=function(e){function n(r,o){var s;return _classCallCheck(this,n),(s=_callSuper(this,n,[r,o])).uid_=r.uid,s}return _inherits(n,e),_createClass(n,[{key:"initialize",value:function(r,o,s,l){this.provider=r,this._on_update=o,this._onProviderUpdate=this._onProviderUpdate.bind(this),r.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(r){this._on_update(this.name)}},{key:"tileTexture",value:function(r){return Object.assign(_get(_getPrototypeOf(n.prototype),"tileTexture",this).call(this,r),{uid:this.uid_,url:this.uid_+"_"+r.coords.key,coords:r.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}])}(RasterTileSource);function geojsonvt(e,n){return new GeoJSONVT(e,n)}function GeoJSONVT(e,n){var r=(n=this.options=extend$1(Object.create(this.options),n)).debug;if(r&&console.time("preprocess data"),n.maxZoom<0||n.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=convert(e,n);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(o=wrap$1(o,n)).length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,n,r){return 32*((1<<e)*r+n)+e}function extend$1(e,n){for(var r in n)e[r]=n[r];return e}DataSource.register(RemoteRasterTileSource,"RemoteRasterTileSource"),GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},GeoJSONVT.prototype.splitTile=function(e,n,r,o,s,l,h){for(var p=[e,n,r,o],d=this.options,g=d.debug;p.length;){o=p.pop(),r=p.pop(),n=p.pop(),e=p.pop();var y=1<<n,v=toID(n,r,o),_=this.tiles[v];if(!_&&(g>1&&console.time("creation"),_=this.tiles[v]=createTile(e,n,r,o,d),this.tileCoords.push({z:n,x:r,y:o}),g)){g>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,r,o,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var w="z"+n;this.stats[w]=(this.stats[w]||0)+1,this.total++}if(_.source=e,s){if(n===d.maxZoom||n===s)continue;var I=1<<s-n;if(r!==Math.floor(l/I)||o!==Math.floor(h/I))continue}else if(n===d.indexMaxZoom||_.numPoints<=d.indexMaxPoints)continue;if(_.source=null,e.length!==0){g>1&&console.time("clipping");var G,_t,_r,_o,Ca,_a,_l=.5*d.buffer/d.extent,Qa=.5-_l,Kc=.5+_l,jc=1+_l;G=_t=_r=_o=null,Ca=clip(e,y,r-_l,r+Kc,0,_.minX,_.maxX,d),_a=clip(e,y,r+Qa,r+jc,0,_.minX,_.maxX,d),e=null,Ca&&(G=clip(Ca,y,o-_l,o+Kc,1,_.minY,_.maxY,d),_t=clip(Ca,y,o+Qa,o+jc,1,_.minY,_.maxY,d),Ca=null),_a&&(_r=clip(_a,y,o-_l,o+Kc,1,_.minY,_.maxY,d),_o=clip(_a,y,o+Qa,o+jc,1,_.minY,_.maxY,d),_a=null),g>1&&console.timeEnd("clipping"),p.push(G||[],n+1,2*r,2*o),p.push(_t||[],n+1,2*r,2*o+1),p.push(_r||[],n+1,2*r+1,2*o),p.push(_o||[],n+1,2*r+1,2*o+1)}}},GeoJSONVT.prototype.getTile=function(e,n,r){var o=this.options,s=o.extent,l=o.debug;if(e<0||e>24)return null;var h=1<<e,p=toID(e,n=(n%h+h)%h,r);if(this.tiles[p])return transformTile(this.tiles[p],s);l>1&&console.log("drilling down to z%d-%d-%d",e,n,r);for(var d,g=e,y=n,v=r;!d&&g>0;)g--,y=Math.floor(y/2),v=Math.floor(v/2),d=this.tiles[toID(g,y,v)];return d&&d.source?(l>1&&console.log("found parent tile z%d-%d-%d",g,y,v),l>1&&console.time("drilling down"),this.splitTile(d.source,g,y,v,e,n,r),l>1&&console.timeEnd("drilling down"),this.tiles[p]?transformTile(this.tiles[p],s):null):null};var EMPTY_FEATURE_COLLECTION={type:"FeatureCollection",features:[]},GeoJSONTileSource=function(e){function n(r,o){return _classCallCheck(this,n),r.tiled=!0,r.url="",_callSuper(this,n,[r,o])}return _inherits(n,e),_createClass(n,[{key:"fetchTile",value:function(r,o,s){return this.provider?this.provider.requestTileAsPromise(r,o,s).then(function(l){return l.data}):Promise.resolve(EMPTY_FEATURE_COLLECTION)}},{key:"_load",value:function(r){var o=this,s=Geo$1.wrapTile(r.coords,{x:!0,y:!0}),l={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale};return WorkerBroker.postMessage(this.target_name+".fetchTile",s.x,s.y,s.z).then(function(h){for(var p in r.source_data.layers=h.type==="FeatureCollection"?{_default:h}:h,r.source_data.layers){var d=geojsonvt(r.source_data.layers[p],l).getTile(s.z,s.x,s.y);r.source_data.layers[p]=parseGeoJSONVectorTile(d)}return o._postProcessTile(r),r})}},{key:"onReady",value:function(){this.dispatchUpdate()}}])}(MapsJsSource);DataSource.register(GeoJSONTileSource,"GeoJSONTileSource");var DEFAULT_RESPONSE={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},SkyBoxSource=function(e){function n(r,o){return _classCallCheck(this,n),r.max_zoom=0,_callSuper(this,n,[r,o])}return _inherits(n,e),_createClass(n,[{key:"load",value:function(r){return r.source_data=r.coords.key==="0/0/0"?DEFAULT_RESPONSE:void 0,Promise.resolve(r)}}])}(DataSource),debugSettings;DataSource.register(SkyBoxSource,"SkyBox");var debugSettings$1=debugSettings={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function mergeDebugSettings(e){Object.assign(debugSettings,e)}var WorkerType={NATIVE:0,FAKE:1},Context;function sliceObject(e,n){var r={};return n.forEach(function(o){return r[o]=e[o]}),r}var Context$1=Context={},context_id=0,gl;Context.getContext=function(e,n){var r=!1;e==null&&((e=document.createElement("canvas")).style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-1,document.body.appendChild(e),r=!0);var o=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);if(!o)throw new Error("Couldn't create WebGL context.");return o._tangram_id=context_id++,r?(Context.resize(o,window.innerWidth,window.innerHeight,n.device_pixel_ratio),window.addEventListener("resize",function(){Context.resize(o,window.innerWidth,window.innerHeight,n.device_pixel_ratio)})):Context.resize(o,parseFloat(e.style.width),parseFloat(e.style.height),n.device_pixel_ratio),o},Context.resize=function(e,n,r,o){e.canvas.style.width=n+"px",e.canvas.style.height=r+"px",e.canvas.width=Math.round(n*o),e.canvas.height=Math.round(r*o),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)};var gl$1=gl={};gl.BYTE=5120,gl.UNSIGNED_BYTE=5121,gl.SHORT=5122,gl.UNSIGNED_SHORT=5123,gl.INT=5124,gl.UNSIGNED_INT=5125,gl.FLOAT=5126;var MAX_VALUE=Math.pow(2,16)-1,DEFAULT_SIZE=1024,HAS_ELEMENT_INDEX_UINT=!1,VertexElements=function(){return _createClass(function e(n){_classCallCheck(this,e),this.size_=n||DEFAULT_SIZE,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1},[{key:"push",value:function(e){if(!this.overflows_||HAS_ELEMENT_INDEX_UINT){if(e>MAX_VALUE){if(this.overflows_=!0,!HAS_ELEMENT_INDEX_UINT)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=e,this.position_+=1}}},{key:"end",value:function(){if(this.position_!==0){var e=this.buffer_,n=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,e.subarray(0,n)}return!1}},{key:"expand_",value:function(){this.size_=this.size_<<1;var e=new this.ArrayType_(this.size_);e.set(this.buffer_),this.buffer_=e}}])}();VertexElements.setElementIndexUint=function(e){HAS_ELEMENT_INDEX_UINT=e};var array_types=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},gl$1.FLOAT,Float32Array),gl$1.BYTE,Int8Array),gl$1.UNSIGNED_BYTE,Uint8Array),gl$1.INT,Int32Array),gl$1.UNSIGNED_INT,Uint32Array),gl$1.SHORT,Int16Array),gl$1.UNSIGNED_SHORT,Uint16Array),VertexData=function(){function e(n){var r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).prealloc,o=r===void 0?500:r;_classCallCheck(this,e),this.vertex_layout=n,this.vertex_elements=new VertexElements,this.stride=this.vertex_layout.stride,e.array_pool.length>0?(this.vertex_buffer=e.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),log("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=o,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _createClass(e,[{key:"setBufferViews",value:function(){var n=this;this.views={},this.views[gl$1.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(r){if(n.views[r.type]==null){var o=array_types[r.type];n.views[r.type]=new o(n.vertex_buffer.buffer)}})}},{key:"checkBufferSize",value:function(){if(this.offset+this.stride>this.byte_length){this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size;var n=new Uint8Array(this.byte_length);n.set(this.vertex_buffer),e.array_pool.push(this.vertex_buffer),this.vertex_buffer=n,this.setBufferViews(),this.realloc_count++}}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(n){this.checkBufferSize(),this.vertexLayoutAddVertex(n,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),log("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}])}();VertexData.array_pool=[];var VertexLayout=function(){function e(n){_classCallCheck(this,e),this.attribs=n,this.dynamic_attribs=this.attribs.filter(function(g){return!g.static}),this.components=[],this.index={},this.offset={},this.stride=0;for(var r=0,o=0,s=0;s<this.attribs.length;s++){var l=this.attribs[s];if(l.static==null){l.offset=this.stride,l.byte_size=l.size;var h=0;switch(l.type){case gl$1.FLOAT:case gl$1.INT:case gl$1.UNSIGNED_INT:l.byte_size*=4,h=2;break;case gl$1.SHORT:case gl$1.UNSIGNED_SHORT:l.byte_size*=2,h=1}3&l.byte_size&&(l.byte_size+=4-(3&l.byte_size)),this.stride+=l.byte_size;for(var p=l.offset>>h,d=0;d<l.size;d++)this.components.push({type:l.type,shift:h,offset:p++,index:o++});this.index[l.name]=r,r+=l.size,this.offset[l.name]=l.offset}else l.static=Array.isArray(l.static)?l.static:[l.static],l.method="vertexAttrib".concat(l.static.length,"fv")}}return _createClass(e,[{key:"enable",value:function(n,r,o){for(var s,l,h=0;h<this.attribs.length;h++)s=this.attribs[h],(l=r.attribute(s.name).location)!==-1&&(s.static==null?(e.enabled_attribs[l]&&!o||n.enableVertexAttribArray(l),n.vertexAttribPointer(l,s.size,s.type,s.normalized,this.stride,s.offset),e.enabled_attribs[l]=r):n[s.method]instanceof Function&&(n.enableVertexAttribArray(l),n[s.method](l,s.static),n.disableVertexAttribArray(l),delete e.enabled_attribs[l]));for(l in e.enabled_attribs)this.disableUnusedAttribute(n,l,r)}},{key:"disableUnusedAttribute",value:function(n,r,o){e.enabled_attribs[r]!==o&&(n.disableVertexAttribArray(r),delete e.enabled_attribs[r])}},{key:"createVertexData",value:function(){return new VertexData(this)}},{key:"getAddVertexFunction",value:function(){return this.addVertex==null&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var n=hashString(JSON.stringify(this.attribs));if(e.add_vertex_funcs[n]==null){var r,o=["var t, o;"],s=_toConsumableArray(this.components);s.sort(function(d,g){return d.type!==g.type?d.type-g.type:d.index-g.index});for(var l=0;l<s.length;l++){var h=s[l];r!==h.type&&(o.push("t = vs[".concat(h.type,"];")),o.push("o = off".concat(h.shift?" >> "+h.shift:"",";")),r=h.type),o.push("t[o + ".concat(h.offset,"] = v[").concat(h.index,"];"))}o=o.join(`
`);var p=new Function("v","vs","off",o);e.add_vertex_funcs[n]=p}this.addVertex=e.add_vertex_funcs[n]}}])}();VertexLayout.enabled_attribs={},VertexLayout.add_vertex_funcs={};var tile_bounds=[{x:0,y:0},{x:Geo$1.tile_scale,y:-Geo$1.tile_scale}],default_uvs=[0,0,1,1];function outsideTile(e,n,r){var o=tile_bounds[0],s=tile_bounds[1];return e[0]<=o.x+r&&n[0]<=o.x+r||e[0]>=s.x-r&&n[0]>=s.x-r||e[1]>=o.y-r&&n[1]>=o.y-r||e[1]<=s.y+r&&n[1]<=s.y+r}function isCoordOutsideTile(e,n){n=n||0;var r=tile_bounds[0],o=tile_bounds[1];return e[0]<=r.x+n||e[0]>=o.x-n||e[1]>=r.y-n||e[1]<=o.y+n}var earcut_1=earcut;function earcut(e,n,r){r=r||2;var o,s,l,h,p,d,g,y=n&&n.length,v=y?n[0]*r:e.length,_=linkedList(e,0,v,r,!0),w=[];if(!_)return w;if(y&&(_=eliminateHoles(e,n,_,r)),e.length>80*r){o=l=e[0],s=h=e[1];for(var I=r;I<v;I+=r)(p=e[I])<o&&(o=p),(d=e[I+1])<s&&(s=d),p>l&&(l=p),d>h&&(h=d);g=Math.max(l-o,h-s)}return earcutLinked(_,w,r,o,s,g),w}function linkedList(e,n,r,o,s){var l,h;if(s===signedArea(e,n,r,o)>0)for(l=n;l<r;l+=o)h=insertNode(l,e[l],e[l+1],h);else for(l=r-o;l>=n;l-=o)h=insertNode(l,e[l],e[l+1],h);return h&&equals(h,h.next)&&(removeNode(h),h=h.next),h}function filterPoints(e,n){if(!e)return e;n||(n=e);var r,o=e;do if(r=!1,o.steiner||!equals(o,o.next)&&area(o.prev,o,o.next)!==0)o=o.next;else{if(removeNode(o),(o=n=o.prev)===o.next)return null;r=!0}while(r||o!==n);return n}function earcutLinked(e,n,r,o,s,l,h){if(e){!h&&l&&indexCurve(e,o,s,l);for(var p,d,g=e;e.prev!==e.next;)if(p=e.prev,d=e.next,l?isEarHashed(e,o,s,l):isEar(e))n.push(p.i/r),n.push(e.i/r),n.push(d.i/r),removeNode(e),e=d.next,g=d.next;else if((e=d)===g){h?h===1?earcutLinked(e=cureLocalIntersections(e,n,r),n,r,o,s,l,2):h===2&&splitEarcut(e,n,r,o,s,l):earcutLinked(filterPoints(e),n,r,o,s,l,1);break}}}function isEar(e){var n=e.prev,r=e,o=e.next;if(area(n,r,o)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(pointInTriangle(n.x,n.y,r.x,r.y,o.x,o.y,s.x,s.y)&&area(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function isEarHashed(e,n,r,o){var s=e.prev,l=e,h=e.next;if(area(s,l,h)>=0)return!1;for(var p=s.x<l.x?s.x<h.x?s.x:h.x:l.x<h.x?l.x:h.x,d=s.y<l.y?s.y<h.y?s.y:h.y:l.y<h.y?l.y:h.y,g=s.x>l.x?s.x>h.x?s.x:h.x:l.x>h.x?l.x:h.x,y=s.y>l.y?s.y>h.y?s.y:h.y:l.y>h.y?l.y:h.y,v=zOrder(p,d,n,r,o),_=zOrder(g,y,n,r,o),w=e.nextZ;w&&w.z<=_;){if(w!==e.prev&&w!==e.next&&pointInTriangle(s.x,s.y,l.x,l.y,h.x,h.y,w.x,w.y)&&area(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(w=e.prevZ;w&&w.z>=v;){if(w!==e.prev&&w!==e.next&&pointInTriangle(s.x,s.y,l.x,l.y,h.x,h.y,w.x,w.y)&&area(w.prev,w,w.next)>=0)return!1;w=w.prevZ}return!0}function cureLocalIntersections(e,n,r){var o=e;do{var s=o.prev,l=o.next.next;!equals(s,l)&&intersects(s,o,o.next,l)&&locallyInside(s,l)&&locallyInside(l,s)&&(n.push(s.i/r),n.push(o.i/r),n.push(l.i/r),removeNode(o),removeNode(o.next),o=e=l),o=o.next}while(o!==e);return o}function splitEarcut(e,n,r,o,s,l){var h=e;do{for(var p=h.next.next;p!==h.prev;){if(h.i!==p.i&&isValidDiagonal(h,p)){var d=splitPolygon(h,p);return h=filterPoints(h,h.next),d=filterPoints(d,d.next),earcutLinked(h,n,r,o,s,l),void earcutLinked(d,n,r,o,s,l)}p=p.next}h=h.next}while(h!==e)}function eliminateHoles(e,n,r,o){var s,l,h,p=[];for(s=0,l=n.length;s<l;s++)(h=linkedList(e,n[s]*o,s<l-1?n[s+1]*o:e.length,o,!1))===h.next&&(h.steiner=!0),p.push(getLeftmost(h));for(p.sort(compareX),s=0;s<p.length;s++)eliminateHole(p[s],r),r=filterPoints(r,r.next);return r}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){if(n=findHoleBridge(e,n)){var r=splitPolygon(n,e);filterPoints(r,r.next)}}function findHoleBridge(e,n){var r,o=n,s=e.x,l=e.y,h=-1/0;do{if(l<=o.y&&l>=o.next.y){var p=o.x+(l-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(p<=s&&p>h){if(h=p,p===s){if(l===o.y)return o;if(l===o.next.y)return o.next}r=o.x<o.next.x?o:o.next}}o=o.next}while(o!==n);if(!r)return null;if(s===h)return r.prev;var d,g=r,y=r.x,v=r.y,_=1/0;for(o=r.next;o!==g;)s>=o.x&&o.x>=y&&pointInTriangle(l<v?s:h,l,y,v,l<v?h:s,l,o.x,o.y)&&((d=Math.abs(l-o.y)/(s-o.x))<_||d===_&&o.x>r.x)&&locallyInside(o,e)&&(r=o,_=d),o=o.next;return r}function indexCurve(e,n,r,o){var s=e;do s.z===null&&(s.z=zOrder(s.x,s.y,n,r,o)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,sortLinked(s)}function sortLinked(e){var n,r,o,s,l,h,p,d,g=1;do{for(r=e,e=null,l=null,h=0;r;){for(h++,o=r,p=0,n=0;n<g&&(p++,o=o.nextZ);n++);for(d=g;p>0||d>0&&o;)p===0?(s=o,o=o.nextZ,d--):d!==0&&o?r.z<=o.z?(s=r,r=r.nextZ,p--):(s=o,o=o.nextZ,d--):(s=r,r=r.nextZ,p--),l?l.nextZ=s:e=s,s.prevZ=l,l=s;r=o}l.nextZ=null,g*=2}while(h>1);return e}function zOrder(e,n,r,o,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/s)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-o)/s)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function getLeftmost(e){var n=e,r=e;do n.x<r.x&&(r=n),n=n.next;while(n!==e);return r}function pointInTriangle(e,n,r,o,s,l,h,p){return(s-h)*(n-p)-(e-h)*(l-p)>=0&&(e-h)*(o-p)-(r-h)*(n-p)>=0&&(r-h)*(l-p)-(s-h)*(o-p)>=0}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)}function area(e,n,r){return(n.y-e.y)*(r.x-n.x)-(n.x-e.x)*(r.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,r,o){return!!(equals(e,n)&&equals(r,o)||equals(e,o)&&equals(r,n))||area(e,n,r)>0!=area(e,n,o)>0&&area(r,o,e)>0!=area(r,o,n)>0}function intersectsPolygon(e,n){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==n.i&&r.next.i!==n.i&&intersects(r,r.next,e,n))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,n){return area(e.prev,e,e.next)<0?area(e,n,e.next)>=0&&area(e,e.prev,n)>=0:area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){var r=e,o=!1,s=(e.x+n.x)/2,l=(e.y+n.y)/2;do r.y>l!=r.next.y>l&&s<(r.next.x-r.x)*(l-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next;while(r!==e);return o}function splitPolygon(e,n){var r=new Node(e.i,e.x,e.y),o=new Node(n.i,n.x,n.y),s=e.next,l=n.prev;return e.next=n,n.prev=e,r.next=s,s.prev=r,o.next=r,r.prev=o,l.next=o,o.prev=l,o}function insertNode(e,n,r,o){var s=new Node(e,n,r);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,n,r){this.i=e,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,n,r,o){for(var s=0,l=n,h=r-o;l<r;l+=o)s+=(e[h]-e[l])*(e[l+1]+e[h+1]),h=l;return s}earcut.deviation=function(e,n,r,o){var s=n&&n.length,l=s?n[0]*r:e.length,h=Math.abs(signedArea(e,0,l,r));if(s)for(var p=0,d=n.length;p<d;p++){var g=n[p]*r,y=p<d-1?n[p+1]*r:e.length;h-=Math.abs(signedArea(e,g,y,r))}var v=0;for(p=0;p<o.length;p+=3){var _=o[p]*r,w=o[p+1]*r,I=o[p+2]*r;v+=Math.abs((e[_]-e[I])*(e[w+1]-e[_+1])-(e[_]-e[w])*(e[I+1]-e[_+1]))}return h===0&&v===0?0:Math.abs((v-h)/h)},earcut.flatten=function(e){for(var n=e[0][0].length,r={vertices:[],holes:[],dimensions:n},o=0,s=0;s<e.length;s++){for(var l=0;l<e[s].length;l++)for(var h=0;h<n;h++)r.vertices.push(e[s][l][h]);s>0&&(o+=e[s-1].length,r.holes.push(o))}return r};var earcut$1=getDefaultExportFromCjs(earcut_1),up_vec3=[0,0,1];function buildPolygons(e,n,r,o){var s=o.texcoord_index,l=o.texcoord_scale,h=o.texcoord_normalize,p=n.vertex_elements;if(s){h=h||1;var d=_slicedToArray(l||default_uvs,4),g=d[0],y=d[1],v=d[2],_=d[3]}for(var w=0,I=e.length,G=0;G<I;G++){var _t=n.vertex_count,_r=e[G];if(s)var _o=_slicedToArray(Geo$1.findBoundingBox(_r),4),Ca=_o[0],_a=_o[1],_l=(v-g)/(_o[2]-Ca),Qa=(_-y)/(_o[3]-_a);for(var Kc=0;Kc<_r.length;Kc++)for(var jc=_r[Kc],_h=0;_h<jc.length;_h++){var _m=jc[_h];r[0]=_m[0],r[1]=_m[1],s&&(r[s+0]=((_m[0]-Ca)*_l+g)*h,r[s+1]=((_m[1]-_a)*Qa+y)*h),n.addVertex(r)}for(var ry=triangulatePolygon(earcut$1.flatten(_r)),uy=0;uy<ry.length;uy++)p.push(_t+ry[uy]);w+=ry.length/3}return w}function buildExtrudedPolygons(e,n,r,o,s,l,h,p,d){var g=d.remove_tile_edges,y=d.tile_edge_tolerance,v=d.texcoord_index,_=d.texcoord_scale,w=d.texcoord_normalize,I=d.winding,G=n+(o||0),_t=n+r;l[2]=_t;var _r=buildPolygons(e,s,l,{texcoord_index:v,texcoord_scale:_,texcoord_normalize:w}),_o=s.vertex_elements,Ca=s.vertex_count;if(v){w=w||1;var _a=_slicedToArray(_||default_uvs,4),_l=_a[0],Qa=_a[1],Kc=_a[2],jc=_a[3],_h=[[_l,jc],[_l,Qa],[Kc,Qa],[Kc,jc]]}for(var _m=e.length,ry=0;ry<_m;ry++)for(var uy=e[ry],ay=0;ay<uy.length;ay++)for(var ey=uy[ay],_y=0;_y<ey.length-1;_y++)if(!g||!outsideTile(ey[_y],ey[_y+1],y)){var Ey=void 0,My=void 0;I==="CCW"?(Ey=_y,My=_y+1):(Ey=_y+1,My=_y);var Ny=[[ey[My][0],ey[My][1],_t],[ey[My][0],ey[My][1],G],[ey[Ey][0],ey[Ey][1],G],[ey[Ey][0],ey[Ey][1],_t]],Py=Vector$1.normalize([ey[My][0]-ey[Ey][0],ey[My][1]-ey[Ey][1],0]),gv=Vector$1.cross(up_vec3,Py);l[h+0]=gv[0]*p,l[h+1]=gv[1]*p,l[h+2]=gv[2]*p;for(var sv=0;sv<Ny.length;sv++)l[0]=Ny[sv][0],l[1]=Ny[sv][1],l[2]=Ny[sv][2],v&&(l[v+0]=_h[sv][0]*w,l[v+1]=_h[sv][1]*w),s.addVertex(l);_o.push(Ca+0),_o.push(Ca+1),_o.push(Ca+2),_o.push(Ca+2),_o.push(Ca+3),_o.push(Ca+0),Ca+=4,_r+=2}return _r}function triangulatePolygon(e){return earcut$1(e.vertices,e.holes,e.dimensions)}var shaderSrc_polygonsVertex=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;
#ifdef TANGRAM_NORMAL_ATTRIBUTE
attribute vec3 a_normal;
#define TANGRAM_NORMAL a_normal
#else
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#endif
#ifdef TANGRAM_EXTRUDE_LINES
attribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;
#endif
varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)
attribute vec2 a_texcoord;varying vec2 v_texcoord;
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#define UNPACK_SCALING(x) (x / 1024.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
void main(){
#pragma tangram: setup
#ifdef TANGRAM_TEXTURE_COORDS
v_texcoord=a_texcoord;
#ifdef TANGRAM_EXTRUDE_LINES
v_texcoord.y*=u_v_scale_adjust;
#endif
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
v_modelpos_base_zoom=modelPositionBaseZoom();
#endif
vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);
#ifdef TANGRAM_EXTRUDE_LINES
vec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;
#ifdef TANGRAM_BLOCK_WIDTH
float width=1.;
#pragma tangram: width
extrude*=width;
#endif
position.xy+=extrude+offset;
#endif
v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;
#pragma tangram: position
v_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;
#if defined(TANGRAM_LIGHTING_VERTEX)
vec3 normal=v_normal;
#pragma tangram: normal
v_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));
#endif
cameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);
#if defined(SNAP_TO_PIXEL_GRID)
snapToPixelGrid(position);
#endif
gl_Position=position;}`,shaderSrc_polygonsFragment=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_EXTRUDE_LINES
uniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;
#endif
#define TANGRAM_NORMAL v_normal
#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)
varying vec2 v_texcoord;
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
#pragma tangram: utils
void main(void){
#pragma tangram: setup
vec4 color=v_color;vec3 normal=TANGRAM_NORMAL;
#ifdef TANGRAM_CROP_BY_TILE
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}
#endif
#ifdef TANGRAM_RASTER_TEXTURE_COLOR
color*=sampleRaster();
#endif
#ifdef TANGRAM_EXTRUDE_LINES
if(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){
#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)
if(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;
#else
color=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));
#endif
}else{color*=_line_color;}}
#endif
#ifdef TANGRAM_RASTER_TEXTURE_NORMAL
normal=normalize(sampleRaster().rgb*2.-1.);
#endif
#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)
calculateNormal(normal);
#endif
#if !defined(TANGRAM_LIGHTING_VERTEX)
#pragma tangram: normal
#endif
#pragma tangram: color
#if defined(TANGRAM_LIGHTING_FRAGMENT)
color=calculateLighting(v_position.xyz-u_eye,normal,color);
#elif defined(TANGRAM_LIGHTING_VERTEX)
color*=v_lighting;
#endif
#pragma tangram: filter
gl_FragColor=color;}`,Polygons=Object.create(Style);Object.assign(Polygons,{name:"polygons",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(e){if(!this.vertex_layout){var n=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_normal",size:3,type:gl$1.BYTE,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}];this.texcoords&&n.push({name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new VertexLayout(n)}return this.vertex_layout},_parseFeature:function(e,n,r){var o=this.feature_style;return o.color=this.parseColor(n.color,r),o.color?(o.z=n.z&&StyleParser.evalCachedDistanceProperty(n.z,r)||StyleParser.defaults.z,o.z*=Geo$1.height_scale,o.extrude=StyleParser.evalProperty(n.extrude,r),o.extrude&&(o.extrude===!0?(o.height=e.properties.height!==void 0?e.properties.height:StyleParser.defaults.height,o.min_height=e.properties.min_height!==void 0?e.properties.min_height:StyleParser.defaults.min_height):typeof o.extrude=="number"?(o.height=o.extrude,o.min_height=0):Array.isArray(o.extrude)&&(o.min_height=o.extrude[0],o.height=o.extrude[1]),o.height*=Geo$1.height_scale,o.min_height*=Geo$1.height_scale),o.tile_edges=n.tile_edges,o):null},_preprocess:function(e){return e.color=StyleParser.createColorPropertyCache(e.color),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e},makeVertexTemplate:function(e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=e.z||0,this.vertex_template[n++]=this.scaleOrder(e.order),this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=127,this.vertex_template[n++]=255*e.color[0],this.vertex_template[n++]=255*e.color[1],this.vertex_template[n++]=255*e.color[2],this.vertex_template[n++]=255*e.color[3],this.selection&&(this.vertex_template[n++]=255*e.selection_color[0],this.vertex_template[n++]=255*e.selection_color[1],this.vertex_template[n++]=255*e.selection_color[2],this.vertex_template[n++]=255*e.selection_color[3]),this.texcoords&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template},buildPolygons:function(e,n,r,o){var s=this.makeVertexTemplate(n),l={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!n.tile_edges,tile_edge_tolerance:Geo$1.tile_scale*o.tile.pad_scale*4,winding:o.winding};return n.extrude&&n.height?buildExtrudedPolygons(e,n.z,n.height,n.min_height,r.vertex_data,s,this.vertex_layout.index.a_normal,127,l):buildPolygons(e,r.vertex_data,s,l)}});var zero_vec2=[0,0],CAP_TYPE$1={butt:0,square:1,round:2},JOIN_TYPE$1={miter:0,bevel:1,round:2},DEFAULT={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},v_scale_adjust=Geo$1.tile_scale,zero_v=[0,0],one_v=[1,0],mid_v=[.5,0];function buildPolylines$1(e,n,r,o,s){var l=s.closed_polygon,h=s.remove_tile_edges,p=s.tile_edge_tolerance,d=s.texcoord_index;s.texcoord_scale;var g,y=s.texcoord_width,v=s.texcoord_ratio,_=s.texcoord_normalize,w=s.extrude_index,I=s.offset_index,G=s.join,_t=s.cap,_r=s.miter_limit,_o=s.offset,Ca=s.crop_by_tile,_a=_t?CAP_TYPE$1[_t]:CAP_TYPE$1.butt,_l=G?JOIN_TYPE$1[G]:JOIN_TYPE$1.miter;if(_l===JOIN_TYPE$1.miter)var Qa=(_r=_r||DEFAULT.MITER_LIMIT)*_r;d&&(_=_||DEFAULT.TEXCOORD_NORMALIZE,g=1/(y*(v=v||DEFAULT.TEXCOORD_RATIO)*v_scale_adjust));for(var Kc={closed_polygon:l,remove_tile_edges:h,tile_edge_tolerance:p,miter_len_sq:Qa,join_type:_l,cap_type:_a,vertex_data:r,vertex_template:o,half_width:n/2,extrude_index:w,offset_index:I,v_scale:g,texcoord_index:d,texcoord_width:y,texcoord_normalize:_,offset:_o,geom_count:0,crop_by_tile:Ca},jc=0;jc<e.length;jc++)buildPolyline$1(e[jc],Kc);if(Kc.extra_lines)for(var _h=0;_h<Kc.extra_lines.length;_h++)buildPolyline$1(Kc.extra_lines[_h],Kc);return Kc.geom_count}function buildPolyline$1(e,n){if(!(e.length<2)){var r,o,s,l,h=n.join_type,p=n.cap_type,d=n.closed_polygon,g=n.remove_tile_edges,y=n.tile_edge_tolerance,v=n.v_scale,_=n.miter_len_sq,w=n.crop_by_tile,I=n.texcoord_index!=null,G=0;if(d&&h===JOIN_TYPE$1.miter){var _t=getTileBoundaryIndex(e);if(_t!==0){var _r=permuteLine(e,_t);return n.extra_lines=n.extra_lines||[],void n.extra_lines.push(_r)}}var _o=0,Ca=e.length-1,_a=0;for(r=e[_o],o=e[_o+1];Vector$1.isEqual(r,o);)if(r=o,o=e[++_o+1],_a++,_o===e.length-1)return;for(;Vector$1.isEqual(e[Ca],e[Ca-1]);)if(_a++,--Ca===0)return;if(!(e.length<2+_a))if(l=Vector$1.normalize(Vector$1.perp(r,o)),g&&outsideTile(r,o,y)){var _l=getNextNonBoundarySegment(e,_o,y);_l&&(n.extra_lines=n.extra_lines||[],n.extra_lines.push(_l))}else{d?startPolygon(r,s=Vector$1.normalize(Vector$1.perp(e[Ca-1],r)),l,h,n):(!w&&isCoordOutsideTile(r)||(addCap(r,G,l,p,!0,n),I&&p!==CAP_TYPE$1.butt&&(G+=.5*v*n.texcoord_width)),addVertex$1(r,l,l,1,G,n,1),addVertex$1(r,l,l,0,G,n,-1)),I&&(G+=v*Vector$1.length(Vector$1.sub(o,r)));for(var Qa=_o+1;Qa<Ca;Qa++){var Kc=Qa,jc=Qa+1;if(r=e[Kc],o=e[jc],!Vector$1.isEqual(r,o)){if(g&&outsideTile(r,o,y)){addVertex$1(r,l,l,1,G,n,1),addVertex$1(r,l,l,0,G,n,-1),indexPairs(1,n);var _h=getNextNonBoundarySegment(e,Kc+1,y);return void(_h&&(n.extra_lines=n.extra_lines||[],n.extra_lines.push(_h)))}s=l,l=Vector$1.normalize(Vector$1.perp(r,o)),h===JOIN_TYPE$1.miter?addMiter(G,r,s,l,_,!1,n):addJoin(h,G,r,s,l,!1,n),I&&(G+=v*Vector$1.length(Vector$1.sub(o,r)))}}r=o,s=l,d?endPolygon(r,s,l=Vector$1.normalize(Vector$1.perp(r,e[1])),h,G,n):(addVertex$1(r,s,l,1,G,n,1),addVertex$1(r,s,l,0,G,n,-1),indexPairs(1,n),!w&&isCoordOutsideTile(r)||addCap(r,G,s,p,!1,n))}}}function getTileBoundaryIndex(e){if(isCoordOutsideTile(e[0]))return 0;for(var n=0;n<e.length;n++)if(isCoordOutsideTile(e[e.length-1-n]))return e.length-1-n;return 0}function getNextNonBoundarySegment(e,n,r){for(var o=n;e[o+1]&&outsideTile(e[o],e[o+1],r);)o++;return e.length-o>=2&&e.slice(o)}function startPolygon(e,n,r,o,s){o===void 0||isCoordOutsideTile(e)&&!s.crop_by_tile?(addVertex$1(e,r,r,1,0,s,1),addVertex$1(e,r,r,0,0,s,-1)):o===JOIN_TYPE$1.miter?addMiter(0,e,n,r,s.miter_len_sq,!0,s):addJoin(o,0,e,n,r,!0,s)}function endPolygon(e,n,r,o,s,l){if(isCoordOutsideTile(e)&&!l.crop_by_tile)addVertex$1(e,n,n,1,s,l,1),addVertex$1(e,n,n,0,s,l,-1),indexPairs(1,l);else{var h=createMiterVec(n,r);o===JOIN_TYPE$1.miter&&Vector$1.lengthSq(h)>l.miter_len_sq&&(o=JOIN_TYPE$1.bevel),o===JOIN_TYPE$1.miter?(addVertex$1(e,h,n,1,s,l,1),addVertex$1(e,h,n,0,s,l,-1),indexPairs(1,l)):(addVertex$1(e,n,n,1,s,l,1),addVertex$1(e,n,n,0,s,l,-1),indexPairs(1,l))}}function createMiterVec(e,n){var r=Vector$1.normalize(Vector$1.add(e,n)),o=2/(1+Math.abs(Vector$1.dot(e,r)));return Vector$1.mult(r,o*o)}function addMiter(e,n,r,o,s,l,h){var p=createMiterVec(r,o);Vector$1.lengthSq(p)>s?addJoin(JOIN_TYPE$1.bevel,e,n,r,o,l,h):(addVertex$1(n,p,p,1,e,h,1),addVertex$1(n,p,p,0,e,h,-1),l||indexPairs(1,h))}function addJoin(e,n,r,o,s,l,h){var p=createMiterVec(o,s),d=s[0]*o[1]-s[1]*o[0]>0;h.texcoord_index!=null&&(zero_v[1]=n,one_v[1]=n),d?(addVertex$1(r,p,p,1,n,h,1),addVertex$1(r,o,p,0,n,h,-1),l||indexPairs(1,h),addFan(r,Vector$1.neg(o),p,Vector$1.neg(s),p,zero_v,one_v,zero_v,!1,e===JOIN_TYPE$1.bevel,h),addVertex$1(r,p,p,1,n,h,1),addVertex$1(r,s,p,0,n,h,-1)):(addVertex$1(r,o,p,1,n,h,1),addVertex$1(r,p,p,0,n,h,-1),l||indexPairs(1,h),addFan(r,o,Vector$1.neg(p),s,p,one_v,zero_v,one_v,!1,e===JOIN_TYPE$1.bevel,h),addVertex$1(r,s,p,1,n,h,1),addVertex$1(r,p,p,0,n,h,-1))}function indexPairs(e,n){for(var r=n.vertex_data.vertex_elements,o=n.vertex_data.vertex_count-2*e-2,s=0;s<e;s++)r.push(o+2*s+2),r.push(o+2*s+1),r.push(o+2*s+0),r.push(o+2*s+2),r.push(o+2*s+3),r.push(o+2*s+1),n.geom_count+=2}function addVertex$1(e,n,r,o,s,l,h){var p=l.vertex_template,d=l.vertex_data;p[0]=e[0],p[1]=e[1];var g=l.half_width*h;p[l.extrude_index+0]=n[0]*g,p[l.extrude_index+1]=n[1]*g,l.offset&&(p[l.offset_index+0]=r[0]*l.offset,p[l.offset_index+1]=r[1]*l.offset),l.texcoord_index!=null&&(p[l.texcoord_index+0]=o*l.texcoord_normalize,p[l.texcoord_index+1]=s*l.texcoord_normalize),d.addVertex(p)}var uvCurr=[0,0];function addFan(e,n,r,o,s,l,h,p,d,g,y){for(var v=n[0]*o[1]-n[1]*o[0],_=Vector$1.dot(n,o),w=Math.atan2(v,_);w>=Math.PI;)w-=2*Math.PI;if(g)I=1;else{var I=trianglesPerArc(w,y.half_width);if(I<1)return}var G=y.vertex_data.vertex_count,_t=y.vertex_data.vertex_elements;addVertex$1(e,r,s,h[0],h[1],y,1),addVertex$1(e,n,s,l[0],l[1],y,1);var _r=n,_o=y.texcoord_index!=null;if(_o)if(d)var Ca=Vector$1.sub(l,h);else{uvCurr=Vector$1.copy(l);var _a=Vector$1.div(Vector$1.sub(p,l),I)}var _l,Qa,Kc=w/I,jc=w<0?-1:1;v>0?(_l=2,Qa=1):(_l=1,Qa=2);for(var _h=0;_h<I;_h++)_h===0&&w<0&&(_r=Vector$1.neg(_r)),_r=Vector$1.rot(_r,Kc),_o&&(d?(Ca=Vector$1.rot(Ca,Kc),uvCurr[0]=Ca[0]+h[0],uvCurr[1]=Ca[1]*y.texcoord_width*y.v_scale+h[1]):uvCurr=Vector$1.add(uvCurr,_a)),addVertex$1(e,_r,s,uvCurr[0],uvCurr[1],y,jc),_t.push(G+_h+_l),_t.push(G),_t.push(G+_h+Qa)}function addCap(e,n,r,o,s,l){var h=Vector$1.neg(r),p=l.texcoord_index!=null;switch(o){case CAP_TYPE$1.square:var d;s?(d=[r[1],-r[0]],addVertex$1(e,Vector$1.add(r,d),r,1,n,l,1),addVertex$1(e,Vector$1.add(h,d),r,0,n,l,1),p&&(n+=.5*l.texcoord_width*l.v_scale),addVertex$1(e,r,r,1,n,l,1),addVertex$1(e,h,r,0,n,l,1)):(d=[-r[1],r[0]],addVertex$1(e,r,r,1,n,l,1),addVertex$1(e,h,r,0,n,l,1),p&&(n+=.5*l.texcoord_width*l.v_scale),addVertex$1(e,Vector$1.add(r,d),r,1,n,l,1),addVertex$1(e,Vector$1.add(h,d),r,0,n,l,1)),indexPairs(1,l);break;case CAP_TYPE$1.round:var g,y,v=zero_v,_=one_v,w=mid_v;s?(g=r,y=h,p&&(n+=.5*l.texcoord_width*l.v_scale,v=one_v,_=zero_v,w=mid_v)):(g=h,y=r),p&&(zero_v[1]=n,one_v[1]=n,mid_v[1]=n),addFan(e,g,zero_vec2,y,r,v,w,_,!0,!1,l);break;case CAP_TYPE$1.butt:return}}function trianglesPerArc(e,n){e<0&&(e=-e);var r=n>2*DEFAULT.MIN_FAN_WIDTH?Math.log2(n/DEFAULT.MIN_FAN_WIDTH):1;return Math.ceil(e/Math.PI*r)}function permuteLine(e,n){for(var r=[],o=0;o<e.length;o++){var s=(o+n)%e.length;s!==0&&r.push(e[s])}return r.push(r[0]),r}var default_dash_color=[255,255,255,255],default_background_color=[0,0,0,0];function renderDashArray(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.dash_color||default_dash_color,o=n.background_color||default_background_color,s=e,l=n.scale||1;s.length%2==1&&Array.prototype.push.apply(s,s);for(var h=!0,p=[],d=0;d<s.length;d++){for(var g=Math.floor(s[d]*l),y=0;y<g;y++)Array.prototype.push.apply(p,h?r:o);h=!h}return{pixels:p=new Uint8Array(p),length:p.length/4}}var Lines=Object.create(Style);Lines.vertex_layouts=[[],[]],Lines.dash_textures={};var DASH_SCALE=20;function buildPolylines(e,n,r,o,s,l){for(var h={closed:l,vertex_data:r,vertex_template:o,half_width:n/2,vertex_layout_index:s,geom_count:0},p=0,d=e.length;p<d;p++)buildPolyline(e[p],h);return h.geom_count}function buildPolyline(e,n){if(!(e.length<2)){for(var r=[e[0]],o=0,s=[],l=[],h=1,p=e.length;h<p;h++)if(e[h][0]!==e[h-1][0]||e[h][1]!==e[h-1][1]){r.push(e[h]);var d=Vector$1.sub(e[h],e[h-1]),g=Vector$1.length(d);s.push(d),l.push([o,o+g]),o+=g}if(!(r.length<2)){var y=0,v=s[s.length-1],_=s[0],w=s[1],I=[0,0];r.length>2&&(n.closed&&(I[0]=Vector$1.signedAngleBetween(v,_)),I[1]=Vector$1.signedAngleBetween(_,w));var G=r[0],_t=l[0];n.closed?(addVertex(G,n,y++,_t,o,I,[v,_]),addVertex(G,n,y++,_t,o,I,[v,_])):(addVertex(G,n,y++,_t,o,I,[_,_]),addVertex(G,n,y++,_t,o,I,[_,_]));for(var _r=1,_o=r.length-1;_r<_o;_r++)G=r[_r],v=s[_r-1],_=s[_r],w=s[_r+1],addVertex(G,n,y++,_t=l[_r-1],o,I,[v,_]),addVertex(G,n,y++,_t,o,I,[v,_]),triangulate(n),_t=l[_r],I[0]=I[1],I[1]=_r!==_o-1?Vector$1.signedAngleBetween(_,w):n.closed?Vector$1.signedAngleBetween(_,s[0]):0,addVertex(G,n,y++,_t,o,I,[v,_]),addVertex(G,n,y++,_t,o,I,[v,_]);G=r[r.length-1],_t=l[l.length-1],_=s[s.length-1],n.closed?(addVertex(G,n,y++,_t,o,I,[_,s[0]]),addVertex(G,n,y++,_t,o,I,[_,s[0]])):(addVertex(G,n,y++,_t,o,I,[_,_]),addVertex(G,n,y++,_t,o,I,[_,_])),triangulate(n)}}}function triangulate(e){var n=e.vertex_data.vertex_elements,r=e.vertex_data.vertex_count-4;n.push(r+2),n.push(r+1),n.push(r+0),n.push(r+2),n.push(r+3),n.push(r+1),e.geom_count+=2}Object.assign(Lines,{name:"lines",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(e,n){return e&&StyleParser.evalCachedDistanceProperty(e,n)||0},calcDistanceNextZoom:function(e,n){n.zoom++;var r=this.calcDistance(e,n);return n.zoom--,r},calcWidth:function(e,n,r){var o=this.calcDistance(e.width,r);if(!(o<0)){var s;if(s=e.next_width?this.calcDistanceNextZoom(e.next_width,r):o/2,o===0&&s===0||s<0)return!1;if(n.width_unscaled=o,n.next_width_unscaled=s,e.next_width){var l=.5*(o+(s*=2));n.width=l*r.units_per_meter_overzoom,n.width_scale=1-s/l}else n.width=o*r.units_per_meter_overzoom,n.width_scale=0;return e.texcoords&&(e.inline_texcoord_width?n.texcoord_width=e.inline_texcoord_width:n.texcoord_width=(n.width_unscaled||n.next_width_unscaled)*r.units_per_meter_overzoom/r.tile.overzoom2),!0}},calcOffset:function(e,n,r){if(e.offset_precalc)n.offset=e.offset_precalc,n.offset_scale=e.offset_scale_precalc;else if(e.offset){var o=this.calcDistance(e.offset,r);if(e.next_offset){var s=2*this.calcDistanceNextZoom(e.next_offset,r);Math.abs(o)>=Math.abs(s)?(n.offset=o*r.units_per_meter_overzoom,n.offset_scale=o!==0?1-s/o:0):(n.offset=s*r.units_per_meter_overzoom,n.offset_scale=s!==0?-1*(1-o/s):0)}else n.offset=o*r.units_per_meter_overzoom,n.offset_scale=0}else n.offset=0,n.offset_scale=0;StyleParser.evalProperty(e.offset_reverse,r)&&(n.offset*=-1)},_parseFeature:function(e,n,r){var o=this.feature_style;if(this.calcWidth(n,o,r)!==!1&&(this.calcOffset(n,o,r),o.color=this.parseColor(n.color,r),o.color)){if(o.variantKey=n.variantKey,o.z=n.z&&StyleParser.evalCachedDistanceProperty(n.z||0,r)||StyleParser.defaults.z,o.height=e.properties.height||StyleParser.defaults.height,o.extrude=StyleParser.evalProperty(n.extrude,r),o.extrude&&(typeof o.extrude=="number"?o.height=o.extrude:Array.isArray(o.extrude)&&(o.height=o.extrude[1])),o.extrude&&o.height&&(o.z+=o.height),o.z*=Geo$1.height_scale,o.height*=Geo$1.height_scale,o.cap=StyleParser.evalProperty(n.cap,r),o.join=StyleParser.evalProperty(n.join,r),o.miter_limit=StyleParser.evalProperty(n.miter_limit,r),o.tile_edges=n.tile_edges,o.outline=o.outline||{width:{},next_width:{},preprocessed:!0},n.outline&&n.outline.visible!==!1&&n.outline.color&&n.outline.width){var s=2*this.calcDistance(n.outline.width,r),l=2*this.calcDistanceNextZoom(n.outline.next_width,r);s===0&&l===0||s<0||l<0?(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null,o.outline.texcoords=!1):(o.outline.width.value=s+o.width_unscaled,o.outline.next_width.value=l+o.next_width_unscaled,o.outline.inline_texcoord_width=o.texcoord_width,o.outline.offset_precalc=o.offset,o.outline.offset_scale_precalc=o.offset_scale,o.outline.color=n.outline.color,o.outline.cap=n.outline.cap,o.outline.join=n.outline.join,o.outline.miter_limit=n.outline.miter_limit,o.outline.texcoords=n.outline.texcoords,o.outline.style=n.outline.style,o.outline.variantKey=n.outline.variantKey,n.outline.order?o.outline.order=this.parseOrder(n.outline.order,r):o.outline.order=o.order,o.outline.order>o.order&&(o.outline.order=o.order),o.outline.order-=.5,o.outline.variant_order=0)}else o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null;return o}},_preprocess:function(e,n){var r=this.sources[n]?this.sources[n].config.uid:"";if(e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.offset=e.offset&&StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits),e.offset&&e.offset.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_offset=StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e.dash=e.dash!==void 0?e.dash:this.dash,e.dash_key=e.dash&&this.dashTextureKey(e.dash,r),e.dash_background_color=e.dash_background_color!==void 0?e.dash_background_color:this.dash_background_color,e.dash_background_color=e.dash_background_color&&StyleParser.parseColor(e.dash_background_color),e.texture_merged=e.dash_key||(e.texture!==void 0?e.texture:this.texture),e.texcoords=this.texcoords||e.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e),e.outline){e.outline.style=e.outline.style||this.name,e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.next_width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.cap=e.outline.cap||e.cap,e.outline.join=e.outline.join||e.join,e.outline.miter_limit=e.outline.miter_limit||e.miter_limit,e.outline.offset=e.offset;var o=this.styles[e.outline.style];o?(e.outline.dash=e.outline.dash!==void 0?e.outline.dash:o.dash,e.outline.texture=e.outline.texture!==void 0?e.outline.texture:o.texture,e.outline.dash!=null?(e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,r),e.outline.texture_merged=e.outline.dash_key):e.outline.dash===null||e.outline.texture!=null?(e.outline.dash_key=null,e.outline.texture_merged=e.outline.texture):(e.outline.dash=e.dash,e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,r),e.outline.texture_merged=e.outline.dash_key),e.outline.dash_background_color=e.outline.dash_background_color!==void 0?e.outline.dash_background_color:o.dash_background_color,e.outline.dash_background_color=e.outline.dash_background_color!==void 0?e.outline.dash_background_color:e.dash_background_color,e.outline.dash_background_color=e.outline.dash_background_color&&StyleParser.parseColor(e.outline.dash_background_color),e.outline.texcoords=o.texcoords||e.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e.outline)):(log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(e.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),e.outline=null)}return e},dashTextureKey:function(e,n){return"__dash_"+n+"_"+this.scene_id+"_"+JSON.stringify(e)},getDashTexture:function(e,n){var r=this.dashTextureKey(e,this.sources[n].config.uid);if(Lines.dash_textures[r]==null){Lines.dash_textures[r]=!0;var o=renderDashArray(e,{scale:DASH_SCALE});this.textureManager.create(this.gl,r,{data:o.pixels,height:o.length,width:1,filtering:"nearest"})}},endData:function(e){var n=this;return Style.endData.call(this,e).then(function(r){if(r){r.uniforms.u_has_line_texture=!1,r.uniforms.u_texture=n.textureManager.default,r.uniforms.u_v_scale_adjust=Geo$1.tile_scale;var o=[],s=function(){var h=r.meshes[l].variant;if(h.texture){var p=r.meshes[l].uniforms=r.meshes[l].uniforms||{};if(p.u_has_line_texture=!0,p.u_texture=h.texture,p.u_texture_ratio=1,h.dash&&(p.u_v_scale_adjust=Geo$1.tile_scale*DASH_SCALE,p.u_dash_background_color=h.dash_background_color||[0,0,0,0]),h.dash_key&&Lines.dash_textures[h.dash_key]==null&&(Lines.dash_textures[h.dash_key]=!0,WorkerBroker.postMessage(n.main_thread_target+".getDashTexture",h.dash,e.source)),n.textureManager.textures[h.texture]==null)o.push(n.textureManager.syncTexturesToWorker([h.texture]).then(function(g){var y=g[h.texture];y&&(p.u_texture_ratio=y.height/y.width)}));else{var d=n.textureManager.textures[h.texture];p.u_texture_ratio=d.height/d.width}}};for(var l in r.meshes)s();return e.mesh_data[n.name]=r,Promise.all(o).then(function(){return r})}return r})},computeVariantForDraw:function(e){var n=e.offset?1:0;return e.dash_key&&(n+=e.dash_key,e.dash_background_color&&(n+=e.dash_background_color)),e.texture_merged&&(n+=e.texture_merged),n=hashString(n+="/"+e.texcoords),e.variantKey=n,{key:n,order:e.variant_order,offset:e.offset?1:0,texcoords:e.texcoords,texture:e.texture_merged,dash:e.dash,dash_key:e.dash_key,dash_background_color:e.dash_background_color}},vertexLayoutForMeshVariant:function(e){if(Lines.vertex_layouts[e.key]==null){var n=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_extrude",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1,static:e.offset?null:[0,0]},{name:"a_scaling",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0,static:e.texcoords?null:[0,0]},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}];Lines.vertex_layouts[e.key]=new VertexLayout(n)}return Lines.vertex_layouts[e.key]},makeVertexTemplate:function(e,n){var r=0;return this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=e.z||0,this.vertex_template[r++]=this.scaleOrder(e.order),this.vertex_template[r++]=0,this.vertex_template[r++]=0,n.variant.offset&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=1024*e.width_scale,this.vertex_template[r++]=1024*e.offset_scale,n.variant.texcoords&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=255*e.color[0],this.vertex_template[r++]=255*e.color[1],this.vertex_template[r++]=255*e.color[2],this.vertex_template[r++]=255*e.color[3],this.selection&&(this.vertex_template[r++]=255*e.selection_color[0],this.vertex_template[r++]=255*e.selection_color[1],this.vertex_template[r++]=255*e.selection_color[2],this.vertex_template[r++]=255*e.selection_color[3]),this.vertex_template},buildLines:function(e,n,r,o,s){if(this.feature_style=this.outline_feature_style,n.outline&&n.outline.color!=null&&n.outline.width.value!=null){var l=this.styles[n.outline.style];l&&l.addFeature(o.feature,n.outline,o)}this.feature_style=this.inline_feature_style;var h=r.vertex_data,p=h.vertex_layout,d=this.makeVertexTemplate(n,r);return buildPolylines$1(e,n.width,h,d,{cap:n.cap,join:n.join,miter_limit:n.miter_limit,extrude_index:p.index.a_extrude,offset_index:p.index.a_offset,texcoord_index:p.index.a_texcoord,texcoord_width:n.texcoord_width,texcoord_normalize:65535,closed_polygon:s&&s.closed_polygon,remove_tile_edges:!n.tile_edges&&s&&s.remove_tile_edges,tile_edge_tolerance:Geo$1.tile_scale*o.tile.pad_scale*2,offset:n.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(e,n,r,o){for(var s=0,l=0;l<e.length;l++)s+=this.buildLines(e[l],n,r,o,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return s}});var TEX_COORDS=[[1,1],[1,-1],[-1,1],[-1,-1]];function addVertex(e,n,r,o,s,l,h){var p=n.vertex_template,d=n.vertex_data;if(setAttribute(n,"a_position",e),setAttribute(n,"a_width",n.half_width),n.vertex_layout_index.a_barycentric){var g=[0,0,0];g[r%3]=1,setAttribute(n,"a_barycentric",g)}setAttribute(n,"a_tangents",h[0].concat(h[1])),setAttribute(n,"a_segment",o),setAttribute(n,"a_texcoord",TEX_COORDS[r%4]),setAttribute(n,"a_length",s),setAttribute(n,"a_closed",n.closed?1:0),setAttribute(n,"a_angles",l),d.addVertex(p)}function setAttribute(e,n,r){var o=r.length,s=e.vertex_template,l=e.vertex_layout_index[n],h=0;if(o)for(;h!==o;)s[l+h]=r[h],h++;else s[l+h]=r}function buildPatternBuffer(e,n){for(var r=e.reduce(function(w,I){return w+I}),o=0,s=[],l=0,h=e.length;l<=h;l+=2){var p=Math.max(1e-4,e[l%h]),d=Math.max(1e-4,e[(l+1)%h]);s.push(o,o+p),o+=p+d}for(var g=new Uint8Array(4*n),y=0,v=function(){var w,I,G,_t=r*_/(n-1),_r=minIdx(s.map(function(_o){return Math.abs(_o-_t)}));_r%2==0?(w=_t<=s[_r]?1:0,I=s[_r],G=s[_r+1]):(w=_t>s[_r]?2:0,I=s[_r-1],G=s[_r]),g[y++]=s[_r],g[y++]=w,g[y++]=I,g[y++]=G},_=0;_<n;_++)v();return g}function minIdx(e){for(var n=e[0],r=0,o=1,s=e.length;o<s;o++)e[o]<n&&(r=o,n=e[o]);return r}var vertex_shader_src=`uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;
#ifdef TANGRAM_DEBUG_TRIANGLES
attribute vec3 a_barycentric;
#endif
attribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_DEBUG_TRIANGLES
varying vec3 v_barycentric;
#endif
varying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#ifndef TANGRAM_HEIGHT_SCALE
float TANGRAM_HEIGHT_SCALE=16.0;
#endif
#define UNPACK_SCALING(x) (x / 1024.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: global
const float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){
#pragma tangram: setup
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
v_modelpos_base_zoom=modelPositionBaseZoom();
#endif
float linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;
#ifdef TANGRAM_DEBUG_TRIANGLES
v_barycentric=a_barycentric;
#endif
v_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;
#pragma tangram: position
v_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);
#if defined(TANGRAM_LIGHTING_VERTEX)
vec3 normal=v_normal;
#pragma tangram: normal
v_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));
#endif
cameraProjection(position);
#ifdef TANGRAM_LAYER_ORDER
applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);
#endif
gl_Position=position;}`,fragment_shader_src=`uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_DEBUG_TRIANGLES
varying vec3 v_barycentric;
#endif
varying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;
#define TANGRAM_NORMAL v_normal
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: global
#pragma tangram: utils
const float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xB11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xB11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){
#pragma tangram: setup
vec4 color=v_color;vec3 normal=TANGRAM_NORMAL;
#ifdef TANGRAM_CROP_BY_TILE
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}
#endif
#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)
calculateNormal(normal);
#endif
#if !defined(TANGRAM_LIGHTING_VERTEX)
#pragma tangram: normal
#endif
#pragma tangram: color
#if defined(TANGRAM_LIGHTING_FRAGMENT)
color=calculateLighting(v_position.xyz-u_eye,normal,color);
#elif defined(TANGRAM_LIGHTING_VERTEX)
color*=v_lighting;
#endif
#pragma tangram: filter
if(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}
#ifdef TANGRAM_DEBUG_TRIANGLES
if(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}
#endif
gl_FragColor=color;}`,PatternLines=Object.create(Style),CAP_TYPE={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},JOIN_TYPE={miter:0,round:1,bevel:2},PATTERN_MAX_WIDTH=1024,DEFAULT_LINE_CAP=CAP_TYPE.round,DEFAULT_JOIN_TYPE=JOIN_TYPE.miter,DEFAULT_DASH_PATTERN=[0,0],VARIANT_UNIQUE_PROP_NAMES="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");function getHashForStyle(e){for(var n=[],r=0,o=VARIANT_UNIQUE_PROP_NAMES.length;r<o;r++){var s=e[VARIANT_UNIQUE_PROP_NAMES[r]];Array.isArray(s)?n.push(s.join("_")):typeof s=="boolean"?n.push(s?1:0):s&&n.push(s.toString())}return n.join("/")}Object.assign(PatternLines,{name:"pattern-lines",built_in:!0,vertex_shader_src,fragment_shader_src,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},PatternLines.vertex_layouts=[]},calcDistance:function(e,n){return e&&StyleParser.evalCachedDistanceProperty(e,n)||0},calcDash:function(e,n){var r=StyleParser.evalProperty(e.dash,n),o=0;return r&&((r=Array.isArray(r)&&r.length?r:DEFAULT_DASH_PATTERN).length%2==1&&(r=r.concat(r)),o=r.reduce(function(s,l){return s+l}),o=+o||0),{dash:r,dash_period:o}},calcWidth:function(e,n,r){var o=this.calcDistance(e.width,r);return!(o<0)&&(n.width=o*r.units_per_meter_overzoom,!0)},getCapType:function(e,n,r){var o=StyleParser.evalProperty(e,n);return CAP_TYPE[o]!==void 0?CAP_TYPE[o]:r},_parseFeature:function(e,n,r){if(this.calcWidth(n,this.feature_style,r)!==!1){var o=this.parseColor(n.color,r);if(o&&o[3]!==0){var s=this.getCapType(n.cap,r,DEFAULT_LINE_CAP),l=StyleParser.evalProperty(n.join,r),h=+StyleParser.evalProperty(n.miter_limit,r),p=this.calcDash(n,r),d=p.dash,g=p.dash_period,y=Object.assign({color:o,antialias:n.antialias,linecaps:[this.getCapType(n.tail_cap,r,s),this.getCapType(n.head_cap,r,s)],join:JOIN_TYPE[l]!==void 0?JOIN_TYPE[l]:DEFAULT_JOIN_TYPE,miter_limit:h>=0?h:3,dash_index:g===0?0:1,dash:d,dash_caps:[this.getCapType(n.tail_cap,r,s),this.getCapType(n.head_cap,r,s)],dash_phase:+StyleParser.evalProperty(n.dash_phase,r)||0,dash_period:g},this.feature_style);return y.z=n.z&&StyleParser.evalCachedDistanceProperty(n.z||0,r)||StyleParser.defaults.z,y.z*=Geo$1.height_scale,y.extrude=StyleParser.evalProperty(n.extrude,r),y.extrude&&(y.extrude===!0?(y.height=e.properties.height!==void 0?e.properties.height:StyleParser.defaults.height,y.min_height=e.properties.min_height!==void 0?e.properties.min_height:StyleParser.defaults.min_height):typeof y.extrude=="number"?(y.height=y.extrude,y.min_height=0):Array.isArray(y.extrude)&&(y.min_height=y.extrude[0],y.height=y.extrude[1]),y.height*=Geo$1.height_scale,y.min_height*=Geo$1.height_scale),this.addMeshVariantForDraw(this.base,y),y}}},_preprocess:function(e,n){e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);var r=+e.antialias;return e.antialias=isNaN(r)?0:r,e},buildRasterTextures:function(e,n){var r=[];for(var o in n.meshes){var s=this.getMeshVariantTypeForDraw({variantKey:o}),l=s.uniforms,h=s.pattern;if(l.u_dash_index){var p="__dash_"+h.join("_")+"_"+e.key+"_"+e.id;r.push({name:p,data:buildPatternBuffer(h,PATTERN_MAX_WIDTH)}),l.u_dash_atlas=p,n.meshes[o].textures=[p]}n.meshes[o].uniforms=l}return n.uniforms=n.uniforms||{},r.length?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",r).then(function(d){return n}):Promise.resolve(n)},loadTextures:function(e){for(var n=[],r=0;r<e.length;r++){var o=e[r],s=this.textureManager.textures[o.name];s||(s=this.textureManager.create(this.gl,o.name,{filtering:"nearest",repeat:!0,width:PATTERN_MAX_WIDTH,height:1,data:o.data})),n.push(s.loading)}return Promise.all(n).then(function(l){return l.map(function(h){return h.retain(),h.name})})},computeVariantForDraw:function(e){var n=getHashForStyle(e);return e.variantKey=n,{key:n,order:e.variant_order,uniforms:{u_antialias:e.antialias,u_linecaps:e.linecaps,u_linejoin:e.join,u_miter_limit:e.miter_limit,u_dash_index:e.dash_index,u_dash_caps:e.dash_caps,u_dash_phase:e.dash_phase,u_dash_period:e.dash_period},pattern:e.dash}},vertexLayoutForMeshVariant:function(e){if(PatternLines.vertex_layouts[e.key]==null){var n=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:gl$1.FLOAT,normalized:!1},{name:"a_segment",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_angles",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.FLOAT,normalized:!0},{name:"a_length",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_closed",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}];this.defines.TANGRAM_DEBUG_TRIANGLES&&n.push({name:"a_barycentric",size:3,type:gl$1.SHORT,normalized:!1}),PatternLines.vertex_layouts[e.key]=new VertexLayout(n)}return PatternLines.vertex_layouts[e.key]},makeVertexTemplate:function(e,n){var r=0;return this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=e.z+e.height||0,this.vertex_template[r++]=this.scaleOrder(e.order),this.vertex_template[r++]=255*e.color[0],this.vertex_template[r++]=255*e.color[1],this.vertex_template[r++]=255*e.color[2],this.vertex_template[r++]=255*e.color[3],this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.selection&&(this.vertex_template[r++]=255*e.selection_color[0],this.vertex_template[r++]=255*e.selection_color[1],this.vertex_template[r++]=255*e.selection_color[2],this.vertex_template[r++]=255*e.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template},buildLines:function(e,n,r,o){var s=arguments.length>4&&arguments[4]!==void 0&&arguments[4],l=r.vertex_data,h=l.vertex_layout,p=this.makeVertexTemplate(n,r);return buildPolylines(e,n.width,l,p,h.index,s)},buildPolygons:function(e,n,r,o){for(var s=0,l=0,h=e.length;l<h;l++)s+=this.buildLines(e[l],n,r,o,!0);return s}});var STICK_WIDTH=1;function buildQuadsForPoints(e,n,r,o){var s=o.quad,l=o.quad_normalize,h=o.offset,p=o.offsets,d=o.offsets_alt,g=o.pre_angles,y=o.pre_angles_alt,v=o.angle,_=o.angles,w=o.angles_alt,I=o.is_flat,G=o.elevate_by_altitude,_t=o.build_stick_points,_r=o.color,_o=o.stick_color,Ca=o.curve,_a=o.texcoord_scale,_l=o.texcoord_normalize,Qa=o.pre_angles_normalize,Kc=o.angles_normalize,jc=o.offsets_normalize;l=l||1;var _h,_m=s[0]/2*l,ry=s[1]/2*l,uy=[[-_m,-ry],[_m,-ry],[_m,ry],[-_m,ry]],ay=n.vertex_elements,ey=n.vertex_count,_y=n.vertex_layout.index,Ey=_y.a_texcoord,My=_y.a_position,Ny=_y.a_shape,Py=_y.a_offset,gv=_y.a_offsets,sv=_y.a_offsets_alt,Kv=_y.a_pre_angles,Ty=_y.a_pre_angles_alt,Gv=_y.a_angles,_v=_y.a_angles_alt,i0=_y.a_is_flat,T0=_y.a_is_stick,Ov=_y.a_color;if(Ey){_l=_l||1;var Yy=_slicedToArray(_a||default_uvs,4),Jv=Yy[0],Y0=Yy[1],T_=Yy[2],A_=Yy[3];_h=[[Jv,Y0],[T_,Y0],[T_,A_],[Jv,A_]]}for(var L0=0,s_=e.length,j0=0;j0<s_;j0++){var m0=e[j0];if(_t){for(var Qv=STICK_WIDTH/2*l,V_=1*l,qv=[[-Qv,0],[+Qv,0],[+Qv,V_],[-Qv,V_]],h0=0;h0<4;h0++)Ey&&(r[Ey+0]=_h[h0][0]*_l,r[Ey+1]=_h[h0][1]*_l),r[My+0]=m0[0],r[My+1]=m0[1],G&&(r[My+2]=MathUtils$1.clamp(m0[2],0,32767)),r[Ny+0]=qv[h0][0],r[Ny+1]=qv[h0][1],r[Ny+2]=0,r[Ov+0]=_o[0],r[Ov+1]=_o[1],r[Ov+2]=_o[2],r[Ov+3]=_o[3],r[T0+0]=255,n.addVertex(r);ay.push(ey+0),ay.push(ey+1),ay.push(ey+2),ay.push(ey+2),ay.push(ey+3),ay.push(ey+0),ey+=4,L0+=2}for(var Nv=0;Nv<4;Nv++)Ey&&(r[Ey+0]=_h[Nv][0]*_l,r[Ey+1]=_h[Nv][1]*_l),r[My+0]=m0[0],r[My+1]=m0[1],G&&(r[My+2]=MathUtils$1.clamp(m0[2],0,32767)),r[Ny+0]=uy[Nv][0],r[Ny+1]=uy[Nv][1],r[Ny+2]=v,r[Ov+0]=_r[0],r[Ov+1]=_r[1],r[Ov+2]=_r[2],r[Ov+3]=_r[3],r[Py+0]=h[0],r[Py+1]=h[1],r[i0+0]=I?255:0,_t&&(r[T0+0]=0),Ca&&(r[Kv+0]=Qa*g[0],r[Kv+1]=Qa*g[1],r[Kv+2]=Qa*g[2],r[Kv+3]=Qa*g[3],r[Gv+0]=Kc*_[0],r[Gv+1]=Kc*_[1],r[Gv+2]=Kc*_[2],r[Gv+3]=Kc*_[3],r[gv+0]=jc*p[0],r[gv+1]=jc*p[1],r[gv+2]=jc*p[2],r[gv+3]=jc*p[3],d&&(r[sv+0]=jc*d[0],r[sv+1]=jc*d[1],r[sv+2]=jc*d[2],r[sv+3]=jc*d[3],r[Ty+0]=Qa*y[0],r[Ty+1]=Qa*y[1],r[Ty+2]=Qa*y[2],r[Ty+3]=Qa*y[3],r[_v+0]=Kc*w[0],r[_v+1]=Kc*w[1],r[_v+2]=Kc*w[2],r[_v+3]=Kc*w[3])),n.addVertex(r);ay.push(ey+0),ay.push(ey+1),ay.push(ey+2),ay.push(ey+2),ay.push(ey+3),ay.push(ey+0),ey+=4,L0+=2}return L0}var id=0,Label={id_prefix:"",nextLabelId:function(){return"".concat(Label.id_prefix,"/").concat(id++)}};function textLayoutToJSON(e){return{priority:e.priority,collide:e.collide,repeat_distance:e.repeat_distance,repeat_group:e.repeat_group,buffer:e.buffer,italic:e.italic}}var lefts=["left","top-left","bottom-left"],rights=["right","top-right","bottom-right"],tops=["top","top-left","top-right"],bottoms=["bottom","bottom-left","bottom-right"],PointAnchor={computeOffset:function(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!r||r==="center")return e;var s=[e[0],e[1]];return o=o||this.default_buffer,this.isLeftAnchor(r)?(s[0]-=n[0]/2,r==="left"&&(s[0]-=o[0])):this.isRightAnchor(r)&&(s[0]+=n[0]/2,r==="right"&&(s[0]+=o[1])),this.isTopAnchor(r)?(s[1]-=n[1]/2,r==="top"&&(s[1]-=o[2])):this.isBottomAnchor(r)&&(s[1]+=n[1]/2,r==="bottom"&&(s[1]+=o[3])),s},alignForAnchor:function(e){if(e&&e!=="center"){if(this.isLeftAnchor(e))return"right";if(this.isRightAnchor(e))return"left"}return"center"},isLeftAnchor:function(e){return lefts.indexOf(e)>-1},isRightAnchor:function(e){return rights.indexOf(e)>-1},isTopAnchor:function(e){return tops.indexOf(e)>-1},isBottomAnchor:function(e){return bottoms.indexOf(e)>-1},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function encircleLine(e,n,r,o,s){var l=[],h=r-e,p=o-n,d=MathUtils$1.getLineLength(e,n,r,o),g=2*s,y=d/g;if(y<=1)l.push(e+h/2,n+p/2,s);else{var v=g/d,_=h*v,w=p*v;(y=d/s/2)%1&&l.push(r-_/2,o-w/2,s),y|=0;for(var I=e+_/2,G=n+w/2;y--;)l.push(I,G,s),I+=_,G+=w}return l}var LabelPoint=function(){return _createClass(function e(n,r,o,s){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.position=[n[0],n[1]],n[2]!==void 0&&this.position.push(n[2]),this.size=r,this.layout=s,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||PointAnchor.alignForAnchor(this.anchor),this._is_flat=o},[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:textLayoutToJSON(this.layout)}}},{key:"inTileBounds",value:function(){var e=this.getAABB(),n=e.left,r=e.top,o=e.right,s=e.bottom;return Utils$1.pointInTile([n,r])&&Utils$1.pointInTile([o,s])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(e){this._circles=void 0,this._aabb=void 0,this.anchor=e,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var e=[this.layout.offset[0],this.layout.offset[1]];if(this.parent){var n=this.parent;e=PointAnchor.computeOffset(e,n.size,n.anchor,PointAnchor.zero_buffer),e=PointAnchor.computeOffset(e,n.size,this.anchor,PointAnchor.zero_buffer),n.offset!==StyleParser.zeroPair&&(e===StyleParser.zeroPair?e=n.offset:(e[0]+=n.offset[0],e[1]+=n.offset[1]))}return PointAnchor.computeOffset(e,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){if(!this.angle)return[];if(!this._circles){var e=this.layout.units_per_pixel,n=this.size[0]/2*e,r=n*Math.cos(this.angle),o=n*Math.sin(this.angle),s=-r,l=-o,h=_slicedToArray(this.position,2),p=h[0],d=h[1];r+=p,o+=d*=-1,s+=p,l+=d;var g=this.size[1]/2*e;this._circles=encircleLine(r,o,s,l,g)}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){var e=this.layout.units_per_pixel,n=(this.size[0]/2+this.layout.buffer[0])*e,r=(this.size[1]/2+this.layout.buffer[1])*e,o=this.position[0]+this.offset[0]*e,s=this.position[1]-this.offset[1]*e;this._aabb={left:o-n,top:s+r,right:o+n,bottom:s-r}}return this._aabb}},{key:"getSides",value:function(){var e=this.getAABB(),n=e.left,r=e.top,o=e.right,s=(r+e.bottom)/2;return[n,s,o,s]}}])}();LabelPoint.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var PLACEMENT$1=LabelPoint.PLACEMENT,default_spacing=80;function placePointsOnLine(e,n,r,o){var s=[],l=o.placement,h=Math.max(n[0],n[1])*o.placement_min_length_ratio*o.units_per_pixel;switch(l){case PLACEMENT$1.SPACED:var p=getPositionsAndAngles(e,h,o);if(!p)return[];for(var d=p.positions,g=p.angles,y=0;y<d.length;y++){var v=d[y],_=g[y];if(o.tile_edges===!0||!isCoordOutsideTile(v)){var w=new LabelPoint(v,n,r,o);w.angle=_,s.push(w)}}break;case PLACEMENT$1.VERTEX:for(var I,G,_t,_r=0;_r<e.length-1;_r++)I=e[_r],G=e[_r+1],o.tile_edges!==!0&&isCoordOutsideTile(I)||((_t=new LabelPoint(I,n,r,o)).angle=getAngle(I,G,o.angle),s.push(_t));(_t=new LabelPoint(G,n,r,o)).angle=getAngle(I,G,o.angle),s.push(_t);break;case PLACEMENT$1.MIDPOINT:for(var _o=0;_o<e.length-1;_o++){var Ca=e[_o],_a=e[_o+1],_l=[.5*(Ca[0]+_a[0]),.5*(Ca[1]+_a[1])];if((o.tile_edges===!0||!isCoordOutsideTile(_l))&&(!h||norm(Ca,_a)>h)){var Qa=new LabelPoint(_l,n,r,o);Qa.angle=getAngle(Ca,_a,o.angle),s.push(Qa)}}}return s}function getPositionsAndAngles(e,n,r){var o=r.units_per_pixel,s=(r.placement_spacing||default_spacing)*o,l=getLineLength(e);if(l<=n)return!1;for(var h=Math.max(Math.floor(l/s),1),p=[],d=[],g=.5*(l-(h-1)*s),y=0;y<h;y++){var v=interpolateLine(e,g,n,r),_=v.position,w=v.angle;_!=null&&w!=null&&(p.push(_),d.push(w)),g+=s}return{positions:p,angles:d}}function getAngle(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return r==="auto"?Math.atan2(n[0]-e[0],n[1]-e[1]):r}function getLineLength(e){for(var n=0,r=0;r<e.length-1;r++)n+=norm(e[r],e[r+1]);return n}function norm(e,n){return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function interpolateLine(e,n,r,o){for(var s,l,h=0,p=0;p<e.length-1;p++){var d=e[p],g=e[p+1],y=norm(d,g);if(!(y<=r)&&(h+=y)>n){s=interpolateSegment(d,g,h-n),l=getAngle(d,g,o.angle);break}}return{position:s,angle:l}}function interpolateSegment(e,n,r){var o=r/norm(e,n);return[o*e[0]+(1-o)*n[0],o*e[1]+(1-o)*n[1]]}var TextSettings={key:function(e){return[e.style,e.weight,e.family,e.px_size,e.fill,e.stroke,e.stroke_width,e.transform,e.text_wrap,e.max_lines,e.supersample,e.background_color,e.outline_color,e.outline_width,e.padding,Utils$1.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(e,n,r){var o={};if(n.font=n.font||this.defaults,o.can_articulate=n.can_articulate,o.fill=n.font.fill&&Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.font.fill,r))||this.defaults.fill,o.style=n.font.style||this.defaults.style,o.weight=n.font.weight||this.defaults.weight,n.font.family?(o.family=n.font.family,o.family!==this.defaults.family&&(o.family+=", "+this.defaults.family)):o.family=this.defaults.family,o.transform=n.font.transform,o.size=n.font.size||this.defaults.size,o.supersample=n.supersample_text?1.5:1,o.px_size=StyleParser.evalCachedProperty(n.font.px_size,r)*o.supersample,o.px_size!==0){n.font.stroke&&n.font.stroke.color&&(o.stroke=Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.font.stroke.color,r)||this.defaults.stroke),o.stroke_width=StyleParser.evalCachedProperty(n.font.stroke.width,r)||this.defaults.stroke_width),o.font_css=this.fontCSS(o);var s=n.text_wrap;return s==null&&Geo$1.geometryType(e.geometry.type)!=="line"&&(s=!0),s===!0&&(s=this.defaults.text_wrap),o.text_wrap=s,o.max_lines=n.max_lines||this.defaults.max_lines,o.background_color=n.background&&n.background.color&&!n.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.background.color,r)):this.defaults.background_color,o.outline_color=n.outline&&n.outline.color&&!n.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.outline.color,r)):this.defaults.outline_color,o.outline_width=n.outline&&n.outline.width&&!n.can_articulate?StyleParser.evalCachedProperty(n.outline.width,r):this.defaults.outline_width,o.padding=n.padding&&!n.can_articulate?StyleParser.evalCachedProperty(n.padding,r):this.defaults.padding,o}},fontCSS:function(e){return[e.style,e.weight,e.px_size+"px",e.family].filter(function(n){return n}).join(" ")}},fontfaceobserver_standalone={exports:{}};fontfaceobserver_standalone.exports,function(e){(function(){function n(w,I){document.addEventListener?w.addEventListener("scroll",I,!1):w.attachEvent("scroll",I)}function r(w){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(w)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function o(w,I){w.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+I+";"}function s(w){var I=w.a.offsetWidth,G=I+100;return w.f.style.width=G+"px",w.c.scrollLeft=G,w.b.scrollLeft=w.b.scrollWidth+100,w.g!==I&&(w.g=I,!0)}function l(w,I){function G(){var _r=_t;s(_r)&&_r.a.parentNode&&I(_r.g)}var _t=w;n(w.b,G),n(w.c,G),s(w)}function h(w,I){var G=I||{};this.family=w,this.style=G.style||"normal",this.weight=G.weight||"normal",this.stretch=G.stretch||"normal"}var p=null,d=null,g=null,y=null;function v(){if(g===null){var w=document.createElement("div");try{w.style.font="condensed 100px sans-serif"}catch{}g=w.style.font!==""}return g}function _(w,I){return[w.style,w.weight,v()?w.stretch:"","100px",I].join(" ")}h.prototype.load=function(w,I){var G=this,_t=w||"BESbswy",_r=0,_o=I||3e3,Ca=new Date().getTime();return new Promise(function(_a,_l){var Qa;if(y===null&&(y=!!document.fonts),(Qa=y)&&(d===null&&(d=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),Qa=!d),Qa){Qa=new Promise(function(jc,_h){(function _m(){new Date().getTime()-Ca>=_o?_h():document.fonts.load(_(G,'"'+G.family+'"'),_t).then(function(ry){1<=ry.length?jc():setTimeout(_m,25)},function(){_h()})})()});var Kc=new Promise(function(jc,_h){_r=setTimeout(_h,_o)});Promise.race([Kc,Qa]).then(function(){clearTimeout(_r),_a(G)},function(){_l(G)})}else(function(jc){document.body?jc():document.addEventListener?document.addEventListener("DOMContentLoaded",function _h(){document.removeEventListener("DOMContentLoaded",_h),jc()}):document.attachEvent("onreadystatechange",function _h(){document.readyState!="interactive"&&document.readyState!="complete"||(document.detachEvent("onreadystatechange",_h),jc())})})(function(){function jc(){var Py;(Py=uy!=-1&&ay!=-1||uy!=-1&&ey!=-1||ay!=-1&&ey!=-1)&&((Py=uy!=ay&&uy!=ey&&ay!=ey)||(p===null&&(Py=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),p=!!Py&&(536>parseInt(Py[1],10)||parseInt(Py[1],10)===536&&11>=parseInt(Py[2],10))),Py=p&&(uy==_y&&ay==_y&&ey==_y||uy==Ey&&ay==Ey&&ey==Ey||uy==My&&ay==My&&ey==My)),Py=!Py),Py&&(Ny.parentNode&&Ny.parentNode.removeChild(Ny),clearTimeout(_r),_a(G))}var _h=new r(_t),_m=new r(_t),ry=new r(_t),uy=-1,ay=-1,ey=-1,_y=-1,Ey=-1,My=-1,Ny=document.createElement("div");Ny.dir="ltr",o(_h,_(G,"sans-serif")),o(_m,_(G,"serif")),o(ry,_(G,"monospace")),Ny.appendChild(_h.a),Ny.appendChild(_m.a),Ny.appendChild(ry.a),document.body.appendChild(Ny),_y=_h.a.offsetWidth,Ey=_m.a.offsetWidth,My=ry.a.offsetWidth,function Py(){if(new Date().getTime()-Ca>=_o)Ny.parentNode&&Ny.parentNode.removeChild(Ny),_l(G);else{var gv=document.hidden;gv!==!0&&gv!==void 0||(uy=_h.a.offsetWidth,ay=_m.a.offsetWidth,ey=ry.a.offsetWidth,jc()),_r=setTimeout(Py,50)}}(),l(_h,function(Py){uy=Py,jc()}),o(_h,_(G,'"'+G.family+'",sans-serif')),l(_m,function(Py){ay=Py,jc()}),o(_m,_(G,'"'+G.family+'",serif')),l(ry,function(Py){ey=Py,jc()}),o(ry,_(G,'"'+G.family+'",monospace'))})})},e.exports=h})()}(fontfaceobserver_standalone);var fontfaceobserver_standaloneExports=fontfaceobserver_standalone.exports,FontFaceObserver=getDefaultExportFromCjs(fontfaceobserver_standaloneExports),FontManager={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(e){var n=this,r=JSON.stringify(e)===this.last_loaded;if(e&&!r){var o=[],s=function(h){Array.isArray(e[h])?e[h].forEach(function(p){return o.push(n.loadFontFace(h,p))}):o.push(n.loadFontFace(h,e[h]))};for(var l in e)s(l);this.last_loaded=JSON.stringify(e),this.fonts_loaded=Promise.all(o.filter(function(h){return h}))}return this.fonts_loaded},loadFontFace:function(e,n){if(n!=null&&(_typeof(n)==="object"||n==="external")){var r={family:e},o=Promise.resolve();_typeof(n)==="object"&&(Object.assign(r,n),typeof n.url=="string"&&(o=this.injectFontFace(r)));var s=new FontFaceObserver(e,r);return o.then(function(){return s.load()}).then(function(){log("debug","Font face '".concat(e,"' is available"),r)},function(){log("debug","Font face '".concat(e,"' is NOT available"),r)})}},injectFontFace:function(e){var n=this,r=e.family,o=e.url,s=e.weight,l=e.style;this.supports_native_font_loading===void 0&&(this.supports_native_font_loading=window.FontFace!==void 0);var h=Promise.resolve(o);return o.slice(0,5)==="blob:"&&(h=Utils$1.io(o,6e4,"arraybuffer").then(function(p){var d=new Uint8Array(p);if(n.supports_native_font_loading)return d;for(var g="",y=0;y<d.length;y++)g+=String.fromCharCode(d[y]);return"data:font/opentype;base64,"+btoa(g)})),h.then(function(p){if(n.supports_native_font_loading){var d;typeof p=="string"?d=new FontFace(r,"url(".concat(encodeURI(p),")"),{weight:s,style:l}):p instanceof Uint8Array&&(d=new FontFace(r,p,{weight:s,style:l})),document.fonts.add(d),log("trace","Adding FontFace to document.fonts:",d)}else{var g=`
                    @font-face {
                        font-family: '`.concat(r,`';
                        font-weight: `).concat(s||"normal",`;
                        font-style: `).concat(l||"normal",`;
                        src: url(`).concat(encodeURI(p),`);
                    }
                `),y=document.createElement("style");y.appendChild(document.createTextNode("")),document.head.appendChild(y),y.sheet.insertRule(g,0),log("trace","Injecting CSS font face:",g)}})}},CanvasText=function(){function e(){_classCallCheck(this,e),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=layout$1("binary-tree")}return _createClass(e,[{key:"createCanvas",value:function(n,r){var o=document.createElement("canvas");return n&&r&&(o.width=n,o.height=r),o.style.backgroundColor="transparent",o}},{key:"setFont",value:function(n,r){var o=r.font_css,s=r.fill,l=r.stroke,h=r.stroke_width,p=r.px_size,d=r.supersample;this.px_size=p;var g=Utils$1.device_pixel_ratio*d;l&&h>0&&(n.strokeStyle=l,n.lineWidth=h*g),n.fillStyle=s,n.textBaseline="bottom",n.font=o,n.miterLimit=2}},{key:"textSizes",value:function(n,r,o){var s=this;return FontManager.loadFonts().then(function(){return Task.add({type:"textSizes",run:s.processTextSizesTask.bind(s),texts:r,tile_id:n,cursor:{ctx:o,styles:Object.keys(r),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function(n){var r=n.cursor,o=n.texts,s=r.ctx;for(r.style_idx=r.style_idx||0;r.style_idx<r.styles.length;){var l=r.styles[r.style_idx];r.text_idx==null&&(r.text_idx=0,r.texts=Object.keys(o[l]));for(var h=o[l],p=!0;r.text_idx<r.texts.length;){var d=r.texts[r.text_idx],g=h[d],y=g.text_settings;if(p&&(this.setFont(s,y),p=!1),g.size=this.textSize(s,l,d,y).size,y.can_articulate){var v=!1,_=!1;if(isTextRTL(d)&&(isTextNeutral(d)?v=!0:_=!0),g.isRTL=v,g.no_curving=_||isTextCurveBlacklisted(d),g.vertical_buffer=this.vertical_text_buffer+y.outline_width+(y.padding[0]+y.padding[2])/2,g.segment_sizes=[],!g.no_curving){var w=splitLabelText(d,v);g.segments=w;for(var I=0;I<w.length;I++)g.segment_sizes.push(this.textSize(s,l,w[I],y).size)}}if(r.text_idx++,!Task.shouldContinue(n))return!1}r.text_idx=null,r.style_idx++}return Task.finish(n,{texts:o}),!0}},{key:"textSize",value:function(n,r,o,s){var l=s.transform,h=s.text_wrap,p=s.max_lines,d=s.stroke_width,g=d===void 0?0:d,y=s.supersample,v=s.padding,_=s.outline_width,w=s.can_articulate;if(e.cache.text[r]=e.cache.text[r]||{},e.cache.text[r][o])return e.cache.stats.text_hits++,e.cache.text[r][o];e.cache.stats.text_misses++,e.cache.text_count++;var I=Utils$1.device_pixel_ratio*y,G=this.applyTextTransform(o,l),_t=I*(this.vertical_text_buffer+_+(v[0]+v[2])/2),_r=I*(this.horizontal_text_buffer+_+g+(v[1]+v[3])/2),_o=2*I,Ca=this.px_size+_o,_a=MultiLine.parse(G,h,p,Ca,n),_l=_a.height,Qa=_a.width,Kc=_a.lines,jc=[Qa/I,_l/I];w||(jc[0]+=2*_r/I,jc[1]+=2*_t/I);var _h=[Qa+2*_r,_l+2*_t],_m=[_h[0]/I,_h[1]/I];return e.cache.text[r][o]={lines:Kc,size:{collision_size:jc,texture_size:_h,logical_size:_m,line_height:Ca}},e.cache.text[r][o]}},{key:"drawTextMultiLine",value:function(n,r,o,s,l,h){var p=_slicedToArray(o,2),d=p[0],g=p[1],y=Utils$1.device_pixel_ratio*l.supersample,v=l.stroke_width||0,_=l.stroke;l.background_color&&(n.fillStyle=l.background_color,n.fillRect(d,g,s.texture_size[0],s.texture_size[1]));var w=l.outline_width*y,I=l.outline_color;w&&I&&(n.strokeStyle=I,n.lineWidth=w,n.strokeRect(d+w/2,g+w/2,s.texture_size[0]-w,s.texture_size[1]-w)),(l.background_color||w&&I)&&this.setFont(n,l);for(var G=s.line_height,_t=g,_r=0;_r<r.length;_r++){var _o=r[_r];this.drawTextLine(n,_o,[d,_t],s,l,h),_t+=G}if(debugSettings$1.draw_label_collision_boxes){n.save();var Ca=y*(this.horizontal_text_buffer+l.outline_width+v+(l.padding[1]+l.padding[3])/2),_a=y*(this.vertical_text_buffer+l.outline_width+(l.padding[0]+l.padding[2])/2),_l=s.collision_size;n.strokeStyle="blue",n.lineWidth=2,n.strokeRect(d+Ca,g+_a,y*_l[0],y*_l[1]),h==="curved"&&_&&v>0&&n.strokeRect(d+s.texture_size[0]+Ca,g+_a,y*_l[0],y*_l[1]),n.restore()}if(debugSettings$1.draw_label_texture_boxes){n.save();var Qa=s.texture_size;n.strokeStyle="green",n.lineWidth=2,n.strokeRect(d+2,g+2,Qa[0]-4,Qa[1]-4),h==="curved"&&_&&v>0&&n.strokeRect(d+2+s.texture_size[0],g+2,Qa[0]-4,Qa[1]-4),n.restore()}}},{key:"drawTextLine",value:function(n,r,o,s,l,h){var p=_slicedToArray(o,2),d=p[0],g=p[1],y=l.stroke,v=l.stroke_width,_=v===void 0?0:v,w=l.transform,I=l.align,G=l.supersample,_t=l.padding,_r=l.outline_width,_o=Utils$1.device_pixel_ratio*G;I=I||"center";var Ca,_a=s.texture_size,_l=s.line_height,Qa=_o*(this.vertical_text_buffer+_r),Kc=_o*(this.horizontal_text_buffer+_r+_),jc=this.applyTextTransform(r.text,w);I==="left"?Ca=d+Kc+_t[3]*_o:I==="center"?Ca=d+_a[0]/2-r.width/2-(_t[1]-_t[3])*_o/2:I==="right"&&(Ca=d+_a[0]-r.width-Kc-_t[1]*_o);var _h=g+Qa+_l+_t[0]*_o;if(y&&_>0){var _m=h==="curved"?_a[0]:0;n.strokeText(jc,Ca+_m,_h)}n.fillText(jc,Ca,_h)}},{key:"rasterize",value:function(n,r,o,s,l,h){return Task.removeForTile(o),Task.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:e.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:n,textures:r,texture_prefix:s,gl:l,tile_id:o,texture_manager:h,cursor:{styles:Object.keys(n),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(n){if(!Task.shouldContinue(n))return!1;for(var r,o=n.cursor,s=n.texts,l=n.textures;o.texture_idx<n.textures.length;){var h=!1;r=l[o.texture_idx];for(var p=this.createCanvas.apply(this,_toConsumableArray(r.texture_size)),d=p.getContext("2d");o.style_idx<o.styles.length;){var g=o.styles[o.style_idx];o.text_idx==null&&(o.text_idx=0,o.texts=Object.keys(s[g]));for(var y=s[g],v=!0;o.text_idx<o.texts.length;){var _=o.texts[o.text_idx],w=y[_],I=w.text_settings;if(v&&(this.setFont(d,I),v=!1),I.can_articulate){w.texcoords=w.texcoords||{};for(var G=0;G<w.type.length;G++){var _t=w.type[G];switch(_t){case"straight":if(w.textures[G]!==o.texture_idx)continue;var _r=w.isRTL?_.split().reverse().join():_,_o=r.texcoord_cache[g][_r],Ca=void 0;if(_o.texcoord)Ca=_o.texcoord;else{var _a=_o.texture_position,_l=this.textSize(d,g,_r,I),Qa=_l.size,Kc=_l.lines;this.drawTextMultiLine(d,Kc,_a,Qa,I,_t),Ca=n.texture_manager.getTexcoordsForSprite(_a,Qa.texture_size,r.texture_size),_o.texcoord=Ca}w.texcoords[_t]={texcoord:Ca,texture_id:_o.texture_id};break;case"curved":var jc=w.segments;w.texcoords.curved=[],w.texcoords_stroke=[];for(var _h=0;_h<jc.length;_h++)if(w.textures[G][_h]===o.texture_idx){var _m=jc[_h],ry=r.texcoord_cache[g][_m],uy=void 0,ay=void 0;if(ry.texcoord&&ry.texcoord_stroke)uy=ry.texcoord,ay=ry.texcoord_stroke,w.texcoords_stroke.push(ay);else{var ey=ry.texture_position,_y=this.textSize(d,g,_m,I),Ey=_y.size,My=_y.lines;this.drawTextMultiLine(d,My,ey,Ey,I,_t),uy=n.texture_manager.getTexcoordsForSprite(ey,Ey.texture_size,r.texture_size),I.stroke&&I.stroke_width>0?ay=n.texture_manager.getTexcoordsForSprite([ey[0]+Ey.texture_size[0],ey[1]],Ey.texture_size,r.texture_size):(h=!0,ay=n.texture_manager.getTexcoordsForSprite([r.texture_size[0],r.texture_size[1]],[0,0],r.texture_size)),ry.texcoord=uy,ry.texcoord_stroke=ay,w.texcoords_stroke.push(ay)}w.texcoords.curved.push({texcoord:uy,texture_id:ry.texture_id})}}}}else{var Ny=this.textSize(d,g,_,I).lines;for(var Py in w.align)w.align[Py].texture_id===o.texture_idx&&(this.drawTextMultiLine(d,Ny,w.align[Py].texture_position,w.size,{stroke:I.stroke,stroke_width:I.stroke_width,transform:I.transform,supersample:I.supersample,align:Py,background_color:I.background_color,outline_width:I.outline_width,outline_color:I.outline_color,padding:I.padding,fill:I.fill,font_css:I.font_css,px_size:I.px_size}),w.align[Py].texcoords=n.texture_manager.getTexcoordsForSprite(w.align[Py].texture_position,w.size.texture_size,r.texture_size))}o.text_idx++}o.text_idx=null,o.style_idx++}h===!0&&(d.fillStyle="rgba(0, 0, 0, 0)",d.fillRect(p.width-1,p.height-1,1,1));var gv=n.texture_prefix+o.texture_idx;n.texture_manager.create(n.gl,gv,{element:p,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),o.texture_names.push(gv),o.texture_idx++,o.style_idx=0,p.width=0,p.height=0}return Task.finish(n,o.texture_names),!0}},{key:"setTextureTextPositions",value:function(n){var r={texture_id:0,texcoord_cache:{}},o=[];for(var s in n){var l=n[s];for(var h in l){var p=l[h],d=p.text_settings,g=d.can_articulate,y=d.stroke,v=d.stroke_width;if(g){p.textures=[],r.texcoord_cache[s]=r.texcoord_cache[s]||{};for(var _=0;_<p.type.length;_++)switch(p.type[_]){case"straight":var w=p.isRTL?h.split().reverse().join():h;if(!r.texcoord_cache[s][w]){var I=p.size.texture_size;r.texcoord_cache[s][w]={},this.placeText(I[0],I[1],{can_articulate:g,style:s,word:w})}p.textures[_]=r.texture_id;break;case"curved":p.textures[_]=[];for(var G=0;G<p.segment_sizes.length;G++){var _t=p.segments[G];if(!r.texcoord_cache[s][_t]){var _r=p.segment_sizes[G].texture_size,_o=_r[0];y&&v>0&&(_o*=2),r.texcoord_cache[s][_t]={},this.placeText(_o,_r[1],{can_articulate:g,style:s,word:_t})}p.textures[_].push(r.texture_id)}}}else{var Ca=p.size.texture_size;this.placeText(Ca[0],Ca[1],{can_articulate:g,text_info:p})}}}var _a=this.layout.export(),_l=_a.items,Qa=_a.width,Kc=_a.height;r.texcoord_cache={};for(var jc=0,_h=_l.length;jc<_h;jc++){var _m=_l[jc],ry=_m.x,uy=_m.y;if(_m.meta.can_articulate){var _y=_m.meta,Ey=_y.style,My=_y.word;r.texcoord_cache[Ey]=r.texcoord_cache[Ey]||{},r.texcoord_cache[Ey][My]||(r.texcoord_cache[Ey][My]={texture_id:r.texture_id,texture_position:[ry,uy]})}else{var ay=_m.meta.text_info;for(var ey in ay.align)ay.align[ey].texture_id=r.texture_id,ay.align[ey].texture_position=[ry,uy]}}return Qa>0&&Kc>0&&(o[r.texture_id]={texture_size:[Qa,Kc],texcoord_cache:r.texcoord_cache}),o}},{key:"placeText",value:function(n,r,o){this.layout.addItem({width:n+this.vertical_text_buffer,height:r+this.vertical_text_buffer,meta:o})}},{key:"applyTextTransform",value:function(n,r){return r==="capitalize"?n.replace(/\w\S*/g,function(o){return o.charAt(0).toUpperCase()+o.substr(1)}):r==="uppercase"?n.toUpperCase():r==="lowercase"?n.toLowerCase():n}}],[{key:"fontPixelSize",value:function(n){if(n!=null){var r=_slicedToArray((n=typeof n=="string"?n:String(n)).match(e.font_size_re)||[],3),o=r[1],s=r[2];return(s=s||"px")==="em"?o*=16:s==="pt"?o/=.75:s==="%"&&(o/=6.25),o=StyleParser.parsePositiveNumber(o),o*=Utils$1.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){e.cache.text_count>e.cache.text_count_max&&(e.cache.text={},e.cache.text_count=0,log("debug","CanvasText: pruning text cache")),Object.keys(e.cache.segment).length>e.cache.segment_count_max&&(e.cache.segment={},log("debug","CanvasText: pruning segment cache"))}}])}();CanvasText.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,CanvasText.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},CanvasText.EMPTY_TEXTURES_ARR=[],CanvasText.returnNoTextures=function(){return CanvasText.EMPTY_TEXTURES_ARR};var rtlDirCheck=new RegExp("[\u0591-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]");function isTextRTL(e){return rtlDirCheck.test(e)}var neutral_chars="\0-/:-@[-`{-\xBF\xD7\xF7\u02B9-\u02FF\u2000-\u2BFF\u2010-\u2029\u202C\u202F-\u2BFF",neutralDirCheck=new RegExp("["+neutral_chars+"]+");function isTextNeutral(e){return neutralDirCheck.test(e)}var markRTL="\u200F",arabic_range=new RegExp("^["+neutral_chars+"\u0600-\u06FF]+"),arabic_splitters=new RegExp("["+neutral_chars+"\u0622-\u0625\u0627\u062F-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06C4-\u06CB\u06CF\u06D2\u06D3\u06EE\u06EF]"),arabic_vowels=new RegExp("^[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]+"),accents_and_vowels="[\u0300-\u036F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u07A6-\u07B0\u0900-\u0903\u093A-\u094C\u094E\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09CC\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C-\u0A4C\u0A51\u0A81-\u0A83\u0ABC\u0ABE-\u0ACC\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B4C\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C4C\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CCC\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D4C\u0D4E\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F83\u0F86\u0F87\u0F8D-\u0FBC\u0FC6\u102B-\u1038\u103A-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u17B4-\u17D1\u17D3\u1A55-\u1A5E\u1A61-\u1A7C\u1DC0-\u1DFF\u20D0-\u20FF]",combo_characters="[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0C4D\u0CCD\u0D4D\u0F84\u1039\u17D2\u1A60\u1A7F]",graphemeRegex=new RegExp("^.(?:"+accents_and_vowels+"+)?("+combo_characters+"\\W(?:"+accents_and_vowels+"+)?)*"),curve_blacklist={Mongolian:"\u1800-\u18AF"},curve_blacklist_range=Object.keys(curve_blacklist).map(function(e){return curve_blacklist[e]}).join(""),curve_blacklist_test=new RegExp("["+curve_blacklist_range+"]");function isTextCurveBlacklisted(e){return curve_blacklist_test.test(e)}var default_segment_length=2;function splitLabelText(e,n){var r=n?1:default_segment_length;if(e.length<r)return[e];var o=e;if(CanvasText.cache.segment[o])return CanvasText.cache.stats.segment_hits++,CanvasText.cache.segment[o];var s=[];if(arabic_range.exec(e)){s=e.split(arabic_splitters);for(var l=-1,h=0;h<s.length-1;h++){if(h>0){var p=arabic_vowels.exec(s[h]);p&&(s[h]=s[h].substring(p[0].length),s[h-1]+=p[0],l+=p[0].length)}l+=1+s[h].length,s[h]+=e.slice(l,l+1)}e=""}for(;e.length;){for(var d="",g=e,y=0;y<r&&g.length;y++){var v=(graphemeRegex.exec(g)||g)[0];d+=v,g=g.substring(v.length)}s.push(d),e=e.substring(d.length)}return n&&s.reverse(),CanvasText.cache.stats.segment_misses++,CanvasText.cache.segment[o]=s,s}var MultiLine=function(){function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0;_classCallCheck(this,e),this.width=0,this.height=0,this.lines=[],this.max_lines=r,this.text_wrap=o,this.context=n}return _createClass(e,[{key:"createLine",value:function(n){return this.lines.length<this.max_lines&&new Line(n,this.text_wrap)}},{key:"push",value:function(n){if(this.lines.length<this.max_lines){var r=this.context.measureText(n.text).width;return n.width=r,r>this.width&&(this.width=Math.ceil(r)),this.lines.push(n),this.height+=n.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(n,r){return!!this.push(n)&&this.createLine(r)}},{key:"addEllipsis",value:function(){var n=this.lines[this.lines.length-1],r=Math.ceil(this.context.measureText(e.ellipsis).width);n.append(e.ellipsis),n.width+=r,n.width>this.width&&(this.width=n.width)}},{key:"finish",value:function(n){n?this.push(n):this.addEllipsis()}}],[{key:"parse",value:function(n,r,o,s,l){var h;h=typeof r=="number"?n.split(" "):[n];for(var p=new e(l,o,r),d=p.createLine(s),g=0;g<h.length;g++){for(var y=h[g].split(`
`),v=g===0,_=0;_<y.length&&d;_++){var w=y[_];isTextRTL(w)&&isTextNeutral(w[w.length-1])&&(w+=markRTL);var I=v?w:" "+w;if(r&&g>0&&d.exceedsTextwrap(I)){if(!(d=p.advance(d,s)))break;d.append(w),v=!0}else d.append(I);_<y.length-1&&(d=p.advance(d,s),v=!0)}g===h.length-1&&p.finish(d)}return p}}])}();MultiLine.ellipsis="...";var Line=function(){return _createClass(function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_classCallCheck(this,e),this.chars=0,this.text="",this.height=Math.ceil(n),this.text_wrap=r},[{key:"append",value:function(e){this.chars+=e.length,this.text+=e}},{key:"exceedsTextwrap",value:function(e){return e.length+this.chars>this.text_wrap}}])}(),TextLabels={resetText:function(){this.texts={}},freeText:function(e){delete this.texts[e.id]},parseTextFeature:function(e,n,r,o){var s=this.parseTextSource(e,n,r);if(s!=null&&s!==""){var l=TextSettings.compute(e,n,r);if(l){var h=TextSettings.key(l);this.texts[o.id]=this.texts[o.id]||{};var p=this.texts[o.id][h]=this.texts[o.id][h]||{};if(s instanceof Object){var d=[],g=s.left+"-"+s.right;for(var y in s){var v=s[y];if(v){var _=this.computeTextLayout({},e,n,r,o,v,l,g,y);p[v]||(p[v]={text_settings:l,ref:0}),d.push({draw:n,text:v,text_settings_key:h,layout:_})}}return d.length>0&&d}var w=this.computeTextLayout({},e,n,r,o,s,l);return p[s]||(p[s]={text_settings:l,ref:0}),{draw:n,text:s,text_settings_key:h,layout:w}}}},parseTextSource:function(e,n,r){var o,s=n.text_source||"name";if(s!=null&&_typeof(s)==="object")for(var l in o={},s)o[l]=this.parseTextSourceValue(s[l],e,r);else o=this.parseTextSourceValue(s,e,r);return o},parseTextSourceValue:function(e,n,r){var o;if(Array.isArray(e)){for(var s=0;s<e.length;s++)if(typeof e[s]=="string"?o=n.properties[e[s]]:typeof e[s]=="function"&&(o=e[s](r)),o)return o}else typeof e=="string"?o=n.properties[e]:e instanceof Function&&(o=e(r));return o},prepareTextLabels:function(e,n,r){var o=this;return Object.keys(this.texts[e.id]||{}).length===0?Promise.resolve([]):WorkerBroker.postMessage(this.main_thread_target+".calcTextSizes",e.id,this.texts[e.id]).then(function(s){var l=s.texts;return e.canceled?(log("trace","Style ".concat(o.name,": stop tile build because tile was canceled: ").concat(e.key,", post-calcTextSizes()")),[]):(o.texts[e.id]=l||[],l?o.buildTextLabels(e,r):(Collision.abortTile(e.id),[]))})},collideAndRenderTextLabels:function(e,n,r){var o=this;return this.prepareTextLabels(e,n,r).then(function(s){return s.length===0?(Collision.collide([],n,e.id),Promise.resolve({})):Collision.collide(s,n,e.id).then(function(l){if(e.canceled)return log("trace","stop tile build because tile was canceled: ".concat(e.key,", post-collide()")),{};var h=o.texts[e.id];return h==null||l.length===0?{}:(o.cullTextStyles(h,l),l.forEach(function(p){var d=p.text_settings_key,g=h[d]&&h[d][p.text];g.text_settings.can_articulate?(g.type||(g.type=[]),g.type.indexOf(p.label.type)===-1&&g.type.push(p.label.type)):(g.align=g.align||{},g.align[p.label.align]={})}),{labels:l,texts:h,textures:[]})})})},cullTextStyles:function(e,n){for(var r=0;r<n.length;r++){var o=n[r];e[o.text_settings_key][o.text].ref++}for(var s in e)for(var l in e[s])e[s][l].ref<1&&delete e[s][l];for(var h in e)Object.keys(e[h]).length===0&&delete e[h]},calcTextSizes:function(e,n){return this._canvas_text||(this._canvas_text=new CanvasText,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(e,n,this._canvas_ctx_for_sizes)},preprocessText:function(e){if(e&&e.font&&_typeof(e.font)==="object")return e.font.fill=StyleParser.createPropertyCache(e.font.fill),e.font.stroke&&(e.font.stroke.color=StyleParser.createPropertyCache(e.font.stroke.color)),e.background&&e.background.color&&(e.background.color=StyleParser.createPropertyCache(e.background.color)),e.outline&&(e.outline.color&&(e.outline.color=StyleParser.createPropertyCache(e.outline.color)),e.outline.width&&(e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber))),e.padding&&(Array.isArray(e.padding)?e.padding.length===2&&(e.padding=[e.padding[0],e.padding[1],e.padding[0],e.padding[1]]):e.padding=Array(4).fill(e.padding),e.padding=StyleParser.createPropertyCache(e.padding,function(n){return n.map(StyleParser.parsePositiveNumber)})),e.font.px_size=StyleParser.createPropertyCache(e.font.size||TextSettings.defaults.size,CanvasText.fontPixelSize),e.font.stroke&&e.font.stroke.width!=null&&(e.font.stroke.width=StyleParser.createPropertyCache(e.font.stroke.width,StyleParser.parsePositiveNumber)),e.offset=StyleParser.createPropertyCache(e.offset,function(n){return Array.isArray(n)&&n.map(StyleParser.parseNumber)}),e.buffer=StyleParser.createPropertyCache(e.buffer,function(n){return(Array.isArray(n)?n:[n,n]).map(StyleParser.parsePositiveNumber)}),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance||Geo$1.tile_size,StyleParser.parsePositiveNumber),e},computeTextLayout:function(e,n,r,o,s,l,h,p,d){var g=e||{};return(g=this.computeLayout(g,n,r,o,s)).repeat_distance&&(p&&(g.repeat_group+="/"+p),g.repeat_group+="/"+l),g.subdiv=s.overzoom2,g.align=r.align,g.italic=h.style!=="normal",d==="right"?g.orientation=1:d==="left"&&(g.orientation=-1),g}};function degToRad(e){return e*Math.PI/180}var PI_OVER_180=Math.PI/180,HORIZON_THRESHOLD_MULTIPLIER=.75,ZOOM_FOR_BOUNDS_EPSILON=.001,NEAR_PLANE=1,LookAtManipulator=function(){function e(n,r){_classCallCheck(this,e),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=n,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),r?this.setLookAtData(r):this._updateMatrices(),ShaderProgram.replaceBlock("camera",`
            uniform mat4 u_projection;
            uniform vec3 u_eye;
            uniform vec2 u_center_offset;

            void cameraProjection (inout vec4 position) {
                position = u_projection * position;
            }`)}return _createClass(e,[{key:"getZoomForBounds",value:function(n,r,o,s){var l=this.clone(),h=this._max_zoom,p=this._min_zoom,d=(h-p)/2,g=h-d,y=r,v=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(n));if(y===void 0)y=v;else{var _=v[0]-y[0];Math.abs(_)>Geo$1.half_circumference_meters+1e-8&&(y[0]+=Math.round(_/Geo$1.circumference_meters)*Geo$1.circumference_meters)}for(var w=function(){l.setLookAtData({zoom:g,position:y,tilt:o,heading:s});var I=l.getLookAtData().bounds;if(n.every(function(_a){return MathUtils$1.isPointInsidePolygon(_a,I)}))p=g;else{var G=_slicedToArray(MathUtils$1.getBBox(I),4),_t=G[0],_r=G[1],_o=G[2],Ca=G[3];_o-_t+1e-8>=Geo$1.circumference_meters&&Ca-_r+1e-8>=Geo$1.circumference_meters?p=g:h=g}g=h-(d=(h-p)/2)};d>ZOOM_FOR_BOUNDS_EPSILON;)w();return p}},{key:"setZoomConstraints",value:function(n,r){this._min_zoom=n,this._max_zoom=r,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(n,r){var o,s,l=n.position,h=n.zoom;if(l===o&&n.bounds!==o&&(l=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(n.bounds))),h===o&&n.bounds!==o&&(h=this.getZoomForBounds(n.bounds,l,n.tilt,n.heading)),r!==o&&(s=l||this.screenToWorld(r)),h!==o){h=MathUtils$1.clamp(h,this._min_zoom,this._max_zoom);var p=Utils$1.zoomToTileLevel(h),d=this._lookAtData.tile_level;p!==d&&(this._zoom_direction=p>d?1:-1),this._lookAtData.zoom=h,this._lookAtData.tile_level=p}if(n.tilt!==o&&(this._lookAtData.tilt=n.tilt),n.heading!==o&&(this._lookAtData.heading=n.heading),r!==o){this._updateMatrices();var g=this.screenToWorld(r);this._lookAtData.position[0]-=g[0]-s[0],this._lookAtData.position[1]-=g[1]-s[1]}else l&&(this._lookAtData.position=l);this._lookAtData.position[2]=0,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=this._viewport,o=r.width,s=r.height;this._viewport_aspect_ratio=o/s;var l=this._viewport.center.x-(o/2|0),h=this._viewport.center.y-(s/2|0);this._center_offset[0]=l,this._center_offset[1]=h,this._center_offset_normalized[0]=l/o,this._center_offset_normalized[1]=h/-s,n||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(n,r){mat4.multiply(n.model_view32,this._view_matrix,n.model),r.uniform("Matrix4fv","u_modelView",n.model_view32),mat3.normalFromMat4(n.normal32,n.model_view32),mat3.invert(n.inverse_normal32,n.normal32),r.uniform("Matrix3fv","u_normalMatrix",n.normal32),r.uniform("Matrix3fv","u_inverseNormalMatrix",n.inverse_normal32)}},{key:"_updateMatrices",value:function(){var n=this._viewport.height*Geo$1.metersPerPixel(this._lookAtData.zoom),r=Utils$1.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=n/2*r;var o=this._lookAtData.position[0],s=this._lookAtData.position[1];mat4.lookAt(this._view_matrix,vec3.fromValues(o,s,0),vec3.fromValues(o,s,-1),vec3.fromValues(0,1,0)),this._heading_matrix=mat4.identity(this._heading_matrix);var l=180-this._lookAtData.heading;l*=PI_OVER_180,this._heading_matrix[0]=Math.cos(l),this._heading_matrix[1]=-Math.sin(l),this._heading_matrix[4]=Math.sin(l),this._heading_matrix[5]=Math.cos(l),this._tilt_matrix=mat4.identity(this._tilt_matrix),l=(l=this._lookAtData.tilt?this._lookAtData.tilt*PI_OVER_180:0)>0?-l:l,this._tilt_matrix[5]=Math.cos(l),this._tilt_matrix[6]=Math.sin(l),this._tilt_matrix[9]=-Math.sin(l),this._tilt_matrix[10]=Math.cos(l),mat4.multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),mat4.multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var h=2*Math.atan(1/r),p=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(p/NEAR_PLANE),mat4.perspective(this._projection_matrix,h,this._viewport_aspect_ratio,NEAR_PLANE,p),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],mat4.translate(this._projection_matrix,this._projection_matrix,vec3.fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=mat4.multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var n=this._viewport,r=n.width,o=n.height,s=n.padding,l=degToRad(this._lookAtData.tilt);if(this._horizon=Math.max((s.top+o)/2-Math.cos(l)*(s.top*(1-Math.sin(l))+o*HORIZON_THRESHOLD_MULTIPLIER),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([r,this._horizon]),this.screenToWorld([r,o]),this.screenToWorld([0,o])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),s.left===0&&s.top===0&&s.right===0&&s.bottom===0)this._lookAtData.bounds=this._lookAtData.unpadded_bounds;else{var h=s.left,p=Math.max(this._horizon,s.top),d=r-s.right,g=o-s.bottom,y=[this.screenToWorld([h,p]),this.screenToWorld([d,p]),this.screenToWorld([d,g]),this.screenToWorld([h,g])];this._lookAtData.bounds=this._clipAgainstGeoBounds(y)}}},{key:"_clipAgainstGeoBounds",value:function(n){var r=_slicedToArray(MathUtils$1.getBBox(n),4),o=r[0],s=r[1],l=r[2],h=r[3],p=Geo$1.half_circumference_meters,d=[[o-1,+p],[l+1,+p],[l+1,-p],[o-1,-p]],g=MathUtils$1.clipPolygon(d,n)[0],y=_slicedToArray(MathUtils$1.getBBox(g),4);if(o=y[0],s=y[1],l=y[2],h=y[3],l-o>=Geo$1.circumference_meters){var v=(l-o)/2;g=[[v-p,h],[v+p,h],[v+p,s],[v-p,s]]}var _=[];return g&&(_=MathUtils$1.splitLegs(g,p)),_}},{key:"applyPxOffset",value:function(n){var r=_slicedToArray(n,2),o=r[0],s=r[1],l=Math.PI-this._lookAtData.heading*PI_OVER_180,h=Geo$1.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(o*Math.cos(l)+s*Math.sin(l))*h,this._lookAtData.position[1]-=(s*Math.cos(l)-o*Math.sin(l))*h,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(n){var r=_slicedToArray(n,2),o=r[0],s=r[1],l=this._viewport,h=l.width,p=l.height;return h===0||p===0?[0,0]:(o-=h/2,s-=p/2,this._clipCoordsToWorldPlaneCoords([2*(o+h/2)/h-1,1-2*(s+p/2)/p,-1,1]))}},{key:"_clipToScreenCoords",value:function(n){var r=this._viewport,o=r.width,s=r.height;return[(.5*n[0]+.5)*o,s-(.5*n[1]+.5)*s]}},{key:"_isScreenPointInViewPort",value:function(n){var r=this._viewport,o=r.width,s=r.height;return n[0]>=0&&n[0]<=o&&n[1]>=0&&n[1]<=s}},{key:"worldToScreen",value:function(n){var r,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(n[2]||(n[2]=0),o){var s=this._worldToClipCoords(n);r=this._clipToScreenCoords(s)}else{var l=Math.sign(this._lookAtData.position[0]),h=Math.trunc(this._lookAtData.position[0]/Geo$1.circumference_meters+l/2);n[0]+=Geo$1.circumference_meters*h;var p=this._worldToClipCoords(n),d=r=this._clipToScreenCoords(p);this._isScreenPointInViewPort(r)||(p=this._worldToClipCoords([n[0]+Geo$1.circumference_meters,n[1],n[2]]),r=this._clipToScreenCoords(p),this._isScreenPointInViewPort(r)||(p=this._worldToClipCoords([n[0]-Geo$1.circumference_meters,n[1],n[2]]),r=this._clipToScreenCoords(p)),this._isScreenPointInViewPort(r)||(r=d))}return r}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(n){var r=[],o=this._lookAtData.distance,s=this._lookAtData.position,l=[0,0,o,0],h=0,p=o*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.cos(PI_OVER_180*this._lookAtData.heading),d=o*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.sin(PI_OVER_180*this._lookAtData.heading),g=new Float64Array(16),y=new Float64Array(16);return mat4.invert(g,this._projection_matrix),vec4.transformMat4(r,n,g),r[2]=-1,r[3]=0,mat4.invert(y,this._view_matrix),vec4.transformMat4(r,r,y),vec4.normalize(r,r),vec4.transformMat4(l,l,this._transformation_matrix),r[2]!==0&&(h=-l[2]/r[2]),vec4.scale(r,r,h),[s[0]+(r[0]+d),s[1]+(r[1]+p)]}},{key:"_worldToClipCoords",value:function(n){var r=[n[0],n[1],n[2],1];return vec4.transformMat4(r,r,this._view_matrix),vec4.transformMat4(r,r,this._projection_matrix),vec4.scale(r,r,1/r[3]),r}},{key:"setupProgram",value:function(n){n.uniform("Matrix4fv","u_projection",this._projection_matrix),n.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),n.uniform("2fv","u_center_offset",this._center_offset_normalized),n.uniform("1f","u_tilt",this._lookAtData.tilt*PI_OVER_180),n.uniform("1f","u_heading",this._lookAtData.heading*PI_OVER_180),n.uniform("1f","u_near_plane",NEAR_PLANE),n.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var n=new e(this._viewport,this._lookAtData);return n.setZoomConstraints(this._min_zoom,this._max_zoom),n}},{key:"getViewport",value:function(){return this._viewport}}])}();function getX(e){return e.x===void 0?e[0]:e.x}function getY(e){return e.y===void 0?e[1]:e.y}function xAscendingComparator(e,n){return getX(e)-getX(n)}function yAscendingComparator(e,n){return getY(e)-getY(n)}function sortByX(e){return e.sort(xAscendingComparator)}function sortByY(e){return e.sort(yAscendingComparator)}function getMinMax(e,n){for(var r,o=e[0],s=o,l=0;l<e.length;l+=1)n(r=e[l],o)<0?o=r:n(r,s)>0&&(s=r);return[o,s]}function groupByCoord(e,n){return Object.values(n.reduce(function(r,o){var s=o[+e];return r[s]||(r[s]=[]),r[s].push(o),r},{}))}function groupByX(e){return groupByCoord(!1,e)}function groupByY(e){return groupByCoord(!0,e)}function createTileRangeByCoord(e,n,r){var o=+e,s=n[o],l=r[o];if(s>l)return[];var h=[n];if(s>l)return h;for(var p=n[(o+1)%2],d=e?function(y){return h.push([p,y])}:function(y){return h.push([y,p])},g=s+1;g<l;g+=1)d(g);return h.push(r),h}function createTileRangeByX(e,n){return createTileRangeByCoord(!1,e,n)}function createTileRangeByY(e,n){return createTileRangeByCoord(!0,e,n)}function deduplicate(e){var n={},r=[];return e.forEach(function(o){var s=o.key||(Array.isArray(o)?"".concat(o[0],"/").concat(o[1]):"".concat(o.x,"/").concat(o.y));n[s]||(n[s]=!0,r.push(o))}),r}function flat(e){return e.reduce(function(n,r){return n.concat(r)})}function applyMargin(e,n){if(n<=0)return e;var r=function(s){var l=_slicedToArray(getMinMax(s,xAscendingComparator),2),h=l[0],p=l[1],d=[h[0]-n,h[1]],g=[p[0]+n,p[1]];return s.concat(createTileRangeByX(d,h),createTileRangeByX(p,g))},o=function(s){var l=_slicedToArray(getMinMax(s,yAscendingComparator),2),h=l[0],p=l[1],d=[h[0],h[1]-n],g=[p[0],p[1]+n];return s.concat(createTileRangeByY(d,h),createTileRangeByY(p,g))};return deduplicate(function(s){return flat(s.map(r))}(groupByY(flat(groupByX(e).map(o)))))}function constructTiles(e,n,r){return e.map(function(o){var s=_slicedToArray(o,2),l=s[0],h=s[1];return Tile.coord(Geo$1.wrapTile({x:l,y:h,z:n},{x:!r,y:!0}))})}function getTileGrid(e,n,r){var o=function(s){return Object.values(Geo$1.metersToExactTileCoords(s,e.tile_level))};return deduplicate(constructTiles(applyMargin(rasterizeTetragon(o(e.tetragon[0]),o(e.tetragon[1]),o(e.tetragon[3]),o(e.tetragon[2])),n),e.tile_level,r))}function rasterizeTetragon(e,n,r,o){var s=rasterizeTriangle(n,e,r),l=rasterizeTriangle(r,o,n);return deduplicate(s.concat(l))}function rasterizeTriangle(e,n,r){var o=_slicedToArray(sliceTriangle.apply(void 0,_toConsumableArray(sortByY([e,n,r]))),2),s=o[0],l=o[1];return deduplicate(rasterizeBottomFlatTriangle.apply(void 0,_toConsumableArray(s)).concat(rasterizeTopFlatTriangle.apply(void 0,_toConsumableArray(l))))}function sliceTriangle(e,n,r){var o=_slicedToArray(e,2),s=o[0],l=o[1],h=_slicedToArray(n,2),p=h[0],d=h[1],g=_slicedToArray(r,2),y=g[0],v=g[1],_=s+(d-l)/(v-l)*(y-s);return[[[s,l]].concat(_toConsumableArray(sortByX([[p,d],[_,d]]))),[].concat(_toConsumableArray(sortByX([[p,d],[_,d]])),[[y,v]])]}function rasterizeBottomFlatTriangle(e,n,r){var o=_slicedToArray(e,2),s=o[0],l=o[1],h=_slicedToArray(n,2),p=h[0],d=h[1];return scanFlatTriangle(s,p,_slicedToArray(r,1)[0],l,d)}function rasterizeTopFlatTriangle(e,n,r){var o=_slicedToArray(e,2),s=o[0],l=o[1],h=_slicedToArray(n,1)[0],p=_slicedToArray(r,2);return scanFlatTriangle(p[0],s,h,p[1],l)}var scanStepStatic=.125;function getScanStep(e,n){return scanStepStatic*(n-e)/(Math.ceil(n)-Math.floor(e))}function scanFlatTriangle(e,n,r,o,s){var l=Math.min(e,n),h=Math.max(e,r),p=Math.min(o,s),d=Math.max(o,s);if(Math.floor(o)===Math.floor(s))return scanRow(l,h,o);if(d-p<scanStepStatic)return scanRectangle([l,p],[h,d]);var g=getScanStep(p,d),y=(d-p)/g,v=(n-e)/y,_=(r-e)/y,w=[],I=e,G=e,_t=function(Ca){w=w.concat(scanRow(I,G,Math.floor(Ca))),I+=v,G+=_};if(o<s)for(var _r=p;_r<=d;_r+=g)_t(_r);else for(var _o=d;_o>=p;_o-=g)_t(_o);return deduplicate(w)}function xCoordsToPoints(e,n){return e.map(function(r){return[r,n]})}function createCoordRange(e,n){var r=Math.floor(e),o=Math.floor(n);if(r>o)return[];if(r===o)return[r];for(var s=[],l=r;l<=o;l+=1)s.push(l);return s}function scanRow(e,n,r){return xCoordsToPoints(createCoordRange(e,n),r)}function scanRectangle(e,n){var r=_slicedToArray(e,2),o=r[0],s=r[1],l=_slicedToArray(n,2),h=l[0],p=l[1],d=createCoordRange(o,h),g=xCoordsToPoints(d,s),y=xCoordsToPoints(d,p);return g.concat(y)}var VIEW_PAN_SNAP_TIME=.5,Z_PRECISION=1e5,View=function(){function e(n,r){_classCallCheck(this,e),subscribeMixin(this),this.scene=n,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=r.wrapView!==!1,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new LookAtManipulator(r.viewport),this._viewport=r.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _createClass(e,[{key:"update",value:function(){this.pan_snap_timer=(+new Date-this.panning_stop_at)/1e3,this.user_input_active=+new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=this._viewport,o=r.width,s=r.height;this.size.css={width:o,height:s},this.size.device={width:Math.round(o*Utils$1.device_pixel_ratio),height:Math.round(s*Utils$1.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),n||this.updateBounds()}},{key:"setLookAtData",value:function(n,r){e._setLookAtDataForManipulator(this.lookAtManipulator,n,r),this.updateBounds()}},{key:"getLookAtData",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return e._getLookAtDataFromManipulator(this.lookAtManipulator,n)}},{key:"getBestLookAtData",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],s=this.lookAtManipulator.clone();return e._setLookAtDataForManipulator(s,n,r),e._getLookAtDataFromManipulator(s,o)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(n){var r=this._offset_buffer;r[0]+=n[0],r[1]+=n[1];var o=Math.abs(r[0]),s=Math.abs(r[1]);if(o>=1||s>=1){var l=~~r[0],h=~~r[1];this.lookAtManipulator.applyPxOffset([o<1?0:l,s<1?0:h]),o>=1&&(r[0]-=l),s>=1&&(r[1]-=h),this.updateBounds()}}},{key:"setPanning",value:function(n){this.panning=n,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return typeof this.size.css.width=="number"&&typeof this.size.css.height=="number"}},{key:"updateBounds",value:function(){if(this.markUserInput(),this.ready()){this.center_tile=Geo$1.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level);var n=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),r=this.lookAtManipulator.screenToWorld([this.size.css.width,0]);this.bounds={sw:{x:n[0],y:n[1]},ne:{x:r[0],y:r[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw()}}},{key:"getTileGridFlatForBBox",value:function(n,r,o,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,h=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],p=this.lookAtManipulator.getLookAtData().tile_level,d=Geo$1.tileForMeters([r,n],p),g=Geo$1.tileForMeters([s,o],p);if(d.x-=l,d.y-=l,g.x+=l,g.y+=l,h===!1){var y=(1<<p)-1;d.x=Math.min(Math.max(0,d.x),y),d.y=Math.min(Math.max(0,d.y),y),g.x=Math.min(Math.max(0,g.x),y),g.y=Math.min(Math.max(0,g.y),y)}for(var v=[],_={},w=d.x;w<=g.x;w++)for(var I=d.y;I<=g.y;I++){var G=Tile.coord(Geo$1.wrapTile({x:w,y:I,z:p},{x:!h,y:!0}));_[G.key]||(_[G.key]=!0,v.push(G))}return v}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return getTileGrid(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var n=this.lookAtManipulator.getLookAtData(),r=n.tilt,o=n.heading;return r===0&&o===180?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(n,r){n.setupProgram(this.matrices,r),this.lookAtManipulator.setupMatrices(this.matrices,r)}},{key:"setupProgram",value:function(n){var r=this.lookAtManipulator.getLookAtData();n.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),n.uniform("3fv","u_map_position",[r.position[0],r.position[1],Math.trunc(r.zoom*Z_PRECISION)/Z_PRECISION]),n.uniform("1f","u_meters_per_pixel",Geo$1.metersPerPixel(r.zoom)),n.uniform("1f","u_device_pixel_ratio",Utils$1.device_pixel_ratio),n.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),n.uniform("1i","u_view_panning",this.panning),n.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(n)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=VIEW_PAN_SNAP_TIME}},{key:"xyToGeo",value:function(n,r){var o=this.lookAtManipulator.screenToWorld([n,r]),s=_slicedToArray(Geo$1.metersToLatLng(o),2),l=s[0];return{lat:s[1],lng:l}}},{key:"geoToPixel",value:function(n){var r=Geo$1.latLngToMeters([n.lng,n.lat]);r.push(n.alt||0);var o=this.lookAtManipulator.worldToScreen(r);return{x:Math.floor(o[0]),y:Math.floor(o[1])}}},{key:"geoToMeters",value:function(n){var r=_slicedToArray(Geo$1.latLngToMeters([n.lng,n.lat]),2);return{x:r[0],y:r[1],z:n.alt||0}}},{key:"metersToGeo",value:function(n){var r=_slicedToArray(Geo$1.metersToLatLng([n.x,n.y]),2),o=r[0];return{lat:r[1],lng:o,alt:n.z||0}}},{key:"setZoomConstraints",value:function(n,r){this.lookAtManipulator.setZoomConstraints(n,r)}}],[{key:"_setLookAtDataForManipulator",value:function(n,r,o){var s=r.position,l=r.zoom,h=r.tilt,p=r.heading,d=r.bounds,g={zoom:l,tilt:h,heading:p};if(s&&typeof s.lng=="number"&&typeof s.lat=="number"&&(g.position=Geo$1.latLngToMeters([s.lng,s.lat])),d){var y=d.getExterior().getLatLngAltArray(),v=y.length/3,_=Array(v);if(d.getBoundingBox().isCDB())for(var w=y[1],I=0,G=0;G<v;G++){var _t=y[3*G+1];if(G>0){var _r=_t-w;Math.abs(_r)>180&&(I+=_t>w?-360:360)}w=_t,_[G]=Geo$1.latLngToMeters([_t+I,y[3*G]])}else for(var _o=0;_o<v;_o++)_[_o]=Geo$1.latLngToMeters([y[3*_o+1],y[3*_o]]);g.bounds=_}n.setLookAtData(g,o)}},{key:"_getLookAtDataFromManipulator",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=n.getLookAtData(),s=o.heading,l=o.incline,h=o.tilt,p=o.zoom,d=o.position,g=o.bounds,y=o.unpadded_bounds,v=_slicedToArray(Geo$1.metersToLatLng(d),2),_=v[0],w=v[1],I=new H.geo.LineString;return(r?y:g).forEach(function(G){var _t=Geo$1.metersToLatLng(G);I.pushLatLngAlt(_t[1],_t[0],0)}),{heading:s,incline:l,tilt:h,zoom:p,bounds:new H.geo.Polygon(I),position:{lat:w,lng:_,alt:d[2]}}}}])}(),shaderSrc_pointsVertex=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;
#ifdef TANGRAM_IS_TEXT_STYLE
attribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;
#endif
#ifdef TANGRAM_POINT_DRAW_STICK
attribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;
#endif
varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;
#ifdef TANGRAM_HAS_SHADER_POINTS
attribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;
#endif
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
varying float v_label_hidden;
#endif
#define PI 3.14159265359
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
vec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}
#ifdef TANGRAM_IS_TEXT_STYLE
float mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}
#endif
void main(){
#pragma tangram: setup
#ifndef TANGRAM_SHOW_HIDDEN_LABELS
if(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}
#else
if(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}
#endif
v_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;
#ifdef TANGRAM_HAS_SHADER_POINTS
v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}
#endif
vec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);
#ifdef TANGRAM_POINT_DRAW_STICK
v_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;
#endif
float zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){
#ifdef TANGRAM_IS_TEXT_STYLE
if(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}
#else
shape.xy=rotate2D(shape.xy+offset*256.,theta);
#endif
shape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;
#ifdef TANGRAM_POINT_DRAW_STICK
shape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;
#endif
shape.xy=rotate2D(shape.xy+offset,theta);}
#ifdef TANGRAM_FADE_IN_RATE
if(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}
#endif
#ifdef TANGRAM_FADE_ON_ZOOM_OUT
v_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);
#endif
v_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);
#pragma tangram: position
cameraProjection(position);
#ifdef TANGRAM_LAYER_ORDER
applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;
#endif
if(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}
#ifdef TANGRAM_HAS_SHADER_POINTS
if(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}
#endif
if(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}`,shaderSrc_pointsFragment=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;
#ifdef TANGRAM_HAS_SHADER_POINTS
varying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;
#endif
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
varying float v_label_hidden;
#endif
#ifdef TANGRAM_POINT_DRAW_STICK
varying float v_is_stick;
#endif
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
#ifdef TANGRAM_HAS_SHADER_POINTS
float _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}
#endif
void mixTextureColor(inout vec4 color){
#ifdef TANGRAM_HAS_SHADER_POINTS
if(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;
#ifdef TANGRAM_BLEND_ADD
color.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;
#else
color.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);
#endif
}
#else
color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);
#endif
if(u_apply_color_blocks){
#pragma tangram: color
#pragma tangram: filter
}color.a*=v_alpha_factor;
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
if(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}
#endif
#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)
if(color.a<TANGRAM_ALPHA_TEST){discard;}
#endif
}void main(void){
#pragma tangram: setup
vec4 color=v_color;
#ifdef TANGRAM_POINT_DRAW_STICK
if(v_is_stick==0.0){mixTextureColor(color);}
#else
mixTextureColor(color);
#endif
gl_FragColor=color;}`,PLACEMENT=LabelPoint.PLACEMENT,pre_angles_normalize=128/Math.PI,angles_normalize=16384/Math.PI,offsets_normalize=64,texcoord_normalize=65535,Points=Object.create(Style),TANGRAM_POINT_TYPE_TEXTURE=1,TANGRAM_POINT_TYPE_LABEL=2,TANGRAM_POINT_TYPE_SHADER=3,DEFAULT_POINT_SIZE=16;Object.assign(Points,TextLabels),Object.assign(Points,{name:"points",built_in:!0,vertex_shader_src:shaderSrc_pointsVertex,fragment_shader_src:shaderSrc_pointsFragment,selection:!0,collision:!0,blend:"overlay",init:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Style.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=TANGRAM_POINT_TYPE_TEXTURE,this.defines.TANGRAM_POINT_TYPE_LABEL=TANGRAM_POINT_TYPE_LABEL,this.defines.TANGRAM_POINT_TYPE_SHADER=TANGRAM_POINT_TYPE_SHADER,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){this.blend!=="overlay"&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,debugSettings$1.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),debugSettings$1.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=1/VIEW_PAN_SNAP_TIME),debugSettings$1.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(e,n,r){var o=r.tile,s={};if(s.color=this.parseColor(n.color,r),s.texture=n.texture,s.label_texture=null,s.color||s.texture){var l;if(this.hasSprites(s)){if(!(l=this.parseSprite(s,n,r)))return;s.texcoords=l.texcoords}if(s.size=n.size,s.size){if(s.size=StyleParser.evalCachedPointSizeProperty(n.size,l,r),s.size==null)return void log({level:"warn",once:!0},"Layer '".concat(n.layers[n.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(n.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");typeof s.size=="number"&&(s.size=[s.size,s.size])}else s.size=l&&l.css_size||[DEFAULT_POINT_SIZE,DEFAULT_POINT_SIZE];if(n.outline&&(s.outline_width=StyleParser.evalCachedProperty(n.outline.width,r)||StyleParser.defaults.outline.width,s.outline_color=this.parseColor(n.outline.color,r)),s.outline_edge_pct=0,s.outline_width&&s.outline_color){var h=s.outline_width;s.size[0]+=h,s.size[1]+=h,s.outline_edge_pct=h/Math.min(s.size[0],s.size[1])*2}if(s.size[0]=Math.min(s.size[0],256),s.size[1]=Math.min(s.size[1],256),s.placement=n.placement,s.placement_min_length_ratio=StyleParser.evalCachedProperty(n.placement_min_length_ratio,r),s.placement===PLACEMENT.SPACED&&n.placement_spacing&&(s.placement_spacing=StyleParser.evalCachedProperty(n.placement_spacing,r)),s.angle=StyleParser.evalProperty(n.angle,r)||0,s.elevate_by_altitude=!!n.elevate_by_altitude,s.z=n.z?MathUtils$1.clamp(StyleParser.evalCachedDistanceProperty(n.z,r),0,32767):StyleParser.defaults.z,s.flat=n.flat,s.tile_edges=n.tile_edges,this.computeLayout(s,e,n,r,o),n.stick&&!s.flat){var p=StyleParser.parseNumber(StyleParser.evalProperty(n.stick.height,r));s.stick={color:this.parseColor(n.stick.color,r)||StyleParser.defaults.color,height:p?Math.max(p,0):0}}var d=n.text&&StyleParser.evalProperty(n.text.visible,r)!==!1&&this.parseTextFeature(e,n.text,r,o);Array.isArray(d)&&(d=null,log({level:"warn",once:!0},"Layer '".concat(n.layers[n.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(n.text.text_source)))),d&&(d.layout.parent=s,d.layout.priority=n.text.priority?Math.max(d.layout.priority,s.priority+.5):s.priority+.5,d.layout.move_into_tile=!1,Collision.addStyle(this.collision_group_text,o.id)),this.queueFeature({feature:e,draw:n,context:r,style:s,text_feature:d},o),Collision.addStyle(this.collision_group_points,o.id)}},hasSprites:function(e){return e.texture&&this.textureManager.textures[e.texture]&&this.textureManager.textures[e.texture].sprites},getSpriteInfo:function(e,n){var r=this.textureManager.textures[e.texture].sprites[n]&&this.textureManager.getSpriteInfo(e.texture,n);return n&&!r?(this.texture_missing_sprites[e.texture]=this.texture_missing_sprites[e.texture]||{},this.texture_missing_sprites[e.texture][n]||(log("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(n,"' for texture '").concat(e.texture,"'")),this.texture_missing_sprites[e.texture][n]=!0)):r&&(r.sprite=n),r},parseSprite:function(e,n,r){var o=StyleParser.evalProperty(n.sprite,r);return this.getSpriteInfo(e,o)||this.getSpriteInfo(e,n.sprite_default)},queueFeature:function(e,n){this.tile_data[n.id]&&this.queues[n.id]||this.startData(n),this.queues[n.id]=this.queues[n.id]||[],this.queues[n.id].push(e)},endData:function(e){var n=this;if(e.canceled)return log("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(e.key)),Promise.resolve();var r=this.queues[e.id];delete this.queues[e.id];var o=[],s=[];return r.forEach(function(l){for(var h=l.style,p=l.feature,d=p.geometry,g=n.buildLabels(h.size,d,h),y=0;y<g.length;y++){var v=g[y],_={feature:p,draw:l.draw,context:l.context,style:h,label:v};if(s.push(_),l.text_feature){var w={feature:p,draw:l.text_feature.draw,context:l.context,text:l.text_feature.text,text_settings_key:l.text_feature.text_settings_key,layout:l.text_feature.layout,point_label:v,linked:_};o.push(w),l.draw.text.optional||(_.linked=w)}}}),Promise.all([Collision.collide(s,this.collision_group_points,e.id).then(function(l){l.forEach(function(h){n.feature_style=h.style,n.feature_style.label=h.label,n.feature_style.linked=h.linked,Style.addFeature.call(n,h.feature,h.draw,h.context)})}),this.collideAndRenderTextLabels(e,this.collision_group_text,o)]).then(function(l){var h=_slicedToArray(l,2)[1],p=h.labels,d=h.texts;return p&&d&&p.forEach(function(g){var y=g.text_settings_key,v=d[y]&&d[y][g.text],_=n.feature_style;_.label=g.label,_.linked=g.linked,_.size=v.size.logical_size,_.angle=0,g.label.text_data={text_info:v,text_settings_key:y,text:g.text},_.label_texture=n.textureManager.default,Style.addFeature.call(n,g.feature,g.draw,g.context)}),n.freeText(e),Style.endData.call(n,e)})},_preprocess:function(e){e.color=StyleParser.createColorPropertyCache(e.color),e.texture=e.texture!==void 0?e.texture:this.texture,e.outline&&(e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);try{e.size=StyleParser.createPointSizePropertyCache(e.size)}catch(n){return log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"".concat(n," (").concat(JSON.stringify(e.size),"), skipping features in layer")),null}return e.offset=StyleParser.createPropertyCache(e.offset,function(n){return Array.isArray(n)&&n.map(StyleParser.parseNumber)}),e.buffer=StyleParser.createPropertyCache(e.buffer,function(n){return(Array.isArray(n)?n:[n,n]).map(StyleParser.parsePositiveNumber)}),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance,StyleParser.parseNumber),e.repeat_group==null&&(e.repeat_group=e.layers.join("-")),e.placement=PLACEMENT[e.placement&&e.placement.toUpperCase()],e.placement==null&&(e.placement=PLACEMENT.VERTEX),e.placement_spacing=e.placement_spacing!=null?e.placement_spacing:80,e.placement_spacing=StyleParser.createPropertyCache(e.placement_spacing,StyleParser.parsePositiveNumber),e.placement_min_length_ratio=e.placement_min_length_ratio!=null?e.placement_min_length_ratio:1,e.placement_min_length_ratio=StyleParser.createPropertyCache(e.placement_min_length_ratio,StyleParser.parsePositiveNumber),typeof e.angle=="number"?e.angle=e.angle*Math.PI/180:e.angle=e.angle||0,e.text=this.preprocessText(e.text),e.text&&(e.text.variantKey=e.variantKey,e.text.group=e.group,e.text.layers=e.layers,e.text.order=e.order,e.text.repeat_group=e.text.repeat_group||e.repeat_group,e.text.anchor=e.text.anchor||this.default_anchor,e.text.optional=typeof e.text.optional=="boolean"&&e.text.optional,e.text.interactive=e.text.interactive||e.interactive),e.stick&&(e.stick.color=StyleParser.createColorPropertyCache(e.stick.color)),e},default_anchor:["bottom","top","right","left"],computeLayout:function(e,n,r,o,s){var l=e||{};l.id=n,l.units_per_pixel=s.units_per_pixel||1,l.collide=r.collide!==!1,l.anchor=r.anchor,l.offset=StyleParser.evalCachedProperty(r.offset,o)||StyleParser.zeroPair,l.buffer=StyleParser.evalCachedProperty(r.buffer,o)||StyleParser.zeroPair,l.repeat_distance=StyleParser.evalCachedProperty(r.repeat_distance,o),l.repeat_distance&&(l.repeat_distance*=l.units_per_pixel,l.repeat_scale=1,typeof r.repeat_group=="function"?l.repeat_group=r.repeat_group(o):l.repeat_group=r.repeat_group);var h=r.priority;return h!=null?typeof h=="function"&&(h=h(o)):h=4294967295,l.priority=h,l},buildTextLabels:function(e,n){for(var r=[],o=0;o<n.length;o++){var s=n[o],l=this.texts[e.id][s.text_settings_key][s.text].size.collision_size;s.label=new LabelPoint(s.point_label.position,l,s.point_label.isFlat(),s.layout),r.push(s)}return r},buildLabels:function(e,n,r){var o=!!r.flat,s=[];if(n.type==="Point")s.push(new LabelPoint(n.coordinates,e,o,r));else if(n.type==="MultiPoint")for(var l=n.coordinates,h=0;h<l.length;++h){var p=l[h];s.push(new LabelPoint(p,e,o,r))}else if(n.type==="LineString")for(var d=placePointsOnLine(n.coordinates,e,o,r),g=0;g<d.length;++g)s.push(d[g]);else if(n.type==="MultiLineString")for(var y=n.coordinates,v=0;v<y.length;v++)for(var _=placePointsOnLine(y[v],e,o,r),w=0;w<_.length;++w)s.push(_[w]);else if(n.type==="Polygon")if(r.placement===PLACEMENT.CENTROID){var I=Geo$1.centroid(n.coordinates);s.push(new LabelPoint(I,e,o,r))}else for(var G=n.coordinates,_t=0;_t<G.length;_t++)for(var _r=placePointsOnLine(G[_t],e,o,r),_o=0;_o<_r.length;++_o)s.push(_r[_o]);else if(n.type==="MultiPolygon")if(r.placement===PLACEMENT.CENTROID){var Ca=Geo$1.multiCentroid(n.coordinates);s.push(new LabelPoint(Ca,e,o,r))}else for(var _a=n.coordinates,_l=0;_l<_a.length;_l++)for(var Qa=_a[_l],Kc=0;Kc<Qa.length;Kc++)for(var jc=placePointsOnLine(Qa[Kc],e,o,r),_h=0;_h<jc.length;++_h)s.push(jc[_h]);return s},makeVertexTemplate:function(e,n){var r=e.color||StyleParser.defaults.color,o=n.vertex_data.vertex_layout;if(this.fillVertexTemplate(o,"a_position",0,{size:2}),this.fillVertexTemplate(o,"a_position",e.z||0,{size:1,offset:2}),this.fillVertexTemplate(o,"a_position",this.scaleOrder(e.order),{size:1,offset:3}),this.fillVertexTemplate(o,"a_shape",0,{size:4}),this.fillVertexTemplate(o,"a_shape",e.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(o,"a_texcoord",0,{size:2}),this.fillVertexTemplate(o,"a_offset",0,{size:2}),this.fillVertexTemplate(o,"a_color",Vector$1.mult(r,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&n.variant.shader_point){var s=e.outline_color||StyleParser.defaults.outline.color;this.fillVertexTemplate(o,"a_outline_color",Vector$1.mult(s,255),{size:4}),this.fillVertexTemplate(o,"a_outline_edge",e.outline_edge_pct||StyleParser.defaults.outline.width,{size:1})}return this.selection&&this.fillVertexTemplate(o,"a_selection_color",Vector$1.mult(e.selection_color,255),{size:4}),this.fillVertexTemplate(o,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&e.stick&&(this.fillVertexTemplate(o,"a_is_stick",0,{size:1}),this.fillVertexTemplate(o,"a_stick_height",e.stick.height,{size:1})),this.vertex_template},buildQuad:function(e,n,r,o,s,l,h,p,d,g,y,v,_,w,I,G,_t,_r,_o){return n[0]<=0||n[1]<=0?0:buildQuadsForPoints(e,I,G,{quad:n,quad_normalize:256,offset:p,offsets:d,offsets_alt:g,pre_angles:l,pre_angles_alt:h,angle:4096*r,angles:o,angles_alt:s,is_flat:_,elevate_by_altitude:w,build_stick_points:_t,stick_color:_t&&Vector$1.mult(_r,255),color:Vector$1.mult(_o||StyleParser.defaults.color,255),curve:v,texcoord_scale:y,texcoord_normalize,pre_angles_normalize,angles_normalize,offsets_normalize})},build:function(e,n,r){var o=e.label;return o.type==="curved"?this.buildCurvedLabel(o,e,n,r):this.buildStraightLabel(o,e,n,r)},buildStraightLabel:function(e,n,r,o){var s,l,h=this.makeVertexTemplate(n,r),p=e.angle||n.angle;e.type!=="point"?(s=n.size[e.type],l=default_uvs):(s=n.size,l=n.texcoords||default_uvs),r.uniforms=r.uniforms||{},n.label_texture?(r.uniforms.u_texture=n.label_texture,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,r.uniforms.u_apply_color_blocks=!1):n.texture?(r.uniforms.u_texture=n.texture,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_TEXTURE,r.uniforms.u_apply_color_blocks=!0):(r.uniforms.u_texture=this.textureManager.default,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_SHADER,r.uniforms.u_apply_color_blocks=!0);var d=e.offset,g=this.defines.TANGRAM_POINT_DRAW_STICK&&!n.label_texture&&n.stick&&n.stick.height>0,y=this.buildQuad([e.position],s,p,null,null,null,null,d,null,null,l,!1,e.isFlat(),n.elevate_by_altitude,r.vertex_data,h,g,g&&n.stick.color,n.color),v=n.linked&&n.linked.label.id;return this.trackLabel(e,v,r,y,o,g),y},buildCurvedLabel:function(e,n,r,o){for(var s=this.makeVertexTemplate(n,r),l=e.angle,h=0,p=!1,d=0;d<2;d++)for(var g=0;g<e.num_segments;g++){var y=n.size[e.type][g],v=default_uvs,_=this.getTileMesh(o.tile,this.getMeshVariantTypeForDraw(n));_.uniforms=_.uniforms||{},_.uniforms.u_texture=n.label_texture,_.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,_.uniforms.u_apply_color_blocks=!1;var w=e.offset||[0,0],I=e.position,G=e.angles[g],_t=e.offsets[g],_r=e.pre_angles[g],_o=e.num_segments-g-1,Ca=e.alt_angles[_o],_a=e.alt_pre_angles[_o],_l=e.alt_offsets[_o],Qa=this.buildQuad([I],y,l,G,Ca,_r,_a,w,_t,_l,v,!0,e.isFlat(),n.elevate_by_altitude,_.vertex_data,s,p,p,n.color);h+=Qa;var Kc=n.linked&&n.linked.label.id;this.trackLabel(e,Kc,r,Qa,o,p)}return h},trackLabel:function(e,n,r,o,s){var l=arguments.length>5&&arguments[5]!==void 0&&arguments[5];r.labels=r.labels||{},r.labels.collision=r.labels.collision||{},r.labels["non-collision"]=r.labels["non-collision"]||{};var h=e.layout.collide?r.labels.collision:r.labels["non-collision"];h[e.id]=h[e.id]||{container:{label:e.text_data?Object.assign(e.toJSON(),{text_data:e.text_data}):e.toJSON(),linked:n},ranges:[]};var p=2*o,d=r.vertex_data.offset-r.vertex_data.stride*p;h[e.id].ranges.push([d,p,l])},buildLines:function(e,n,r,o){return this.build(n,r,o)},buildPoints:function(e,n,r,o){return this.build(n,r,o)},buildPolygons:function(e,n,r,o){return this.build(n,r,o)},vertexLayoutForMeshVariant:function(e){if(!this.vertex_layout){var n=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:gl$1.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0}];this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&n.push({name:"a_is_stick",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:gl$1.FLOAT,normalized:!1}),this.vertex_layout=new VertexLayout(n),(n=n.map(function(r){return Object.assign({},r)})).forEach(function(r){r.name!=="a_outline_color"&&r.name!=="a_outline_edge"||(r.static=null)}),this.vertex_layout_shader_point=new VertexLayout(n)}return e.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(e){var n=e.label_texture||e.texture||this.default_mesh_variant.key;return{key:n,shader_point:n===this.default_mesh_variant.key,order:e.label_texture?1:0}},makeMesh:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r=Object.assign({},r,{fade_in_time:this.fade_in_time}),Style.makeMesh.call(this,e,n,r)}});var STOPS=[0,.33,.66,.99],LINE_EXCEED_STRAIGHT=1.5,LINE_EXCEED_STRAIGHT_NO_CURVE=1.8,LINE_EXCEED_STAIGHT_LOOSE=2.3,STRAIGHT_ANGLE_TOLERANCE=.1,CURVE_MIN_TOTAL_COST=1.3,CURVE_MIN_AVG_COST=.4,CURVE_MAX_ANGLE=1,ORIENTED_LABEL_OFFSET_FACTOR=1.2,VERTICAL_ANGLE_TOLERANCE=.01,LabelLine={create:function(e,n,r,o,s){for(var l=[{type:"straight",tolerance:s.no_curving?LINE_EXCEED_STRAIGHT_NO_CURVE:LINE_EXCEED_STRAIGHT},{type:"curved"},{type:"straight",tolerance:LINE_EXCEED_STAIGHT_LOOSE}],h=0;h<l.length;h++){var p=l[h],d=void 0;if(p.type==="straight"?d=new LabelLineStraight(n,r,o,s,p.tolerance):p.type==="curved"&&!s.no_curving&&r.length>2&&(d=new LabelLineCurved(e,r,o,s)),d&&!d.throw_away)return d}return!1}},LabelLineBase=function(){return _createClass(function e(n,r){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.layout=r,this.position=[],this.angle=0,this.offset=r.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=n,this._circles=void 0,this.placed=null},[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var e=this.getAABB(),n=e.left,r=e.top,o=e.right,s=e.bottom;return Utils$1.pointInTile([n,r])&&Utils$1.pointInTile([o,s])}},{key:"getAABBForSegment",value:function(e,n,r,o){var s=this.unit_scale,l=n/2,h=r/2,p=_slicedToArray(e,2),d=p[0],g=p[1];if(this.offset[0]!==0||this.offset[1]!==0){var y=Vector$1.rot(this.offset,this.angle);d+=y[0]*s,g-=y[1]*s}var v=[[Math.cos(o),-Math.sin(o)],[Math.sin(o),Math.cos(o)]],_=Vector$1.multMatrix(v,[-l,-h]),w=Vector$1.multMatrix(v,[l,-h]),I=Vector$1.multMatrix(v,[l,h]),G=Vector$1.multMatrix(v,[-l,h]);return{left:d+Math.min(_[0],w[0],I[0],G[0]),top:g+Math.max(_[1],w[1],I[1],G[1]),right:d+Math.max(_[0],w[0],I[0],G[0]),bottom:g+Math.min(_[1],w[1],I[1],G[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(e){for(var n=[e[0]],r=0,o=0,s=0,l=n,h=!1,p=1;p<e.length;p++){var d=e[p],g=e[p-1],y=Vector$1.length(Vector$1.sub(d,g));d[0]>g[0]?s===1?(n.push(d),(r+=y)>o&&(l=n,o=r,h=!1)):(n=[g,d],(r=y)>o&&(l=n,o=r,h=!1),s=1):d[0]<g[0]?s===-1?(n.unshift(d),(r+=y)>o&&(l=n,o=r,h=!0)):(n=[d,g],(r=y)>o&&(l=n,o=r,h=!0),s=-1):(s===-1?n.unshift(d):(n.push(d),s=1),(r+=y)>o&&(l=n,o=r,h=s===-1))}return[l,h]}}])}(),LabelLineStraight=function(e){function n(r,o,s,l,h){var p;return _classCallCheck(this,n),(p=_callSuper(this,n,[s,l])).type="straight",p.size=r,p.throw_away=!p.fit(r,o,l,h),p}return _inherits(n,e),_createClass(n,[{key:"fit",value:function(r,o,s,l){var h,p=this.unit_scale,d=_slicedToArray(LabelLineBase.splitLineByOrientation(o),2);o=d[0],h=d[1],typeof s.orientation=="number"&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(r[1]-s.vertical_buffer),h&&(this.offset[1]*=-1),s.orientation===-1&&(this.offset[1]*=-1));for(var g=getLineLengths(o),y=r[0]*p,v=0;v<o.length-1;v++)for(var _=o[v],w=0,I=0,G=v+1,_t=void 0;G<o.length;){var _r=o[G-1],_o=o[G],Ca=getAngleForSegment(_r,_o);if(G!==v+1&&(w+=getAbsAngleDiff(Ca,_t)),Math.abs(w)>STRAIGHT_ANGLE_TOLERANCE)break;if(calcFitness(I+=g[G-1],y)<l){var _a=Vector$1.mult(Vector$1.add(_,_o),.5);return this.angle=-Ca,Math.abs(this.angle-Math.PI/2)<VERTICAL_ANGLE_TOLERANCE&&(this.angle=-Math.PI/2,typeof s.orientation=="number"&&(this.offset[1]*=-1)),this.position=_a,this.breach=!this.inTileBounds(),!0}_t=Ca,G++}return!1}},{key:"getBoundingCircles",value:function(){if(!this._circles){var r=this.unit_scale,o=this.size[0]/2*r,s=o*Math.cos(this.angle),l=o*Math.sin(this.angle),h=-s,p=-l,d=this.offset[0]*r,g=this.offset[1]*r,y=_slicedToArray(this.position,2),v=y[0],_=y[1];if(_*=-1,d){var w=[s,l];Vector$1.normalize(w),w[0]*=d,w[1]*=d,v+=w[0],_+=w[1]}if(g){var I=[l,-s];Vector$1.normalize(I),I[0]*=g,I[1]*=g,v-=I[0],_-=I[1]}s+=v,l+=_,h+=v,p+=_;var G=this.size[1]/2*r;this._circles=encircleLine(s,l,h,p,G)}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){var r=this.unit_scale,o=this.size,s=this.layout.buffer,l=(o[0]+2*s[0])*r,h=(o[1]+2*s[1])*r;this._aabb=this.getAABBForSegment(this.position,l,h,this.angle)}return this._aabb}}])}(LabelLineBase),LabelLineCurved=function(e){function n(r,o,s,l){var h;return _classCallCheck(this,n),(h=_callSuper(this,n,[s,l])).type="curved",h.positions=[],h.angles=[],h._aabbs=[],h.pre_angles=[],h.offsets=[],h.num_segments=r.length,h.sizes=r,h.alt_angles=[],h.alt_pre_angles=[],h.alt_offsets=[],h.throw_away=!h.fit(h.sizes,o,l),h}return _inherits(n,e),_createClass(n,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(r,o,s){var l,h=this.unit_scale,p=Math.max.apply(Math,_toConsumableArray(r.map(function(Yy){return Yy[1]}))),d=p*h,g=_slicedToArray(LabelLineBase.splitLineByOrientation(o),2);o=g[0],l=g[1],typeof s.orientation=="number"&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(p-s.vertical_buffer),l&&(this.offset[1]*=-1),s.orientation===-1&&(this.offset[1]*=-1));var y=getLineLengths(o),v=r.map(function(Yy){return Yy[0]*h}),_=y.reduce(function(Yy,Jv){return Yy+Jv},0),w=v.reduce(function(Yy,Jv){return Yy+Jv},0);if(w>_)return!1;var I=o.length-1;if(I-0<2)return!1;var G=n.curvaturePlacement(o,_,y,w,0,I),_t=o[G];if(G===-1||I-G<2)return!1;this.position=_t;for(var _r=0;_r<v.length;_r++){this.positions[_r]=[],this.offsets[_r]=[],this.angles[_r]=[],this.pre_angles[_r]=[];for(var _o=0;_o<STOPS.length;_o++){var Ca=STOPS[_o],_a=_slicedToArray(n.scaleLine(Ca,o),2),_l=_a[0],Qa=_a[1];_t=_l[G];var Kc=n.placeAtIndex(G,_l,Qa,v),jc=Kc.positions,_h=Kc.offsets,_m=Kc.angles,ry=Kc.pre_angles,uy=_h.map(function(Yy){return Math.sqrt(Yy[0]*Yy[0]+Yy[1]*Yy[1])/h});if(Ca===0){this.angle=1/_m.length*_m.reduce(function(Yy,Jv){return Yy+Jv});for(var ay=0;ay<jc.length;ay++){var ey=jc[ay],_y=ry[ay],Ey=v[ay],My=_y+_m[ay];this._aabbs.push(this.getAABBForSegment(ey,Ey,d,My))}}this.positions[_r].push(jc[_r]),this.offsets[_r].push(uy[_r]),this.angles[_r].push(_m[_r]),this.pre_angles[_r].push(ry[_r])}}v=r.slice().reverse().map(function(Yy){return Yy[0]*h});for(var Ny=0;Ny<v.length;Ny++){this.alt_offsets[Ny]=[],this.alt_angles[Ny]=[],this.alt_pre_angles[Ny]=[];for(var Py=0;Py<STOPS.length;Py++){var gv=STOPS[Py],sv=_slicedToArray(n.scaleLine(gv,o),2),Kv=sv[0],Ty=sv[1];_t=Kv[G];var Gv=n.placeAtIndex(G,Kv,Ty,v),_v=Gv.offsets,i0=Gv.angles,T0=Gv.pre_angles,Ov=_v.map(function(Yy){return Math.sqrt(Yy[0]*Yy[0]+Yy[1]*Yy[1])/h});gv===0&&(this.alt_angle=1/i0.length*i0.reduce(function(Yy,Jv){return Yy+Jv})),this.alt_offsets[Ny].push(Ov[Ny]),this.alt_angles[Ny].push(i0[Ny]),this.alt_pre_angles[Ny].push(T0[Ny])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var r=[],o=this.unit_scale,s=0;s<this.positions.length;s++){var l=this.sizes[s],h=this.angles[s][0],p=this.positions[s][0],d=l[0]/2*o,g=d*Math.cos(h),y=d*Math.sin(h),v=-g,_=-y,w=_slicedToArray(p,2),I=w[0],G=w[1],_t=encircleLine(g+=I,y+=G*=-1,v+=I,_+=G,l[1]/2*o);Array.prototype.push.apply(r,_t)}this._circles=r}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var r=1/0,o=-1/0,s=-1/0,l=1/0,h=0;h<this._aabbs.length;h++){var p=this._aabbs[h];r=Math.min(r,p.left),o=Math.max(o,p.top),s=Math.max(s,p.right),l=Math.min(l,p.bottom)}this._aabb={left:r,top:o,right:s,bottom:l}}return this._aabb}}],[{key:"curvaturePlacement",value:function(r,o,s,l,h,p){h=h||0,p=p||r.length-1;for(var d=[],g=h+1;g<p;g++){var y=r[g-1],v=r[g],_=r[g+1],w=Vector$1.perp(v,y),I=Vector$1.perp(_,v),G=Vector$1.angleBetween(w,I);G>CURVE_MAX_ANGLE&&(G=1/0),d.push(G)}d.push(1/0);for(var _t=[],_r=[],_o=h,Ca=0,_a=0;_a<h;_a++)Ca+=s[_a];for(;Ca+l<o;){for(var _l=Ca+l,Qa=Ca,Kc=_o,jc=0;Kc<p&&Qa+s[Kc]<_l&&(jc+=d[Kc])!==1/0;)Qa+=s[Kc],Kc++;if(jc===0)return _o;var _h=jc/(Kc-_o);_t.push(jc),_r.push(_h),Ca+=s[_o],_o++}if(_t.length===0)return-1;var _m=Math.min.apply(null,_t),ry=_r[_t.indexOf(_m)];return _m<CURVE_MIN_TOTAL_COST&&ry<CURVE_MIN_AVG_COST?_t.indexOf(_m):-1}},{key:"scaleLine",value:function(r,o){var s=[o[0]],l=[];return o.forEach(function(h,p){if(p!==o.length-1){var d=Vector$1.sub(o[p+1],o[p]),g=Vector$1.mult(d,1+r);s.push(Vector$1.add(s[p],g)),l.push(Vector$1.length(g))}}),[s,l]}},{key:"placeAtIndex",value:function(r,o,s,l){var h=o[r],p=_slicedToArray(n.getIndicesAndOffsets(r,s,l),2),d=p[0],g=p[1],y=n.getPositionsFromIndicesAndOffsets(o,d,g),v=_slicedToArray(n.getAnglesFromIndicesAndOffsets(h,d,o,y),3);return{positions:y,offsets:v[0],angles:v[1],pre_angles:v[2]}}},{key:"getIndicesAndOffsets",value:function(r,o,s){for(var l=s.length,h=[],p=[],d=0,g=0,y=0;d<l;){for(var v=s[d];d<l&&g+.5*v<=y+o[r];){var _=g-y+.5*v;p.push(_),h.push(r),g+=v,v=s[++d]}y+=o[r],r++}return[h,p]}},{key:"getPositionsFromIndicesAndOffsets",value:function(r,o,s){for(var l=[],h=0;h<o.length;h++){var p=o[h],d=s[h],g=getAngleForSegment(r[p],r[p+1]),y=Vector$1.rot([d,0],g),v=Vector$1.add(r[p],y);l.push(v)}return l}},{key:"getAnglesFromIndicesAndOffsets",value:function(r,o,s,l){for(var h=[],p=[],d=[],g=0;g<l.length;g++){var y=l[g],v=o[g],_=Vector$1.sub(y,r),w=-Vector$1.angle(_),I=getTextAngleForSegment(s[v],s[v+1])-w;if(g>0){var G=h[g-1],_t=p[g-1];Math.abs(w-G)>Math.PI&&(w+=w>G?-2*Math.PI:2*Math.PI),Math.abs(_t-I)>Math.PI&&(I+=I>_t?-2*Math.PI:2*Math.PI)}h.push(w),p.push(I),d.push(_)}return[d,h,p]}}])}(LabelLineBase);function calcFitness(e,n){return n/e}function getAngleForSegment(e,n){var r=Vector$1.sub(n,e);return Vector$1.angle(r)}function getTextAngleForSegment(e,n){return-getAngleForSegment(e,n)}function getLineLengths(e){for(var n=[],r=0;r<e.length-1;r++){var o=e[r],s=e[r+1],l=Math.hypot(o[0]-s[0],o[1]-s[1]);n.push(l)}return n}function getAbsAngleDiff(e,n){var r,o;for(e>n?(r=n,o=e):(r=e,o=n);o-r>Math.PI;)r+=2*Math.PI;return Math.abs(o-r)}var TextStyle=Object.create(Points);Object.assign(TextStyle,{name:"text",super:Points,built_in:!0,init:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Style.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(e,n){this.super.makeVertexTemplate.apply(this,arguments);var r=n.vertex_data.vertex_layout;return this.fillVertexTemplate(r,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets",0,{size:4}),this.fillVertexTemplate(r,"a_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(r,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(r,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(e,n,r){var o=this,s=r.tile,l=e.geometry.type;n.can_articulate=l==="LineString"||l==="MultiLineString",n.supersample_text=l==="LineString"||l==="MultiLineString";var h=this.parseTextFeature(e,n,r,s);h&&(h instanceof Array?h.forEach(function(p){p.feature=e,p.context=r,p.layout.vertex=!1,o.queueFeature(p,s)}):(h.feature=e,h.context=r,h.layout.vertex=!1,this.queueFeature(h,s)),Collision.addStyle(this.name,s.id))},endData:function(e){var n=this,r=this.queues[e.id];return delete this.queues[e.id],this.collideAndRenderTextLabels(e,this.name,r).then(function(o){var s=o.labels,l=o.texts;return s&&l&&(n.texts[e.id]=l,s.forEach(function(h){var p=h.text_settings_key,d=n.texts[e.id][p]&&n.texts[e.id][p][h.text],g=n.feature_style;g.label=h.label,h.label.text_data={text_info:d,text_settings_key:p,text:h.text},g.label_texture=n.textureManager.default,d.text_settings.can_articulate?(g.size={},h.label.type==="straight"?g.size.straight=d.size.logical_size:g.size.curved=d.segment_sizes.map(function(y){return y.logical_size})):g.size=d.size.logical_size,Style.addFeature.call(n,h.feature,h.draw,h.context)})),n.freeText(e),Style.endData.call(n,e).then(function(h){if(h){for(var p in h.meshes)h.meshes[p].uniforms.u_apply_color_blocks=!0;e.mesh_data[n.name]=h}return h})})},_preprocess:function(e){return this.preprocessText(e)},buildTextLabels:function(e,n){for(var r=[],o=0;o<n.length;o++){var s=n[o],l=this.texts[e.id][s.text_settings_key][s.text],h=void 0;if(s.layout.vertical_buffer=l.vertical_buffer,l.text_settings.can_articulate){var p=l.segment_sizes.map(function(y){return y.collision_size});s.layout.no_curving=l.no_curving,h=this.buildLabels(p,s.feature.geometry,s.layout,l.size.collision_size)}else h=this.buildLabels(l.size.collision_size,s.feature.geometry,s.layout);for(var d=0;d<h.length;d++){var g=Object.create(s);g.label=h[d],r.push(g)}}return r},buildLabels:function(e,n,r,o){var s=n.type!=="Point",l=[];if(n.type==="LineString")Array.prototype.push.apply(l,this.buildLineLabels(n.coordinates,e,s,r,o));else if(n.type==="MultiLineString")for(var h=n.coordinates,p=0;p<h.length;++p)Array.prototype.push.apply(l,this.buildLineLabels(h[p],e,s,r,o));else if(n.type==="Point")l.push(new LabelPoint(n.coordinates,e,s,r));else if(n.type==="MultiPoint")for(var d=n.coordinates,g=0;g<d.length;++g)l.push(new LabelPoint(d[g],e,s,r));else if(n.type==="Polygon"){var y=Geo$1.centroid(n.coordinates);l.push(new LabelPoint(y,e,s,r))}else if(n.type==="MultiPolygon"){var v=Geo$1.multiCentroid(n.coordinates);l.push(new LabelPoint(v,e,s,r))}return l},buildLineLabels:function(e,n,r,o,s){var l=[],h=Math.min(o.subdiv,e.length-1);if(h>1)for(var p=(e.length-1)/h,d=0;d<h;d++){var g=Math.floor(d*p),y=Math.floor((d+1)*p)+1,v=e.slice(g,y),_=LabelLine.create(n,s,v,r,o);_&&l.push(_)}if(l.length<h){var w=LabelLine.create(n,s,e,r,o);w&&l.push(w)}return l},vertexLayoutForMeshVariant:function(){if(!this.vertex_layout){var e=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_offsets",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:gl$1.SHORT,normalized:!1}];this.vertex_layout=new VertexLayout(e)}return this.vertex_layout},getMeshVariantTypeForDraw:Points.getMeshVariantTypeForDraw}),TextStyle.texture_id=0;var RasterStyle=Object.create(Polygons);Object.assign(RasterStyle,{name:"raster",super:Polygons,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(e){return e.color=e.color||StyleParser.defaults.color,this.super._preprocess.apply(this,arguments)}});var CustomIcons=Object.create(Points);Object.assign(CustomIcons,{name:"custom_icons",collision:!1,init:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Points.init.call(this,e)},loadTexture:function(e,n,r){var o,s=e.width,l=e.height,h=e.items,p=document.createElement("canvas"),d=Utils$1.device_pixel_ratio,g=this.sources[n],y={sprites:{}};if(p.width=s*d,p.height=l*d,g){var v,_=h.length,w=p.getContext("2d");for(w.scale(d,d);v=h[--_];){var I=g.getIconBitmapByObjectId(v.meta.objectId,v.meta.id);if(I){var G=isTainting(I);G?log("error",G):(w.drawImage(I,v.x,v.y,v.width,v.height),y.sprites[v.meta.id]=[v.x,v.y,v.width,v.height])}}}return y.element=p,(o=this.textureManager.create(this.gl,r,y)).retain(),o.loading.then(function(_t){return _t.name})},buildRasterTextures:function(e,n){return WorkerBroker.postMessage(this.main_thread_target+".loadTexture",e.rasters,e.source,e.texture_name).then(function(r){return n.textures.push(r),n})},addFeature:function(e,n,r){var o=r.tile.rasters,s={};o.items.forEach(function(p){s[p.meta.id]=[p.x,p.y,p.width,p.height]});var l="".concat(r.tile.source,"_dyn_").concat(r.tile.coords.key,"_").concat(this.generation,"_").concat(r.tile.id);n.texture=r.tile.texture_name=l;var h=Object.assign({},DEFAULT_TEXTURE_INFO,{name:l,width:o.width,height:o.height,sprites:s,manager:this.textureManager});Texture.prototype.calculateSprites.apply(h),this.textureManager.textures[l]=h,Points.addFeature.apply(this,arguments),delete this.textureManager.textures[l]}});var DEFAULT_TEXTURE_INFO={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},OverlayStyle=Object.create(Polygons);Object.assign(OverlayStyle,{name:"overlays",super:Polygons,init:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection=e.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!Thread.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var e=!1;for(var n in this.sources)if(this.sources[n]instanceof ObjectSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},loadTextures:function(e,n){var r,o,s,l=this.sources[n],h=e.name;if(e.overlays_config.forEach(function(g){var y=g.texcoords,v=g.id,_=l.getMapObjectById(v),w=_.getBitmap();if(w){var I=isTainting(w=bitmapToCanvas(w,w.width,w.height));I?log("error",I):(r||((r=document.createElement("canvas")).width=e.width,r.height=e.height,o=r.getContext("2d")),o.save(),o.globalAlpha=_.getOpacity(),y.forEach(function(G){return o.drawImage(w,G[0],G[1],G[2],G[3])}),o.restore(),s=!0)}}),s){e.element=r;var p={};return p[h]=e,this.super.loadTextures.call(this,p)}var d=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:d.name,width:d.width,height:d.height,loaded:d.loaded}])},buildRasterTextures:function(e,n){var r=this.sources[e.source].tileTexture(e);return r?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",r,e.source).then(function(o){if(!o||o.length<1)return n;if(o.some(function(l){return!l.loaded}))return null;var s=o[0].name;return n.uniforms=n.uniforms||{},n.textures=n.textures||[],n.uniforms.u_raster=s,n.uniforms.u_raster_offset=[0,0,1],n.textures.push(s),n}):Promise.resolve(n)}});var shaderSrc_Vertex="uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",shaderSrc_Fragment="varying vec4 v_color;void main(void){gl_FragColor=v_color;}",STYLE_NAME="skybox",SkyBox=Object.create(Style),positions=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(SkyBox,{name:STYLE_NAME,built_in:!0,vertex_shader_src:shaderSrc_Vertex,fragment_shader_src:shaderSrc_Fragment,selection:!1,blend:"inlay",blend_order:1,init:function(){Style.init.apply(this,arguments),this.selection=!1},_preprocess:function(e){return e.color={top:StyleParser.createColorPropertyCache(e.color.zenith),bottom:StyleParser.createColorPropertyCache(e.color.horizon),fog:StyleParser.createColorPropertyCache(e.color.fog)},e},vertexLayoutForMeshVariant:function(e){if(!this.vertex_layout){var n=[{name:"a_position",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:gl$1.FLOAT,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:gl$1.FLOAT,normalized:!0}];this.vertex_layout=new VertexLayout(n)}return this.vertex_layout},makeVertexTemplate:function(e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template},parseFeature:function(e,n,r){var o=this.feature_style;return n.color&&n.color.top&&n.color.bottom&&(o.color_top=this.parseColor(n.color.top,r),o.color_bottom=this.parseColor(n.color.bottom,r),o.color_fog=this.parseColor(n.color.fog||"white",r),Array.isArray(o.color_fog)&&(o.color_fog=o.color_fog.slice(),o.color_fog[3]=0)),o},buildGeometry:function(e,n,r,o){for(var s=this.makeVertexTemplate(n),l=r.vertex_data,h=r.vertex_data.vertex_layout,p=l.vertex_layout.index.a_position,d={top:n.color_top,bottom:n.color_bottom},g={top:n.color_bottom,bottom:n.color_fog},y=0,v=positions.length-1;y<v;y+=2){s[p+0]=positions[y],s[p+1]=positions[y+1];var _=y<12,w=positions[y+1]>0,I=_?d:g;this.fillVertexTemplate(h,"a_is_sky",_?1:0,{size:1}),this.fillVertexTemplate(h,"a_is_top",w?1:0,{size:1}),this.fillVertexTemplate(h,"a_color",Vector$1.mult(w?I.top:I.bottom,255),{size:4}),l.addVertex(s)}return 4}});var shaderSrc_accessors=`#ifdef TANGRAM_VERTEX_SHADER
vec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}
#endif
vec4 worldPosition(){return v_world_position;}
#ifdef TANGRAM_VERTEX_SHADER
vec4 wrapWorldPosition(vec4 world_position){
#if defined(TANGRAM_WORLD_POSITION_WRAP)
vec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;
#endif
return world_position;}
#endif
#if defined(TANGRAM_VERTEX_SHADER)
vec3 worldNormal(){return TANGRAM_NORMAL;}
#elif defined(TANGRAM_FRAGMENT_SHADER)
vec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}
#endif
`,shaderSrc_layerOrder="void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}",shaderSrc_selectionGlobals=`
#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)
attribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;
#endif
`,shaderSrc_selectionVertex=`
#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)
if(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;
#endif
`,shaderSrc_utils=`#ifndef UTILS
#define UTILS
bool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}
#endif
`,shaderSrc_snapToPixelGrid=`uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);
#ifdef TANGRAM_VIEW_PAN_SNAP_RATE
position.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));
#else
position.xy=position_snap;
#endif
}`,StyleManager=function(){return _createClass(function e(){_classCallCheck(this,e),this.styles={},this.base_styles={},this.register(Object.create(Polygons)),this.register(Object.create(Lines)),this.register(Object.create(PatternLines)),this.register(Object.create(Points)),this.register(Object.create(TextStyle)),this.register(Object.create(RasterStyle)),this.register(Object.create(CustomIcons)),this.register(Object.create(OverlayStyle)),this.register(Object.create(SkyBox))},[{key:"init",value:function(){ShaderProgram.removeBlock("global"),ShaderProgram.removeBlock("setup"),ShaderProgram.addBlock("global",shaderSrc_accessors),ShaderProgram.addBlock("global",shaderSrc_layerOrder),ShaderProgram.addBlock("global",shaderSrc_selectionGlobals),ShaderProgram.addBlock("global",shaderSrc_snapToPixelGrid),ShaderProgram.replaceBlock("utils",shaderSrc_utils),ShaderProgram.replaceBlock("setup",shaderSrc_selectionVertex),ShaderProgram.defines.TANGRAM_EPSILON=1e-5,ShaderProgram.defines.TANGRAM_LAYER_DELTA=1/16384,ShaderProgram.defines.TANGRAM_TILE_SCALE="vec3(".concat(Geo$1.tile_scale,"., ").concat(Geo$1.tile_scale,"., u_meters_per_pixel * ").concat(Geo$1.tile_size,".)"),ShaderProgram.defines.TANGRAM_HEIGHT_SCALE=Geo$1.height_scale,ShaderProgram.defines.TANGRAM_ALPHA_TEST=.1,Lines.dash_textures={}}},{key:"destroy",value:function(e){var n=this;Object.keys(this.styles).forEach(function(r){var o=n.styles[r];o.gl===e&&(log("trace","StyleManager.destroy: destroying render style ".concat(o.name)),o.base&&n.remove(o.name),o.destroy())})}},{key:"register",value:function(e){this.styles[e.name]=e,this.base_styles[e.name]=e}},{key:"remove",value:function(e){delete this.styles[e]}},{key:"mix",value:function(e,n){if(e.mixed)return e;e.mixed={};var r=[];if(e.mix){var o;Array.isArray(e.mix)?(o=r).push.apply(o,_toConsumableArray(e.mix)):r.push(e.mix),(r=r.map(function(l){return n[l]}).filter(function(l){return l&&l!==e})).forEach(function(l){return e.mixed[l.name]=!0})}r.push(e),e.animated=r.some(function(l){return l&&l.animated}),e.texcoords=r.some(function(l){return l&&l.texcoords}),e.base=r.map(function(l){return l.base}).filter(function(l){return l}).pop(),e.lighting=r.map(function(l){return l.lighting}).filter(function(l){return l!=null}).pop(),e.texture=r.map(function(l){return l.texture}).filter(function(l){return l}).pop(),e.raster=r.map(function(l){return l.raster}).filter(function(l){return l!=null}).pop(),e.dash=r.map(function(l){return l.dash}).filter(function(l){return l!=null}).pop(),e.dash_background_color=r.map(function(l){return l.dash_background_color}).filter(function(l){return l!=null}).pop(),r.some(function(l){return l.hasOwnProperty("blend")&&l.blend})&&(e.blend=r.map(function(l){return l.hasOwnProperty("blend")&&l.blend}).filter(function(l){return l}).pop()),e.blend_order=r.map(function(l){return l.blend_order}).filter(function(l){return l!=null}).pop(),e.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(r.map(function(l){return l.defines}).filter(function(l){return l})))),e.material=Object.assign.apply(Object,[{}].concat(_toConsumableArray(r.map(function(l){return l.material}).filter(function(l){return l}))));var s=r.map(function(l){return l.draw}).filter(function(l){return l});return s.length>0&&(e.draw=mergeObjects.apply(void 0,[{}].concat(_toConsumableArray(s)))),this.mixShaders(e,n,r),e}},{key:"mixShaders",value:function(e,n,r){var o={},s=r.map(function(g){return g.shaders}).filter(function(g){return g});if(o.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(s.map(function(g){return g.defines}).filter(function(g){return g})))),o.uniforms={},o._uniforms=e.shaders&&e.shaders.uniforms||{},o._uniform_scopes={},r.filter(function(g){return g.shaders&&g.shaders.uniforms}).forEach(function(g){var y=function(_){o._uniform_scopes[_]=g.name,Object.defineProperty(o.uniforms,_,{enumerable:!0,configurable:!0,get:function(){return o._uniforms[_]!==void 0?o._uniforms[_]:n[o._uniform_scopes[_]].shaders.uniforms!==o.uniforms?n[o._uniform_scopes[_]].shaders.uniforms[_]:void 0},set:function(w){o._uniforms[_]=w}})};for(var v in g.shaders.uniforms)y(v)}),o.extensions=Object.keys(s.map(function(g){return g.extensions}).filter(function(g){return g}).reduce(function(g,y){return typeof y=="string"?g[y]=!0:y.forEach(function(v){return g[v]=!0}),g},{})||{}),e.shaders&&e.shaders.blocks)for(var l in e.shaders.block_scopes=e.shaders.block_scopes||{},e.shaders.blocks){var h,p=e.shaders.blocks[l];e.shaders.block_scopes[l]=e.shaders.block_scopes[l]||[],Array.isArray(p)?(h=e.shaders.block_scopes[l]).push.apply(h,_toConsumableArray(p.map(function(){return e.name}))):e.shaders.block_scopes[l].push(e.name)}var d={};return s.forEach(function(g){if(g.blocks){o.blocks=o.blocks||{},o.block_scopes=o.block_scopes||{};var y={};for(var v in g.blocks){var _=g.blocks[v],w=g.block_scopes[v];o.blocks[v]=o.blocks[v]||[],o.block_scopes[v]=o.block_scopes[v]||[],_=Array.isArray(_)?_:[_],w=Array.isArray(w)?w:[w];for(var I=0;I<_.length;I++)d[w[I]]||(y[w[I]]=!0,o.blocks[v].push(_[I]),o.block_scopes[v].push(w[I]))}Object.assign(d,y)}}),Object.assign(e.mixed,d),e.shaders=o,e}},{key:"create",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=mergeObjects({},n);return o.name=e,(o=this.mix(o,r)).base&&this.base_styles[o.base]?this.styles[e]=o=Object.assign(Object.create(this.base_styles[o.base]),o):o.base=null,o}},{key:"build",value:function(e){var n=this,r=Object.keys(e).sort(function(l,h){return n.inheritanceDepth(l,e)-n.inheritanceDepth(h,e)});for(var o in this.styles)this.base_styles[o]?this.styles[o].reset():delete this.styles[o];var s={};return r.forEach(function(l){s[l]=n.create(l,e[l],s)}),this.styles}},{key:"initStyles",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var n in this.styles)this.styles[n].init(e)}},{key:"inheritanceDepth",value:function(e,n){for(var r=this,o=0;;){var s=n[e];if(!s||!s.mix)break;if(o++,Array.isArray(s.mix)){o+=Math.max.apply(Math,_toConsumableArray(s.mix.map(function(l){if(e!==l)return r.inheritanceDepth(l,n)})));break}if(e===s.mix)break;e=s.mix}return o}}])}();function isNothing(e){return e==null}function isObject(e){return typeof e=="object"&&e!==null}function toArray(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]}function extend(e,n){var r,o,s,l;if(n)for(r=0,o=(l=Object.keys(n)).length;r<o;r+=1)e[s=l[r]]=n[s];return e}function repeat(e,n){var r,o="";for(r=0;r<n;r+=1)o+=e;return o}function isNegativeZero(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(e,n){var r="",o=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(r+=`

`+e.mark.snippet),o+" "+r):o}function YAMLException$1(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype),YAMLException$1.prototype.constructor=YAMLException$1,YAMLException$1.prototype.toString=function(e){return this.name+": "+formatError(this,e)};var exception=YAMLException$1;function getLine(e,n,r,o,s){var l="",h="",p=Math.floor(s/2)-1;return o-n>p&&(n=o-p+(l=" ... ").length),r-o>p&&(r=o+p-(h=" ...").length),{str:l+e.slice(n,r).replace(/\t/g,"\u2192")+h,pos:o-n+l.length}}function padStart(e,n){return common.repeat(" ",n-e.length)+e}function makeSnippet(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var r,o=/\r?\n|\r|\0/g,s=[0],l=[],h=-1;r=o.exec(e.buffer);)l.push(r.index),s.push(r.index+r[0].length),e.position<=r.index&&h<0&&(h=s.length-2);h<0&&(h=s.length-1);var p,d,g="",y=Math.min(e.line+n.linesAfter,l.length).toString().length,v=n.maxLength-(n.indent+y+3);for(p=1;p<=n.linesBefore&&!(h-p<0);p++)d=getLine(e.buffer,s[h-p],l[h-p],e.position-(s[h]-s[h-p]),v),g=common.repeat(" ",n.indent)+padStart((e.line-p+1).toString(),y)+" | "+d.str+`
`+g;for(d=getLine(e.buffer,s[h],l[h],e.position,v),g+=common.repeat(" ",n.indent)+padStart((e.line+1).toString(),y)+" | "+d.str+`
`,g+=common.repeat("-",n.indent+y+3+d.pos)+`^
`,p=1;p<=n.linesAfter&&!(h+p>=l.length);p++)d=getLine(e.buffer,s[h+p],l[h+p],e.position-(s[h]-s[h+p]),v),g+=common.repeat(" ",n.indent)+padStart((e.line+p+1).toString(),y)+" | "+d.str+`
`;return g.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(e){var n={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(o){n[String(o)]=r})}),n}function Type$1(e,n){if(n=n||{},Object.keys(n).forEach(function(r){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(r)===-1)throw new exception('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(r){return r},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=compileStyleAliases(n.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var type=Type$1;function compileList(e,n){var r=[];return e[n].forEach(function(o){var s=r.length;r.forEach(function(l,h){l.tag===o.tag&&l.kind===o.kind&&l.multi===o.multi&&(s=h)}),r[s]=o}),r}function compileMap(){var e,n,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function o(s){s.multi?(r.multi[s.kind].push(s),r.multi.fallback.push(s)):r[s.kind][s.tag]=r.fallback[s.tag]=s}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(o);return r}function Schema$1(e){return this.extend(e)}Schema$1.prototype.extend=function(e){var n=[],r=[];if(e instanceof type)r.push(e);else if(Array.isArray(e))r=r.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit))}n.forEach(function(s){if(!(s instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(Schema$1.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=compileList(o,"implicit"),o.compiledExplicit=compileList(o,"explicit"),o.compiledTypeMap=compileMap(o.compiledImplicit,o.compiledExplicit),o};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function constructYamlNull(){return null}function isNull(e){return e===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function constructYamlBoolean(e){return e==="true"||e==="True"||e==="TRUE"}function isBoolean(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}function resolveYamlInteger(e){if(e===null)return!1;var n,r=e.length,o=0,s=!1;if(!r)return!1;if((n=e[o])!=="-"&&n!=="+"||(n=e[++o]),n==="0"){if(o+1===r)return!0;if((n=e[++o])==="b"){for(o++;o<r;o++)if((n=e[o])!=="_"){if(n!=="0"&&n!=="1")return!1;s=!0}return s&&n!=="_"}if(n==="x"){for(o++;o<r;o++)if((n=e[o])!=="_"){if(!isHexCode(e.charCodeAt(o)))return!1;s=!0}return s&&n!=="_"}if(n==="o"){for(o++;o<r;o++)if((n=e[o])!=="_"){if(!isOctCode(e.charCodeAt(o)))return!1;s=!0}return s&&n!=="_"}}if(n==="_")return!1;for(;o<r;o++)if((n=e[o])!=="_"){if(!isDecCode(e.charCodeAt(o)))return!1;s=!0}return!(!s||n==="_")}function constructYamlInteger(e){var n,r=e,o=1;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),(n=r[0])!=="-"&&n!=="+"||(n==="-"&&(o=-1),n=(r=r.slice(1))[0]),r==="0")return 0;if(n==="0"){if(r[1]==="b")return o*parseInt(r.slice(2),2);if(r[1]==="x")return o*parseInt(r.slice(2),16);if(r[1]==="o")return o*parseInt(r.slice(2),8)}return o*parseInt(r,10)}function isInteger(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!common.isNegativeZero(e)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(e){return e!==null&&!(!YAML_FLOAT_PATTERN.test(e)||e[e.length-1]==="_")}function constructYamlFloat(e){var n,r;return r=(n=e.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:r*parseFloat(n,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(e,n){var r;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(e))return"-0.0";return r=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(r)?r.replace("e",".e"):r}function isFloat(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||common.isNegativeZero(e))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(e){return e!==null&&(YAML_DATE_REGEXP.exec(e)!==null||YAML_TIMESTAMP_REGEXP.exec(e)!==null)}function constructYamlTimestamp(e){var n,r,o,s,l,h,p,d,g=0,y=null;if((n=YAML_DATE_REGEXP.exec(e))===null&&(n=YAML_TIMESTAMP_REGEXP.exec(e)),n===null)throw new Error("Date resolve error");if(r=+n[1],o=+n[2]-1,s=+n[3],!n[4])return new Date(Date.UTC(r,o,s));if(l=+n[4],h=+n[5],p=+n[6],n[7]){for(g=n[7].slice(0,3);g.length<3;)g+="0";g=+g}return n[9]&&(y=6e4*(60*+n[10]+ +(n[11]||0)),n[9]==="-"&&(y=-y)),d=new Date(Date.UTC(r,o,s,l,h,p,g)),y&&d.setTime(d.getTime()-y),d}function representYamlTimestamp(e){return e.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(e){return e==="<<"||e===null}var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(e){if(e===null)return!1;var n,r,o=0,s=e.length,l=BASE64_MAP;for(r=0;r<s;r++)if(!((n=l.indexOf(e.charAt(r)))>64)){if(n<0)return!1;o+=6}return o%8==0}function constructYamlBinary(e){var n,r,o=e.replace(/[\r\n=]/g,""),s=o.length,l=BASE64_MAP,h=0,p=[];for(n=0;n<s;n++)n%4==0&&n&&(p.push(h>>16&255),p.push(h>>8&255),p.push(255&h)),h=h<<6|l.indexOf(o.charAt(n));return(r=s%4*6)===0?(p.push(h>>16&255),p.push(h>>8&255),p.push(255&h)):r===18?(p.push(h>>10&255),p.push(h>>2&255)):r===12&&p.push(h>>4&255),new Uint8Array(p)}function representYamlBinary(e){var n,r,o="",s=0,l=e.length,h=BASE64_MAP;for(n=0;n<l;n++)n%3==0&&n&&(o+=h[s>>18&63],o+=h[s>>12&63],o+=h[s>>6&63],o+=h[63&s]),s=(s<<8)+e[n];return(r=l%3)===0?(o+=h[s>>18&63],o+=h[s>>12&63],o+=h[s>>6&63],o+=h[63&s]):r===2?(o+=h[s>>10&63],o+=h[s>>4&63],o+=h[s<<2&63],o+=h[64]):r===1&&(o+=h[s>>2&63],o+=h[s<<4&63],o+=h[64],o+=h[64]),o}function isBinary(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(e){if(e===null)return!0;var n,r,o,s,l,h=[],p=e;for(n=0,r=p.length;n<r;n+=1){if(o=p[n],l=!1,_toString$2.call(o)!=="[object Object]")return!1;for(s in o)if(_hasOwnProperty$3.call(o,s)){if(l)return!1;l=!0}if(!l||h.indexOf(s)!==-1)return!1;h.push(s)}return!0}function constructYamlOmap(e){return e!==null?e:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(e){if(e===null)return!0;var n,r,o,s,l,h=e;for(l=new Array(h.length),n=0,r=h.length;n<r;n+=1){if(o=h[n],_toString$1.call(o)!=="[object Object]"||(s=Object.keys(o)).length!==1)return!1;l[n]=[s[0],o[s[0]]]}return!0}function constructYamlPairs(e){if(e===null)return[];var n,r,o,s,l,h=e;for(l=new Array(h.length),n=0,r=h.length;n<r;n+=1)o=h[n],s=Object.keys(o),l[n]=[s[0],o[s[0]]];return l}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(e){if(e===null)return!0;var n,r=e;for(n in r)if(_hasOwnProperty$2.call(r,n)&&r[n]!==null)return!1;return!0}function constructYamlSet(e){return e!==null?e:{}}var set=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge],explicit:[binary,omap,pairs,set]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(e){return Object.prototype.toString.call(e)}function is_EOL(e){return e===10||e===13}function is_WHITE_SPACE(e){return e===9||e===32}function is_WS_OR_EOL(e){return e===9||e===32||e===10||e===13}function is_FLOW_INDICATOR(e){return e===44||e===91||e===93||e===123||e===125}function fromHexCode(e){var n;return 48<=e&&e<=57?e-48:97<=(n=32|e)&&n<=102?n-97+10:-1}function escapedHexLen(e){return e===120?2:e===117?4:e===85?8:0}function fromDecimalCode(e){return 48<=e&&e<=57?e-48:-1}function simpleEscapeSequence(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||_default,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(e,n){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=snippet(r),new exception(n,r)}function throwError(e,n){throw generateError(e,n)}function throwWarning(e,n){e.onWarning&&e.onWarning.call(null,generateError(e,n))}var directiveHandlers={YAML:function(e,n,r){var o,s,l;e.version!==null&&throwError(e,"duplication of %YAML directive"),r.length!==1&&throwError(e,"YAML directive accepts exactly one argument"),(o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))===null&&throwError(e,"ill-formed argument of the YAML directive"),s=parseInt(o[1],10),l=parseInt(o[2],10),s!==1&&throwError(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=l<2,l!==1&&l!==2&&throwWarning(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var o,s;r.length!==2&&throwError(e,"TAG directive accepts exactly two arguments"),o=r[0],s=r[1],PATTERN_TAG_HANDLE.test(o)||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(e.tagMap,o)&&throwError(e,'there is a previously declared suffix for "'+o+'" tag handle'),PATTERN_TAG_URI.test(s)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{throwError(e,"tag prefix is malformed: "+s)}e.tagMap[o]=s}};function captureSegment(e,n,r,o){var s,l,h,p;if(n<r){if(p=e.input.slice(n,r),o)for(s=0,l=p.length;s<l;s+=1)(h=p.charCodeAt(s))===9||32<=h&&h<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(p)&&throwError(e,"the stream contains non-printable characters");e.result+=p}}function mergeMappings(e,n,r,o){var s,l,h,p;for(common.isObject(r)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),h=0,p=(s=Object.keys(r)).length;h<p;h+=1)l=s[h],_hasOwnProperty$1.call(n,l)||(n[l]=r[l],o[l]=!0)}function storeMappingPair(e,n,r,o,s,l,h,p,d){var g,y;if(Array.isArray(s))for(g=0,y=(s=Array.prototype.slice.call(s)).length;g<y;g+=1)Array.isArray(s[g])&&throwError(e,"nested arrays are not supported inside keys"),typeof s=="object"&&_class(s[g])==="[object Object]"&&(s[g]="[object Object]");if(typeof s=="object"&&_class(s)==="[object Object]"&&(s="[object Object]"),s=String(s),n===null&&(n={}),o==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(g=0,y=l.length;g<y;g+=1)mergeMappings(e,n,l[g],r);else mergeMappings(e,n,l,r);else e.json||_hasOwnProperty$1.call(r,s)||!_hasOwnProperty$1.call(n,s)||(e.line=h||e.line,e.lineStart=p||e.lineStart,e.position=d||e.position,throwError(e,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(n,s,{configurable:!0,enumerable:!0,writable:!0,value:l}):n[s]=l,delete r[s];return n}function readLineBreak(e){var n;(n=e.input.charCodeAt(e.position))===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function skipSeparationSpace(e,n,r){for(var o=0,s=e.input.charCodeAt(e.position);s!==0;){for(;is_WHITE_SPACE(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(n&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(!is_EOL(s))break;for(readLineBreak(e),s=e.input.charCodeAt(e.position),o++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position)}return r!==-1&&o!==0&&e.lineIndent<r&&throwWarning(e,"deficient indentation"),o}function testDocumentSeparator(e){var n,r=e.position;return!((n=e.input.charCodeAt(r))!==45&&n!==46||n!==e.input.charCodeAt(r+1)||n!==e.input.charCodeAt(r+2)||(r+=3,(n=e.input.charCodeAt(r))!==0&&!is_WS_OR_EOL(n)))}function writeFoldedLines(e,n){n===1?e.result+=" ":n>1&&(e.result+=common.repeat(`
`,n-1))}function readPlainScalar(e,n,r){var o,s,l,h,p,d,g,y,v=e.kind,_=e.result;if(is_WS_OR_EOL(y=e.input.charCodeAt(e.position))||is_FLOW_INDICATOR(y)||y===35||y===38||y===42||y===33||y===124||y===62||y===39||y===34||y===37||y===64||y===96||(y===63||y===45)&&(is_WS_OR_EOL(o=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(o)))return!1;for(e.kind="scalar",e.result="",s=l=e.position,h=!1;y!==0;){if(y===58){if(is_WS_OR_EOL(o=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(o))break}else if(y===35){if(is_WS_OR_EOL(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||r&&is_FLOW_INDICATOR(y))break;if(is_EOL(y)){if(p=e.line,d=e.lineStart,g=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=n){h=!0,y=e.input.charCodeAt(e.position);continue}e.position=l,e.line=p,e.lineStart=d,e.lineIndent=g;break}}h&&(captureSegment(e,s,l,!1),writeFoldedLines(e,e.line-p),s=l=e.position,h=!1),is_WHITE_SPACE(y)||(l=e.position+1),y=e.input.charCodeAt(++e.position)}return captureSegment(e,s,l,!1),!!e.result||(e.kind=v,e.result=_,!1)}function readSingleQuotedScalar(e,n){var r,o,s;if((r=e.input.charCodeAt(e.position))!==39)return!1;for(e.kind="scalar",e.result="",e.position++,o=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39){if(captureSegment(e,o,e.position,!0),(r=e.input.charCodeAt(++e.position))!==39)return!0;o=e.position,e.position++,s=e.position}else is_EOL(r)?(captureSegment(e,o,s,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,n)),o=s=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(e,n){var r,o,s,l,h,p;if((p=e.input.charCodeAt(e.position))!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=o=e.position;(p=e.input.charCodeAt(e.position))!==0;){if(p===34)return captureSegment(e,r,e.position,!0),e.position++,!0;if(p===92){if(captureSegment(e,r,e.position,!0),is_EOL(p=e.input.charCodeAt(++e.position)))skipSeparationSpace(e,!1,n);else if(p<256&&simpleEscapeCheck[p])e.result+=simpleEscapeMap[p],e.position++;else if((h=escapedHexLen(p))>0){for(s=h,l=0;s>0;s--)(h=fromHexCode(p=e.input.charCodeAt(++e.position)))>=0?l=(l<<4)+h:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(l),e.position++}else throwError(e,"unknown escape sequence");r=o=e.position}else is_EOL(p)?(captureSegment(e,r,o,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,n)),r=o=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(e,n){var r,o,s,l,h,p,d,g,y,v,_,w,I=!0,G=e.tag,_t=e.anchor,_r=Object.create(null);if((w=e.input.charCodeAt(e.position))===91)h=93,g=!1,l=[];else{if(w!==123)return!1;h=125,g=!0,l={}}for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),w=e.input.charCodeAt(++e.position);w!==0;){if(skipSeparationSpace(e,!0,n),(w=e.input.charCodeAt(e.position))===h)return e.position++,e.tag=G,e.anchor=_t,e.kind=g?"mapping":"sequence",e.result=l,!0;I?w===44&&throwError(e,"expected the node content, but found ','"):throwError(e,"missed comma between flow collection entries"),_=null,p=d=!1,w===63&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1))&&(p=d=!0,e.position++,skipSeparationSpace(e,!0,n)),r=e.line,o=e.lineStart,s=e.position,composeNode(e,n,CONTEXT_FLOW_IN,!1,!0),v=e.tag,y=e.result,skipSeparationSpace(e,!0,n),w=e.input.charCodeAt(e.position),!d&&e.line!==r||w!==58||(p=!0,w=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,n),composeNode(e,n,CONTEXT_FLOW_IN,!1,!0),_=e.result),g?storeMappingPair(e,l,_r,v,y,_,r,o,s):p?l.push(storeMappingPair(e,null,_r,v,y,_,r,o,s)):l.push(y),skipSeparationSpace(e,!0,n),(w=e.input.charCodeAt(e.position))===44?(I=!0,w=e.input.charCodeAt(++e.position)):I=!1}throwError(e,"unexpected end of the stream within a flow collection")}function readBlockScalar(e,n){var r,o,s,l,h=CHOMPING_CLIP,p=!1,d=!1,g=n,y=0,v=!1;if((l=e.input.charCodeAt(e.position))===124)o=!1;else{if(l!==62)return!1;o=!0}for(e.kind="scalar",e.result="";l!==0;)if((l=e.input.charCodeAt(++e.position))===43||l===45)CHOMPING_CLIP===h?h=l===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else{if(!((s=fromDecimalCode(l))>=0))break;s===0?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?throwError(e,"repeat of an indentation width identifier"):(g=n+s-1,d=!0)}if(is_WHITE_SPACE(l)){do l=e.input.charCodeAt(++e.position);while(is_WHITE_SPACE(l));if(l===35)do l=e.input.charCodeAt(++e.position);while(!is_EOL(l)&&l!==0)}for(;l!==0;){for(readLineBreak(e),e.lineIndent=0,l=e.input.charCodeAt(e.position);(!d||e.lineIndent<g)&&l===32;)e.lineIndent++,l=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>g&&(g=e.lineIndent),is_EOL(l))y++;else{if(e.lineIndent<g){h===CHOMPING_KEEP?e.result+=common.repeat(`
`,p?1+y:y):h===CHOMPING_CLIP&&p&&(e.result+=`
`);break}for(o?is_WHITE_SPACE(l)?(v=!0,e.result+=common.repeat(`
`,p?1+y:y)):v?(v=!1,e.result+=common.repeat(`
`,y+1)):y===0?p&&(e.result+=" "):e.result+=common.repeat(`
`,y):e.result+=common.repeat(`
`,p?1+y:y),p=!0,d=!0,y=0,r=e.position;!is_EOL(l)&&l!==0;)l=e.input.charCodeAt(++e.position);captureSegment(e,r,e.position,!1)}}return!0}function readBlockSequence(e,n){var r,o,s=e.tag,l=e.anchor,h=[],p=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),o=e.input.charCodeAt(e.position);o!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,throwError(e,"tab characters must not be used in indentation")),o===45)&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1));)if(p=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=n)h.push(null),o=e.input.charCodeAt(e.position);else if(r=e.line,composeNode(e,n,CONTEXT_BLOCK_IN,!1,!0),h.push(e.result),skipSeparationSpace(e,!0,-1),o=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>n)&&o!==0)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break;return!!p&&(e.tag=s,e.anchor=l,e.kind="sequence",e.result=h,!0)}function readBlockMapping(e,n,r){var o,s,l,h,p,d,g,y=e.tag,v=e.anchor,_={},w=Object.create(null),I=null,G=null,_t=null,_r=!1,_o=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=_),g=e.input.charCodeAt(e.position);g!==0;){if(_r||e.firstTabInLine===-1||(e.position=e.firstTabInLine,throwError(e,"tab characters must not be used in indentation")),o=e.input.charCodeAt(e.position+1),l=e.line,g!==63&&g!==58||!is_WS_OR_EOL(o)){if(h=e.line,p=e.lineStart,d=e.position,!composeNode(e,r,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===l){for(g=e.input.charCodeAt(e.position);is_WHITE_SPACE(g);)g=e.input.charCodeAt(++e.position);if(g===58)is_WS_OR_EOL(g=e.input.charCodeAt(++e.position))||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),_r&&(storeMappingPair(e,_,w,I,G,null,h,p,d),I=G=_t=null),_o=!0,_r=!1,s=!1,I=e.tag,G=e.result;else{if(!_o)return e.tag=y,e.anchor=v,!0;throwError(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!_o)return e.tag=y,e.anchor=v,!0;throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else g===63?(_r&&(storeMappingPair(e,_,w,I,G,null,h,p,d),I=G=_t=null),_o=!0,_r=!0,s=!0):_r?(_r=!1,s=!0):throwError(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,g=o;if((e.line===l||e.lineIndent>n)&&(_r&&(h=e.line,p=e.lineStart,d=e.position),composeNode(e,n,CONTEXT_BLOCK_OUT,!0,s)&&(_r?G=e.result:_t=e.result),_r||(storeMappingPair(e,_,w,I,G,_t,h,p,d),I=G=_t=null),skipSeparationSpace(e,!0,-1),g=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>n)&&g!==0)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return _r&&storeMappingPair(e,_,w,I,G,null,h,p,d),_o&&(e.tag=y,e.anchor=v,e.kind="mapping",e.result=_),_o}function readTagProperty(e){var n,r,o,s,l=!1,h=!1;if((s=e.input.charCodeAt(e.position))!==33)return!1;if(e.tag!==null&&throwError(e,"duplication of a tag property"),(s=e.input.charCodeAt(++e.position))===60?(l=!0,s=e.input.charCodeAt(++e.position)):s===33?(h=!0,r="!!",s=e.input.charCodeAt(++e.position)):r="!",n=e.position,l){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(n,e.position),s=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!is_WS_OR_EOL(s);)s===33&&(h?throwError(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(n-1,e.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(e,"named tag handle cannot contain such characters"),h=!0,n=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(n,e.position),PATTERN_FLOW_INDICATORS.test(o)&&throwError(e,"tag suffix cannot contain flow indicator characters")}o&&!PATTERN_TAG_URI.test(o)&&throwError(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{throwError(e,"tag name is malformed: "+o)}return l?e.tag=o:_hasOwnProperty$1.call(e.tagMap,r)?e.tag=e.tagMap[r]+o:r==="!"?e.tag="!"+o:r==="!!"?e.tag="tag:yaml.org,2002:"+o:throwError(e,'undeclared tag handle "'+r+'"'),!0}function readAnchorProperty(e){var n,r;if((r=e.input.charCodeAt(e.position))!==38)return!1;for(e.anchor!==null&&throwError(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!is_WS_OR_EOL(r)&&!is_FLOW_INDICATOR(r);)r=e.input.charCodeAt(++e.position);return e.position===n&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function readAlias(e){var n,r,o;if((o=e.input.charCodeAt(e.position))!==42)return!1;for(o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!is_WS_OR_EOL(o)&&!is_FLOW_INDICATOR(o);)o=e.input.charCodeAt(++e.position);return e.position===n&&throwError(e,"name of an alias node must contain at least one character"),r=e.input.slice(n,e.position),_hasOwnProperty$1.call(e.anchorMap,r)||throwError(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],skipSeparationSpace(e,!0,-1),!0}function composeNode(e,n,r,o,s){var l,h,p,d,g,y,v,_,w,I=1,G=!1,_t=!1;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=h=p=CONTEXT_BLOCK_OUT===r||CONTEXT_BLOCK_IN===r,o&&skipSeparationSpace(e,!0,-1)&&(G=!0,e.lineIndent>n?I=1:e.lineIndent===n?I=0:e.lineIndent<n&&(I=-1)),I===1)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(G=!0,p=l,e.lineIndent>n?I=1:e.lineIndent===n?I=0:e.lineIndent<n&&(I=-1)):p=!1;if(p&&(p=G||s),I!==1&&CONTEXT_BLOCK_OUT!==r||(_=CONTEXT_FLOW_IN===r||CONTEXT_FLOW_OUT===r?n:n+1,w=e.position-e.lineStart,I===1?p&&(readBlockSequence(e,w)||readBlockMapping(e,w,_))||readFlowCollection(e,_)?_t=!0:(h&&readBlockScalar(e,_)||readSingleQuotedScalar(e,_)||readDoubleQuotedScalar(e,_)?_t=!0:readAlias(e)?(_t=!0,e.tag===null&&e.anchor===null||throwError(e,"alias node should not have any properties")):readPlainScalar(e,_,CONTEXT_FLOW_IN===r)&&(_t=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):I===0&&(_t=p&&readBlockSequence(e,w))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&throwError(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,g=e.implicitTypes.length;d<g;d+=1)if((v=e.implicitTypes[d]).resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(_hasOwnProperty$1.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,d=0,g=(y=e.typeMap.multi[e.kind||"fallback"]).length;d<g;d+=1)if(e.tag.slice(0,y[d].tag.length)===y[d].tag){v=y[d];break}v||throwError(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||_t}function readDocument(e){var n,r,o,s,l=e.position,h=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(skipSeparationSpace(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(h=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!is_WS_OR_EOL(s);)s=e.input.charCodeAt(++e.position);for(o=[],(r=e.input.slice(n,e.position)).length<1&&throwError(e,"directive name must not be less than one character in length");s!==0;){for(;is_WHITE_SPACE(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!is_EOL(s));break}if(is_EOL(s))break;for(n=e.position;s!==0&&!is_WS_OR_EOL(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(n,e.position))}s!==0&&readLineBreak(e),_hasOwnProperty$1.call(directiveHandlers,r)?directiveHandlers[r](e,r,o):throwWarning(e,'unknown document directive "'+r+'"')}skipSeparationSpace(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,skipSeparationSpace(e,!0,-1)):h&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(l,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)?e.input.charCodeAt(e.position)===46&&(e.position+=3,skipSeparationSpace(e,!0,-1)):e.position<e.length-1&&throwError(e,"end of the stream or a document separator is expected")}function loadDocuments(e,n){n=n||{},(e=String(e)).length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new State$1(e,n),o=e.indexOf("\0");for(o!==-1&&(r.position=o,throwError(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)readDocument(r);return r.documents}function loadAll$1(e,n,r){n!==null&&typeof n=="object"&&r===void 0&&(r=n,n=null);var o=loadDocuments(e,r);if(typeof n!="function")return o;for(var s=0,l=o.length;s<l;s+=1)n(o[s])}function load$1(e,n){var r=loadDocuments(e,n);if(r.length!==0){if(r.length===1)return r[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader={loadAll:loadAll_1,load:load_1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(e,n){var r,o,s,l,h,p,d;if(n===null)return{};for(r={},s=0,l=(o=Object.keys(n)).length;s<l;s+=1)h=o[s],p=String(n[h]),h.slice(0,2)==="!!"&&(h="tag:yaml.org,2002:"+h.slice(2)),(d=e.compiledTypeMap.fallback[h])&&_hasOwnProperty.call(d.styleAliases,p)&&(p=d.styleAliases[p]),r[h]=p;return r}function encodeHex(e){var n,r,o;if(n=e.toString(16).toUpperCase(),e<=255)r="x",o=2;else if(e<=65535)r="u",o=4;else{if(!(e<=4294967295))throw new exception("code point within a string may not be greater than 0xFFFFFFFF");r="U",o=8}return"\\"+r+common.repeat("0",o-n.length)+n}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(e){this.schema=e.schema||_default,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=common.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=compileStyleMap(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,n){for(var r,o=common.repeat(" ",n),s=0,l=-1,h="",p=e.length;s<p;)(l=e.indexOf(`
`,s))===-1?(r=e.slice(s),s=p):(r=e.slice(s,l+1),s=l+1),r.length&&r!==`
`&&(h+=o),h+=r;return h}function generateNextLine(e,n){return`
`+common.repeat(" ",e.indent*n)}function testImplicitResolving(e,n){var r,o;for(r=0,o=e.implicitTypes.length;r<o;r+=1)if(e.implicitTypes[r].resolve(n))return!0;return!1}function isWhitespace(e){return e===CHAR_SPACE||e===CHAR_TAB}function isPrintable(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==CHAR_BOM||65536<=e&&e<=1114111}function isNsCharOrWhitespace(e){return isPrintable(e)&&e!==CHAR_BOM&&e!==CHAR_CARRIAGE_RETURN&&e!==CHAR_LINE_FEED}function isPlainSafe(e,n,r){var o=isNsCharOrWhitespace(e),s=o&&!isWhitespace(e);return(r?o:o&&e!==CHAR_COMMA&&e!==CHAR_LEFT_SQUARE_BRACKET&&e!==CHAR_RIGHT_SQUARE_BRACKET&&e!==CHAR_LEFT_CURLY_BRACKET&&e!==CHAR_RIGHT_CURLY_BRACKET)&&e!==CHAR_SHARP&&!(n===CHAR_COLON&&!s)||isNsCharOrWhitespace(n)&&!isWhitespace(n)&&e===CHAR_SHARP||n===CHAR_COLON&&s}function isPlainSafeFirst(e){return isPrintable(e)&&e!==CHAR_BOM&&!isWhitespace(e)&&e!==CHAR_MINUS&&e!==CHAR_QUESTION&&e!==CHAR_COLON&&e!==CHAR_COMMA&&e!==CHAR_LEFT_SQUARE_BRACKET&&e!==CHAR_RIGHT_SQUARE_BRACKET&&e!==CHAR_LEFT_CURLY_BRACKET&&e!==CHAR_RIGHT_CURLY_BRACKET&&e!==CHAR_SHARP&&e!==CHAR_AMPERSAND&&e!==CHAR_ASTERISK&&e!==CHAR_EXCLAMATION&&e!==CHAR_VERTICAL_LINE&&e!==CHAR_EQUALS&&e!==CHAR_GREATER_THAN&&e!==CHAR_SINGLE_QUOTE&&e!==CHAR_DOUBLE_QUOTE&&e!==CHAR_PERCENT&&e!==CHAR_COMMERCIAL_AT&&e!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(e){return!isWhitespace(e)&&e!==CHAR_COLON}function codePointAt(e,n){var r,o=e.charCodeAt(n);return o>=55296&&o<=56319&&n+1<e.length&&(r=e.charCodeAt(n+1))>=56320&&r<=57343?1024*(o-55296)+r-56320+65536:o}function needIndentIndicator(e){return/^\n* /.test(e)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(e,n,r,o,s,l,h,p){var d,g=0,y=null,v=!1,_=!1,w=o!==-1,I=-1,G=isPlainSafeFirst(codePointAt(e,0))&&isPlainSafeLast(codePointAt(e,e.length-1));if(n||h)for(d=0;d<e.length;g>=65536?d+=2:d++){if(!isPrintable(g=codePointAt(e,d)))return STYLE_DOUBLE;G=G&&isPlainSafe(g,y,p),y=g}else{for(d=0;d<e.length;g>=65536?d+=2:d++){if((g=codePointAt(e,d))===CHAR_LINE_FEED)v=!0,w&&(_=_||d-I-1>o&&e[I+1]!==" ",I=d);else if(!isPrintable(g))return STYLE_DOUBLE;G=G&&isPlainSafe(g,y,p),y=g}_=_||w&&d-I-1>o&&e[I+1]!==" "}return v||_?r>9&&needIndentIndicator(e)?STYLE_DOUBLE:h?l===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:_?STYLE_FOLDED:STYLE_LITERAL:!G||h||s(e)?l===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:STYLE_PLAIN}function writeScalar(e,n,r,o,s){e.dump=function(){if(n.length===0)return e.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!e.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(n)!==-1||DEPRECATED_BASE60_SYNTAX.test(n)))return e.quotingType===QUOTING_TYPE_DOUBLE?'"'+n+'"':"'"+n+"'";var l=e.indent*Math.max(1,r),h=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),p=o||e.flowLevel>-1&&r>=e.flowLevel;switch(chooseScalarStyle(n,p,e.indent,h,function(d){return testImplicitResolving(e,d)},e.quotingType,e.forceQuotes&&!o,s)){case STYLE_PLAIN:return n;case STYLE_SINGLE:return"'"+n.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(n,e.indent)+dropEndingNewline(indentString(n,l));case STYLE_FOLDED:return">"+blockHeader(n,e.indent)+dropEndingNewline(indentString(foldString(n,h),l));case STYLE_DOUBLE:return'"'+escapeString(n)+'"';default:throw new exception("impossible error: invalid scalar style")}}()}function blockHeader(e,n){var r=needIndentIndicator(e)?String(n):"",o=e[e.length-1]===`
`;return r+(o&&(e[e.length-2]===`
`||e===`
`)?"+":o?"":"-")+`
`}function dropEndingNewline(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function foldString(e,n){for(var r,o,s,l=/(\n+)([^\n]*)/g,h=(r=(r=e.indexOf(`
`))!==-1?r:e.length,l.lastIndex=r,foldLine(e.slice(0,r),n)),p=e[0]===`
`||e[0]===" ";s=l.exec(e);){var d=s[1],g=s[2];o=g[0]===" ",h+=d+(p||o||g===""?"":`
`)+foldLine(g,n),p=o}return h}function foldLine(e,n){if(e===""||e[0]===" ")return e;for(var r,o,s=/ [^ ]/g,l=0,h=0,p=0,d="";r=s.exec(e);)(p=r.index)-l>n&&(o=h>l?h:p,d+=`
`+e.slice(l,o),l=o+1),h=p;return d+=`
`,e.length-l>n&&h>l?d+=e.slice(l,h)+`
`+e.slice(h+1):d+=e.slice(l),d.slice(1)}function escapeString(e){for(var n,r="",o=0,s=0;s<e.length;o>=65536?s+=2:s++)o=codePointAt(e,s),!(n=ESCAPE_SEQUENCES[o])&&isPrintable(o)?(r+=e[s],o>=65536&&(r+=e[s+1])):r+=n||encodeHex(o);return r}function writeFlowSequence(e,n,r){var o,s,l,h="",p=e.tag;for(o=0,s=r.length;o<s;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(writeNode(e,n,l,!1,!1)||l===void 0&&writeNode(e,n,null,!1,!1))&&(h!==""&&(h+=","+(e.condenseFlow?"":" ")),h+=e.dump);e.tag=p,e.dump="["+h+"]"}function writeBlockSequence(e,n,r,o){var s,l,h,p="",d=e.tag;for(s=0,l=r.length;s<l;s+=1)h=r[s],e.replacer&&(h=e.replacer.call(r,String(s),h)),(writeNode(e,n+1,h,!0,!0,!1,!0)||h===void 0&&writeNode(e,n+1,null,!0,!0,!1,!0))&&(o&&p===""||(p+=generateNextLine(e,n)),e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?p+="-":p+="- ",p+=e.dump);e.tag=d,e.dump=p||"[]"}function writeFlowMapping(e,n,r){var o,s,l,h,p,d="",g=e.tag,y=Object.keys(r);for(o=0,s=y.length;o<s;o+=1)p="",d!==""&&(p+=", "),e.condenseFlow&&(p+='"'),h=r[l=y[o]],e.replacer&&(h=e.replacer.call(r,l,h)),writeNode(e,n,l,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),writeNode(e,n,h,!1,!1)&&(d+=p+=e.dump));e.tag=g,e.dump="{"+d+"}"}function writeBlockMapping(e,n,r,o){var s,l,h,p,d,g,y="",v=e.tag,_=Object.keys(r);if(e.sortKeys===!0)_.sort();else if(typeof e.sortKeys=="function")_.sort(e.sortKeys);else if(e.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(s=0,l=_.length;s<l;s+=1)g="",o&&y===""||(g+=generateNextLine(e,n)),p=r[h=_[s]],e.replacer&&(p=e.replacer.call(r,h,p)),writeNode(e,n+1,h,!0,!0,!0)&&((d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?g+="?":g+="? "),g+=e.dump,d&&(g+=generateNextLine(e,n)),writeNode(e,n+1,p,!0,d)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?g+=":":g+=": ",y+=g+=e.dump));e.tag=v,e.dump=y||"{}"}function detectType(e,n,r){var o,s,l,h,p,d;for(l=0,h=(s=r?e.explicitTypes:e.implicitTypes).length;l<h;l+=1)if(((p=s[l]).instanceOf||p.predicate)&&(!p.instanceOf||typeof n=="object"&&n instanceof p.instanceOf)&&(!p.predicate||p.predicate(n))){if(r?p.multi&&p.representName?e.tag=p.representName(n):e.tag=p.tag:e.tag="?",p.represent){if(d=e.styleMap[p.tag]||p.defaultStyle,_toString.call(p.represent)==="[object Function]")o=p.represent(n,d);else{if(!_hasOwnProperty.call(p.represent,d))throw new exception("!<"+p.tag+'> tag resolver accepts not "'+d+'" style');o=p.represent[d](n,d)}e.dump=o}return!0}return!1}function writeNode(e,n,r,o,s,l,h){e.tag=null,e.dump=r,detectType(e,r,!1)||detectType(e,r,!0);var p,d=_toString.call(e.dump),g=o;o&&(o=e.flowLevel<0||e.flowLevel>n);var y,v,_=d==="[object Object]"||d==="[object Array]";if(_&&(v=(y=e.duplicates.indexOf(r))!==-1),(e.tag!==null&&e.tag!=="?"||v||e.indent!==2&&n>0)&&(s=!1),v&&e.usedDuplicates[y])e.dump="*ref_"+y;else{if(_&&v&&!e.usedDuplicates[y]&&(e.usedDuplicates[y]=!0),d==="[object Object]")o&&Object.keys(e.dump).length!==0?(writeBlockMapping(e,n,e.dump,s),v&&(e.dump="&ref_"+y+e.dump)):(writeFlowMapping(e,n,e.dump),v&&(e.dump="&ref_"+y+" "+e.dump));else if(d==="[object Array]")o&&e.dump.length!==0?(e.noArrayIndent&&!h&&n>0?writeBlockSequence(e,n-1,e.dump,s):writeBlockSequence(e,n,e.dump,s),v&&(e.dump="&ref_"+y+e.dump)):(writeFlowSequence(e,n,e.dump),v&&(e.dump="&ref_"+y+" "+e.dump));else{if(d!=="[object String]"){if(d==="[object Undefined]"||e.skipInvalid)return!1;throw new exception("unacceptable kind of an object to dump "+d)}e.tag!=="?"&&writeScalar(e,e.dump,n,l,g)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),p=e.tag[0]==="!"?"!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?"!!"+p.slice(18):"!<"+p+">",e.dump=p+" "+e.dump)}return!0}function getDuplicateReferences(e,n){var r,o,s=[],l=[];for(inspectNode(e,s,l),r=0,o=l.length;r<o;r+=1)n.duplicates.push(s[l[r]]);n.usedDuplicates=new Array(o)}function inspectNode(e,n,r){var o,s,l;if(e!==null&&typeof e=="object")if((s=n.indexOf(e))!==-1)r.indexOf(s)===-1&&r.push(s);else if(n.push(e),Array.isArray(e))for(s=0,l=e.length;s<l;s+=1)inspectNode(e[s],n,r);else for(s=0,l=(o=Object.keys(e)).length;s<l;s+=1)inspectNode(e[o[s]],n,r)}function dump$1(e,n){var r=new State(n=n||{});r.noRefs||getDuplicateReferences(e,r);var o=e;return r.replacer&&(o=r.replacer.call({"":o},"",o)),writeNode(r,0,o,!0,!0)?r.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var Type=type,Schema=schema,FAILSAFE_SCHEMA=failsafe,JSON_SCHEMA=json,CORE_SCHEMA=core,DEFAULT_SCHEMA=_default,load=loader.load,loadAll=loader.loadAll,dump=dumper.dump,YAMLException=exception,types={binary,float,map,null:_null,pairs,set,timestamp,bool,int,merge,omap,seq,str},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type,Schema,FAILSAFE_SCHEMA,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load,loadAll,dump,YAMLException,types,safeLoad,safeLoadAll,safeDump},SceneBundle=function(){return _createClass(function e(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;_classCallCheck(this,e),this.url=n,!r||isRelativeURL(r)&&!isRelativeURL(this.url)?this.path=pathForURL(this.url):this.path=r,this.path_for_parent=r||this.path,this.parent=o,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))},[{key:"load",value:function(){return loadResource(this.url)}},{key:"resourceFor",value:function(e){return{url:this.urlFor(e),path:this.pathFor(e),type:this.typeFor(e)}}},{key:"urlFor",value:function(e){return isGlobal(e)?e:isRelativeURL(e)&&this.container?this.parent.urlFor(this.path_for_parent+e):addBaseURL(e,this.path)}},{key:"pathFor",value:function(e){return pathForURL(e)}},{key:"typeFor",value:function(e){return extensionForURL(e)}},{key:"isContainer",value:function(){return!1}}])}();function createSceneBundle(e,n,r){return new SceneBundle(e,n,r)}function isGlobal(e){return!(!e||e.slice(0,7)!=="global.")}function parseResource(e){var n;try{n=jsYaml.load(e,{json:!0})}catch(r){throw r}return n}function loadResource(e){return new Promise(function(n,r){typeof e=="string"?Utils$1.io(e).then(function(o){try{var s=parseResource(o);n(s)}catch(l){r(l)}},r):(e=Object.assign({},e),n(e))})}function notNull(e){return e!=null}function wrap(e){return"("+e+")"}function maybeQuote(e){return typeof e=="string"?'"'+e+'"':e}function lookUp(e){return e[0]==="$"?"context['"+e.substring(1)+"']":"context.feature.properties['"+e+"']"}function nullValue(e,n){return" true "}function propertyEqual(e,n){return wrap(maybeQuote(n)+" === "+lookUp(e))}function propertyOr(e,n){return wrap(n.map(function(r){return propertyEqual(e,r)}).join(" || "))}function printNested(e,n){return wrap(e.filter(notNull).map(function(r){return wrap(r.join(" && "))}).join(" "+n+" "))}function any(e,n,r){return n&&n.length>0?printNested(n.map(function(o){return parseFilter(o,r)}),"||"):"true"}function all(e,n,r){return n&&n.length>0?printNested(n.map(function(o){return parseFilter(o,r)}),"&&"):"true"}function not(e,n,r){return"!"+wrap(parseFilter(n,r).join(" && "))}function none(e,n,r){return"!"+wrap(any(null,n,r))}function propertyMatchesBoolean(e,n){return wrap(lookUp(e)+(n?" != ":" == ")+"null")}function rangeMatch(e,n,r){var o=[],s=r&&typeof r.rangeTransform=="function"&&r.rangeTransform;if(n.max){var l=s?s(n.max):n.max;o.push(lookUp(e)+" < "+l)}if(n.min){var h=s?h=s(n.min):n.min;o.push(lookUp(e)+" >= "+h)}return wrap(o.join(" && "))}function parseFilter(e,n){var r=[];if(typeof e=="function")return[wrap(e.toString()+"(context)")];if(Array.isArray(e))return[any(null,e,n)];if(e==null)return["true"];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s],h=e[l],p=_typeof(h);if(p==="string"||p==="number")r.push(propertyEqual(l,h));else if(p==="boolean")r.push(propertyMatchesBoolean(l,h));else if(l==="not")r.push(not(l,h,n));else if(l==="any")r.push(any(l,h,n));else if(l==="all")r.push(all(l,h,n));else if(l==="none")r.push(none(l,h,n));else if(Array.isArray(h))r.push(propertyOr(l,h));else if(p==="object"&&h!=null)(h.max||h.min)&&r.push(rangeMatch(l,h,n));else{if(h!=null)throw new Error("Unknown Query syntax: "+h);r.push(nullValue())}}return o.length===0?["true"]:r}function filterToString(e){return wrap(e.join(" && "))}function buildFilter(e,n){return e==null?function(){return!0}:new Function("context","return "+filterToString(parseFilter(e,n))+";")}var reserved=["filter","draw","visible","enabled","data"],layer_cache={};function cacheKey(e){if(e.length>1){for(var n=e[0],r=1;r<e.length;r++)n+="/"+e[r];return n}return e[0]}function mergeTrees(e,n){for(var r,o=0,s=0;s<e.length;s++)e[s].length>o&&(o=e[s].length);if(o===0)return null;for(var l={visible:!0},h=function(d){if(r=[],e.forEach(function(g){g[d]&&g[d][n]&&r.indexOf(g[d][n])===-1&&r.push(g[d][n])}),r.length===0)return 1;r.sort(function(g,y){return(g&&g.layer_name)>(y&&y.layer_name)?1:-1}),mergeObjects.apply(void 0,[l].concat(_toConsumableArray(r))),delete l.layer_name},p=0;p<o;p++)h(p);return l.visible===!1?null:l}var blacklist=["any","all","not","none"],Layer=function(){return _createClass(function e(n){var r=n.layer,o=n.name,s=n.parent,l=n.draw,h=n.visible,p=n.enabled,d=n.filter,g=n.styles;if(_classCallCheck(this,e),this.id=e.id++,this.config_data=r.data,this.parent=s,this.name=o,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=l,this.filter=d,this.styles=g,this.is_built=!1,p=p===void 0?h:p,this.parent&&this.parent.visible===!1?this.enabled=!1:this.enabled=p!==!1,this.draw)for(var y in this.draw)if(this.draw[y]=this.draw[y]==null?{}:this.draw[y],_typeof(this.draw[y])!=="object"){var v="Draw group '".concat(y,"' for layer ").concat(this.full_name," is invalid, must be an object, ");log("warn",v+="but was set to `".concat(y,": ").concat(this.draw[y],"` instead")),delete this.draw[y]}else this.draw[y].layer_name=this.full_name},[{key:"build",value:function(){log("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Utils$1.stringsToFunctions(this.draw,StyleParser.wrapFunction),this.calculatedDraw=calculateDraw(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Utils$1.stringsToFunctions(this.filter,StyleParser.wrapFunction);var e=_typeof(this.filter);if(this.filter==null||e==="object"||e==="function")try{this.buildZooms(),this.buildPropMatches(),this.filter!=null&&(typeof this.filter=="function"||Object.keys(this.filter).length>0)?this.filter=buildFilter(this.filter,FilterOptions):this.filter=null}catch(o){var n="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");log("warn",n+="failed with error '".concat(o.message,"', stack trace: ").concat(o.stack))}else{var r="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");log("warn",r+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var e=this.filter&&this.filter.$zoom,n=_typeof(e);if(e!=null&&n!=="function"){if(this.zooms={},n==="number")this.zooms[e]=!0;else if(Array.isArray(e))for(var r=0;r<e.length;r++)this.zooms[e[r]]=!0;else if(n==="object"&&(e.min!=null||e.max!=null))for(var o=e.min||0,s=e.max||25,l=o;l<s;l++)this.zooms[l]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var e=this;this.filter&&!Array.isArray(this.filter)&&typeof this.filter!="function"&&Object.keys(this.filter).forEach(function(n){if(blacklist.indexOf(n)===-1){var r=e.filter[n],o=_typeof(r),s=Array.isArray(r);if(!s&&o!=="string"&&o!=="number")return;n[0]==="$"?(e.context_prop_matches=e.context_prop_matches||[],e.context_prop_matches.push([n.substring(1),s?r:[r]])):(e.feature_prop_matches=e.feature_prop_matches||[],e.feature_prop_matches.push([n,s?r:[r]])),delete e.filter[n]}})}},{key:"doPropMatches",value:function(e){if(this.feature_prop_matches)for(var n=0;n<this.feature_prop_matches.length;n++){var r=this.feature_prop_matches[n],o=e.feature.properties[r[0]];if(o==null||r[1].indexOf(o)===-1)return!1}if(this.context_prop_matches)for(var s=0;s<this.context_prop_matches.length;s++){var l=this.context_prop_matches[s],h=e[l[0]];if(h==null||l[1].indexOf(h)===-1)return!1}return!0}},{key:"doesMatch",value:function(e){if(!this.enabled||(this.is_built||this.build(),this.zooms!=null&&!this.zooms[e.zoom])||!this.doPropMatches(e))return!1;var n;if(this.filter instanceof Function)try{n=this.filter(e)}catch(o){var r="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");log("error",r+="failed with error '".concat(o.message,"', stack trace: ").concat(o.stack),e.feature)}else n=this.filter==null;return!!n&&(this.children_to_parse&&(parseLayerChildren(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}])}();Layer.id=0;var LayerLeaf=function(e){function n(r){var o;return _classCallCheck(this,n),(o=_callSuper(this,n,[r])).is_leaf=!0,o}return _inherits(n,e),_createClass(n)}(Layer),LayerTree=function(e){function n(r){var o;return _classCallCheck(this,n),(o=_callSuper(this,n,[r])).is_tree=!0,o.layers=r.layers||[],o}return _inherits(n,e),_createClass(n,[{key:"addLayer",value:function(r){this.layers.push(r)}},{key:"buildDrawGroups",value:function(r){var o=[],s=[];if(matchFeature(r,[this],o,s),o.length>0){var l=cacheKey(s);if(layer_cache[l]===void 0){for(var h=o.map(function(I){return I&&I.visible!==!1&&I.calculatedDraw}),p={},d=0;d<h.length;d++){var g=h[d];if(g)for(var y=0;y<g.length;y++){var v=g[y];for(var _ in v)p[_]=!0}}for(var w in p)layer_cache[l]=layer_cache[l]||{},layer_cache[l][w]=mergeTrees(h,w),layer_cache[l][w]?(layer_cache[l][w].key=l+"/"+w,layer_cache[l][w].layers=o.map(function(I){return I&&I.full_name}),layer_cache[l][w].group=w):delete layer_cache[l][w];layer_cache[l]&&Object.keys(layer_cache[l]).length===0&&(layer_cache[l]=null)}return layer_cache[l]}}}])}(Layer),FilterOptions={rangeTransform:function(e){return typeof e=="string"&&e.trim().slice(-3)==="px2"?"".concat(parseFloat(e)," * context.meters_per_pixel_sq"):e}},SceneLoader;function isReserved(e){return reserved.indexOf(e)>-1}function isEmpty(e){return Object.keys(e).length===0}function groupProps(e){var n={},r={};for(var o in e)isReserved(o)?n[o]=e[o]:r[o]=e[o];return[n,r]}function calculateDraw(e){var n=[];if(e.parent){var r=e.parent.calculatedDraw||[];n.push.apply(n,_toConsumableArray(r))}return n.push(e.draw),n}function parseLayerNode(e,n,r,o){var s={name:e,layer:n=n??{},parent:r,styles:o},l=_slicedToArray(groupProps(n),2),h=l[0],p=l[1],d=isEmpty(p),g=new(d&&r!=null?LayerLeaf:LayerTree)(Object.assign(s,h));return g.enabled&&(r&&r.addLayer(g),g.children_to_parse=d?null:p),g}function parseLayerChildren(e,n,r){for(var o in n){var s=n[o];if(_typeof(s)!=="object"||Array.isArray(s)){var l="Layer value must be an object: cannot create layer '".concat(o,": ").concat(JSON.stringify(s),"'");l+=", under parent layer '".concat(e.full_name,"'."),r[e.name]&&(l+=" The parent name '".concat(e.name,"' is also the name of a style, did you mean to create a 'draw' group"),e.parent&&(l+=" under '".concat(e.parent.name,"'")),l+=" instead?"),log("warn",l)}else parseLayerNode(o,s,e,r)}}function parseLayers(e,n){layer_cache={};var r={};for(var o in e){var s=e[o];s&&(r[o]=parseLayerNode(o,s,null,n))}return r}function matchFeature(e,n,r,o){var s=!1;if(n.length!==0){for(var l=0;l<n.length;l++){var h=n[l];h.is_leaf?h.doesMatch(e)&&(s=!0,r.push(h),o.push(h.id)):h.is_tree&&h.doesMatch(e)&&(s=!0,matchFeature(e,h.layers,r,o)||(r.push(h),o.push(h.id)))}return s}}var GLOBAL_PROP_RGX=/^global\.(.+)$/,SceneLoader$1=SceneLoader={loadScene:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.path,s=r.type,l=[];return this.loadSceneRecursive({url:e,path:o,type:s},null,l).then(function(h){return n.finalize(h)}).then(function(h){var p=h.config,d=h.bundle;return p?(l.length>0&&l.forEach(function(g){var y="Failed to import scene: ".concat(g.url);log("error",y,g),n.trigger("error",{type:"scene_import",message:y,error:g,url:g.url})}),{config:p,bundle:d}):Promise.reject(l[0])})},loadSceneRecursive:function(e,n){var r=this,o=e.url,s=e.path;e.type;var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!o)return Promise.resolve({});var h=createSceneBundle(o,s,n);return h.load().then(function(p){if(p.import==null)return r.normalize(p,h),{config:p,bundle:h};Array.isArray(p.import)||(p.import=[p.import]);var d=[];return p.import.forEach(function(g){_typeof(g)==="object"&&(g=createObjectURL(new Blob([JSON.stringify(g)]))),d.push(h.resourceFor(g))}),delete p.import,Promise.all(d.map(function(g){return r.loadSceneRecursive(g,h,l)})).then(function(g){g.forEach(function(v){return r.normalize(v.config,v.bundle)});var y=g.map(function(v){return v.config});return p=mergeObjects.apply(void 0,_toConsumableArray(y).concat([p])),r.normalize(p,h),{config:p,bundle:h}})}).catch(function(p){return p.url=o,l.push(p),{}})},normalize:function(e,n){return this.normalizeDataSources(e,n),this.normalizeFonts(e,n),this.normalizeTextures(e,n),this.hoistTextures(e,n),{config:e,bundle:n}},normalizeDataSources:function(e,n){for(var r in e.sources=e.sources||{},e.sources)this.normalizeDataSource(e.sources[r],n);return e},normalizeDataSource:function(e,n){if(e.url&&(e.url=n.urlFor(e.url)),e.scripts)for(var r in Array.isArray(e.scripts)&&(e.scripts=e.scripts.reduce(function(o,s){return o[s]=s,o},{})),e.scripts)e.scripts[r]=n.urlFor(e.scripts[r]);return e},normalizeFonts:function(e,n){for(var r in e.fonts=e.fonts||{},e.fonts)if(Array.isArray(e.fonts[r]))e.fonts[r].forEach(function(s){s.url=s.url&&n.urlFor(s.url)});else{var o=e.fonts[r];o.url=o.url&&n.urlFor(o.url)}return e},normalizeTextures:function(e,n){if(e.textures=e.textures||{},e.textures)for(var r in e.textures){var o=e.textures[r];o.url&&(o.url=n.urlFor(o.url))}},hoistTextures:function(e,n){var r=this;if(e.styles){var o=function(){var _=e.styles[s],w=_.texture;typeof w!="string"||e.textures[w]||(_.texture=r.hoistTexture(w,e,n)),_.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(I){var G=_.material[I]!=null&&_.material[I].texture;typeof G!="string"||e.textures[G]||(_.material[I].texture=r.hoistTexture(G,e,n))})};for(var s in e.styles)o()}if(this.hoistStyleShaderUniformTextures(e,n,{include_globals:!1}),e.layers)for(var l=[e.layers];l.length>0;){var h=l.pop();if(_typeof(h)==="object"&&!Array.isArray(h))for(var p in h)if(p==="draw"){var d=h[p];for(var g in d){if(d[g].texture){var y=d[g].texture;typeof y!="string"||e.textures[y]||(d[g].texture=this.hoistTexture(y,e,n))}if(d[g].outline&&d[g].outline.texture){var v=d[g].outline.texture;typeof v!="string"||e.textures[v]||(d[g].outline.texture=this.hoistTexture(v,e,n))}}}else{if(isReserved(p))continue;l.push(h[p])}}},hoistStyleShaderUniformTextures:function(e,n,r){var o=this,s=r.include_globals;if(e.styles)for(var l in e.styles){var h=e.styles[l];h.shaders&&h.shaders.uniforms&&GLSL.parseUniforms(h.shaders.uniforms).forEach(function(p){var d=p.type,g=p.value,y=p.key,v=p.uniforms;d!=="sampler2D"||typeof g!="string"||e.textures[g]||!s&&isGlobal(g)||(v[y]=o.hoistTexture(g,e,n))})}},hoistTexture:function(e,n,r){var o=isGlobal(e),s=o?e:r.urlFor(e),l=o?"texture-".concat(s):s;return n.textures[l]={url:s},l},applyGlobalProperties:function(e){if(!e.global||Object.keys(e.global).length===0)return e;var n=flattenProperties(e.global);function r(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(l.indexOf(o)>-1)log({level:"warn",once:!0},"Global properties: cyclical reference detected",l);else{l.push(o);var h=GLOBAL_PROP_RGX.exec(o);if(h){var p=h[1];if(p){var d=s[p];if(d!==void 0)return typeof d=="string"&&GLOBAL_PROP_RGX.exec(d)?r(d,s,l):d;log({level:"warn",once:!0},"Global property not found: "+o)}else log({level:"warn",once:!0},"Invalid global property reference: "+o)}}}return function o(s,l,h){if(typeof s=="string"){var p=r(s,n);p!==void 0&&(s=p)}else if(Array.isArray(s))for(var d=0;d<s.length;d++)s[d]=o(s[d]);else if(_typeof(s)==="object")for(var g in s)s[g]=o(s[g]);return s}(e)},finalize:function(e){var n=e.config,r=e.bundle;return n?(n.global=n.global||{},n.scene=n.scene||{},n.cameras=n.cameras||{},n.lights=n.lights||{},n.styles=n.styles||{},n.layers=n.layers||{},n.camera&&(n.cameras.default=n.camera),Object.keys(n.cameras).length===0&&(n.cameras.default={}),(Object.keys(n.lights).length===0||Object.keys(n.lights).every(function(o){return n.lights[o].visible===!1}))&&(n.lights.default_light={type:"directional"}),{config:n,bundle:r}):{}}};function flattenProperties(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};for(var s in r=r?r+n:"",e){var l=r+s,h=e[s];o[l]=h,_typeof(h)!=="object"||Array.isArray(h)||flattenProperties(h,n,l,o)}return o}subscribeMixin(SceneLoader);var TilePyramid=function(){return _createClass(function e(){_classCallCheck(this,e),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10},[{key:"sourceTiles",value:function(e,n){return this.coords[e.key]&&this.coords[e.key].sources&&this.coords[e.key].sources[n.name]}},{key:"addTile",value:function(e){var n=e.coords.key,r=this.coords[n];r||(r=this.coords[n]={descendants:0}),r.sources||(r.sources={}),r.sources[e.source.name]||(r.sources[e.source.name]={}),r.sources[e.source.name][e.style_zoom]=e;for(var o=e.coords.z-1;o>=0;o--){var s=Tile.coordinateAtZoom(e.coords,o);this.coords[s.key]||(this.coords[s.key]={descendants:0}),this.coords[s.key].descendants++}}},{key:"removeTile",value:function(e){var n=this.sourceTiles(e.coords,e.source),r=e.coords.key;n&&(delete n[e.style_zoom],Object.keys(n).length===0&&(delete this.coords[r].sources[e.source.name],Object.keys(this.coords[r].sources).length===0&&(delete this.coords[r].sources,this.coords[r].descendants===0&&delete this.coords[r])));for(var o=e.coords.z-1;o>=0;o--){var s=Tile.coordinateAtZoom(e.coords,o);this.coords[s.key]&&this.coords[s.key].descendants>0&&(this.coords[s.key].descendants--,this.coords[s.key].descendants!==0||this.coords[s.key].sources||delete this.coords[s.key])}}},{key:"getAncestor",value:function(e){var n=e.coords,r=e.style_zoom,o=e.source,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(!(s>this.max_proxy_ancestor_depth)){if(r>o.max_coord_zoom){var l=this.sourceTiles(n,o);if(l){for(var h=r-1;h>=o.max_coord_zoom;h--)if(l[h]&&l[h].loaded)return l[h]}r=o.max_coord_zoom}r--;var p=Tile.coordinateAtZoom(n,n.z-1),d=this.sourceTiles(p,o);return d&&d[r]&&d[r].loaded?d[r]:p.z>0?this.getAncestor({coords:p,style_zoom:r,source:o},s+1):void 0}}},{key:"getDescendants",value:function(e){var n=e.coords,r=e.style_zoom,o=e.source,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,l=[];if(r>=o.max_coord_zoom){var h=this.sourceTiles(n,o);if(h){for(var p=Math.max(Geo$1.default_view_max_zoom,r+this.max_proxy_descendant_depth),d=r+1;d<=p;d++)if(h[d]&&h[d].loaded)return l.push(h[d]),l}return l}if(this.coords[n.key]&&this.coords[n.key].descendants>0){r++;for(var g=Tile.childrenForCoordinate(n),y=0;y<g.length;y++){var v=g[y],_=this.sourceTiles(v,o);_&&_[r]&&_[r].loaded?l.push(_[r]):s<=this.max_proxy_descendant_depth&&v.z<=o.max_coord_zoom&&l.push.apply(l,_toConsumableArray(this.getDescendants({coords:v,source:o,style_zoom:r},s+1)))}}return l}}])}(),LabelMainPass=function(){return _createClass(function e(n,r,o,s){_classCallCheck(this,e),Object.assign(this,n),this.placed=null,this._tile=s;var l=Geo$1.unitsPerMeter(s.coords.z)*Math.pow(2,o-s.style_zoom);this.layout=Object.assign({},n.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=l,this.position=Geo$1.tileSpaceToMeters(this.position,s.coords.z,s.min),this._worldToScreen=r,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0},[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){if(!this._screenSpaceBoundingBox){var e=this._worldToScreen(this.position,!0);e[0]+=this.offset[0],e[1]+=this.offset[1];var n=this.size[0]/2+this.layout.buffer[0],r=this.size[1]/2+this.layout.buffer[1],o=e[0]-n,s=e[0]+n,l=e[1]-r,h=e[1]+r;this._screenSpaceBoundingBox={left:o,bottom:h,right:s,top:l}}return this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles=this.type==="point"?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var e=this._tile.coords.z,n=this._tile.min,r=Geo$1.tileSpaceToMeters([this.sides[0],this.sides[1]],e,n),o=Geo$1.tileSpaceToMeters([this.sides[2],this.sides[3]],e,n),s=_slicedToArray(this._worldToScreen(r,!0),2),l=s[0],h=s[1],p=_slicedToArray(this._worldToScreen(o,!0),2);return encircleLine(l,h,p[0],p[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var e=[],n=this.circles,r=this._tile.coords.z,o=this._tile.min,s=0;s<n.length-2;s+=3){var l=Geo$1.tileSpaceToMeters([n[s],-n[s+1]],r,o),h=n[s+2]/Geo$1.unitsPerMeter(r),p=[l[0]+h,l[1]],d=this._worldToScreen(l,!0),g=this._worldToScreen(p,!0),y=MathUtils$1.getLineLength(d[0],d[1],g[0],g[1]);e.push(d[0],d[1],y)}return e}}])}(),labelsMainPass={mainThreadLabelCollisionPass},visible={},prev_visible={},IS_LITTLE_ENDIAN=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120;function _createContainer(e,n,r,o,s){var l=e.container,h=l.label,p=l.linked,d=e.ranges;return{label:new LabelMainPass(h,r,o,s),linked:p,ranges:d,mesh:n}}function mainThreadLabelCollisionPass(e,n,r,o,s,l){prev_visible=visible,visible={};var h={},p={},d=[],g=r.worldToScreen.bind(r),y=new TextMeshHelper(l);for(var v in e.forEach(function(_t){for(var _r in _t.meshes)_t.meshes[_r].forEach(function(_o){if(_o.labels){for(var Ca in y.trackMesh(_o),_o.labels["non-collision"]){var _a=_createContainer(_o.labels["non-collision"][Ca],_o,g,n,_t);_a.label.text_data&&y.insertLabel(_a,_t)}for(var _l in _o.labels.collision)if(!h[_l]){var Qa=_createContainer(_o.labels.collision[_l],_o,g,n,_t);h[_l]=Qa.label,p[_l]=Qa}}})}),p){var _=p[v];_.linked&&(_.linked=p[_.linked]),d.push(_)}var w=r.getViewport(),I=w.width,G=w.height;return Collision.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new GridIndex(I,G,30)}),Collision.addStyle("main","main"),Collision.collide(d,"main","main").then(function(_t){return _t.forEach(function(_r){var _o=_r.mesh,Ca=_r.label.getTile();if(_o.valid){var _a=0;_r.show!==!0||o&&_r.label.breach&&!prev_visible[_r.label.id]||(_a=1),_a&&(visible[_r.label.id]=!0),_r.label.text_data&&y.insertLabel(_r,Ca);var _l=_o.vertex_layout.offset.a_shape,Qa=_o.vertex_layout.stride,Kc=_o.vertex_layout.attribs.find(function(_m){return _m.name==="a_shape"}),jc=Kc.byte_size/Kc.size;_l+=3*jc;var _h=!0;_r.ranges.forEach(function(_m){if(_h){for(var ry=0;ry<_m[1];ry++){if(_o.vertex_data[_m[0]+ry*Qa+_l]===_a)return void(_h=!1);_o.vertex_data[_m[0]+ry*Qa+_l]=_a}y.trackMesh(_o)}})}}),y.createTextures(s).then(function(){return y.updateMeshes()})}).then(function(_t){_t.forEach(function(_r){return _r.valid&&_r.upload()}),e.forEach(function(_r){_r.labeled=!0}),d=[],p={},h={}})}var TextMeshHelper=function(){return _createClass(function e(n){_classCallCheck(this,e),this.textureManager=getTextureManager(n),this.tiles={},this.meshes=[],this.containers=[]},[{key:"insertLabel",value:function(e,n){var r=e.label.text_data,o=r.text_settings_key,s=r.text,l=r.text_info;this.containers.push(e);var h=this._ensureTextSection(n,o);h[s]?e.label.text_data.text_info=h[s]:h[s]=l}},{key:"trackMesh",value:function(e){this.meshes.indexOf(e)===-1&&this.meshes.push(e)}},{key:"updateMeshes",value:function(){var e=this;return this.containers.forEach(function(n){if(n.label.text_data){var r=n.label.getTile(),o=n.mesh;if(o.valid){var s=n.label.type,l=n.label.text_data.text_info;if(e.tiles[r.id]&&e.tiles[r.id].textures){var h=e.tiles[r.id].textures[0];if(o.uniforms.u_texture=h,o.textures.indexOf(h)===-1&&o.textures.push(h),s==="point"||s==="straight"){var p=s==="point"?l.align[n.label.align].texcoords:l.texcoords[s].texcoord;e.setTexCoords(o,n,p)}else if(s==="curved"){var d=l.segments.length,g=l.texcoords_stroke,y=l.texcoords.curved;e.setTexCoords(o,n,function(_){return _<d?g[_]:y[_-d].texcoord})}}}else if(e.tiles[r.id]&&e.tiles[r.id].textures){var v=e.tiles[r.id].textures[0];e.textureManager.release(v)}}}),this.meshes}},{key:"setTexCoords",value:function(e,n,r){var o,s=r instanceof Function;if(!s){var l=_slicedToArray(r,4),h=l[0],p=l[1],d=l[2],g=l[3];o=[[h,p],[d,p],[d,g],[h,g]]}var y=e.vertex_layout.stride,v=new DataView(e.vertex_data.buffer),_=e.vertex_layout.offset.a_texcoord;n.ranges.forEach(function(w,I){var G=_slicedToArray(w,3),_t=G[0],_r=G[1],_o=G[2];if(s){var Ca=_slicedToArray(r(I),4),_a=Ca[0],_l=Ca[1],Qa=Ca[2],Kc=Ca[3];o=[[_a,_l],[Qa,_l],[Qa,Kc],[_a,Kc]]}for(var jc=_o?_r/2:0;jc<_r;jc++){var _h=o[jc%4],_m=_t+jc*y;v.setUint16(_m+_,_h[0]*texcoord_normalize,IS_LITTLE_ENDIAN),v.setUint16(_m+_+2,_h[1]*texcoord_normalize,IS_LITTLE_ENDIAN)}})}},{key:"createTextures",value:function(e){var n=this;return Promise.all(Object.values(this.tiles).map(function(r){var o=r.id,s=r.key,l=r.texts;return n._createTexturesForTile(e,l,"labels-".concat(s,"-").concat(o),o,n.textureManager).then(function(h){h.length&&(h.forEach(function(p){n.textureManager.retain(p),n.textureManager.getRetainCount(p)>1&&n.textureManager.release(p)}),n.tiles[o].textures=h)})}))}},{key:"_createTexturesForTile",value:function(e,n,r,o,s){var l=new CanvasText,h=l.setTextureTextPositions(n);return l.rasterize(n,h,o,r,e,s)}},{key:"_ensureTile",value:function(e){var n=e.id,r=e.key;return this.tiles[n]||(this.tiles[n]={id:n,key:r,texts:{}}),this.tiles[n]}},{key:"_ensureTextSection",value:function(e,n){var r=this._ensureTile(e).texts;return r[n]||(r[n]={}),r[n]}}])}(),TILE_VISIBILITY_COUNTER_THRESHOLD=30,TileManager=function(){return _createClass(function e(n){var r=this,o=n.scene,s=n.view;_classCallCheck(this,e),this._scene=o,this._view=s,this._visible_tiles={},this._pyramid=new TilePyramid,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=debounce(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),WorkerBroker.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(getMaxTileCacheSize(),function(l,h,p){r._visible_tiles[l]&&r._visible_tiles[l]===h||h.destroy()})},[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile(function(e){return e.destroy()}),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(e){this._visible_tiles[e.key]=e,this._pyramid.addTile(e)}},{key:"hasTile",value:function(e){return this._visible_tiles[e]!==void 0}},{key:"_forgetTile",value:function(e){if(this.hasTile(e)){var n=this._visible_tiles[e];if(this._pyramid.removeTile(n),delete this._visible_tiles[e],n.loaded)this._tile_cache.add(n.key,n,getTileByteLength(n));else{var r=this._tile_cache.get(n.key);r?this._tile_cache.drop(r.key):n.destroy()}this._tileBuildStop(n)}}},{key:"removeTile",value:function(e){this._forgetTile(e),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(e){for(var n in this._visible_tiles)e(this._visible_tiles[n])}},{key:"removeTiles",value:function(e){for(var n in this._visible_tiles)e(this._visible_tiles[n])&&this.removeTile(n)}},{key:"removeCachedTiles",value:function(e){var n=this;this._tile_cache.forEach(function(r,o){e(o)&&n._tile_cache.drop(r)})}},{key:"updateTilesForView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._visible_coords={};for(var n=this._view.findVisibleTileCoordinates(),r=0;r<n.length;r++){var o=n[r];this._visible_coords[o.key]=o}this.updateTileStates(e)}},{key:"updateTileStates",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];for(var n in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(n,e);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(e){if(e.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[e.coords.key])return!1;for(var n in this._visible_coords)if(Tile.isDescendant(e.coords,this._visible_coords[n]))return!1}return!e.isProxy()}},{key:"_updateLabels",value:function(){var e=this;if(!this._building_tiles||Object.keys(this._building_tiles).length===0){CanvasText.pruneTextCache();var n=this._renderable_tiles.sort(compareTileCoords);labelsMainPass.mainThreadLabelCollisionPass(n,roundPrecision(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then(function(){e._is_labeled=!Task.hasPendingTasks(),e._scene&&e._scene.immediateRedraw(),e._update_labels_on_queue_check=!1})}}},{key:"_updateProxyTiles",value:function(){var e=this,n=this._view.lookAtManipulator.getZoomDirection();if(n!==0){var r=!1;this.forEachVisibleTile(function(o){if(o.setProxyFor(null),n===1){if(!o.built){var s=e._pyramid.getAncestor(o);s&&(s.setProxyFor(o),r=!0)}}else if(n===-1&&!o.built)for(var l=e._pyramid.getDescendants(o),h=0;h<l.length;h++)l[h].setProxyFor(o),r=!0}),r||this._view.lookAtManipulator.resetZoomDirection()}}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var e in this._renderable_tiles=[],this._visible_tiles){var n=this._visible_tiles[e],r=this._tile_cache.get(e);n.loaded?(this._renderable_tiles.push(n),r&&r!==n&&this._tile_cache.drop(e)):r&&(r.generation===this._scene.generation?this._renderable_tiles.push(r):this._tile_cache.drop(e))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(e,n){return n.has_volatile_data?this._scene.getWorkers(WorkerType.FAKE)[0]:n.tiled?this._scene.getWorkers(WorkerType.NATIVE)[Math.abs(e.x+e.y+e.z)%this._scene.num_workers]:this._scene.getWorkers(WorkerType.NATIVE)[n.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var e=this._renderable_tiles,n={},r=0;r<e.length;r++){var o=e[r];Object.keys(o.meshes).forEach(function(s){return n[s]=!0})}return this._active_styles=Object.keys(n),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var e=!1;for(var n in this._visible_tiles)if(!this._visible_tiles[n].built){e=!0;break}return e}},{key:"updateTilesVisibilityCounters",value:function(){var e=this;Object.keys(this._visible_coords).forEach(function(o){o in e._tile_visibility_counters||(e._tile_visibility_counters[o]=0)});var n=Object.keys(this._tile_visibility_counters),r=[];n.forEach(function(o){o in e._visible_coords?(e._tile_visibility_counters[o]++,e._tile_visibility_counters[o]>=TILE_VISIBILITY_COUNTER_THRESHOLD&&r.push(e._visible_coords[o])):(e._tile_visibility_counters[o]--,e._tile_visibility_counters[o]<=0&&delete e._tile_visibility_counters[o])}),r.length&&this.loadCoordinates(r)}},{key:"loadCoordinates",value:function(e){var n=this;e.sort(function(r,o){var s=n._view.lookAtManipulator.getLookAtData().position,l=Geo$1.metersPerTile(r.z)/2,h=Geo$1.metersForTile(r);h.x+=l,h.y-=l;var p=Geo$1.metersForTile(o);p.x+=l,p.y-=l;var d=Math.abs(s[0]-h.x)+Math.abs(s[1]-h.y),g=Math.abs(s[0]-p.x)+Math.abs(s[1]-p.y);return r.center_dist=d,o.center_dist=g,g>d?-1:g===d?0:1}),e.forEach(function(r){return n.loadCoordinate(r)})}},{key:"_keepCoordinate",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=this._visible_coords[e];if(r.z===this._view.center_tile.z)for(var o in this._scene.sources){var s=this._scene.sources[o];if(s.builds_geometry_tiles&&s.includesTile(r,this._view.lookAtManipulator.getLookAtData().tile_level)){var l=Tile.normalizedKey(r,s,this._view.lookAtManipulator.getLookAtData().tile_level);if(l&&!this.hasTile(l)){var h=n&&this._tile_cache.get(l);h||(this._all_visible_tiles_are_cached=!1);var p=h||new Tile({source:s,coords:r,worker:this.getWorkerForTile(r,s),style_zoom:Utils$1.zoomToTileLevel(r.z),view:this._view,sceneId:this._scene.id});s.config.type==="ObjectSource"&&(p.syncedAt=s.getSyncedAt()),this.keepTile(p)}}}}},{key:"loadCoordinate",value:function(e){if(e.z===this._view.center_tile.z)for(var n in this._scene.sources){var r=this._scene.sources[n];if(r.builds_geometry_tiles&&r.includesTile(e,this._view.lookAtManipulator.getLookAtData().tile_level)){var o=Tile.normalizedKey(e,r,this._view.lookAtManipulator.getLookAtData().tile_level);this.hasTile(o)&&this.buildTile(this._visible_tiles[o])}}}},{key:"buildTile",value:function(e,n){this._building_tiles&&this._building_tiles[e.key]||e.built&&e.generation===this._scene.generation||(this._tileBuildStart(e.key),e.build(this._scene.generation,n))}},{key:"buildTileStylesCompleted",value:function(e){var n=e.tile,r=e.progress;if(this._visible_tiles[n.key]==null)Tile.abortBuild(n,this._scene.id);else if(n.generation!==this._scene.generation)Tile.abortBuild(n,this._scene.id);else{if(n.id<this._visible_tiles[n.key].id)return void Tile.abortBuild(n,this._scene.id);n=this._visible_tiles[n.key].merge(n),r.done&&(n.built=!0),n.buildMeshes(this._scene.styles,r),this.updateTileStates(),this._scene.requestRedraw()}r.done&&this._tileBuildStop(n)}},{key:"buildTileError",value:function(e){this._forgetTile(e.key),Tile.abortBuild(e,this._scene.id)}},{key:"_tileBuildStart",value:function(e){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[e]=!0}},{key:"_tileBuildStop",value:function(e){this._building_tiles&&(e.source&&e.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[e.key],Task.removeForTile(e.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&Object.keys(this._building_tiles).length!==0||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Task.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(e,n,r){var o=n.source;return!this._visible_tiles[e]&&(n.generation!==this._scene.generation||o.config.type==="ObjectSource"&&o.getSyncedAt()>n.syncedAt)}}])}();function compareTileCoords(e,n){var r=e.coords,o=n.coords;return r.z-o.z||r.x-o.x||r.y-o.y}function roundPrecision(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,o=Math.pow(10,r);return Math.round(Math.floor(e*n)/n*o)/o}function getTileByteLength(e){var n=0;for(var r in e.meshes)for(var o=e.meshes[r],s=0;s<o.length;s++){var l=o[s];n+=l.buffer_size;for(var h=0;h<l.textures.length;h++)n+=e.textureManager.getByteLength(l.textures[h])}return n}function getMaxTileCacheSize(){var e=.1;return navigator&&navigator.deviceMemory?e=5*navigator.deviceMemory/100:window&&window.screen&&(e=window.screen.width/512*window.screen.height/512*.03*3,e=Math.min(e,1)),1024*e*1024*1024}var RenderState=function(){return _createClass(function e(n,r){_classCallCheck(this,e),r(n),this.value=n,this.setup=r},[{key:"get",value:function(){return this.value}},{key:"set",value:function(e){JSON.stringify(this.value)!==JSON.stringify(e)&&(this.setup(e),this.value=e)}}])}(),RenderStateManager=_createClass(function e(n){_classCallCheck(this,e),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=n.BACK,this.defaults.blending=!1,this.defaults.blending_src=n.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=n.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=n.ONE,this.defaults.blending_dst_alpha=n.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,n.depthFunc(n.LESS),this.culling=new RenderState({cull:this.defaults.culling,face:this.defaults.culling_face},function(r){r.cull?(n.enable(n.CULL_FACE),n.cullFace(r.face)):n.disable(n.CULL_FACE)}),this.blending=new RenderState({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(r){r.blend?(n.enable(n.BLEND),r.src_alpha&&r.dst_alpha?n.blendFuncSeparate(r.src,r.dst,r.src_alpha,r.dst_alpha):n.blendFunc(r.src,r.dst)):n.disable(n.BLEND)}),this.depth_write=new RenderState({depth_write:this.defaults.depth_write},function(r){n.depthMask(r.depth_write)}),this.depth_test=new RenderState({depth_test:this.defaults.depth_test},function(r){r.depth_test?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)})}),MediaCapture=function(){return _createClass(function e(){_classCallCheck(this,e),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null},[{key:"setCanvas",value:function(e,n){this.canvas=e,this.gl=n}},{key:"screenshot",value:function(){var e=this,n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).background;return this.queue_screenshot!=null||(this.queue_screenshot={background:n},this.queue_screenshot.promise=new Promise(function(r,o){e.queue_screenshot.resolve=r,e.queue_screenshot.reject=o})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(this.queue_screenshot!=null){var e=this.canvas.width,n=this.canvas.height,r=new Uint8Array(e*n*4);this.gl.readPixels(0,0,e,n,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r);var o=this.queue_screenshot.background;o=o&&o!=="transparent"?StyleParser.parseColor(o).slice(0,3).map(function(_o){return 255*_o}):null;for(var s=new Uint8ClampedArray(e*n*4),l=0;l<n;l++)for(var h=0;h<e;h++){var p=4*((n-l-1)*e+h),d=4*(l*e+h),g=r[p+3];s[d+0]=255*r[p+0]/g,s[d+1]=255*r[p+1]/g,s[d+2]=255*r[p+2]/g,s[d+3]=g,o&&(g/=255,s[d+0]=s[d+0]*g+o[0]*(1-g),s[d+1]=s[d+1]*g+o[1]*(1-g),s[d+2]=s[d+2]*g+o[2]*(1-g),s[d+3]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var y=this.screenshot_canvas;y.width=e,y.height=n,this.screenshot_context=this.screenshot_context||y.getContext("2d");var v=this.screenshot_context,_=new ImageData(s,e,n);v.putImageData(_,0,0);for(var w=y.toDataURL("image/png"),I=atob(w.slice(22)),G=new Uint8Array(I.length),_t=0;_t<I.length;++_t)G[_t]=I.charCodeAt(_t);var _r=new Blob([G],{type:"image/png"});this.queue_screenshot.resolve({url:w,blob:_r,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var e=this;if(typeof window.MediaRecorder!="function"||!this.canvas||typeof this.canvas.captureStream!="function")return log("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return log("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var n=this.video_capture={};n.chunks=[],n.stream=this.canvas.captureStream(),n.options={mimeType:"video/webm"},n.media_recorder=new MediaRecorder(n.stream,n.options),n.media_recorder.ondataavailable=function(r){if(r.data.size>0&&n.chunks.push(r.data),n.resolve){var o=new Blob(n.chunks,{type:n.options.mimeType}),s=createObjectURL(o);n.stream&&(n.stream.getTracks()||[]).forEach(function(l){l.stop(),n.stream.removeTrack(l)}),n.stream=null,n.media_recorder=null,e.video_capture=null,n.resolve({url:s,blob:o,type:"webm"})}},n.media_recorder.start()}catch(r){return this.video_capture=null,log("error","Scene video capture failed",r),!1}return!0}},{key:"stopVideoCapture",value:function(){var e=this;return this.video_capture?(this.video_capture.promise=new Promise(function(n,r){e.video_capture.resolve=n,e.video_capture.reject=r}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(log("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}])}(),SceneWorker=function(){return _createClass(function e(){_classCallCheck(this,e),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1},[{key:"init",value:function(e,n,r,o,s,l,h){return this.setMeshVariantMaxLife(h),this.scene_id=e,this.textureManager=getTextureManager(e),this._worker_id=n,log.setLevel(r),Utils$1.device_pixel_ratio=o,VertexElements.setElementIndexUint(s),FeatureSelection.setPrefix(this._worker_id),this._style_manager=new StyleManager,this._importExternalScripts(l),Label.id_prefix=n,this._isConfigured=!1,n}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(e){if(e.length!==0){log("debug","loading custom data source scripts in worker:",e);var n=Object.getOwnPropertyNames(window);importScripts.apply(void 0,_toConsumableArray(e)),Object.getOwnPropertyNames(window).forEach(function(r){n.indexOf(r)===-1&&(self[r]=window[r])})}}},{key:"updateConfig",value:function(e,n){var r=e.config,o=e.generation,s=e.introspection;for(var l in r=JSON.parse(r),mergeDebugSettings(n),this._generation=o,this._isConfigured=!1,r.layers)r.layers[l]&&(r.layers[l].data=Utils$1.stringsToFunctions(r.layers[l].data));this.global=Utils$1.stringsToFunctions(r.global),this._createDataSources(r),r.styles=Utils$1.stringsToFunctions(r.styles,StyleParser.wrapFunction),this.styles=this._style_manager.build(r.styles),self.is_fake_worker=Thread.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:s,id:this.scene_id}),delete self.is_fake_worker,this.layers=parseLayers(r.layers,this._style_manager.styles),this._configuring=this._syncTextures(r.textures)}},{key:"setMeshVariantMaxLife",value:function(e){this.meshVariantMaxLife=e}},{key:"_createDataSources",value:function(e){var n=this;this._last_config_sources=this._config_sources||{},this._config_sources=e.sources;var r=this.sources,o=[];for(var s in e.sources=Utils$1.stringsToFunctions(e.sources),this.sources={},self.is_fake_worker=Thread.is_main,e.sources)if(JSON.stringify(this._last_config_sources[s])!==JSON.stringify(e.sources[s])){var l=void 0;try{l=DataSource.create(Object.assign({},e.sources[s],{name:s}),this.sources)}catch(h){log("error","Error creating source.",h.message,e.sources[s]);continue}l&&(this.sources[s]=l,o.push(s))}else this.sources[s]=r[s];delete self.is_fake_worker,o.forEach(function(h){for(var p in n.tiles)n.tiles[p].source===h&&delete n.tiles[p]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(e){var n=this;if(this._isConfigured=!0,e.loaded!==!0)e.loading=!0,e.loaded=!1,e.error=null,this._loadTileSourceData(e).then(function(){if(n.getTile(e.id)){e.loading=!1,e.loaded=!0;try{Tile.buildGeometry(e,n)}catch(r){e.error=r.toString(),WorkerBroker.postMessage("TileManager_".concat(n.scene_id,".buildTileError"),Tile.slice(e))}}else log("trace","stop tile build after data source load because tile was removed. Key: ".concat(e.key,", id: ").concat(e.id))},function(r){e.loading=!1,e.loaded=!1,e.error=r.stack,log("error","tile load error for tile with key ".concat(e.key," and id ").concat(e.id,": ").concat(e.error)),WorkerBroker.postMessage("TileManager_".concat(n.scene_id,".buildTileError"),Tile.slice(e))});else{log("trace","used worker cache for tile with key ".concat(e.key," and id ").concat(e.id));try{Tile.buildGeometry(e,this)}catch(r){e.error=r.toString(),WorkerBroker.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),Tile.slice(e))}}}},{key:"buildTile",value:function(e){var n=e.tile,r=this.getTile(n.id);if(!r||!r.loading)if(n=this.tiles[n.id]=Object.assign(r||{},n),this._isConfigured)this._onConfig(n);else{var o=this;this.awaitConfiguration().then(function(){return o._onConfig(n)})}}},{key:"_loadTileSourceData",value:function(e){return this.sources[e.source]?this.sources[e.source].load(e):(e.source_data={},Promise.resolve(e))}},{key:"getTile",value:function(e){return this.tiles[e]}},{key:"removeTile",value:function(e){var n=this.tiles[e];n!=null&&(n.loading===!0&&(log("trace","cancel tile load for tile id ".concat(e)),n.loading=!1,Tile.cancel(n)),delete this.tiles[e],log("trace","remove tile from cache, tile id: ".concat(e)))}},{key:"queryFeatures",value:function(e){var n=this,r=e.filter,o=e.visible,s=e.geometry,l=e.tile_ids,h=[],p=l.map(function(d){return n.tiles[d]}).filter(function(d){return d});return r!=null&&(r=["{","["].indexOf(r[0])>-1?JSON.parse(r):r,r=Utils$1.stringsToFunctions(r,StyleParser.wrapFunction)),r=buildFilter(r,FilterOptions),p.forEach(function(d){var g=function(v){d.source_data.layers[v].features.forEach(function(_){if(!(o===!0&&_.generation!==n._generation||o===!1&&_.generation===n._generation)){var w=StyleParser.getFeatureParseContext(_,d,n.global);if(w.source=d.source,w.layer=v,r(w)){var I={type:_.type,properties:_.properties};s===!0&&(I.geometry=Geo$1.copyGeometry(_.geometry),Geo$1.tileSpaceToLatlng(I.geometry,d.coords.z,d.min)),h.push(I)}}})};for(var y in d.source_data.layers)g(y)}),h}},{key:"resetFeatureSelection",value:function(){FeatureSelection.reset()}},{key:"_syncTextures",value:function(e){var n=[];return e&&n.push.apply(n,_toConsumableArray(Object.keys(e))),log("trace","sync textures to worker:",n),n.length>0?this.textureManager.syncTexturesToWorker(n):Promise.resolve()}},{key:"profile",value:function(e){console.profile("worker ".concat(this._worker_id,": ").concat(e))}},{key:"profileEnd",value:function(e){console.profileEnd("worker ".concat(this._worker_id,": ").concat(e))}},{key:"terminate",value:function(){this.dispose()}}])}();(Thread.is_worker||self.H&&self.H.DEBUG)&&WorkerBroker.addTarget("self",new SceneWorker);var Scene=function(){function e(n,r){_classCallCheck(this,e),r=r||{},subscribeMixin(this),this.id=e.id++,this.textureManager=getTextureManager(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new View(this,r),this.tile_manager=new TileManager({scene:this,view:this.view}),this.num_workers=r.numWorkers||2,r.disableVertexArrayObjects===!0&&(VertexArrayObject.disabled=!0),Utils$1.device_pixel_ratio=r.devicePixelRatio,this.config=null,this.config_source=n,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new StyleManager,this.building=null,this.dirty=!0,r.preUpdate&&this.subscribe({pre_update:r.preUpdate}),r.postUpdate&&this.subscribe({post_update:r.postUpdate}),this.render_loop=!r.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new MediaCapture,this.selection=null,this.introspection=r.introspection===!0,this.viewport=r.viewport,this.adjustMeshVariantMaxLife(),this.container=r.container,this.canvas=null,this.contextOptions=r.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=e.generation,this.last_complete_generation=e.generation,this.log_level=r.logLevel||"warn",log.setLevel(this.log_level),log.reset()}return _createClass(e,[{key:"load",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initializing||(log.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(o=typeof o=="string"?{base_path:o}:o).blocking=o.blocking===void 0||o.blocking,this.render_loop!==!1?this.setupRenderLoop():document.hidden&&document.addEventListener("visibilitychange",function(){document.hidden||(n.setupRenderLoop(),setTimeout(function(){n.render_loop_stop=!0},1e3))}),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(r,o).then(function(){return n.createWorkers()}).then(function(){n.resetFeatureSelection();var s=_typeof(n.config_source)==="object"||n.hasSubscribersFor("load"),l=n.updateConfig({serialize_funcs:s,normalize:!1,load_event:!0,fade_in:!0});if(o.blocking===!0)return l}).then(function(){n.updating--,n.initializing=null,n.initialized=!0,n.last_valid_config_source=n.config_source,n.last_valid_options={base_path:o.base_path,file_type:o.file_type},n.requestRedraw()}).catch(function(s){var l,h;if(n.initializing=null,n.updating=0,s.name==="YAMLException"?(l="yaml",h="Error parsing scene YAML"):h="Error initializing scene",n.trigger("error",{type:l,message:h,error:s,url:n.config_source}),h="Scene.load() failed to load ".concat(n.config_source,": ").concat(s.message),n.last_valid_config_source)return log("warn",h,s),log("info","Scene.load() reverting to last valid configuration"),n.load(n.last_valid_config_source,n.last_valid_base_path);throw log("error",h,s),s})),this.initializing}},{key:"destroy",value:function(){if(this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl){this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},ShaderProgram.reset();var n=this.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this.gl=null}this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),log.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Context$1.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Utils$1.device_pixel_ratio},this.contextOptions))}catch{throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),VertexArrayObject.init(this.gl),this.render_states=new RenderStateManager(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var n;if(__worker_src__!==void 0){var r="("+__worker_src__+")()";__worker_src_origin__&&__worker_src_map__!==""&&(r+=`
//# sourceMappingURL=`+__worker_src_origin__.slice(0,__worker_src_origin__.lastIndexOf("/")+1)+__worker_src_map__),n=createObjectURL(new Blob([r],{type:"application/javascript"}))}if(!n)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return n}},{key:"updateExternalScripts",value:function(){var n=_toConsumableArray(this.external_scripts||[]),r=[];if(this.config.scene.scripts)for(var o in this.config.scene.scripts)r.indexOf(this.config.scene.scripts[o])===-1&&r.push(this.config.scene.scripts[o]);for(var s in this.config.sources){var l=this.config.sources[s];if(l.scripts)for(var h in l.scripts)r.indexOf(l.scripts[h])===-1&&r.push(l.scripts[h])}return this.external_scripts=r,!(this.external_scripts.length===n.length&&this.external_scripts.every(function(p,d){return p===n[d]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(n){var r=this,o=!!this.gl.getExtension("OES_element_index_uint"),s=[];this._workers=[];for(var l=0,h=function(){var d=new Worker(n);r._workers[l]=d,WorkerBroker.addWorker(d),log("debug","Scene.makeWorkers: initializing worker ".concat(l));var g=l;s.push(WorkerBroker.postMessage(d,"self.init",r.id,l,r.log_level,Utils$1.device_pixel_ratio,o,r.external_scripts,r.meshVariantMaxLife).then(function(y){return log("debug","Scene.makeWorkers: initialized worker ".concat(y)),y},function(y){return log("error","Scene.makeWorkers: failed to initialize worker ".concat(g,":"),y),Promise.reject(y)}))};l<this.num_workers;l++)h();var p=new SceneWorker;return this._workers.push(p),s.push(p.init(this.id,l,this.log_level,Utils$1.device_pixel_ratio,o,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(s).then(function(){log.setWorkers(r._workers.slice(0,r.num_workers)),revokeObjectURL(n)})}},{key:"getWorkers",value:function(n){return this._workers.filter(function(r){switch(n){case WorkerType.NATIVE:return r instanceof Worker;case WorkerType.FAKE:return r instanceof SceneWorker;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(log.setWorkers(null),this._workers.forEach(function(n){n.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||Object.keys(this.sources).length===0)}},{key:"handleViewportUpdate",value:function(){var n=this.viewport,r=n.width,o=n.height;r>0&&o>0&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Context$1.resize(this.gl,r,o,Utils$1.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var n=this.viewport,r=n.width,o=n.height,s=Utils$1.device_pixel_ratio,l=r/s/256*(o/s/256),h=Math.max(Math.ceil(2*l),8);if(this.meshVariantMaxLife!==h)return this.meshVariantMaxLife=h,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&WorkerBroker.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Task.setState({user_moving_view:this.view.user_input_active}),Task.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var n=this;this.render_loop_active||setTimeout(function(){n.renderLoop()},0)}},{key:"update",value:function(){var n=this.dirty,r=!!this.selection&&this.selection.hasPendingRequests(),o=!(n===!1&&r===!1||this.initialized===!1||this.updating>0||this.ready()===!1);return this.trigger("pre_update",o),this.view.update(),!!o&&(this.dirty=!1,this.render({main:n,selection:r}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",o),(this.animated===!0||this.view.isAnimating())&&(this.dirty=!0),this.frame++,log("trace","Scene.render()"),!0)}},{key:"render",value:function(n){var r=this,o=n.main,s=n.selection,l=this.gl;if(Object.keys(this.lights).forEach(function(h){return r.lights[h].update()}),o&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),s){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),l.bindFramebuffer(l.FRAMEBUFFER,null),l.viewport(0,0,this.canvas.width,this.canvas.height),l.clearColor.apply(l,_toConsumableArray(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:s})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"program",o=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).allow_blend,s=this.gl;o=o==null||o,this.clearFrame();for(var l,h,p=Style.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(G){return n.styles[G]}).filter(function(G){return G})),d=0,g=0,y=0;y<p.length;y++){var v=p[y],_=g-(h=parseInt(v.name));if((v.clean_depth||_)&&(this.render_states.depth_write.value.depth_write?s.clear(s.DEPTH_BUFFER_BIT):(s.depthMask(!0),s.clear(s.DEPTH_BUFFER_BIT),s.depthMask(!1)),_&&(g=h)),v.blend!==l){var w=Object.assign({},Style.render_states[v.blend],{blend:o&&v.blend});this.setRenderState(w)}var I=v.blend==="translucent"&&r==="program";I&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(v.name,r),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),d+=this.renderStyle(v.name,r),I&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),l=v.blend}return d}},{key:"renderStyle",value:function(n,r){for(var o,s,l=this,h=this.styles[n],p=!0,d=0,g=this.tile_manager.getRenderableTiles(),y=Math.max.apply(Math,_toConsumableArray(g.map(function(w){return w.meshes[n]?Math.max.apply(Math,_toConsumableArray(w.meshes[n].map(function(I){return I.variant.order}))):-1}))),v=function(w){for(var I=0;I<g.length;I++){var G=g[I];if(G.meshes[n]!=null&&G.shouldProxyForStyle(n))for(var _t=G.meshes[n].filter(function(_a){return _a.variant.order===w}),_r=0,_o=_t.length;_r<_o;_r+=1){var Ca=_t[_r];if(p===!0&&(p=!1,!(o=l.setupStyle(h,r))))return{v:0};l.view.setupTile(G,o),l.selection.setupDiscards(o),h.render(Ca)&&l.requestRedraw(),d+=Ca.geometry_count}}},_=0;_<y+1;_++)if(s=v(_))return s.v;return d}},{key:"setupStyle",value:function(n,r){var o;try{if(!(o=n.getProgram(r)))return}catch{return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(n.name),style:n,shader_errors:n.program&&n.program.shader_errors})}for(var s in o.use(),n.setup(),this.view.setupProgram(o),this.lights)this.lights[s].setupProgram(o);return o}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.depth_test,o=n.depth_write,s=n.cull_face,l=n.blend;if(this.initialized){var h=this.render_states;r=r!==!1&&h.defaults.depth_test,o=o!==!1&&h.defaults.depth_write,s=s!==!1&&h.defaults.culling,l=l??h.defaults.blending;var p=this.gl;h.depth_test.set({depth_test:r}),h.depth_write.set({depth_write:o}),h.culling.set({cull:s,face:h.defaults.culling_face}),l?l==="opaque"?h.blending.set({blend:!1}):l==="overlay"||l==="inlay"||l==="translucent"?h.blending.set({blend:!0,src:p.SRC_ALPHA,dst:p.ONE_MINUS_SRC_ALPHA,src_alpha:p.ONE,dst_alpha:p.ONE_MINUS_SRC_ALPHA}):l==="add"?h.blending.set({blend:!0,src:p.ONE,dst:p.ONE}):l==="multiply"&&h.blending.set({blend:!0,src:p.ZERO,dst:p.SRC_COLOR}):h.blending.set({blend:!1})}}},{key:"getFeatureAt",value:function(n,r,o){var s=r.radius,l=r.top_most_only;if(this.initialized){var h={x:n.x/this.view.size.css.width,y:n.y/this.view.size.css.height};s=s>0?{x:s/this.view.size.css.width,y:s/this.view.size.css.height}:null,this.selection.getFeatureAt(h,{radius:s,top_most_only:l},o)}else log("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.filter,o=n.unique,s=o===void 0||o,l=n.group_by,h=l===void 0?null:l,p=n.visible,d=p===void 0?null:p,g=n.geometry,y=g!==void 0&&g;r=Utils$1.serializeWithFunctions(r);var v=this.tile_manager.getRenderableTiles().map(function(_){return _.id});return WorkerBroker.postMessage(this._workers,"self.queryFeatures",{filter:r,visible:d,geometry:y,tile_ids:v}).then(function(_){var w=[],I={},G={},_t=(s=typeof s=="string"?[s]:s)&&function(_o){return JSON.stringify(Array.isArray(s)?sliceObject(_o,s):_o)},_r=(h=(typeof h=="string"||Array.isArray(h))&&h)&&function(_o){return Array.isArray(h)?JSON.stringify(sliceObject(_o,h)):_o[h]};return _.forEach(function(_o){return _o.forEach(function(Ca){if(_t){var _a=_t(Ca);if(I[_a])return;I[_a]=!0}if(_r){var _l=_r(Ca.properties);G[_l]=G[_l]||[],G[_l].push(Ca)}else w.push(Ca)})}),_r?G:w})}},{key:"loadScene",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.base_path,l=o.file_type;return this.config_source=r||this.config_source,typeof this.config_source=="string"?this.base_path=pathForURL(s||this.config_source):this.base_path=pathForURL(s),this.config_path=this.base_path,SceneLoader$1.loadScene(this.config_source,{path:this.base_path,type:l}).then(function(h){var p=h.config,d=h.bundle;return n.config=p,n.config_bundle=d,n.config})}},{key:"createDataSources",value:function(){var n=this,r=[],o=Object.keys(this.sources),s=0;for(var l in this.config.sources){var h=this.config.sources[l],p=this.sources[l];try{var d=Object.assign({},h,{name:l,id:s++});if(this.sources[l]=DataSource.create(d,this.sources),!this.sources[l])throw{}}catch(_){delete this.sources[l];var g="Could not create data source: ".concat(_.message);log("warn","Scene: ".concat(g),h),this.trigger("warning",{type:"sources",source:h,message:g})}DataSource.sameConfig(this.sources[l],p)||r.push(l)}for(var y in o.forEach(function(_){n.config.sources[_]||(delete n.sources[_],r.push(_))}),r.length>0&&this.tile_manager.removeTiles(function(_){return r.indexOf(_.source.name)>-1}),this.config.layers){var v=this.config.layers[y];v.enabled!==!1&&v.data&&this.sources[v.data.source]&&(this.sources[v.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var n=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return n.textureManager.createDefault(n.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var n in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[n].setGL(this.gl);this.dirty=!0}},{key:"animated",get:function(){var n=this;return this.config.scene.animated!==void 0?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(r){return n.styles[r]&&n.styles[r].animated})}},{key:"createLights",value:function(){for(var n in this.lights={},this.config.lights)if(this.config.lights[n]&&_typeof(this.config.lights[n])==="object"){var r=this.config.lights[n];r.name=n.replace("-","_"),r.visible=r.visible!==!1,r.visible&&(this.lights[r.name]=Light.create(this.view,r))}Light.inject(this.lights)}},{key:"setBackground",value:function(){var n,r=this.config.scene.background;this.background={},r&&r.color&&(this.background.color=StyleParser.parseColor(r.color)),this.background.color||(this.background.color=[0,0,0,0]),this.background.color[3]===1?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map(function(o){return Math.floor(255*o)}).join(", "),")"):this.canvas.style.backgroundColor="transparent",(n=this.gl).clearColor.apply(n,_toConsumableArray(this.background.color))}},{key:"setIntrospection",value:function(n){var r=this;return n!==this.introspection?(this.introspection=n||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return r.updating--})):Promise.resolve()}},{key:"updateConfig",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.load_event,o=r!==void 0&&r,s=n.serialize_funcs,l=n.normalize,h=l===void 0||l;n.fade_in,this.generation=++e.generation,this.updating++,this.config=SceneLoader$1.applyGlobalProperties(this.config),h?SceneLoader$1.normalize(this.config,this.config_bundle):(SceneLoader$1.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),SceneLoader$1.normalizeTextures(this.config,this.config_bundle)),this.trigger(o?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),FontManager.loadFonts(this.config.fonts),this.updateStyles();var p=this.syncConfigToWorker({serialize_funcs:s});return this.updating--,this.view.updateBounds(),this.requestRedraw(),p}},{key:"syncConfigToWorker",value:function(){var n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).serialize_funcs,r=n===void 0||n?Utils$1.serializeWithFunctions(this.config):JSON.stringify(this.config);return WorkerBroker.postMessage(this._workers,"self.updateConfig",{config:r,generation:this.generation,introspection:this.introspection},debugSettings$1)}},{key:"createListeners",value:function(){var n=this;this.listeners={},this.listeners.view={move:function(){return n.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return n.dirty=!0},warning:function(r){return n.trigger("warning",Object.assign({type:"textures"},r))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(r){return n.trigger("error",Object.assign({type:"scene"},r))}},SceneLoader$1.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),SceneLoader$1.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&WorkerBroker.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new FeatureSelection(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(){var n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).background,r=n===void 0?"white":n;return this.requestRedraw(),this.media_capture.screenshot({background:r})}},{key:"pixelRatio",value:function(){return Utils$1.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(n){console.profile("main thread: ".concat(n)),WorkerBroker.postMessage(this._workers,"self.profile",n)}},{key:"_profileEnd",value:function(n){console.profileEnd("main thread: ".concat(n)),WorkerBroker.postMessage(this._workers,"self.profileEnd",n)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}}],[{key:"create",value:function(n){return new e(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{})}}])}();Scene.id=0,Scene.generation=0;var RemoteTexture=function(e){function n(r,o,s){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};_classCallCheck(this,n);var h,p=Math.pow(2,l.coords.z),d=Math.abs(Math.floor(l.coords.x/p));h=Math.abs(p*d-Math.abs(l.coords.x));var g=l.coords;return l.coords={x:h,y:g.y,z:g.z},_callSuper(this,n,[r,o,s,l])}return _inherits(n,e),_createClass(n,[{key:"load",value:function(r){var o=this;if(!r||!r.uid)return _get(_getPrototypeOf(n.prototype),"load",this).call(this,r);var s=r.coords,l=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function(h,p){var d=H.map.DataModel.invoke(r.uid,"requestTileAsPromise",[s.x,s.y,s.z])||null;d?d.then(function(g){var y=g.data;o.loaded=!0,!y||y instanceof ArrayBuffer?o.setData(1,1,l,{filtering:"nearest"}):y.tagName.toUpperCase()==="IMG"||y.tagName.toUpperCase()==="CANVAS"?o.setElement(y,r):o.setData(1,1,l,{filtering:"nearest"})},function(){o.loaded=!1}).then(h,function(g){return p(g)}):p(new Error("Unable to invoke on target "+r.uid))}),this.loading}}])}(Texture);TextureManager.register(RemoteTexture,function(e){return e&&e.uid}),self.H=self.H||{},self.H.gl={DataSource,Geo:Geo$1,MathUtils:MathUtils$1,Scene,Task,Tile,WorkerBroker,log,SceneLoader:SceneLoader$1,yaml:jsYaml}})()};f()}(),this.H=this.H||{},this.H.venues=function(e){"use strict";function n(j,k){k===void 0&&(k={});var P=k.insertAt;if(j&&typeof document<"u"){var $=document.head||document.getElementsByTagName("head")[0],W=document.createElement("style");W.type="text/css",P==="top"&&$.firstChild?$.insertBefore(W,$.firstChild):$.appendChild(W),W.styleSheet?W.styleSheet.cssText=j:W.appendChild(document.createTextNode(j))}}function r(j,k,P){return k=_t(k),function($,W){if(W&&(typeof W=="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(_n){if(_n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _n}($)}(j,s()?Reflect.construct(k,P||[],_t(j).constructor):k.apply(j,P))}function o(j,k,P){if(s())return Reflect.construct.apply(null,arguments);var $=[null];$.push.apply($,k);var W=new(j.bind.apply(j,$));return P&&_r(W,P.prototype),W}function s(){try{var j=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s=function(){return!!j})()}function l(j,k){var P=Object.keys(j);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(j);k&&($=$.filter(function(W){return Object.getOwnPropertyDescriptor(j,W).enumerable})),P.push.apply(P,$)}return P}function h(j){for(var k=1;k<arguments.length;k++){var P=arguments[k]!=null?arguments[k]:{};k%2?l(Object(P),!0).forEach(function($){I(j,$,P[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(P)):l(Object(P)).forEach(function($){Object.defineProperty(j,$,Object.getOwnPropertyDescriptor(P,$))})}return j}function p(){p=function(){return k};var j,k={},P=Object.prototype,$=P.hasOwnProperty,W=Object.defineProperty||function(oy,sy,fy){oy[sy]=fy.value},_n=typeof Symbol=="function"?Symbol:{},_i=_n.iterator||"@@iterator",ga=_n.asyncIterator||"@@asyncIterator",ba=_n.toStringTag||"@@toStringTag";function Va(oy,sy,fy){return Object.defineProperty(oy,sy,{value:fy,enumerable:!0,configurable:!0,writable:!0}),oy[sy]}try{Va({},"")}catch{Va=function(sy,fy,Ly){return sy[fy]=Ly}}function _c(oy,sy,fy,Ly){var dy=sy&&sy.prototype instanceof hy?sy:hy,Zy=Object.create(dy.prototype),Qy=new f0(Ly||[]);return W(Zy,"_invoke",{value:iv(oy,fy,Qy)}),Zy}function _f(oy,sy,fy){try{return{type:"normal",arg:oy.call(sy,fy)}}catch(Ly){return{type:"throw",arg:Ly}}}k.wrap=_c;var Ac="suspendedStart",qp="suspendedYield",_d="executing",_g="completed",ny={};function hy(){}function yy(){}function by(){}var Ry={};Va(Ry,_i,function(){return this});var Cy=Object.getPrototypeOf,jy=Cy&&Cy(Cy(c_([])));jy&&jy!==P&&$.call(jy,_i)&&(Ry=jy);var wy=by.prototype=hy.prototype=Object.create(Ry);function Iy(oy){["next","throw","return"].forEach(function(sy){Va(oy,sy,function(fy){return this._invoke(sy,fy)})})}function Ay(oy,sy){function fy(dy,Zy,Qy,zv){var Rv=_f(oy[dy],oy,Zy);if(Rv.type!=="throw"){var Hv=Rv.arg,Dv=Hv.value;return Dv&&typeof Dv=="object"&&$.call(Dv,"__await")?sy.resolve(Dv.__await).then(function(_0){fy("next",_0,Qy,zv)},function(_0){fy("throw",_0,Qy,zv)}):sy.resolve(Dv).then(function(_0){Hv.value=_0,Qy(Hv)},function(_0){return fy("throw",_0,Qy,zv)})}zv(Rv.arg)}var Ly;W(this,"_invoke",{value:function(dy,Zy){function Qy(){return new sy(function(zv,Rv){fy(dy,Zy,zv,Rv)})}return Ly=Ly?Ly.then(Qy,Qy):Qy()}})}function iv(oy,sy,fy){var Ly=Ac;return function(dy,Zy){if(Ly===_d)throw Error("Generator is already running");if(Ly===_g){if(dy==="throw")throw Zy;return{value:j,done:!0}}for(fy.method=dy,fy.arg=Zy;;){var Qy=fy.delegate;if(Qy){var zv=Ev(Qy,fy);if(zv){if(zv===ny)continue;return zv}}if(fy.method==="next")fy.sent=fy._sent=fy.arg;else if(fy.method==="throw"){if(Ly===Ac)throw Ly=_g,fy.arg;fy.dispatchException(fy.arg)}else fy.method==="return"&&fy.abrupt("return",fy.arg);Ly=_d;var Rv=_f(oy,sy,fy);if(Rv.type==="normal"){if(Ly=fy.done?_g:qp,Rv.arg===ny)continue;return{value:Rv.arg,done:fy.done}}Rv.type==="throw"&&(Ly=_g,fy.method="throw",fy.arg=Rv.arg)}}}function Ev(oy,sy){var fy=sy.method,Ly=oy.iterator[fy];if(Ly===j)return sy.delegate=null,fy==="throw"&&oy.iterator.return&&(sy.method="return",sy.arg=j,Ev(oy,sy),sy.method==="throw")||fy!=="return"&&(sy.method="throw",sy.arg=new TypeError("The iterator does not provide a '"+fy+"' method")),ny;var dy=_f(Ly,oy.iterator,sy.arg);if(dy.type==="throw")return sy.method="throw",sy.arg=dy.arg,sy.delegate=null,ny;var Zy=dy.arg;return Zy?Zy.done?(sy[oy.resultName]=Zy.value,sy.next=oy.nextLoc,sy.method!=="return"&&(sy.method="next",sy.arg=j),sy.delegate=null,ny):Zy:(sy.method="throw",sy.arg=new TypeError("iterator result is not an object"),sy.delegate=null,ny)}function v0(oy){var sy={tryLoc:oy[0]};1 in oy&&(sy.catchLoc=oy[1]),2 in oy&&(sy.finallyLoc=oy[2],sy.afterLoc=oy[3]),this.tryEntries.push(sy)}function Pv(oy){var sy=oy.completion||{};sy.type="normal",delete sy.arg,oy.completion=sy}function f0(oy){this.tryEntries=[{tryLoc:"root"}],oy.forEach(v0,this),this.reset(!0)}function c_(oy){if(oy||oy===""){var sy=oy[_i];if(sy)return sy.call(oy);if(typeof oy.next=="function")return oy;if(!isNaN(oy.length)){var fy=-1,Ly=function dy(){for(;++fy<oy.length;)if($.call(oy,fy))return dy.value=oy[fy],dy.done=!1,dy;return dy.value=j,dy.done=!0,dy};return Ly.next=Ly}}throw new TypeError(typeof oy+" is not iterable")}return yy.prototype=by,W(wy,"constructor",{value:by,configurable:!0}),W(by,"constructor",{value:yy,configurable:!0}),yy.displayName=Va(by,ba,"GeneratorFunction"),k.isGeneratorFunction=function(oy){var sy=typeof oy=="function"&&oy.constructor;return!!sy&&(sy===yy||(sy.displayName||sy.name)==="GeneratorFunction")},k.mark=function(oy){return Object.setPrototypeOf?Object.setPrototypeOf(oy,by):(oy.__proto__=by,Va(oy,ba,"GeneratorFunction")),oy.prototype=Object.create(wy),oy},k.awrap=function(oy){return{__await:oy}},Iy(Ay.prototype),Va(Ay.prototype,ga,function(){return this}),k.AsyncIterator=Ay,k.async=function(oy,sy,fy,Ly,dy){dy===void 0&&(dy=Promise);var Zy=new Ay(_c(oy,sy,fy,Ly),dy);return k.isGeneratorFunction(sy)?Zy:Zy.next().then(function(Qy){return Qy.done?Qy.value:Zy.next()})},Iy(wy),Va(wy,ba,"Generator"),Va(wy,_i,function(){return this}),Va(wy,"toString",function(){return"[object Generator]"}),k.keys=function(oy){var sy=Object(oy),fy=[];for(var Ly in sy)fy.push(Ly);return fy.reverse(),function dy(){for(;fy.length;){var Zy=fy.pop();if(Zy in sy)return dy.value=Zy,dy.done=!1,dy}return dy.done=!0,dy}},k.values=c_,f0.prototype={constructor:f0,reset:function(oy){if(this.prev=0,this.next=0,this.sent=this._sent=j,this.done=!1,this.delegate=null,this.method="next",this.arg=j,this.tryEntries.forEach(Pv),!oy)for(var sy in this)sy.charAt(0)==="t"&&$.call(this,sy)&&!isNaN(+sy.slice(1))&&(this[sy]=j)},stop:function(){this.done=!0;var oy=this.tryEntries[0].completion;if(oy.type==="throw")throw oy.arg;return this.rval},dispatchException:function(oy){if(this.done)throw oy;var sy=this;function fy(Rv,Hv){return Zy.type="throw",Zy.arg=oy,sy.next=Rv,Hv&&(sy.method="next",sy.arg=j),!!Hv}for(var Ly=this.tryEntries.length-1;Ly>=0;--Ly){var dy=this.tryEntries[Ly],Zy=dy.completion;if(dy.tryLoc==="root")return fy("end");if(dy.tryLoc<=this.prev){var Qy=$.call(dy,"catchLoc"),zv=$.call(dy,"finallyLoc");if(Qy&&zv){if(this.prev<dy.catchLoc)return fy(dy.catchLoc,!0);if(this.prev<dy.finallyLoc)return fy(dy.finallyLoc)}else if(Qy){if(this.prev<dy.catchLoc)return fy(dy.catchLoc,!0)}else{if(!zv)throw Error("try statement without catch or finally");if(this.prev<dy.finallyLoc)return fy(dy.finallyLoc)}}}},abrupt:function(oy,sy){for(var fy=this.tryEntries.length-1;fy>=0;--fy){var Ly=this.tryEntries[fy];if(Ly.tryLoc<=this.prev&&$.call(Ly,"finallyLoc")&&this.prev<Ly.finallyLoc){var dy=Ly;break}}dy&&(oy==="break"||oy==="continue")&&dy.tryLoc<=sy&&sy<=dy.finallyLoc&&(dy=null);var Zy=dy?dy.completion:{};return Zy.type=oy,Zy.arg=sy,dy?(this.method="next",this.next=dy.finallyLoc,ny):this.complete(Zy)},complete:function(oy,sy){if(oy.type==="throw")throw oy.arg;return oy.type==="break"||oy.type==="continue"?this.next=oy.arg:oy.type==="return"?(this.rval=this.arg=oy.arg,this.method="return",this.next="end"):oy.type==="normal"&&sy&&(this.next=sy),ny},finish:function(oy){for(var sy=this.tryEntries.length-1;sy>=0;--sy){var fy=this.tryEntries[sy];if(fy.finallyLoc===oy)return this.complete(fy.completion,fy.afterLoc),Pv(fy),ny}},catch:function(oy){for(var sy=this.tryEntries.length-1;sy>=0;--sy){var fy=this.tryEntries[sy];if(fy.tryLoc===oy){var Ly=fy.completion;if(Ly.type==="throw"){var dy=Ly.arg;Pv(fy)}return dy}}throw Error("illegal catch attempt")},delegateYield:function(oy,sy,fy){return this.delegate={iterator:c_(oy),resultName:sy,nextLoc:fy},this.method==="next"&&(this.arg=j),ny}},k}function d(j){var k=function(P,$){if(typeof P!="object"||!P)return P;var W=P[Symbol.toPrimitive];if(W!==void 0){var _n=W.call(P,$||"default");if(typeof _n!="object")return _n;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(P)}(j,"string");return typeof k=="symbol"?k:k+""}function g(j){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},g(j)}function y(j,k,P,$,W,_n,_i){try{var ga=j[_n](_i),ba=ga.value}catch(Va){return void P(Va)}ga.done?k(ba):Promise.resolve(ba).then($,W)}function v(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function _(j,k){for(var P=0;P<k.length;P++){var $=k[P];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(j,d($.key),$)}}function w(j,k,P){return k&&_(j.prototype,k),P&&_(j,P),Object.defineProperty(j,"prototype",{writable:!1}),j}function I(j,k,P){return(k=d(k))in j?Object.defineProperty(j,k,{value:P,enumerable:!0,configurable:!0,writable:!0}):j[k]=P,j}function G(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),k&&_r(j,k)}function _t(j){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},_t(j)}function _r(j,k){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,$){return P.__proto__=$,P},_r(j,k)}function _o(j,k){if(j==null)return{};var P,$,W=function(_i,ga){if(_i==null)return{};var ba,Va,_c={},_f=Object.keys(_i);for(Va=0;Va<_f.length;Va++)ba=_f[Va],ga.indexOf(ba)>=0||(_c[ba]=_i[ba]);return _c}(j,k);if(Object.getOwnPropertySymbols){var _n=Object.getOwnPropertySymbols(j);for($=0;$<_n.length;$++)P=_n[$],k.indexOf(P)>=0||Object.prototype.propertyIsEnumerable.call(j,P)&&(W[P]=j[P])}return W}function Ca(){return Ca=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(j,k,P){var $=function(_n,_i){for(;!Object.prototype.hasOwnProperty.call(_n,_i)&&(_n=_t(_n))!==null;);return _n}(j,k);if($){var W=Object.getOwnPropertyDescriptor($,k);return W.get?W.get.call(arguments.length<3?j:P):W.value}},Ca.apply(this,arguments)}function _a(j,k){return function(P){if(Array.isArray(P))return P}(j)||function(P,$){var W=P==null?null:typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(W!=null){var _n,_i,ga,ba,Va=[],_c=!0,_f=!1;try{if(ga=(W=W.call(P)).next,$===0){if(Object(W)!==W)return;_c=!1}else for(;!(_c=(_n=ga.call(W)).done)&&(Va.push(_n.value),Va.length!==$);_c=!0);}catch(Ac){_f=!0,_i=Ac}finally{try{if(!_c&&W.return!=null&&(ba=W.return(),Object(ba)!==ba))return}finally{if(_f)throw _i}}return Va}}(j,k)||Qa(j,k)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _l(j){return function(k){if(Array.isArray(k))return Kc(k)}(j)||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(j)||Qa(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qa(j,k){if(j){if(typeof j=="string")return Kc(j,k);var P=Object.prototype.toString.call(j).slice(8,-1);return P==="Object"&&j.constructor&&(P=j.constructor.name),P==="Map"||P==="Set"?Array.from(j):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?Kc(j,k):void 0}}function Kc(j,k){(k==null||k>j.length)&&(k=j.length);for(var P=0,$=new Array(k);P<k;P++)$[P]=j[P];return $}n(`.H_l_right .venues-ui__drawings .trigger.button--active .arrow {
  transform: rotate(90deg);
}
.H_l_right .venues-ui__drawings .drawings {
  right: 45px;
  left: initial;
}`);var jc=function(j){function k(P){var $;return v(this,k),($=r(this,k)).id=P.id,$.model=P,$}return G(k,H.map.Feature),w(k,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var P=_a(this.model.getCenter(),2),$=P[0],W=P[1];return new H.geo.Point(W,$)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}])}(),_h=function(j){function k(P){var $;return v(this,k),($=r(this,k)).id=P.id,$.model=P,$}return G(k,H.map.Feature),w(k,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return o(H.geo.Rect,_l(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var P=_a(this.model.getCenter(),2),$=P[0],W=P[1];return new H.geo.Point(W,$)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(P){return this.getLevels().find(function($){return $.getIdentifier()===P})}},{key:"getLevels",value:function(){var P=this.getData().getLevels().map(function($){return $.getIdentifier()});return this.getVenue().getLevels().filter(function($){return P.indexOf($.id)!==-1})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}])}(),_m=function(j){function k(P){var $;return v(this,k),($=r(this,k)).id=P.id,$.model=P,$}return G(k,H.map.Feature),w(k,[{key:"getGeometry",value:function(P){return this.getGeometries().find(function($){return $.getIdentifier()===P})}},{key:"getGeometries",value:function(){var P=this.getData().getGeometries().map(function($){return $.getIdentifier()});return this.getDrawing().getVenue().getGeometries().filter(function($){return P.indexOf($.id)!==-1})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}])}();function ry(j,k,P,$){for(var W,_n=$,_i=P-k>>1,ga=P-k,ba=j[k],Va=j[k+1],_c=j[P],_f=j[P+1],Ac=k+3;Ac<P;Ac+=3){var qp=uy(j[Ac],j[Ac+1],ba,Va,_c,_f);if(qp>_n)W=Ac,_n=qp;else if(qp===_n){var _d=Math.abs(Ac-_i);_d<ga&&(W=Ac,ga=_d)}}_n>$&&(W-k>3&&ry(j,k,W,$),j[W+2]=_n,P-W>3&&ry(j,W,P,$))}function uy(j,k,P,$,W,_n){var _i=W-P,ga=_n-$;if(_i!==0||ga!==0){var ba=((j-P)*_i+(k-$)*ga)/(_i*_i+ga*ga);ba>1?(P=W,$=_n):ba>0&&(P+=_i*ba,$+=ga*ba)}return(_i=j-P)*_i+(ga=k-$)*ga}function ay(j,k,P,$){var W={id:j===void 0?null:j,type:k,geometry:P,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(_n){var _i=_n.geometry,ga=_n.type;if(ga==="Point"||ga==="MultiPoint"||ga==="LineString")ey(_n,_i);else if(ga==="Polygon"||ga==="MultiLineString")for(var ba=0;ba<_i.length;ba++)ey(_n,_i[ba]);else if(ga==="MultiPolygon")for(ba=0;ba<_i.length;ba++)for(var Va=0;Va<_i[ba].length;Va++)ey(_n,_i[ba][Va])}(W),W}function ey(j,k){for(var P=0;P<k.length;P+=3)j.minX=Math.min(j.minX,k[P]),j.minY=Math.min(j.minY,k[P+1]),j.maxX=Math.max(j.maxX,k[P]),j.maxY=Math.max(j.maxY,k[P+1])}function _y(j,k,P,$){if(k.geometry){var W=k.geometry.coordinates,_n=k.geometry.type,_i=Math.pow(P.tolerance/((1<<P.maxZoom)*P.extent),2),ga=[],ba=k.id;if(P.promoteId?ba=k.properties[P.promoteId]:P.generateId&&(ba=$||0),_n==="Point")Ey(W,ga);else if(_n==="MultiPoint")for(var Va=0;Va<W.length;Va++)Ey(W[Va],ga);else if(_n==="LineString")My(W,ga,_i,!1);else if(_n==="MultiLineString"){if(P.lineMetrics){for(Va=0;Va<W.length;Va++)ga=[],My(W[Va],ga,_i,!1),j.push(ay(ba,"LineString",ga,k.properties));return}Ny(W,ga,_i,!1)}else if(_n==="Polygon")Ny(W,ga,_i,!0);else{if(_n!=="MultiPolygon"){if(_n==="GeometryCollection"){for(Va=0;Va<k.geometry.geometries.length;Va++)_y(j,{id:ba,geometry:k.geometry.geometries[Va],properties:k.properties},P,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Va=0;Va<W.length;Va++){var _c=[];Ny(W[Va],_c,_i,!0),ga.push(_c)}}j.push(ay(ba,_n,ga,k.properties))}}function Ey(j,k){k.push(Py(j[0])),k.push(gv(j[1])),k.push(0)}function My(j,k,P,$){for(var W,_n,_i=0,ga=0;ga<j.length;ga++){var ba=Py(j[ga][0]),Va=gv(j[ga][1]);k.push(ba),k.push(Va),k.push(0),ga>0&&(_i+=$?(W*Va-ba*_n)/2:Math.sqrt(Math.pow(ba-W,2)+Math.pow(Va-_n,2))),W=ba,_n=Va}var _c=k.length-3;k[2]=1,ry(k,0,_c,P),k[_c+2]=1,k.size=Math.abs(_i),k.start=0,k.end=k.size}function Ny(j,k,P,$){for(var W=0;W<j.length;W++){var _n=[];My(j[W],_n,P,$),k.push(_n)}}function Py(j){return j/360+.5}function gv(j){var k=Math.sin(j*Math.PI/180),P=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return P<0?0:P>1?1:P}function sv(j,k,P,$,W,_n,_i,ga){if($/=k,_n>=(P/=k)&&_i<$)return j;if(_i<P||_n>=$)return null;for(var ba=[],Va=0;Va<j.length;Va++){var _c=j[Va],_f=_c.geometry,Ac=_c.type,qp=W===0?_c.minX:_c.minY,_d=W===0?_c.maxX:_c.maxY;if(qp>=P&&_d<$)ba.push(_c);else if(!(_d<P||qp>=$)){var _g=[];if(Ac==="Point"||Ac==="MultiPoint")Kv(_f,_g,P,$,W);else if(Ac==="LineString")Ty(_f,_g,P,$,W,!1,ga.lineMetrics);else if(Ac==="MultiLineString")_v(_f,_g,P,$,W,!1);else if(Ac==="Polygon")_v(_f,_g,P,$,W,!0);else if(Ac==="MultiPolygon")for(var ny=0;ny<_f.length;ny++){var hy=[];_v(_f[ny],hy,P,$,W,!0),hy.length&&_g.push(hy)}if(_g.length){if(ga.lineMetrics&&Ac==="LineString"){for(ny=0;ny<_g.length;ny++)ba.push(ay(_c.id,Ac,_g[ny],_c.tags));continue}Ac!=="LineString"&&Ac!=="MultiLineString"||(_g.length===1?(Ac="LineString",_g=_g[0]):Ac="MultiLineString"),Ac!=="Point"&&Ac!=="MultiPoint"||(Ac=_g.length===3?"Point":"MultiPoint"),ba.push(ay(_c.id,Ac,_g,_c.tags))}}}return ba.length?ba:null}function Kv(j,k,P,$,W){for(var _n=0;_n<j.length;_n+=3){var _i=j[_n+W];_i>=P&&_i<=$&&(k.push(j[_n]),k.push(j[_n+1]),k.push(j[_n+2]))}}function Ty(j,k,P,$,W,_n,_i){for(var ga,ba,Va=Gv(j),_c=W===0?T0:Ov,_f=j.start,Ac=0;Ac<j.length-3;Ac+=3){var qp=j[Ac],_d=j[Ac+1],_g=j[Ac+2],ny=j[Ac+3],hy=j[Ac+4],yy=W===0?qp:_d,by=W===0?ny:hy,Ry=!1;_i&&(ga=Math.sqrt(Math.pow(qp-ny,2)+Math.pow(_d-hy,2))),yy<P?by>P&&(ba=_c(Va,qp,_d,ny,hy,P),_i&&(Va.start=_f+ga*ba)):yy>$?by<$&&(ba=_c(Va,qp,_d,ny,hy,$),_i&&(Va.start=_f+ga*ba)):i0(Va,qp,_d,_g),by<P&&yy>=P&&(ba=_c(Va,qp,_d,ny,hy,P),Ry=!0),by>$&&yy<=$&&(ba=_c(Va,qp,_d,ny,hy,$),Ry=!0),!_n&&Ry&&(_i&&(Va.end=_f+ga*ba),k.push(Va),Va=Gv(j)),_i&&(_f+=ga)}var Cy=j.length-3;qp=j[Cy],_d=j[Cy+1],_g=j[Cy+2],(yy=W===0?qp:_d)>=P&&yy<=$&&i0(Va,qp,_d,_g),Cy=Va.length-3,_n&&Cy>=3&&(Va[Cy]!==Va[0]||Va[Cy+1]!==Va[1])&&i0(Va,Va[0],Va[1],Va[2]),Va.length&&k.push(Va)}function Gv(j){var k=[];return k.size=j.size,k.start=j.start,k.end=j.end,k}function _v(j,k,P,$,W,_n){for(var _i=0;_i<j.length;_i++)Ty(j[_i],k,P,$,W,_n,!1)}function i0(j,k,P,$){j.push(k),j.push(P),j.push($)}function T0(j,k,P,$,W,_n){var _i=(_n-k)/($-k);return j.push(_n),j.push(P+(W-P)*_i),j.push(1),_i}function Ov(j,k,P,$,W,_n){var _i=(_n-P)/(W-P);return j.push(k+($-k)*_i),j.push(_n),j.push(1),_i}function Yy(j,k){for(var P=[],$=0;$<j.length;$++){var W,_n=j[$],_i=_n.type;if(_i==="Point"||_i==="MultiPoint"||_i==="LineString")W=Jv(_n.geometry,k);else if(_i==="MultiLineString"||_i==="Polygon"){W=[];for(var ga=0;ga<_n.geometry.length;ga++)W.push(Jv(_n.geometry[ga],k))}else if(_i==="MultiPolygon")for(W=[],ga=0;ga<_n.geometry.length;ga++){for(var ba=[],Va=0;Va<_n.geometry[ga].length;Va++)ba.push(Jv(_n.geometry[ga][Va],k));W.push(ba)}P.push(ay(_n.id,_i,W,_n.tags))}return P}function Jv(j,k){var P=[];P.size=j.size,j.start!==void 0&&(P.start=j.start,P.end=j.end);for(var $=0;$<j.length;$+=3)P.push(j[$]+k,j[$+1],j[$+2]);return P}function Y0(j,k){if(j.transformed)return j;var P,$,W,_n=1<<j.z,_i=j.x,ga=j.y;for(P=0;P<j.features.length;P++){var ba=j.features[P],Va=ba.geometry,_c=ba.type;if(ba.geometry=[],_c===1)for($=0;$<Va.length;$+=2)ba.geometry.push(T_(Va[$],Va[$+1],k,_n,_i,ga));else for($=0;$<Va.length;$++){var _f=[];for(W=0;W<Va[$].length;W+=2)_f.push(T_(Va[$][W],Va[$][W+1],k,_n,_i,ga));ba.geometry.push(_f)}}return j.transformed=!0,j}function T_(j,k,P,$,W,_n){return[Math.round(P*(j*$-W)),Math.round(P*(k*$-_n))]}function A_(j,k,P,$,W){for(var _n=k===W.maxZoom?0:W.tolerance/((1<<k)*W.extent),_i={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:P,y:$,z:k,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ga=0;ga<j.length;ga++){_i.numFeatures++,L0(_i,j[ga],_n,W);var ba=j[ga].minX,Va=j[ga].minY,_c=j[ga].maxX,_f=j[ga].maxY;ba<_i.minX&&(_i.minX=ba),Va<_i.minY&&(_i.minY=Va),_c>_i.maxX&&(_i.maxX=_c),_f>_i.maxY&&(_i.maxY=_f)}return _i}function L0(j,k,P,$){var W=k.geometry,_n=k.type,_i=[];if(_n==="Point"||_n==="MultiPoint")for(var ga=0;ga<W.length;ga+=3)_i.push(W[ga]),_i.push(W[ga+1]),j.numPoints++,j.numSimplified++;else if(_n==="LineString")s_(_i,W,j,P,!1,!1);else if(_n==="MultiLineString"||_n==="Polygon")for(ga=0;ga<W.length;ga++)s_(_i,W[ga],j,P,_n==="Polygon",ga===0);else if(_n==="MultiPolygon")for(var ba=0;ba<W.length;ba++){var Va=W[ba];for(ga=0;ga<Va.length;ga++)s_(_i,Va[ga],j,P,!0,ga===0)}if(_i.length){var _c=k.tags||null;if(_n==="LineString"&&$.lineMetrics){for(var _f in _c={},k.tags)_c[_f]=k.tags[_f];_c.mapbox_clip_start=W.start/W.size,_c.mapbox_clip_end=W.end/W.size}var Ac={geometry:_i,type:_n==="Polygon"||_n==="MultiPolygon"?3:_n==="LineString"||_n==="MultiLineString"?2:1,tags:_c};k.id!==null&&(Ac.id=k.id),j.features.push(Ac)}}function s_(j,k,P,$,W,_n){var _i=$*$;if($>0&&k.size<(W?_i:$))P.numPoints+=k.length/3;else{for(var ga=[],ba=0;ba<k.length;ba+=3)($===0||k[ba+2]>_i)&&(P.numSimplified++,ga.push(k[ba]),ga.push(k[ba+1])),P.numPoints++;W&&function(Va,_c){for(var _f=0,Ac=0,qp=Va.length,_d=qp-2;Ac<qp;_d=Ac,Ac+=2)_f+=(Va[Ac]-Va[_d])*(Va[Ac+1]+Va[_d+1]);if(_f>0===_c)for(Ac=0,qp=Va.length;Ac<qp/2;Ac+=2){var _g=Va[Ac],ny=Va[Ac+1];Va[Ac]=Va[qp-2-Ac],Va[Ac+1]=Va[qp-1-Ac],Va[qp-2-Ac]=_g,Va[qp-1-Ac]=ny}}(ga,_n),j.push(ga)}}function j0(j,k){var P=(k=this.options=function(W,_n){for(var _i in _n)W[_i]=_n[_i];return W}(Object.create(this.options),k)).debug;if(P&&console.time("preprocess data"),k.maxZoom<0||k.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(k.promoteId&&k.generateId)throw new Error("promoteId and generateId cannot be used together.");var $=function(W,_n){var _i=[];if(W.type==="FeatureCollection")for(var ga=0;ga<W.features.length;ga++)_y(_i,W.features[ga],_n,ga);else W.type==="Feature"?_y(_i,W,_n):_y(_i,{geometry:W},_n);return _i}(j,k);this.tiles={},this.tileCoords=[],P&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",k.indexMaxZoom,k.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$=function(W,_n){var _i=_n.buffer/_n.extent,ga=W,ba=sv(W,1,-1-_i,_i,0,-1,2,_n),Va=sv(W,1,1-_i,2+_i,0,-1,2,_n);return(ba||Va)&&(ga=sv(W,1,-_i,1+_i,0,-1,2,_n)||[],ba&&(ga=Yy(ba,1).concat(ga)),Va&&(ga=ga.concat(Yy(Va,-1)))),ga}($,k),$.length&&this.splitTile($,0,0,0),P&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function m0(j,k,P){return 32*((1<<j)*P+k)+j}j0.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},j0.prototype.splitTile=function(j,k,P,$,W,_n,_i){for(var ga=[j,k,P,$],ba=this.options,Va=ba.debug;ga.length;){$=ga.pop(),P=ga.pop(),k=ga.pop(),j=ga.pop();var _c=1<<k,_f=m0(k,P,$),Ac=this.tiles[_f];if(!Ac&&(Va>1&&console.time("creation"),Ac=this.tiles[_f]=A_(j,k,P,$,ba),this.tileCoords.push({z:k,x:P,y:$}),Va)){Va>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",k,P,$,Ac.numFeatures,Ac.numPoints,Ac.numSimplified),console.timeEnd("creation"));var qp="z"+k;this.stats[qp]=(this.stats[qp]||0)+1,this.total++}if(Ac.source=j,W){if(k===ba.maxZoom||k===W)continue;var _d=1<<W-k;if(P!==Math.floor(_n/_d)||$!==Math.floor(_i/_d))continue}else if(k===ba.indexMaxZoom||Ac.numPoints<=ba.indexMaxPoints)continue;if(Ac.source=null,j.length!==0){Va>1&&console.time("clipping");var _g,ny,hy,yy,by,Ry,Cy=.5*ba.buffer/ba.extent,jy=.5-Cy,wy=.5+Cy,Iy=1+Cy;_g=ny=hy=yy=null,by=sv(j,_c,P-Cy,P+wy,0,Ac.minX,Ac.maxX,ba),Ry=sv(j,_c,P+jy,P+Iy,0,Ac.minX,Ac.maxX,ba),j=null,by&&(_g=sv(by,_c,$-Cy,$+wy,1,Ac.minY,Ac.maxY,ba),ny=sv(by,_c,$+jy,$+Iy,1,Ac.minY,Ac.maxY,ba),by=null),Ry&&(hy=sv(Ry,_c,$-Cy,$+wy,1,Ac.minY,Ac.maxY,ba),yy=sv(Ry,_c,$+jy,$+Iy,1,Ac.minY,Ac.maxY,ba),Ry=null),Va>1&&console.timeEnd("clipping"),ga.push(_g||[],k+1,2*P,2*$),ga.push(ny||[],k+1,2*P,2*$+1),ga.push(hy||[],k+1,2*P+1,2*$),ga.push(yy||[],k+1,2*P+1,2*$+1)}}},j0.prototype.getTile=function(j,k,P){var $=this.options,W=$.extent,_n=$.debug;if(j<0||j>24)return null;var _i=1<<j,ga=m0(j,k=(k%_i+_i)%_i,P);if(this.tiles[ga])return Y0(this.tiles[ga],W);_n>1&&console.log("drilling down to z%d-%d-%d",j,k,P);for(var ba,Va=j,_c=k,_f=P;!ba&&Va>0;)Va--,_c=Math.floor(_c/2),_f=Math.floor(_f/2),ba=this.tiles[m0(Va,_c,_f)];return ba&&ba.source?(_n>1&&console.log("found parent tile z%d-%d-%d",Va,_c,_f),_n>1&&console.time("drilling down"),this.splitTile(ba.source,Va,_c,_f,j,k,P),_n>1&&console.timeEnd("drilling down"),this.tiles[ga]?Y0(this.tiles[ga],W):null):null};var Qv="Point",V_="Polygon",qv="MultiPoint",h0="MultiLineString",Nv="MultiPolygon",ub={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},U_={fill:"#333333",size:13},S_={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},z_=16,tE=18,_b=24,Av={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},gI=Object.freeze({v1:1,v2:2}),Sv=1,C_=2,a_=3,hA="CW",Vv="CCW",rv=function(j){var k=function(P){for(var $=0,W=P.length,_n=0;_n<W-1;_n+=1){var _i=P[_n],ga=P[_n+1];$+=_i[0]*ga[1]-ga[0]*_i[1]}return $+(P[W-1][0]*P[0][1]-P[0][0]*P[W-1][1])}(j);return k>0?hA:k<0?Vv:void 0},p1=function(j){for(var k,P=[],$=[],W=0,_n=j.coordinates.length;W<_n;W+=1){var _i=j.coordinates[W],ga=rv(_i);ga!==null&&(ga===(k=k||ga)&&$.length&&(P.push($),$=[]),$.push(_i))}return $.length>0&&P.push($),P.length===1?(j.type=V_,j.coordinates=P[0]):P.length>1?(j.type=Nv,j.coordinates=P):j=null,j},ly=function(j,k,P,$,W){var _n,_i,ga,ba,Va,_c,_f=function(Ac,qp,_d,_g,ny){var hy=1<<qp,yy=[];return yy[0]=(Ac[0]/ny+_d)/hy,yy[1]=(Ac[1]/ny+_g)/hy,{x:yy[0],y:yy[1]}}(j,k,P,$,W);return _i=(_n=_f).x,ga=_n.y,ba=360*(_i-.5),Va=Math.exp(Math.PI*(.5-ga)/.25)-1,_c=Math.exp(Math.PI*(.5-ga)/.25)+1,[ba,180*Math.asin(Va/_c)/Math.PI]};typeof globalThis<"u"||typeof window<"u"||(typeof global<"u"?global:typeof self<"u");var eE,tw,H_,ew=(eE=function(j,k){j.exports=function(P){var $={};function W(_n){if($[_n])return $[_n].exports;var _i=$[_n]={i:_n,l:!1,exports:{}};return P[_n].call(_i.exports,_i,_i.exports,W),_i.l=!0,_i.exports}return W.m=P,W.c=$,W.d=function(_n,_i,ga){W.o(_n,_i)||Object.defineProperty(_n,_i,{enumerable:!0,get:ga})},W.r=function(_n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_n,"__esModule",{value:!0})},W.t=function(_n,_i){if(1&_i&&(_n=W(_n)),8&_i||4&_i&&g(_n)=="object"&&_n&&_n.__esModule)return _n;var ga=Object.create(null);if(W.r(ga),Object.defineProperty(ga,"default",{enumerable:!0,value:_n}),2&_i&&typeof _n!="string")for(var ba in _n)W.d(ga,ba,(function(Va){return _n[Va]}).bind(null,ba));return ga},W.n=function(_n){var _i=_n&&_n.__esModule?function(){return _n.default}:function(){return _n};return W.d(_i,"a",_i),_i},W.o=function(_n,_i){return Object.prototype.hasOwnProperty.call(_n,_i)},W.p="",W(W.s=0)}([function(P,$,W){function _n(Ac){return(_n=typeof Symbol=="function"&&g(Symbol.iterator)=="symbol"?function(qp){return g(qp)}:function(qp){return qp&&typeof Symbol=="function"&&qp.constructor===Symbol&&qp!==Symbol.prototype?"symbol":g(qp)})(Ac)}function _i(Ac,qp){for(var _d=0;_d<qp.length;_d++){var _g=qp[_d];_g.enumerable=_g.enumerable||!1,_g.configurable=!0,"value"in _g&&(_g.writable=!0),Object.defineProperty(Ac,_g.key,_g)}}var ga=W(1),ba=W(7),Va=ba.get,_c=(ba.deepValue,ba.isArray),_f=function(){function Ac(_d,_g){var ny=_g.location,hy=ny===void 0?0:ny,yy=_g.distance,by=yy===void 0?100:yy,Ry=_g.threshold,Cy=Ry===void 0?.6:Ry,jy=_g.maxPatternLength,wy=jy===void 0?32:jy,Iy=_g.caseSensitive,Ay=Iy!==void 0&&Iy,iv=_g.tokenSeparator,Ev=iv===void 0?/ +/g:iv,v0=_g.findAllMatches,Pv=v0!==void 0&&v0,f0=_g.minMatchCharLength,c_=f0===void 0?1:f0,oy=_g.id,sy=oy===void 0?null:oy,fy=_g.keys,Ly=fy===void 0?[]:fy,dy=_g.shouldSort,Zy=dy===void 0||dy,Qy=_g.getFn,zv=Qy===void 0?Va:Qy,Rv=_g.sortFn,Hv=Rv===void 0?function(y1,cE){return y1.score-cE.score}:Rv,Dv=_g.tokenize,_0=Dv!==void 0&&Dv,m1=_g.matchAllTokens,ow=m1!==void 0&&m1,lE=_g.includeMatches,sw=lE!==void 0&&lE,uE=_g.includeScore,Nx=uE!==void 0&&uE,Px=_g.verbose,Rx=Px!==void 0&&Px;(function(y1,cE){if(!(y1 instanceof cE))throw new TypeError("Cannot call a class as a function")})(this,Ac),this.options={location:hy,distance:by,threshold:Cy,maxPatternLength:wy,isCaseSensitive:Ay,tokenSeparator:Ev,findAllMatches:Pv,minMatchCharLength:c_,id:sy,keys:Ly,includeMatches:sw,includeScore:Nx,shouldSort:Zy,getFn:zv,sortFn:Hv,verbose:Rx,tokenize:_0,matchAllTokens:ow},this.setCollection(_d),this._processKeys(Ly)}var qp;return(qp=[{key:"setCollection",value:function(_d){return this.list=_d,_d}},{key:"_processKeys",value:function(_d){if(this._keyWeights={},this._keyNames=[],_d.length&&typeof _d[0]=="string")for(var _g=0,ny=_d.length;_g<ny;_g+=1){var hy=_d[_g];this._keyWeights[hy]=1,this._keyNames.push(hy)}else{for(var yy=null,by=null,Ry=0,Cy=0,jy=_d.length;Cy<jy;Cy+=1){var wy=_d[Cy];if(!wy.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var Iy=wy.name;if(this._keyNames.push(Iy),!wy.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var Ay=wy.weight;if(Ay<0||Ay>1)throw new Error('"weight" property in key must bein the range of [0, 1)');by=by==null?Ay:Math.max(by,Ay),yy=yy==null?Ay:Math.min(yy,Ay),this._keyWeights[Iy]=Ay,Ry+=Ay}if(Ry>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(_d){var _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{limit:!1};this._log(`---------
Search pattern: "`.concat(_d,'"'));var ny=this._prepareSearchers(_d),hy=ny.tokenSearchers,yy=ny.fullSearcher,by=this._search(hy,yy);return this._computeScore(by),this.options.shouldSort&&this._sort(by),_g.limit&&typeof _g.limit=="number"&&(by=by.slice(0,_g.limit)),this._format(by)}},{key:"_prepareSearchers",value:function(){var _d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_g=[];if(this.options.tokenize)for(var ny=_d.split(this.options.tokenSeparator),hy=0,yy=ny.length;hy<yy;hy+=1)_g.push(new ga(ny[hy],this.options));return{tokenSearchers:_g,fullSearcher:new ga(_d,this.options)}}},{key:"_search",value:function(){var _d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_g=arguments.length>1?arguments[1]:void 0,ny=this.list,hy={},yy=[];if(typeof ny[0]=="string"){for(var by=0,Ry=ny.length;by<Ry;by+=1)this._analyze({key:"",value:ny[by],record:by,index:by},{resultMap:hy,results:yy,tokenSearchers:_d,fullSearcher:_g});return yy}for(var Cy=0,jy=ny.length;Cy<jy;Cy+=1)for(var wy=ny[Cy],Iy=0,Ay=this._keyNames.length;Iy<Ay;Iy+=1){var iv=this._keyNames[Iy];this._analyze({key:iv,value:this.options.getFn(wy,iv),record:wy,index:Cy},{resultMap:hy,results:yy,tokenSearchers:_d,fullSearcher:_g})}return yy}},{key:"_analyze",value:function(_d,_g){var ny=this,hy=_d.key,yy=_d.arrayIndex,by=yy===void 0?-1:yy,Ry=_d.value,Cy=_d.record,jy=_d.index,wy=_g.tokenSearchers,Iy=wy===void 0?[]:wy,Ay=_g.fullSearcher,iv=_g.resultMap,Ev=iv===void 0?{}:iv,v0=_g.results,Pv=v0===void 0?[]:v0;(function f0(c_,oy,sy,fy){if(oy!=null){if(typeof oy=="string"){var Ly=!1,dy=-1,Zy=0;ny._log(`
Key: `.concat(hy===""?"--":hy));var Qy=Ay.search(oy);if(ny._log('Full text: "'.concat(oy,'", score: ').concat(Qy.score)),ny.options.tokenize){for(var zv=oy.split(ny.options.tokenSeparator),Rv=zv.length,Hv=[],Dv=0,_0=Iy.length;Dv<_0;Dv+=1){var m1=Iy[Dv];ny._log(`
Pattern: "`.concat(m1.pattern,'"'));for(var ow=!1,lE=0;lE<Rv;lE+=1){var sw=zv[lE],uE=m1.search(sw),Nx={};uE.isMatch?(Nx[sw]=uE.score,Ly=!0,ow=!0,Hv.push(uE.score)):(Nx[sw]=1,ny.options.matchAllTokens||Hv.push(1)),ny._log('Token: "'.concat(sw,'", score: ').concat(Nx[sw]))}ow&&(Zy+=1)}dy=Hv[0];for(var Px=Hv.length,Rx=1;Rx<Px;Rx+=1)dy+=Hv[Rx];dy/=Px,ny._log("Token score average:",dy)}var y1=Qy.score;dy>-1&&(y1=(y1+dy)/2),ny._log("Score average:",y1);var cE=!ny.options.tokenize||!ny.options.matchAllTokens||Zy>=Iy.length;if(ny._log(`
Check Matches: `.concat(cE)),(Ly||Qy.isMatch)&&cE){var _I={key:hy,arrayIndex:c_,value:oy,score:y1};ny.options.includeMatches&&(_I.matchedIndices=Qy.matchedIndices);var FO=Ev[fy];FO?FO.output.push(_I):(Ev[fy]={item:sy,output:[_I]},Pv.push(Ev[fy]))}}else if(_c(oy))for(var bA=0,u5=oy.length;bA<u5;bA+=1)f0(bA,oy[bA],sy,fy)}})(by,Ry,Cy,jy)}},{key:"_computeScore",value:function(_d){this._log(`

Computing score:
`);for(var _g=this._keyWeights,ny=!!Object.keys(_g).length,hy=0,yy=_d.length;hy<yy;hy+=1){for(var by=_d[hy],Ry=by.output,Cy=Ry.length,jy=1,wy=0;wy<Cy;wy+=1){var Iy=Ry[wy],Ay=Iy.key,iv=ny?_g[Ay]:1,Ev=Iy.score===0&&_g&&_g[Ay]>0?Number.EPSILON:Iy.score;jy*=Math.pow(Ev,iv)}by.score=jy,this._log(by)}}},{key:"_sort",value:function(_d){this._log(`

Sorting....`),_d.sort(this.options.sortFn)}},{key:"_format",value:function(_d){var _g=[];if(this.options.verbose){var ny=[];this._log(`

Output:

`,JSON.stringify(_d,function(Iy,Ay){if(_n(Ay)==="object"&&Ay!==null){if(ny.indexOf(Ay)!==-1)return;ny.push(Ay)}return Ay},2)),ny=null}var hy=[];this.options.includeMatches&&hy.push(function(Iy,Ay){var iv=Iy.output;Ay.matches=[];for(var Ev=0,v0=iv.length;Ev<v0;Ev+=1){var Pv=iv[Ev];if(Pv.matchedIndices.length!==0){var f0={indices:Pv.matchedIndices,value:Pv.value};Pv.key&&(f0.key=Pv.key),Pv.hasOwnProperty("arrayIndex")&&Pv.arrayIndex>-1&&(f0.arrayIndex=Pv.arrayIndex),Ay.matches.push(f0)}}}),this.options.includeScore&&hy.push(function(Iy,Ay){Ay.score=Iy.score});for(var yy=0,by=_d.length;yy<by;yy+=1){var Ry=_d[yy];if(this.options.id&&(Ry.item=this.options.getFn(Ry.item,this.options.id)[0]),hy.length){for(var Cy={item:Ry.item},jy=0,wy=hy.length;jy<wy;jy+=1)hy[jy](Ry,Cy);_g.push(Cy)}else _g.push(Ry.item)}return _g}},{key:"_log",value:function(){var _d;this.options.verbose&&(_d=console).log.apply(_d,arguments)}}])&&_i(Ac.prototype,qp),Ac}();P.exports=_f},function(P,$,W){function _n(_c,_f){for(var Ac=0;Ac<_f.length;Ac++){var qp=_f[Ac];qp.enumerable=qp.enumerable||!1,qp.configurable=!0,"value"in qp&&(qp.writable=!0),Object.defineProperty(_c,qp.key,qp)}}var _i=W(2),ga=W(3),ba=W(6),Va=function(){function _c(Ac,qp){var _d=qp.location,_g=_d===void 0?0:_d,ny=qp.distance,hy=ny===void 0?100:ny,yy=qp.threshold,by=yy===void 0?.6:yy,Ry=qp.maxPatternLength,Cy=Ry===void 0?32:Ry,jy=qp.isCaseSensitive,wy=jy!==void 0&&jy,Iy=qp.tokenSeparator,Ay=Iy===void 0?/ +/g:Iy,iv=qp.findAllMatches,Ev=iv!==void 0&&iv,v0=qp.minMatchCharLength,Pv=v0===void 0?1:v0,f0=qp.includeMatches,c_=f0!==void 0&&f0;(function(oy,sy){if(!(oy instanceof sy))throw new TypeError("Cannot call a class as a function")})(this,_c),this.options={location:_g,distance:hy,threshold:by,maxPatternLength:Cy,isCaseSensitive:wy,tokenSeparator:Ay,findAllMatches:Ev,includeMatches:c_,minMatchCharLength:Pv},this.pattern=wy?Ac:Ac.toLowerCase(),this.pattern.length<=Cy&&(this.patternAlphabet=ba(this.pattern))}var _f;return(_f=[{key:"search",value:function(Ac){var qp=this.options,_d=qp.isCaseSensitive,_g=qp.includeMatches;if(_d||(Ac=Ac.toLowerCase()),this.pattern===Ac){var ny={isMatch:!0,score:0};return _g&&(ny.matchedIndices=[[0,Ac.length-1]]),ny}var hy=this.options,yy=hy.maxPatternLength,by=hy.tokenSeparator;if(this.pattern.length>yy)return _i(Ac,this.pattern,by);var Ry=this.options,Cy=Ry.location,jy=Ry.distance,wy=Ry.threshold,Iy=Ry.findAllMatches,Ay=Ry.minMatchCharLength;return ga(Ac,this.pattern,this.patternAlphabet,{location:Cy,distance:jy,threshold:wy,findAllMatches:Iy,minMatchCharLength:Ay,includeMatches:_g})}}])&&_n(_c.prototype,_f),_c}();P.exports=Va},function(P,$){var W=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;P.exports=function(_n,_i){var ga=arguments.length>2&&arguments[2]!==void 0?arguments[2]:/ +/g,ba=new RegExp(_i.replace(W,"\\$&").replace(ga,"|")),Va=_n.match(ba),_c=!!Va,_f=[];if(_c)for(var Ac=0,qp=Va.length;Ac<qp;Ac+=1){var _d=Va[Ac];_f.push([_n.indexOf(_d),_d.length-1])}return{score:_c?.5:1,isMatch:_c,matchedIndices:_f}}},function(P,$,W){var _n=W(4),_i=W(5);P.exports=function(ga,ba,Va,_c){for(var _f=_c.location,Ac=_f===void 0?0:_f,qp=_c.distance,_d=qp===void 0?100:qp,_g=_c.threshold,ny=_g===void 0?.6:_g,hy=_c.findAllMatches,yy=hy!==void 0&&hy,by=_c.minMatchCharLength,Ry=by===void 0?1:by,Cy=_c.includeMatches,jy=Cy!==void 0&&Cy,wy=Ac,Iy=ga.length,Ay=ny,iv=ga.indexOf(ba,wy),Ev=ba.length,v0=[],Pv=0;Pv<Iy;Pv+=1)v0[Pv]=0;if(iv!==-1){var f0=_n(ba,{errors:0,currentLocation:iv,expectedLocation:wy,distance:_d});if(Ay=Math.min(f0,Ay),(iv=ga.lastIndexOf(ba,wy+Ev))!==-1){var c_=_n(ba,{errors:0,currentLocation:iv,expectedLocation:wy,distance:_d});Ay=Math.min(c_,Ay)}}iv=-1;for(var oy=[],sy=1,fy=Ev+Iy,Ly=1<<(Ev<=31?Ev-1:30),dy=0;dy<Ev;dy+=1){for(var Zy=0,Qy=fy;Zy<Qy;)_n(ba,{errors:dy,currentLocation:wy+Qy,expectedLocation:wy,distance:_d})<=Ay?Zy=Qy:fy=Qy,Qy=Math.floor((fy-Zy)/2+Zy);fy=Qy;var zv=Math.max(1,wy-Qy+1),Rv=yy?Iy:Math.min(wy+Qy,Iy)+Ev,Hv=Array(Rv+2);Hv[Rv+1]=(1<<dy)-1;for(var Dv=Rv;Dv>=zv;Dv-=1){var _0=Dv-1,m1=Va[ga.charAt(_0)];if(m1&&(v0[_0]=1),Hv[Dv]=(Hv[Dv+1]<<1|1)&m1,dy!==0&&(Hv[Dv]|=(oy[Dv+1]|oy[Dv])<<1|1|oy[Dv+1]),Hv[Dv]&Ly&&(sy=_n(ba,{errors:dy,currentLocation:_0,expectedLocation:wy,distance:_d}))<=Ay){if(Ay=sy,(iv=_0)<=wy)break;zv=Math.max(1,2*wy-iv)}}if(_n(ba,{errors:dy+1,currentLocation:wy,expectedLocation:wy,distance:_d})>Ay)break;oy=Hv}var ow={isMatch:iv>=0,score:sy===0?.001:sy};return jy&&(ow.matchedIndices=_i(v0,Ry)),ow}},function(P,$){P.exports=function(W,_n){var _i=_n.errors,ga=_i===void 0?0:_i,ba=_n.currentLocation,Va=ba===void 0?0:ba,_c=_n.expectedLocation,_f=_c===void 0?0:_c,Ac=_n.distance,qp=Ac===void 0?100:Ac,_d=ga/W.length,_g=Math.abs(_f-Va);return qp?_d+_g/qp:_g?1:_d}},function(P,$){P.exports=function(){for(var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,_i=[],ga=-1,ba=-1,Va=0,_c=W.length;Va<_c;Va+=1){var _f=W[Va];_f&&ga===-1?ga=Va:_f||ga===-1||((ba=Va-1)-ga+1>=_n&&_i.push([ga,ba]),ga=-1)}return W[Va-1]&&Va-ga>=_n&&_i.push([ga,Va-1]),_i}},function(P,$){P.exports=function(W){for(var _n={},_i=W.length,ga=0;ga<_i;ga+=1)_n[W.charAt(ga)]=0;for(var ba=0;ba<_i;ba+=1)_n[W.charAt(ba)]|=1<<_i-ba-1;return _n}},function(P,$){var W=function(ba){return Array.isArray?Array.isArray(ba):Object.prototype.toString.call(ba)==="[object Array]"},_n=function(ba){return ba==null?"":function(Va){if(typeof Va=="string")return Va;var _c=Va+"";return _c=="0"&&1/Va==-1/0?"-0":_c}(ba)},_i=function(ba){return typeof ba=="string"},ga=function(ba){return typeof ba=="number"};P.exports={get:function(ba,Va){var _c=[];return function _f(Ac,qp){if(qp){var _d=qp.indexOf("."),_g=qp,ny=null;_d!==-1&&(_g=qp.slice(0,_d),ny=qp.slice(_d+1));var hy=Ac[_g];if(hy!=null)if(ny||!_i(hy)&&!ga(hy))if(W(hy))for(var yy=0,by=hy.length;yy<by;yy+=1)_f(hy[yy],ny);else ny&&_f(hy,ny);else _c.push(_n(hy))}else _c.push(Ac)}(ba,Va),_c},isArray:W,isString:_i,isNum:ga,toString:_n}}])},eE(tw={exports:{}},tw.exports),tw.exports),nE=(H_=ew)&&H_.__esModule&&Object.prototype.hasOwnProperty.call(H_,"default")?H_.default:H_;ew.Fuse;var d1,Cx=w(function j(k){var P=k.addressList,$=P===void 0?[]:P,W=k.geometries,_n=W===void 0?[]:W,_i=k.entity,ga=_i===void 0?null:_i,ba=k.name,Va=ba===void 0?"":ba,_c=k.icon,_f=_c===void 0?"":_c;v(this,j),this.addressList=$,this.geometries=_n,this.icon=_f,this.entity=ga,this.name=Va}),fA={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},pA=function(){return w(function j(k){v(this,j),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=k,this.init()},[{key:"init",value:function(){var j=this.venueModel.getGeometries().reduce(function(P,$){var W=P;return W[$.getId()]=$,W},{});this.initEntityList(this.venueModel.getOccupant()),this.initIconList(j),this.levels_=this.venueModel.getLevels().map(function(P){return{levelId:P.getId(),levelName:P.getName(),drawingId:P.getDrawing().getId(),drawingName:P.getDrawing().getName()}});var k=[].concat(_l(this.searchListEntities_),_l(this.searchListIcons_));this.searchList_=k.sort(function(P,$){return P.name.localeCompare($.name)}),this.fuseSearch_=new nE(this.searchList_,fA)}},{key:"initEntityList",value:function(){var j=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(function(k){return k.spaceIds?new Cx({geometries:k.space,addressList:k.spaceIds||[],name:k.properties.name||"",entity:k}):null}).filter(function(k){return k!==null});this.searchListEntities_=j}},{key:"initIconList",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.searchListIcons_=Object.values(j).filter(function(k){return k.isIcon()}).map(function(k){var P=k.getIcon();return new Cx({geometries:[k],icon:P,name:k.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var j=this.searchListIcons_.reduce(function(k,P){var $=k;return $[P.name]=P.name,$},{});return Object.keys(j)}},{key:"find",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return j===""?this.searchList_:this.fuseSearch_.search(j)}}])}(),F0=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),Wv={SITE:"indoor.Site",STRUCTURE:"indoor.Structure",OCCUPANT:"indoor.Occupant",SPACE:"indoor.Space",SPACEGROUPS:"indoor.SpaceGroups",TOPOLOGY:"Topology",ADDRESS:"Address",LEVEL:"indoor.Level",LEVELCONNECTOR:"indoor.LevelConnector",ENTRANCE:"indoor.Entrance"},Ix="OCCUPANT_NAMES",Dx="SPACE_NAME",dA="INTERNAL_ADDRESS_SHORT",gA="INTERNAL_ADDRESS",I0="INTERNAL_ADDRESS_LONG",rE="SPACE_TYPE_NAME",kx="SPACE_CATEGORY_NAME",iE="Point",nw="LineString",wv="Polygon",Ky="MultiPoint",oE="MultiLineString",sE="MultiPolygon",g1=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),rw="9999999999999",mA="icons",q="config",_e="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",_s=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"});Object.freeze(I(I(I(I({},_s.THEME,"themeUrls"),_s.THEME_MAP,"themeMapUrl"),_s.PRESETS,"presetsUrl"),_s.SDK_STRINGS,"stringsUrl")),Object.freeze(I(I(I(I(I({},_s.THEME,"themeOverrides"),_s.THEME_MAP,"themeMapOverrides"),_s.PRESETS,"presetOverrides"),_s.SDK_STRINGS,"stringsOverrides"),_s.INPUT_COLORS,"inputColorOverrides")),Object.freeze(I(I(I(I(I(I({},_s.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),_s.SDK_STRINGS,["Standard","SDK","sdk/standard"]),_s.V4_THEME_FAMILY,["modern","standard"]),_s.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),_s.NAV_THEME,["Factory","MapEditor"]),_s.ICON,["Multicolor","Standard","TheBase","Factory"])),Object.freeze((I(I(I(I(I(I(I(I(I(I(d1={},_s.THEME,"Modern"),_s.THEME_MAP,"Standard"),_s.PRESETS,"Standard"),_s.SDK_STRINGS,"Standard"),_s.ICON_FILE,"Standard"),_s.INPUT_COLORS,"Standard"),_s.BASE_MAP_INFO,"Standard"),_s.CONFIG_PROFILE,"factory"),_s.NAV_THEME,"Factory"),_s.NAV_NAME_THEME,"FactoryName"),I(I(I(I(I(I(I(I(d1,_s.NAV_PROP_MAP,"Standard"),_s.NAV_STRINGS,"Standard"),_s.NAV_THEME_MAP,"Standard"),_s.NAV_NAME_THEME_MAP,"StandardName"),_s.V4_THEME_FAMILY,"Standard"),_s.V4_MAPTYPE_THEME,"Standard"),_s.ICON,"Multicolor"),_s.MARKER,"Standard")));var La=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"});Object.freeze(I({},La.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"}));var _u=Object.freeze({ACCOUNT_API:"ACCOUNT_API",DEFAULT_COLLECTION:"DEFAULT_COLLECTION",CATALOG_LAYER:"CATALOG_LAYER"}),ic=Object.freeze(I(I(I({},_u.ACCOUNT_API,{BASE_URL:"https://account.api.here.com/authorization/v1.1/projects/me"}),_u.DEFAULT_COLLECTION,{BASE_URL:"https://config.data.api.platform.here.com/config/v1/catalogs",PARAMS:{CREATED_BY:"created",COLLECTION:"-collection"}}),_u.CATALOG_LAYER,{BASE_URL:"https://interactive.data.api.platform.here.com/interactive/v1/catalogs",MOMDATA_LAYER:"9999999999999",ICON_LAYER:"icons",THEMERULE_LAYER:"config",COLLECTION_LAYER:"layers/9999999999999/search",PARAMS:{FEATURE_TYPE:{KEY:"p.featureType",VALUE:"indoor.Site"}}})),_p=Object.freeze({isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}}),ty=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"});function iy(){}function cy(){cy.init.call(this)}function vy(j){return j._maxListeners===void 0?cy.defaultMaxListeners:j._maxListeners}function zy(j,k,P,$){var W,_n,_i,ga;if(typeof P!="function")throw new TypeError('"listener" argument must be a function');if((_n=j._events)?(_n.newListener&&(j.emit("newListener",k,P.listener?P.listener:P),_n=j._events),_i=_n[k]):(_n=j._events=new iy,j._eventsCount=0),_i){if(typeof _i=="function"?_i=_n[k]=$?[P,_i]:[_i,P]:$?_i.unshift(P):_i.push(P),!_i.warned&&(W=vy(j))&&W>0&&_i.length>W){_i.warned=!0;var ba=new Error("Possible EventEmitter memory leak detected. "+_i.length+" "+k+" listeners added. Use emitter.setMaxListeners() to increase limit");ba.name="MaxListenersExceededWarning",ba.emitter=j,ba.type=k,ba.count=_i.length,ga=ba,typeof console.warn=="function"?console.warn(ga):console.log(ga)}}else _i=_n[k]=P,++j._eventsCount;return j}function Tv(j,k,P){var $=!1;function W(){j.removeListener(k,W),$||($=!0,P.apply(j,arguments))}return W.listener=P,W}function lv(j){var k=this._events;if(k){var P=k[j];if(typeof P=="function")return 1;if(P)return P.length}return 0}function Uv(j,k){for(var P=new Array(k);k--;)P[k]=j[k];return P}iy.prototype=Object.create(null),cy.EventEmitter=cy,cy.usingDomains=!1,cy.prototype.domain=void 0,cy.prototype._events=void 0,cy.prototype._maxListeners=void 0,cy.defaultMaxListeners=10,cy.init=function(){this.domain=null,cy.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new iy,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},cy.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||isNaN(j))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=j,this},cy.prototype.getMaxListeners=function(){return vy(this)},cy.prototype.emit=function(j){var k,P,$,W,_n,_i,ga,ba=j==="error";if(_i=this._events)ba=ba&&_i.error==null;else if(!ba)return!1;if(ga=this.domain,ba){if(k=arguments[1],!ga){if(k instanceof Error)throw k;var Va=new Error('Uncaught, unspecified "error" event. ('+k+")");throw Va.context=k,Va}return k||(k=new Error('Uncaught, unspecified "error" event')),k.domainEmitter=this,k.domain=ga,k.domainThrown=!1,ga.emit("error",k),!1}if(!(P=_i[j]))return!1;var _c=typeof P=="function";switch($=arguments.length){case 1:(function(_f,Ac,qp){if(Ac)_f.call(qp);else for(var _d=_f.length,_g=Uv(_f,_d),ny=0;ny<_d;++ny)_g[ny].call(qp)})(P,_c,this);break;case 2:(function(_f,Ac,qp,_d){if(Ac)_f.call(qp,_d);else for(var _g=_f.length,ny=Uv(_f,_g),hy=0;hy<_g;++hy)ny[hy].call(qp,_d)})(P,_c,this,arguments[1]);break;case 3:(function(_f,Ac,qp,_d,_g){if(Ac)_f.call(qp,_d,_g);else for(var ny=_f.length,hy=Uv(_f,ny),yy=0;yy<ny;++yy)hy[yy].call(qp,_d,_g)})(P,_c,this,arguments[1],arguments[2]);break;case 4:(function(_f,Ac,qp,_d,_g,ny){if(Ac)_f.call(qp,_d,_g,ny);else for(var hy=_f.length,yy=Uv(_f,hy),by=0;by<hy;++by)yy[by].call(qp,_d,_g,ny)})(P,_c,this,arguments[1],arguments[2],arguments[3]);break;default:for(W=new Array($-1),_n=1;_n<$;_n++)W[_n-1]=arguments[_n];(function(_f,Ac,qp,_d){if(Ac)_f.apply(qp,_d);else for(var _g=_f.length,ny=Uv(_f,_g),hy=0;hy<_g;++hy)ny[hy].apply(qp,_d)})(P,_c,this,W)}return!0},cy.prototype.addListener=function(j,k){return zy(this,j,k,!1)},cy.prototype.on=cy.prototype.addListener,cy.prototype.prependListener=function(j,k){return zy(this,j,k,!0)},cy.prototype.once=function(j,k){if(typeof k!="function")throw new TypeError('"listener" argument must be a function');return this.on(j,Tv(this,j,k)),this},cy.prototype.prependOnceListener=function(j,k){if(typeof k!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(j,Tv(this,j,k)),this},cy.prototype.removeListener=function(j,k){var P,$,W,_n,_i;if(typeof k!="function")throw new TypeError('"listener" argument must be a function');if(!($=this._events))return this;if(!(P=$[j]))return this;if(P===k||P.listener&&P.listener===k)--this._eventsCount==0?this._events=new iy:(delete $[j],$.removeListener&&this.emit("removeListener",j,P.listener||k));else if(typeof P!="function"){for(W=-1,_n=P.length;_n-- >0;)if(P[_n]===k||P[_n].listener&&P[_n].listener===k){_i=P[_n].listener,W=_n;break}if(W<0)return this;if(P.length===1){if(P[0]=void 0,--this._eventsCount==0)return this._events=new iy,this;delete $[j]}else(function(ga,ba){for(var Va=ba,_c=Va+1,_f=ga.length;_c<_f;Va+=1,_c+=1)ga[Va]=ga[_c];ga.pop()})(P,W);$.removeListener&&this.emit("removeListener",j,_i||k)}return this},cy.prototype.removeAllListeners=function(j){var k,P;if(!(P=this._events))return this;if(!P.removeListener)return arguments.length===0?(this._events=new iy,this._eventsCount=0):P[j]&&(--this._eventsCount==0?this._events=new iy:delete P[j]),this;if(arguments.length===0){for(var $,W=Object.keys(P),_n=0;_n<W.length;++_n)($=W[_n])!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=new iy,this._eventsCount=0,this}if(typeof(k=P[j])=="function")this.removeListener(j,k);else if(k)do this.removeListener(j,k[k.length-1]);while(k[0]);return this},cy.prototype.listeners=function(j){var k,P=this._events;return P&&(k=P[j])?typeof k=="function"?[k.listener||k]:function($){for(var W=new Array($.length),_n=0;_n<W.length;++_n)W[_n]=$[_n].listener||$[_n];return W}(k):[]},cy.listenerCount=function(j,k){return typeof j.listenerCount=="function"?j.listenerCount(k):lv.call(j,k)},cy.prototype.listenerCount=lv,cy.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var y0="venues-ui-button--active",Z0="venues-ui-button",iw="venues-ui__drawings",DO="data-drawing",U4=function(){return w(function j(k,P,$){var W=this;v(this,j),this.clickHandler=$,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",iw);var _n=document.createElement("div");_n.setAttribute("class","trigger ".concat(Z0));var _i=document.createElement("div");_i.setAttribute("class","arrow arrow--down"),_n.appendChild(_i),_n.addEventListener("click",function(){_n.classList.toggle(y0),W.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(_n),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),P&&this.update(P),k.appendChild(this.containerDiv)},[{key:"drawButton",value:function(j,k,P){var $=this,W=document.createElement("div"),_n=Number(P)===Number(j);W.setAttribute("class",_n?"".concat(Z0," ").concat(y0):Z0),W.innerHTML=k,W.setAttribute(DO,j),W.addEventListener("click",function(){$.switch(j),$.clickHandler(j)}),this.containerButtons.appendChild(W)}},{key:"switch",value:function(j){this.containerButtons.querySelectorAll(".".concat(iw," .").concat(y0)).forEach(function(P){return P.setAttribute("class",Z0)});var k=this.containerButtons.querySelector("[".concat(DO,"='").concat(j,"']"));k&&k.setAttribute("class","".concat(Z0," ").concat(y0))}},{key:"update",value:function(j){var k=this;this.containerButtons.innerHTML="";var P=function($){var W=$.getDrawings();return new Map(W.map(function(_n){var _i=_n.getDisplayName()||_n.getName();return[_n.getId(),_i]}))}(j);P.size>0&&P.forEach(function($,W){return k.drawButton(W,$,j.getRootDrawing().getId())})}}])}(),kO="venues-ui-button--active",$_="venues-ui-button",MO="data-level",OO="venues-ui__levels",z4=function(){return w(function j(k,P,$,W){var _n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4;v(this,j),this.clickHandler=W,this.levelButtonCount=_n,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(OO)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),P&&this.update(P,$),k.appendChild(this.containerUI)},[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(j,k){var P=this,$=document.createElement("div");$.innerHTML=k,$.style.fontSize="".concat(Math.max(Math.min(28.8/k.length,11.52),10),"px"),$.style.display="block",$.setAttribute("class",$_),$.setAttribute(MO,j),$.addEventListener("click",function(){P.switch(j),P.clickHandler(j)}),this.containerButtons.appendChild($)}},{key:"drawScrollButtons",value:function(){var j=this;this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat($_," ").concat($_,"--up"));var k=document.createElement("div");k.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(k),this.buttonScrollUp.addEventListener("click",function(){return j.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat($_," ").concat($_,"--down"));var P=document.createElement("div");P.setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(P),this.buttonScrollDown.addEventListener("click",function(){return j.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,k=Array.from(this.containerButtons.querySelectorAll(".".concat($_))).reverse(),P=[];if(j>=0){this.currentScrollIndex=Math.min(this.currentScrollIndex+j,k.length-this.levelButtonCount);var $=Math.min(this.currentScrollIndex,k.length-this.levelButtonCount),W=Math.min(this.currentScrollIndex+this.levelButtonCount,k.length);P=k.slice($,W)}else if(j<0){this.currentScrollIndex=Math.max(this.currentScrollIndex+j,0);var _n=Math.max(0,this.currentScrollIndex),_i=Math.min(k.length,this.currentScrollIndex+this.levelButtonCount);P=k.slice(_n,_i)}k.forEach(function(ga){P.indexOf(ga)!==-1?ga.style.display="block":ga.style.display="none"}),this.buttonScrollDown&&(this.currentScrollIndex===0?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===k.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(j){this.containerButtons.querySelectorAll(".".concat(kO)).forEach(function(W){return W.setAttribute("class",$_)});var k=this.containerButtons.querySelector(".".concat(OO," [").concat(MO,"='").concat(j,"']"));if(k){var P=Array.from(this.containerButtons.querySelectorAll(".".concat($_))).reverse();k.setAttribute("class","".concat($_," ").concat(kO));var $=P.indexOf(k);($<this.currentScrollIndex||$>=this.currentScrollIndex+4)&&this.scroll($-this.currentScrollIndex)}}},{key:"update",value:function(j,k){var P=this,$=function(){return new Map((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(function(_n){return[_n.getZIndex(),_n.getShortName()||_n.getDisplayName()||_n.getName()]}))}(function(_n,_i){if(_i===g1.FLATTEN){var ga=_n.getVenueModel().getLevelMapFlattenedByZIndex_();return Object.values(ga).map(function(ba){return ba[0]})}return _n.getLevels()}(j,k).sort(function(_n,_i){return _i.getZIndex()-_n.getZIndex()})),W=j.getMainLevel().getZIndex();this.clear(),$.forEach(function(_n,_i){return P.drawLevelButton(_i,_n)}),$.size>this.levelButtonCount&&($.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from($).reverse().findIndex(function(_n){return _n[0]===W}),$.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(W)}}])}(),mI=function(){return w(function j(k,P){v(this,j),this.baseTheme=k,this.metaInformation=P,this.labelStyleMap={},this.styleMap={},this.setStyleMap()},[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var j=0,k=Object.entries(this.baseTheme.spaceRules);j<k.length;j++){var P=_a(k[j],2),$=P[0],W=P[1],_n=W.properties.behavioralAppearance.default.styleProperties,_i=W.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[$]=_n,this.labelStyleMap[$]=_i,W.spaceTypes)for(var ga=0,ba=Object.entries(W.spaceTypes);ga<ba.length;ga++){var Va=_a(ba[ga],2),_c=Va[0],_f=Va[1],Ac=_f.behavioralAppearance.default.styleProperties,qp=_f.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat($,"_").concat(_c)]=Ac&&Object.keys(Ac)!==0?Ac:_n,this.labelStyleMap["".concat($,"_").concat(_c)]=qp&&Object.keys(qp)!==0?qp:_i}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(j){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[j]:null}},{key:"getLabelStyle",value:function(j){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[j]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}])}(),NO=function(){return w(function j(){v(this,j),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}},[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(j){var k,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],$=this.getTheme(),W=mI.getGeometryDefaultStyle(),_n=j.properties.spaceType,_i=j.properties.spaceCategory,ga=_i;return _n&&(ga="".concat(_i,"_").concat(_n)),(k=$.getGeometryStyle(ga))&&!P||(k=W),{m:k.fill&&k.fill.toLowerCase()||"#fff",w:k.strokeWidth/10||.1,o:k.stroke&&k.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(j){this.getTheme();var k=mI.getLabelDefaultStyle();return{fill:k.stroke,zmin:k.zmin}}}])}(),aE=Math.PI/180,H4=180/Math.PI,l_=function(){function j(){v(this,j)}return w(j,null,[{key:"toRadians",value:function(k){return k*aE}},{key:"toDegrees",value:function(k){return k*H4}},{key:"getBoundingBox",value:function(k,P){var $=[];switch(k){case iE:$=[P,P];break;case Ky:case nw:$=P;break;case oE:case wv:$=P.reduce(function(W,_n){return W.concat(_n)},[]);break;case sE:$=P.reduce(function(W,_n){return W.concat(_n)},[]).reduce(function(W,_n){return W.concat(_n)},[])}return j.getBoundingBoxVertices($)}},{key:"getInverseTransform",value:function(k){var P=k[0]*k[3]-k[1]*k[2],$=[k[3]/P,-k[1]/P,-k[2]/P,k[0]/P,0,0];return $[4]=-($[0]*k[4]+$[2]*k[5]),$[5]=-($[1]*k[4]+$[3]*k[5]),$}},{key:"applyTransformToPoint",value:function(k,P){return[P[0]*k[0]+P[1]*k[2]+k[4],P[0]*k[1]+P[1]*k[3]+k[5]]}},{key:"transformProduct",value:function(k,P){var $=[0,0,0,0,0,0];return $[0]=P[0]*k[0]+P[2]*k[1],$[1]=P[1]*k[0]+P[3]*k[1],$[2]=P[0]*k[2]+P[2]*k[3],$[3]=P[1]*k[2]+P[3]*k[3],$[4]=P[0]*k[4]+P[2]*k[5]+P[4],$[5]=P[1]*k[4]+P[3]*k[5]+P[5],$}},{key:"convertLonLatToMerc",value:function(k){var P=k[0]*aE,$=k[1]*aE,W=Math.sin($);return[.5+P/(2*Math.PI),.5-Math.log((1+W)/(1-W))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(k){var P=2*Math.PI*(k[0]-.5),$=Math.atan(Math.sinh(2*Math.PI*(.5-k[1])));return[P/aE,$/aE]}},{key:"getTransformScale",value:function(k){return Math.sqrt(k[0]*k[3]-k[1]*k[2])}},{key:"getLonLatToMercTransform",value:function(k){var P=[.002777777777777778,0,0,-1/(360*Math.cos(k[1]*aE)),0,0],$=j.applyTransformToPoint(P,k),W=j.convertLonLatToMerc(k);return P[4]=W[0]-$[0],P[5]=W[1]-$[1],P}},{key:"getNatToMercTransform",value:function(k){var P=[k[4],k[5]],$=j.getLonLatToMercTransform(P);return j.transformProduct(k,$)}},{key:"convertMxMy2LonLat",value:function(k,P){return k.length&&P.length?j.applyTransformToPoint(k,P):[]}},{key:"convertLonLat2MxMy",value:function(k,P){if(!k.length||!P.length)return[];var $=j.getInverseTransform(k);return j.applyTransformToPoint($,P)}},{key:"getFlattenedQuadraticBezierCurve",value:function(k,P,$){var W=[],_n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10;_n<1&&(_n=6);for(var _i=0;_i<=_n;_i+=1){var ga=_i/_n,ba=(1-ga)*(1-ga),Va=2*ga*(1-ga),_c=ga*ga,_f=ba*k[0]+Va*P[0]+_c*$[0],Ac=ba*k[1]+Va*P[1]+_c*$[1];W.push([_f,Ac])}return W}},{key:"getFlattenedCubicBezierCurve",value:function(k,P,$,W){var _n=[],_i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:10;_i<1&&(_i=6);for(var ga=0;ga<=_i;ga+=1){var ba=ga/_i,Va=(1-ba)*(1-ba)*(1-ba),_c=3*ba*(1-ba)*(1-ba),_f=3*ba*ba*(1-ba),Ac=ba*ba*ba,qp=Va*k[0]+_c*P[0]+_f*$[0]+Ac*W[0],_d=Va*k[1]+_c*P[1]+_f*$[1]+Ac*W[1];_n.push([qp,_d])}return _n}},{key:"getRectangularCoordinatesOfLabelArea",value:function(k,P){var $=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],W=_a(k,6),_n=W[0],_i=W[1],ga=W[2],ba=W[3],Va=W[5],_c=j.getDeltaLonLatForMeterAtGivenLonLat(_n,_i),_f=k[4];return $?(Va&&(_f*=-1),P!=null&&(_f=(_f+=P<0?2*Math.PI+P:P)<0?2*Math.PI+_f:_f)):_f=0,j.getRectVerticesFromSignatureRectRepresentation([_n,_i],{xLength:ga,yLength:ba},_f,_c)}},{key:"getRotatedPoint",value:function(k,P){var $=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0],_n=Math.cos(P),_i=Math.sin(P),ga=k[0]-W[0],ba=k[1]-W[1],Va=[];return[(Va=$?[ga*_n+ba*_i,ba*_n-ga*_i]:[ga*_n-ba*_i,ba*_n+ga*_i])[0]+W[0],Va[1]+W[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(k,P,$,W){var _n=P.xLength,_i=P.yLength,ga=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],ba=_a(k,2),Va=ba[0],_c=ba[1],_f=_n/2,Ac=_i/2,qp=_a(W,2),_d=qp[0],_g=qp[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(ny){return[ny[0]*_f,ny[1]*Ac]}).map(function(ny){return j.getRotatedPoint(ny,$,ga)}).map(function(ny){return[ny[0]*_d,ny[1]*_g]}).map(function(ny){return[ny[0]+Va,ny[1]+_c]})}},{key:"getScaleFactorForRectInSpace",value:function(k,P,$,W){var _n=k/$,_i=P/W;return _n>_i?_i:_n}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(k,P){var $=6371e3;return[1/$*(180/Math.PI)/Math.cos(P*Math.PI/180),1/$*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return k.reduce(function($,W){return[[Math.min(W[0],$[0][0]),Math.min(W[1],$[0][1])],[Math.max(W[0],$[1][0]),Math.max(W[1],$[1][1])]]},P)}},{key:"isPointInBoundingBox",value:function(k,P){if(k&&P){var $=_a(k,2),W=$[0],_n=$[1],_i=_a(P,2),ga=_a(_i[0],2),ba=ga[0],Va=ga[1],_c=_a(_i[1],2),_f=_c[0],Ac=_c[1];return W<=_f&&W>=ba&&_n<=Ac&&_n>=Va}}},{key:"isPointOnLineSegment",value:function(k,P,$){var W=_a(k,2),_n=W[0],_i=W[1],ga=_a(P,2),ba=ga[0],Va=ga[1],_c=_a($,2),_f=_c[0],Ac=_c[1],qp=(Va-_i)*(Ac-_i)<=0;return ba===_f?ba===_n&&qp:!(_i-Ac!=(Ac-Va)/(_f-ba)*(_n-_f)||!qp)}},{key:"rayIntersectLineSegment",value:function(k,P,$){var W=_a(k,2),_n=W[0],_i=W[1],ga=_a(P,2),ba=ga[0],Va=ga[1],_c=_a($,2),_f=_c[0],Ac=_c[1];if(ba===_f)return!1;var qp=(_n-ba)/(_f-ba);return qp>=0&&qp<1&&(Ac-Va)*qp+Va>_i}},{key:"isPointInPolygon",value:function(k,P){var $=_a(k,2),W=$[0],_n=$[1],_i=P.length;if(_i<3)return!1;var ga=0,ba=P[_i-1];return P.forEach(function(Va){j.rayIntersectLineSegment([W,_n],ba,Va)&&(ga+=1),ba=Va}),ga%2!=0}},{key:"isPointOnLineString",value:function(k,P){var $=_a(k,2),W=$[0],_n=$[1],_i=P.length;if(_i<2)return!1;for(var ga=P[_i-1],ba=0;ba<_i;ba+=1){var Va=P[ba];if(j.isPointOnLineSegment([W,_n],ga,Va))return!0;ga=P[ba]}return!1}},{key:"getAreaOfPolygon",value:function(k){var P=k.length;if(P<3)return null;var $=0,W=k[P-1];return k.forEach(function(_n){var _i,ga,ba,Va,_c,_f;$+=.5*(_i=_n,ga=_a(W,2),ba=ga[0],Va=ga[1],_c=_a(_i,2),_f=_c[0],ba*_c[1]-Va*_f),W=_n}),$}},{key:"getDistanceBetweenPoints",value:function(k,P){var $=_a(k,2),W=$[0],_n=$[1],_i=_a(P,2),ga=W-_i[0],ba=_n-_i[1];return Math.sqrt(ga*ga+ba*ba)}}])}(),PO=function(){return w(function j(){v(this,j),this.spaceRules={}},null,[{key:"getDataEntriesOne",value:function(j,k){var P=[j,""];if(k!==null&&Array.isArray(k))P[1]=k.toString();else if(k!==null&&g(k)==="object"){var $=Object.entries(k);if($.length>0){var W=this.getDataEntriesOne($[0][0],$[0][1]);P[0]="".concat(P[0],".").concat(W[0]),P[1]=W[1]}}else P[1]=k;return P}},{key:"getDataEntriesAll",value:function(j){for(var k=[],P=0,$=Object.entries(j);P<$.length;P++){var W=_a($[P],2),_n=W[0],_i=W[1],ga=this.getDataEntriesOne(_n,_i);k.push(ga)}return k}},{key:"doFindComboMatch",value:function(j,k){var P="";if(j&&j.configuration&&j.configuration.combinations)for(var $=this.getDataEntriesAll(k),W=Object.entries(j.configuration.combinations),_n=0,_i=function(){var Va=ba[ga],_c=Object.keys(Va[1]).filter(function(_f){return $.some(function(Ac){return _f===Ac[0]&&Va[1][_f]===Ac[1]})});_c.length===Object.keys(Va[1]).length&&_c.length>_n&&(P=Va[0],_n=_c.length)},ga=0,ba=W;ga<ba.length;ga++)_i();return P}},{key:"getIconFromCombinations",value:function(j,k){if(j&&j.configuration.combinations&&k&&Object.keys(k).length>0&&j.behavioralAppearance.combinations&&Object.keys(j.behavioralAppearance.combinations).length>0){var P=this.doFindComboMatch(j,k);if(P===""||!j.behavioralAppearance.combinations[P].labelIcon)return"";if(j.behavioralAppearance.combinations&&j.behavioralAppearance.combinations[P]&&j.behavioralAppearance.combinations[P].labelIcon)return j.behavioralAppearance.combinations[P].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(j,k){if(k.spaceTypes&&k.spaceTypes[j])return k.spaceTypes[j]}},{key:"findCategory",value:function(j){if(this.spaceRules[j])return this.spaceRules[j]}},{key:"setSpaceRules",value:function(j){this.spaceRules=j}},{key:"getSpaceIcon",value:function(j,k,P){var $="",W=this.findCategory(k);if(W){var _n=this.findSpace(j,W);if(_n){var _i="";P&&(_i=this.getIconFromCombinations(_n,P)),_i&&_i!==""?$=_i:_n.behavioralAppearance.default.labelIcon?$=_n.behavioralAppearance.default.labelIcon.referenceUri:W.properties.behavioralAppearance.default.labelIcon&&($=W.properties.behavioralAppearance.default.labelIcon.referenceUri)}}return $}}])}(),B0=function(){return w(function j(){v(this,j),this.themeRule={},this.svgList={},this.defaultLang="ENG"},null,[{key:"getNumberFromAlphaNumeric",value:function(j){try{var k=j.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(k,10)}catch{return null}}},{key:"extractNumFromSting",value:function(j){try{var k=j.replace(/[^0-9]/g,"");return parseInt(k,10)}catch{return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(j)}}},{key:"getVenueId",value:function(j){if(typeof j!="number"){var k=j.substr(j.length-6);return parseInt(k,10)}return j}},{key:"getStringFormatIdentifier",value:function(j){return typeof j=="number"||j.length<13?"indoormap-00000000-0000-4000-a000-".concat(j.toString().padStart(12,"0")):j}},{key:"setSite",value:function(j,k){var P=this.getName(j),$={id:this.getStringFormatIdentifier(k),location:j.referencePoint,properties:j.properties,geometry:j.geometry,map_version:j.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(k),obj_type:"CommunityMap"};return $.properties.name=P,$.properties.display_name=P,$}},{key:"setEntrance",value:function(j){var k=this.themeRule.entranceRules.default.labelIcon.referenceUri,P=this.extractNumFromSting(j.id),$=this.getName(j),W=j.properties;return W.icon=!0,W.svg=this.svgList[k.toLowerCase()],W.name=$||"entrance",W.display_name=$||"entrance",W.level={id:j.properties.level.id},{id:j.id,levelId:j.properties.level.id,momType:Wv.ENTRANCE,geometry:j.geometry,location:j.geometry,properties:W,identifier:P,label_area:[j.referencePoint.coordinates[0],j.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(j){var k=this.extractNumFromSting(j.id),P=this.getName(j),$=j.properties;return $.is_root=j.properties.drawOrder===0,$.display_name=P,$.map_type=j.properties.structureType,$.name=P,{id:j.id,obj_type:"Drawing",identifier:k,properties:$}}},{key:"getNameByPriority",value:function(j,k){for(var P=this,$="",W=function(ga){return ga.nameType==="OFFICIAL"&&ga.languageCode&&ga.languageCode===P.defaultLang||ga.nameType==="OFFICIAL"},_n=0;_n<j.length;_n++){var _i=j[_n];if(W(_i)&&(k&&k===_i.nameType||!k)){$=_i.name;break}if(_i.nameType==="ABBREVIATION"&&(k&&k===_i.nameType||!k)){$=_i.name;break}if(_i.nameType==="UNCLASSIFIED"&&(k&&k===_i.nameType||!k)){$=_i.name;break}if(!_i.nameType&&_i.name){$=_i.name;break}}return $}},{key:"getName",value:function(j,k){return j.properties&&j.properties.names?this.getNameByPriority(j.properties.names,k):j.properties.placeProperties&&j.properties.placeProperties&&j.properties.placeProperties.names?this.getNameByPriority(j.properties.placeProperties.names,k):j.properties.locationDetails&&j.properties.locationDetails[0]&&j.properties.locationDetails[0].names?this.getNameByPriority(j.properties.locationDetails[0].names,k):""}},{key:"setLevel",value:function(j){var k=this.extractNumFromSting(j.id),P=j.properties.names,$=j.properties,W=j.geometry;return $["short name"]=this.getNameByPriority(P,P&&P.length!==1?"ABBREVIATION":""),$.name=this.getNameByPriority(P,P&&P.length!==1?"ABBREVIATION":""),{id:j.id,obj_type:"Level",identifier:k,properties:$,geometry:W}}},{key:"setLevelConnector",value:function(j){var k=this.extractNumFromSting(j.id);return{id:j.id,obj_type:"LevelConnector",properties:j.properties,geometry:j.geometry,identifier:k,location:j.geometry}}},{key:"setOccupant",value:function(j){var k=this.getName(j),P=this.extractNumFromSting(j.id),$=j.properties;return $.occupantName=k,$.email=j.properties.placeProperties&&j.properties.placeProperties.contacts&&j.properties.placeProperties.contacts.find(function(W){return W.contactType==="EMAIL"})&&j.properties.placeProperties.contacts.find(function(W){return W.contactType==="EMAIL"}).value,$.name=k,$.tags=j.properties.attributes&&j.properties.attributes.tags,{geometry:j.geometry,id:j.id,obj_type:"Geometry",properties:$,identifier:P,spaceIds:j.properties.spaces?j.properties.spaces:[],type:"Feature",momType:Wv.OCCUPANT}}},{key:"getIcon",value:function(j){var k=!1,P="";return this.svgList[j]&&(k=!0,P=this.svgList[j]),{icon:k,svg:P}}},{key:"setSpace",value:function(j){var k=PO.getSpaceIcon(j.properties.spaceType,j.properties.spaceCategory,j.properties.spaceTypeProperties),P=this.getName(j),$=this.getIcon(k),W=$.icon,_n=$.svg,_i=this.extractNumFromSting(j.id),ga=(j.properties.level.id.includes("out"),j.properties.level.id),ba=j.properties;ba.spaceName=P,ba[j.properties.spaceCategory]=j.properties.spaceType,ba.spaceType=j.properties.spaceType,ba.spaceCategory=j.properties.spaceCategory,ba.icon=W,ba.svg=_n;var Va={geometry:j.geometry,id:j.id,levelId:ga,label_area:[j.referencePoint.coordinates[0],j.referencePoint.coordinates[1],50,50,180],location:j.referencePoint,obj_type:"Geometry",identifier:_i,properties:ba,momType:Wv.SPACE,type:"Feature"};return j.properties.spaceAddress&&j.properties.spaceAddress.id&&(Va.addressId=j.properties.spaceAddress.id),Va}},{key:"setSpaceGroups",value:function(j){var k=this.extractNumFromSting(j.id);return{id:j.id,obj_type:"SpaceGroups",properties:j.properties,geometry:j.geometry,location:j.referencePoint,identifier:k}}},{key:"setTopology",value:function(j){var k=this.extractNumFromSting(j.id);return{id:j.id,obj_type:"Topology",properties:j.properties,geometry:j.geometry,identifier:k}}},{key:"setAddress",value:function(j){var k=this.extractNumFromSting(j.id),P=this.getName(j),$=j.properties;return $.addressName=P,$.name=P,{id:j.id,properties:$,obj_type:"Address",identifier:k}}},{key:"manageSvgDimensions",value:function(j){for(var k={},P=0,$=Object.entries(j);P<$.length;P++){var W=_a($[P],2),_n=W[0],_i=W[1];if(typeof _i=="string"){var ga=_i.indexOf("<g")!==-1&&_i.indexOf("<g")||_i.indexOf("<p"),ba=_i.indexOf("</s");if(ga&&ba){var Va=_i.substring(ga-1,ba-1);k[_n]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(Va,"</svg>")}}}return k}},{key:"getSiteBoundingBox",value:function(j){if(j){var k=_a(l_.getBoundingBox(j.geometry.type,j.geometry.coordinates),2),P=k[0],$=k[1];if(P)return"".concat(P[0],",").concat(P[1],",").concat($[0],",").concat($[1])}return"null, null, null, null"}}])}(),Mx=function(){return w(function j(){v(this,j)},null,[{key:"get",value:function(j){return fetch(j,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{method:"GET"}).then(function(k){return k.ok?k.json():Promise.reject(new Error("Call failed for ".concat(j," : ").concat(k.status," ").concat(k.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(j){return typeof j=="number"?"indoormap-00000000-0000-4000-a000-".concat(j.toString().padStart(12,"0")):j.includes("indoormap")?j:"indoormap-00000000-0000-4000-a000-".concat(j.padStart(12,"0"))}},{key:"getConfigUrl",value:function(j,k,P){var $=P.apiKey,W=P.url,_n=P.token,_i=P.hrn,ga={method:"GET",mode:"cors",cache:"default"},ba="".concat(W||_e,"/").concat(_i),Va="";return k===F0.SITE&&(Va="".concat(ba,"/layers/").concat(rw,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(j),"'")),k===F0.IMAGES&&(Va="".concat(ba,"/layers/").concat(mA,"/features/svg")),k===F0.Theme&&(Va="".concat(ba,"/layers/").concat(q,"/features/indoorMapRules")),_n?ga.headers={Authorization:"Bearer ".concat(_n)}:Va=Va.concat("".concat(k===F0.SITE?"&":"?","apiKey=").concat($)),this.get(Va,ga)}},{key:"getMomData",value:function(j,k){var P=k.apiKey,$=k.url,W=k.token,_n=k.hrn,_i={method:"GET",mode:"cors",cache:"default"},ga="".concat($||_e,"/").concat(_n),ba=j&&j.features&&j.features.find(function(qp){return qp.momType===Wv.SITE}),Va=B0.getSiteBoundingBox(ba),_c=[Wv.TOPOLOGY,Wv.LEVELCONNECTOR],_f=Object.values(Wv).filter(function(qp){return!_c.includes(qp)}).join(),Ac="".concat(ga,"/layers/").concat(rw,"/bbox?bbox=").concat(Va,"&limit=100000&f.momType=").concat(_f);return W?_i.headers={Authorization:"Bearer ".concat(W)}:Ac=Ac.concat("&apiKey=".concat(P)),{mom:this.get(Ac,_i),site:ba}}},{key:"getDefaultCollection",value:function(j){var k=j.token,P=ic[_u.DEFAULT_COLLECTION],$=P.PARAMS,W=P.BASE_URL,_n=encodeURI("".concat(W,"?sortBy=").concat($.CREATED_BY,"&q=").concat($.COLLECTION));if(k){var _i={method:"GET",headers:{Authorization:"Bearer ".concat(k)}};return this.get(_n,_i)}return Promise.reject(new Error("Please provide valid token"))}},{key:"getProjectAccountDetails",value:function(j){var k=j.token,P=ic[_u.ACCOUNT_API].BASE_URL;if(k){var $={method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(k)}};return this.get(P,$)}return Promise.reject(new Error("Please provide valid token"))}},{key:"fetchIndoorMapList",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=j.hrn,P=j.url,$=ic[_u.CATALOG_LAYER],W=$.PARAMS,_n=$.COLLECTION_LAYER;if(k){var _i=encodeURI("".concat(P||_e,"/").concat(k,"/").concat(_n,"?").concat(W.FEATURE_TYPE.KEY,"=").concat(W.FEATURE_TYPE.VALUE)),ga=this.createBaseUrl(_i,ty.GET,{},j),ba=ga.URL,Va=ga.options;return this.get(ba,Va)}return Promise.reject(new Error("Please provide valid hrn"))}},{key:"createBaseUrl",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ty.GET,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},$=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},W=$.token,_n=$.apiKey,_i=j,ga={method:k,mode:"cors"};return W?ga.headers=h({Authorization:"Bearer ".concat(W)},P):_i=j.concat("&apiKey=".concat(_n)),{URL:_i,options:ga}}}])}(),Ox=function(){function j(){v(this,j)}return w(j,null,[{key:"isPointOnGeoJSONLineString",value:function(k,P){var $=!1;if(P&&P.length>1){for(var W=0,_n=0,_i=1;_i<P.length;_i+=1)if(W=P[_i-1],_n=P[_i],l_.isPointOnLineSegment(k,W,_n)){$=!0;break}}return $}},{key:"isPointOnGeoJSONMultiLineString",value:function(k,P){for(var $=!1,W=0;W<P.length;W+=1)if(j.isPointOnGeoJSONLineString(k,P[W])){$=!0;break}return $}},{key:"isPointInsideGeoJSONPolygon",value:function(k,P){var $=!1;if(l_.isPointInPolygon(k,P[0])&&($=!0),$){for(var W=1;W<P.length;W+=1)if(l_.isPointInPolygon(k,P[W])){$=!1;break}}return $}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(k,P){for(var $=P.length,W=0;W<$;W+=1)if(j.isPointInsideGeoJSONPolygon(k,P[W]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(k,P){for(var $=arguments.length>2&&arguments[2]!==void 0&&arguments[2],W=[],_n=P.filter(function(ba){return l_.isPointInBoundingBox(k,ba.getBoundingBox())}),_i=0;_i<_n.length;_i+=1){var ga=_n[_i];if(ga.isPointInsideGeometry(k,!0)&&(W.push(ga),!$))break}return W.sort(function(ba,Va){return Va.getZIndex()-ba.getZIndex()})}}])}(),$4=function(){return w(function j(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=arguments.length>1?arguments[1]:void 0,$=arguments.length>2?arguments[2]:void 0;v(this,j),this.id=k.id,this.properties=k.properties||{},this.labelArea=k.label_area||[],this.geometry=k.geometry||{},this.location=k.location||{},this.address=k.address||{},this.level=P,this.zIndex=$,this.spaceId=k.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=k},[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var j=this.getType(),k=this.getCoordinates(),P=[];switch(j){case iE:P=[k,k];break;case Ky:case nw:P=k;break;case oE:case wv:P=k.reduce(function($,W){return $.concat(W)},[]);break;case sE:P=k.reduce(function($,W){return $.concat(W)},[]).reduce(function($,W){return $.concat(W)},[])}return l_.getBoundingBoxVertices(P)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(j){var k,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],$=!1;switch(this.getType()){case iE:k=this.getLabelArea()&&l_.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),$=l_.isPointInPolygon(j,k);break;case Ky:break;case nw:$=P&&Ox.isPointOnGeoJSONLineString(j,this.getCoordinates());break;case oE:$=P&&Ox.isPointOnGeoJSONMultiLineString(j,this.getCoordinates());break;case wv:$=Ox.isPointInsideGeoJSONPolygon(j,this.getCoordinates());break;case sE:$=Ox.isPointInsideGeoJSONMultiPolygon(j,this.getCoordinates())}return $}},{key:"highlight",value:function(){var j=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],k=arguments.length>1?arguments[1]:void 0;this.state_.isHighlighted=j,this.state_.highlightedStyle=j?k:{}}},{key:"isHighlighted",value:function(){return!!this.state_.isHighlighted}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return h({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}])}(),G4=function(){return w(function j(k,P){var $=this;v(this,j),this.id=k&&k.id,this.properties=k&&k.properties,this.zIndexCount=0,this.geometries=k&&k.features&&Object.values(k.features).reduce(function(W,_n){return W[[_n.id]]=new $4(_n,$,_n.properties.drawOrder),W},{}),this.drawing=P,this.levelData=k},[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(j){return j.toJSON()})}},{key:"getGeometryById",value:function(j){return this.geometries[j]}},{key:"getGeometries",value:function(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(j,k){return k.getZIndex()-j.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(j,k){return j.getZIndex()-k.getZIndex()})}},{key:"getGeometriesByAddress",value:function(j){return Object.values(this.geometries).filter(function(k){return k.address&&k.address.properties&&k.address.properties.name&&k.address.properties.name===j})}},{key:"isMain",value:function(){return!!this.properties.isMain}}])}(),q4=function(){return w(function j(k){var P=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],_n=arguments.length>3?arguments[3]:void 0;v(this,j),this.venueModel=_n,this.levels=W.map(function(_i){return new G4(_i,P)}),this.structure=k,this.id=k&&k.id,this.properties=$},[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return!!this.properties.is_root}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var j=_a(l_.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2),k=j[0],P=j[1];if(k)return[P[1],k[0],k[1],P[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(j){return this.getGeometries().find(function(k){return k.getId()===j||k.getIdentifier()===j})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(j){return j.getGeometries()})}},{key:"getLevelById",value:function(j){return this.levels.find(function(k){return k.getId()===j||k.getIdentifier()===j})}},{key:"getLevelByZIndex",value:function(j){return this.levels.find(function(k){return k.getZIndex()===j})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(j){return j.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}])}(),W4=g1.STANDARD,RO=function(){return w(function j(k){var P=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new NO;v(this,j),this.metaInformation_=$,this.momStructure=k,this.id=k&&k.site&&k.site.id,this.location=k&&k.site&&k.site.location||{},this.properties=k&&k.site&&h({},k.site.properties),this.drawings=k&&k.structure&&Object.values(k.structure).map(function(W){var _n=k.getStructureWiseGeometry(W.id);return new q4(W,W.properties,Object.values(_n),P)})},[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||W4}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var j=_a(l_.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2),k=j[0],P=j[1];if(k)return[P[1],k[0],k[1],P[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(j){return this.getGeometries().find(function(k){return k.getId()===j||k.getIdentifier()===j})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(j,k){return j.getZIndex()-k.getZIndex()}).flatMap(function(j){return j.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(j){var k=this,P=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],$=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).map(function(W){return k.getLevelById(W)});return $.length===0&&($=this.drawings.filter(function(W){var _n=W.getBoundingBox();return l_.isPointInBoundingBox(j,_n)}).flatMap(function(W){return W.getLevels()})),Ox.getGeometriesByLonLat(j,$.flatMap(function(W){return W.getGeometries(!0)}),P)}},{key:"getDrawingById",value:function(j){return this.drawings.find(function(k){return k.getId()===j||k.getIdentifier()===j})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(j){return j.isRoot()})}},{key:"getLevelById",value:function(j){return this.getLevels().find(function(k){return k.getId()===j||k.getIdentifier()===j})}},{key:"getLevelsByZIndex",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getLevels().filter(function(k){return Number(k.getZIndex())===Number(j)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(j){return j.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){var j=this.getLevels().reduce(function(k,P){var $=P.getZIndex(),W=k;return W[$]||(W[$]=[]),W[$].push(P),W},{});return j}},{key:"getOccupant",value:function(){var j=this.momStructure.occupant;return Object.values(j)}}])}(),Y4=function(){return w(function j(k){v(this,j),this.theme=k&&k.theme,this.level=k&&k.level,this.site=k&&k.site,this.spaces=k&&k.spaces,this.address=k&&k.address,this.levelConnector=k&&k.levelConnector,this.topology=k&&k.topology,this.entrance=k&&k.entrance,this.occupant=k&&k.occupant,this.structure=k&&k.structure,this.spaceGroups=k&&k.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=k&&k.levelStructureMapping,this.outdoorLevelMapping=k&&k.outdoorLevelMapping||{},this.labelTextPreference=k&&k.labelTextPreference||null},[{key:"setSpaceWithLevel",value:function(){var j=this;this.spaces&&Object.values(this.spaces).forEach(function(k){var P="";k.addressId&&(P=j.address&&j.address[k.addressId]&&j.address[k.addressId].properties.addressName);var $=k.properties;$.addressName=P;var W=j.getLabelAsPerPreference(h(h({},k),{},{properties:$})),_n=k.properties;_n.name=W,_n.display_name=W,k.properties.icon&&(_n.name=k.id,_n.display_name=k.id);var _i=k;_i.properties=_n,_i.address=j.address[k.addressId],j.spaces[k.id]=k;var ga=k.levelId;j.outdoorLevelMapping[ga]&&(ga=j.outdoorLevelMapping[ga]),j.levelWiseGeometry[ga]||(j.levelWiseGeometry[ga]={}),j.levelWiseGeometry[ga][_i.id]=_i})}},{key:"setOccupantWithLevel",value:function(){var j=this;this.occupant&&Object.values(this.occupant).forEach(function(k){if(k.spaceIds&&k.properties.occupantName){var P=[],$=[];k.spaceIds.forEach(function(W){var _n=W.id,_i=j.spaces[_n],ga=null;j.spaceGroups&&Object.values(j.spaceGroups).forEach(function(Va){Va.properties.spaceGroups&&Va.properties.spaceGroups&&Va.properties.spaceGroups.forEach(function(_c){_c.mainSpace&&_c.mainSpace.id===W.id&&(ga=_c.spaces.map(function(_f){return _f.id}))})});var ba=function(Va){var _c=!1;j.labelTextPreference&&j.labelTextPreference.length&&(_c=j.labelTextPreference.indexOf("OCCUPANT_NAMES")!==-1);var _f=j.labelTextPreference===null||_c,Ac=Va,qp=Va.properties;qp.name=Va.properties.icon||!_f?Va.properties.name:k.properties.occupantName,qp.display_name=Va.properties.icon||!_f?Va.properties.display_name:k.properties.occupantName,qp.address=Va.address,qp.occupantName=k.properties.occupantName;var _d=Va.levelId;j.outdoorLevelMapping[_d]&&(_d=j.outdoorLevelMapping[_d]),j.levelWiseGeometry[_d]||(j.levelWiseGeometry[_d]={}),j.levelWiseGeometry[_d][Va.id]=Ac,P.push(Ac),$.push(Va.id)};ga&&ga.length>0&&ga.forEach(function(Va){ba(j.spaces[Va])}),_i&&ba(_i)}),j.occupant[k.id]=k,j.occupant[k.id].space=P,j.occupant[k.id].spaceIds=$}})}},{key:"setEntrance",value:function(){var j=this;this.entrance&&Object.values(this.entrance).forEach(function(k){var P=k.properties.level.id;j.levelWiseGeometry[P]||(j.levelWiseGeometry[k.properties.level.id]={}),j.outdoorLevelMapping[P]&&(P=j.outdoorLevelMapping[P]),j.levelWiseGeometry[P][k.id]=k})}},{key:"setLevelWiseGeometry",value:function(){var j=this;this.level&&Object.keys(this.level).forEach(function(k){j.levelWiseGeometry[k]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(j){for(var k={},P=0,$=Object.entries(this.levelWiseGeometry);P<$.length;P++){var W=_a($[P],2),_n=W[0],_i=W[1];j===this.levelStructureMapping[_n]&&(k[_n]=this.level[_n],k[_n].features=_i)}return k}},{key:"getLabelAsPerPreference",value:function(j){var k=j.properties,P=k.spaceType,$=k.occupantName,W=k.spaceName,_n=k.addressName,_i=k.spaceCategory,ga=I(I(I(I(I(I(I({},Ix,$),Dx,W),rE,P?P.charAt(0).toUpperCase()+P.slice(1).toLowerCase():""),kx,_i?_i.charAt(0).toUpperCase()+_i.slice(1).toLowerCase():""),dA,_n),gA,_n),I0,_n),ba=this.theme.spaceRules,Va="",_c=_i&&P&&ba[_i]&&ba[_i].spaceTypes&&ba[_i].spaceTypes[P].behavioralAppearance.default.labelType;if(_c==="NONE"){if(!this.labelTextPreference)return"";ga[rE]=""}var _f=_i&&P&&ba[_i]&&ba[_i].properties&&ba[_i].properties.behavioralAppearance&&ba[_i].properties.behavioralAppearance.default&&ba[_i].properties.behavioralAppearance.default.labelType;if((_f==="NONE"||_f===void 0)&&_c===void 0){if(!this.labelTextPreference)return"";ga[rE]="",ga[kx]=""}var Ac=_i&&P&&ba[_i]&&ba[_i].properties&&ba[_i].properties.behavioralAppearance&&ba[_i].properties.behavioralAppearance.default&&ba[_i].properties.behavioralAppearance.default.labelTextPreference,qp=Ac&&this.labelTextPreference?this.labelTextPreference:Ac;if(qp){for(var _d=0;_d<qp.length;_d++)if(ga[qp[_d]]){Va=ga[qp[_d]];break}}return Va}}])}(),LO=function(){return w(function k(P){var $=P.apiKey,W=P.baseUrl,_n=P.token,_i=P.hrn;v(this,k);var ga={apiKey:$,url:W,token:_n,hrn:_i};this.hostOptions_=ga,this.momData=[],this.theme={},this.loadOptions={}},[{key:"setHostOptions",value:function(k){Object.keys(k).length===0||(this.hostOptions_=h(h({},this.hostOptions_),k))}},{key:"getToken",value:function(){return this.hostOptions_.token}},{key:"getHrn",value:function(){return this.hostOptions_.hrn}},{key:"load",value:function(k){var P=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.loadOptions=h(h(h({},_p),$),{},{venueId:k}),this.hostOptions_.mapData=$.mapData,this.hostOptions_.themeRule=$.themeRule,this.hostOptions_.svgList=$.svgList,this.hostOptions_.labelTextPreference=$.labelTextPreferenceOverride,this.getHrn()?this.getVenueModalInstance():this.getToken()?this.getDefaultCollectionWithToken().then(function(){return P.getVenueModalInstance()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load indoor map, Please provide either hrn or token"))}},{key:"getVenueModalInstance",value:function(){var k=this;return Promise.resolve().then(function(){return k.loadOptions.isMetaEnabled?k.getMeta_(k.loadOptions.isIconsEnabled).catch(function(P){return console.warn(P),Promise.resolve()}):Promise.reject()}).then(function(P){return k.getVenue_(P)}).then(function(P){return P}).catch(function(P){console.debug("Captured event VENUE_ERROR_STATE",P)})}},{key:"createMomStructure",value:function(){var k=this,P={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function($){var W="indoormap-00000000-0000-4000-a000-".concat(k.loadOptions.venueId.toString().padStart(12,"0")),_n=$.id;($.momType===Wv.ADDRESS||k.hostOptions_.mapData||$.properties.indoorMapId==k.loadOptions.venueId||$.properties.indoorMapId===W)&&($.momType===Wv.SITE?P.site=B0.setSite($,k.loadOptions.venueId):$.momType===Wv.STRUCTURE?P.structure[_n]=B0.setStructure($):$.momType!==Wv.LEVEL||$.properties.isOutdoor&&(!$.properties.isOutdoor||$.properties.parentIndoorLevel)?$.momType===Wv.LEVEL&&$.properties.isOutdoor&&$.properties.parentIndoorLevel?P.outdoorLevelMapping[$.id]=$.properties.parentIndoorLevel.id:$.momType===Wv.ENTRANCE?P.entrance[_n]=B0.setEntrance($):$.momType===Wv.OCCUPANT?P.occupant[_n]=B0.setOccupant($):$.momType===Wv.SPACE?P.spaces[_n]=B0.setSpace($):$.momType===Wv.SPACEGROUPS?P.spaceGroups[_n]=B0.setSpaceGroups($):$.momType===Wv.ADDRESS&&(P.address[_n]=B0.setAddress($)):(P.level[_n]=B0.setLevel($),P.levelStructureMapping[_n]=$.properties.structure.id))}),P.theme=this.theme,P.labelTextPreference=this.hostOptions_.labelTextPreference,new Y4(P)}},{key:"getVenue_",value:function(k){this.momData=k.getMomData();var P=this.createMomStructure();return P.setLevelWiseGeometry(),new RO(P,k)}},{key:"setConfigData",value:function(k){var P=k.themeRule,$=k.svgList,W=k.defaultLang;PO.setSpaceRules(P.spaceRules),B0.svgList=$,B0.themeRule=P,B0.defaultLang=W,this.theme=P}},{key:"getMeta_",value:function(){var k=this,P=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],$=new NO,W=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,F0.SITE),_n=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,F0.Theme),_i=[];return P&&(_i=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,F0.IMAGES)),new Promise(function(ga){Promise.all([W,_n,_i]).then(function(ba){var Va=_a(ba,3),_c=Va[0],_f=Va[1],Ac=Va[2],qp=k.hostOptions_.mapData?{mom:new Promise(function(_d){return _d(k.hostOptions_.mapData)}),site:k.hostOptions_.mapData.features.find(function(_d){return _d.momType===Wv.SITE})}:Mx.getMomData(_c,k.hostOptions_);qp.mom.then(function(_d){var _g=_f.properties;$.imageCache=P?B0.manageSvgDimensions(Ac.properties):[],k.setConfigData({themeRule:_g,svgList:$.imageCache,defaultLang:qp&&qp.site&&qp.site.properties.defaultLanguageCode}),$.releaseSettings_={displayOptions:{display:_g.entranceRules.default.displayName||g1.STANDARD},mom:_d.features},$.theme=new mI(_g,$),ga($)})})})}},{key:"getMetaConfig_",value:function(k,P){return Mx.getConfigUrl(k,P,this.hostOptions_)}},{key:"fetchCollections",value:function(){return Mx.getDefaultCollection(this.hostOptions_)}},{key:"fetchUserProjects",value:function(){return Mx.getProjectAccountDetails(this.hostOptions_)}},{key:"getDefaultCollectionWithToken",value:(j=function(k){return function(){var P=this,$=arguments;return new Promise(function(W,_n){var _i=k.apply(P,$);function ga(Va){y(_i,W,_n,ga,ba,"next",Va)}function ba(Va){y(_i,W,_n,ga,ba,"throw",Va)}ga(void 0)})}}(p().mark(function k(){var P=this;return p().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",Promise.all([this.fetchCollections(),this.fetchUserProjects()]).then(function(W){var _n=_a(W,2),_i=_n[0],ga=_n[1],ba=P.getHrnFromDefaultCollection(_i,ga);if(ba.hrn){var Va={hrn:ba.hrn};return P.setHostOptions(Va),Promise.resolve()}return Promise.reject()}).catch(function(W){return Promise.reject(W)}));case 1:case"end":return $.stop()}},k,this)})),function(){return j.apply(this,arguments)})},{key:"getHrnFromDefaultCollection",value:function(k,P){var $=k.results.items;if(Array.isArray($)&&$.length){var W=this.getProjectRealm(P);return $.find(function(_n){return _n.hrn.includes(W)})}return Promise.reject(new Error("Error while accessing default collection"))}},{key:"getProjectRealm",value:function(k){if(Array.isArray(k.items)&&k.items.length&&k.items[0].id.includes("indoor-")){var P=k.items[0].hrn;return this.getRealmNameFromHrn(P)}return""}},{key:"getRealmNameFromHrn",value:function(k){if(k){var P=k.split(":");return P.length&&P[4]}return""}},{key:"getSupportedMapList",value:function(){var k=this,P=this.hostOptions_,$=P.hrn,W=P.token;return $?this.fetchMapInfoList():W?this.getDefaultCollectionWithToken().then(function(){return k.fetchMapInfoList()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load map list, Please provide either hrn or token"))}},{key:"fetchMapInfoList",value:function(){var k=this;return Mx.fetchIndoorMapList(this.hostOptions_).then(function(P){var $=P.features;return $.length>0?$.map(function(W){var _n=W.properties,_i=_n.placeProperties,ga=_n.indoorMapId,ba=ga.split("-").pop(),Va=ba.substring(ba.length-5);return{mapIdentifier:ga,mapName:k.getMapName(_i.names).name,mapId:Va}}):[]}).catch(function(P){Promise.reject(new Error("".concat(P,": Error while fetching map list")))})}},{key:"getMapName",value:function(k){return Array.isArray(k)&&k.length>0?k.find(function(P){return P.nameType==="OFFICIAL"}):{}}}]);var j}(),Z4=["origin","destination"],X4=function(){return w(function j(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(v(this,j),!k.apiKey&&!k.token)throw new Error("API key or Token is missing");this.config_=h({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},k)},[{key:"calculateRoute",value:function(j){var k=j.origin,P=k===void 0?{}:k,$=j.destination,W=$===void 0?{}:$,_n=_o(j,Z4);if(!P.coordinates||!W.coordinates)throw new Error("Waypoint coordinates are missing");var _i=function(Va){var _c=Va.coordinates,_f=Va.venueId,Ac=Va.levelId,qp=_c.join(",");return _f&&Ac?qp.concat(";indoorMapId=",_f,";levelId=",Ac):qp},ga=new URL("".concat(this.config_.baseUrl,"/v1/routes")),ba=new URLSearchParams({origin:_i(P),destination:_i(W),apiKey:this.config_.apiKey});return Object.entries(_n).forEach(function(Va){var _c=_a(Va,2),_f=_c[0],Ac=_c[1];ba.append(_f,g(Ac)==="object"?JSON.stringify(Ac):Ac)}),ga.search=ba,fetch(ga,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(Va){return Va.json()})}}])}(),u_={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"};Object.freeze(I(I(I(I(I(I(I(I(I({},u_.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),u_.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),u_.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),u_.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),u_.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),u_.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),u_.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),u_.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),u_.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}));var jO=new cy;jO.EVENT_NAME=u_,jO.on("newListener",function(j){u_[j]||console.warn("subscribing for un-registered/documented event")});var mv=function(j){function k(P){var $;if(v(this,k),$=r(this,k),!(P instanceof RO))throw new Error("It is mandatory to provide valid instance of venueModel");return $.venueModel=P,$.search_=new pA(P),$.status_={activeDrawingId:P.getRootDrawing().getIdentifier(),activeLevelIndex:P.getRootDrawing().getMainLevel().getZIndex()},$.mapObjectStore_=$.getDefaultMapObjectsStore_(),$.drawings=P.getDrawings().map(function(W){var _n=new _h(W);return _n.setParentEventTarget($),_n}),$.levels=P.getLevels().map(function(W){var _n=new _m(W);return _n.setParentEventTarget($.drawings.find(function(_i){return _i.getIdentifier()===_n.getData().getDrawing().getIdentifier()})),_n}),$.geometries=P.getGeometries().map(function(W){var _n=new jc(W);return _n.setParentEventTarget($.levels.find(function(_i){return _i.getIdentifier()===_n.getData().getLevel().getIdentifier()})),_n}),$.mutualExclusiveHighlight_=!1,$}return G(k,H.map.Feature),w(k,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return o(H.geo.Rect,_l(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var P=_a(this.venueModel.getCenter(),2),$=P[0],W=P[1];return new H.geo.Point(W,$)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(P){return this.drawings.find(function($){return $.getIdentifier()===P})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(P){return this.levels.find(function($){return $.getIdentifier()===P})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(P){return this.getGeometries().find(function($){return $.getIdentifier()===P})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var P=this;return this.getData().getDisplaySettings()===g1.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function($){return P.getLevel($.getIdentifier())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function($){return P.getLevel($.getIdentifier())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(P){if(this.status_.activeDrawingId!==P){var $=this.venueModel.getDrawingById(P);if(!$)throw new Error("Drawing ".concat(P," was not found"));var W=this.status_.activeDrawingId;this.status_.activeDrawingId=$.id,this.setActiveLevelIndex($.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(k.EVENTS.DRAWING_CHANGE,P,W))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(P){if(this.venueModel.getLevelsByZIndex(P)){var $=this.status_.activeLevelIndex;this.status_.activeLevelIndex=P,this.dispatchEvent(new H.util.ChangeEvent(k.EVENTS.LEVEL_CHANGE,P,$))}}},{key:"isActive",value:function(){var P=this.getParentEventTarget();return!!P&&this===P.activeVenue}},{key:"getHighlightedGeometries",value:function(){var P=this;return this.venueModel.getGeometries().filter(function($){return $.isHighlighted()}).map(function($){return P.getGeometry($.getIdentifier())})}},{key:"setHighlightedGeometries",value:function(){var P=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_n=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_i=h(h({},S_),W),ga=_i.fillColor,ba=_i.outlineColor,Va=_i.outlineWidth;this.mutualExclusiveHighlight_=!!_n,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach(function(_c){_c.getData().highlight(!1)}),$.forEach(function(_c){_c.getData().highlight(P,{m:ga,o:ba,w:Va})}),this.dispatchEvent(k.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getActiveLevelIndex(),$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[P][$.getIdentifier()]}},{key:"setMapObjects",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getActiveLevelIndex(),W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[$]&&this.mapObjectStore_[$][W.getIdentifier()]&&(this.mapObjectStore_[$][W.getIdentifier()]=_l(P)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var P=this,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return this.search_.find($).flatMap(function(W){return W.geometries.map(function(_n){return P.getGeometry(_n.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(P){Object.values(P).forEach(function($){return $.forEach(function(W){return W.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach(function(P){return P.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var P=this,$=this.getData().getDisplaySettings()===g1.FLATTEN;return this.venueModel.getLevels().reduce(function(W,_n){var _i=_n.getZIndex(),ga=h({},W);return ga[_i]||(ga[_i]={}),ga[_i][_n.getDrawing().getIdentifier()]=[],$&&(ga[_i][P.venueModel.getRootDrawing().getIdentifier()]=[]),ga},{})}}])}();mv.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"};var yA=function(){return w(function j(){v(this,j)},null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(j){return j.getData().getGeometries()}).filter(function(j){return j.isIcon()&&j.getIcon()}).map(function(j){var k=_a(j.getLabelArea(),2),P=k[0],$=k[1],W=j.getLevel(),_n=j.getIcon(),_i=j.properties.spaceType||j.properties.spaceCategory||j.getDisplayName();return{type:"Feature",properties:{id:j.getIdentifier(),geometryId:j.getIdentifier(),levelId:W.getIdentifier(),name:_i,venueId:W.getDrawing().getVenueModel().getIdentifier(),url:_n?"data:image/svg+xml;utf8,".concat(encodeURIComponent(_n)):""},geometry:{type:Qv,coordinates:[P,$]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(j){return j.getData().getGeometries()}).filter(function(j){return j.getDisplayName()&&!j.isIcon()}).map(function(j){var k=_a(j.getLabelArea(),2),P=k[0],$=k[1],W=j.getLabelStyle(),_n=W.fill,_i=W.zmin,ga=j.getLevel();return{type:"Feature",properties:{id:j.getIdentifier(),geometryId:j.getIdentifier(),levelId:ga.getIdentifier(),venueId:ga.getDrawing().getVenueModel().getIdentifier(),name:j.getDisplayName(),minZoom:_i||15,textFillColor:_n.toLowerCase()},geometry:{type:Qv,coordinates:[P,$]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(j){return j.getData().getGeometries()}).filter(function(j){return j.getType()!==Qv}).map(function(j){var k=j.getHighlightedStyle()||{},P=k.m,$=k.o,W=k.w,_n=h({},j.getStyle()),_i=_n.m,ga=_n.o,ba=_n.w,Va=ub,_c=Va.fillColor,_f=Va.outlineColor,Ac=Va.outlineWidth,qp=j.getLevel();return{type:"Feature",properties:{id:j.getIdentifier(),fillColor:(P||_i||_c).toLowerCase(),geometryId:j.getIdentifier(),levelId:qp.getIdentifier(),venueId:qp.getDrawing().getVenueModel().getIdentifier(),outlineColor:($||ga||_f).toLowerCase(),outlineWidth:Number(((W||ba||Ac)/3).toFixed(2)),zIndex:j.getZIndex()},geometry:{type:j.getType(),coordinates:j.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(j){return{type:"FeatureCollection",features:j.flatMap(function(k){return k.getData().getLevels().map(function(P){var $=P.getIdentifier(),W=k.getLevel($).getData().levelData.geometry;return{type:"Feature",properties:{isFootprint:!0,levelId:$,venueId:k.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:W.coordinates}}})})}}}])}(),K4=function(){return w(function j(){v(this,j)},null,[{key:"getStyle",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],P={styles:[{dataLayer:Av.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#4E5663",lineWidth:["interpolate",["linear"],["zoom"],0,"1px",6,"1px",7,"2px",18,"2px",19,"4px",24,"4px"],renderOrder:1},{dataLayer:Av.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{dataLayer:Av.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{dataLayer:Av.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{dataLayer:Av.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:U_.size,text:["get","name"],priority:60},{dataLayer:Av.ICON,minZoomLevel:z_,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return j.forEach(function($){var W="texture"+$.properties.name;P.images[W]||(P.images[W]={url:$.properties.url,preload:!0},P.imageTextures.push({name:W,image:W}))}),k.forEach(function($){var W,_n=$.getData().getHighlightedStyle(),_i=_n.m,ga=_n.o,ba=_n.w;(W=P.styles).push.apply(W,[{dataLayer:Av.VECTOR,when:["==",["get","id"],$.id],technique:"fill",color:_i,renderOrder:["get","zIndex"]},{dataLayer:Av.VECTOR,when:["==",["get","id"],$.id],technique:"solid-line",color:ga,lineWidth:ba,renderOrder:["get","zIndex"]}])}),new H.map.render.harp.Style(P)}}])}(),J4=function(){function j(){v(this,j)}return w(j,null,[{key:"getIconsTextures",value:function(){var k={},P={},$=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(W,_n){var _i=_n.properties.name;return W[_i]||(W[_i]=[]),W[_i].push(_n),W},{});return Object.keys($).forEach(function(W){var _n="texture".concat(W),_i="sprite".concat(W),ga=$[W][0].properties.url;k[_n]={url:ga,sprites:I({},_i,[0,0,50,50])},$[W].forEach(function(ba){var Va=ba.properties;P["icon".concat(Va.name)]={filter:{name:Va.name,$zoom:{min:z_}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:_n,sprite:_i}}}})}),{textures:k,iconLayers:P}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:Av.FOOTPRINT},draw:{lines:{color:"#4E5663",width:[[0,"1px"],[6,"1px"],[7,"2px"],[18,"2px"],[19,"4px"],[24,"4px"]],order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P={};if(k.length){var $=k[0].getData().getHighlightedStyle(),W=$.m,_n=$.o,_i=$.w;P={filter:{id:k.map(function(ga){return ga.id})},draw:{polygons:{interactive:!0,color:W},lines:{color:_n,width:_i}}}}return{data:{source:"venues",layer:Av.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:P}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:tE}},data:{source:"venues",layer:Av.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:U_.size},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(k){return h({data:{source:"venues",layer:Av.ICON}},k)}},{key:"getStyle",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],$=j.getIconsTextures(k),W=$.textures,_n=$.iconLayers,_i={venue_footprints:j.getFootprintLayer(),venue_geometries:j.getGeometryLayer(P),venue_labels:j.getTextLayer(),venue_icons:j.getIconLayer(_n)},ga=H.gl.yaml.dump({sources:{venues:{max_zoom:_b,type:"GeoJSONTileSource"}},layers:_i,textures:W});return new H.map.render.webgl.Style(ga)}}])}(),Q4={type:"FeatureCollection",features:[]},yI={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},t5=function(j){function k(P){var $;return v(this,k),($=r(this,k,[P])).venues=[],$.activeVenue=null,$.dataLayers_={},$.tileIndexes_={},$.addEventListener(mv.EVENTS.ACTIVE_VENUE_CHANGE,$.activeVenueChangeHandler_,void 0,$),$}return G(k,H.map.provider.RemoteTileProvider),w(k,[{key:"setStyle",value:function(P){return this.setStyleInternal(P)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(P){var $=P.properties;return!!this.activeVenue.getActiveLevels().some(function(W){return W.id===$.levelId})}},{key:"requestInternal",value:function(P,$,W,_n){var _i=this,ga=function(Va){for(var _c=0;_c<Va.length;_c+=1)Va[_c]=Va[_c].map(function(_f){return ly(_f,W,P,$,yI.extent)})},ba={};return Object.keys(this.tileIndexes_).forEach(function(Va){var _c=_i.tileIndexes_[Va].getTile(W,P,$);ba[Va]=_c?function(ny){var hy=[],yy=ny&&ny.features;if(yy)for(var by=0,Ry=yy.length;by<Ry;by+=1){var Cy=yy[by],jy=Cy.type,wy=void 0,Iy=!1;switch(jy){case Sv:wy={type:qv,coordinates:Cy.geometry.map(function(Ay){return Ay.slice()})};break;case C_:case a_:wy={type:h0,coordinates:Cy.geometry.map(function(Ay){return Ay.map(function(iv){return iv.slice()})})},jy===a_&&(wy=p1(wy))==null&&(Iy=!0);break;default:Iy=!0}Iy||hy.push({geometry:wy,id:Cy.id,properties:Cy.tags,type:"Feature"})}return{type:"FeatureCollection",features:hy}}(_c):Q4,ba[Va].features=ba[Va].features.filter(function(ny){return _i.isFeatureVisible_(ny)});for(var _f=0;_f<ba[Va].features.length;_f+=1){var Ac=ba[Va].features[_f],qp=Ac.geometry.type;if(qp===V_||qp===h0)ga(Ac.geometry.coordinates);else if(qp===Nv)Ac.geometry.coordinates.map(ga);else for(var _d=Ac.geometry.coordinates,_g=0;_g<_d.length;_g+=1)_d[_g]=ly(_d[_g],W,P,$,yI.extent)}}),_n(ba),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(P){return P?this.venues.find(function($){return $.getIdentifier()===P}):this.activeVenue}},{key:"setActiveVenue",value:function(P){var $=this.activeVenue;this.activeVenue=P,this.dispatchEvent(new H.util.ChangeEvent(mv.EVENTS.ACTIVE_VENUE_CHANGE,P,$)),this.reload()}},{key:"addVenue",value:function(P){var $=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!(P instanceof mv))throw new Error("Invalid argument");var W=P.getIdentifier();if(this.getVenue(W))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(W," before adding new"));P.setParentEventTarget(this),this.venues.push(P),$||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var P=this,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];$.length>0&&($.forEach(function(W){W instanceof mv&&P.addVenue(W,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(P){if(P instanceof mv&&this.venues.indexOf(P)>-1){var $=P.getIdentifier();this.activeVenue&&this.activeVenue.getIdentifier()===$&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(P),1),this.reloadData_(),this.reloadStyle_(),this.reload()}}},{key:"getFeatureProxy",value:function(P,$,W){var _n=P.geometryId,_i=P.venueId,ga=this.getVenue(_i);return _n?W(ga.getGeometries().find(function(ba){return ba.id===_n})):ga&&W(ga),!0}},{key:"addVenueEventListeners_",value:function(P){P&&(P.addEventListener(mv.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),P.addEventListener(mv.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),P.addEventListener(mv.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(P){P&&(P.removeEventListener(mv.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),P.removeEventListener(mv.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),P.removeEventListener(mv.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(P){var $=P.oldValue,W=P.newValue;$&&(this.removeVenueEventListeners_($),$.updateMapObjectsVisibility_()),W&&(this.addVenueEventListeners_(W),W.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var P=this,$=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(Av),W=Av.FOOTPRINT,_n=Av.ICON,_i=Av.TEXT,ga=Av.VECTOR;$.forEach(function(ba){switch(ba){case ga:P.dataLayers_[ga]=yA.getGeometryLayer(P.venues);break;case W:P.dataLayers_[W]=yA.getFootprintLayer(P.venues);break;case _n:P.dataLayers_[_n]=yA.getIconLayer(P.venues);break;case _i:P.dataLayers_[_i]=yA.getLabelLayer(P.venues);break;default:throw new Error("Unsupported Layer ".concat(ba))}})}},{key:"createTileIndexes_",value:function(){var P=this;(arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(Av)).forEach(function($){P.tileIndexes_[$]=new j0(P.dataLayers_[$],yI)})}},{key:"reloadData_",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(Av);this.createDataLayers_(P),this.createTileIndexes_(P)}},{key:"reloadStyle_",value:function(P){var $=this.dataLayers_[Av.ICON]?this.dataLayers_[Av.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(J4.getStyle($,P)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(K4.getStyle($,P))}},{key:"providesGeoJSON",value:function(){return!0}}])}(),e5=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),n5=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),r5=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),i5=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),o5=function(j,k,P){return P===vA.ObjectType.SEGMENT_START_MARKER?j===0?r5:null:P===vA.ObjectType.SEGMENT_FINISH_MARKER?k.length===1||j===k.length-1?i5:null:k[j].departure.place.type==="indoor"?e5:n5},vA=function(){function j(k,P){v(this,j),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(k,P)}return w(j,[{key:"createRouteObjects_",value:function(k){var P=this,$=k.sections,W=$===void 0?[]:$,_n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o5;this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group;for(var _i=function(){var ba,Va,_c=W[ga],_f=_c.departure.place,Ac=_f.id,qp=_f.type,_d=H.util.flexiblePolyline.decode(_c.polyline).polyline,_g=_n(ga,W,j.ObjectType.SEGMENT_START_MARKER);_g&&(ba=new H.map.Marker(_c.departure.place.location,{icon:_g}));var ny=_n(ga,W,j.ObjectType.SEGMENT_FINISH_MARKER);ny&&(Va=new H.map.Marker(_c.arrival.place.location,{icon:ny}));var hy=_n(ga,W,j.ObjectType.SEGMENT_POLYLINE);if(qp==="indoor"){var yy=function(){var jy=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],wy=new Map,Iy=new H.geo.LineString,Ay=_a(jy[0],3)[2];return wy.set(Ay,[Iy]),jy.forEach(function(iv){var Ev;iv[2]!==Ay&&(Ay=iv[2],Iy=new H.geo.LineString,wy.has(Ay)?wy.get(Ay).push(Iy):wy.set(Ay,[Iy])),(Ev=Iy).pushLatLngAlt.apply(Ev,_l(iv))}),wy}(_d),by=Array.from(yy.keys()).reduce(function(jy,wy){return jy[wy]||(jy[wy]=new H.map.Group),jy},{});hy&&yy.forEach(function(jy,wy){jy.forEach(function(Iy){if(Iy.getPointCount()>1){var Ay=new H.map.Polyline(Iy,{style:hy});by[wy].addObject(Ay)}})}),ba&&by[_c.departure.place.location.lvl].addObject(ba),Va&&by[_c.arrival.place.location.lvl].addObject(Va),P.indoorMapObjects_[Ac]=h(h({},P.indoorMapObjects_[Ac]||{}),by)}else{if(hy){var Ry=new H.geo.LineString(_d.flatMap(function(jy){return[jy[0],jy[1],0]})),Cy=new H.map.Polyline(Ry,{style:hy});P.outdoorMapObjects_.addObject(Cy)}ba&&P.outdoorMapObjects_.addObject(ba),Va&&P.outdoorMapObjects_.addObject(Va)}},ga=0;ga<W.length;ga++)_i()}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}])}();vA.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3};var vI=function(j){function k(P){var $;v(this,k),$=r(this,k,[k,h(h({},P),{},{baseUrl:void 0})]);var W={apiKey:P.apikey,baseUrl:P.baseUrl,token:P.token},_n={apiKey:W.apiKey,token:W.token};W.apiKey||(W.apiKey=$.getUrl().getQuery().apikey);var _i=P.useLegacy||!1;return $.venueService_=new LO(W,_i),_n.apiKey||(_n.apiKey=$.getUrl().getQuery().apikey),P.routingBaseUrl&&(_n.baseUrl=P.routingBaseUrl),$.routingService_=new X4(_n),$}return G(k,H.service.Service),w(k,[{key:"loadVenue",value:function(P){return console.warn("Venue service version 1 is no longer supported hence "+P+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(P){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(P)}}])}();vI.CONFIG_KEY="venues";var _A=function(j){function k(P){var $;v(this,k),$=r(this,k,[k,h(h({},P),{},{baseUrl:void 0})]);var W={apiKey:P.apikey,baseUrl:P.baseUrl,token:P.token,hrn:P.hrn};W.apiKey||(W.apiKey=$.getUrl().getQuery().apikey);var _n=P.useLegacy||!1;return $.venueService_=new LO(W,_n),$}return G(k,H.service.Service),w(k,[{key:"loadVenue",value:function(P){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.venueService_.load(P,$).then(function(W){return new mv(W)})}},{key:"getMapInfoList",value:function(){return this.venueService_.getSupportedMapList()}}])}();_A.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(j,k){var P=_A;return k!==1&&k?k!==gI.v2||j.token||(j.hrn?j.apikey||console.error("Venue Service version 2 requires either apikey or token"):console.error("Token is mandatory when Hrn is not provided in Venue Service version 2")):(console.warn("Venue service version 1 is no longer supported"),P=vI),this.createService(P,j)},_A.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"};var s5=function(j){function k(P){var $,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return v(this,k),($=r(this,k)).provider_=null,$.levelSelectorUI_=null,$.setAlignment(W&&W.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),$.addClass("venues-ui"),P instanceof mv&&$.setVenue(P),$}return G(k,H.ui.Control),w(k,[{key:"renderInternal",value:function(P,$){Ca(_t(k.prototype),"renderInternal",this).call(this,P,$),this.createLevelSelectorUI_(P),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(P){P instanceof mv&&(this.removeEventListeners_(),this.venue=P,this.provider_=P.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(P){var $=this;P.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new z4(P,null,null,function(W){return $.venue.setActiveLevelIndex(W)})}},{key:"update_",value:function(){if(this.levelSelectorUI_){var P=this.venue.getActiveDrawing().getData(),$=this.venue.getData().getDisplaySettings();this.levelSelectorUI_.update(P,$),this.levelChangeHandler_()}}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(mv.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(mv.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(mv.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(mv.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(mv.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(mv.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(P){this.setVenue(P.newValue)}}])}(),a5=function(j){function k(P){var $,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return v(this,k),($=r(this,k)).provider_=null,$.drawingSelectorUI_=null,$.addClass("venues-ui"),$.setAlignment(W&&W.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),P instanceof mv&&$.setVenue(P),$}return G(k,H.ui.Control),w(k,[{key:"renderInternal",value:function(P,$){Ca(_t(k.prototype),"renderInternal",this).call(this,P,$),this.createDrawingSelectorUI_(P),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(P){P instanceof mv&&(this.removeEventListeners_(),this.venue=P,this.provider_=P.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(P.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(P){var $=this;P.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new U4(P,null,function(W){return $.venue.setActiveDrawing(W)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(mv.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(mv.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(mv.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(mv.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(P){this.setVenue(P.newValue)}}])}(),l5=Object.freeze({__proto__:null,DrawingControl:a5,LevelControl:s5});return n(`.venues-ui * {
  font-family: "Fira Sans", "Helvetica Neue", Helvetica, sans-serif;
  color: #0F1621;
}
.venues-ui .arrow {
  display: block;
  width: 100%;
  height: 100%;
  background-repeat: no-repeat;
  background-position: center;
}
.venues-ui .arrow--up {
  background-image: url("data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.venues-ui .arrow--down {
  background-image: url("data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.venues-ui .venues-ui-button {
  display: block;
  width: 40px;
  height: 40px;
  line-height: 40px;
  font-size: 16px;
  font-weight: 600;
  background-color: #fff;
  border: none;
  border-bottom: 1px solid #9FA2A6;
  cursor: pointer;
  overflow: hidden;
  color: #6e737a;
  text-align: center;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {
  background-color: #f0f0f0;
  color: #0F1621;
}
@keyframes fade {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.venues-ui__drawings .drawings {
  position: absolute;
  top: 0;
  right: 45px;
  display: none;
  opacity: 0;
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__drawings .drawings--open {
  display: block;
  opacity: 1;
  animation: fade 1s;
}
.venues-ui__drawings .drawings .venues-ui-button {
  width: auto;
  padding: 0 10px;
}
.venues-ui__drawings .drawings .venues-ui-button:first-of-type {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.venues-ui__drawings .drawings .venues-ui-button:last-of-type {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
.venues-ui__drawings .trigger {
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__drawings .trigger .arrow {
  transform: rotate(0);
  transition: 0.4s;
}
.venues-ui__drawings .trigger.venues-ui-button--active .arrow {
  transform: rotate(90deg);
  transition: 0.4s;
}
.venues-ui__levels {
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__levels .levels {
  overflow: hidden;
}
.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {
  border-radius: 0;
}
.venues-ui__levels .venues-ui-button:first-of-type {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.venues-ui__levels .venues-ui-button:last-of-type {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {
  opacity: 0.5;
}
.venues-ui__directory {
  position: absolute;
  top: 10px;
  right: 60px;
  bottom: calc(100% - 45px);
  width: 350px;
  overflow: hidden;
  background: white;
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__directory.active {
  bottom: 10px;
}
.venues-ui__directory .directory__list {
  top: 80px;
  bottom: 20px;
  position: absolute;
  overflow-y: scroll;
  right: 10px;
  left: 10px;
  font-size: 12px;
}
.venues-ui__directory .directory__list svg {
  width: 25px;
  height: 25px;
}
.venues-ui__directory .directory__heading {
  margin: 8px;
  font-size: 15px;
  font-weight: normal;
  cursor: pointer;
}
.venues-ui__directory .directory__input {
  margin: 10px;
}
.venues-ui__directory .directory__input input {
  width: 100%;
  padding: 5px 0;
}
.venues-ui__directory .directory__trigger {
  position: absolute;
  right: 10px;
  top: 15px;
  width: 10px;
  height: 10px;
}
.venues-ui__directory .directory__trigger .arrow {
  transform: rotate(0);
  transition: 0.4s;
}
.venues-ui__directory .directory__trigger--active .arrow {
  transform: rotate(-180deg);
  transition: 0.4s;
}`),e.Drawing=_h,e.Geometry=jc,e.Level=_m,e.Provider=t5,e.Route=vA,e.Service=vI,e.Service2=_A,e.Venue=mv,e.ui=l5,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}).call(self);var a1=H;function Z3(e,n){var r=document.createElement("iframe"),o=document.documentMode<11&&"pointerEvents"in r.style;return r.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;pointer-events:none;"+(o?"":"visibility:hidden;"),r.onload=function(){r.contentWindow.onresize=function(){n(e)}},e.appendChild(r),r}var QE={production:!0,apiUrl:"http://198.211.98.52:5000",hereMapsKey:"Tvsh7laYli5XhKwb9__7GKM6W01AgSF6ku4_Hyv_Evw"};var G1=(()=>{class e{http;baseApiUrl=QE.apiUrl;sendLandSignal(){return this.http.post(`${this.baseApiUrl}/land`,{})}sendTakeoffSignal(r){return this.http.post(`${this.baseApiUrl}/takeoff`,{altitude:r})}signalSubject=new Yv;waypointsSubject=new Yv;constructor(r){this.http=r}sendWaypointSignal(r){this.signalSubject.next(r)}getWaypointSignal(){return this.signalSubject.asObservable()}updateWaypoints(r){this.waypointsSubject.next(r)}getWaypoints(){return this.waypointsSubject.asObservable()}static \u0275fac=function(o){return new(o||e)(By(vT))};static \u0275prov=Dy({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tG=["map"],X3=(()=>{class e{missionPlannerService;timeoutHandle;zoom=2;lng=79.96;lat=28.91;droneLocation={lat:28.92,lng:79.96};notify=new uv;waypoints=[];icon;map;behav;mapDiv;signal;droneMarker;constructor(r){this.missionPlannerService=r,this.missionPlannerService.getWaypointSignal().subscribe(o=>{this.addDraggableMarker(o)}),this.icon=new a1.map.Icon("drone.png",{size:{w:50,h:50}})}ngAfterViewInit(){if(!this.map&&this.mapDiv){let o=new a1.service.Platform({apikey:QE.hereMapsKey}).createDefaultLayers(),s=new a1.Map(this.mapDiv.nativeElement,o.vector.normal.map,{pixelRatio:window.devicePixelRatio,zoom:16,center:{lng:79.96,lat:28.91}});Z3(this.mapDiv.nativeElement,()=>{s.getViewPort().resize()}),s.addEventListener("mapviewchange",l=>{this.notify.emit(l)}),this.map=s,this.behav=new a1.mapevents.Behavior(new a1.mapevents.MapEvents(s))}}ngOnChanges(r){clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.map&&(r.zoom!==void 0&&this.map.setZoom(r.zoom.currentValue),r.lat!==void 0&&this.map.setCenter({lat:r.lat.currentValue,lng:this.lng}),r.lng!==void 0&&this.map.setCenter({lat:this.lat,lng:r.lng.currentValue}),r.droneLocation!==void 0&&this.updateMarkerLocation())},100)}updateMarkerLocation(){this.map&&this.droneLocation&&(this.lat=this.droneLocation.lat,this.lng=this.droneLocation.lng,this.map.setCenter({lat:this.lat,lng:this.lng}),this.droneMarker?this.droneMarker.setGeometry({lat:this.droneLocation.lat,lng:this.droneLocation.lng},{data:{name:"Drone"},icon:this.icon}):(this.droneMarker=new a1.map.Marker({lat:this.droneLocation.lat,lng:this.droneLocation.lng},{data:{name:"Drone"},icon:this.icon}),this.map.addObject(this.droneMarker)))}addDraggableMarker(r){var o=new a1.map.Marker({lat:r.lat,lng:r.lng},{data:{name:"Waypoint "+this.waypoints.length},volatility:!0});o.draggable=!0,this.map.addObject(o),this.waypoints.push(o),this.missionPlannerService.updateWaypoints(this.waypoints),this.map.addEventListener("dragstart",s=>{var l=s.target,h=s.currentPointer;if(l){var p=this.map.geoToScreen(l.getGeometry());l.offset=new a1.math.Point(h.viewportX-p.x,h.viewportY-p.y),this.behav.disable()}},!1),this.map.addEventListener("dragend",s=>{var l=s.target;l&&this.behav.enable()},!1),this.map.addEventListener("drag",s=>{var l=s.target,h=s.currentPointer;l&&(l.offset?l.setGeometry(this.map.screenToGeo(h.viewportX-l.offset.x,h.viewportY-l.offset.y)):console.error("target.offset is undefined"))},!1)}static \u0275fac=function(o){return new(o||e)(pv(G1))};static \u0275cmp=s0({type:e,selectors:[["app-jsmap"]],viewQuery:function(o,s){if(o&1&&wL(tG,5),o&2){let l;FM(l=BM())&&(s.mapDiv=l.first)}},inputs:{zoom:"zoom",lng:"lng",lat:"lat",droneLocation:"droneLocation"},outputs:{notify:"notify"},standalone:!0,features:[$0,l0],decls:2,vars:0,consts:[["map",""],["id","map"]],template:function(o,s){o&1&&xv(0,"div",1,0)},styles:["#map[_ngcontent-%COMP%]{width:100%;height:100%}"]})}return e})();var rF=(()=>{let n=class n{constructor(o,s){this._renderer=o,this._elementRef=s,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(o,s){this._renderer.setProperty(this._elementRef.nativeElement,o,s)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}};n.\u0275fac=function(s){return new(s||n)(pv(BE),pv(L_))},n.\u0275dir=J0({type:n});let e=n;return e})(),iF=(()=>{let n=class n extends rF{};n.\u0275fac=(()=>{let o;return function(l){return(o||(o=Dw(n)))(l||n)}})(),n.\u0275dir=J0({type:n,features:[L1]});let e=n;return e})(),W2=new Sy(""),eG={provide:W2,useExisting:Sw(()=>Y2),multi:!0},Y2=(()=>{let n=class n extends iF{writeValue(o){this.setProperty("checked",o)}};n.\u0275fac=(()=>{let o;return function(l){return(o||(o=Dw(n)))(l||n)}})(),n.\u0275dir=J0({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(s,l){s&1&&Cv("change",function(p){return l.onChange(p.target.checked)})("blur",function(){return l.onTouched()})},features:[lT([eG]),L1]});let e=n;return e})(),nG={provide:W2,useExisting:Sw(()=>rx),multi:!0};function rG(){let e=r1()?r1().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var iG=new Sy(""),rx=(()=>{let n=class n extends rF{constructor(o,s,l){super(o,s),this._compositionMode=l,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!rG())}writeValue(o){let s=o??"";this.setProperty("value",s)}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}};n.\u0275fac=function(s){return new(s||n)(pv(BE),pv(L_),pv(iG,8))},n.\u0275dir=J0({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,l){s&1&&Cv("input",function(p){return l._handleInput(p.target.value)})("blur",function(){return l.onTouched()})("compositionstart",function(){return l._compositionStart()})("compositionend",function(p){return l._compositionEnd(p.target.value)})},features:[lT([nG]),L1]});let e=n;return e})();function oG(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var oF=new Sy(""),sG=new Sy("");function aG(e){return oG(e.value)?{required:!0}:null}function K3(e){return null}function sF(e){return e!=null}function aF(e){return kw(e)?kv(e):e}function lF(e){let n={};return e.forEach(r=>{n=r!=null?gy(gy({},n),r):n}),Object.keys(n).length===0?null:n}function uF(e,n){return n.map(r=>r(e))}function lG(e){return!e.validate}function cF(e){return e.map(n=>lG(n)?n:r=>n.validate(r))}function uG(e){if(!e)return null;let n=e.filter(sF);return n.length==0?null:function(r){return lF(uF(r,n))}}function hF(e){return e!=null?uG(cF(e)):null}function cG(e){if(!e)return null;let n=e.filter(sF);return n.length==0?null:function(r){let o=uF(r,n).map(aF);return VI(o).pipe($y(lF))}}function fF(e){return e!=null?cG(cF(e)):null}function J3(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function hG(e){return e._rawValidators}function fG(e){return e._rawAsyncValidators}function H2(e){return e?Array.isArray(e)?e:[e]:[]}function CC(e,n){return Array.isArray(e)?e.includes(n):e===n}function Q3(e,n){let r=H2(n);return H2(e).forEach(s=>{CC(r,s)||r.push(s)}),r}function _j(e,n){return H2(n).filter(r=>!CC(e,r))}var IC=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=hF(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=fF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,r){return this.control?this.control.hasError(n,r):!1}getError(n,r){return this.control?this.control.getError(n,r):null}},$2=class extends IC{get formDirective(){return null}get path(){return null}},qT=class extends IC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},G2=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aet=ov(gy({},pG),{"[class.ng-submitted]":"isSubmitted"}),kC=(()=>{let n=class n extends G2{constructor(o){super(o)}};n.\u0275fac=function(s){return new(s||n)(pv(qT,2))},n.\u0275dir=J0({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,l){s&2&&LM("ng-untouched",l.isUntouched)("ng-touched",l.isTouched)("ng-pristine",l.isPristine)("ng-dirty",l.isDirty)("ng-valid",l.isValid)("ng-invalid",l.isInvalid)("ng-pending",l.isPending)},features:[L1]});let e=n;return e})();var zT="VALID",SC="INVALID",tx="PENDING",HT="DISABLED",nx=class{},DC=class extends nx{constructor(n,r){super(),this.value=n,this.source=r}},$T=class extends nx{constructor(n,r){super(),this.pristine=n,this.source=r}},GT=class extends nx{constructor(n,r){super(),this.touched=n,this.source=r}},ex=class extends nx{constructor(n,r){super(),this.status=n,this.source=r}};function dG(e){return(MC(e)?e.validators:e)||null}function gG(e){return Array.isArray(e)?hF(e):e||null}function mG(e,n){return(MC(n)?n.asyncValidators:e)||null}function yG(e){return Array.isArray(e)?fF(e):e||null}function MC(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var q2=class{constructor(n,r){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=XS(()=>this.statusReactive()),this.statusReactive=GS(void 0),this._pristine=XS(()=>this.pristineReactive()),this.pristineReactive=GS(!0),this._touched=XS(()=>this.touchedReactive()),this.touchedReactive=GS(!1),this._events=new Yv,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(r)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return V1(this.statusReactive)}set status(n){V1(()=>this.statusReactive.set(n))}get valid(){return this.status===zT}get invalid(){return this.status===SC}get pending(){return this.status==tx}get disabled(){return this.status===HT}get enabled(){return this.status!==HT}get pristine(){return V1(this.pristineReactive)}set pristine(n){V1(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return V1(this.touchedReactive)}set touched(n){V1(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Q3(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Q3(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(_j(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(_j(n,this._rawAsyncValidators))}hasValidator(n){return CC(this._rawValidators,n)}hasAsyncValidator(n){return CC(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let r=this.touched===!1;this.touched=!0;let o=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(ov(gy({},n),{sourceControl:o})),r&&n.emitEvent!==!1&&this._events.next(new GT(!0,o))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(r=>r.markAllAsTouched(n))}markAsUntouched(n={}){let r=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=n.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:o})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,o),r&&n.emitEvent!==!1&&this._events.next(new GT(!1,o))}markAsDirty(n={}){let r=this.pristine===!0;this.pristine=!1;let o=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(ov(gy({},n),{sourceControl:o})),r&&n.emitEvent!==!1&&this._events.next(new $T(!1,o))}markAsPristine(n={}){let r=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=n.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,o),r&&n.emitEvent!==!1&&this._events.next(new $T(!0,o))}markAsPending(n={}){this.status=tx;let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ex(this.status,r)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(ov(gy({},n),{sourceControl:r}))}disable(n={}){let r=this._parentMarkedDirty(n.onlySelf);this.status=HT,this.errors=null,this._forEachChild(s=>{s.disable(ov(gy({},n),{onlySelf:!0}))}),this._updateValue();let o=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new DC(this.value,o)),this._events.next(new ex(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ov(gy({},n),{skipPristineCheck:r}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){let r=this._parentMarkedDirty(n.onlySelf);this.status=zT,this._forEachChild(o=>{o.enable(ov(gy({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(ov(gy({},n),{skipPristineCheck:r}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(n,r){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},r),this._parent._updateTouched({},r))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zT||this.status===tx)&&this._runAsyncValidator(o,n.emitEvent)}let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new DC(this.value,r)),this._events.next(new ex(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(ov(gy({},n),{sourceControl:r}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?HT:zT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,r){if(this.asyncValidator){this.status=tx,this._hasOwnPendingAsyncValidator={emitEvent:r!==!1};let o=aF(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:r,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(r.emitEvent!==!1,this,r.shouldHaveEmitted)}get(n){let r=n;return r==null||(Array.isArray(r)||(r=r.split(".")),r.length===0)?null:r.reduce((o,s)=>o&&o._find(s),this)}getError(n,r){let o=r?this.get(r):this;return o&&o.errors?o.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,r,o){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||o)&&this._events.next(new ex(this.status,r)),this._parent&&this._parent._updateControlsErrors(n,r,o)}_initObservables(){this.valueChanges=new uv,this.statusChanges=new uv}_calculateStatus(){return this._allControlsDisabled()?HT:this.errors?SC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tx)?tx:this._anyControlsHaveStatus(SC)?SC:zT}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,r){let o=!this._anyControlsDirty(),s=this.pristine!==o;this.pristine=o,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),s&&this._events.next(new $T(this.pristine,r))}_updateTouched(n={},r){this.touched=this._anyControlsTouched(),this._events.next(new GT(this.touched,r)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){MC(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let r=this._parent&&this._parent.dirty;return!n&&!!r&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=gG(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=yG(this._rawAsyncValidators)}};var pF=new Sy("CallSetDisabledState",{providedIn:"root",factory:()=>Z2}),Z2="always";function vG(e,n){return[...n.path,e]}function _G(e,n,r=Z2){wG(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||r==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),EG(e,n),TG(e,n),xG(e,n),bG(e,n)}function $j(e,n){e.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function bG(e,n){if(n.valueAccessor.setDisabledState){let r=o=>{n.valueAccessor.setDisabledState(o)};e.registerOnDisabledChange(r),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(r)})}}function wG(e,n){let r=hG(e);n.validator!==null?e.setValidators(J3(r,n.validator)):typeof r=="function"&&e.setValidators([r]);let o=fG(e);n.asyncValidator!==null?e.setAsyncValidators(J3(o,n.asyncValidator)):typeof o=="function"&&e.setAsyncValidators([o]);let s=()=>e.updateValueAndValidity();$j(n._rawValidators,s),$j(n._rawAsyncValidators,s)}function EG(e,n){n.valueAccessor.registerOnChange(r=>{e._pendingValue=r,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&dF(e,n)})}function xG(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&dF(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function dF(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function TG(e,n){let r=(o,s)=>{n.valueAccessor.writeValue(o),s&&n.viewToModelUpdate(o)};e.registerOnChange(r),n._registerOnDestroy(()=>{e._unregisterOnChange(r)})}function AG(e,n){if(!e.hasOwnProperty("model"))return!1;let r=e.model;return r.isFirstChange()?!0:!Object.is(n,r.currentValue)}function SG(e){return Object.getPrototypeOf(e.constructor)===iF}function CG(e,n){if(!n)return null;Array.isArray(n);let r,o,s;return n.forEach(l=>{l.constructor===rx?r=l:SG(l)?o=l:s=l}),s||o||r||null}function tF(e,n){let r=e.indexOf(n);r>-1&&e.splice(r,1)}function eF(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var IG=class extends q2{constructor(n=null,r,o){super(dG(r),mG(o,r)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),MC(r)&&(r.nonNullable||r.initialValueIsDefault)&&(eF(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&r.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,r.emitViewToModelChange!==!1)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=this.defaultValue,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){tF(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){tF(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){eF(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var DG={provide:qT,useExisting:Sw(()=>WT)},nF=Promise.resolve(),WT=(()=>{let n=class n extends qT{constructor(o,s,l,h,p,d){super(),this._changeDetectorRef=p,this.callSetDisabledState=d,this.control=new IG,this._registered=!1,this.name="",this.update=new uv,this._parent=o,this._setValidators(s),this._setAsyncValidators(l),this.valueAccessor=CG(this,h)}ngOnChanges(o){if(this._checkForErrors(),!this._registered||"name"in o){if(this._registered&&(this._checkName(),this.formDirective)){let s=o.name.previousValue;this.formDirective.removeControl({name:s,path:this._getPath(s)})}this._setUpControl()}"isDisabled"in o&&this._updateDisabled(o),AG(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_G(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(o){nF.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(o){let s=o.isDisabled.currentValue,l=s!==0&&cT(s);nF.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(o){return this._parent?vG(o,this._parent):[o]}};n.\u0275fac=function(s){return new(s||n)(pv($2,9),pv(oF,10),pv(sG,10),pv(W2,10),pv(Ow,8),pv(pF,8))},n.\u0275dir=J0({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lT([DG]),L1,$0]});let e=n;return e})();var kG=(()=>{let n=class n{constructor(){this._validator=K3}ngOnChanges(o){if(this.inputName in o){let s=this.normalizeInput(o[this.inputName].currentValue);this._enabled=this.enabled(s),this._validator=this._enabled?this.createValidator(s):K3,this._onChange&&this._onChange()}}validate(o){return this._validator(o)}registerOnValidatorChange(o){this._onChange=o}enabled(o){return o!=null}};n.\u0275fac=function(s){return new(s||n)},n.\u0275dir=J0({type:n,features:[$0]});let e=n;return e})();var MG={provide:oF,useExisting:Sw(()=>X2),multi:!0};var X2=(()=>{let n=class n extends kG{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=cT,this.createValidator=o=>aG}enabled(o){return o}};n.\u0275fac=(()=>{let o;return function(l){return(o||(o=Dw(n)))(l||n)}})(),n.\u0275dir=J0({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(s,l){s&2&&qS("required",l._enabled?"":null)},inputs:{required:"required"},features:[lT([MG]),L1]});let e=n;return e})();var OG=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=Iw({type:n}),n.\u0275inj=Cw({});let e=n;return e})();var OC=(()=>{let n=class n{static withConfig(o){return{ngModule:n,providers:[{provide:pF,useValue:o.callSetDisabledState??Z2}]}}};n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=Iw({type:n}),n.\u0275inj=Cw({imports:[OG]});let e=n;return e})();var mF=(()=>{class e{missionPlannerService;acknowldged=new uv;takeoffAlt=100;constructor(r){this.missionPlannerService=r}addWaypoint(){this.missionPlannerService.sendWaypointSignal({name:"Waypoint",lng:79.96,lat:28.91})}takeoff(){this.missionPlannerService.sendTakeoffSignal(this.takeoffAlt).subscribe(r=>{r.action==="TAKEOFF_ACK"&&this.acknowldged.emit({takeoff:!0,land:!1})})}land(){this.missionPlannerService.sendLandSignal().subscribe(r=>{r.action==="LAND_ACK"&&this.acknowldged.emit({takeoff:!1,land:!0})})}static \u0275fac=function(o){return new(o||e)(pv(G1))};static \u0275cmp=s0({type:e,selectors:[["app-mission-planner-sidebar"]],outputs:{acknowldged:"acknowldged"},standalone:!0,features:[l0],decls:22,vars:2,consts:[["id","navigation","aria-labelledby","navigation-label",1,"fixed","rounded-xl","border","top-32","left-10","z-40","w-auto","h-96","p-4","overflow-y-auto","opacity-80","bg-white","dark:bg-gray-600"],[1,"py-4","overflow-y-auto"],[1,"space-y-2","font-medium","w-40","text-sm","text-gray-900","bg-white","border","border-gray-200","rounded-xl","dark:bg-gray-600","dark:border-gray-600","dark:text-white"],[1,"w-full","px-4","py-2","border-b","border-gray-200","rounded-t-lg","dark:border-gray-400"],["id","helper-text-explanation",1,"mt-2","text-sm","text-gray-500","dark:text-gray-400"],[1,"relative","flex","items-center","max-w-[8rem]"],["type","button","id","decrement-button","data-input-counter-decrement","quantity-input",1,"bg-gray-100","dark:bg-gray-700","dark:hover:bg-gray-700","dark:border-gray-600","hover:bg-gray-200","border","border-gray-300","rounded-s-lg","p-3","h-11","focus:ring-gray-100","dark:focus:ring-gray-700","focus:ring-2","focus:outline-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 18 2",1,"w-3","h-3","text-gray-900","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 1h16"],["type","text","id","quantity-input","data-input-counter","","aria-describedby","helper-text-explanation","placeholder","999","required","",1,"bg-gray-50","border-x-0","border-gray-300","h-11","text-center","text-gray-900","text-sm","focus:ring-blue-500","focus:border-blue-500","block","w-full","py-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel","value"],["type","button","id","increment-button","data-input-counter-increment","quantity-input",1,"bg-gray-100","dark:bg-gray-700","dark:hover:bg-gray-700","dark:border-gray-600","hover:bg-gray-200","border","border-gray-300","rounded-e-lg","p-3","h-11","focus:ring-gray-100","dark:focus:ring-gray-700","focus:ring-2","focus:outline-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 18 18",1,"w-3","h-3","text-gray-900","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 1v16M1 9h16"],[1,"relative","flex","items-center","w-full","top-1"],[1,"flex","items-center","p-2","text-gray-900","rounded-lg","w-full","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","dark:hover:text-white","group",3,"click"],[1,"ms-3"]],template:function(o,s){o&1&&(my(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"p",4),yv(5,"Initial Alt(M)"),xy(),my(6,"div",5)(7,"button",6),P0(),my(8,"svg",7),xv(9,"path",8),xy()(),y_(),my(10,"input",9),F_("ngModelChange",function(h){return e1(s.takeoffAlt,h)||(s.takeoffAlt=h),h}),xy(),my(11,"button",10),P0(),my(12,"svg",11),xv(13,"path",12),xy()()(),y_(),my(14,"div",13)(15,"button",14),Cv("click",function(){return s.takeoff()}),my(16,"span",15),yv(17,"TakeOff"),xy()()()(),my(18,"li",3)(19,"button",14),Cv("click",function(){return s.land()}),my(20,"span",15),yv(21,"Land"),xy()()()()()()),o&2&&(hv(10),j_("ngModel",s.takeoffAlt),j1("value",s.takeoffAlt))},dependencies:[OC,rx,kC,X2,WT]})}return e})();function NG(e,n){if(e&1){let r=Q_();my(0,"div",2)(1,"input",18),F_("ngModelChange",function(s){P_(r);let l=Mv();return e1(l.waypoint.data.name,s)||(l.waypoint.data.name=s),R_(s)}),xy()()}if(e&2){let r=Mv();hv(),F1("value",r.waypoint.data.name),j_("ngModel",r.waypoint.data.name)}}function PG(e,n){if(e&1&&(my(0,"p",3),yv(1),xy()),e&2){let r=Mv();hv(),t1(" ",r.waypoint.data.name," ")}}function RG(e,n){if(e&1){let r=Q_();my(0,"div",2)(1,"input",19),B1(2,"number"),F_("ngModelChange",function(s){P_(r);let l=Mv();return e1(l.waypoint.hm.lat,s)||(l.waypoint.hm.lat=s),R_(s)}),xy()(),my(3,"div",2)(4,"input",20),B1(5,"number"),F_("ngModelChange",function(s){P_(r);let l=Mv();return e1(l.waypoint.hm.lng,s)||(l.waypoint.hm.lng=s),R_(s)}),xy()()}if(e&2){let r=Mv();hv(),F1("value",uT(2,4,r.waypoint.hm.lat)),j_("ngModel",r.waypoint.hm.lat),hv(3),F1("value",uT(5,6,r.waypoint.hm.lng)),j_("ngModel",r.waypoint.hm.lng)}}function LG(e,n){if(e&1&&(my(0,"p",5),yv(1),B1(2,"number"),B1(3,"number"),xy()),e&2){let r=Mv();hv(),aT(" ",uT(2,2,r.waypoint.hm.lat),", ",uT(3,4,r.waypoint.hm.lng)," ")}}function jG(e,n){if(e&1){let r=Q_();my(0,"div",3)(1,"input",21),F_("ngModelChange",function(s){P_(r);let l=Mv();return e1(l.meta.alt,s)||(l.meta.alt=s),R_(s)}),xy()()}if(e&2){let r=Mv();hv(),F1("value",r.meta.alt),j_("ngModel",r.meta.alt)}}function FG(e,n){if(e&1&&(my(0,"div",6)(1,"p",3),yv(2),xy()()),e&2){let r=Mv();hv(2),aT("Alt: ",r.meta.alt,"",r.meta.isMeters?"M":"FT","")}}function BG(e,n){if(e&1){let r=Q_();my(0,"div",3)(1,"input",22),F_("ngModelChange",function(s){P_(r);let l=Mv();return e1(l.meta.radius,s)||(l.meta.radius=s),R_(s)}),xy()()}if(e&2){let r=Mv();hv(),F1("value",r.meta.radius),j_("ngModel",r.meta.radius)}}function VG(e,n){if(e&1&&(my(0,"p",3),yv(1),xy()),e&2){let r=Mv();hv(),aT("",r.meta.radius,"",r.meta.isMeters?"M":"FT","")}}var yF=(()=>{class e{waypoint={};meta={alt:100,isMeters:!1,radius:40};rearrange=new uv;allowEdit=!1;rearrangeWaypoint(r){this.rearrange.emit(r)}ngOnChanges(r){r.waypoint}toggleEdit(){this.allowEdit=!this.allowEdit}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s0({type:e,selectors:[["app-waypoint-list-item"]],inputs:{waypoint:"waypoint",meta:"meta"},outputs:{rearrange:"rearrange"},standalone:!0,features:[$0,l0],decls:32,vars:7,consts:[[1,"odd:bg-white","odd:dark:bg-gray-900","even:bg-gray-50","even:dark:bg-gray-800","border-b","dark:border-gray-700"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"flex","text-sm","font-medium","text-gray-900","truncate","dark:text-white"],[1,"text-sm","font-medium","text-gray-900","truncate","dark:text-white"],[1,"px-6","py-4"],[1,"text-sm","text-gray-500","truncate","dark:text-gray-400"],[1,"flex-1"],[1,"flex-1","flex-col"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","ngModel","value"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","button",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"],[3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m5 15 7-7 7 7"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 9-7 7-7-7"],["placeholder","Waypoint Name",1,"bg-gray-50","w-full","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","p-2","dark:bg-gray-500","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","value","ngModel"],["placeholder","Lat",1,"block","p-2","w-full","text-gray-600","border","border-gray-300","rounded-lg","bg-gray-50","text-xs","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-500","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","value","ngModel"],["placeholder","Long",1,"block","w-full","p-2","text-gray-600","border","border-gray-300","rounded-lg","bg-gray-50","text-xs","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-500","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","value","ngModel"],["placeholder","ALT",1,"bg-gray-50","w-full","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","p-2","dark:bg-gray-500","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","value","ngModel"],["placeholder","Radius",1,"bg-gray-50","w-full","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","p-2","dark:bg-gray-500","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","value","ngModel"]],template:function(o,s){o&1&&(my(0,"tr",0)(1,"td",1),t_(2,NG,2,2,"div",2)(3,PG,2,1,"p",3),xy(),my(4,"td",4),t_(5,RG,6,8)(6,LG,4,6,"p",5),xy(),my(7,"td",4),t_(8,jG,2,2,"div",3)(9,FG,3,2,"div",6),xy(),my(10,"td",4),t_(11,BG,2,2,"div",3)(12,VG,2,2,"p",3),xy(),my(13,"td",4)(14,"div",7)(15,"label",8)(16,"input",9),F_("ngModelChange",function(h){return e1(s.meta.isMeters,h)||(s.meta.isMeters=h),h}),xy(),xv(17,"div",10),my(18,"span",11),yv(19),xy()()()(),my(20,"td",4)(21,"div",7)(22,"button",12),Cv("click",function(){return s.toggleEdit()}),P0(),my(23,"svg",13),xv(24,"path",14),xy()()(),y_(),my(25,"div",7)(26,"button",15),Cv("click",function(){return s.rearrangeWaypoint(-1)}),P0(),my(27,"svg",13),xv(28,"path",16),xy()(),y_(),my(29,"button",15),Cv("click",function(){return s.rearrangeWaypoint(1)}),P0(),my(30,"svg",13),xv(31,"path",17),xy()()()()()),o&2&&(hv(2),__(s.allowEdit?2:3),hv(3),__(s.allowEdit?5:6),hv(3),__(s.allowEdit?8:9),hv(3),__(s.allowEdit?11:12),hv(5),F1("value",!0),j_("ngModel",s.meta.isMeters),hv(3),sT(s.meta.isMeters?"Meters":"FT"))},dependencies:[eC,OC,rx,Y2,kC,WT]})}return e})();function UG(e,n){if(e&1){let r=Q_();my(0,"app-waypoint-list-item",5),Cv("rearrange",function(s){let l=P_(r).$index,h=Mv(2);return R_(h.handleRearrange(s,l))}),xy()}if(e&2){let r=n.$implicit,o=n.$index,s=Mv(2);j1("waypoint",r)("meta",s.waypointsMeta[o])}}function zG(e,n){if(e&1&&(my(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),yv(5," Waypoint "),xy(),my(6,"th",3),yv(7," Coordinates "),xy(),my(8,"th",3),yv(9," Altitude "),xy(),my(10,"th",3),yv(11," Radius "),xy(),my(12,"th",3),yv(13," Unit "),xy(),my(14,"th",3),yv(15," Actions "),xy()()(),my(16,"tbody"),yL(17,UG,1,2,"app-waypoint-list-item",4,mL),xy()()()),e&2){let r=Mv();hv(17),vL(r.waypoints)}}var vF=(()=>{class e{missionPlannerService;waypoints=[];waypointsMeta=[];subscription;constructor(r){this.missionPlannerService=r,this.subscription=this.missionPlannerService.getWaypoints().subscribe(o=>{this.waypoints=o,this.waypointsMeta=o.map(s=>({alt:100,isMeters:!1,radius:40}))})}handleRearrange(r,o){r===-1&&o>0?this.reorderWaypoints(o-1,o):r===1&&o<this.waypoints.length-1&&this.reorderWaypoints(o,o+1)}reorderWaypoints(r,o){this.waypoints=[...this.waypoints.slice(0,r),this.waypoints[o],...this.waypoints.slice(r,o),this.waypoints[r],...this.waypoints.slice(o+1)],this.waypointsMeta=this.waypointsMeta.map((s,l)=>l===r?this.waypointsMeta[o]:l===o?this.waypointsMeta[r]:s)}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(o){return new(o||e)(pv(G1))};static \u0275cmp=s0({type:e,selectors:[["app-waypoints-list"]],standalone:!0,features:[l0],decls:1,vars:1,consts:[[1,"sm:rounded-lg","fixed","bottom-0","w-1/3","left-1/2"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","w-full","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[3,"waypoint","meta"],[3,"rearrange","waypoint","meta"]],template:function(o,s){o&1&&t_(0,zG,19,0,"div",0),o&2&&__(s.waypoints.length>0?0:-1)},dependencies:[yF]})}return e})();function HG(e,n){if(e&1&&(my(0,"span",2),xv(1,"span",3),yv(2," Connected "),xy(),my(3,"span",4),yv(4),B1(5,"number"),xy(),my(6,"span",4),yv(7),B1(8,"number"),xy(),my(9,"span",4),yv(10),xy(),my(11,"span",4),yv(12),xy()),e&2){let r=Mv();hv(4),t1(" Alt: ",VM(5,4,r.data.altitude,"1.0"),"M "),hv(3),t1(" Ground speed: ",VM(8,7,r.data.groundspeed,"1.0"),"M/s "),hv(3),t1(" Heading: ",r.data.heading," "),hv(2),t1(" Battery%: ",r.data.battery," ")}}function $G(e,n){e&1&&(my(0,"span",1),xv(1,"span",5),yv(2," Awaiting Connection "),xy())}var _F=(()=>{class e{missionPlannerService;http;data={};alive=!1;status="";coordsEmit=new uv;constructor(r,o){this.missionPlannerService=r,this.http=o}ngOnInit(){this.sendRequest()}sendRequest(){setInterval(()=>{this.http.get(QE.apiUrl+"/status").pipe(FI(2e3)).subscribe(s=>{this.data=s,this.alive=!0,this.coordsEmit.emit({lat:this.data.lat,lng:this.data.lng})},s=>{s.name==="TimeoutError"?this.alive=!1:this.status="Request failed: "+s.message})},5e3)}static \u0275fac=function(o){return new(o||e)(pv(G1),pv(vT))};static \u0275cmp=s0({type:e,selectors:[["app-drone-metrics-navbar"]],outputs:{coordsEmit:"coordsEmit"},standalone:!0,features:[l0],decls:3,vars:1,consts:[[1,"w-1/2","top-10","fixed","rounded-xl","left-1/4","opacity-80","bg-white","dark:bg-gray-600","flex","flex-wrap","items-center","justify-between","mx-auto","p-4"],[1,"inline-flex","items-center","bg-green-100","text-red-800","text-xs","font-medium","px-2.5","py-0.5","rounded-full","dark:bg-red-900","dark:text-red-300"],[1,"inline-flex","items-center","bg-green-100","text-green-800","text-xs","font-medium","px-2.5","py-0.5","rounded-full","dark:bg-green-900","dark:text-green-300"],[1,"w-2","h-2","me-1","bg-green-500","rounded-full"],[1,"text-sm","font-medium","text-gray-900","truncate","dark:text-white"],[1,"w-2","h-2","me-1","bg-red-500","rounded-full"]],template:function(o,s){o&1&&(my(0,"div",0),t_(1,HG,13,10)(2,$G,3,0,"span",1),xy()),o&2&&(hv(),__(s.alive?1:2))},dependencies:[eC]})}return e})();function GG(e,n){if(e&1){let r=Q_();my(0,"div",2)(1,"div",9),P0(),my(2,"svg",10),xv(3,"path",11),xy(),y_(),my(4,"span",12),yv(5,"Check icon"),xy()(),my(6,"div",13),yv(7),xy(),my(8,"button",14),Cv("click",function(){P_(r);let s=Mv();return R_(s.hideToast())}),my(9,"span",12),yv(10,"Close"),xy(),P0(),my(11,"svg",15),xv(12,"path",16),xy()()()}if(e&2){let r=Mv();hv(7),sT(r.toastMsg)}}var bF=(()=>{class e{droneLocation={lat:28.92,lng:79.96};onCoordsEmit(r){this.droneLocation=r}hideToast(){this.showToast=!1}showToast=!1;toastMsg="";ngOnChanges(r){r.showToast}handleAcknowldged(r){this.showToast=!0,r.takeoff?this.toastMsg="Takeoff Acknowledged":r.land&&(this.toastMsg="Landing Acknowledged"),setTimeout(()=>{this.showToast=!1},3e3)}waypoints=[];addWaypoint=!1;constructor(){this.zoom=2,this.lng=79.96534529104932,this.lat=28.925144999999997,this.waypoints=[{name:"Malay",lng:79.96,lat:28.91}]}zoom;lat;lng;handleInputChange(r){this.zoom=r.zoom,this.lat=r.lat,this.lng=r.lng}handleMapChange(r){if(r.newValue.lookAt){let o=r.newValue.lookAt;this.zoom=o.zoom,this.lat=o.position.lat,this.lng=o.position.lng}}goHome(r){r.toHome&&(this.zoom=2,this.lat=28.92,this.lng=79.96)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s0({type:e,selectors:[["app-mission-planning"]],standalone:!0,features:[$0,l0],decls:10,vars:8,consts:[[1,"container","mx-auto","relative","dark"],[3,"coordsEmit"],["id","toast-success","role","alert",1,"flex","top-32","fixed","right-0","items-center","w-full","max-w-xs","p-2","mb-4","bg-white","opacity-80","dark:bg-gray-600","rounded-lg","shadow"],[1,"fixed","top-0","left-0","w-full","h-screen","z-[-1]"],[3,"acknowldged"],[1,"h-full",3,"notify","zoom","lat","lng","droneLocation"],[1,"absolute","top-0","left-0","w-full"],[1,"relative","z-10"],[3,"notifyChange","notifyToHome","zoom","lat","lng"],[1,"inline-flex","items-center","justify-center","flex-shrink-0","w-8","h-8","text-green-500","bg-green-100","rounded-lg","dark:bg-green-800","dark:text-green-200"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"],[1,"sr-only"],[1,"ms-3","text-sm","font-normal","text-gray-900","dark:text-white"],["type","button","data-dismiss-target","#toast-default","aria-label","Close",1,"ms-auto","-mx-1.5","-my-1.5","bg-white","text-gray-400","hover:text-gray-900","rounded-lg","focus:ring-2","focus:ring-gray-300","p-1.5","hover:bg-gray-100","inline-flex","items-center","justify-center","h-8","w-8","dark:text-gray-500","dark:hover:text-white","dark:bg-gray-800","dark:hover:bg-gray-700",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"]],template:function(o,s){o&1&&(my(0,"div",0)(1,"app-drone-metrics-navbar",1),Cv("coordsEmit",function(h){return s.onCoordsEmit(h)}),xy(),t_(2,GG,13,1,"div",2),my(3,"div",3)(4,"app-mission-planner-sidebar",4),Cv("acknowldged",function(h){return s.handleAcknowldged(h)}),xy(),my(5,"app-jsmap",5),Cv("notify",function(h){return s.handleMapChange(h)}),xy()(),my(6,"div",6)(7,"div",7)(8,"app-mapposition",8),Cv("notifyChange",function(h){return s.handleInputChange(h)})("notifyToHome",function(h){return s.goHome(h)}),xy()(),xv(9,"app-waypoints-list"),xy()()),o&2&&(hv(2),__(s.showToast?2:-1),hv(3),j1("zoom",s.zoom)("lat",s.lat)("lng",s.lng)("droneLocation",s.droneLocation),hv(3),j1("zoom",s.zoom)("lat",s.lat)("lng",s.lng))},dependencies:[Y3,X3,mF,vF,_F]})}return e})();var wF=[{path:"",component:bF}];var EF={providers:[kL({eventCoalescing:!0}),W3(wF),e3()]};var qG=function(){function e(n,r){r===void 0&&(r=[]),this._eventType=n,this._eventFunctions=r}return e.prototype.init=function(){var n=this;this._eventFunctions.forEach(function(r){typeof window<"u"&&window.addEventListener(n._eventType,r)})},e}(),xF=qG;var WG=function(){function e(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return e.prototype.addInstance=function(n,r,o,s){if(s===void 0&&(s=!1),!this._instances[n])return console.warn("Flowbite: Component ".concat(n," does not exist.")),!1;if(this._instances[n][o]&&!s){console.warn("Flowbite: Instance with ID ".concat(o," already exists."));return}s&&this._instances[n][o]&&this._instances[n][o].destroyAndRemoveInstance(),this._instances[n][o||this._generateRandomId()]=r},e.prototype.getAllInstances=function(){return this._instances},e.prototype.getInstances=function(n){return this._instances[n]?this._instances[n]:(console.warn("Flowbite: Component ".concat(n," does not exist.")),!1)},e.prototype.getInstance=function(n,r){if(this._componentAndInstanceCheck(n,r)){if(!this._instances[n][r]){console.warn("Flowbite: Instance with ID ".concat(r," does not exist."));return}return this._instances[n][r]}},e.prototype.destroyAndRemoveInstance=function(n,r){this._componentAndInstanceCheck(n,r)&&(this.destroyInstanceObject(n,r),this.removeInstance(n,r))},e.prototype.removeInstance=function(n,r){this._componentAndInstanceCheck(n,r)&&delete this._instances[n][r]},e.prototype.destroyInstanceObject=function(n,r){this._componentAndInstanceCheck(n,r)&&this._instances[n][r].destroy()},e.prototype.instanceExists=function(n,r){return!(!this._instances[n]||!this._instances[n][r])},e.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},e.prototype._componentAndInstanceCheck=function(n,r){return this._instances[n]?this._instances[n][r]?!0:(console.warn("Flowbite: Instance with ID ".concat(r," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(n," does not exist.")),!1)},e}(),TF=new WG,ky=TF;typeof window<"u"&&(window.FlowbiteInstances=TF);var NC=function(){return NC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},NC.apply(this,arguments)},PC={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},YG={id:null,override:!0},AF=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=[]),o===void 0&&(o=PC),s===void 0&&(s=YG),this._instanceId=s.id?s.id:n.id,this._accordionEl=n,this._items=r,this._options=NC(NC({},PC),o),this._initialized=!1,this.init(),ky.addInstance("Accordion",this,this._instanceId,s.override)}return e.prototype.init=function(){var n=this;this._items.length&&!this._initialized&&(this._items.forEach(function(r){r.active&&n.open(r.id);var o=function(){n.toggle(r.id)};r.triggerEl.addEventListener("click",o),r.clickHandler=o}),this._initialized=!0)},e.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(n){n.triggerEl.removeEventListener("click",n.clickHandler),delete n.clickHandler}),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("Accordion",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getItem=function(n){return this._items.filter(function(r){return r.id===n})[0]},e.prototype.open=function(n){var r,o,s=this,l=this.getItem(n);this._options.alwaysOpen||this._items.map(function(h){var p,d;h!==l&&((p=h.triggerEl.classList).remove.apply(p,s._options.activeClasses.split(" ")),(d=h.triggerEl.classList).add.apply(d,s._options.inactiveClasses.split(" ")),h.targetEl.classList.add("hidden"),h.triggerEl.setAttribute("aria-expanded","false"),h.active=!1,h.iconEl&&h.iconEl.classList.add("rotate-180"))}),(r=l.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(o=l.triggerEl.classList).remove.apply(o,this._options.inactiveClasses.split(" ")),l.triggerEl.setAttribute("aria-expanded","true"),l.targetEl.classList.remove("hidden"),l.active=!0,l.iconEl&&l.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,l)},e.prototype.toggle=function(n){var r=this.getItem(n);r.active?this.close(n):this.open(n),this._options.onToggle(this,r)},e.prototype.close=function(n){var r,o,s=this.getItem(n);(r=s.triggerEl.classList).remove.apply(r,this._options.activeClasses.split(" ")),(o=s.triggerEl.classList).add.apply(o,this._options.inactiveClasses.split(" ")),s.targetEl.classList.add("hidden"),s.triggerEl.setAttribute("aria-expanded","false"),s.active=!1,s.iconEl&&s.iconEl.classList.add("rotate-180"),this._options.onClose(this,s)},e.prototype.updateOnOpen=function(n){this._options.onOpen=n},e.prototype.updateOnClose=function(n){this._options.onClose=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function ix(){document.querySelectorAll("[data-accordion]").forEach(function(e){var n=e.getAttribute("data-accordion"),r=e.getAttribute("data-active-classes"),o=e.getAttribute("data-inactive-classes"),s=[];e.querySelectorAll("[data-accordion-target]").forEach(function(l){if(l.closest("[data-accordion]")===e){var h={id:l.getAttribute("data-accordion-target"),triggerEl:l,targetEl:document.querySelector(l.getAttribute("data-accordion-target")),iconEl:l.querySelector("[data-accordion-icon]"),active:l.getAttribute("aria-expanded")==="true"};s.push(h)}}),new AF(e,s,{alwaysOpen:n==="open",activeClasses:r||PC.activeClasses,inactiveClasses:o||PC.inactiveClasses})})}typeof window<"u"&&(window.Accordion=AF,window.initAccordions=ix);var RC=function(){return RC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},RC.apply(this,arguments)},SF={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},ZG={id:null,override:!0},K2=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=SF),s===void 0&&(s=ZG),this._instanceId=s.id?s.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=RC(RC({},SF),o),this._visible=!1,this._initialized=!1,this.init(),ky.addInstance("Collapse",this,this._instanceId,s.override)}return e.prototype.init=function(){var n=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){n.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("Collapse",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},e.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},e.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},e.prototype.updateOnCollapse=function(n){this._options.onCollapse=n},e.prototype.updateOnExpand=function(n){this._options.onExpand=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function ox(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(e){var n=e.getAttribute("data-collapse-toggle"),r=document.getElementById(n);r?ky.instanceExists("Collapse",r.getAttribute("id"))?new K2(r,e,{},{id:r.getAttribute("id")+"_"+ky._generateRandomId()}):new K2(r,e):console.error('The target element with id "'.concat(n,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=K2,window.initCollapses=ox);var Fw=function(){return Fw=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fw.apply(this,arguments)},LC={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},XG={id:null,override:!0},CF=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=[]),o===void 0&&(o=LC),s===void 0&&(s=XG),this._instanceId=s.id?s.id:n.id,this._carouselEl=n,this._items=r,this._options=Fw(Fw(Fw({},LC),o),{indicators:Fw(Fw({},LC.indicators),o.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),ky.addInstance("Carousel",this,this._instanceId,s.override)}return e.prototype.init=function(){var n=this;this._items.length&&!this._initialized&&(this._items.map(function(r){r.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(r,o){r.el.addEventListener("click",function(){n.slideTo(o)})}),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("Carousel",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getItem=function(n){return this._items[n]},e.prototype.slideTo=function(n){var r=this._items[n],o={left:r.position===0?this._items[this._items.length-1]:this._items[r.position-1],middle:r,right:r.position===this._items.length-1?this._items[0]:this._items[r.position+1]};this._rotate(o),this._setActiveItem(r),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},e.prototype.next=function(){var n=this.getActiveItem(),r=null;n.position===this._items.length-1?r=this._items[0]:r=this._items[n.position+1],this.slideTo(r.position),this._options.onNext(this)},e.prototype.prev=function(){var n=this.getActiveItem(),r=null;n.position===0?r=this._items[this._items.length-1]:r=this._items[n.position-1],this.slideTo(r.position),this._options.onPrev(this)},e.prototype._rotate=function(n){if(this._items.map(function(r){r.el.classList.add("hidden")}),this._items.length===1){n.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),n.middle.el.classList.add("translate-x-0","z-20");return}n.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),n.left.el.classList.add("-translate-x-full","z-10"),n.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),n.middle.el.classList.add("translate-x-0","z-30"),n.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),n.right.el.classList.add("translate-x-full","z-20")},e.prototype.cycle=function(){var n=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){n.next()},this._intervalDuration))},e.prototype.pause=function(){clearInterval(this._intervalInstance)},e.prototype.getActiveItem=function(){return this._activeItem},e.prototype._setActiveItem=function(n){var r,o,s=this;this._activeItem=n;var l=n.position;this._indicators.length&&(this._indicators.map(function(h){var p,d;h.el.setAttribute("aria-current","false"),(p=h.el.classList).remove.apply(p,s._options.indicators.activeClasses.split(" ")),(d=h.el.classList).add.apply(d,s._options.indicators.inactiveClasses.split(" "))}),(r=this._indicators[l].el.classList).add.apply(r,this._options.indicators.activeClasses.split(" ")),(o=this._indicators[l].el.classList).remove.apply(o,this._options.indicators.inactiveClasses.split(" ")),this._indicators[l].el.setAttribute("aria-current","true"))},e.prototype.updateOnNext=function(n){this._options.onNext=n},e.prototype.updateOnPrev=function(n){this._options.onPrev=n},e.prototype.updateOnChange=function(n){this._options.onChange=n},e}();function sx(){document.querySelectorAll("[data-carousel]").forEach(function(e){var n=e.getAttribute("data-carousel-interval"),r=e.getAttribute("data-carousel")==="slide",o=[],s=0;e.querySelectorAll("[data-carousel-item]").length&&Array.from(e.querySelectorAll("[data-carousel-item]")).map(function(g,y){o.push({position:y,el:g}),g.getAttribute("data-carousel-item")==="active"&&(s=y)});var l=[];e.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(e.querySelectorAll("[data-carousel-slide-to]")).map(function(g){l.push({position:parseInt(g.getAttribute("data-carousel-slide-to")),el:g})});var h=new CF(e,o,{defaultPosition:s,indicators:{items:l},interval:n||LC.interval});r&&h.cycle();var p=e.querySelector("[data-carousel-next]"),d=e.querySelector("[data-carousel-prev]");p&&p.addEventListener("click",function(){h.next()}),d&&d.addEventListener("click",function(){h.prev()})})}typeof window<"u"&&(window.Carousel=CF,window.initCarousels=sx);var jC=function(){return jC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jC.apply(this,arguments)},IF={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},KG={id:null,override:!0},DF=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=IF),s===void 0&&(s=KG),this._instanceId=s.id?s.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=jC(jC({},IF),o),this._initialized=!1,this.init(),ky.addInstance("Dismiss",this,this._instanceId,s.override)}return e.prototype.init=function(){var n=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){n.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("Dismiss",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.hide=function(){var n=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){n._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},e.prototype.updateOnHide=function(n){this._options.onHide=n},e}();function ax(){document.querySelectorAll("[data-dismiss-target]").forEach(function(e){var n=e.getAttribute("data-dismiss-target"),r=document.querySelector(n);r?new DF(r,e):console.error('The dismiss element with id "'.concat(n,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=DF,window.initDismisses=ax);var Bv="top",n0="bottom",Xv="right",$v="left",FC="auto",q1=[Bv,n0,Xv,$v],l1="start",Bw="end",kF="clippingParents",BC="viewport",lx="popper",MF="reference",J2=q1.reduce(function(e,n){return e.concat([n+"-"+l1,n+"-"+Bw])},[]),VC=[].concat(q1,[FC]).reduce(function(e,n){return e.concat([n,n+"-"+l1,n+"-"+Bw])},[]),JG="beforeRead",QG="read",t9="afterRead",e9="beforeMain",n9="main",r9="afterMain",i9="beforeWrite",o9="write",s9="afterWrite",OF=[JG,QG,t9,e9,n9,r9,i9,o9,s9];function u0(e){return e?(e.nodeName||"").toLowerCase():null}function Iv(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function n_(e){var n=Iv(e).Element;return e instanceof n||e instanceof Element}function r0(e){var n=Iv(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function ux(e){if(typeof ShadowRoot>"u")return!1;var n=Iv(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function a9(e){var n=e.state;Object.keys(n.elements).forEach(function(r){var o=n.styles[r]||{},s=n.attributes[r]||{},l=n.elements[r];!r0(l)||!u0(l)||(Object.assign(l.style,o),Object.keys(s).forEach(function(h){var p=s[h];p===!1?l.removeAttribute(h):l.setAttribute(h,p===!0?"":p)}))})}function l9(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(o){var s=n.elements[o],l=n.attributes[o]||{},h=Object.keys(n.styles.hasOwnProperty(o)?n.styles[o]:r[o]),p=h.reduce(function(d,g){return d[g]="",d},{});!r0(s)||!u0(s)||(Object.assign(s.style,p),Object.keys(l).forEach(function(d){s.removeAttribute(d)}))})}}var NF={name:"applyStyles",enabled:!0,phase:"write",fn:a9,effect:l9,requires:["computeStyles"]};function c0(e){return e.split("-")[0]}var w_=Math.max,Vw=Math.min,u1=Math.round;function cx(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function YT(){return!/^((?!chrome|android).)*safari/i.test(cx())}function r_(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),s=1,l=1;n&&r0(e)&&(s=e.offsetWidth>0&&u1(o.width)/e.offsetWidth||1,l=e.offsetHeight>0&&u1(o.height)/e.offsetHeight||1);var h=n_(e)?Iv(e):window,p=h.visualViewport,d=!YT()&&r,g=(o.left+(d&&p?p.offsetLeft:0))/s,y=(o.top+(d&&p?p.offsetTop:0))/l,v=o.width/s,_=o.height/l;return{width:v,height:_,top:y,right:g+v,bottom:y+_,left:g,x:g,y}}function Uw(e){var n=r_(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-o)<=1&&(o=n.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function ZT(e,n){var r=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(r&&ux(r)){var o=n;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function C0(e){return Iv(e).getComputedStyle(e)}function Q2(e){return["table","td","th"].indexOf(u0(e))>=0}function g0(e){return((n_(e)?e.ownerDocument:e.document)||window.document).documentElement}function c1(e){return u0(e)==="html"?e:e.assignedSlot||e.parentNode||(ux(e)?e.host:null)||g0(e)}function PF(e){return!r0(e)||C0(e).position==="fixed"?null:e.offsetParent}function u9(e){var n=/firefox/i.test(cx()),r=/Trident/i.test(cx());if(r&&r0(e)){var o=C0(e);if(o.position==="fixed")return null}var s=c1(e);for(ux(s)&&(s=s.host);r0(s)&&["html","body"].indexOf(u0(s))<0;){var l=C0(s);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||n&&l.willChange==="filter"||n&&l.filter&&l.filter!=="none")return s;s=s.parentNode}return null}function E_(e){for(var n=Iv(e),r=PF(e);r&&Q2(r)&&C0(r).position==="static";)r=PF(r);return r&&(u0(r)==="html"||u0(r)==="body"&&C0(r).position==="static")?n:r||u9(e)||n}function zw(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Hw(e,n,r){return w_(e,Vw(n,r))}function RF(e,n,r){var o=Hw(e,n,r);return o>r?r:o}function XT(){return{top:0,right:0,bottom:0,left:0}}function KT(e){return Object.assign({},XT(),e)}function JT(e,n){return n.reduce(function(r,o){return r[o]=e,r},{})}var c9=function(n,r){return n=typeof n=="function"?n(Object.assign({},r.rects,{placement:r.placement})):n,KT(typeof n!="number"?n:JT(n,q1))};function h9(e){var n,r=e.state,o=e.name,s=e.options,l=r.elements.arrow,h=r.modifiersData.popperOffsets,p=c0(r.placement),d=zw(p),g=[$v,Xv].indexOf(p)>=0,y=g?"height":"width";if(!(!l||!h)){var v=c9(s.padding,r),_=Uw(l),w=d==="y"?Bv:$v,I=d==="y"?n0:Xv,G=r.rects.reference[y]+r.rects.reference[d]-h[d]-r.rects.popper[y],_t=h[d]-r.rects.reference[d],_r=E_(l),_o=_r?d==="y"?_r.clientHeight||0:_r.clientWidth||0:0,Ca=G/2-_t/2,_a=v[w],_l=_o-_[y]-v[I],Qa=_o/2-_[y]/2+Ca,Kc=Hw(_a,Qa,_l),jc=d;r.modifiersData[o]=(n={},n[jc]=Kc,n.centerOffset=Kc-Qa,n)}}function f9(e){var n=e.state,r=e.options,o=r.element,s=o===void 0?"[data-popper-arrow]":o;s!=null&&(typeof s=="string"&&(s=n.elements.popper.querySelector(s),!s)||ZT(n.elements.popper,s)&&(n.elements.arrow=s))}var LF={name:"arrow",enabled:!0,phase:"main",fn:h9,effect:f9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function i_(e){return e.split("-")[1]}var p9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function d9(e,n){var r=e.x,o=e.y,s=n.devicePixelRatio||1;return{x:u1(r*s)/s||0,y:u1(o*s)/s||0}}function jF(e){var n,r=e.popper,o=e.popperRect,s=e.placement,l=e.variation,h=e.offsets,p=e.position,d=e.gpuAcceleration,g=e.adaptive,y=e.roundOffsets,v=e.isFixed,_=h.x,w=_===void 0?0:_,I=h.y,G=I===void 0?0:I,_t=typeof y=="function"?y({x:w,y:G}):{x:w,y:G};w=_t.x,G=_t.y;var _r=h.hasOwnProperty("x"),_o=h.hasOwnProperty("y"),Ca=$v,_a=Bv,_l=window;if(g){var Qa=E_(r),Kc="clientHeight",jc="clientWidth";if(Qa===Iv(r)&&(Qa=g0(r),C0(Qa).position!=="static"&&p==="absolute"&&(Kc="scrollHeight",jc="scrollWidth")),Qa=Qa,s===Bv||(s===$v||s===Xv)&&l===Bw){_a=n0;var _h=v&&Qa===_l&&_l.visualViewport?_l.visualViewport.height:Qa[Kc];G-=_h-o.height,G*=d?1:-1}if(s===$v||(s===Bv||s===n0)&&l===Bw){Ca=Xv;var _m=v&&Qa===_l&&_l.visualViewport?_l.visualViewport.width:Qa[jc];w-=_m-o.width,w*=d?1:-1}}var ry=Object.assign({position:p},g&&p9),uy=y===!0?d9({x:w,y:G},Iv(r)):{x:w,y:G};if(w=uy.x,G=uy.y,d){var ay;return Object.assign({},ry,(ay={},ay[_a]=_o?"0":"",ay[Ca]=_r?"0":"",ay.transform=(_l.devicePixelRatio||1)<=1?"translate("+w+"px, "+G+"px)":"translate3d("+w+"px, "+G+"px, 0)",ay))}return Object.assign({},ry,(n={},n[_a]=_o?G+"px":"",n[Ca]=_r?w+"px":"",n.transform="",n))}function g9(e){var n=e.state,r=e.options,o=r.gpuAcceleration,s=o===void 0?!0:o,l=r.adaptive,h=l===void 0?!0:l,p=r.roundOffsets,d=p===void 0?!0:p,g={placement:c0(n.placement),variation:i_(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:s,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,jF(Object.assign({},g,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:h,roundOffsets:d})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,jF(Object.assign({},g,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var FF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:g9,data:{}};var UC={passive:!0};function m9(e){var n=e.state,r=e.instance,o=e.options,s=o.scroll,l=s===void 0?!0:s,h=o.resize,p=h===void 0?!0:h,d=Iv(n.elements.popper),g=[].concat(n.scrollParents.reference,n.scrollParents.popper);return l&&g.forEach(function(y){y.addEventListener("scroll",r.update,UC)}),p&&d.addEventListener("resize",r.update,UC),function(){l&&g.forEach(function(y){y.removeEventListener("scroll",r.update,UC)}),p&&d.removeEventListener("resize",r.update,UC)}}var BF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:m9,data:{}};var y9={left:"right",right:"left",bottom:"top",top:"bottom"};function hx(e){return e.replace(/left|right|bottom|top/g,function(n){return y9[n]})}var v9={start:"end",end:"start"};function zC(e){return e.replace(/start|end/g,function(n){return v9[n]})}function $w(e){var n=Iv(e),r=n.pageXOffset,o=n.pageYOffset;return{scrollLeft:r,scrollTop:o}}function Gw(e){return r_(g0(e)).left+$w(e).scrollLeft}function tO(e,n){var r=Iv(e),o=g0(e),s=r.visualViewport,l=o.clientWidth,h=o.clientHeight,p=0,d=0;if(s){l=s.width,h=s.height;var g=YT();(g||!g&&n==="fixed")&&(p=s.offsetLeft,d=s.offsetTop)}return{width:l,height:h,x:p+Gw(e),y:d}}function eO(e){var n,r=g0(e),o=$w(e),s=(n=e.ownerDocument)==null?void 0:n.body,l=w_(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),h=w_(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),p=-o.scrollLeft+Gw(e),d=-o.scrollTop;return C0(s||r).direction==="rtl"&&(p+=w_(r.clientWidth,s?s.clientWidth:0)-l),{width:l,height:h,x:p,y:d}}function qw(e){var n=C0(e),r=n.overflow,o=n.overflowX,s=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+o)}function HC(e){return["html","body","#document"].indexOf(u0(e))>=0?e.ownerDocument.body:r0(e)&&qw(e)?e:HC(c1(e))}function W1(e,n){var r;n===void 0&&(n=[]);var o=HC(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),l=Iv(o),h=s?[l].concat(l.visualViewport||[],qw(o)?o:[]):o,p=n.concat(h);return s?p:p.concat(W1(c1(h)))}function fx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function _9(e,n){var r=r_(e,!1,n==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function VF(e,n,r){return n===BC?fx(tO(e,r)):n_(n)?_9(n,r):fx(eO(g0(e)))}function b9(e){var n=W1(c1(e)),r=["absolute","fixed"].indexOf(C0(e).position)>=0,o=r&&r0(e)?E_(e):e;return n_(o)?n.filter(function(s){return n_(s)&&ZT(s,o)&&u0(s)!=="body"}):[]}function nO(e,n,r,o){var s=n==="clippingParents"?b9(e):[].concat(n),l=[].concat(s,[r]),h=l[0],p=l.reduce(function(d,g){var y=VF(e,g,o);return d.top=w_(y.top,d.top),d.right=Vw(y.right,d.right),d.bottom=Vw(y.bottom,d.bottom),d.left=w_(y.left,d.left),d},VF(e,h,o));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function QT(e){var n=e.reference,r=e.element,o=e.placement,s=o?c0(o):null,l=o?i_(o):null,h=n.x+n.width/2-r.width/2,p=n.y+n.height/2-r.height/2,d;switch(s){case Bv:d={x:h,y:n.y-r.height};break;case n0:d={x:h,y:n.y+n.height};break;case Xv:d={x:n.x+n.width,y:p};break;case $v:d={x:n.x-r.width,y:p};break;default:d={x:n.x,y:n.y}}var g=s?zw(s):null;if(g!=null){var y=g==="y"?"height":"width";switch(l){case l1:d[g]=d[g]-(n[y]/2-r[y]/2);break;case Bw:d[g]=d[g]+(n[y]/2-r[y]/2);break;default:}}return d}function x_(e,n){n===void 0&&(n={});var r=n,o=r.placement,s=o===void 0?e.placement:o,l=r.strategy,h=l===void 0?e.strategy:l,p=r.boundary,d=p===void 0?kF:p,g=r.rootBoundary,y=g===void 0?BC:g,v=r.elementContext,_=v===void 0?lx:v,w=r.altBoundary,I=w===void 0?!1:w,G=r.padding,_t=G===void 0?0:G,_r=KT(typeof _t!="number"?_t:JT(_t,q1)),_o=_===lx?MF:lx,Ca=e.rects.popper,_a=e.elements[I?_o:_],_l=nO(n_(_a)?_a:_a.contextElement||g0(e.elements.popper),d,y,h),Qa=r_(e.elements.reference),Kc=QT({reference:Qa,element:Ca,strategy:"absolute",placement:s}),jc=fx(Object.assign({},Ca,Kc)),_h=_===lx?jc:Qa,_m={top:_l.top-_h.top+_r.top,bottom:_h.bottom-_l.bottom+_r.bottom,left:_l.left-_h.left+_r.left,right:_h.right-_l.right+_r.right},ry=e.modifiersData.offset;if(_===lx&&ry){var uy=ry[s];Object.keys(_m).forEach(function(ay){var ey=[Xv,n0].indexOf(ay)>=0?1:-1,_y=[Bv,n0].indexOf(ay)>=0?"y":"x";_m[ay]+=uy[_y]*ey})}return _m}function rO(e,n){n===void 0&&(n={});var r=n,o=r.placement,s=r.boundary,l=r.rootBoundary,h=r.padding,p=r.flipVariations,d=r.allowedAutoPlacements,g=d===void 0?VC:d,y=i_(o),v=y?p?J2:J2.filter(function(I){return i_(I)===y}):q1,_=v.filter(function(I){return g.indexOf(I)>=0});_.length===0&&(_=v);var w=_.reduce(function(I,G){return I[G]=x_(e,{placement:G,boundary:s,rootBoundary:l,padding:h})[c0(G)],I},{});return Object.keys(w).sort(function(I,G){return w[I]-w[G]})}function w9(e){if(c0(e)===FC)return[];var n=hx(e);return[zC(e),n,zC(n)]}function E9(e){var n=e.state,r=e.options,o=e.name;if(!n.modifiersData[o]._skip){for(var s=r.mainAxis,l=s===void 0?!0:s,h=r.altAxis,p=h===void 0?!0:h,d=r.fallbackPlacements,g=r.padding,y=r.boundary,v=r.rootBoundary,_=r.altBoundary,w=r.flipVariations,I=w===void 0?!0:w,G=r.allowedAutoPlacements,_t=n.options.placement,_r=c0(_t),_o=_r===_t,Ca=d||(_o||!I?[hx(_t)]:w9(_t)),_a=[_t].concat(Ca).reduce(function(Gv,_v){return Gv.concat(c0(_v)===FC?rO(n,{placement:_v,boundary:y,rootBoundary:v,padding:g,flipVariations:I,allowedAutoPlacements:G}):_v)},[]),_l=n.rects.reference,Qa=n.rects.popper,Kc=new Map,jc=!0,_h=_a[0],_m=0;_m<_a.length;_m++){var ry=_a[_m],uy=c0(ry),ay=i_(ry)===l1,ey=[Bv,n0].indexOf(uy)>=0,_y=ey?"width":"height",Ey=x_(n,{placement:ry,boundary:y,rootBoundary:v,altBoundary:_,padding:g}),My=ey?ay?Xv:$v:ay?n0:Bv;_l[_y]>Qa[_y]&&(My=hx(My));var Ny=hx(My),Py=[];if(l&&Py.push(Ey[uy]<=0),p&&Py.push(Ey[My]<=0,Ey[Ny]<=0),Py.every(function(Gv){return Gv})){_h=ry,jc=!1;break}Kc.set(ry,Py)}if(jc)for(var gv=I?3:1,sv=function(_v){var i0=_a.find(function(T0){var Ov=Kc.get(T0);if(Ov)return Ov.slice(0,_v).every(function(Yy){return Yy})});if(i0)return _h=i0,"break"},Kv=gv;Kv>0;Kv--){var Ty=sv(Kv);if(Ty==="break")break}n.placement!==_h&&(n.modifiersData[o]._skip=!0,n.placement=_h,n.reset=!0)}}var UF={name:"flip",enabled:!0,phase:"main",fn:E9,requiresIfExists:["offset"],data:{_skip:!1}};function zF(e,n,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-n.height-r.y,right:e.right-n.width+r.x,bottom:e.bottom-n.height+r.y,left:e.left-n.width-r.x}}function HF(e){return[Bv,Xv,n0,$v].some(function(n){return e[n]>=0})}function x9(e){var n=e.state,r=e.name,o=n.rects.reference,s=n.rects.popper,l=n.modifiersData.preventOverflow,h=x_(n,{elementContext:"reference"}),p=x_(n,{altBoundary:!0}),d=zF(h,o),g=zF(p,s,l),y=HF(d),v=HF(g);n.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:g,isReferenceHidden:y,hasPopperEscaped:v},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":y,"data-popper-escaped":v})}var $F={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:x9};function T9(e,n,r){var o=c0(e),s=[$v,Bv].indexOf(o)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},n,{placement:e})):r,h=l[0],p=l[1];return h=h||0,p=(p||0)*s,[$v,Xv].indexOf(o)>=0?{x:p,y:h}:{x:h,y:p}}function A9(e){var n=e.state,r=e.options,o=e.name,s=r.offset,l=s===void 0?[0,0]:s,h=VC.reduce(function(y,v){return y[v]=T9(v,n.rects,l),y},{}),p=h[n.placement],d=p.x,g=p.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=d,n.modifiersData.popperOffsets.y+=g),n.modifiersData[o]=h}var GF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:A9};function S9(e){var n=e.state,r=e.name;n.modifiersData[r]=QT({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var qF={name:"popperOffsets",enabled:!0,phase:"read",fn:S9,data:{}};function iO(e){return e==="x"?"y":"x"}function C9(e){var n=e.state,r=e.options,o=e.name,s=r.mainAxis,l=s===void 0?!0:s,h=r.altAxis,p=h===void 0?!1:h,d=r.boundary,g=r.rootBoundary,y=r.altBoundary,v=r.padding,_=r.tether,w=_===void 0?!0:_,I=r.tetherOffset,G=I===void 0?0:I,_t=x_(n,{boundary:d,rootBoundary:g,padding:v,altBoundary:y}),_r=c0(n.placement),_o=i_(n.placement),Ca=!_o,_a=zw(_r),_l=iO(_a),Qa=n.modifiersData.popperOffsets,Kc=n.rects.reference,jc=n.rects.popper,_h=typeof G=="function"?G(Object.assign({},n.rects,{placement:n.placement})):G,_m=typeof _h=="number"?{mainAxis:_h,altAxis:_h}:Object.assign({mainAxis:0,altAxis:0},_h),ry=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,uy={x:0,y:0};if(Qa){if(l){var ay,ey=_a==="y"?Bv:$v,_y=_a==="y"?n0:Xv,Ey=_a==="y"?"height":"width",My=Qa[_a],Ny=My+_t[ey],Py=My-_t[_y],gv=w?-jc[Ey]/2:0,sv=_o===l1?Kc[Ey]:jc[Ey],Kv=_o===l1?-jc[Ey]:-Kc[Ey],Ty=n.elements.arrow,Gv=w&&Ty?Uw(Ty):{width:0,height:0},_v=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:XT(),i0=_v[ey],T0=_v[_y],Ov=Hw(0,Kc[Ey],Gv[Ey]),Yy=Ca?Kc[Ey]/2-gv-Ov-i0-_m.mainAxis:sv-Ov-i0-_m.mainAxis,Jv=Ca?-Kc[Ey]/2+gv+Ov+T0+_m.mainAxis:Kv+Ov+T0+_m.mainAxis,Y0=n.elements.arrow&&E_(n.elements.arrow),T_=Y0?_a==="y"?Y0.clientTop||0:Y0.clientLeft||0:0,A_=(ay=ry?.[_a])!=null?ay:0,L0=My+Yy-A_-T_,s_=My+Jv-A_,j0=Hw(w?Vw(Ny,L0):Ny,My,w?w_(Py,s_):Py);Qa[_a]=j0,uy[_a]=j0-My}if(p){var m0,Qv=_a==="x"?Bv:$v,V_=_a==="x"?n0:Xv,qv=Qa[_l],h0=_l==="y"?"height":"width",Nv=qv+_t[Qv],ub=qv-_t[V_],U_=[Bv,$v].indexOf(_r)!==-1,S_=(m0=ry?.[_l])!=null?m0:0,z_=U_?Nv:qv-Kc[h0]-jc[h0]-S_+_m.altAxis,tE=U_?qv+Kc[h0]+jc[h0]-S_-_m.altAxis:ub,_b=w&&U_?RF(z_,qv,tE):Hw(w?z_:Nv,qv,w?tE:ub);Qa[_l]=_b,uy[_l]=_b-qv}n.modifiersData[o]=uy}}var WF={name:"preventOverflow",enabled:!0,phase:"main",fn:C9,requiresIfExists:["offset"]};function oO(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function sO(e){return e===Iv(e)||!r0(e)?$w(e):oO(e)}function I9(e){var n=e.getBoundingClientRect(),r=u1(n.width)/e.offsetWidth||1,o=u1(n.height)/e.offsetHeight||1;return r!==1||o!==1}function aO(e,n,r){r===void 0&&(r=!1);var o=r0(n),s=r0(n)&&I9(n),l=g0(n),h=r_(e,s,r),p={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!r)&&((u0(n)!=="body"||qw(l))&&(p=sO(n)),r0(n)?(d=r_(n,!0),d.x+=n.clientLeft,d.y+=n.clientTop):l&&(d.x=Gw(l))),{x:h.left+p.scrollLeft-d.x,y:h.top+p.scrollTop-d.y,width:h.width,height:h.height}}function D9(e){var n=new Map,r=new Set,o=[];e.forEach(function(l){n.set(l.name,l)});function s(l){r.add(l.name);var h=[].concat(l.requires||[],l.requiresIfExists||[]);h.forEach(function(p){if(!r.has(p)){var d=n.get(p);d&&s(d)}}),o.push(l)}return e.forEach(function(l){r.has(l.name)||s(l)}),o}function lO(e){var n=D9(e);return OF.reduce(function(r,o){return r.concat(n.filter(function(s){return s.phase===o}))},[])}function uO(e){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(e())})})),n}}function cO(e){var n=e.reduce(function(r,o){var s=r[o.name];return r[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,r},{});return Object.keys(n).map(function(r){return n[r]})}var YF={placement:"bottom",modifiers:[],strategy:"absolute"};function ZF(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return!n.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function XF(e){e===void 0&&(e={});var n=e,r=n.defaultModifiers,o=r===void 0?[]:r,s=n.defaultOptions,l=s===void 0?YF:s;return function(p,d,g){g===void 0&&(g=l);var y={placement:"bottom",orderedModifiers:[],options:Object.assign({},YF,l),modifiersData:{},elements:{reference:p,popper:d},attributes:{},styles:{}},v=[],_=!1,w={state:y,setOptions:function(_r){var _o=typeof _r=="function"?_r(y.options):_r;G(),y.options=Object.assign({},l,y.options,_o),y.scrollParents={reference:n_(p)?W1(p):p.contextElement?W1(p.contextElement):[],popper:W1(d)};var Ca=lO(cO([].concat(o,y.options.modifiers)));return y.orderedModifiers=Ca.filter(function(_a){return _a.enabled}),I(),w.update()},forceUpdate:function(){if(!_){var _r=y.elements,_o=_r.reference,Ca=_r.popper;if(ZF(_o,Ca)){y.rects={reference:aO(_o,E_(Ca),y.options.strategy==="fixed"),popper:Uw(Ca)},y.reset=!1,y.placement=y.options.placement,y.orderedModifiers.forEach(function(_m){return y.modifiersData[_m.name]=Object.assign({},_m.data)});for(var _a=0;_a<y.orderedModifiers.length;_a++){if(y.reset===!0){y.reset=!1,_a=-1;continue}var _l=y.orderedModifiers[_a],Qa=_l.fn,Kc=_l.options,jc=Kc===void 0?{}:Kc,_h=_l.name;typeof Qa=="function"&&(y=Qa({state:y,options:jc,name:_h,instance:w})||y)}}}},update:uO(function(){return new Promise(function(_t){w.forceUpdate(),_t(y)})}),destroy:function(){G(),_=!0}};if(!ZF(p,d))return w;w.setOptions(g).then(function(_t){!_&&g.onFirstUpdate&&g.onFirstUpdate(_t)});function I(){y.orderedModifiers.forEach(function(_t){var _r=_t.name,_o=_t.options,Ca=_o===void 0?{}:_o,_a=_t.effect;if(typeof _a=="function"){var _l=_a({state:y,name:_r,instance:w,options:Ca}),Qa=function(){};v.push(_l||Qa)}})}function G(){v.forEach(function(_t){return _t()}),v=[]}return w}}var k9=[BF,qF,FF,NF,GF,UF,WF,LF,$F],Ww=XF({defaultModifiers:k9});var Y1=function(){return Y1=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Y1.apply(this,arguments)},$C=function(e,n,r){if(r||arguments.length===2)for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))},Z1={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},M9={id:null,override:!0},KF=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=Z1),s===void 0&&(s=M9),this._instanceId=s.id?s.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=Y1(Y1({},Z1),o),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),ky.addInstance("Dropdown",this,this._instanceId,s.override)}return e.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},e.prototype.destroy=function(){var n=this,r=this._getTriggerEvents();this._options.triggerType==="click"&&r.showEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._clickHandler)}),this._options.triggerType==="hover"&&(r.showEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._hoverShowTriggerElHandler),n._targetEl.removeEventListener(o,n._hoverShowTargetElHandler)}),r.hideEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._hoverHideHandler),n._targetEl.removeEventListener(o,n._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},e.prototype.removeInstance=function(){ky.removeInstance("Dropdown",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._setupEventListeners=function(){var n=this,r=this._getTriggerEvents();this._clickHandler=function(){n.toggle()},this._options.triggerType==="click"&&r.showEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._clickHandler)}),this._hoverShowTriggerElHandler=function(o){o.type==="click"?n.toggle():setTimeout(function(){n.show()},n._options.delay)},this._hoverShowTargetElHandler=function(){n.show()},this._hoverHideHandler=function(){setTimeout(function(){n._targetEl.matches(":hover")||n.hide()},n._options.delay)},this._options.triggerType==="hover"&&(r.showEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._hoverShowTriggerElHandler),n._targetEl.addEventListener(o,n._hoverShowTargetElHandler)}),r.hideEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._hoverHideHandler),n._targetEl.addEventListener(o,n._hoverHideHandler)}))},e.prototype._createPopperInstance=function(){return Ww(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},e.prototype._setupClickOutsideListener=function(){var n=this;this._clickOutsideEventListener=function(r){n._handleClickOutside(r,n._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._handleClickOutside=function(n,r){var o=n.target,s=this._options.ignoreClickOutsideClass,l=!1;if(s){var h=document.querySelectorAll(".".concat(s));h.forEach(function(p){if(p.contains(o)){l=!0;return}})}o!==r&&!r.contains(o)&&!this._triggerEl.contains(o)&&!l&&this.isVisible()&&this.hide()},e.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},e.prototype.isVisible=function(){return this._visible},e.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(n){return Y1(Y1({},n),{modifiers:$C($C([],n.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},e.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(n){return Y1(Y1({},n),{modifiers:$C($C([],n.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function px(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(e){var n=e.getAttribute("data-dropdown-toggle"),r=document.getElementById(n);if(r){var o=e.getAttribute("data-dropdown-placement"),s=e.getAttribute("data-dropdown-offset-skidding"),l=e.getAttribute("data-dropdown-offset-distance"),h=e.getAttribute("data-dropdown-trigger"),p=e.getAttribute("data-dropdown-delay"),d=e.getAttribute("data-dropdown-ignore-click-outside-class");new KF(r,e,{placement:o||Z1.placement,triggerType:h||Z1.triggerType,offsetSkidding:s?parseInt(s):Z1.offsetSkidding,offsetDistance:l?parseInt(l):Z1.offsetDistance,delay:p?parseInt(p):Z1.delay,ignoreClickOutsideClass:d||Z1.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(n,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=KF,window.initDropdowns=px);var GC=function(){return GC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},GC.apply(this,arguments)},qC={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},O9={id:null,override:!0},JF=function(){function e(n,r,o){n===void 0&&(n=null),r===void 0&&(r=qC),o===void 0&&(o=O9),this._eventListenerInstances=[],this._instanceId=o.id?o.id:n.id,this._targetEl=n,this._options=GC(GC({},qC),r),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),ky.addInstance("Modal",this,this._instanceId,o.override)}return e.prototype.init=function(){var n=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(r){n._targetEl.classList.add(r)}),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("Modal",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._createBackdrop=function(){var n;if(this._isHidden){var r=document.createElement("div");(n=r.classList).add.apply(n,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),this._backdropEl=r}},e.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},e.prototype._setupModalCloseEventListeners=function(){var n=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(r){n._handleOutsideClick(r.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(r){r.key==="Escape"&&n.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},e.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},e.prototype._handleOutsideClick=function(n){(n===this._targetEl||n===this._backdropEl&&this.isVisible())&&this.hide()},e.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},e.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},e.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},e.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},e.prototype.isVisible=function(){return!this._isHidden},e.prototype.isHidden=function(){return this._isHidden},e.prototype.addEventListenerInstance=function(n,r,o){this._eventListenerInstances.push({element:n,type:r,handler:o})},e.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(n){n.element.removeEventListener(n.type,n.handler)}),this._eventListenerInstances=[]},e.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function dx(){document.querySelectorAll("[data-modal-target]").forEach(function(e){var n=e.getAttribute("data-modal-target"),r=document.getElementById(n);if(r){var o=r.getAttribute("data-modal-placement"),s=r.getAttribute("data-modal-backdrop");new JF(r,{placement:o||qC.placement,backdrop:s||qC.backdrop})}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(e){var n=e.getAttribute("data-modal-toggle"),r=document.getElementById(n);if(r){var o=ky.getInstance("Modal",n);if(o){var s=function(){o.toggle()};e.addEventListener("click",s),o.addEventListenerInstance(e,"click",s)}else console.error("Modal with id ".concat(n," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(e){var n=e.getAttribute("data-modal-show"),r=document.getElementById(n);if(r){var o=ky.getInstance("Modal",n);if(o){var s=function(){o.show()};e.addEventListener("click",s),o.addEventListenerInstance(e,"click",s)}else console.error("Modal with id ".concat(n," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(e){var n=e.getAttribute("data-modal-hide"),r=document.getElementById(n);if(r){var o=ky.getInstance("Modal",n);if(o){var s=function(){o.hide()};e.addEventListener("click",s),o.addEventListenerInstance(e,"click",s)}else console.error("Modal with id ".concat(n," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(n," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=JF,window.initModals=dx);var WC=function(){return WC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},WC.apply(this,arguments)},Yw={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},N9={id:null,override:!0},QF=function(){function e(n,r,o){n===void 0&&(n=null),r===void 0&&(r=Yw),o===void 0&&(o=N9),this._eventListenerInstances=[],this._instanceId=o.id?o.id:n.id,this._targetEl=n,this._options=WC(WC({},Yw),r),this._visible=!1,this._initialized=!1,this.init(),ky.addInstance("Drawer",this,this._instanceId,o.override)}return e.prototype.init=function(){var n=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(r){n._targetEl.classList.add(r)}),this._handleEscapeKey=function(r){r.key==="Escape"&&n.isVisible()&&n.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("Drawer",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.hide=function(){var n=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(r){n._targetEl.classList.remove(r)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(r){n._targetEl.classList.add(r)})):(this._getPlacementClasses(this._options.placement).active.map(function(r){n._targetEl.classList.remove(r)}),this._getPlacementClasses(this._options.placement).inactive.map(function(r){n._targetEl.classList.add(r)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},e.prototype.show=function(){var n=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(r){n._targetEl.classList.add(r)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(r){n._targetEl.classList.remove(r)})):(this._getPlacementClasses(this._options.placement).active.map(function(r){n._targetEl.classList.add(r)}),this._getPlacementClasses(this._options.placement).inactive.map(function(r){n._targetEl.classList.remove(r)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},e.prototype._createBackdrop=function(){var n,r=this;if(!this._visible){var o=document.createElement("div");o.setAttribute("drawer-backdrop",""),(n=o.classList).add.apply(n,this._options.backdropClasses.split(" ")),document.querySelector("body").append(o),o.addEventListener("click",function(){r.hide()})}},e.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},e.prototype._getPlacementClasses=function(n){switch(n){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},e.prototype.isHidden=function(){return!this._visible},e.prototype.isVisible=function(){return this._visible},e.prototype.addEventListenerInstance=function(n,r,o){this._eventListenerInstances.push({element:n,type:r,handler:o})},e.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(n){n.element.removeEventListener(n.type,n.handler)}),this._eventListenerInstances=[]},e.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function gx(){document.querySelectorAll("[data-drawer-target]").forEach(function(e){var n=e.getAttribute("data-drawer-target"),r=document.getElementById(n);if(r){var o=e.getAttribute("data-drawer-placement"),s=e.getAttribute("data-drawer-body-scrolling"),l=e.getAttribute("data-drawer-backdrop"),h=e.getAttribute("data-drawer-edge"),p=e.getAttribute("data-drawer-edge-offset");new QF(r,{placement:o||Yw.placement,bodyScrolling:s?s==="true":Yw.bodyScrolling,backdrop:l?l==="true":Yw.backdrop,edge:h?h==="true":Yw.edge,edgeOffset:p||Yw.edgeOffset})}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(e){var n=e.getAttribute("data-drawer-toggle"),r=document.getElementById(n);if(r){var o=ky.getInstance("Drawer",n);if(o){var s=function(){o.toggle()};e.addEventListener("click",s),o.addEventListenerInstance(e,"click",s)}else console.error("Drawer with id ".concat(n," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(e){var n=e.getAttribute("data-drawer-dismiss")?e.getAttribute("data-drawer-dismiss"):e.getAttribute("data-drawer-hide"),r=document.getElementById(n);if(r){var o=ky.getInstance("Drawer",n);if(o){var s=function(){o.hide()};e.addEventListener("click",s),o.addEventListenerInstance(e,"click",s)}else console.error("Drawer with id ".concat(n," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(e){var n=e.getAttribute("data-drawer-show"),r=document.getElementById(n);if(r){var o=ky.getInstance("Drawer",n);if(o){var s=function(){o.show()};e.addEventListener("click",s),o.addEventListenerInstance(e,"click",s)}else console.error("Drawer with id ".concat(n," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(n," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=QF,window.initDrawers=gx);var YC=function(){return YC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},YC.apply(this,arguments)},ZC={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},P9={id:null,override:!0},t4=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=[]),o===void 0&&(o=ZC),s===void 0&&(s=P9),this._instanceId=s.id?s.id:n.id,this._tabsEl=n,this._items=r,this._activeTab=o?this.getTab(o.defaultTabId):null,this._options=YC(YC({},ZC),o),this._initialized=!1,this.init(),ky.addInstance("Tabs",this,this._instanceId,s.override)}return e.prototype.init=function(){var n=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(r){r.triggerEl.addEventListener("click",function(o){o.preventDefault(),n.show(r.id)})}))},e.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},e.prototype.removeInstance=function(){this.destroy(),ky.removeInstance("Tabs",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getActiveTab=function(){return this._activeTab},e.prototype.setActiveTab=function(n){this._activeTab=n},e.prototype.getTab=function(n){return this._items.filter(function(r){return r.id===n})[0]},e.prototype.show=function(n,r){var o,s,l=this;r===void 0&&(r=!1);var h=this.getTab(n);h===this._activeTab&&!r||(this._items.map(function(p){var d,g;p!==h&&((d=p.triggerEl.classList).remove.apply(d,l._options.activeClasses.split(" ")),(g=p.triggerEl.classList).add.apply(g,l._options.inactiveClasses.split(" ")),p.targetEl.classList.add("hidden"),p.triggerEl.setAttribute("aria-selected","false"))}),(o=h.triggerEl.classList).add.apply(o,this._options.activeClasses.split(" ")),(s=h.triggerEl.classList).remove.apply(s,this._options.inactiveClasses.split(" ")),h.triggerEl.setAttribute("aria-selected","true"),h.targetEl.classList.remove("hidden"),this.setActiveTab(h),this._options.onShow(this,h))},e.prototype.updateOnShow=function(n){this._options.onShow=n},e}();function mx(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(e){var n=[],r=e.getAttribute("data-tabs-active-classes"),o=e.getAttribute("data-tabs-inactive-classes"),s=null;e.querySelectorAll('[role="tab"]').forEach(function(l){var h=l.getAttribute("aria-selected")==="true",p={id:l.getAttribute("data-tabs-target"),triggerEl:l,targetEl:document.querySelector(l.getAttribute("data-tabs-target"))};n.push(p),h&&(s=p.id)}),new t4(e,n,{defaultTabId:s,activeClasses:r||ZC.activeClasses,inactiveClasses:o||ZC.inactiveClasses})})}typeof window<"u"&&(window.Tabs=t4,window.initTabs=mx);var X1=function(){return X1=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},X1.apply(this,arguments)},XC=function(e,n,r){if(r||arguments.length===2)for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))},KC={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},R9={id:null,override:!0},e4=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=KC),s===void 0&&(s=R9),this._instanceId=s.id?s.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=X1(X1({},KC),o),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),ky.addInstance("Tooltip",this,this._instanceId,s.override)}return e.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},e.prototype.destroy=function(){var n=this;if(this._initialized){var r=this._getTriggerEvents();r.showEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._showHandler)}),r.hideEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},e.prototype.removeInstance=function(){ky.removeInstance("Tooltip",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._setupEventListeners=function(){var n=this,r=this._getTriggerEvents();this._showHandler=function(){n.show()},this._hideHandler=function(){n.hide()},r.showEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._showHandler)}),r.hideEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._hideHandler)})},e.prototype._createPopperInstance=function(){return Ww(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},e.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},e.prototype._setupKeydownListener=function(){var n=this;this._keydownEventListener=function(r){r.key==="Escape"&&n.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},e.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},e.prototype._setupClickOutsideListener=function(){var n=this;this._clickOutsideEventListener=function(r){n._handleClickOutside(r,n._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._handleClickOutside=function(n,r){var o=n.target;o!==r&&!r.contains(o)&&!this._triggerEl.contains(o)&&this.isVisible()&&this.hide()},e.prototype.isVisible=function(){return this._visible},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},e.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(n){return X1(X1({},n),{modifiers:XC(XC([],n.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},e.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(n){return X1(X1({},n),{modifiers:XC(XC([],n.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function yx(){document.querySelectorAll("[data-tooltip-target]").forEach(function(e){var n=e.getAttribute("data-tooltip-target"),r=document.getElementById(n);if(r){var o=e.getAttribute("data-tooltip-trigger"),s=e.getAttribute("data-tooltip-placement");new e4(r,e,{placement:s||KC.placement,triggerType:o||KC.triggerType})}else console.error('The tooltip element with id "'.concat(n,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=e4,window.initTooltips=yx);var K1=function(){return K1=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},K1.apply(this,arguments)},JC=function(e,n,r){if(r||arguments.length===2)for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))},tA={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},L9={id:null,override:!0},n4=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=tA),s===void 0&&(s=L9),this._instanceId=s.id?s.id:n.id,this._targetEl=n,this._triggerEl=r,this._options=K1(K1({},tA),o),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),ky.addInstance("Popover",this,s.id?s.id:this._targetEl.id,s.override)}return e.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},e.prototype.destroy=function(){var n=this;if(this._initialized){var r=this._getTriggerEvents();r.showEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._showHandler),n._targetEl.removeEventListener(o,n._showHandler)}),r.hideEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._hideHandler),n._targetEl.removeEventListener(o,n._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},e.prototype.removeInstance=function(){ky.removeInstance("Popover",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype._setupEventListeners=function(){var n=this,r=this._getTriggerEvents();this._showHandler=function(){n.show()},this._hideHandler=function(){setTimeout(function(){n._targetEl.matches(":hover")||n.hide()},100)},r.showEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._showHandler),n._targetEl.addEventListener(o,n._showHandler)}),r.hideEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._hideHandler),n._targetEl.addEventListener(o,n._hideHandler)})},e.prototype._createPopperInstance=function(){return Ww(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},e.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},e.prototype._setupKeydownListener=function(){var n=this;this._keydownEventListener=function(r){r.key==="Escape"&&n.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},e.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},e.prototype._setupClickOutsideListener=function(){var n=this;this._clickOutsideEventListener=function(r){n._handleClickOutside(r,n._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},e.prototype._handleClickOutside=function(n,r){var o=n.target;o!==r&&!r.contains(o)&&!this._triggerEl.contains(o)&&this.isVisible()&&this.hide()},e.prototype.isVisible=function(){return this._visible},e.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},e.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(n){return K1(K1({},n),{modifiers:JC(JC([],n.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},e.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(n){return K1(K1({},n),{modifiers:JC(JC([],n.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function vx(){document.querySelectorAll("[data-popover-target]").forEach(function(e){var n=e.getAttribute("data-popover-target"),r=document.getElementById(n);if(r){var o=e.getAttribute("data-popover-trigger"),s=e.getAttribute("data-popover-placement"),l=e.getAttribute("data-popover-offset");new n4(r,e,{placement:s||tA.placement,offset:l?parseInt(l):tA.offset,triggerType:o||tA.triggerType})}else console.error('The popover element with id "'.concat(n,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=n4,window.initPopovers=vx);var QC=function(){return QC=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},QC.apply(this,arguments)},hO={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},j9={id:null,override:!0},r4=function(){function e(n,r,o,s,l){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=null),s===void 0&&(s=hO),l===void 0&&(l=j9),this._instanceId=l.id?l.id:o.id,this._parentEl=n,this._triggerEl=r,this._targetEl=o,this._options=QC(QC({},hO),s),this._visible=!1,this._initialized=!1,this.init(),ky.addInstance("Dial",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var r=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){n.show()},r.showEvents.forEach(function(o){n._triggerEl.addEventListener(o,n._showEventHandler),n._targetEl.addEventListener(o,n._showEventHandler)}),this._hideEventHandler=function(){n._parentEl.matches(":hover")||n.hide()},r.hideEvents.forEach(function(o){n._parentEl.addEventListener(o,n._hideEventHandler)}),this._initialized=!0}},e.prototype.destroy=function(){var n=this;if(this._initialized){var r=this._getTriggerEventTypes(this._options.triggerType);r.showEvents.forEach(function(o){n._triggerEl.removeEventListener(o,n._showEventHandler),n._targetEl.removeEventListener(o,n._showEventHandler)}),r.hideEvents.forEach(function(o){n._parentEl.removeEventListener(o,n._hideEventHandler)}),this._initialized=!1}},e.prototype.removeInstance=function(){ky.removeInstance("Dial",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},e.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},e.prototype.toggle=function(){this._visible?this.hide():this.show()},e.prototype.isHidden=function(){return!this._visible},e.prototype.isVisible=function(){return this._visible},e.prototype._getTriggerEventTypes=function(n){switch(n){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e.prototype.updateOnToggle=function(n){this._options.onToggle=n},e}();function _x(){document.querySelectorAll("[data-dial-init]").forEach(function(e){var n=e.querySelector("[data-dial-toggle]");if(n){var r=n.getAttribute("data-dial-toggle"),o=document.getElementById(r);if(o){var s=n.getAttribute("data-dial-trigger");new r4(e,n,o,{triggerType:s||hO.triggerType})}else console.error("Dial with id ".concat(r," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(e.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=r4,window.initDials=_x);var tI=function(){return tI=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tI.apply(this,arguments)},i4={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},F9={id:null,override:!0},o4=function(){function e(n,r,o,s,l){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=null),s===void 0&&(s=i4),l===void 0&&(l=F9),this._instanceId=l.id?l.id:n.id,this._targetEl=n,this._incrementEl=r,this._decrementEl=o,this._options=tI(tI({},i4),s),this._initialized=!1,this.init(),ky.addInstance("InputCounter",this,this._instanceId,l.override)}return e.prototype.init=function(){var n=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(r){{var o=r.target;/^\d*$/.test(o.value)||(o.value=o.value.replace(/[^\d]/g,"")),n._options.maxValue!==null&&parseInt(o.value)>n._options.maxValue&&(o.value=n._options.maxValue.toString()),n._options.minValue!==null&&parseInt(o.value)<n._options.minValue&&(o.value=n._options.minValue.toString())}},this._incrementClickHandler=function(){n.increment()},this._decrementClickHandler=function(){n.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("InputCounter",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},e.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},e.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},e.prototype.updateOnIncrement=function(n){this._options.onIncrement=n},e.prototype.updateOnDecrement=function(n){this._options.onDecrement=n},e}();function bx(){document.querySelectorAll("[data-input-counter]").forEach(function(e){var n=e.id,r=document.querySelector('[data-input-counter-increment="'+n+'"]'),o=document.querySelector('[data-input-counter-decrement="'+n+'"]'),s=e.getAttribute("data-input-counter-min"),l=e.getAttribute("data-input-counter-max");e?ky.instanceExists("InputCounter",e.getAttribute("id"))||new o4(e,r||null,o||null,{minValue:s?parseInt(s):null,maxValue:l?parseInt(l):null}):console.error('The target element with id "'.concat(n,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=o4,window.initInputCounters=bx);var eI=function(){return eI=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eI.apply(this,arguments)},nI={htmlEntities:!1,contentType:"input",onCopy:function(){}},B9={id:null,override:!0},s4=function(){function e(n,r,o,s){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=nI),s===void 0&&(s=B9),this._instanceId=s.id?s.id:r.id,this._triggerEl=n,this._targetEl=r,this._options=eI(eI({},nI),o),this._initialized=!1,this.init(),ky.addInstance("CopyClipboard",this,this._instanceId,s.override)}return e.prototype.init=function(){var n=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){n.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},e.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},e.prototype.removeInstance=function(){ky.removeInstance("CopyClipboard",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},e.prototype.copy=function(){var n=this.getTargetValue();this._options.htmlEntities&&(n=this.decodeHTML(n));var r=document.createElement("textarea");return r.value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),this._options.onCopy(this),n},e.prototype.decodeHTML=function(n){var r=document.createElement("textarea");return r.innerHTML=n,r.textContent},e.prototype.updateOnCopyCallback=function(n){this._options.onCopy=n},e}();function wx(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(e){var n=e.getAttribute("data-copy-to-clipboard-target"),r=document.getElementById(n),o=e.getAttribute("data-copy-to-clipboard-content-type"),s=e.getAttribute("data-copy-to-clipboard-html-entities");r?ky.instanceExists("CopyClipboard",r.getAttribute("id"))||new s4(e,r,{htmlEntities:s&&s==="true"?!0:nI.htmlEntities,contentType:o||nI.contentType}):console.error('The target element with id "'.concat(n,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=s4,window.initClipboards=wx);function vO(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=Array(n);r<n;r++)o[r]=e[r];return o}function V9(e){if(Array.isArray(e))return e}function U9(e){if(Array.isArray(e))return vO(e)}function z9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EO(e,n,r){return n=Q1(n),W9(e,A4()?Reflect.construct(n,r||[],Q1(e).constructor):n.apply(e,r))}function Kw(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a4(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,X9(o.key),o)}}function Jw(e,n,r){return n&&a4(e.prototype,n),r&&a4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oA(){return oA=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,n,r){var o=Y9(e,n);if(o){var s=Object.getOwnPropertyDescriptor(o,n);return s.get?s.get.call(arguments.length<3?e:r):s.value}},oA.apply(null,arguments)}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q1(e)}function xO(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_O(e,n)}function A4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A4=function(){return!!e})()}function H9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $9(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,s,l,h,p=[],d=!0,g=!1;try{if(l=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(o=l.call(r)).done)&&(p.push(o.value),p.length!==n);d=!0);}catch(y){g=!0,s=y}finally{try{if(!d&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(g)throw s}}return p}}function G9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W9(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z9(e)}function _O(e,n){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_O(e,n)}function W0(e,n){return V9(e)||$9(e,n)||S4(e,n)||G9()}function Y9(e,n){for(;!{}.hasOwnProperty.call(e,n)&&(e=Q1(e))!==null;);return e}function lA(e){return U9(e)||H9(e)||S4(e)||q9()}function Z9(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function X9(e){var n=Z9(e,"string");return typeof n=="symbol"?n:n+""}function oI(e){"@babel/helpers - typeof";return oI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oI(e)}function S4(e,n){if(e){if(typeof e=="string")return vO(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vO(e,n):void 0}}function h1(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function TO(e){return e[e.length-1]}function Xw(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(s){e.includes(s)||e.push(s)}),e}function fO(e,n){return e?e.split(n):[]}function AO(e,n,r){var o=n===void 0||e>=n,s=r===void 0||e<=r;return o&&s}function C4(e,n,r){return e<n?n:e>r?r:e}function Ax(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",l=Object.keys(r).reduce(function(p,d){var g=r[d];return typeof g=="function"&&(g=g(o)),"".concat(p," ").concat(d,'="').concat(g,'"')},e);s+="<".concat(l,"></").concat(e,">");var h=o+1;return h<n?Ax(e,n,r,h,s):s}function SO(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function bO(e){return new Date(e).setHours(0,0,0,0)}function Qw(){return new Date().setHours(0,0,0,0)}function J1(){switch(arguments.length){case 0:return Qw();case 1:return bO(arguments.length<=0?void 0:arguments[0])}var e=new Date(0);return e.setFullYear.apply(e,arguments),e.setHours(0,0,0,0)}function Ex(e,n){var r=new Date(e);return r.setDate(r.getDate()+n)}function K9(e,n){return Ex(e,n*7)}function sI(e,n){var r=new Date(e),o=r.getMonth()+n,s=o%12;s<0&&(s+=12);var l=r.setMonth(o);return r.getMonth()!==s?r.setDate(0):l}function xx(e,n){var r=new Date(e),o=r.getMonth(),s=r.setFullYear(r.getFullYear()+n);return o===1&&r.getMonth()===2?r.setDate(0):s}function l4(e,n){return(e-n+7)%7}function aI(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=new Date(e).getDay();return Ex(e,l4(n,r)-l4(o,r))}function J9(e){var n=aI(e,4,1),r=aI(new Date(n).setMonth(0,4),4,1);return Math.round((n-r)/6048e5)+1}function Zw(e,n){var r=new Date(e).getFullYear();return Math.floor(r/n)*n}var wO=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Q9=/[\s!-/:-@[-`{-~]+/,pO={},u4={y:function(n,r){return new Date(n).setFullYear(parseInt(r,10))},m:function(n,r,o){var s=new Date(n),l=parseInt(r,10)-1;if(isNaN(l)){if(!r)return NaN;var h=r.toLowerCase(),p=function(g){return g.toLowerCase().startsWith(h)};if(l=o.monthsShort.findIndex(p),l<0&&(l=o.months.findIndex(p)),l<0)return NaN}return s.setMonth(l),s.getMonth()!==I4(l)?s.setDate(0):s.getTime()},d:function(n,r){return new Date(n).setDate(parseInt(r,10))}},_q={d:function(n){return n.getDate()},dd:function(n){return rI(n.getDate(),2)},D:function(n,r){return r.daysShort[n.getDay()]},DD:function(n,r){return r.days[n.getDay()]},m:function(n){return n.getMonth()+1},mm:function(n){return rI(n.getMonth()+1,2)},M:function(n,r){return r.monthsShort[n.getMonth()]},MM:function(n,r){return r.months[n.getMonth()]},y:function(n){return n.getFullYear()},yy:function(n){return rI(n.getFullYear(),2).slice(-2)},yyyy:function(n){return rI(n.getFullYear(),4)}};function I4(e){return e>-1?e%12:I4(e+12)}function rI(e,n){return e.toString().padStart(n,"0")}function D4(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in pO)return pO[e];var n=e.split(wO),r=e.match(new RegExp(wO,"g"));if(n.length===0||!r)throw new Error("Invalid date format.");var o=r.map(function(l){return _q[l]}),s=Object.keys(u4).reduce(function(l,h){var p=r.find(function(d){return d[0]!=="D"&&d[0].toLowerCase()===h});return p&&l.push(h),l},[]);return pO[e]={parser:function(h,p){var d=h.split(Q9).reduce(function(g,y,v){if(y.length>0&&r[v]){var _=r[v][0];_==="M"?g.m=y:_!=="D"&&(g[_]=y)}return g},{});return s.reduce(function(g,y){var v=u4[y](g,d[y],p);return isNaN(v)?g:v},Qw())},formatter:function(h,p){var d=o.reduce(function(g,y,v){return g+="".concat(n[v]).concat(y(h,p))},"");return d+=TO(n)}}}function sA(e,n,r){if(e instanceof Date||typeof e=="number"){var o=bO(e);return isNaN(o)?void 0:o}if(e){if(e==="today")return Qw();if(n&&n.toValue){var s=n.toValue(e,n,r);return isNaN(s)?void 0:bO(s)}return D4(n).parser(e,r)}}function aA(e,n,r){if(isNaN(e)||!e&&e!==0)return"";var o=typeof e=="number"?new Date(e):e;return n.toDisplay?n.toDisplay(o,n,r):D4(n).formatter(o,r)}var lI=new WeakMap,k4=EventTarget.prototype,c4=k4.addEventListener,h4=k4.removeEventListener;function CO(e,n){var r=lI.get(e);r||(r=[],lI.set(e,r)),n.forEach(function(o){c4.call.apply(c4,lA(o)),r.push(o)})}function M4(e){var n=lI.get(e);n&&(n.forEach(function(r){h4.call.apply(h4,lA(r))}),lI.delete(e))}Event.prototype.composedPath||(f4=function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];r.push(n);var o;return n.parentNode?o=n.parentNode:n.host?o=n.host:n.defaultView&&(o=n.defaultView),o?e(o,r):r},Event.prototype.composedPath=function(){return f4(this.target)});var f4;function O4(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=e[o];return n(s)?s:s===r||!s.parentElement?void 0:O4(e,n,r,o+1)}function N4(e,n){var r=typeof n=="function"?n:function(o){return o.matches(n)};return O4(e.composedPath(),r,e.currentTarget)}var eA={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},uA={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},t7=document.createRange();function f1(e){return t7.createContextualFragment(e)}function rA(e){e.style.display!=="none"&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function iA(e){e.style.display==="none"&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function uI(e){e.firstChild&&(e.removeChild(e.firstChild),uI(e))}function e7(e,n){uI(e),n instanceof DocumentFragment?e.appendChild(n):typeof n=="string"?e.appendChild(f1(n)):typeof n.forEach=="function"&&n.forEach(function(r){e.appendChild(r)})}var dO=uA.language,n7=uA.format,r7=uA.weekStart;function p4(e,n){return e.length<6&&n>=0&&n<7?Xw(e,n):e}function d4(e){return(e+6)%7}function g4(e,n,r,o){var s=sA(e,n,r);return s!==void 0?s:o}function gO(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,o=parseInt(e,10);return o>=0&&o<=r?o:n}function mO(e,n){var r=Object.assign({},e),o={},s=n.constructor.locales,l=n.config||{},h=l.format,p=l.language,d=l.locale,g=l.maxDate,y=l.maxView,v=l.minDate,_=l.pickLevel,w=l.startView,I=l.weekStart;if(r.language){var G;if(r.language!==p&&(s[r.language]?G=r.language:(G=r.language.split("-")[0],s[G]===void 0&&(G=!1))),delete r.language,G){p=o.language=G;var _t=d||s[dO];d=Object.assign({format:n7,weekStart:r7},s[dO]),p!==dO&&Object.assign(d,s[p]),o.locale=d,h===_t.format&&(h=o.format=d.format),I===_t.weekStart&&(I=o.weekStart=d.weekStart,o.weekEnd=d4(d.weekStart))}}if(r.format){var _r=typeof r.format.toDisplay=="function",_o=typeof r.format.toValue=="function",Ca=wO.test(r.format);(_r&&_o||Ca)&&(h=o.format=r.format),delete r.format}var _a=v,_l=g;if(r.minDate!==void 0&&(_a=r.minDate===null?J1(0,0,1):g4(r.minDate,h,d,_a),delete r.minDate),r.maxDate!==void 0&&(_l=r.maxDate===null?void 0:g4(r.maxDate,h,d,_l),delete r.maxDate),_l<_a?(v=o.minDate=_l,g=o.maxDate=_a):(v!==_a&&(v=o.minDate=_a),g!==_l&&(g=o.maxDate=_l)),r.datesDisabled&&(o.datesDisabled=r.datesDisabled.reduce(function(_y,Ey){var My=sA(Ey,h,d);return My!==void 0?Xw(_y,My):_y},[]),delete r.datesDisabled),r.defaultViewDate!==void 0){var Qa=sA(r.defaultViewDate,h,d);Qa!==void 0&&(o.defaultViewDate=Qa),delete r.defaultViewDate}if(r.weekStart!==void 0){var Kc=Number(r.weekStart)%7;isNaN(Kc)||(I=o.weekStart=Kc,o.weekEnd=d4(Kc)),delete r.weekStart}if(r.daysOfWeekDisabled&&(o.daysOfWeekDisabled=r.daysOfWeekDisabled.reduce(p4,[]),delete r.daysOfWeekDisabled),r.daysOfWeekHighlighted&&(o.daysOfWeekHighlighted=r.daysOfWeekHighlighted.reduce(p4,[]),delete r.daysOfWeekHighlighted),r.maxNumberOfDates!==void 0){var jc=parseInt(r.maxNumberOfDates,10);jc>=0&&(o.maxNumberOfDates=jc,o.multidate=jc!==1),delete r.maxNumberOfDates}r.dateDelimiter&&(o.dateDelimiter=String(r.dateDelimiter),delete r.dateDelimiter);var _h=_;r.pickLevel!==void 0&&(_h=gO(r.pickLevel,2),delete r.pickLevel),_h!==_&&(_=o.pickLevel=_h);var _m=y;r.maxView!==void 0&&(_m=gO(r.maxView,y),delete r.maxView),_m=_>_m?_:_m,_m!==y&&(y=o.maxView=_m);var ry=w;if(r.startView!==void 0&&(ry=gO(r.startView,ry),delete r.startView),ry<_?ry=_:ry>y&&(ry=y),ry!==w&&(o.startView=ry),r.prevArrow){var uy=f1(r.prevArrow);uy.childNodes.length>0&&(o.prevArrow=uy.childNodes),delete r.prevArrow}if(r.nextArrow){var ay=f1(r.nextArrow);ay.childNodes.length>0&&(o.nextArrow=ay.childNodes),delete r.nextArrow}if(r.disableTouchKeyboard!==void 0&&(o.disableTouchKeyboard="ontouchstart"in document&&!!r.disableTouchKeyboard,delete r.disableTouchKeyboard),r.orientation){var ey=r.orientation.toLowerCase().split(/\s+/g);o.orientation={x:ey.find(function(_y){return _y==="left"||_y==="right"})||"auto",y:ey.find(function(_y){return _y==="top"||_y==="bottom"})||"auto"},delete r.orientation}if(r.todayBtnMode!==void 0){switch(r.todayBtnMode){case 0:case 1:o.todayBtnMode=r.todayBtnMode}delete r.todayBtnMode}return Object.keys(r).forEach(function(_y){r[_y]!==void 0&&h1(uA,_y)&&(o[_y]=r[_y])}),o}var i7=SO(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),o7=SO(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(Ax("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(Ax("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),s7=SO(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(Ax("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),IO=function(){function e(n,r){Kw(this,e),Object.assign(this,r,{picker:n,element:f1('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return Jw(e,[{key:"init",value:function(r){r.pickLevel!==void 0&&(this.isMinView=this.id===r.pickLevel),this.setOptions(r),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(r,o,s){var l=this.beforeShow(new Date(s));switch(oI(l)){case"boolean":l={enabled:l};break;case"string":l={classes:l}}if(l){if(l.enabled===!1&&(r.classList.add("disabled"),Xw(this.disabled,o)),l.classes){var h,p=l.classes.split(/\s+/);(h=r.classList).add.apply(h,lA(p)),p.includes("disabled")&&Xw(this.disabled,o)}l.content&&e7(r,l.content)}}}])}(),a7=function(e){function n(r){return Kw(this,n),EO(this,n,[r,{id:0,name:"days",cellClass:"day"}])}return xO(n,e),Jw(n,[{key:"init",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(s){var l=f1(o7).firstChild;this.dow=l.firstChild,this.grid=l.lastChild,this.element.appendChild(l)}oA(Q1(n.prototype),"init",this).call(this,o)}},{key:"setOptions",value:function(o){var s=this,l;if(h1(o,"minDate")&&(this.minDate=o.minDate),h1(o,"maxDate")&&(this.maxDate=o.maxDate),o.datesDisabled&&(this.datesDisabled=o.datesDisabled),o.daysOfWeekDisabled&&(this.daysOfWeekDisabled=o.daysOfWeekDisabled,l=!0),o.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=o.daysOfWeekHighlighted),o.todayHighlight!==void 0&&(this.todayHighlight=o.todayHighlight),o.weekStart!==void 0&&(this.weekStart=o.weekStart,this.weekEnd=o.weekEnd,l=!0),o.locale){var h=this.locale=o.locale;this.dayNames=h.daysMin,this.switchLabelFormat=h.titleFormat,l=!0}if(o.beforeShowDay!==void 0&&(this.beforeShow=typeof o.beforeShowDay=="function"?o.beforeShowDay:void 0),o.calendarWeeks!==void 0)if(o.calendarWeeks&&!this.calendarWeeks){var p=f1(s7).firstChild;this.calendarWeeks={element:p,dow:p.firstChild,weeks:p.lastChild},this.element.insertBefore(p,this.element.firstChild)}else this.calendarWeeks&&!o.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);o.showDaysOfWeek!==void 0&&(o.showDaysOfWeek?(iA(this.dow),this.calendarWeeks&&iA(this.calendarWeeks.dow)):(rA(this.dow),this.calendarWeeks&&rA(this.calendarWeeks.dow))),l&&Array.from(this.dow.children).forEach(function(d,g){var y=(s.weekStart+g)%7;d.textContent=s.dayNames[y],d.className=s.daysOfWeekDisabled.includes(y)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var o=new Date(this.picker.viewDate),s=o.getFullYear(),l=o.getMonth(),h=J1(s,l,1),p=aI(h,this.weekStart,this.weekStart);this.first=h,this.last=J1(s,l+1,0),this.start=p,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var o=this.picker.datepicker,s=o.dates,l=o.rangepicker;this.selected=s,l&&(this.range=l.dates)}},{key:"render",value:function(){var o=this;this.today=this.todayHighlight?Qw():void 0,this.disabled=lA(this.datesDisabled);var s=aA(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(s),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var l=aI(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(h,p){h.textContent=J9(K9(l,p))})}Array.from(this.grid.children).forEach(function(h,p){var d=h.classList,g=Ex(o.start,p),y=new Date(g),v=y.getDay();if(h.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(o.cellClass),h.dataset.date=g,h.textContent=y.getDate(),g<o.first?d.add("prev","text-gray-500","dark:text-white"):g>o.last&&d.add("next","text-gray-500","dark:text-white"),o.today===g&&d.add("today","bg-gray-100","dark:bg-gray-600"),(g<o.minDate||g>o.maxDate||o.disabled.includes(g))&&(d.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),d.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),o.daysOfWeekDisabled.includes(v)&&(d.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),d.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),Xw(o.disabled,g)),o.daysOfWeekHighlighted.includes(v)&&d.add("highlighted"),o.range){var _=W0(o.range,2),w=_[0],I=_[1];g>w&&g<I&&(d.add("range","bg-gray-200","dark:bg-gray-600"),d.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),g===w&&(d.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),d.remove("rounded-lg","rounded-r-lg")),g===I&&(d.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),d.remove("rounded-lg","rounded-l-lg"))}o.selected.includes(g)&&(d.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),d.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),g===o.focused&&d.add("focused"),o.beforeShow&&o.performBeforeHook(h,g,g)})}},{key:"refresh",value:function(){var o=this,s=this.range||[],l=W0(s,2),h=l[0],p=l[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(d){d.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),d.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(d){var g=Number(d.dataset.date),y=d.classList;y.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),g>h&&g<p&&(y.add("range","bg-gray-200","dark:bg-gray-600"),y.remove("rounded-lg")),g===h&&(y.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),y.remove("rounded-lg")),g===p&&(y.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),y.remove("rounded-lg")),o.selected.includes(g)&&(y.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),y.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),g===o.focused&&y.add("focused")})}},{key:"refreshFocus",value:function(){var o=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(s){s.classList.remove("focused")}),this.grid.children[o].classList.add("focused")}}])}(IO);function m4(e,n){if(!(!e||!e[0]||!e[1])){var r=W0(e,2),o=W0(r[0],2),s=o[0],l=o[1],h=W0(r[1],2),p=h[0],d=h[1];if(!(s>n||p<n))return[s===n?l:-1,p===n?d:12]}}var l7=function(e){function n(r){return Kw(this,n),EO(this,n,[r,{id:1,name:"months",cellClass:"month"}])}return xO(n,e),Jw(n,[{key:"init",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(f1(Ax("span",12,{"data-month":function(h){return h}})))),oA(Q1(n.prototype),"init",this).call(this,o)}},{key:"setOptions",value:function(o){if(o.locale&&(this.monthNames=o.locale.monthsShort),h1(o,"minDate"))if(o.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var s=new Date(o.minDate);this.minYear=s.getFullYear(),this.minMonth=s.getMonth(),this.minDate=s.setDate(1)}if(h1(o,"maxDate"))if(o.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var l=new Date(o.maxDate);this.maxYear=l.getFullYear(),this.maxMonth=l.getMonth(),this.maxDate=J1(this.maxYear,this.maxMonth+1,0)}o.beforeShowMonth!==void 0&&(this.beforeShow=typeof o.beforeShowMonth=="function"?o.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var o=new Date(this.picker.viewDate);this.year=o.getFullYear(),this.focused=o.getMonth()}},{key:"updateSelection",value:function(){var o=this.picker.datepicker,s=o.dates,l=o.rangepicker;this.selected=s.reduce(function(h,p){var d=new Date(p),g=d.getFullYear(),y=d.getMonth();return h[g]===void 0?h[g]=[y]:Xw(h[g],y),h},{}),l&&l.dates&&(this.range=l.dates.map(function(h){var p=new Date(h);return isNaN(p)?void 0:[p.getFullYear(),p.getMonth()]}))}},{key:"render",value:function(){var o=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var s=this.selected[this.year]||[],l=this.year<this.minYear||this.year>this.maxYear,h=this.year===this.minYear,p=this.year===this.maxYear,d=m4(this.range,this.year);Array.from(this.grid.children).forEach(function(g,y){var v=g.classList,_=J1(o.year,y,1);if(g.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(o.cellClass),o.isMinView&&(g.dataset.date=_),g.textContent=o.monthNames[y],(l||h&&y<o.minMonth||p&&y>o.maxMonth)&&v.add("disabled"),d){var w=W0(d,2),I=w[0],G=w[1];y>I&&y<G&&v.add("range"),y===I&&v.add("range-start"),y===G&&v.add("range-end")}s.includes(y)&&(v.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),v.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),y===o.focused&&v.add("focused"),o.beforeShow&&o.performBeforeHook(g,y,_)})}},{key:"refresh",value:function(){var o=this,s=this.selected[this.year]||[],l=m4(this.range,this.year)||[],h=W0(l,2),p=h[0],d=h[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(g){g.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),g.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(g,y){var v=g.classList;y>p&&y<d&&v.add("range"),y===p&&v.add("range-start"),y===d&&v.add("range-end"),s.includes(y)&&(v.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),v.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),y===o.focused&&v.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(o){o.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(IO);function u7(e){return lA(e).reduce(function(n,r,o){return n+=o?r:r.toUpperCase()},"")}var y4=function(e){function n(r,o){return Kw(this,n),EO(this,n,[r,o])}return xO(n,e),Jw(n,[{key:"init",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(u7(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(f1(Ax("span",12)))),oA(Q1(n.prototype),"init",this).call(this,o)}},{key:"setOptions",value:function(o){if(h1(o,"minDate")&&(o.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=Zw(o.minDate,this.step),this.minDate=J1(this.minYear,0,1))),h1(o,"maxDate")&&(o.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=Zw(o.maxDate,this.step),this.maxDate=J1(this.maxYear,11,31))),o[this.beforeShowOption]!==void 0){var s=o[this.beforeShowOption];this.beforeShow=typeof s=="function"?s:void 0}}},{key:"updateFocus",value:function(){var o=new Date(this.picker.viewDate),s=Zw(o,this.navStep),l=s+9*this.step;this.first=s,this.last=l,this.start=s-this.step,this.focused=Zw(o,this.step)}},{key:"updateSelection",value:function(){var o=this,s=this.picker.datepicker,l=s.dates,h=s.rangepicker;this.selected=l.reduce(function(p,d){return Xw(p,Zw(d,o.step))},[]),h&&h.dates&&(this.range=h.dates.map(function(p){if(p!==void 0)return Zw(p,o.step)}))}},{key:"render",value:function(){var o=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(s,l){var h=s.classList,p=o.start+l*o.step,d=J1(p,0,1);if(s.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(o.cellClass),o.isMinView&&(s.dataset.date=d),s.textContent=s.dataset.year=p,l===0?h.add("prev"):l===11&&h.add("next"),(p<o.minYear||p>o.maxYear)&&h.add("disabled"),o.range){var g=W0(o.range,2),y=g[0],v=g[1];p>y&&p<v&&h.add("range"),p===y&&h.add("range-start"),p===v&&h.add("range-end")}o.selected.includes(p)&&(h.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),h.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),p===o.focused&&h.add("focused"),o.beforeShow&&o.performBeforeHook(s,p,d)})}},{key:"refresh",value:function(){var o=this,s=this.range||[],l=W0(s,2),h=l[0],p=l[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(d){d.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(d){var g=Number(d.textContent),y=d.classList;g>h&&g<p&&y.add("range"),g===h&&y.add("range-start"),g===p&&y.add("range-end"),o.selected.includes(g)&&(y.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),y.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),g===o.focused&&y.add("focused")})}},{key:"refreshFocus",value:function(){var o=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(s){s.classList.remove("focused")}),this.grid.children[o].classList.add("focused")}}])}(IO);function Tx(e,n){var r={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(n,{detail:r}))}function cI(e,n){var r=e.config,o=r.minDate,s=r.maxDate,l=e.picker,h=l.currentView,p=l.viewDate,d;switch(h.id){case 0:d=sI(p,n);break;case 1:d=xx(p,n);break;default:d=xx(p,n*h.navStep)}d=C4(d,o,s),e.picker.changeFocus(d).render()}function P4(e){var n=e.picker.currentView.id;n!==e.config.maxView&&e.picker.changeView(n+1).render()}function R4(e){e.config.updateOnBlur?e.update({autohide:!0}):(e.refresh("input"),e.hide())}function v4(e,n){var r=e.picker,o=new Date(r.viewDate),s=r.currentView.id,l=s===1?sI(o,n-o.getMonth()):xx(o,n-o.getFullYear());r.changeFocus(l).changeView(s-1).render()}function c7(e){var n=e.picker,r=Qw();if(e.config.todayBtnMode===1){if(e.config.autohide){e.setDate(r);return}e.setDate(r,{render:!1}),n.update()}n.viewDate!==r&&n.changeFocus(r),n.changeView(0).render()}function h7(e){e.setDate({clear:!0})}function f7(e){P4(e)}function p7(e){cI(e,-1)}function d7(e){cI(e,1)}function g7(e,n){var r=N4(n,".datepicker-cell");if(!(!r||r.classList.contains("disabled"))){var o=e.picker.currentView,s=o.id,l=o.isMinView;l?e.setDate(Number(r.dataset.date)):s===1?v4(e,Number(r.dataset.month)):v4(e,Number(r.dataset.year))}}function m7(e){!e.inline&&!e.config.disableTouchKeyboard&&e.inputField.focus()}function _4(e,n){if(n.title!==void 0&&(n.title?(e.controls.title.textContent=n.title,iA(e.controls.title)):(e.controls.title.textContent="",rA(e.controls.title))),n.prevArrow){var r=e.controls.prevBtn;uI(r),n.prevArrow.forEach(function(p){r.appendChild(p.cloneNode(!0))})}if(n.nextArrow){var o=e.controls.nextBtn;uI(o),n.nextArrow.forEach(function(p){o.appendChild(p.cloneNode(!0))})}if(n.locale&&(e.controls.todayBtn.textContent=n.locale.today,e.controls.clearBtn.textContent=n.locale.clear),n.todayBtn!==void 0&&(n.todayBtn?iA(e.controls.todayBtn):rA(e.controls.todayBtn)),h1(n,"minDate")||h1(n,"maxDate")){var s=e.datepicker.config,l=s.minDate,h=s.maxDate;e.controls.todayBtn.disabled=!AO(Qw(),l,h)}n.clearBtn!==void 0&&(n.clearBtn?iA(e.controls.clearBtn):rA(e.controls.clearBtn))}function b4(e){var n=e.dates,r=e.config,o=n.length>0?TO(n):r.defaultViewDate;return C4(o,r.minDate,r.maxDate)}function w4(e,n){var r=new Date(e.viewDate),o=new Date(n),s=e.currentView,l=s.id,h=s.year,p=s.first,d=s.last,g=o.getFullYear();switch(e.viewDate=n,g!==r.getFullYear()&&Tx(e.datepicker,"changeYear"),o.getMonth()!==r.getMonth()&&Tx(e.datepicker,"changeMonth"),l){case 0:return n<p||n>d;case 1:return g!==h;default:return g<p||g>d}}function yO(e){return window.getComputedStyle(e).direction}var y7=function(){function e(n){Kw(this,e),this.datepicker=n;var r=i7.replace(/%buttonClass%/g,n.config.buttonClass),o=this.element=f1(r).firstChild,s=W0(o.firstChild.children,3),l=s[0],h=s[1],p=s[2],d=l.firstElementChild,g=W0(l.lastElementChild.children,3),y=g[0],v=g[1],_=g[2],w=W0(p.firstChild.children,2),I=w[0],G=w[1],_t={title:d,prevBtn:y,viewSwitch:v,nextBtn:_,todayBtn:I,clearBtn:G};this.main=h,this.controls=_t;var _r=n.inline?"inline":"dropdown";o.classList.add("datepicker-".concat(_r)),_r==="dropdown"&&o.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),_4(this,n.config),this.viewDate=b4(n),CO(n,[[o,"click",m7.bind(null,n),{capture:!0}],[h,"click",g7.bind(null,n)],[_t.viewSwitch,"click",f7.bind(null,n)],[_t.prevBtn,"click",p7.bind(null,n)],[_t.nextBtn,"click",d7.bind(null,n)],[_t.todayBtn,"click",c7.bind(null,n)],[_t.clearBtn,"click",h7.bind(null,n)]]),this.views=[new a7(this),new l7(this),new y4(this,{id:2,name:"years",cellClass:"year",step:1}),new y4(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[n.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),n.config.container.appendChild(this.element)}return Jw(e,[{key:"setOptions",value:function(r){_4(this,r),this.views.forEach(function(o){o.init(r,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var r=this.datepicker;if(!r.inline){var o=yO(r.inputField);o!==yO(r.config.container)?this.element.dir=o:this.element.dir&&this.element.removeAttribute("dir"),this.place(),r.config.disableTouchKeyboard&&r.inputField.blur()}Tx(r,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,Tx(this.datepicker,"hide"))}},{key:"place",value:function(){var r=this.element,o=r.classList,s=r.style,l=this.datepicker,h=l.config,p=l.inputField,d=h.container,g=this.element.getBoundingClientRect(),y=g.width,v=g.height,_=d.getBoundingClientRect(),w=_.left,I=_.top,G=_.width,_t=p.getBoundingClientRect(),_r=_t.left,_o=_t.top,Ca=_t.width,_a=_t.height,_l=h.orientation,Qa=_l.x,Kc=_l.y,jc,_h,_m;d===document.body?(jc=window.scrollY,_h=_r+window.scrollX,_m=_o+jc):(jc=d.scrollTop,_h=_r-w,_m=_o-I+jc),Qa==="auto"&&(_h<0?(Qa="left",_h=10):_h+y>G?Qa="right":Qa=yO(p)==="rtl"?"right":"left"),Qa==="right"&&(_h-=y-Ca),Kc==="auto"&&(Kc=_m-v<jc?"bottom":"top"),Kc==="top"?_m-=v:_m+=_a,o.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),o.add("datepicker-orient-".concat(Kc),"datepicker-orient-".concat(Qa)),s.top=_m&&"".concat(_m,"px"),s.left=_h&&"".concat(_h,"px")}},{key:"setViewSwitchLabel",value:function(r){this.controls.viewSwitch.textContent=r}},{key:"setPrevBtnDisabled",value:function(r){this.controls.prevBtn.disabled=r}},{key:"setNextBtnDisabled",value:function(r){this.controls.nextBtn.disabled=r}},{key:"changeView",value:function(r){var o=this.currentView,s=this.views[r];return s.id!==o.id&&(this.currentView=s,this._renderMethod="render",Tx(this.datepicker,"changeView"),this.main.replaceChild(s.element,o.element)),this}},{key:"changeFocus",value:function(r){return this._renderMethod=w4(this,r)?"render":"refreshFocus",this.views.forEach(function(o){o.updateFocus()}),this}},{key:"update",value:function(){var r=b4(this.datepicker);return this._renderMethod=w4(this,r)?"render":"refresh",this.views.forEach(function(o){o.updateFocus(),o.updateSelection()}),this}},{key:"render",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,o=r&&this._renderMethod||"render";delete this._renderMethod,this.currentView[o]()}}])}();function L4(e,n,r,o,s,l){if(AO(e,s,l)){if(o(e)){var h=n(e,r);return L4(h,n,r,o,s,l)}return e}}function iI(e,n,r,o){var s=e.picker,l=s.currentView,h=l.step||1,p=s.viewDate,d,g;switch(l.id){case 0:o?p=Ex(p,r*7):n.ctrlKey||n.metaKey?p=xx(p,r):p=Ex(p,r),d=Ex,g=function(v){return l.disabled.includes(v)};break;case 1:p=sI(p,o?r*4:r),d=sI,g=function(v){var _=new Date(v),w=l.year,I=l.disabled;return _.getFullYear()===w&&I.includes(_.getMonth())};break;default:p=xx(p,r*(o?4:1)*h),d=xx,g=function(v){return l.disabled.includes(Zw(v,h))}}p=L4(p,d,r<0?-h:h,g,l.minDate,l.maxDate),p!==void 0&&s.changeFocus(p).render()}function v7(e,n){if(n.key==="Tab"){R4(e);return}var r=e.picker,o=r.currentView,s=o.id,l=o.isMinView;if(r.active)if(e.editMode)switch(n.key){case"Escape":r.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(n.key){case"Escape":r.hide();break;case"ArrowLeft":if(n.ctrlKey||n.metaKey)cI(e,-1);else if(n.shiftKey){e.enterEditMode();return}else iI(e,n,-1,!1);break;case"ArrowRight":if(n.ctrlKey||n.metaKey)cI(e,1);else if(n.shiftKey){e.enterEditMode();return}else iI(e,n,1,!1);break;case"ArrowUp":if(n.ctrlKey||n.metaKey)P4(e);else if(n.shiftKey){e.enterEditMode();return}else iI(e,n,-1,!0);break;case"ArrowDown":if(n.shiftKey&&!n.ctrlKey&&!n.metaKey){e.enterEditMode();return}iI(e,n,1,!0);break;case"Enter":l?e.setDate(r.viewDate):r.changeView(s-1).render();break;case"Backspace":case"Delete":e.enterEditMode();return;default:n.key.length===1&&!n.ctrlKey&&!n.metaKey&&e.enterEditMode();return}else switch(n.key){case"ArrowDown":case"Escape":r.show();break;case"Enter":e.update();break;default:return}n.preventDefault(),n.stopPropagation()}function _7(e){e.config.showOnFocus&&!e._showing&&e.show()}function b7(e,n){var r=n.target;(e.picker.active||e.config.showOnClick)&&(r._active=r===document.activeElement,r._clicking=setTimeout(function(){delete r._active,delete r._clicking},2e3))}function w7(e,n){var r=n.target;r._clicking&&(clearTimeout(r._clicking),delete r._clicking,r._active&&e.enterEditMode(),delete r._active,e.config.showOnClick&&e.show())}function E7(e,n){n.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function x7(e,n){var r=e.element;if(r===document.activeElement){var o=e.picker.element;N4(n,function(s){return s===r||s===o})||R4(e)}}function j4(e,n){return e.map(function(r){return aA(r,n.format,n.locale)}).join(n.dateDelimiter)}function F4(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=e.config,s=e.dates,l=e.rangepicker;if(n.length===0)return r?[]:void 0;var h=l&&e===l.datepickers[1],p=n.reduce(function(d,g){var y=sA(g,o.format,o.locale);if(y===void 0)return d;if(o.pickLevel>0){var v=new Date(y);o.pickLevel===1?y=h?v.setMonth(v.getMonth()+1,0):v.setDate(1):y=h?v.setFullYear(v.getFullYear()+1,0,0):v.setMonth(0,1)}return AO(y,o.minDate,o.maxDate)&&!d.includes(y)&&!o.datesDisabled.includes(y)&&!o.daysOfWeekDisabled.includes(new Date(y).getDay())&&d.push(y),d},[]);if(p.length!==0)return o.multidate&&!r&&(p=p.reduce(function(d,g){return s.includes(g)||d.push(g),d},s.filter(function(d){return!p.includes(d)}))),o.maxNumberOfDates&&p.length>o.maxNumberOfDates?p.slice(o.maxNumberOfDates*-1):p}function hI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e.config,s=e.picker,l=e.inputField;if(n&2){var h=s.active?o.pickLevel:o.startView;s.update().changeView(h).render(r)}n&1&&l&&(l.value=j4(e.dates,o))}function E4(e,n,r){var o=r.clear,s=r.render,l=r.autohide;s===void 0&&(s=!0),s?l===void 0&&(l=e.config.autohide):l=!1;var h=F4(e,n,o);h&&(h.toString()!==e.dates.toString()?(e.dates=h,hI(e,s?3:1),Tx(e,"changeDate")):hI(e,1),l&&e.hide())}var cA=function(){function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;Kw(this,e),n.datepicker=this,this.element=n;var s=this.config=Object.assign({buttonClass:r.buttonClass&&String(r.buttonClass)||"button",container:document.body,defaultViewDate:Qw(),maxDate:void 0,minDate:void 0},mO(uA,this));this._options=r,Object.assign(s,mO(r,this));var l=this.inline=n.tagName!=="INPUT",h,p;if(l)s.container=n,p=fO(n.dataset.date,s.dateDelimiter),delete n.dataset.date;else{var d=r.container?document.querySelector(r.container):null;d&&(s.container=d),h=this.inputField=n,h.classList.add("datepicker-input"),p=fO(h.value,s.dateDelimiter)}if(o){var g=o.inputs.indexOf(h),y=o.datepickers;if(g<0||g>1||!Array.isArray(y))throw Error("Invalid rangepicker object.");y[g]=this,Object.defineProperty(this,"rangepicker",{get:function(){return o}})}this.dates=[];var v=F4(this,p);v&&v.length>0&&(this.dates=v),h&&(h.value=j4(this.dates,s));var _=this.picker=new y7(this);if(l)this.show();else{var w=x7.bind(null,this),I=[[h,"keydown",v7.bind(null,this)],[h,"focus",_7.bind(null,this)],[h,"mousedown",b7.bind(null,this)],[h,"click",w7.bind(null,this)],[h,"paste",E7.bind(null,this)],[document,"mousedown",w],[document,"touchstart",w],[window,"resize",_.place.bind(_)]];CO(this,I)}}return Jw(e,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(r){var o=this.picker,s=mO(r,this);Object.assign(this._options,r),Object.assign(this.config,s),o.setOptions(s),hI(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),M4(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,s=o?function(l){return aA(l,o,r.config.locale)}:function(l){return new Date(l)};if(this.config.multidate)return this.dates.map(s);if(this.dates.length>0)return s(this.dates[0])}},{key:"setDate",value:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var l=[].concat(o),h={},p=TO(o);oI(p)==="object"&&!Array.isArray(p)&&!(p instanceof Date)&&p&&Object.assign(h,l.pop());var d=Array.isArray(l[0])?l[0]:l;E4(this,d,h)}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var o={clear:!0,autohide:!!(r&&r.autohide)},s=fO(this.inputField.value,this.config.dateDelimiter);E4(this,s,o)}}},{key:"refresh",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r&&typeof r!="string"&&(o=r,r=void 0);var s;r==="picker"?s=2:r==="input"?s=1:s=3,hI(this,s,!o)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var o=Object.assign({update:!1},r);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),o.update&&this.update(o)}}}],[{key:"formatDate",value:function(r,o,s){return aA(r,o,s&&eA[s]||eA.en)}},{key:"parseDate",value:function(r,o,s){return sA(r,o,s&&eA[s]||eA.en)}},{key:"locales",get:function(){return eA}}])}();function x4(e){var n=Object.assign({},e);return delete n.inputs,delete n.allowOneSidedRange,delete n.maxNumberOfDates,n}function T4(e,n,r,o){CO(e,[[r,"changeDate",n]]),new cA(r,o,e)}function nA(e,n){if(!e._updating){e._updating=!0;var r=n.target;if(r.datepicker!==void 0){var o=e.datepickers,s={render:!1},l=e.inputs.indexOf(r),h=l===0?1:0,p=o[l].dates[0],d=o[h].dates[0];p!==void 0&&d!==void 0?l===0&&p>d?(o[0].setDate(d,s),o[1].setDate(p,s)):l===1&&p<d&&(o[0].setDate(p,s),o[1].setDate(d,s)):e.allowOneSidedRange||(p!==void 0||d!==void 0)&&(s.clear=!0,o[h].setDate(o[l].dates,s)),o[0].picker.update().render(),o[1].picker.update().render(),delete e._updating}}}var fI=function(){function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kw(this,e);var o=Array.isArray(r.inputs)?r.inputs:Array.from(n.querySelectorAll("input"));if(!(o.length<2)){n.rangepicker=this,this.element=n,this.inputs=o.slice(0,2),this.allowOneSidedRange=!!r.allowOneSidedRange;var s=nA.bind(null,this),l=x4(r),h=[];Object.defineProperty(this,"datepickers",{get:function(){return h}}),T4(this,s,this.inputs[0],l),T4(this,s,this.inputs[1],l),Object.freeze(h),h[0].dates.length>0?nA(this,{target:this.inputs[0]}):h[1].dates.length>0&&nA(this,{target:this.inputs[1]})}}return Jw(e,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(r){this.allowOneSidedRange=!!r.allowOneSidedRange;var o=x4(r);this.datepickers[0].setOptions(o),this.datepickers[1].setOptions(o)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),M4(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,s=o?function(l){return aA(l,o,r.datepickers[0].config.locale)}:function(l){return new Date(l)};return this.dates.map(function(l){return l===void 0?l:s(l)})}},{key:"setDates",value:function(r,o){var s=W0(this.datepickers,2),l=s[0],h=s[1],p=this.dates;this._updating=!0,l.setDate(r),h.setDate(o),delete this._updating,h.dates[0]!==p[1]?nA(this,{target:this.inputs[1]}):l.dates[0]!==p[0]&&nA(this,{target:this.inputs[0]})}}])}();var pI=function(){return pI=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pI.apply(this,arguments)},o_={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},T7={id:null,override:!0},B4=function(){function e(n,r,o){n===void 0&&(n=null),r===void 0&&(r=o_),o===void 0&&(o=T7),this._instanceId=o.id?o.id:n.id,this._datepickerEl=n,this._datepickerInstance=null,this._options=pI(pI({},o_),r),this._initialized=!1,this.init(),ky.addInstance("Datepicker",this,this._instanceId,o.override)}return e.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new fI(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new cA(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},e.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},e.prototype.removeInstance=function(){this.destroy(),ky.removeInstance("Datepicker",this._instanceId)},e.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},e.prototype.getDatepickerInstance=function(){return this._datepickerInstance},e.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof fI)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof cA)return this._datepickerInstance.getDate()},e.prototype.setDate=function(n){if(this._options.rangePicker&&this._datepickerInstance instanceof fI)return this._datepickerInstance.setDates(n);if(!this._options.rangePicker&&this._datepickerInstance instanceof cA)return this._datepickerInstance.setDate(n)},e.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},e.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},e.prototype._getDatepickerOptions=function(n){var r={};return n.buttons&&(r.todayBtn=!0,r.clearBtn=!0,n.autoSelectToday&&(r.todayBtnMode=1)),n.autohide&&(r.autohide=!0),n.format&&(r.format=n.format),n.maxDate&&(r.maxDate=n.maxDate),n.minDate&&(r.minDate=n.minDate),n.orientation&&(r.orientation=n.orientation),n.title&&(r.title=n.title),n.language&&(r.language=n.language),r},e.prototype.updateOnShow=function(n){this._options.onShow=n},e.prototype.updateOnHide=function(n){this._options.onHide=n},e}();function Sx(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(e){if(e){var n=e.hasAttribute("datepicker-buttons"),r=e.hasAttribute("datepicker-autoselect-today"),o=e.hasAttribute("datepicker-autohide"),s=e.getAttribute("datepicker-format"),l=e.getAttribute("datepicker-max-date"),h=e.getAttribute("datepicker-min-date"),p=e.getAttribute("datepicker-orientation"),d=e.getAttribute("datepicker-title"),g=e.getAttribute("datepicker-language"),y=e.hasAttribute("date-rangepicker");new B4(e,{buttons:n||o_.buttons,autoSelectToday:r||o_.autoSelectToday,autohide:o||o_.autohide,format:s||o_.format,maxDate:l||o_.maxDate,minDate:h||o_.minDate,orientation:p||o_.orientation,title:d||o_.title,language:g||o_.language,rangePicker:y||o_.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=B4,window.initDatepickers=Sx);function dI(){ix(),ox(),sx(),ax(),px(),dx(),gx(),mx(),yx(),vx(),_x(),bx(),wx(),Sx()}typeof window<"u"&&(window.initFlowbite=dI);var A7=new xF("load",[ix,ox,sx,ax,px,dx,gx,mx,yx,vx,_x,bx,wx,Sx]);A7.init();var V4=(()=>{class e{constructor(){}ngOnInit(){dI()}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=s0({type:e,selectors:[["app-root"]],standalone:!0,features:[l0],decls:1,vars:0,template:function(o,s){o&1&&xv(0,"router-outlet")},dependencies:[L2]})}return e})();c3(V4,EF).catch(e=>console.error(e));
